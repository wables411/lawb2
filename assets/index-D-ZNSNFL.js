const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/secp256k1-BTT6pQO4.js","assets/hmac-CwN9SmMv.js","assets/secp256k1-CGWaw0Sf.js","assets/embedded-wallet-n5Amuigf.js","assets/if-defined-BMs7eXis.js","assets/index-BAFBEa9d.js","assets/index-D-nobDy9.js","assets/ref-AyMvX2g2.js","assets/index-DDRiN9t_.js","assets/index-DutyT0YA.js","assets/index-DNtyyGGZ.js","assets/index-DgGPLQfq.js","assets/index-D00GzlF8.js","assets/index-CLKoPpPI.js","assets/index-CJvszhUo.js","assets/email-Ds-OS_kh.js","assets/index-BpFy9zlr.js","assets/socials-CzTps5Gl.js","assets/index-CwyorXWh.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-fu_EhzLh.js","assets/index-QLBAGbRQ.js","assets/index-BQhnrK-N.js","assets/index-8fRPD2_V.js","assets/swaps-BUiax8Tq.js","assets/index-CCGA6xP7.js","assets/index-QyUzyYl_.js","assets/index-WHmAUC-c.js","assets/send-DRnk0o5D.js","assets/index-BrTmDGra.js","assets/index-BCibLRdf.js","assets/receive-Br0XzHuj.js","assets/index-BIXBslp0.js","assets/onramp-Cyl8ycUX.js","assets/index-D0C3j0X7.js","assets/index-iV-26zja.js","assets/index-CU8a8Tfh.js","assets/transactions-Cp5APLMo.js","assets/index-DeS9gNqy.js","assets/index-J0KiOLBZ.js","assets/index-BbIbZRrQ.js","assets/index-BQzzKTPg.js","assets/index-D5CKVARJ.js","assets/w3m-modal-BHrc-sKc.js"])))=>i.map(i=>d[i]);
var CI=t=>{throw TypeError(t)};var ub=(t,e,n)=>e.has(t)||CI("Cannot "+n);var q=(t,e,n)=>(ub(t,e,"read from private field"),n?n.call(t):e.get(t)),Ne=(t,e,n)=>e.has(t)?CI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),me=(t,e,n,r)=>(ub(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ve=(t,e,n)=>(ub(t,e,"access private method"),n);var $m=(t,e,n,r)=>({set _(s){me(t,e,s,n)},get _(){return q(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function D0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var tR={exports:{}},j0={},nR={exports:{}},Ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg=Symbol.for("react.element"),DU=Symbol.for("react.portal"),jU=Symbol.for("react.fragment"),UU=Symbol.for("react.strict_mode"),LU=Symbol.for("react.profiler"),MU=Symbol.for("react.provider"),BU=Symbol.for("react.context"),FU=Symbol.for("react.forward_ref"),zU=Symbol.for("react.suspense"),qU=Symbol.for("react.memo"),WU=Symbol.for("react.lazy"),xI=Symbol.iterator;function HU(t){return t===null||typeof t!="object"?null:(t=xI&&t[xI]||t["@@iterator"],typeof t=="function"?t:null)}var rR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sR=Object.assign,iR={};function Ch(t,e,n){this.props=t,this.context=e,this.refs=iR,this.updater=n||rR}Ch.prototype.isReactComponent={};Ch.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ch.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function oR(){}oR.prototype=Ch.prototype;function Fx(t,e,n){this.props=t,this.context=e,this.refs=iR,this.updater=n||rR}var zx=Fx.prototype=new oR;zx.constructor=Fx;sR(zx,Ch.prototype);zx.isPureReactComponent=!0;var SI=Array.isArray,aR=Object.prototype.hasOwnProperty,qx={current:null},cR={key:!0,ref:!0,__self:!0,__source:!0};function lR(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)aR.call(e,r)&&!cR.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Vg,type:t,key:i,ref:o,props:s,_owner:qx.current}}function VU(t,e){return{$$typeof:Vg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vg}function GU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var AI=/\/+/g;function db(t,e){return typeof t=="object"&&t!==null&&t.key!=null?GU(""+t.key):e.toString(36)}function Vy(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vg:case DU:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+db(o,0):r,SI(s)?(n="",t!=null&&(n=t.replace(AI,"$&/")+"/"),Vy(s,e,n,"",function(l){return l})):s!=null&&(Wx(s)&&(s=VU(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(AI,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",SI(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+db(i,a);o+=Vy(i,e,n,c,s)}else if(c=HU(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+db(i,a++),o+=Vy(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dm(t,e,n){if(t==null)return t;var r=[],s=0;return Vy(t,r,"","",function(i){return e.call(n,i,s++)}),r}function KU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tr={current:null},Gy={transition:null},YU={ReactCurrentDispatcher:Tr,ReactCurrentBatchConfig:Gy,ReactCurrentOwner:qx};function uR(){throw Error("act(...) is not supported in production builds of React.")}Ze.Children={map:Dm,forEach:function(t,e,n){Dm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dm(t,function(){e++}),e},toArray:function(t){return Dm(t,function(e){return e})||[]},only:function(t){if(!Wx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ze.Component=Ch;Ze.Fragment=jU;Ze.Profiler=LU;Ze.PureComponent=Fx;Ze.StrictMode=UU;Ze.Suspense=zU;Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YU;Ze.act=uR;Ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=sR({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=qx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)aR.call(e,c)&&!cR.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Vg,type:t.type,key:s,ref:i,props:r,_owner:o}};Ze.createContext=function(t){return t={$$typeof:BU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MU,_context:t},t.Consumer=t};Ze.createElement=lR;Ze.createFactory=function(t){var e=lR.bind(null,t);return e.type=t,e};Ze.createRef=function(){return{current:null}};Ze.forwardRef=function(t){return{$$typeof:FU,render:t}};Ze.isValidElement=Wx;Ze.lazy=function(t){return{$$typeof:WU,_payload:{_status:-1,_result:t},_init:KU}};Ze.memo=function(t,e){return{$$typeof:qU,type:t,compare:e===void 0?null:e}};Ze.startTransition=function(t){var e=Gy.transition;Gy.transition={};try{t()}finally{Gy.transition=e}};Ze.unstable_act=uR;Ze.useCallback=function(t,e){return Tr.current.useCallback(t,e)};Ze.useContext=function(t){return Tr.current.useContext(t)};Ze.useDebugValue=function(){};Ze.useDeferredValue=function(t){return Tr.current.useDeferredValue(t)};Ze.useEffect=function(t,e){return Tr.current.useEffect(t,e)};Ze.useId=function(){return Tr.current.useId()};Ze.useImperativeHandle=function(t,e,n){return Tr.current.useImperativeHandle(t,e,n)};Ze.useInsertionEffect=function(t,e){return Tr.current.useInsertionEffect(t,e)};Ze.useLayoutEffect=function(t,e){return Tr.current.useLayoutEffect(t,e)};Ze.useMemo=function(t,e){return Tr.current.useMemo(t,e)};Ze.useReducer=function(t,e,n){return Tr.current.useReducer(t,e,n)};Ze.useRef=function(t){return Tr.current.useRef(t)};Ze.useState=function(t){return Tr.current.useState(t)};Ze.useSyncExternalStore=function(t,e,n){return Tr.current.useSyncExternalStore(t,e,n)};Ze.useTransition=function(){return Tr.current.useTransition()};Ze.version="18.3.1";nR.exports=Ze;var F=nR.exports;const Ws=pu(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QU=F,JU=Symbol.for("react.element"),ZU=Symbol.for("react.fragment"),XU=Object.prototype.hasOwnProperty,eL=QU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tL={key:!0,ref:!0,__self:!0,__source:!0};function dR(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)XU.call(e,r)&&!tL.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:JU,type:t,key:i,ref:o,props:s,_owner:eL.current}}j0.Fragment=ZU;j0.jsx=dR;j0.jsxs=dR;tR.exports=j0;var m=tR.exports,P_={},hR={exports:{}},Es={},fR={exports:{}},pR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,k){var L=N.length;N.push(k);e:for(;0<L;){var W=L-1>>>1,G=N[W];if(0<s(G,k))N[W]=k,N[L]=G,L=W;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var k=N[0],L=N.pop();if(L!==k){N[0]=L;e:for(var W=0,G=N.length,Z=G>>>1;W<Z;){var Q=2*(W+1)-1,ee=N[Q],ae=Q+1,ye=N[ae];if(0>s(ee,L))ae<G&&0>s(ye,ee)?(N[W]=ye,N[ae]=L,W=ae):(N[W]=ee,N[Q]=L,W=Q);else if(ae<G&&0>s(ye,L))N[W]=ye,N[ae]=L,W=ae;else break e}}return k}function s(N,k){var L=N.sortIndex-k.sortIndex;return L!==0?L:N.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(N){for(var k=n(l);k!==null;){if(k.callback===null)r(l);else if(k.startTime<=N)r(l),k.sortIndex=k.expirationTime,e(c,k);else break;k=n(l)}}function E(N){if(g=!1,v(N),!p)if(n(c)!==null)p=!0,I(_);else{var k=n(l);k!==null&&j(E,k.startTime-N)}}function _(N,k){p=!1,g&&(g=!1,w(T),T=-1),f=!0;var L=h;try{for(v(k),d=n(c);d!==null&&(!(d.expirationTime>k)||N&&!R());){var W=d.callback;if(typeof W=="function"){d.callback=null,h=d.priorityLevel;var G=W(d.expirationTime<=k);k=t.unstable_now(),typeof G=="function"?d.callback=G:d===n(c)&&r(c),v(k)}else r(c);d=n(c)}if(d!==null)var Z=!0;else{var Q=n(l);Q!==null&&j(E,Q.startTime-k),Z=!1}return Z}finally{d=null,h=L,f=!1}}var x=!1,S=null,T=-1,C=5,O=-1;function R(){return!(t.unstable_now()-O<C)}function B(){if(S!==null){var N=t.unstable_now();O=N;var k=!0;try{k=S(!0,N)}finally{k?H():(x=!1,S=null)}}else x=!1}var H;if(typeof b=="function")H=function(){b(B)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,A=z.port2;z.port1.onmessage=B,H=function(){A.postMessage(null)}}else H=function(){y(B,0)};function I(N){S=N,x||(x=!0,H())}function j(N,k){T=y(function(){N(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,I(_))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(N){switch(h){case 1:case 2:case 3:var k=3;break;default:k=h}var L=h;h=k;try{return N()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,k){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var L=h;h=N;try{return k()}finally{h=L}},t.unstable_scheduleCallback=function(N,k,L){var W=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?W+L:W):L=W,N){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=L+G,N={id:u++,callback:k,priorityLevel:N,startTime:L,expirationTime:G,sortIndex:-1},L>W?(N.sortIndex=L,e(l,N),n(c)===null&&N===n(l)&&(g?(w(T),T=-1):g=!0,j(E,L-W))):(N.sortIndex=G,e(c,N),p||f||(p=!0,I(_))),N},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(N){var k=h;return function(){var L=h;h=k;try{return N.apply(this,arguments)}finally{h=L}}}})(pR);fR.exports=pR;var nL=fR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rL=F,bs=nL;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gR=new Set,xp={};function gu(t,e){th(t,e),th(t+"Capture",e)}function th(t,e){for(xp[t]=e,t=0;t<e.length;t++)gR.add(e[t])}var Qo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),k_=Object.prototype.hasOwnProperty,sL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,II={},TI={};function iL(t){return k_.call(TI,t)?!0:k_.call(II,t)?!1:sL.test(t)?TI[t]=!0:(II[t]=!0,!1)}function oL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aL(t,e,n,r){if(e===null||typeof e>"u"||oL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nr(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vn[t]=new Nr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vn[e]=new Nr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vn[t]=new Nr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vn[t]=new Nr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vn[t]=new Nr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vn[t]=new Nr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vn[t]=new Nr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vn[t]=new Nr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vn[t]=new Nr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hx=/[\-:]([a-z])/g;function Vx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hx,Vx);Vn[e]=new Nr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hx,Vx);Vn[e]=new Nr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hx,Vx);Vn[e]=new Nr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vn[t]=new Nr(t,1,!1,t.toLowerCase(),null,!1,!1)});Vn.xlinkHref=new Nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vn[t]=new Nr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gx(t,e,n,r){var s=Vn.hasOwnProperty(e)?Vn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aL(e,n,s,r)&&(n=null),r||s===null?iL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var oa=rL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jm=Symbol.for("react.element"),pd=Symbol.for("react.portal"),gd=Symbol.for("react.fragment"),Kx=Symbol.for("react.strict_mode"),O_=Symbol.for("react.profiler"),mR=Symbol.for("react.provider"),yR=Symbol.for("react.context"),Yx=Symbol.for("react.forward_ref"),R_=Symbol.for("react.suspense"),$_=Symbol.for("react.suspense_list"),Qx=Symbol.for("react.memo"),Ua=Symbol.for("react.lazy"),wR=Symbol.for("react.offscreen"),NI=Symbol.iterator;function Gh(t){return t===null||typeof t!="object"?null:(t=NI&&t[NI]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,hb;function Nf(t){if(hb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hb=e&&e[1]||""}return`
`+hb+t}var fb=!1;function pb(t,e){if(!t||fb)return"";fb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{fb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Nf(t):""}function cL(t){switch(t.tag){case 5:return Nf(t.type);case 16:return Nf("Lazy");case 13:return Nf("Suspense");case 19:return Nf("SuspenseList");case 0:case 2:case 15:return t=pb(t.type,!1),t;case 11:return t=pb(t.type.render,!1),t;case 1:return t=pb(t.type,!0),t;default:return""}}function D_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gd:return"Fragment";case pd:return"Portal";case O_:return"Profiler";case Kx:return"StrictMode";case R_:return"Suspense";case $_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yR:return(t.displayName||"Context")+".Consumer";case mR:return(t._context.displayName||"Context")+".Provider";case Yx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qx:return e=t.displayName||null,e!==null?e:D_(t.type)||"Memo";case Ua:e=t._payload,t=t._init;try{return D_(t(e))}catch{}}return null}function lL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D_(e);case 8:return e===Kx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vR(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uL(t){var e=vR(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Um(t){t._valueTracker||(t._valueTracker=uL(t))}function bR(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vR(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cw(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function j_(t,e){var n=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function PI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Rc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _R(t,e){e=e.checked,e!=null&&Gx(t,"checked",e,!1)}function U_(t,e){_R(t,e);var n=Rc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?L_(t,e.type,n):e.hasOwnProperty("defaultValue")&&L_(t,e.type,Rc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function L_(t,e,n){(e!=="number"||Cw(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pf=Array.isArray;function Nd(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Rc(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function M_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function OI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(Pf(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rc(n)}}function ER(t,e){var n=Rc(e.value),r=Rc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function RI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CR(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CR(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lm,xR=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lm=Lm||document.createElement("div"),Lm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dL=["Webkit","ms","Moz","O"];Object.keys(Vf).forEach(function(t){dL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vf[e]=Vf[t]})});function SR(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vf.hasOwnProperty(t)&&Vf[t]?(""+e).trim():e+"px"}function AR(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=SR(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var hL=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function F_(t,e){if(e){if(hL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function z_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var q_=null;function Jx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var W_=null,Pd=null,kd=null;function $I(t){if(t=Yg(t)){if(typeof W_!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=F0(e),W_(t.stateNode,t.type,e))}}function IR(t){Pd?kd?kd.push(t):kd=[t]:Pd=t}function TR(){if(Pd){var t=Pd,e=kd;if(kd=Pd=null,$I(t),e)for(t=0;t<e.length;t++)$I(e[t])}}function NR(t,e){return t(e)}function PR(){}var gb=!1;function kR(t,e,n){if(gb)return t(e,n);gb=!0;try{return NR(t,e,n)}finally{gb=!1,(Pd!==null||kd!==null)&&(PR(),TR())}}function Ap(t,e){var n=t.stateNode;if(n===null)return null;var r=F0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var H_=!1;if(Qo)try{var Kh={};Object.defineProperty(Kh,"passive",{get:function(){H_=!0}}),window.addEventListener("test",Kh,Kh),window.removeEventListener("test",Kh,Kh)}catch{H_=!1}function fL(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Gf=!1,xw=null,Sw=!1,V_=null,pL={onError:function(t){Gf=!0,xw=t}};function gL(t,e,n,r,s,i,o,a,c){Gf=!1,xw=null,fL.apply(pL,arguments)}function mL(t,e,n,r,s,i,o,a,c){if(gL.apply(this,arguments),Gf){if(Gf){var l=xw;Gf=!1,xw=null}else throw Error(ie(198));Sw||(Sw=!0,V_=l)}}function mu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function OR(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function DI(t){if(mu(t)!==t)throw Error(ie(188))}function yL(t){var e=t.alternate;if(!e){if(e=mu(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return DI(s),t;if(i===r)return DI(s),e;i=i.sibling}throw Error(ie(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function RR(t){return t=yL(t),t!==null?$R(t):null}function $R(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$R(t);if(e!==null)return e;t=t.sibling}return null}var DR=bs.unstable_scheduleCallback,jI=bs.unstable_cancelCallback,wL=bs.unstable_shouldYield,vL=bs.unstable_requestPaint,on=bs.unstable_now,bL=bs.unstable_getCurrentPriorityLevel,Zx=bs.unstable_ImmediatePriority,jR=bs.unstable_UserBlockingPriority,Aw=bs.unstable_NormalPriority,_L=bs.unstable_LowPriority,UR=bs.unstable_IdlePriority,U0=null,no=null;function EL(t){if(no&&typeof no.onCommitFiberRoot=="function")try{no.onCommitFiberRoot(U0,t,void 0,(t.current.flags&128)===128)}catch{}}var Ci=Math.clz32?Math.clz32:SL,CL=Math.log,xL=Math.LN2;function SL(t){return t>>>=0,t===0?32:31-(CL(t)/xL|0)|0}var Mm=64,Bm=4194304;function kf(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Iw(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=kf(a):(i&=o,i!==0&&(r=kf(i)))}else o=n&~s,o!==0?r=kf(o):i!==0&&(r=kf(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ci(e),s=1<<n,r|=t[n],e&=~s;return r}function AL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function IL(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ci(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=AL(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function G_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LR(){var t=Mm;return Mm<<=1,!(Mm&4194240)&&(Mm=64),t}function mb(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ci(e),t[e]=n}function TL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ci(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Xx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ci(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Et=0;function MR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var BR,eS,FR,zR,qR,K_=!1,Fm=[],gc=null,mc=null,yc=null,Ip=new Map,Tp=new Map,Va=[],NL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function UI(t,e){switch(t){case"focusin":case"focusout":gc=null;break;case"dragenter":case"dragleave":mc=null;break;case"mouseover":case"mouseout":yc=null;break;case"pointerover":case"pointerout":Ip.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tp.delete(e.pointerId)}}function Yh(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yg(e),e!==null&&eS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function PL(t,e,n,r,s){switch(e){case"focusin":return gc=Yh(gc,t,e,n,r,s),!0;case"dragenter":return mc=Yh(mc,t,e,n,r,s),!0;case"mouseover":return yc=Yh(yc,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ip.set(i,Yh(Ip.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Tp.set(i,Yh(Tp.get(i)||null,t,e,n,r,s)),!0}return!1}function WR(t){var e=wl(t.target);if(e!==null){var n=mu(e);if(n!==null){if(e=n.tag,e===13){if(e=OR(n),e!==null){t.blockedOn=e,qR(t.priority,function(){FR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ky(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Y_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);q_=r,n.target.dispatchEvent(r),q_=null}else return e=Yg(n),e!==null&&eS(e),t.blockedOn=n,!1;e.shift()}return!0}function LI(t,e,n){Ky(t)&&n.delete(e)}function kL(){K_=!1,gc!==null&&Ky(gc)&&(gc=null),mc!==null&&Ky(mc)&&(mc=null),yc!==null&&Ky(yc)&&(yc=null),Ip.forEach(LI),Tp.forEach(LI)}function Qh(t,e){t.blockedOn===e&&(t.blockedOn=null,K_||(K_=!0,bs.unstable_scheduleCallback(bs.unstable_NormalPriority,kL)))}function Np(t){function e(s){return Qh(s,t)}if(0<Fm.length){Qh(Fm[0],t);for(var n=1;n<Fm.length;n++){var r=Fm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(gc!==null&&Qh(gc,t),mc!==null&&Qh(mc,t),yc!==null&&Qh(yc,t),Ip.forEach(e),Tp.forEach(e),n=0;n<Va.length;n++)r=Va[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Va.length&&(n=Va[0],n.blockedOn===null);)WR(n),n.blockedOn===null&&Va.shift()}var Od=oa.ReactCurrentBatchConfig,Tw=!0;function OL(t,e,n,r){var s=Et,i=Od.transition;Od.transition=null;try{Et=1,tS(t,e,n,r)}finally{Et=s,Od.transition=i}}function RL(t,e,n,r){var s=Et,i=Od.transition;Od.transition=null;try{Et=4,tS(t,e,n,r)}finally{Et=s,Od.transition=i}}function tS(t,e,n,r){if(Tw){var s=Y_(t,e,n,r);if(s===null)Ab(t,e,r,Nw,n),UI(t,r);else if(PL(s,t,e,n,r))r.stopPropagation();else if(UI(t,r),e&4&&-1<NL.indexOf(t)){for(;s!==null;){var i=Yg(s);if(i!==null&&BR(i),i=Y_(t,e,n,r),i===null&&Ab(t,e,r,Nw,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ab(t,e,r,null,n)}}var Nw=null;function Y_(t,e,n,r){if(Nw=null,t=Jx(r),t=wl(t),t!==null)if(e=mu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=OR(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nw=t,null}function HR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bL()){case Zx:return 1;case jR:return 4;case Aw:case _L:return 16;case UR:return 536870912;default:return 16}default:return 16}}var cc=null,nS=null,Yy=null;function VR(){if(Yy)return Yy;var t,e=nS,n=e.length,r,s="value"in cc?cc.value:cc.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Yy=s.slice(t,1<r?1-r:void 0)}function Qy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zm(){return!0}function MI(){return!1}function Cs(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zm:MI,this.isPropagationStopped=MI,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zm)},persist:function(){},isPersistent:zm}),e}var xh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rS=Cs(xh),Kg=Jt({},xh,{view:0,detail:0}),$L=Cs(Kg),yb,wb,Jh,L0=Jt({},Kg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jh&&(Jh&&t.type==="mousemove"?(yb=t.screenX-Jh.screenX,wb=t.screenY-Jh.screenY):wb=yb=0,Jh=t),yb)},movementY:function(t){return"movementY"in t?t.movementY:wb}}),BI=Cs(L0),DL=Jt({},L0,{dataTransfer:0}),jL=Cs(DL),UL=Jt({},Kg,{relatedTarget:0}),vb=Cs(UL),LL=Jt({},xh,{animationName:0,elapsedTime:0,pseudoElement:0}),ML=Cs(LL),BL=Jt({},xh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FL=Cs(BL),zL=Jt({},xh,{data:0}),FI=Cs(zL),qL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HL[t])?!!e[t]:!1}function sS(){return VL}var GL=Jt({},Kg,{key:function(t){if(t.key){var e=qL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sS,charCode:function(t){return t.type==="keypress"?Qy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KL=Cs(GL),YL=Jt({},L0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zI=Cs(YL),QL=Jt({},Kg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sS}),JL=Cs(QL),ZL=Jt({},xh,{propertyName:0,elapsedTime:0,pseudoElement:0}),XL=Cs(ZL),eM=Jt({},L0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tM=Cs(eM),nM=[9,13,27,32],iS=Qo&&"CompositionEvent"in window,Kf=null;Qo&&"documentMode"in document&&(Kf=document.documentMode);var rM=Qo&&"TextEvent"in window&&!Kf,GR=Qo&&(!iS||Kf&&8<Kf&&11>=Kf),qI=" ",WI=!1;function KR(t,e){switch(t){case"keyup":return nM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var md=!1;function sM(t,e){switch(t){case"compositionend":return YR(e);case"keypress":return e.which!==32?null:(WI=!0,qI);case"textInput":return t=e.data,t===qI&&WI?null:t;default:return null}}function iM(t,e){if(md)return t==="compositionend"||!iS&&KR(t,e)?(t=VR(),Yy=nS=cc=null,md=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GR&&e.locale!=="ko"?null:e.data;default:return null}}var oM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function HI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oM[t.type]:e==="textarea"}function QR(t,e,n,r){IR(r),e=Pw(e,"onChange"),0<e.length&&(n=new rS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yf=null,Pp=null;function aM(t){a3(t,0)}function M0(t){var e=vd(t);if(bR(e))return t}function cM(t,e){if(t==="change")return e}var JR=!1;if(Qo){var bb;if(Qo){var _b="oninput"in document;if(!_b){var VI=document.createElement("div");VI.setAttribute("oninput","return;"),_b=typeof VI.oninput=="function"}bb=_b}else bb=!1;JR=bb&&(!document.documentMode||9<document.documentMode)}function GI(){Yf&&(Yf.detachEvent("onpropertychange",ZR),Pp=Yf=null)}function ZR(t){if(t.propertyName==="value"&&M0(Pp)){var e=[];QR(e,Pp,t,Jx(t)),kR(aM,e)}}function lM(t,e,n){t==="focusin"?(GI(),Yf=e,Pp=n,Yf.attachEvent("onpropertychange",ZR)):t==="focusout"&&GI()}function uM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return M0(Pp)}function dM(t,e){if(t==="click")return M0(e)}function hM(t,e){if(t==="input"||t==="change")return M0(e)}function fM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ti=typeof Object.is=="function"?Object.is:fM;function kp(t,e){if(Ti(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!k_.call(e,s)||!Ti(t[s],e[s]))return!1}return!0}function KI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function YI(t,e){var n=KI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=KI(n)}}function XR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?XR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function e3(){for(var t=window,e=Cw();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cw(t.document)}return e}function oS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pM(t){var e=e3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&XR(n.ownerDocument.documentElement,n)){if(r!==null&&oS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=YI(n,i);var o=YI(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gM=Qo&&"documentMode"in document&&11>=document.documentMode,yd=null,Q_=null,Qf=null,J_=!1;function QI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;J_||yd==null||yd!==Cw(r)||(r=yd,"selectionStart"in r&&oS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qf&&kp(Qf,r)||(Qf=r,r=Pw(Q_,"onSelect"),0<r.length&&(e=new rS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yd)))}function qm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var wd={animationend:qm("Animation","AnimationEnd"),animationiteration:qm("Animation","AnimationIteration"),animationstart:qm("Animation","AnimationStart"),transitionend:qm("Transition","TransitionEnd")},Eb={},t3={};Qo&&(t3=document.createElement("div").style,"AnimationEvent"in window||(delete wd.animationend.animation,delete wd.animationiteration.animation,delete wd.animationstart.animation),"TransitionEvent"in window||delete wd.transitionend.transition);function B0(t){if(Eb[t])return Eb[t];if(!wd[t])return t;var e=wd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in t3)return Eb[t]=e[n];return t}var n3=B0("animationend"),r3=B0("animationiteration"),s3=B0("animationstart"),i3=B0("transitionend"),o3=new Map,JI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wc(t,e){o3.set(t,e),gu(e,[t])}for(var Cb=0;Cb<JI.length;Cb++){var xb=JI[Cb],mM=xb.toLowerCase(),yM=xb[0].toUpperCase()+xb.slice(1);Wc(mM,"on"+yM)}Wc(n3,"onAnimationEnd");Wc(r3,"onAnimationIteration");Wc(s3,"onAnimationStart");Wc("dblclick","onDoubleClick");Wc("focusin","onFocus");Wc("focusout","onBlur");Wc(i3,"onTransitionEnd");th("onMouseEnter",["mouseout","mouseover"]);th("onMouseLeave",["mouseout","mouseover"]);th("onPointerEnter",["pointerout","pointerover"]);th("onPointerLeave",["pointerout","pointerover"]);gu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gu("onBeforeInput",["compositionend","keypress","textInput","paste"]);gu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Of));function ZI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mL(r,e,void 0,t),t.currentTarget=null}function a3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;ZI(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;ZI(s,a,l),i=c}}}if(Sw)throw t=V_,Sw=!1,V_=null,t}function Mt(t,e){var n=e[nE];n===void 0&&(n=e[nE]=new Set);var r=t+"__bubble";n.has(r)||(c3(e,t,2,!1),n.add(r))}function Sb(t,e,n){var r=0;e&&(r|=4),c3(n,t,r,e)}var Wm="_reactListening"+Math.random().toString(36).slice(2);function Op(t){if(!t[Wm]){t[Wm]=!0,gR.forEach(function(n){n!=="selectionchange"&&(wM.has(n)||Sb(n,!1,t),Sb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wm]||(e[Wm]=!0,Sb("selectionchange",!1,e))}}function c3(t,e,n,r){switch(HR(e)){case 1:var s=OL;break;case 4:s=RL;break;default:s=tS}n=s.bind(null,e,n,t),s=void 0,!H_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ab(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=wl(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}kR(function(){var l=i,u=Jx(n),d=[];e:{var h=o3.get(t);if(h!==void 0){var f=rS,p=t;switch(t){case"keypress":if(Qy(n)===0)break e;case"keydown":case"keyup":f=KL;break;case"focusin":p="focus",f=vb;break;case"focusout":p="blur",f=vb;break;case"beforeblur":case"afterblur":f=vb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=BI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=jL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=JL;break;case n3:case r3:case s3:f=ML;break;case i3:f=XL;break;case"scroll":f=$L;break;case"wheel":f=tM;break;case"copy":case"cut":case"paste":f=FL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=zI}var g=(e&4)!==0,y=!g&&t==="scroll",w=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,w!==null&&(E=Ap(b,w),E!=null&&g.push(Rp(b,E,v)))),y)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==q_&&(p=n.relatedTarget||n.fromElement)&&(wl(p)||p[Jo]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?wl(p):null,p!==null&&(y=mu(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=BI,E="onMouseLeave",w="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=zI,E="onPointerLeave",w="onPointerEnter",b="pointer"),y=f==null?h:vd(f),v=p==null?h:vd(p),h=new g(E,b+"leave",f,n,u),h.target=y,h.relatedTarget=v,E=null,wl(u)===l&&(g=new g(w,b+"enter",p,n,u),g.target=v,g.relatedTarget=y,E=g),y=E,f&&p)t:{for(g=f,w=p,b=0,v=g;v;v=Ru(v))b++;for(v=0,E=w;E;E=Ru(E))v++;for(;0<b-v;)g=Ru(g),b--;for(;0<v-b;)w=Ru(w),v--;for(;b--;){if(g===w||w!==null&&g===w.alternate)break t;g=Ru(g),w=Ru(w)}g=null}else g=null;f!==null&&XI(d,h,f,g,!1),p!==null&&y!==null&&XI(d,y,p,g,!0)}}e:{if(h=l?vd(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=cM;else if(HI(h))if(JR)_=hM;else{_=uM;var x=lM}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=dM);if(_&&(_=_(t,l))){QR(d,_,n,u);break e}x&&x(t,h,l),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&L_(h,"number",h.value)}switch(x=l?vd(l):window,t){case"focusin":(HI(x)||x.contentEditable==="true")&&(yd=x,Q_=l,Qf=null);break;case"focusout":Qf=Q_=yd=null;break;case"mousedown":J_=!0;break;case"contextmenu":case"mouseup":case"dragend":J_=!1,QI(d,n,u);break;case"selectionchange":if(gM)break;case"keydown":case"keyup":QI(d,n,u)}var S;if(iS)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else md?KR(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(GR&&n.locale!=="ko"&&(md||T!=="onCompositionStart"?T==="onCompositionEnd"&&md&&(S=VR()):(cc=u,nS="value"in cc?cc.value:cc.textContent,md=!0)),x=Pw(l,T),0<x.length&&(T=new FI(T,t,null,n,u),d.push({event:T,listeners:x}),S?T.data=S:(S=YR(n),S!==null&&(T.data=S)))),(S=rM?sM(t,n):iM(t,n))&&(l=Pw(l,"onBeforeInput"),0<l.length&&(u=new FI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=S))}a3(d,e)})}function Rp(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pw(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ap(t,n),i!=null&&r.unshift(Rp(t,i,s)),i=Ap(t,e),i!=null&&r.push(Rp(t,i,s))),t=t.return}return r}function Ru(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function XI(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=Ap(n,i),c!=null&&o.unshift(Rp(n,c,a))):s||(c=Ap(n,i),c!=null&&o.push(Rp(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var vM=/\r\n?/g,bM=/\u0000|\uFFFD/g;function e2(t){return(typeof t=="string"?t:""+t).replace(vM,`
`).replace(bM,"")}function Hm(t,e,n){if(e=e2(e),e2(t)!==e&&n)throw Error(ie(425))}function kw(){}var Z_=null,X_=null;function eE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tE=typeof setTimeout=="function"?setTimeout:void 0,_M=typeof clearTimeout=="function"?clearTimeout:void 0,t2=typeof Promise=="function"?Promise:void 0,EM=typeof queueMicrotask=="function"?queueMicrotask:typeof t2<"u"?function(t){return t2.resolve(null).then(t).catch(CM)}:tE;function CM(t){setTimeout(function(){throw t})}function Ib(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Np(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Np(e)}function wc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function n2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Sh=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Sh,$p="__reactProps$"+Sh,Jo="__reactContainer$"+Sh,nE="__reactEvents$"+Sh,xM="__reactListeners$"+Sh,SM="__reactHandles$"+Sh;function wl(t){var e=t[Xi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jo]||n[Xi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=n2(t);t!==null;){if(n=t[Xi])return n;t=n2(t)}return e}t=n,n=t.parentNode}return null}function Yg(t){return t=t[Xi]||t[Jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function F0(t){return t[$p]||null}var rE=[],bd=-1;function Hc(t){return{current:t}}function zt(t){0>bd||(t.current=rE[bd],rE[bd]=null,bd--)}function Dt(t,e){bd++,rE[bd]=t.current,t.current=e}var $c={},hr=Hc($c),Jr=Hc(!1),Hl=$c;function nh(t,e){var n=t.type.contextTypes;if(!n)return $c;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Zr(t){return t=t.childContextTypes,t!=null}function Ow(){zt(Jr),zt(hr)}function r2(t,e,n){if(hr.current!==$c)throw Error(ie(168));Dt(hr,e),Dt(Jr,n)}function l3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ie(108,lL(t)||"Unknown",s));return Jt({},n,r)}function Rw(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$c,Hl=hr.current,Dt(hr,t),Dt(Jr,Jr.current),!0}function s2(t,e,n){var r=t.stateNode;if(!r)throw Error(ie(169));n?(t=l3(t,e,Hl),r.__reactInternalMemoizedMergedChildContext=t,zt(Jr),zt(hr),Dt(hr,t)):zt(Jr),Dt(Jr,n)}var $o=null,z0=!1,Tb=!1;function u3(t){$o===null?$o=[t]:$o.push(t)}function AM(t){z0=!0,u3(t)}function Vc(){if(!Tb&&$o!==null){Tb=!0;var t=0,e=Et;try{var n=$o;for(Et=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$o=null,z0=!1}catch(s){throw $o!==null&&($o=$o.slice(t+1)),DR(Zx,Vc),s}finally{Et=e,Tb=!1}}return null}var _d=[],Ed=0,$w=null,Dw=0,Bs=[],Fs=0,Vl=null,Fo=1,zo="";function cl(t,e){_d[Ed++]=Dw,_d[Ed++]=$w,$w=t,Dw=e}function d3(t,e,n){Bs[Fs++]=Fo,Bs[Fs++]=zo,Bs[Fs++]=Vl,Vl=t;var r=Fo;t=zo;var s=32-Ci(r)-1;r&=~(1<<s),n+=1;var i=32-Ci(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fo=1<<32-Ci(e)+s|n<<s|r,zo=i+t}else Fo=1<<i|n<<s|r,zo=t}function aS(t){t.return!==null&&(cl(t,1),d3(t,1,0))}function cS(t){for(;t===$w;)$w=_d[--Ed],_d[Ed]=null,Dw=_d[--Ed],_d[Ed]=null;for(;t===Vl;)Vl=Bs[--Fs],Bs[Fs]=null,zo=Bs[--Fs],Bs[Fs]=null,Fo=Bs[--Fs],Bs[Fs]=null}var ys=null,gs=null,Ht=!1,mi=null;function h3(t,e){var n=zs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function i2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ys=t,gs=wc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ys=t,gs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vl!==null?{id:Fo,overflow:zo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ys=t,gs=null,!0):!1;default:return!1}}function sE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function iE(t){if(Ht){var e=gs;if(e){var n=e;if(!i2(t,e)){if(sE(t))throw Error(ie(418));e=wc(n.nextSibling);var r=ys;e&&i2(t,e)?h3(r,n):(t.flags=t.flags&-4097|2,Ht=!1,ys=t)}}else{if(sE(t))throw Error(ie(418));t.flags=t.flags&-4097|2,Ht=!1,ys=t}}}function o2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ys=t}function Vm(t){if(t!==ys)return!1;if(!Ht)return o2(t),Ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eE(t.type,t.memoizedProps)),e&&(e=gs)){if(sE(t))throw f3(),Error(ie(418));for(;e;)h3(t,e),e=wc(e.nextSibling)}if(o2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gs=wc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gs=null}}else gs=ys?wc(t.stateNode.nextSibling):null;return!0}function f3(){for(var t=gs;t;)t=wc(t.nextSibling)}function rh(){gs=ys=null,Ht=!1}function lS(t){mi===null?mi=[t]:mi.push(t)}var IM=oa.ReactCurrentBatchConfig;function Zh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function Gm(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function a2(t){var e=t._init;return e(t._payload)}function p3(t){function e(w,b){if(t){var v=w.deletions;v===null?(w.deletions=[b],w.flags|=16):v.push(b)}}function n(w,b){if(!t)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function s(w,b){return w=Ec(w,b),w.index=0,w.sibling=null,w}function i(w,b,v){return w.index=v,t?(v=w.alternate,v!==null?(v=v.index,v<b?(w.flags|=2,b):v):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,b,v,E){return b===null||b.tag!==6?(b=Db(v,w.mode,E),b.return=w,b):(b=s(b,v),b.return=w,b)}function c(w,b,v,E){var _=v.type;return _===gd?u(w,b,v.props.children,E,v.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ua&&a2(_)===b.type)?(E=s(b,v.props),E.ref=Zh(w,b,v),E.return=w,E):(E=rw(v.type,v.key,v.props,null,w.mode,E),E.ref=Zh(w,b,v),E.return=w,E)}function l(w,b,v,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=jb(v,w.mode,E),b.return=w,b):(b=s(b,v.children||[]),b.return=w,b)}function u(w,b,v,E,_){return b===null||b.tag!==7?(b=Bl(v,w.mode,E,_),b.return=w,b):(b=s(b,v),b.return=w,b)}function d(w,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Db(""+b,w.mode,v),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jm:return v=rw(b.type,b.key,b.props,null,w.mode,v),v.ref=Zh(w,null,b),v.return=w,v;case pd:return b=jb(b,w.mode,v),b.return=w,b;case Ua:var E=b._init;return d(w,E(b._payload),v)}if(Pf(b)||Gh(b))return b=Bl(b,w.mode,v,null),b.return=w,b;Gm(w,b)}return null}function h(w,b,v,E){var _=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:a(w,b,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case jm:return v.key===_?c(w,b,v,E):null;case pd:return v.key===_?l(w,b,v,E):null;case Ua:return _=v._init,h(w,b,_(v._payload),E)}if(Pf(v)||Gh(v))return _!==null?null:u(w,b,v,E,null);Gm(w,v)}return null}function f(w,b,v,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return w=w.get(v)||null,a(b,w,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case jm:return w=w.get(E.key===null?v:E.key)||null,c(b,w,E,_);case pd:return w=w.get(E.key===null?v:E.key)||null,l(b,w,E,_);case Ua:var x=E._init;return f(w,b,v,x(E._payload),_)}if(Pf(E)||Gh(E))return w=w.get(v)||null,u(b,w,E,_,null);Gm(b,E)}return null}function p(w,b,v,E){for(var _=null,x=null,S=b,T=b=0,C=null;S!==null&&T<v.length;T++){S.index>T?(C=S,S=null):C=S.sibling;var O=h(w,S,v[T],E);if(O===null){S===null&&(S=C);break}t&&S&&O.alternate===null&&e(w,S),b=i(O,b,T),x===null?_=O:x.sibling=O,x=O,S=C}if(T===v.length)return n(w,S),Ht&&cl(w,T),_;if(S===null){for(;T<v.length;T++)S=d(w,v[T],E),S!==null&&(b=i(S,b,T),x===null?_=S:x.sibling=S,x=S);return Ht&&cl(w,T),_}for(S=r(w,S);T<v.length;T++)C=f(S,w,T,v[T],E),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?T:C.key),b=i(C,b,T),x===null?_=C:x.sibling=C,x=C);return t&&S.forEach(function(R){return e(w,R)}),Ht&&cl(w,T),_}function g(w,b,v,E){var _=Gh(v);if(typeof _!="function")throw Error(ie(150));if(v=_.call(v),v==null)throw Error(ie(151));for(var x=_=null,S=b,T=b=0,C=null,O=v.next();S!==null&&!O.done;T++,O=v.next()){S.index>T?(C=S,S=null):C=S.sibling;var R=h(w,S,O.value,E);if(R===null){S===null&&(S=C);break}t&&S&&R.alternate===null&&e(w,S),b=i(R,b,T),x===null?_=R:x.sibling=R,x=R,S=C}if(O.done)return n(w,S),Ht&&cl(w,T),_;if(S===null){for(;!O.done;T++,O=v.next())O=d(w,O.value,E),O!==null&&(b=i(O,b,T),x===null?_=O:x.sibling=O,x=O);return Ht&&cl(w,T),_}for(S=r(w,S);!O.done;T++,O=v.next())O=f(S,w,T,O.value,E),O!==null&&(t&&O.alternate!==null&&S.delete(O.key===null?T:O.key),b=i(O,b,T),x===null?_=O:x.sibling=O,x=O);return t&&S.forEach(function(B){return e(w,B)}),Ht&&cl(w,T),_}function y(w,b,v,E){if(typeof v=="object"&&v!==null&&v.type===gd&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case jm:e:{for(var _=v.key,x=b;x!==null;){if(x.key===_){if(_=v.type,_===gd){if(x.tag===7){n(w,x.sibling),b=s(x,v.props.children),b.return=w,w=b;break e}}else if(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ua&&a2(_)===x.type){n(w,x.sibling),b=s(x,v.props),b.ref=Zh(w,x,v),b.return=w,w=b;break e}n(w,x);break}else e(w,x);x=x.sibling}v.type===gd?(b=Bl(v.props.children,w.mode,E,v.key),b.return=w,w=b):(E=rw(v.type,v.key,v.props,null,w.mode,E),E.ref=Zh(w,b,v),E.return=w,w=E)}return o(w);case pd:e:{for(x=v.key;b!==null;){if(b.key===x)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(w,b.sibling),b=s(b,v.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else e(w,b);b=b.sibling}b=jb(v,w.mode,E),b.return=w,w=b}return o(w);case Ua:return x=v._init,y(w,b,x(v._payload),E)}if(Pf(v))return p(w,b,v,E);if(Gh(v))return g(w,b,v,E);Gm(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(w,b.sibling),b=s(b,v),b.return=w,w=b):(n(w,b),b=Db(v,w.mode,E),b.return=w,w=b),o(w)):n(w,b)}return y}var sh=p3(!0),g3=p3(!1),jw=Hc(null),Uw=null,Cd=null,uS=null;function dS(){uS=Cd=Uw=null}function hS(t){var e=jw.current;zt(jw),t._currentValue=e}function oE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rd(t,e){Uw=t,uS=Cd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yr=!0),t.firstContext=null)}function Vs(t){var e=t._currentValue;if(uS!==t)if(t={context:t,memoizedValue:e,next:null},Cd===null){if(Uw===null)throw Error(ie(308));Cd=t,Uw.dependencies={lanes:0,firstContext:t}}else Cd=Cd.next=t;return e}var vl=null;function fS(t){vl===null?vl=[t]:vl.push(t)}function m3(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,fS(e)):(n.next=s.next,s.next=n),e.interleaved=n,Zo(t,r)}function Zo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var La=!1;function pS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function y3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,it&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Zo(t,n)}return s=r.interleaved,s===null?(e.next=e,fS(r)):(e.next=s.next,s.next=e),r.interleaved=e,Zo(t,n)}function Jy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xx(t,n)}}function c2(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Lw(t,e,n,r){var s=t.updateQueue;La=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Jt({},d,h);break e;case 2:La=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Kl|=o,t.lanes=o,t.memoizedState=d}}function l2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ie(191,s));s.call(r)}}}var Qg={},ro=Hc(Qg),Dp=Hc(Qg),jp=Hc(Qg);function bl(t){if(t===Qg)throw Error(ie(174));return t}function gS(t,e){switch(Dt(jp,e),Dt(Dp,t),Dt(ro,Qg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:B_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=B_(e,t)}zt(ro),Dt(ro,e)}function ih(){zt(ro),zt(Dp),zt(jp)}function w3(t){bl(jp.current);var e=bl(ro.current),n=B_(e,t.type);e!==n&&(Dt(Dp,t),Dt(ro,n))}function mS(t){Dp.current===t&&(zt(ro),zt(Dp))}var Kt=Hc(0);function Mw(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nb=[];function yS(){for(var t=0;t<Nb.length;t++)Nb[t]._workInProgressVersionPrimary=null;Nb.length=0}var Zy=oa.ReactCurrentDispatcher,Pb=oa.ReactCurrentBatchConfig,Gl=0,Qt=null,bn=null,Pn=null,Bw=!1,Jf=!1,Up=0,TM=0;function er(){throw Error(ie(321))}function wS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ti(t[n],e[n]))return!1;return!0}function vS(t,e,n,r,s,i){if(Gl=i,Qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zy.current=t===null||t.memoizedState===null?OM:RM,t=n(r,s),Jf){i=0;do{if(Jf=!1,Up=0,25<=i)throw Error(ie(301));i+=1,Pn=bn=null,e.updateQueue=null,Zy.current=$M,t=n(r,s)}while(Jf)}if(Zy.current=Fw,e=bn!==null&&bn.next!==null,Gl=0,Pn=bn=Qt=null,Bw=!1,e)throw Error(ie(300));return t}function bS(){var t=Up!==0;return Up=0,t}function Wi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Qt.memoizedState=Pn=t:Pn=Pn.next=t,Pn}function Gs(){if(bn===null){var t=Qt.alternate;t=t!==null?t.memoizedState:null}else t=bn.next;var e=Pn===null?Qt.memoizedState:Pn.next;if(e!==null)Pn=e,bn=t;else{if(t===null)throw Error(ie(310));bn=t,t={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},Pn===null?Qt.memoizedState=Pn=t:Pn=Pn.next=t}return Pn}function Lp(t,e){return typeof e=="function"?e(t):e}function kb(t){var e=Gs(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=bn,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Gl&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Qt.lanes|=u,Kl|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Ti(r,e.memoizedState)||(Yr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Qt.lanes|=i,Kl|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ob(t){var e=Gs(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ti(i,e.memoizedState)||(Yr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function v3(){}function b3(t,e){var n=Qt,r=Gs(),s=e(),i=!Ti(r.memoizedState,s);if(i&&(r.memoizedState=s,Yr=!0),r=r.queue,_S(C3.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Pn!==null&&Pn.memoizedState.tag&1){if(n.flags|=2048,Mp(9,E3.bind(null,n,r,s,e),void 0,null),$n===null)throw Error(ie(349));Gl&30||_3(n,e,s)}return s}function _3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qt.updateQueue,e===null?(e={lastEffect:null,stores:null},Qt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function E3(t,e,n,r){e.value=n,e.getSnapshot=r,x3(e)&&S3(t)}function C3(t,e,n){return n(function(){x3(e)&&S3(t)})}function x3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ti(t,n)}catch{return!0}}function S3(t){var e=Zo(t,1);e!==null&&xi(e,t,1,-1)}function u2(t){var e=Wi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lp,lastRenderedState:t},e.queue=t,t=t.dispatch=kM.bind(null,Qt,t),[e.memoizedState,t]}function Mp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qt.updateQueue,e===null?(e={lastEffect:null,stores:null},Qt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function A3(){return Gs().memoizedState}function Xy(t,e,n,r){var s=Wi();Qt.flags|=t,s.memoizedState=Mp(1|e,n,void 0,r===void 0?null:r)}function q0(t,e,n,r){var s=Gs();r=r===void 0?null:r;var i=void 0;if(bn!==null){var o=bn.memoizedState;if(i=o.destroy,r!==null&&wS(r,o.deps)){s.memoizedState=Mp(e,n,i,r);return}}Qt.flags|=t,s.memoizedState=Mp(1|e,n,i,r)}function d2(t,e){return Xy(8390656,8,t,e)}function _S(t,e){return q0(2048,8,t,e)}function I3(t,e){return q0(4,2,t,e)}function T3(t,e){return q0(4,4,t,e)}function N3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function P3(t,e,n){return n=n!=null?n.concat([t]):null,q0(4,4,N3.bind(null,e,t),n)}function ES(){}function k3(t,e){var n=Gs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function O3(t,e){var n=Gs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function R3(t,e,n){return Gl&21?(Ti(n,e)||(n=LR(),Qt.lanes|=n,Kl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yr=!0),t.memoizedState=n)}function NM(t,e){var n=Et;Et=n!==0&&4>n?n:4,t(!0);var r=Pb.transition;Pb.transition={};try{t(!1),e()}finally{Et=n,Pb.transition=r}}function $3(){return Gs().memoizedState}function PM(t,e,n){var r=_c(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},D3(t))j3(e,n);else if(n=m3(t,e,n,r),n!==null){var s=Er();xi(n,t,r,s),U3(n,e,r)}}function kM(t,e,n){var r=_c(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(D3(t))j3(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ti(a,o)){var c=e.interleaved;c===null?(s.next=s,fS(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=m3(t,e,s,r),n!==null&&(s=Er(),xi(n,t,r,s),U3(n,e,r))}}function D3(t){var e=t.alternate;return t===Qt||e!==null&&e===Qt}function j3(t,e){Jf=Bw=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function U3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xx(t,n)}}var Fw={readContext:Vs,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useInsertionEffect:er,useLayoutEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useMutableSource:er,useSyncExternalStore:er,useId:er,unstable_isNewReconciler:!1},OM={readContext:Vs,useCallback:function(t,e){return Wi().memoizedState=[t,e===void 0?null:e],t},useContext:Vs,useEffect:d2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xy(4194308,4,N3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xy(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xy(4,2,t,e)},useMemo:function(t,e){var n=Wi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=PM.bind(null,Qt,t),[r.memoizedState,t]},useRef:function(t){var e=Wi();return t={current:t},e.memoizedState=t},useState:u2,useDebugValue:ES,useDeferredValue:function(t){return Wi().memoizedState=t},useTransition:function(){var t=u2(!1),e=t[0];return t=NM.bind(null,t[1]),Wi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qt,s=Wi();if(Ht){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),$n===null)throw Error(ie(349));Gl&30||_3(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,d2(C3.bind(null,r,i,t),[t]),r.flags|=2048,Mp(9,E3.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wi(),e=$n.identifierPrefix;if(Ht){var n=zo,r=Fo;n=(r&~(1<<32-Ci(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Up++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=TM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},RM={readContext:Vs,useCallback:k3,useContext:Vs,useEffect:_S,useImperativeHandle:P3,useInsertionEffect:I3,useLayoutEffect:T3,useMemo:O3,useReducer:kb,useRef:A3,useState:function(){return kb(Lp)},useDebugValue:ES,useDeferredValue:function(t){var e=Gs();return R3(e,bn.memoizedState,t)},useTransition:function(){var t=kb(Lp)[0],e=Gs().memoizedState;return[t,e]},useMutableSource:v3,useSyncExternalStore:b3,useId:$3,unstable_isNewReconciler:!1},$M={readContext:Vs,useCallback:k3,useContext:Vs,useEffect:_S,useImperativeHandle:P3,useInsertionEffect:I3,useLayoutEffect:T3,useMemo:O3,useReducer:Ob,useRef:A3,useState:function(){return Ob(Lp)},useDebugValue:ES,useDeferredValue:function(t){var e=Gs();return bn===null?e.memoizedState=t:R3(e,bn.memoizedState,t)},useTransition:function(){var t=Ob(Lp)[0],e=Gs().memoizedState;return[t,e]},useMutableSource:v3,useSyncExternalStore:b3,useId:$3,unstable_isNewReconciler:!1};function di(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function aE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var W0={isMounted:function(t){return(t=t._reactInternals)?mu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Er(),s=_c(t),i=Wo(r,s);i.payload=e,n!=null&&(i.callback=n),e=vc(t,i,s),e!==null&&(xi(e,t,s,r),Jy(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Er(),s=_c(t),i=Wo(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=vc(t,i,s),e!==null&&(xi(e,t,s,r),Jy(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Er(),r=_c(t),s=Wo(n,r);s.tag=2,e!=null&&(s.callback=e),e=vc(t,s,r),e!==null&&(xi(e,t,r,n),Jy(e,t,r))}};function h2(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!kp(n,r)||!kp(s,i):!0}function L3(t,e,n){var r=!1,s=$c,i=e.contextType;return typeof i=="object"&&i!==null?i=Vs(i):(s=Zr(e)?Hl:hr.current,r=e.contextTypes,i=(r=r!=null)?nh(t,s):$c),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=W0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function f2(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&W0.enqueueReplaceState(e,e.state,null)}function cE(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},pS(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vs(i):(i=Zr(e)?Hl:hr.current,s.context=nh(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(aE(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&W0.enqueueReplaceState(s,s.state,null),Lw(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function oh(t,e){try{var n="",r=e;do n+=cL(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Rb(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DM=typeof WeakMap=="function"?WeakMap:Map;function M3(t,e,n){n=Wo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qw||(qw=!0,vE=r),lE(t,e)},n}function B3(t,e,n){n=Wo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){lE(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lE(t,e),typeof r!="function"&&(bc===null?bc=new Set([this]):bc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function p2(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new DM;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=YM.bind(null,t,e,n),e.then(t,t))}function g2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function m2(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wo(-1,1),e.tag=2,vc(n,e,1))),n.lanes|=1),t)}var jM=oa.ReactCurrentOwner,Yr=!1;function vr(t,e,n,r){e.child=t===null?g3(e,null,n,r):sh(e,t.child,n,r)}function y2(t,e,n,r,s){n=n.render;var i=e.ref;return Rd(e,s),r=vS(t,e,n,r,i,s),n=bS(),t!==null&&!Yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xo(t,e,s)):(Ht&&n&&aS(e),e.flags|=1,vr(t,e,r,s),e.child)}function w2(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!PS(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,F3(t,e,i,r,s)):(t=rw(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:kp,n(o,r)&&t.ref===e.ref)return Xo(t,e,s)}return e.flags|=1,t=Ec(i,r),t.ref=e.ref,t.return=e,e.child=t}function F3(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(kp(i,r)&&t.ref===e.ref)if(Yr=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Yr=!0);else return e.lanes=t.lanes,Xo(t,e,s)}return uE(t,e,n,r,s)}function z3(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Sd,ds),ds|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dt(Sd,ds),ds|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Dt(Sd,ds),ds|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Dt(Sd,ds),ds|=r;return vr(t,e,s,n),e.child}function q3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uE(t,e,n,r,s){var i=Zr(n)?Hl:hr.current;return i=nh(e,i),Rd(e,s),n=vS(t,e,n,r,i,s),r=bS(),t!==null&&!Yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xo(t,e,s)):(Ht&&r&&aS(e),e.flags|=1,vr(t,e,n,s),e.child)}function v2(t,e,n,r,s){if(Zr(n)){var i=!0;Rw(e)}else i=!1;if(Rd(e,s),e.stateNode===null)ew(t,e),L3(e,n,r),cE(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Vs(l):(l=Zr(n)?Hl:hr.current,l=nh(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&f2(e,o,r,l),La=!1;var h=e.memoizedState;o.state=h,Lw(e,r,o,s),c=e.memoizedState,a!==r||h!==c||Jr.current||La?(typeof u=="function"&&(aE(e,n,u,r),c=e.memoizedState),(a=La||h2(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,y3(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:di(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Vs(c):(c=Zr(n)?Hl:hr.current,c=nh(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&f2(e,o,r,c),La=!1,h=e.memoizedState,o.state=h,Lw(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||Jr.current||La?(typeof f=="function"&&(aE(e,n,f,r),p=e.memoizedState),(l=La||h2(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return dE(t,e,n,r,i,s)}function dE(t,e,n,r,s,i){q3(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&s2(e,n,!1),Xo(t,e,i);r=e.stateNode,jM.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=sh(e,t.child,null,i),e.child=sh(e,null,a,i)):vr(t,e,a,i),e.memoizedState=r.state,s&&s2(e,n,!0),e.child}function W3(t){var e=t.stateNode;e.pendingContext?r2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&r2(t,e.context,!1),gS(t,e.containerInfo)}function b2(t,e,n,r,s){return rh(),lS(s),e.flags|=256,vr(t,e,n,r),e.child}var hE={dehydrated:null,treeContext:null,retryLane:0};function fE(t){return{baseLanes:t,cachePool:null,transitions:null}}function H3(t,e,n){var r=e.pendingProps,s=Kt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Dt(Kt,s&1),t===null)return iE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=G0(o,r,0,null),t=Bl(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fE(n),e.memoizedState=hE,t):CS(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return UM(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ec(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ec(a,i):(i=Bl(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?fE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hE,r}return i=t.child,t=i.sibling,r=Ec(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function CS(t,e){return e=G0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Km(t,e,n,r){return r!==null&&lS(r),sh(e,t.child,null,n),t=CS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function UM(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Rb(Error(ie(422))),Km(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=G0({mode:"visible",children:r.children},s,0,null),i=Bl(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&sh(e,t.child,null,o),e.child.memoizedState=fE(o),e.memoizedState=hE,i);if(!(e.mode&1))return Km(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ie(419)),r=Rb(i,r,void 0),Km(t,e,o,r)}if(a=(o&t.childLanes)!==0,Yr||a){if(r=$n,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Zo(t,s),xi(r,t,s,-1))}return NS(),r=Rb(Error(ie(421))),Km(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=QM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,gs=wc(s.nextSibling),ys=e,Ht=!0,mi=null,t!==null&&(Bs[Fs++]=Fo,Bs[Fs++]=zo,Bs[Fs++]=Vl,Fo=t.id,zo=t.overflow,Vl=e),e=CS(e,r.children),e.flags|=4096,e)}function _2(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),oE(t.return,e,n)}function $b(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function V3(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vr(t,e,r.children,n),r=Kt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_2(t,n,e);else if(t.tag===19)_2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Dt(Kt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Mw(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),$b(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Mw(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}$b(e,!0,n,null,i);break;case"together":$b(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ew(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Kl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=Ec(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ec(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LM(t,e,n){switch(e.tag){case 3:W3(e),rh();break;case 5:w3(e);break;case 1:Zr(e.type)&&Rw(e);break;case 4:gS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Dt(jw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Dt(Kt,Kt.current&1),e.flags|=128,null):n&e.child.childLanes?H3(t,e,n):(Dt(Kt,Kt.current&1),t=Xo(t,e,n),t!==null?t.sibling:null);Dt(Kt,Kt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return V3(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Dt(Kt,Kt.current),r)break;return null;case 22:case 23:return e.lanes=0,z3(t,e,n)}return Xo(t,e,n)}var G3,pE,K3,Y3;G3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pE=function(){};K3=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,bl(ro.current);var i=null;switch(n){case"input":s=j_(t,s),r=j_(t,r),i=[];break;case"select":s=Jt({},s,{value:void 0}),r=Jt({},r,{value:void 0}),i=[];break;case"textarea":s=M_(t,s),r=M_(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=kw)}F_(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(xp.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(xp.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Mt("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};Y3=function(t,e,n,r){n!==r&&(e.flags|=4)};function Xh(t,e){if(!Ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function MM(t,e,n){var r=e.pendingProps;switch(cS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(e),null;case 1:return Zr(e.type)&&Ow(),tr(e),null;case 3:return r=e.stateNode,ih(),zt(Jr),zt(hr),yS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mi!==null&&(EE(mi),mi=null))),pE(t,e),tr(e),null;case 5:mS(e);var s=bl(jp.current);if(n=e.type,t!==null&&e.stateNode!=null)K3(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return tr(e),null}if(t=bl(ro.current),Vm(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Xi]=e,r[$p]=i,t=(e.mode&1)!==0,n){case"dialog":Mt("cancel",r),Mt("close",r);break;case"iframe":case"object":case"embed":Mt("load",r);break;case"video":case"audio":for(s=0;s<Of.length;s++)Mt(Of[s],r);break;case"source":Mt("error",r);break;case"img":case"image":case"link":Mt("error",r),Mt("load",r);break;case"details":Mt("toggle",r);break;case"input":PI(r,i),Mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Mt("invalid",r);break;case"textarea":OI(r,i),Mt("invalid",r)}F_(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Hm(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Hm(r.textContent,a,t),s=["children",""+a]):xp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Mt("scroll",r)}switch(n){case"input":Um(r),kI(r,i,!0);break;case"textarea":Um(r),RI(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=kw)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CR(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Xi]=e,t[$p]=r,G3(t,e,!1,!1),e.stateNode=t;e:{switch(o=z_(n,r),n){case"dialog":Mt("cancel",t),Mt("close",t),s=r;break;case"iframe":case"object":case"embed":Mt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Of.length;s++)Mt(Of[s],t);s=r;break;case"source":Mt("error",t),s=r;break;case"img":case"image":case"link":Mt("error",t),Mt("load",t),s=r;break;case"details":Mt("toggle",t),s=r;break;case"input":PI(t,r),s=j_(t,r),Mt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Jt({},r,{value:void 0}),Mt("invalid",t);break;case"textarea":OI(t,r),s=M_(t,r),Mt("invalid",t);break;default:s=r}F_(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?AR(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xR(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Sp(t,c):typeof c=="number"&&Sp(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xp.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Mt("scroll",t):c!=null&&Gx(t,i,c,o))}switch(n){case"input":Um(t),kI(t,r,!1);break;case"textarea":Um(t),RI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Rc(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Nd(t,!!r.multiple,i,!1):r.defaultValue!=null&&Nd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=kw)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tr(e),null;case 6:if(t&&e.stateNode!=null)Y3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(n=bl(jp.current),bl(ro.current),Vm(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xi]=e,(i=r.nodeValue!==n)&&(t=ys,t!==null))switch(t.tag){case 3:Hm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hm(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xi]=e,e.stateNode=r}return tr(e),null;case 13:if(zt(Kt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ht&&gs!==null&&e.mode&1&&!(e.flags&128))f3(),rh(),e.flags|=98560,i=!1;else if(i=Vm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ie(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ie(317));i[Xi]=e}else rh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tr(e),i=!1}else mi!==null&&(EE(mi),mi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Kt.current&1?Cn===0&&(Cn=3):NS())),e.updateQueue!==null&&(e.flags|=4),tr(e),null);case 4:return ih(),pE(t,e),t===null&&Op(e.stateNode.containerInfo),tr(e),null;case 10:return hS(e.type._context),tr(e),null;case 17:return Zr(e.type)&&Ow(),tr(e),null;case 19:if(zt(Kt),i=e.memoizedState,i===null)return tr(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Xh(i,!1);else{if(Cn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Mw(t),o!==null){for(e.flags|=128,Xh(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Dt(Kt,Kt.current&1|2),e.child}t=t.sibling}i.tail!==null&&on()>ah&&(e.flags|=128,r=!0,Xh(i,!1),e.lanes=4194304)}else{if(!r)if(t=Mw(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Xh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ht)return tr(e),null}else 2*on()-i.renderingStartTime>ah&&n!==1073741824&&(e.flags|=128,r=!0,Xh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=on(),e.sibling=null,n=Kt.current,Dt(Kt,r?n&1|2:n&1),e):(tr(e),null);case 22:case 23:return TS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ds&1073741824&&(tr(e),e.subtreeFlags&6&&(e.flags|=8192)):tr(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function BM(t,e){switch(cS(e),e.tag){case 1:return Zr(e.type)&&Ow(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ih(),zt(Jr),zt(hr),yS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mS(e),null;case 13:if(zt(Kt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));rh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return zt(Kt),null;case 4:return ih(),null;case 10:return hS(e.type._context),null;case 22:case 23:return TS(),null;case 24:return null;default:return null}}var Ym=!1,dr=!1,FM=typeof WeakSet=="function"?WeakSet:Set,xe=null;function xd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tn(t,e,r)}else n.current=null}function gE(t,e,n){try{n()}catch(r){tn(t,e,r)}}var E2=!1;function zM(t,e){if(Z_=Tw,t=e3(),oS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(X_={focusedElem:t,selectionRange:n},Tw=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:di(e.type,g),y);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(E){tn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return p=E2,E2=!1,p}function Zf(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&gE(e,n,i)}s=s.next}while(s!==r)}}function H0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Q3(t){var e=t.alternate;e!==null&&(t.alternate=null,Q3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xi],delete e[$p],delete e[nE],delete e[xM],delete e[SM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function J3(t){return t.tag===5||t.tag===3||t.tag===4}function C2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||J3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=kw));else if(r!==4&&(t=t.child,t!==null))for(yE(t,e,n),t=t.sibling;t!==null;)yE(t,e,n),t=t.sibling}function wE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wE(t,e,n),t=t.sibling;t!==null;)wE(t,e,n),t=t.sibling}var qn=null,pi=!1;function pa(t,e,n){for(n=n.child;n!==null;)Z3(t,e,n),n=n.sibling}function Z3(t,e,n){if(no&&typeof no.onCommitFiberUnmount=="function")try{no.onCommitFiberUnmount(U0,n)}catch{}switch(n.tag){case 5:dr||xd(n,e);case 6:var r=qn,s=pi;qn=null,pa(t,e,n),qn=r,pi=s,qn!==null&&(pi?(t=qn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qn.removeChild(n.stateNode));break;case 18:qn!==null&&(pi?(t=qn,n=n.stateNode,t.nodeType===8?Ib(t.parentNode,n):t.nodeType===1&&Ib(t,n),Np(t)):Ib(qn,n.stateNode));break;case 4:r=qn,s=pi,qn=n.stateNode.containerInfo,pi=!0,pa(t,e,n),qn=r,pi=s;break;case 0:case 11:case 14:case 15:if(!dr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gE(n,e,o),s=s.next}while(s!==r)}pa(t,e,n);break;case 1:if(!dr&&(xd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){tn(n,e,a)}pa(t,e,n);break;case 21:pa(t,e,n);break;case 22:n.mode&1?(dr=(r=dr)||n.memoizedState!==null,pa(t,e,n),dr=r):pa(t,e,n);break;default:pa(t,e,n)}}function x2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new FM),e.forEach(function(r){var s=JM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ni(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qn=a.stateNode,pi=!1;break e;case 3:qn=a.stateNode.containerInfo,pi=!0;break e;case 4:qn=a.stateNode.containerInfo,pi=!0;break e}a=a.return}if(qn===null)throw Error(ie(160));Z3(i,o,s),qn=null,pi=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){tn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)X3(e,t),e=e.sibling}function X3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ni(e,t),Di(t),r&4){try{Zf(3,t,t.return),H0(3,t)}catch(g){tn(t,t.return,g)}try{Zf(5,t,t.return)}catch(g){tn(t,t.return,g)}}break;case 1:ni(e,t),Di(t),r&512&&n!==null&&xd(n,n.return);break;case 5:if(ni(e,t),Di(t),r&512&&n!==null&&xd(n,n.return),t.flags&32){var s=t.stateNode;try{Sp(s,"")}catch(g){tn(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&_R(s,i),z_(a,o);var l=z_(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?AR(s,d):u==="dangerouslySetInnerHTML"?xR(s,d):u==="children"?Sp(s,d):Gx(s,u,d,l)}switch(a){case"input":U_(s,i);break;case"textarea":ER(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Nd(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Nd(s,!!i.multiple,i.defaultValue,!0):Nd(s,!!i.multiple,i.multiple?[]:"",!1))}s[$p]=i}catch(g){tn(t,t.return,g)}}break;case 6:if(ni(e,t),Di(t),r&4){if(t.stateNode===null)throw Error(ie(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){tn(t,t.return,g)}}break;case 3:if(ni(e,t),Di(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Np(e.containerInfo)}catch(g){tn(t,t.return,g)}break;case 4:ni(e,t),Di(t);break;case 13:ni(e,t),Di(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(AS=on())),r&4&&x2(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(dr=(l=dr)||u,ni(e,t),dr=l):ni(e,t),Di(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(xe=t,u=t.child;u!==null;){for(d=xe=u;xe!==null;){switch(h=xe,f=h.child,h.tag){case 0:case 11:case 14:case 15:Zf(4,h,h.return);break;case 1:xd(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){tn(r,n,g)}}break;case 5:xd(h,h.return);break;case 22:if(h.memoizedState!==null){A2(d);continue}}f!==null?(f.return=h,xe=f):A2(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=SR("display",o))}catch(g){tn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){tn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ni(e,t),Di(t),r&4&&x2(t);break;case 21:break;default:ni(e,t),Di(t)}}function Di(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(J3(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Sp(s,""),r.flags&=-33);var i=C2(t);wE(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=C2(t);yE(t,a,o);break;default:throw Error(ie(161))}}catch(c){tn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qM(t,e,n){xe=t,e$(t)}function e$(t,e,n){for(var r=(t.mode&1)!==0;xe!==null;){var s=xe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ym;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||dr;a=Ym;var l=dr;if(Ym=o,(dr=c)&&!l)for(xe=s;xe!==null;)o=xe,c=o.child,o.tag===22&&o.memoizedState!==null?I2(s):c!==null?(c.return=o,xe=c):I2(s);for(;i!==null;)xe=i,e$(i),i=i.sibling;xe=s,Ym=a,dr=l}S2(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,xe=i):S2(t)}}function S2(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dr||H0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dr)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:di(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&l2(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}l2(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Np(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}dr||e.flags&512&&mE(e)}catch(h){tn(e,e.return,h)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function A2(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function I2(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{H0(4,e)}catch(c){tn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){tn(e,s,c)}}var i=e.return;try{mE(e)}catch(c){tn(e,i,c)}break;case 5:var o=e.return;try{mE(e)}catch(c){tn(e,o,c)}}}catch(c){tn(e,e.return,c)}if(e===t){xe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,xe=a;break}xe=e.return}}var WM=Math.ceil,zw=oa.ReactCurrentDispatcher,xS=oa.ReactCurrentOwner,Hs=oa.ReactCurrentBatchConfig,it=0,$n=null,hn=null,Hn=0,ds=0,Sd=Hc(0),Cn=0,Bp=null,Kl=0,V0=0,SS=0,Xf=null,Gr=null,AS=0,ah=1/0,Oo=null,qw=!1,vE=null,bc=null,Qm=!1,lc=null,Ww=0,ep=0,bE=null,tw=-1,nw=0;function Er(){return it&6?on():tw!==-1?tw:tw=on()}function _c(t){return t.mode&1?it&2&&Hn!==0?Hn&-Hn:IM.transition!==null?(nw===0&&(nw=LR()),nw):(t=Et,t!==0||(t=window.event,t=t===void 0?16:HR(t.type)),t):1}function xi(t,e,n,r){if(50<ep)throw ep=0,bE=null,Error(ie(185));Gg(t,n,r),(!(it&2)||t!==$n)&&(t===$n&&(!(it&2)&&(V0|=n),Cn===4&&Ga(t,Hn)),Xr(t,r),n===1&&it===0&&!(e.mode&1)&&(ah=on()+500,z0&&Vc()))}function Xr(t,e){var n=t.callbackNode;IL(t,e);var r=Iw(t,t===$n?Hn:0);if(r===0)n!==null&&jI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jI(n),e===1)t.tag===0?AM(T2.bind(null,t)):u3(T2.bind(null,t)),EM(function(){!(it&6)&&Vc()}),n=null;else{switch(MR(r)){case 1:n=Zx;break;case 4:n=jR;break;case 16:n=Aw;break;case 536870912:n=UR;break;default:n=Aw}n=c$(n,t$.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function t$(t,e){if(tw=-1,nw=0,it&6)throw Error(ie(327));var n=t.callbackNode;if($d()&&t.callbackNode!==n)return null;var r=Iw(t,t===$n?Hn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hw(t,r);else{e=r;var s=it;it|=2;var i=r$();($n!==t||Hn!==e)&&(Oo=null,ah=on()+500,Ml(t,e));do try{GM();break}catch(a){n$(t,a)}while(!0);dS(),zw.current=i,it=s,hn!==null?e=0:($n=null,Hn=0,e=Cn)}if(e!==0){if(e===2&&(s=G_(t),s!==0&&(r=s,e=_E(t,s))),e===1)throw n=Bp,Ml(t,0),Ga(t,r),Xr(t,on()),n;if(e===6)Ga(t,r);else{if(s=t.current.alternate,!(r&30)&&!HM(s)&&(e=Hw(t,r),e===2&&(i=G_(t),i!==0&&(r=i,e=_E(t,i))),e===1))throw n=Bp,Ml(t,0),Ga(t,r),Xr(t,on()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:ll(t,Gr,Oo);break;case 3:if(Ga(t,r),(r&130023424)===r&&(e=AS+500-on(),10<e)){if(Iw(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Er(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=tE(ll.bind(null,t,Gr,Oo),e);break}ll(t,Gr,Oo);break;case 4:if(Ga(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ci(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=on()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WM(r/1960))-r,10<r){t.timeoutHandle=tE(ll.bind(null,t,Gr,Oo),r);break}ll(t,Gr,Oo);break;case 5:ll(t,Gr,Oo);break;default:throw Error(ie(329))}}}return Xr(t,on()),t.callbackNode===n?t$.bind(null,t):null}function _E(t,e){var n=Xf;return t.current.memoizedState.isDehydrated&&(Ml(t,e).flags|=256),t=Hw(t,e),t!==2&&(e=Gr,Gr=n,e!==null&&EE(e)),t}function EE(t){Gr===null?Gr=t:Gr.push.apply(Gr,t)}function HM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ti(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ga(t,e){for(e&=~SS,e&=~V0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ci(e),r=1<<n;t[n]=-1,e&=~r}}function T2(t){if(it&6)throw Error(ie(327));$d();var e=Iw(t,0);if(!(e&1))return Xr(t,on()),null;var n=Hw(t,e);if(t.tag!==0&&n===2){var r=G_(t);r!==0&&(e=r,n=_E(t,r))}if(n===1)throw n=Bp,Ml(t,0),Ga(t,e),Xr(t,on()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ll(t,Gr,Oo),Xr(t,on()),null}function IS(t,e){var n=it;it|=1;try{return t(e)}finally{it=n,it===0&&(ah=on()+500,z0&&Vc())}}function Yl(t){lc!==null&&lc.tag===0&&!(it&6)&&$d();var e=it;it|=1;var n=Hs.transition,r=Et;try{if(Hs.transition=null,Et=1,t)return t()}finally{Et=r,Hs.transition=n,it=e,!(it&6)&&Vc()}}function TS(){ds=Sd.current,zt(Sd)}function Ml(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_M(n)),hn!==null)for(n=hn.return;n!==null;){var r=n;switch(cS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ow();break;case 3:ih(),zt(Jr),zt(hr),yS();break;case 5:mS(r);break;case 4:ih();break;case 13:zt(Kt);break;case 19:zt(Kt);break;case 10:hS(r.type._context);break;case 22:case 23:TS()}n=n.return}if($n=t,hn=t=Ec(t.current,null),Hn=ds=e,Cn=0,Bp=null,SS=V0=Kl=0,Gr=Xf=null,vl!==null){for(e=0;e<vl.length;e++)if(n=vl[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}vl=null}return t}function n$(t,e){do{var n=hn;try{if(dS(),Zy.current=Fw,Bw){for(var r=Qt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Bw=!1}if(Gl=0,Pn=bn=Qt=null,Jf=!1,Up=0,xS.current=null,n===null||n.return===null){Cn=1,Bp=e,hn=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Hn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=g2(o);if(f!==null){f.flags&=-257,m2(f,o,a,i,e),f.mode&1&&p2(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){p2(i,l,e),NS();break e}c=Error(ie(426))}}else if(Ht&&a.mode&1){var y=g2(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),m2(y,o,a,i,e),lS(oh(c,a));break e}}i=c=oh(c,a),Cn!==4&&(Cn=2),Xf===null?Xf=[i]:Xf.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=M3(i,c,e);c2(i,w);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(bc===null||!bc.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=B3(i,a,e);c2(i,E);break e}}i=i.return}while(i!==null)}i$(n)}catch(_){e=_,hn===n&&n!==null&&(hn=n=n.return);continue}break}while(!0)}function r$(){var t=zw.current;return zw.current=Fw,t===null?Fw:t}function NS(){(Cn===0||Cn===3||Cn===2)&&(Cn=4),$n===null||!(Kl&268435455)&&!(V0&268435455)||Ga($n,Hn)}function Hw(t,e){var n=it;it|=2;var r=r$();($n!==t||Hn!==e)&&(Oo=null,Ml(t,e));do try{VM();break}catch(s){n$(t,s)}while(!0);if(dS(),it=n,zw.current=r,hn!==null)throw Error(ie(261));return $n=null,Hn=0,Cn}function VM(){for(;hn!==null;)s$(hn)}function GM(){for(;hn!==null&&!wL();)s$(hn)}function s$(t){var e=a$(t.alternate,t,ds);t.memoizedProps=t.pendingProps,e===null?i$(t):hn=e,xS.current=null}function i$(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BM(n,e),n!==null){n.flags&=32767,hn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Cn=6,hn=null;return}}else if(n=MM(n,e,ds),n!==null){hn=n;return}if(e=e.sibling,e!==null){hn=e;return}hn=e=t}while(e!==null);Cn===0&&(Cn=5)}function ll(t,e,n){var r=Et,s=Hs.transition;try{Hs.transition=null,Et=1,KM(t,e,n,r)}finally{Hs.transition=s,Et=r}return null}function KM(t,e,n,r){do $d();while(lc!==null);if(it&6)throw Error(ie(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(TL(t,i),t===$n&&(hn=$n=null,Hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qm||(Qm=!0,c$(Aw,function(){return $d(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Hs.transition,Hs.transition=null;var o=Et;Et=1;var a=it;it|=4,xS.current=null,zM(t,n),X3(n,t),pM(X_),Tw=!!Z_,X_=Z_=null,t.current=n,qM(n),vL(),it=a,Et=o,Hs.transition=i}else t.current=n;if(Qm&&(Qm=!1,lc=t,Ww=s),i=t.pendingLanes,i===0&&(bc=null),EL(n.stateNode),Xr(t,on()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(qw)throw qw=!1,t=vE,vE=null,t;return Ww&1&&t.tag!==0&&$d(),i=t.pendingLanes,i&1?t===bE?ep++:(ep=0,bE=t):ep=0,Vc(),null}function $d(){if(lc!==null){var t=MR(Ww),e=Hs.transition,n=Et;try{if(Hs.transition=null,Et=16>t?16:t,lc===null)var r=!1;else{if(t=lc,lc=null,Ww=0,it&6)throw Error(ie(331));var s=it;for(it|=4,xe=t.current;xe!==null;){var i=xe,o=i.child;if(xe.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(xe=l;xe!==null;){var u=xe;switch(u.tag){case 0:case 11:case 15:Zf(8,u,i)}var d=u.child;if(d!==null)d.return=u,xe=d;else for(;xe!==null;){u=xe;var h=u.sibling,f=u.return;if(Q3(u),u===l){xe=null;break}if(h!==null){h.return=f,xe=h;break}xe=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}xe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,xe=o;else e:for(;xe!==null;){if(i=xe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zf(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,xe=w;break e}xe=i.return}}var b=t.current;for(xe=b;xe!==null;){o=xe;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,xe=v;else e:for(o=b;xe!==null;){if(a=xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:H0(9,a)}}catch(_){tn(a,a.return,_)}if(a===o){xe=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,xe=E;break e}xe=a.return}}if(it=s,Vc(),no&&typeof no.onPostCommitFiberRoot=="function")try{no.onPostCommitFiberRoot(U0,t)}catch{}r=!0}return r}finally{Et=n,Hs.transition=e}}return!1}function N2(t,e,n){e=oh(n,e),e=M3(t,e,1),t=vc(t,e,1),e=Er(),t!==null&&(Gg(t,1,e),Xr(t,e))}function tn(t,e,n){if(t.tag===3)N2(t,t,n);else for(;e!==null;){if(e.tag===3){N2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(bc===null||!bc.has(r))){t=oh(n,t),t=B3(e,t,1),e=vc(e,t,1),t=Er(),e!==null&&(Gg(e,1,t),Xr(e,t));break}}e=e.return}}function YM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Er(),t.pingedLanes|=t.suspendedLanes&n,$n===t&&(Hn&n)===n&&(Cn===4||Cn===3&&(Hn&130023424)===Hn&&500>on()-AS?Ml(t,0):SS|=n),Xr(t,e)}function o$(t,e){e===0&&(t.mode&1?(e=Bm,Bm<<=1,!(Bm&130023424)&&(Bm=4194304)):e=1);var n=Er();t=Zo(t,e),t!==null&&(Gg(t,e,n),Xr(t,n))}function QM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),o$(t,n)}function JM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),o$(t,n)}var a$;a$=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jr.current)Yr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yr=!1,LM(t,e,n);Yr=!!(t.flags&131072)}else Yr=!1,Ht&&e.flags&1048576&&d3(e,Dw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ew(t,e),t=e.pendingProps;var s=nh(e,hr.current);Rd(e,n),s=vS(null,e,r,t,s,n);var i=bS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zr(r)?(i=!0,Rw(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pS(e),s.updater=W0,e.stateNode=s,s._reactInternals=e,cE(e,r,t,n),e=dE(null,e,r,!0,i,n)):(e.tag=0,Ht&&i&&aS(e),vr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ew(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=XM(r),t=di(r,t),s){case 0:e=uE(null,e,r,t,n);break e;case 1:e=v2(null,e,r,t,n);break e;case 11:e=y2(null,e,r,t,n);break e;case 14:e=w2(null,e,r,di(r.type,t),n);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:di(r,s),uE(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:di(r,s),v2(t,e,r,s,n);case 3:e:{if(W3(e),t===null)throw Error(ie(387));r=e.pendingProps,i=e.memoizedState,s=i.element,y3(t,e),Lw(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=oh(Error(ie(423)),e),e=b2(t,e,r,n,s);break e}else if(r!==s){s=oh(Error(ie(424)),e),e=b2(t,e,r,n,s);break e}else for(gs=wc(e.stateNode.containerInfo.firstChild),ys=e,Ht=!0,mi=null,n=g3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(rh(),r===s){e=Xo(t,e,n);break e}vr(t,e,r,n)}e=e.child}return e;case 5:return w3(e),t===null&&iE(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,eE(r,s)?o=null:i!==null&&eE(r,i)&&(e.flags|=32),q3(t,e),vr(t,e,o,n),e.child;case 6:return t===null&&iE(e),null;case 13:return H3(t,e,n);case 4:return gS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=sh(e,null,r,n):vr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:di(r,s),y2(t,e,r,s,n);case 7:return vr(t,e,e.pendingProps,n),e.child;case 8:return vr(t,e,e.pendingProps.children,n),e.child;case 12:return vr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Dt(jw,r._currentValue),r._currentValue=o,i!==null)if(Ti(i.value,o)){if(i.children===s.children&&!Jr.current){e=Xo(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Wo(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),oE(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ie(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),oE(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Rd(e,n),s=Vs(s),r=r(s),e.flags|=1,vr(t,e,r,n),e.child;case 14:return r=e.type,s=di(r,e.pendingProps),s=di(r.type,s),w2(t,e,r,s,n);case 15:return F3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:di(r,s),ew(t,e),e.tag=1,Zr(r)?(t=!0,Rw(e)):t=!1,Rd(e,n),L3(e,r,s),cE(e,r,s,n),dE(null,e,r,!0,t,n);case 19:return V3(t,e,n);case 22:return z3(t,e,n)}throw Error(ie(156,e.tag))};function c$(t,e){return DR(t,e)}function ZM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(t,e,n,r){return new ZM(t,e,n,r)}function PS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XM(t){if(typeof t=="function")return PS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yx)return 11;if(t===Qx)return 14}return 2}function Ec(t,e){var n=t.alternate;return n===null?(n=zs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rw(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")PS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gd:return Bl(n.children,s,i,e);case Kx:o=8,s|=8;break;case O_:return t=zs(12,n,e,s|2),t.elementType=O_,t.lanes=i,t;case R_:return t=zs(13,n,e,s),t.elementType=R_,t.lanes=i,t;case $_:return t=zs(19,n,e,s),t.elementType=$_,t.lanes=i,t;case wR:return G0(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mR:o=10;break e;case yR:o=9;break e;case Yx:o=11;break e;case Qx:o=14;break e;case Ua:o=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=zs(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Bl(t,e,n,r){return t=zs(7,t,r,e),t.lanes=n,t}function G0(t,e,n,r){return t=zs(22,t,r,e),t.elementType=wR,t.lanes=n,t.stateNode={isHidden:!1},t}function Db(t,e,n){return t=zs(6,t,null,e),t.lanes=n,t}function jb(t,e,n){return e=zs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eB(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mb(0),this.expirationTimes=mb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mb(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kS(t,e,n,r,s,i,o,a,c){return t=new eB(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=zs(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pS(i),t}function tB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function l$(t){if(!t)return $c;t=t._reactInternals;e:{if(mu(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(Zr(n))return l3(t,n,e)}return e}function u$(t,e,n,r,s,i,o,a,c){return t=kS(n,r,!0,t,s,i,o,a,c),t.context=l$(null),n=t.current,r=Er(),s=_c(n),i=Wo(r,s),i.callback=e??null,vc(n,i,s),t.current.lanes=s,Gg(t,s,r),Xr(t,r),t}function K0(t,e,n,r){var s=e.current,i=Er(),o=_c(s);return n=l$(n),e.context===null?e.context=n:e.pendingContext=n,e=Wo(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vc(s,e,o),t!==null&&(xi(t,s,o,i),Jy(t,s,o)),o}function Vw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function P2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function OS(t,e){P2(t,e),(t=t.alternate)&&P2(t,e)}function nB(){return null}var d$=typeof reportError=="function"?reportError:function(t){console.error(t)};function RS(t){this._internalRoot=t}Y0.prototype.render=RS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));K0(t,e,null,null)};Y0.prototype.unmount=RS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yl(function(){K0(null,t,null,null)}),e[Jo]=null}};function Y0(t){this._internalRoot=t}Y0.prototype.unstable_scheduleHydration=function(t){if(t){var e=zR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Va.length&&e!==0&&e<Va[n].priority;n++);Va.splice(n,0,t),n===0&&WR(t)}};function $S(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Q0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k2(){}function rB(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=Vw(o);i.call(l)}}var o=u$(e,r,t,0,null,!1,!1,"",k2);return t._reactRootContainer=o,t[Jo]=o.current,Op(t.nodeType===8?t.parentNode:t),Yl(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Vw(c);a.call(l)}}var c=kS(t,0,!1,null,null,!1,!1,"",k2);return t._reactRootContainer=c,t[Jo]=c.current,Op(t.nodeType===8?t.parentNode:t),Yl(function(){K0(e,c,n,r)}),c}function J0(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Vw(o);a.call(c)}}K0(e,o,t,s)}else o=rB(n,e,t,s,r);return Vw(o)}BR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=kf(e.pendingLanes);n!==0&&(Xx(e,n|1),Xr(e,on()),!(it&6)&&(ah=on()+500,Vc()))}break;case 13:Yl(function(){var r=Zo(t,1);if(r!==null){var s=Er();xi(r,t,1,s)}}),OS(t,1)}};eS=function(t){if(t.tag===13){var e=Zo(t,134217728);if(e!==null){var n=Er();xi(e,t,134217728,n)}OS(t,134217728)}};FR=function(t){if(t.tag===13){var e=_c(t),n=Zo(t,e);if(n!==null){var r=Er();xi(n,t,e,r)}OS(t,e)}};zR=function(){return Et};qR=function(t,e){var n=Et;try{return Et=t,e()}finally{Et=n}};W_=function(t,e,n){switch(e){case"input":if(U_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=F0(r);if(!s)throw Error(ie(90));bR(r),U_(r,s)}}}break;case"textarea":ER(t,n);break;case"select":e=n.value,e!=null&&Nd(t,!!n.multiple,e,!1)}};NR=IS;PR=Yl;var sB={usingClientEntryPoint:!1,Events:[Yg,vd,F0,IR,TR,IS]},ef={findFiberByHostInstance:wl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iB={bundleType:ef.bundleType,version:ef.version,rendererPackageName:ef.rendererPackageName,rendererConfig:ef.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=RR(t),t===null?null:t.stateNode},findFiberByHostInstance:ef.findFiberByHostInstance||nB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jm.isDisabled&&Jm.supportsFiber)try{U0=Jm.inject(iB),no=Jm}catch{}}Es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sB;Es.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$S(e))throw Error(ie(200));return tB(t,e,null,n)};Es.createRoot=function(t,e){if(!$S(t))throw Error(ie(299));var n=!1,r="",s=d$;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=kS(t,1,!1,null,null,n,!1,r,s),t[Jo]=e.current,Op(t.nodeType===8?t.parentNode:t),new RS(e)};Es.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=RR(e),t=t===null?null:t.stateNode,t};Es.flushSync=function(t){return Yl(t)};Es.hydrate=function(t,e,n){if(!Q0(e))throw Error(ie(200));return J0(null,t,e,!0,n)};Es.hydrateRoot=function(t,e,n){if(!$S(t))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=d$;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=u$(e,null,t,1,n??null,s,!1,i,o),t[Jo]=e.current,Op(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Y0(e)};Es.render=function(t,e,n){if(!Q0(e))throw Error(ie(200));return J0(null,t,e,!1,n)};Es.unmountComponentAtNode=function(t){if(!Q0(t))throw Error(ie(40));return t._reactRootContainer?(Yl(function(){J0(null,null,t,!1,function(){t._reactRootContainer=null,t[Jo]=null})}),!0):!1};Es.unstable_batchedUpdates=IS;Es.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Q0(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return J0(t,e,n,!1,r)};Es.version="18.3.1-next-f1338f8080-20240426";function h$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h$)}catch(t){console.error(t)}}h$(),hR.exports=Es;var DS=hR.exports,O2=DS;P_.createRoot=O2.createRoot,P_.hydrateRoot=O2.hydrateRoot;const f$="2.31.4";let tf={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${f$}`},ne=class CE extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof CE?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof CE&&n.cause.docsPath||n.docsPath,i=(a=tf.getDocsUrl)==null?void 0:a.call(tf,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...tf.version?[`Version: ${tf.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=f$}walk(e){return p$(this,e)}};function p$(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?p$(t.cause,e):e?null:t}let g$=class extends ne{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class oB extends ne{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}let aB=class extends ne{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};class m$ extends ne{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}}let y$=class extends ne{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class R2 extends ne{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Ah(t,{dir:e,size:n=32}={}){return typeof t=="string"?Cc(t,{dir:e,size:n}):cB(t,{dir:e,size:n})}function Cc(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new y$({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function cB(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new y$({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function ea(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function cn(t){return ea(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Ih(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const lB=new TextEncoder;function Z0(t,e={}){return typeof t=="number"||typeof t=="bigint"?dB(t,e):typeof t=="boolean"?uB(t,e):ea(t)?co(t,e):Dd(t,e)}function uB(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(ki(n,{size:e.size}),Ah(n,{size:e.size})):n}const wo={zero:48,nine:57,A:65,F:70,a:97,f:102};function $2(t){if(t>=wo.zero&&t<=wo.nine)return t-wo.zero;if(t>=wo.A&&t<=wo.F)return t-(wo.A-10);if(t>=wo.a&&t<=wo.f)return t-(wo.a-10)}function co(t,e={}){let n=t;e.size&&(ki(n,{size:e.size}),n=Ah(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=$2(r.charCodeAt(a++)),l=$2(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ne(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function dB(t,e){const n=Ue(t,e);return co(n)}function Dd(t,e={}){const n=lB.encode(t);return typeof e.size=="number"?(ki(n,{size:e.size}),Ah(n,{dir:"right",size:e.size})):n}function ki(t,{size:e}){if(cn(t)>e)throw new aB({givenSize:cn(t),maxSize:e})}function ta(t,e={}){const{signed:n}=e;e.size&&ki(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function na(t,e={}){return Number(ta(t,e))}function w$(t,e={}){let n=co(t);return e.size&&(ki(n,{size:e.size}),n=Ih(n,{dir:"right"})),new TextDecoder().decode(n)}const hB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ql(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ue(t,e):typeof t=="string"?X0(t,e):typeof t=="boolean"?v$(t,e):Ar(t,e)}function v$(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ki(n,{size:e.size}),Ah(n,{size:e.size})):n}function Ar(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=hB[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ki(r,{size:e.size}),Ah(r,{dir:"right",size:e.size})):r}function Ue(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new g$({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ah(a,{size:r}):a}const fB=new TextEncoder;function X0(t,e={}){const n=fB.encode(t);return Ar(n,e)}async function pB(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:Ue(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Dc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new IB(t.type);return`${t.name}(${ev(t.inputs,{includeName:e})})`}function ev(t,{includeName:e=!1}={}){return t?t.map(n=>gB(n,{includeName:e})).join(e?", ":","):""}function gB(t,{includeName:e}){return t.type.startsWith("tuple")?`(${ev(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class mB extends ne{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class D2 extends ne{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class b$ extends ne{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${ev(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class tv extends ne{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class yB extends ne{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class wB extends ne{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${cn(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class vB extends ne{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class __e extends ne{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class E_e extends ne{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class _$ extends ne{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class bB extends ne{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class E$ extends ne{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Gw extends ne{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class _B extends ne{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class C_e extends ne{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class EB extends ne{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Dc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Dc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class CB extends ne{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class xE extends ne{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${ev(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class C$ extends ne{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Dc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class xB extends ne{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class SB extends ne{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class AB extends ne{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class IB extends ne{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function jc(t){return typeof t[0]=="string"?nv(t):TB(t)}function TB(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function nv(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}class Uc extends ne{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}let rv=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Zm=BigInt(2**32-1),j2=BigInt(32);function NB(t,e=!1){return e?{h:Number(t&Zm),l:Number(t>>j2&Zm)}:{h:Number(t>>j2&Zm)|0,l:Number(t&Zm)|0}}function PB(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=NB(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const kB=(t,e,n)=>t<<n|e>>>32-n,OB=(t,e,n)=>e<<n|t>>>32-n,RB=(t,e,n)=>e<<n-32|t>>>64-n,$B=(t,e,n)=>t<<n-32|e>>>64-n,$u=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function DB(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Kw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Jl(t,...e){if(!DB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function S_e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Kw(t.outputLen),Kw(t.blockLen)}function Yw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function x$(t,e){Jl(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function jB(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Fp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ub(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ji(t,e){return t<<32-e|t>>>e}const UB=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function LB(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function MB(t){for(let e=0;e<t.length;e++)t[e]=LB(t[e]);return t}const U2=UB?t=>t:MB,S$=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",BB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function A_e(t){if(Jl(t),S$)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=BB[t[n]];return e}const vo={_0:48,_9:57,A:65,F:70,a:97,f:102};function L2(t){if(t>=vo._0&&t<=vo._9)return t-vo._0;if(t>=vo.A&&t<=vo.F)return t-(vo.A-10);if(t>=vo.a&&t<=vo.f)return t-(vo.a-10)}function I_e(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(S$)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=L2(t.charCodeAt(i)),a=L2(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function FB(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function sv(t){return typeof t=="string"&&(t=FB(t)),Jl(t),t}function T_e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Jl(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class A${}function I$(t){const e=r=>t().update(sv(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function zB(t){const e=(r,s)=>t(s).update(sv(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function N_e(t=32){if($u&&typeof $u.getRandomValues=="function")return $u.getRandomValues(new Uint8Array(t));if($u&&typeof $u.randomBytes=="function")return Uint8Array.from($u.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const qB=BigInt(0),nf=BigInt(1),WB=BigInt(2),HB=BigInt(7),VB=BigInt(256),GB=BigInt(113),T$=[],N$=[],P$=[];for(let t=0,e=nf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],T$.push(2*(5*r+n)),N$.push((t+1)*(t+2)/2%64);let s=qB;for(let i=0;i<7;i++)e=(e<<nf^(e>>HB)*GB)%VB,e&WB&&(s^=nf<<(nf<<BigInt(i))-nf);P$.push(s)}const k$=PB(P$,!0),KB=k$[0],YB=k$[1],M2=(t,e,n)=>n>32?RB(t,e,n):kB(t,e,n),B2=(t,e,n)=>n>32?$B(t,e,n):OB(t,e,n);function O$(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=M2(l,u,1)^n[a],h=B2(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=N$[o],c=M2(s,i,a),l=B2(s,i,a),u=T$[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=KB[r],t[1]^=YB[r]}Fp(n)}class Jg extends A${constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,Kw(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=jB(this.state)}clone(){return this._cloneInto()}keccak(){U2(this.state32),O$(this.state32,this.rounds),U2(this.state32),this.posOut=0,this.pos=0}update(e){Yw(this),e=sv(e),Jl(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Yw(this,!1),Jl(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Kw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(x$(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Fp(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Jg(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Gc=(t,e,n)=>I$(()=>new Jg(e,t,n)),QB=Gc(6,144,224/8),JB=Gc(6,136,256/8),ZB=Gc(6,104,384/8),XB=Gc(6,72,512/8),eF=Gc(1,144,224/8),jS=Gc(1,136,256/8),tF=Gc(1,104,384/8),nF=Gc(1,72,512/8),R$=(t,e,n)=>zB((r={})=>new Jg(e,t,r.dkLen===void 0?n:r.dkLen,!0)),rF=R$(31,168,128/8),sF=R$(31,136,256/8),P_e=Object.freeze(Object.defineProperty({__proto__:null,Keccak:Jg,keccakP:O$,keccak_224:eF,keccak_256:jS,keccak_384:tF,keccak_512:nF,sha3_224:QB,sha3_256:JB,sha3_384:ZB,sha3_512:XB,shake128:rF,shake256:sF},Symbol.toStringTag,{value:"Module"}));function Th(t,e){const n=e||"hex",r=jS(ea(t,{strict:!1})?Z0(t):t);return n==="bytes"?r:Ql(r)}const Lb=new rv(8192);function Zg(t,e){if(Lb.has(`${t}.${e}`))return Lb.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Th(Dd(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return Lb.set(`${t}.${e}`,i),i}function uc(t,e){if(!Ni(t,{strict:!1}))throw new Uc({address:t});return Zg(t,e)}const iF=/^0x[a-fA-F0-9]{40}$/,Mb=new rv(8192);function Ni(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(Mb.has(r))return Mb.get(r);const s=iF.test(t)?t.toLowerCase()===t?!0:n?Zg(t)===t:!0:!1;return Mb.set(r,s),s}function Qw(t,e,n,{strict:r}={}){return ea(t,{strict:!1})?SE(t,e,n,{strict:r}):j$(t,e,n,{strict:r})}function $$(t,e){if(typeof e=="number"&&e>0&&e>cn(t)-1)throw new m$({offset:e,position:"start",size:cn(t)})}function D$(t,e,n){if(typeof e=="number"&&typeof n=="number"&&cn(t)!==n-e)throw new m$({offset:n,position:"end",size:cn(t)})}function j$(t,e,n,{strict:r}={}){$$(t,e);const s=t.slice(e,n);return r&&D$(s,e,n),s}function SE(t,e,n,{strict:r}={}){$$(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&D$(s,e,n),s}const oF=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,U$=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function L$(t,e){if(t.length!==e.length)throw new vB({expectedLength:t.length,givenLength:e.length});const n=aF({params:t,values:e}),r=LS(n);return r.length===0?"0x":r}function aF({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(US({param:t[r],value:e[r]}));return n}function US({param:t,value:e}){const n=MS(t.type);if(n){const[r,s]=n;return lF(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return pF(e,{param:t});if(t.type==="address")return cF(e);if(t.type==="bool")return dF(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=U$.exec(t.type)??[];return hF(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return uF(e,{param:t});if(t.type==="string")return fF(e);throw new xB(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function LS(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=cn(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ue(e+s,{size:32})),r.push(a),s+=cn(a)):n.push(a)}return jc([...n,...r])}function cF(t){if(!Ni(t))throw new Uc({address:t});return{dynamic:!1,encoded:Cc(t.toLowerCase())}}function lF(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new AB(t);if(!r&&t.length!==e)throw new yB({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=US({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=LS(i);if(r){const a=Ue(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?jc([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:jc(i.map(({encoded:o})=>o))}}function uF(t,{param:e}){const[,n]=e.type.split("bytes"),r=cn(t);if(!n){let s=t;return r%32!==0&&(s=Cc(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:jc([Cc(Ue(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new wB({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Cc(t,{dir:"right"})}}function dF(t){if(typeof t!="boolean")throw new ne(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Cc(v$(t))}}function hF(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new g$({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ue(t,{size:32,signed:e})}}function fF(t){const e=X0(t),n=Math.ceil(cn(e)/32),r=[];for(let s=0;s<n;s++)r.push(Cc(Qw(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:jc([Cc(Ue(cn(e),{size:32})),...r])}}function pF(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=US({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?LS(r):jc(r.map(({encoded:s})=>s))}}function MS(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const Bb="/docs/contract/encodeDeployData";function BS(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new mB({docsPath:Bb});if(!("inputs"in s))throw new D2({docsPath:Bb});if(!s.inputs||s.inputs.length===0)throw new D2({docsPath:Bb});const i=L$(s.inputs,n);return nv([r,i])}function Gn(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class yu extends ne{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class sw extends ne{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function gF(t){const e=Th(`0x${t.substring(4)}`).substring(26);return Zg(`0x${e}`)}const mF="modulepreload",yF=function(t){return"/"+t},F2={},sn=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=yF(c),c in F2)return;F2[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":mF,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function wF({hash:t,signature:e}){const n=ea(t)?t:Ql(t),{secp256k1:r}=await sn(async()=>{const{secp256k1:o}=await import("./secp256k1-BTT6pQO4.js");return{secp256k1:o}},__vite__mapDeps([0,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=z2(f);return new r.Signature(ta(l),ta(u)).addRecoveryBit(p)}const o=ea(e)?e:Ql(e);if(cn(o)!==65)throw new Error("invalid signature length");const a=na(`0x${o.slice(130)}`),c=z2(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function z2(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function vF({hash:t,signature:e}){return gF(await wF({hash:t,signature:e}))}class q2 extends ne{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class M$ extends ne{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class bF extends ne{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const _F={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new bF({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new M$({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new q2({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new q2({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function FS(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(_F);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function EF(t,e="hex"){const n=B$(t),r=FS(new Uint8Array(n.length));return n.encode(r),e==="hex"?Ar(r.bytes):r.bytes}function B$(t){return Array.isArray(t)?CF(t.map(e=>B$(e))):xF(t)}function CF(t){const e=t.reduce((s,i)=>s+i.length,0),n=F$(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function xF(t){const e=typeof t=="string"?co(t):t,n=F$(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function F$(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ne("Length is too large.")}function SF(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Th(nv(["0x05",EF([e?Ue(e):"0x",s,n?Ue(n):"0x"])]));return r==="bytes"?co(i):i}async function z$(t){const{authorization:e,signature:n}=t;return vF({hash:SF(e),signature:n??e})}class AE extends ne{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class AF extends ne{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class IF extends ne{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class q$ extends ne{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function W$({chain:t,currentChainId:e}){if(!t)throw new IF;if(e!==t.id)throw new AF({chain:t,currentChainId:e})}const TF={gwei:9,wei:18},NF={ether:-9,wei:9},PF={ether:-18,gwei:-9};function Nh(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function es(t,e="wei"){return Nh(t,NF[e])}class _l extends ne{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(_l,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(_l,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Jw extends ne{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${es(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Jw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class IE extends ne{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${es(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(IE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class TE extends ne{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(TE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class NE extends ne{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(NE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class PE extends ne{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(PE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class kE extends ne{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(kE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class OE extends ne{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(OE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class RE extends ne{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(RE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class $E extends ne{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty($E,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Zw extends ne{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${es(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${es(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Zw,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class iv extends ne{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function zS(t,e="wei"){return Nh(t,TF[e])}function Xg(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class kF extends ne{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class OF extends ne{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Xg(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class RF extends ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=Xg({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${zS(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${es(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${es(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${es(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class H$ extends ne{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class V$ extends ne{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class $F extends ne{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Cr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),DF=t=>t,qS=t=>t;class tp extends ne{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${qS(o)}`,e&&`Request body: ${Cr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class WS extends ne{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${qS(r)}`,`Request body: ${Cr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class W2 extends ne{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${qS(n)}`,`Request body: ${Cr(e)}`],name:"TimeoutError"})}}const jF=-1;class ns extends ne{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof WS?e.code:n??jF}}class xs extends ns{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class zp extends ns{constructor(e){super(e,{code:zp.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class qp extends ns{constructor(e){super(e,{code:qp.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Wp extends ns{constructor(e,{method:n}={}){super(e,{code:Wp.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Wp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Hp extends ns{constructor(e){super(e,{code:Hp.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Hp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Zl extends ns{constructor(e){super(e,{code:Zl.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Zl,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Vp extends ns{constructor(e){super(e,{code:Vp.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Vp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Gp extends ns{constructor(e){super(e,{code:Gp.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Gp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class xc extends ns{constructor(e){super(e,{code:xc.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(xc,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class ch extends ns{constructor(e){super(e,{code:ch.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(ch,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class El extends ns{constructor(e,{method:n}={}){super(e,{code:El.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(El,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class lh extends ns{constructor(e){super(e,{code:lh.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(lh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Kp extends ns{constructor(e){super(e,{code:Kp.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class vn extends xs{constructor(e){super(e,{code:vn.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Yp extends xs{constructor(e){super(e,{code:Yp.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Yp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Qp extends xs{constructor(e,{method:n}={}){super(e,{code:Qp.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Jp extends xs{constructor(e){super(e,{code:Jp.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Jp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Zp extends xs{constructor(e){super(e,{code:Zp.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Zp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class lo extends xs{constructor(e){super(e,{code:lo.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(lo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class uh extends xs{constructor(e){super(e,{code:uh.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(uh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Xp extends xs{constructor(e){super(e,{code:Xp.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Xp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class eg extends xs{constructor(e){super(e,{code:eg.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(eg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class tg extends xs{constructor(e){super(e,{code:tg.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(tg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class ng extends xs{constructor(e){super(e,{code:ng.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(ng,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class rg extends xs{constructor(e){super(e,{code:rg.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(rg,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class dh extends xs{constructor(e){super(e,{code:dh.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(dh,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class UF extends ns{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function HS(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ne?t.walk(s=>(s==null?void 0:s.code)===_l.code):t;return r instanceof ne?new _l({cause:t,message:r.details}):_l.nodeMessage.test(n)?new _l({cause:t,message:t.details}):Jw.nodeMessage.test(n)?new Jw({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):IE.nodeMessage.test(n)?new IE({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):TE.nodeMessage.test(n)?new TE({cause:t,nonce:e==null?void 0:e.nonce}):NE.nodeMessage.test(n)?new NE({cause:t,nonce:e==null?void 0:e.nonce}):PE.nodeMessage.test(n)?new PE({cause:t,nonce:e==null?void 0:e.nonce}):kE.nodeMessage.test(n)?new kE({cause:t}):OE.nodeMessage.test(n)?new OE({cause:t,gas:e==null?void 0:e.gas}):RE.nodeMessage.test(n)?new RE({cause:t,gas:e==null?void 0:e.gas}):$E.nodeMessage.test(n)?new $E({cause:t}):Zw.nodeMessage.test(n)?new Zw({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new iv({cause:t})}function G$(t,{docsPath:e,...n}){const r=(()=>{const s=HS(t,n);return s instanceof iv?t:s})();return new RF(r,{docsPath:e,...n})}function VS(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const LF={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function ov(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=MF(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Ar(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Ue(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Ue(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Ue(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Ue(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Ue(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Ue(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=LF[t.type]),typeof t.value<"u"&&(e.value=Ue(t.value)),e}function MF(t){return t.map(e=>({address:e.address,r:e.r?Ue(BigInt(e.r)):e.r,s:e.s?Ue(BigInt(e.s)):e.s,chainId:Ue(e.chainId),nonce:Ue(e.nonce),...typeof e.yParity<"u"?{yParity:Ue(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Ue(e.v)}:{}}))}function Tt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const BF=2n**256n-1n;function em(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Gn(e):void 0;if(o&&!Ni(o.address))throw new Uc({address:o.address});if(i&&!Ni(i))throw new Uc({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new kF;if(r&&r>BF)throw new Jw({maxFeePerGas:r});if(s&&r&&s>r)throw new Zw({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function tm(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return na(e)}class FF extends ne{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class GS extends ne{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class zF extends ne{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${es(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class K$ extends ne{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Y$={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Q$(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?na(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?na(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?Y$[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=qF(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function qF(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function WF(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:Q$(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function sg(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?Ue(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new K$({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||WF)(c)}async function J$(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function HF(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await Tt(t,sg,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return ta(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):Tt(t,sg,"getBlock")({}),Tt(t,J$,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new GS;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function H2(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new FF;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await Tt(t,sg,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new GS;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await HF(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await Tt(t,J$,"getGasPrice")({}))}}class VF extends ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=Xg({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${zS(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${es(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${es(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${es(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function GF(t,{docsPath:e,...n}){const r=(()=>{const s=HS(t,n);return s instanceof iv?t:s})();return new VF(r,{docsPath:e,...n})}class KF extends ne{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class YF extends ne{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function V2(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function QF(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=V2(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=V2(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function G2(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new R2({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new R2({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function JF(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=Ue(e)),n!==void 0&&(o.nonce=Ue(n)),r!==void 0&&(o.state=G2(r)),s!==void 0){if(o.state)throw new YF;o.stateDiff=G2(s)}return o}function Z$(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Ni(n,{strict:!1}))throw new Uc({address:n});if(e[n])throw new KF({address:n});e[n]=JF(r)}return e}async function X$(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?Ue(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function eD(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Gn(n):void 0;try{let z=function(I){const{block:j,request:N,rpcStateOverride:k}=I;return t.request({method:"eth_estimateGas",params:k?[N,j??"latest",k]:j?[N,j]:[N]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:b,nonce:v,value:E,stateOverride:_,...x}=await av(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof d=="bigint"?Ue(d):void 0)||h,C=Z$(_),O=await(async()=>{if(x.to)return x.to;if(c&&c.length>0)return await z$({authorization:c[0]}).catch(()=>{throw new ne("`to` is required. Could not infer from `authorizationList`")})})();em(e);const R=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,H=(R||ov)({...VS(x,{format:R}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:b,nonce:v,to:O,value:E});let A=BigInt(await z({block:T,request:H,rpcStateOverride:C}));if(c){const I=await X$(t,{address:H.from}),j=await Promise.all(c.map(async N=>{const{address:k}=N,L=await z({block:T,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:k,value:Ue(I)},rpcStateOverride:C}).catch(()=>100000n);return 2n*BigInt(L)}));A+=j.reduce((N,k)=>N+k,0n)}return A}catch(a){throw GF(a,{...e,account:r,chain:t.chain})}}async function tD(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Ue(r):n]},{dedupe:!!r});return na(s)}function nD(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>co(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Ar(i))}function rD(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>co(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>co(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Ar(o))}function ZF(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function XF(t,e,n){return t&e^~t&n}function e9(t,e,n){return t&e^t&n^e&n}class t9 extends A${constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Ub(this.buffer)}update(e){Yw(this),e=sv(e),Jl(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=Ub(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Yw(this),x$(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Fp(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;ZF(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=Ub(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const ga=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),n9=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ma=new Uint32Array(64);class r9 extends t9{constructor(e=32){super(64,e,8,!1),this.A=ga[0]|0,this.B=ga[1]|0,this.C=ga[2]|0,this.D=ga[3]|0,this.E=ga[4]|0,this.F=ga[5]|0,this.G=ga[6]|0,this.H=ga[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ma[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=ma[d-15],f=ma[d-2],p=ji(h,7)^ji(h,18)^h>>>3,g=ji(f,17)^ji(f,19)^f>>>10;ma[d]=g+ma[d-7]+p+ma[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ji(a,6)^ji(a,11)^ji(a,25),f=u+h+XF(a,c,l)+n9[d]+ma[d]|0,g=(ji(r,2)^ji(r,13)^ji(r,22))+e9(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Fp(ma)}destroy(){this.set(0,0,0,0,0,0,0,0),Fp(this.buffer)}}const s9=I$(()=>new r9),i9=s9;function o9(t,e){return i9(ea(t,{strict:!1})?Z0(t):t)}function a9(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=o9(e);return s.set([n],0),r==="bytes"?s:Ar(s)}function c9(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(a9({commitment:i,to:r,version:n}));return s}const K2=6,sD=32,KS=4096,iD=sD*KS,Y2=iD*K2-1-1*KS*K2;class l9 extends ne{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class u9 extends ne{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function d9(t){const e=typeof t.data=="string"?co(t.data):t.data,n=cn(e);if(!n)throw new u9;if(n>Y2)throw new l9({maxSize:Y2,size:n});const r=[];let s=!0,i=0;for(;s;){const o=FS(new Uint8Array(iD));let a=0;for(;a<KS;){const c=e.slice(i,i+(sD-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Ar(o.bytes))}function h9(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??d9({data:e}),i=t.commitments??nD({blobs:s,kzg:n,to:r}),o=t.proofs??rD({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function f9(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new OF({transaction:t})}const oD=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Q2=new Map;async function av(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=oD,type:u}=e,d=n&&Gn(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await Tt(t,sg,"getBlock")({blockTag:"latest"}),f)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await Tt(t,tm,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const w=await y();h.nonce=await c.consume({address:d.address,chainId:w,client:t})}else h.nonce=await Tt(t,tD,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const w=nD({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=c9({commitments:w,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=rD({blobs:r,commitments:w,kzg:o}),v=h9({blobs:r,commitments:w,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await y()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=f9(h)}catch{let w=Q2.get(t.uid);if(typeof w>"u"){const b=await p();w=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",Q2.set(t.uid,w)}h.type=w?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const w=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await H2(t,{block:w,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new zF({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new GS;if(typeof e.gasPrice>"u"){const w=await p(),{gasPrice:b}=await H2(t,{block:w,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await Tt(t,eD,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),em(h),delete h.parameters,h}async function aD(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const Fb=new rv(128);async function nm(t,e){var b,v,E,_;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...y}=e;if(typeof n>"u")throw new yu({docsPath:"/docs/actions/wallet/sendTransaction"});const w=n?Gn(n):null;try{em(e);const x=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await z$({authorization:i[0]}).catch(()=>{throw new ne("`to` is required. Could not infer from `authorizationList`.")})})();if((w==null?void 0:w.type)==="json-rpc"||w===null){let S;r!==null&&(S=await Tt(t,tm,"getChainId")({}),W$({currentChainId:S,chain:r}));const T=(E=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:E.format,O=(T||ov)({...VS(y,{format:T}),accessList:s,authorizationList:i,blobs:o,chainId:S,data:a,from:w==null?void 0:w.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:x,type:p,value:g}),R=Fb.get(t.uid),B=R?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:B,params:[O]},{retryCount:0})}catch(H){if(R===!1)throw H;const z=H;if(z.name==="InvalidInputRpcError"||z.name==="InvalidParamsRpcError"||z.name==="MethodNotFoundRpcError"||z.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(A=>(Fb.set(t.uid,!0),A)).catch(A=>{const I=A;throw I.name==="MethodNotFoundRpcError"||I.name==="MethodNotSupportedRpcError"?(Fb.set(t.uid,!1),z):I});throw z}}if((w==null?void 0:w.type)==="local"){const S=await Tt(t,av,"prepareTransactionRequest")({account:w,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:w.nonceManager,parameters:[...oD,"sidecars"],type:p,value:g,...y,to:x}),T=(_=r==null?void 0:r.serializers)==null?void 0:_.transaction,C=await w.signTransaction(S,{serializer:T});return await Tt(t,aD,"sendRawTransaction")({serializedTransaction:C})}throw(w==null?void 0:w.type)==="smart"?new sw({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new sw({docsPath:"/docs/actions/wallet/sendTransaction",type:w==null?void 0:w.type})}catch(x){throw x instanceof sw?x:G$(x,{...e,account:w,chain:e.chain||void 0})}}function p9(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=BS({abi:n,args:r,bytecode:s});return nm(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const DE=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],k_e=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],g9=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],m9=[...g9,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}];function y9(t,e={}){typeof e.size<"u"&&ki(t,{size:e.size});const n=Ar(t,e);return ta(n,e)}function w9(t,e={}){let n=t;if(typeof e.size<"u"&&(ki(n,{size:e.size}),n=Ih(n)),n.length>1||n[0]>1)throw new oB(n);return!!n[0]}function Ho(t,e={}){typeof e.size<"u"&&ki(t,{size:e.size});const n=Ar(t,e);return na(n,e)}function v9(t,e={}){let n=t;return typeof e.size<"u"&&(ki(n,{size:e.size}),n=Ih(n,{dir:"right"})),new TextDecoder().decode(n)}function cv(t,e){const n=typeof e=="string"?co(e):e,r=FS(n);if(cn(n)===0&&t.length>0)throw new tv;if(cn(e)&&cn(e)<32)throw new b$({data:typeof e=="string"?e:Ar(e),params:t,size:cn(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=jd(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function jd(t,e,{staticPosition:n}){const r=MS(e.type);if(r){const[s,i]=r;return _9(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return S9(t,e,{staticPosition:n});if(e.type==="address")return b9(t);if(e.type==="bool")return E9(t);if(e.type.startsWith("bytes"))return C9(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return x9(t,e);if(e.type==="string")return A9(t,{staticPosition:n});throw new SB(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const J2=32,jE=32;function b9(t){const e=t.readBytes(32);return[Zg(Ar(j$(e,-20))),32]}function _9(t,e,{length:n,staticPosition:r}){if(!n){const o=Ho(t.readBytes(jE)),a=r+o,c=a+J2;t.setPosition(a);const l=Ho(t.readBytes(J2)),u=ig(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=jd(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(ig(e)){const o=Ho(t.readBytes(jE)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=jd(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=jd(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function E9(t){return[w9(t.readBytes(32),{size:32}),32]}function C9(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Ho(t.readBytes(32));t.setPosition(n+o);const a=Ho(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Ar(c),32]}return[Ar(t.readBytes(Number.parseInt(s),32)),32]}function x9(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?y9(s,{signed:n}):Ho(s,{signed:n}),32]}function S9(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(ig(e)){const o=Ho(t.readBytes(jE)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=jd(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=jd(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function A9(t,{staticPosition:e}){const n=Ho(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Ho(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=v9(Ih(i));return t.setPosition(e+32),[o,32]}function ig(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(ig);const n=MS(t.type);return!!(n&&ig({...t,type:n[1]}))}const I9=t=>Th(Z0(t));function T9(t){return I9(t)}const N9="1.0.8";let Qs=class UE extends Error{constructor(e,n={}){var o;const r=n.cause instanceof UE?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof UE&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${N9}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function aa(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const cD=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,lD=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,uD=/^\(.+?\).*?$/,Z2=/^tuple(?<array>(\[(\d*)\])*)$/;function LE(t){let e=t.type;if(Z2.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=LE(i),s<n-1&&(e+=", ")}const r=aa(Z2,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,LE({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function rf(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=LE(s),r!==n-1&&(e+=", ")}return e}function P9(t){var e;return t.type==="function"?`function ${t.name}(${rf(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${rf(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${rf(t.inputs)})`:t.type==="error"?`error ${t.name}(${rf(t.inputs)})`:t.type==="constructor"?`constructor(${rf(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const dD=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function k9(t){return dD.test(t)}function O9(t){return aa(dD,t)}const hD=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function R9(t){return hD.test(t)}function $9(t){return aa(hD,t)}const fD=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function D9(t){return fD.test(t)}function j9(t){return aa(fD,t)}const pD=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function gD(t){return pD.test(t)}function U9(t){return aa(pD,t)}const mD=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function L9(t){return mD.test(t)}function M9(t){return aa(mD,t)}const yD=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function B9(t){return yD.test(t)}function F9(t){return aa(yD,t)}const z9=/^receive\(\) external payable$/;function q9(t){return z9.test(t)}const W9=new Set(["indexed"]),ME=new Set(["calldata","memory","storage"]);class H9 extends Qs{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class V9 extends Qs{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class G9 extends Qs{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class K9 extends Qs{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Y9 extends Qs{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Q9 extends Qs{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class J9 extends Qs{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Ph extends Qs{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Z9 extends Qs{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class X9 extends Qs{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class e7 extends Qs{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class t7 extends Qs{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function n7(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const zb=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function r7(t,e={}){if(D9(t))return s7(t,e);if(R9(t))return i7(t,e);if(k9(t))return o7(t,e);if(L9(t))return a7(t,e);if(B9(t))return c7(t);if(q9(t))return{type:"receive",stateMutability:"payable"};throw new Z9({signature:t})}function s7(t,e={}){const n=j9(t);if(!n)throw new Ph({signature:t,type:"function"});const r=vi(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Xl(r[a],{modifiers:ME,structs:e,type:"function"}));const o=[];if(n.returns){const a=vi(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Xl(a[l],{modifiers:ME,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function i7(t,e={}){const n=$9(t);if(!n)throw new Ph({signature:t,type:"event"});const r=vi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Xl(r[o],{modifiers:W9,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function o7(t,e={}){const n=O9(t);if(!n)throw new Ph({signature:t,type:"error"});const r=vi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Xl(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function a7(t,e={}){const n=M9(t);if(!n)throw new Ph({signature:t,type:"constructor"});const r=vi(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Xl(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function c7(t){const e=F9(t);if(!e)throw new Ph({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const l7=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,u7=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,d7=/^u?int$/;function Xl(t,e){var d,h;const n=n7(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(zb.has(n))return zb.get(n);const r=uD.test(t),s=aa(r?u7:l7,t);if(!s)throw new G9({param:t});if(s.name&&f7(s.name))throw new K9({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=vi(s.type),p=[],g=f.length;for(let y=0;y<g;y++)p.push(Xl(f[y],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(d7.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!wD(c))throw new V9({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new Y9({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(ME.has(s.modifier)&&!p7(c,!!s.array))throw new Q9({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return zb.set(n,u),u}function vi(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?vi(a,[...e,n.trim()]):vi(a,e,`${n}${o}`,r);case"(":return vi(a,e,`${n}${o}`,r+1);case")":return vi(a,e,`${n}${o}`,r-1);default:return vi(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new t7({current:n,depth:r});return e.push(n.trim()),e}function wD(t){return t==="address"||t==="bool"||t==="function"||t==="string"||cD.test(t)||lD.test(t)}const h7=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function f7(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||cD.test(t)||lD.test(t)||h7.test(t)}function p7(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function g7(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!gD(a))continue;const c=U9(a);if(!c)throw new Ph({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Xl(p,{type:"struct"});u.push(g)}if(!u.length)throw new X9({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=vD(c,e)}return r}const m7=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function vD(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(uD.test(o.type))r.push(o);else{const c=aa(m7,o.type);if(!(c!=null&&c.type))throw new J9({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new e7({type:u});r.push({...o,type:`tuple${l??""}`,components:vD(e[u]??[],e,new Set([...n,u]))})}else if(wD(u))r.push(o);else throw new H9({type:u})}}return r}function bD(t){const e=g7(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];gD(i)||n.push(r7(i,e))}return n}function y7(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ne("Unable to normalize signature.");return s}const w7=t=>{const e=typeof t=="string"?t:P9(t);return y7(e)};function _D(t){return T9(w7(t))}const YS=_D,QS=t=>Qw(_D(t),0,4);function JS(t){const{abi:e,args:n=[],name:r}=t,s=ea(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?QS(a)===r:a.type==="event"?YS(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?BE(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=ED(a.inputs,o.inputs,n);if(l)throw new EB({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function BE(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ni(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>BE(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>BE(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function ED(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return ED(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ni(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ni(n[r],{strict:!1}):!1)return o}}const qb="/docs/contract/decodeFunctionResult";function ZS(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=JS({abi:e,args:n,name:r});if(!a)throw new Gw(r,{docsPath:qb});i=a}if(i.type!=="function")throw new Gw(void 0,{docsPath:qb});if(!i.outputs)throw new _B(i.name,{docsPath:qb});const o=cv(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const X2="/docs/contract/encodeFunctionData";function v7(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=JS({abi:e,args:n,name:r});if(!i)throw new Gw(r,{docsPath:X2});s=i}if(s.type!=="function")throw new Gw(void 0,{docsPath:X2});return{abi:[s],functionName:QS(Dc(s))}}function rm(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:v7(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?L$(s.inputs,e??[]):void 0;return nv([i,o??"0x"])}function XS({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new AE({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new AE({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const CD={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},b7={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},_7={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function E7(t){const{abi:e,data:n}=t,r=Qw(n,0,4);if(r==="0x")throw new tv;const i=[...e||[],b7,_7].find(o=>o.type==="error"&&r===QS(Dc(o)));if(!i)throw new _$(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?cv(i.inputs,Qw(n,4)):void 0,errorName:i.name}}function xD({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Cr(e[i]):e[i]}`).join(", ")})`}class C7 extends ne{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var y;const p=n?Gn(n):void 0;let g=Xg({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${zS(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${es(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${es(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${es(l)} gwei`,nonce:u});f&&(g+=`
${QF(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class SD extends ne{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=JS({abi:n,args:r,name:o}),l=c?xD({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Dc(c,{includeName:!0}):void 0,d=Xg({address:s&&DF(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class FE extends ne{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=E7({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=CD[f]}else{const f=u?Dc(u,{includeName:!0}):void 0,p=u&&h?xD({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof _$&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class x7 extends ne{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class S7 extends ne{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class eA extends ne{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function A7(t,e){var r,s,i,o,a,c;if(!(t instanceof ne))return!1;const n=t.walk(l=>l instanceof FE);return n instanceof FE?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||n.reason===CD[50]):!1}function I7(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return ea(e)?e:null}function T7(t){return`[${t.slice(2)}]`}function N7(t){const e=new Uint8Array(32).fill(0);return t?I7(t)||Th(Dd(t)):Ar(e)}function P7(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Dd(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=Dd(s[i]);o.byteLength>255&&(o=Dd(T7(N7(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const k7=3;function Xw(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof eA?t:t instanceof ne?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof tv?new x7({functionName:i}):[k7,Zl.code].includes(c)&&(l||u||d||h)?new FE({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof WS?u:h??d}):t;return new SD(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}const O7="0.1.1";function R7(){return O7}let AD=class zE extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof zE){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof zE&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${R7()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return ID(this,e)}};function ID(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?ID(t.cause,e):e?null:t}function $7(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new U7({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function Do(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new j7({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?D7(c,r):c}function D7(t,e){return $7(t,{dir:"left",size:e})}let j7=class extends AD{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},U7=class extends AD{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function L7(t){return{address:t.address,amount:Do(t.amount),index:Do(t.index),validatorIndex:Do(t.validatorIndex)}}function M7(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Do(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Do(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Do(t.gasLimit)},...typeof t.number=="bigint"&&{number:Do(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Do(t.prevRandao)},...typeof t.time=="bigint"&&{time:Do(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(L7)}}}const B7="0x82ad56cb",F7="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",z7="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe";function q7(t,{docsPath:e,...n}){const r=(()=>{const s=HS(t,n);return s instanceof iv?t:s})();return new C7(r,{docsPath:e,...n})}function tA(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const Wb=new Map;function TD({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>Wb.delete(e),a=()=>c().map(({args:u})=>u),c=()=>Wb.get(e)||[],l=u=>Wb.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=tA();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function ND(t,e){var H,z,A,I;const{account:n=t.account,authorizationList:r,batch:s=!!((H=t.batch)!=null&&H.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:b,nonce:v,to:E,value:_,stateOverride:x,...S}=e,T=n?Gn(n):void 0;if(u&&(h||f))throw new ne("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&E)throw new ne("Cannot provide both `code` & `to` as parameters.");const C=u&&d,O=h&&f&&E&&d,R=C||O,B=C?V7({code:u,data:d}):O?G7({data:d,factory:h,factoryData:f,to:E}):d;try{em(e);const N=(typeof i=="bigint"?Ue(i):void 0)||o,k=l?M7(l):void 0,L=Z$(x),W=(I=(A=(z=t.chain)==null?void 0:z.formatters)==null?void 0:A.transactionRequest)==null?void 0:I.format,Z=(W||ov)({...VS(S,{format:W}),from:T==null?void 0:T.address,accessList:a,authorizationList:r,blobs:c,data:B,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:w,maxPriorityFeePerGas:b,nonce:v,to:R?void 0:E,value:_});if(s&&W7({request:Z})&&!L&&!k)try{return await H7(t,{...Z,blockNumber:i,blockTag:o})}catch(ae){if(!(ae instanceof q$)&&!(ae instanceof AE))throw ae}const Q=(()=>{const ae=[Z,N];return L&&k?[...ae,L,k]:L?[...ae,L]:k?[...ae,{},k]:ae})(),ee=await t.request({method:"eth_call",params:Q});return ee==="0x"?{data:void 0}:{data:ee}}catch(j){const N=K7(j),{offchainLookup:k,offchainLookupSignature:L}=await sn(async()=>{const{offchainLookup:W,offchainLookupSignature:G}=await import("./ccip-DejzMUUj.js");return{offchainLookup:W,offchainLookupSignature:G}},[]);if(t.ccipRead!==!1&&(N==null?void 0:N.slice(0,10))===L&&E)return{data:await k(t,{data:N,to:E})};throw R&&(N==null?void 0:N.slice(0,10))==="0x101bb98d"?new S7({factory:h}):q7(j,{...e,account:T,chain:t.chain})}}function W7({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(B7)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function H7(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new q$;l=XS({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?Ue(s):void 0)||i,{schedule:h}=TD({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(y){return y.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async y=>{const w=y.map(E=>({allowFailure:!0,callData:E.data,target:E.to})),b=rm({abi:DE,args:[w],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return ZS({abi:DE,args:[w],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new eA({data:f});return f==="0x"?{data:void 0}:{data:f}}function V7(t){const{code:e,data:n}=t;return BS({abi:bD(["constructor(bytes, bytes)"]),bytecode:F7,args:[e,n]})}function G7(t){const{data:e,factory:n,factoryData:r,to:s}=t;return BS({abi:bD(["constructor(address, bytes, address, bytes)"]),bytecode:z7,args:[s,e,n,r]})}function K7(t){var n;if(!(t instanceof ne))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function nA(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=rm({abi:n,args:s,functionName:i});try{const{data:c}=await Tt(t,ND,"call")({...o,data:a,to:r});return ZS({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Xw(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Y7(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=XS({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:m9,functionName:"reverse",args:[Ql(P7(c))],blockNumber:n,blockTag:r},u=Tt(t,nA,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(A7(l))return null;throw l}}function Q7(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function J7(t){const e=Q7(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}const Z7=new Map,X7=new Map;function ez(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Z7),r=e(t,X7);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function tz(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=ez(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const nz=t=>`blockNumber.${t}`;async function rz(t,{cacheTime:e=t.cacheTime}={}){const n=await tz(()=>t.request({method:"eth_blockNumber"}),{cacheKey:nz(t.uid),cacheTime:e});return BigInt(n)}function PD(t,e){if(!Ni(t,{strict:!1}))throw new Uc({address:t});if(!Ni(e,{strict:!1}))throw new Uc({address:e});return t.toLowerCase()===e.toLowerCase()}const eT="/docs/contract/decodeEventLog";function sz(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new bB({docsPath:eT});const c=e.find(g=>g.type==="event"&&o===YS(Dc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new E$(o,{docsPath:eT});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[y,w]=f[g],b=a[g];if(!b)throw new C$({abiItem:c,param:y});h[d?w:y.name||w]=iz({param:y,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=cv(p,n);if(g)if(d)for(let y=0;y<u.length;y++)h[y]=h[y]??g.shift();else for(let y=0;y<p.length;y++)h[p[y].name]=g[y]}catch(g){if(i)throw g instanceof b$||g instanceof M$?new xE({abiItem:c,data:n,params:p,size:cn(n)}):g}else if(i)throw new xE({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function iz({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(cv([t],e)||[])[0]}function oz(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===YS(u));if(!c)return null;const l=sz({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!az({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof E$)return null;if(c instanceof xE||c instanceof C$){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function az(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?PD(o,a):i.type==="string"||i.type==="bytes"?Th(Z0(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function kD(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function cz(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>kD(i));return!("abi"in e)||!e.abi?s:oz({abi:e.abi,logs:s,strict:n})}async function OD(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?Ue(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Ue(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,Ue(i)]},{dedupe:!!a}),!c)throw new H$({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||Q$)(c)}const RD={"0x0":"reverted","0x1":"success"};function lz(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>kD(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?na(t.transactionIndex):null,status:t.status?RD[t.status]:null,type:t.type?Y$[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function tT(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new V$({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||lz)(n)}async function uz(t,e){var w;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((w=t.batch)==null?void 0:w.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=XS({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:E,args:_,functionName:x}=l[b];try{const S=rm({abi:v,args:_,functionName:x});p+=(S.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(S.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:S,target:E}]}catch(S){const T=Xw(S,{abi:v,address:E,args:_,docsPath:"/docs/contract/multicall",functionName:x,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:E}]}}const g=await Promise.allSettled(h.map(b=>Tt(t,nA,"readContract")({abi:DE,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),y=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let _=0;_<h[b].length;_++)y.push({status:"failure",error:v.reason,result:void 0});continue}const E=v.value;for(let _=0;_<E.length;_++){const{returnData:x,success:S}=E[_],{callData:T}=h[b][_],{abi:C,address:O,functionName:R,args:B}=l[y.length];try{if(T==="0x")throw new tv;if(!S)throw new eA({data:x});const H=ZS({abi:C,args:B,data:x,functionName:R});y.push(r?{result:H,status:"success"}:H)}catch(H){const z=Xw(H,{abi:C,address:O,args:B,docsPath:"/docs/contract/multicall",functionName:R});if(!r)throw z;y.push({error:z,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new ne("multicall results mismatch");return y}const Xm=new rv(8192);function dz(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Xm.get(n))return Xm.get(n);const r=t().finally(()=>Xm.delete(n));return Xm.set(n,r),r}async function e0(t){return new Promise(e=>setTimeout(e,t))}function t0(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await e0(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function hz(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new El(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new El(new Error("method not supported"),{method:l});const u=s?X0(`${c}.${Cr(n)}`):void 0;return dz(()=>t0(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case zp.code:throw new zp(f);case qp.code:throw new qp(f);case Wp.code:throw new Wp(f,{method:n.method});case Hp.code:throw new Hp(f);case Zl.code:throw new Zl(f);case Vp.code:throw new Vp(f);case Gp.code:throw new Gp(f);case xc.code:throw new xc(f);case ch.code:throw new ch(f);case El.code:throw new El(f,{method:n.method});case lh.code:throw new lh(f);case Kp.code:throw new Kp(f);case vn.code:throw new vn(f);case Yp.code:throw new Yp(f);case Qp.code:throw new Qp(f);case Jp.code:throw new Jp(f);case Zp.code:throw new Zp(f);case lo.code:throw new lo(f);case uh.code:throw new uh(f);case Xp.code:throw new Xp(f);case eg.code:throw new eg(f);case tg.code:throw new tg(f);case ng.code:throw new ng(f);case rg.code:throw new rg(f);case dh.code:throw new dh(f);case 5e3:throw new vn(f);default:throw h instanceof ne?h:new UF(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof tp){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>fz(h)}),{enabled:s,id:u})}}function fz(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===lh.code||t.code===Zl.code:t instanceof tp&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function pz(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function $D(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function gz(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const nT=gz();function mz(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await $D(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Cr(r.map(v=>({jsonrpc:"2.0",id:v.id??nT.take(),...v}))):Cr({jsonrpc:"2.0",id:r.id??nT.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},y=new Request(t,g),w=await(s==null?void 0:s(y,g))??{...g,url:t};return await fetch(w.url??t,w)},{errorInstance:new W2({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new tp({body:r,details:Cr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof tp||h instanceof W2?h:new tp({body:r,cause:h,url:t})}}}}class yz extends ne{constructor({domain:e}){super(`Invalid domain "${Cr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class wz extends ne{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class vz extends ne{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function bz(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Cr({domain:o,message:a,primaryType:r,types:s})}function _z(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(U$);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,y,w]=h;Ue(d,{signed:y==="int",size:Number.parseInt(w)/8})}if(u==="address"&&typeof d=="string"&&!Ni(d))throw new Uc({address:d});const f=u.match(oF);if(f){const[g,y]=f;if(y&&cn(d)!==Number.parseInt(y))throw new CB({expectedSize:Number.parseInt(y),givenSize:cn(d)})}const p=s[u];p&&(Cz(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new yz({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new wz({primaryType:r,types:s})}function Ez({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Cz(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new vz({type:t})}class xz extends ne{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Sz(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new xz({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const Hb=new Map,rT=new Map;let Az=0;function og(t,e,n){const r=++Az,s=()=>Hb.get(t)||[],i=()=>{const u=s();Hb.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=rT.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(Hb.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&rT.set(t,l),o}function rA(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await e0(c);const l=async()=>{s&&(await t({unpoll:i}),await e0(r),l())};l()})(),i}function Iz(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Cr(["watchBlockNumber",t.uid,e,n,o]);return og(d,{onBlockNumber:r,onError:s},h=>rA(async()=>{var f;try{const p=await Tt(t,rz,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Cr(["watchBlockNumber",t.uid,e,n]);return og(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const w=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return w?w.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(w){var v;if(!f)return;const b=ta((v=w.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(w){var b;(b=h.onError)==null||b.call(h,w)}});p=y,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function Tz(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Nz(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Cr(["watchPendingTransactions",t.uid,e,i]);return og(l,{onTransactions:r,onError:n},u=>{let d;const h=rA(async()=>{var f;try{if(!d)try{d=await Tt(t,J7,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await Tt(t,cz,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await Tt(t,Tz,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function Pz(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>Zg(r))}async function kz(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Oz(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Gn(n):void 0,i=r?[s==null?void 0:s.address,[Ue(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const DD="0x5792579257925792579257925792579257925792579257925792579257925792",jD=Ue(0,{size:32});async function Rz(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Gn(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?rm({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?jc([p,f.dataSuffix]):p,to:f.to,value:f.value?Ue(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:Ue(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new uh(new ne(b,{details:b}))}if(a&&d.length>1){const w="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new dh(new ne(w,{details:w}))}const p=[];for(const w of d){const b=nm(t,{account:u,chain:s,data:w.data,to:w.to,value:w.value?ta(w.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(w=>w.status==="rejected"))throw g[0].reason;const y=g.map(w=>w.status==="fulfilled"?w.value:jD);return{id:jc([...y,Ue(s.id,{size:32}),DD])}}throw G$(h,{...e,account:u,chain:e.chain})}}async function UD(t,e){async function n(u){if(u.endsWith(DD.slice(2))){const h=Ih(SE(u,-64,-32)),f=SE(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(y=>jD.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),g=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:na(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?na(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:ta(u.blockNumber),gasUsed:ta(u.gasUsed),status:RD[u.status]})))??[],statusCode:l,status:c,version:o}}async function $z(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function Dz(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Cr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=tA();let u;const d=og(o,{resolve:c,reject:l},h=>{const f=rA(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await UD(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new jz({id:n}))},i):void 0,await a}class jz extends ne{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}async function Uz(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Cr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:y,reject:w}=tA(),b=a?setTimeout(()=>{p(),f(),w(new $F({hash:n}))},a):void 0;return f=og(c,{onReplaced:r,resolve:y,reject:w},v=>{p=Tt(t,Iz,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(E){const _=S=>{clearTimeout(b),p(),S(),f()};let x=E;if(!h)try{if(d){if(e>1&&(!d.blockNumber||x-d.blockNumber+1n<e))return;_(()=>v.resolve(d));return}if(l||(h=!0,await t0(async()=>{l=await Tt(t,OD,"getTransaction")({hash:n}),l.blockNumber&&(x=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await Tt(t,tT,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||x-d.blockNumber+1n<e))return;_(()=>v.resolve(d))}catch(S){if(S instanceof H$||S instanceof V$){if(!l){h=!1;return}try{u=l,h=!0;const T=await t0(()=>Tt(t,sg,"getBlock")({blockNumber:x,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:R})=>R instanceof K$});h=!1;const C=T.transactions.find(({from:R,nonce:B})=>R===u.from&&B===u.nonce);if(!C||(d=await Tt(t,tT,"getTransactionReceipt")({hash:C.hash}),e>1&&(!d.blockNumber||x-d.blockNumber+1n<e)))return;let O="replaced";C.to===u.to&&C.value===u.value&&C.input===u.input?O="repriced":C.from===C.to&&C.value===0n&&(O="cancelled"),_(()=>{var R;(R=v.onReplaced)==null||R.call(v,{reason:O,replacedTransaction:u,transaction:C,transactionReceipt:d}),v.resolve(d)})}catch(T){_(()=>v.reject(T))}}else _(()=>v.reject(S))}}})}),g}async function Lz(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>uc(n))}async function Mz(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function LD(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new yu({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Gn(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Gn(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await Tt(t,tm,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await Tt(t,tD,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&PD(o.address,i.address))&&(a.nonce+=1)),a}async function Bz(t,e){const{account:n=t.account}=e;if(!n)throw new yu({docsPath:"/docs/eip7702/signAuthorization"});const r=Gn(n);if(!r.signAuthorization)throw new sw({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await LD(t,e);return r.signAuthorization(s)}async function Fz(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new yu({docsPath:"/docs/actions/wallet/signTransaction"});const i=Gn(n);em({account:i,...e});const o=await Tt(t,tm,"getChainId")({});r!==null&&W$({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||ov;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:Ue(o),from:i.address}]},{retryCount:0})}async function MD(t,{account:e=t.account,message:n}){if(!e)throw new yu({docsPath:"/docs/actions/wallet/signMessage"});const r=Gn(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?X0(n):n.raw instanceof Uint8Array?Ql(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function zz(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new yu({docsPath:"/docs/actions/wallet/signTypedData"});const o=Gn(n),a={EIP712Domain:Ez({domain:r}),...e.types};if(_z({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=bz({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function qz(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(e)}]},{retryCount:0})}async function Wz(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}async function BD(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new yu({docsPath:"/docs/contract/writeContract"});const l=r?Gn(r):null,u=rm({abi:n,args:i,functionName:a});try{return await Tt(t,nm,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Xw(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function ws(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const iw="2.17.3",Hz=()=>`@wagmi/core@${iw}`;var FD=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},n0,zD;let ca=class qE extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return Hz()}constructor(e,n={}){var i;super(),n0.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof qE?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof qE&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return FD(this,n0,"m",zD).call(this,this,e)}};n0=new WeakSet,zD=function t(e,n){return n!=null&&n(e)?e:e.cause?FD(this,n0,"m",t).call(this,e.cause,n):e};class ag extends ca{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Vz extends ca{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class Gz extends ca{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class Kz extends ca{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class Yz extends ca{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class Qz extends ca{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function ow(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new Vz;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const WE=256;let ey=WE,ty;function qD(t=11){if(!ty||ey+t>WE*2){ty="",ey=0;for(let e=0;e<WE;e++)ty+=(256+Math.random()*256|0).toString(16).substring(1)}return ty.substring(ey,ey+++t)}function WD(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Gn(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},y={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:qD()};function w(b){return v=>{const E=v(b);for(const x in y)delete E[x];const _={...b,...E};return Object.assign(_,{extend:w(_)})}}return Object.assign(y,{extend:w(y)})}function sA({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=qD();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:hz(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function Jz(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>sA({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function sT(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=Zz,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=sA({key:n,name:r,async request({method:g,params:y}){let w;const b=async(v=0)=>{const E=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const _=await E.request({method:g,params:y});return f({method:g,params:y,response:_,transport:E,status:"success"}),_}catch(_){if(f({error:_,method:g,params:y,transport:E,status:"error"}),i(_)||v===h.length-1||(w??(w=h.slice(v+1).some(x=>{const{include:S,exclude:T}=x({chain:c}).config.methods||{};return S?S.includes(g):T?!T.includes(g):!0})),!w))throw _;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};Xz({chain:c,interval:g.interval??l,onTransports:y=>h=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function Zz(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===ch.code||t.code===vn.code||_l.nodeMessage.test(t.message)||t.code===5e3))}function Xz({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),w=Date.now();let b,v;try{await(r?r({transport:y}):y.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-w,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const w=u.map(x=>x[y].latency),v=1-w.reduce((x,S)=>x+S,0)/w.length/f,E=u.map(x=>x[y].success),_=E.reduce((x,S)=>x+S,0)/E.length;return _===0?[0,y]:[l*v+c*_,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await e0(e),d()};d()}class eq extends ne{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function ny(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??h,w=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new eq;const v=mz(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:w});return sA({key:s,methods:i,name:o,async request({method:E,params:_}){const x={method:E,params:_},{schedule:S}=TD({id:b,wait:g,shouldSplitBatch(R){return R.length>p},fn:R=>v.request({body:R}),sort:(R,B)=>R.id-B.id}),T=async R=>n?S(R):[await v.request({body:R})],[{error:C,result:O}]=await T(x);if(u)return{error:C,result:O};if(C)throw new WS({body:x,error:C,url:b});return O},retryCount:y,retryDelay:l,timeout:w,type:"http"},{fetchOptions:r,url:b})}}function tq(t){return{addChain:e=>pB(t,e),deployContract:e=>p9(t,e),getAddresses:()=>Pz(t),getCallsStatus:e=>UD(t,e),getCapabilities:e=>Oz(t,e),getChainId:()=>tm(t),getPermissions:()=>kz(t),prepareAuthorization:e=>LD(t,e),prepareTransactionRequest:e=>av(t,e),requestAddresses:()=>Lz(t),requestPermissions:e=>Mz(t,e),sendCalls:e=>Rz(t,e),sendRawTransaction:e=>aD(t,e),sendTransaction:e=>nm(t,e),showCallsStatus:e=>$z(t,e),signAuthorization:e=>Bz(t,e),signMessage:e=>MD(t,e),signTransaction:e=>Fz(t,e),signTypedData:e=>zz(t,e),switchChain:e=>qz(t,e),waitForCallsStatus:e=>Dz(t,e),watchAsset:e=>Wz(t,e),writeContract:e=>BD(t,e)}}async function sm(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new Qz({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new Gz;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new Yz({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Gn(e.account??n.accounts[0]);if(o&&(o.address=uc(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new Kz({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return WD({account:o,chain:a,name:"Connector Client",transport:l=>Jz(c)({...l,retryCount:0})})}async function HD(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function nq(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await sm(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return ws(o,eD,"estimateGas")({...s,account:i})}function VD(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(PF[t])}function Ud(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function rq(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return ws(o,uz,"multicall")({allowFailure:n,contracts:s,...i})}function sq(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ws(s,nA,"readContract")(r)}async function iq(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>rq(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof SD)throw c;const l=()=>o.map(u=>sq(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function oq(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await iT(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await iT(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=w$(Ih(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await ws(c,X$,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Nh(u,VD(a)),symbol:d.nativeCurrency.symbol,value:u}}async function iT(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await iq(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Nh(c??"0",VD(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function oT(t){return t.state.chainId}function eu(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!eu(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!eu(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let ry=[];function Gi(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||eu(ry,e)?ry:(ry=e,e)}let Vb=[];function aT(t){const e=t.connectors;return eu(Vb,e)?Vb:(Vb=e,e)}function aq(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ws(s,Y7,"getEnsName")(r)}async function cq(t,e={}){return(await sm(t,e)).extend(tq)}async function lq(t,e){const{account:n,chainId:r,...s}=e,i=n??Ud(t).address,o=t.getClient({chainId:r});return ws(o,av,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let Gb=!1;async function HE(t,e={}){var l,u;if(Gb)return[];Gb=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const y=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:y}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),Gb=!1,a}async function uq(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await sm(t,{account:n??void 0,chainId:r,connector:s}),await ws(o,nm,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function dq(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await sm(t,{account:n,connector:r}),ws(i,MD,"signMessage")({...s,...n?{account:n}:{}})}class Ma extends ca{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class hq extends ca{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function cT(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new hq({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new ag;return t.setState(a=>({...a,chainId:r})),i}function GD(t,e){const{onChange:n}=e;return t.subscribe(()=>Ud(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return eu(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function fq(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function pq(t,e){const{onChange:n}=e;return t.subscribe(()=>Gi(t),n,{equalityFn:eu})}function KD(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function gq(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=ws(l,Nz,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}async function mq(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await ws(i,Uz,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await ws(i,OD,"getTransaction")({hash:a.transactionHash}),d=await ws(i,ND,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?w$(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function yq(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await sm(t,{account:n??void 0,chainId:r,connector:s}),await ws(o,BD,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function $_e(t){return t}lv.type="injected";function lv(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...wq[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:lv.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,y,w,b;const d=await this.getProvider();if(!d)throw new Ma;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(y=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:y.map(E=>uc(E)),h.length>0&&(h=await this.getAccounts())}catch(v){const E=v;if(E.code===vn.code)throw new vn(E);if(E.code===xc.code)throw E}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(_=>uc(_))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const E=await this.switchChain({chainId:l}).catch(_=>{if(_.code===vn.code)throw _;return{id:v}});v=(E==null?void 0:E.id)??v}return e&&await((w=c.storage)==null?void 0:w.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const E=v;throw E.code===vn.code?new vn(E):E.code===xc.code?new xc(E):E}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Ma;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await $D(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Ma;return(await l.request({method:"eth_accounts"})).map(d=>uc(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Ma;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=aw(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(w=>window.addEventListener("ethereum#initialized",()=>w(p()),{once:!0}))]:[],new Promise(w=>setTimeout(()=>w(p()),g))]))return!0}throw new Ma}return!!(await t0(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,y,w;const d=await this.getProvider();if(!d)throw new Ma;const h=c.chains.find(b=>b.id===u);if(!h)throw new lo(new ag);const f=new Promise(b=>{const v=E=>{"chainId"in E&&E.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:E,..._}=h.blockExplorers??{};let x;l!=null&&l.blockExplorerUrls?x=l.blockExplorerUrls:E&&(x=[E.url,...Object.values(_).map(C=>C.url)]);let S;(y=l==null?void 0:l.rpcUrls)!=null&&y.length?S=l.rpcUrls:S=[((w=h.rpcUrls.default)==null?void 0:w.http[0])??""];const T={blockExplorerUrls:x,chainId:Ue(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:S};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new vn(new Error("User rejected switch after adding network."))}),f]),h}catch(E){throw new vn(E)}throw v.code===vn.code?new vn(v):new lo(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>uc(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const wq={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:aw(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return aw(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:aw(t,"isPhantom")}}};function aw(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function vq(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function bq(){const t=new Set;let e=[];const n=()=>vq(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const _q=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},Eq=_q;function Cq(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const VE=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return VE(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return VE(r)(n)}}}},xq=(t,e)=>(n,r,s)=>{let i={storage:Cq(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,y)=>{d(g,y),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,y;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const w=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:h))||void 0;return VE(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[E,_]=b;if(f=i.merge(_,(v=r())!=null?v:h),n(f,!0),E)return u()}).then(()=>{w==null||w(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{w==null||w(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Sq=xq,lT=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},Kb=t=>t?lT(t):lT;var YD={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],w=arguments.length,b,v;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),w){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(v=1,b=new Array(w-1);v<w;v++)b[v-1]=arguments[v];y.fn.apply(y.context,b)}else{var E=y.length,_;for(v=0;v<E;v++)switch(y[v].once&&this.removeListener(l,y[v].fn,void 0,!0),w){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,u);break;case 3:y[v].fn.call(y[v].context,u,d);break;case 4:y[v].fn.call(y[v].context,u,d,h);break;default:if(!b)for(_=1,b=new Array(w-1);_<w;_++)b[_-1]=arguments[_];y[v].fn.apply(y[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,y=[],w=p.length;g<w;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(YD);var Aq=YD.exports;const Iq=pu(Aq);class Tq{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Iq})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function Nq(t){return new Tq(t)}function Pq(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function uT(t,e){return t.slice(0,e).join(".")||"."}function dT(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function kq(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=dT(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=dT(s,c);if(u!==0)return r?e.call(this,a,c,uT(i,u)):`[ref=${uT(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function Oq(t,e,n,r){return JSON.stringify(t,kq((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function Rq(t){const{deserialize:e=Pq,key:n="wagmi",serialize:r=Oq,storage:s=QD}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const QD={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function $q(){const t=typeof window<"u"&&window.localStorage?window.localStorage:QD;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const GE=256;let sy=GE,iy;function Dq(t=11){if(!iy||sy+t>GE*2){iy="",sy=0;for(let e=0;e<GE;e++)iy+=(256+Math.random()*256|0).toString(16).substring(1)}return iy.substring(sy,sy+++t)}function jq(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=Rq({storage:$q()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?bq():void 0,a=Kb(()=>i.chains),c=Kb(()=>{const _=[],x=new Set;for(const S of i.connectors??[]){const T=l(S);if(_.push(T),!s&&T.rdns){const C=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const O of C)x.add(O)}}if(!s&&o){const S=o.getProviders();for(const T of S)x.has(T.info.rdns)||_.push(l(u(T)))}return _});function l(_){var T;const x=Nq(Dq()),S={..._({emitter:x,chains:a.getState(),storage:n,transports:i.transports}),emitter:x,uid:x.uid};return x.on("connect",v),(T=S.setup)==null||T.call(S),S}function u(_){const{info:x}=_,S=_.provider;return lv({target:{...x,id:x.rdns,provider:S}})}const d=new Map;function h(_={}){const x=_.chainId??y.getState().chainId,S=a.getState().find(C=>C.id===x);if(_.chainId&&!S)throw new ag;{const C=d.get(y.getState().chainId);if(C&&!S)return C;if(!S)throw new ag}{const C=d.get(x);if(C)return C}let T;if(i.client)T=i.client({chain:S});else{const C=S.id,O=a.getState().map(H=>H.id),R={},B=Object.entries(i);for(const[H,z]of B)if(!(H==="chains"||H==="client"||H==="connectors"||H==="transports"))if(typeof z=="object")if(C in z)R[H]=z[C];else{if(O.some(I=>I in z))continue;R[H]=z}else R[H]=z;T=WD({...R,chain:S,batch:R.batch??{multicall:!0},transport:H=>i.transports[C]({...H,connectors:c})})}return d.set(x,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";iw.startsWith(g)?p=Number.parseInt(iw.replace(g,"")):p=Number.parseInt(iw.split(".")[0]??"0");const y=Kb(Eq(n?Sq(f,{migrate(_,x){if(x===p)return _;const S=f(),T=w(_,S.chainId);return{...S,chainId:T}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([x,S])=>{const{id:T,name:C,type:O,uid:R}=S.connector;return[x,{...S,connector:{id:T,name:C,type:O,uid:R}}]})},chainId:_.chainId,current:_.current}},merge(_,x){typeof _=="object"&&_&&"status"in _&&delete _.status;const S=w(_,x.chainId);return{...x,..._,chainId:S}},skipHydration:s,storage:n,version:p}):f));y.setState(f());function w(_,x){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(S=>S.id===_.chainId)?_.chainId:x}r&&y.subscribe(({connections:_,current:x})=>{var S;return x?(S=_.get(x))==null?void 0:S.chainId:void 0},_=>{if(a.getState().some(S=>S.id===_))return y.setState(S=>({...S,chainId:_??S.chainId}))}),o==null||o.subscribe(_=>{const x=new Set,S=new Set;for(const C of c.getState())if(x.add(C.id),C.rdns){const O=typeof C.rdns=="string"?[C.rdns]:C.rdns;for(const R of O)S.add(R)}const T=[];for(const C of _){if(S.has(C.info.rdns))continue;const O=l(u(C));x.has(O.id)||T.push(O)}n&&!y.persist.hasHydrated()||c.setState(C=>[...C,...T],!0)});function b(_){y.setState(x=>{const S=x.connections.get(_.uid);return S?{...x,connections:new Map(x.connections).set(_.uid,{accounts:_.accounts??S.accounts,chainId:_.chainId??S.chainId,connector:S.connector})}:x})}function v(_){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(x=>{const S=c.getState().find(T=>T.uid===_.uid);return S?(S.emitter.listenerCount("connect")&&S.emitter.off("connect",b),S.emitter.listenerCount("change")||S.emitter.on("change",b),S.emitter.listenerCount("disconnect")||S.emitter.on("disconnect",E),{...x,connections:new Map(x.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:S}),current:_.uid,status:"connected"}):x})}function E(_){y.setState(x=>{const S=x.connections.get(_.uid);if(S){const C=S.connector;C.emitter.listenerCount("change")&&S.connector.emitter.off("change",b),C.emitter.listenerCount("disconnect")&&S.connector.emitter.off("disconnect",E),C.emitter.listenerCount("connect")||S.connector.emitter.on("connect",v)}if(x.connections.delete(_.uid),x.connections.size===0)return{...x,connections:new Map,current:null,status:"disconnected"};const T=x.connections.values().next().value;return{...x,connections:new Map(x.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return y.getState()},setState(_){let x;typeof _=="function"?x=_(y.getState()):x=_;const S=f();typeof x!="object"&&(x=S),Object.keys(S).some(C=>!(C in x))&&(x=S),y.setState(x,!0)},subscribe(_,x,S){return y.subscribe(_,x,S?{...S,fireImmediately:S.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(_){const x=typeof _=="function"?_(a.getState()):_;if(x.length!==0)return a.setState(x,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:l,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:b,connect:v,disconnect:E}}}}function Uq(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?HE(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function Lq(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=Uq(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=F.useRef(!0);return F.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const JD=F.createContext(void 0);function Mq(t){const{children:e,config:n}=t,r={value:n};return F.createElement(Lq,t,F.createElement(JD.Provider,r,e))}const Bq="2.15.6",Fq=()=>`wagmi@${Bq}`;let zq=class extends ca{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return Fq()}};class qq extends zq{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Kc(t={}){const e=t.config??F.useContext(JD);if(!e)throw new qq;return e}var ZD={exports:{}},XD={},e5={exports:{}},t5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh=F;function Wq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hq=typeof Object.is=="function"?Object.is:Wq,Vq=hh.useState,Gq=hh.useEffect,Kq=hh.useLayoutEffect,Yq=hh.useDebugValue;function Qq(t,e){var n=e(),r=Vq({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Kq(function(){s.value=n,s.getSnapshot=e,Yb(s)&&i({inst:s})},[t,n,e]),Gq(function(){return Yb(s)&&i({inst:s}),t(function(){Yb(s)&&i({inst:s})})},[t]),Yq(n),n}function Yb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hq(t,n)}catch{return!0}}function Jq(t,e){return e()}var Zq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Jq:Qq;t5.useSyncExternalStore=hh.useSyncExternalStore!==void 0?hh.useSyncExternalStore:Zq;e5.exports=t5;var Xq=e5.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv=F,eW=Xq;function tW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nW=typeof Object.is=="function"?Object.is:tW,rW=eW.useSyncExternalStore,sW=uv.useRef,iW=uv.useEffect,oW=uv.useMemo,aW=uv.useDebugValue;XD.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=sW(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=oW(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,nW(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=rW(t,i[0],i[1]);return iW(function(){o.hasValue=!0,o.value=a},[a]),aW(a),a};ZD.exports=XD;var cW=ZD.exports;const Qb=t=>typeof t=="object"&&!Array.isArray(t);function lW(t,e,n=e,r=eu){const s=F.useRef([]),i=cW.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(Qb(o)&&Qb(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return F.useMemo(()=>{if(Qb(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function dv(t={}){const e=Kc(t);return lW(n=>GD(e,{onChange:n}),()=>Ud(e))}var kh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tu=typeof window>"u"||"Deno"in globalThis;function br(){}function uW(t,e){return typeof t=="function"?t(e):t}function KE(t){return typeof t=="number"&&t>=0&&t!==1/0}function n5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Sc(t,e){return typeof t=="function"?t(e):t}function yi(t,e){return typeof t=="function"?t(e):t}function hT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==iA(o,e.options))return!1}else if(!cg(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function fT(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(nu(e.options.mutationKey)!==nu(i))return!1}else if(!cg(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function iA(t,e){return((e==null?void 0:e.queryKeyHashFn)||nu)(t)}function nu(t){return JSON.stringify(t,(e,n)=>YE(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function cg(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>cg(t[n],e[n])):!1}function r5(t,e){if(t===e)return t;const n=pT(t)&&pT(e);if(n||YE(t)&&YE(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=r5(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function r0(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function pT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function YE(t){if(!gT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!gT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function gT(t){return Object.prototype.toString.call(t)==="[object Object]"}function dW(t){return new Promise(e=>{setTimeout(e,t)})}function QE(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?r5(t,e):e}function hW(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function fW(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var oA=Symbol();function s5(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===oA?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function i5(t,e){return typeof t=="function"?t(...e):!!t}var Pl,Za,qd,WO,pW=(WO=class extends kh{constructor(){super();Ne(this,Pl);Ne(this,Za);Ne(this,qd);me(this,qd,e=>{if(!tu&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){q(this,Za)||this.setEventListener(q(this,qd))}onUnsubscribe(){var e;this.hasListeners()||((e=q(this,Za))==null||e.call(this),me(this,Za,void 0))}setEventListener(e){var n;me(this,qd,e),(n=q(this,Za))==null||n.call(this),me(this,Za,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){q(this,Pl)!==e&&(me(this,Pl,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof q(this,Pl)=="boolean"?q(this,Pl):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Pl=new WeakMap,Za=new WeakMap,qd=new WeakMap,WO),aA=new pW,Wd,Xa,Hd,HO,gW=(HO=class extends kh{constructor(){super();Ne(this,Wd,!0);Ne(this,Xa);Ne(this,Hd);me(this,Hd,e=>{if(!tu&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){q(this,Xa)||this.setEventListener(q(this,Hd))}onUnsubscribe(){var e;this.hasListeners()||((e=q(this,Xa))==null||e.call(this),me(this,Xa,void 0))}setEventListener(e){var n;me(this,Hd,e),(n=q(this,Xa))==null||n.call(this),me(this,Xa,e(this.setOnline.bind(this)))}setOnline(e){q(this,Wd)!==e&&(me(this,Wd,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return q(this,Wd)}},Wd=new WeakMap,Xa=new WeakMap,Hd=new WeakMap,HO),s0=new gW;function JE(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function mW(t){return Math.min(1e3*2**t,3e4)}function o5(t){return(t??"online")==="online"?s0.isOnline():!0}var a5=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Jb(t){return t instanceof a5}function c5(t){let e=!1,n=0,r=!1,s;const i=JE(),o=g=>{var y;r||(h(new a5(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>aA.isFocused()&&(t.networkMode==="always"||s0.isOnline())&&t.canRun(),u=()=>o5(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var y;s=w=>{(r||l())&&g(w)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(w){g=Promise.reject(w)}Promise.resolve(g).then(d).catch(w=>{var x;if(r)return;const b=t.retry??(tu?0:3),v=t.retryDelay??mW,E=typeof v=="function"?v(n,w):v,_=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,w);if(e||!_){h(w);return}n++,(x=t.onFail)==null||x.call(t,n,w),dW(E).then(()=>l()?void 0:f()).then(()=>{e?h(w):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var yW=t=>setTimeout(t,0);function wW(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=yW;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var En=wW(),kl,VO,l5=(VO=class{constructor(){Ne(this,kl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),KE(this.gcTime)&&me(this,kl,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(tu?1/0:5*60*1e3))}clearGcTimeout(){q(this,kl)&&(clearTimeout(q(this,kl)),me(this,kl,void 0))}},kl=new WeakMap,VO),Vd,Ol,Us,Rl,ur,zg,$l,hi,To,GO,vW=(GO=class extends l5{constructor(e){super();Ne(this,hi);Ne(this,Vd);Ne(this,Ol);Ne(this,Us);Ne(this,Rl);Ne(this,ur);Ne(this,zg);Ne(this,$l);me(this,$l,!1),me(this,zg,e.defaultOptions),this.setOptions(e.options),this.observers=[],me(this,Rl,e.client),me(this,Us,q(this,Rl).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,me(this,Vd,bW(this.options)),this.state=e.state??q(this,Vd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=q(this,ur))==null?void 0:e.promise}setOptions(e){this.options={...q(this,zg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,Us).remove(this)}setData(e,n){const r=QE(this.state.data,e,this.options);return Ve(this,hi,To).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){Ve(this,hi,To).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=q(this,ur))==null?void 0:r.promise;return(s=q(this,ur))==null||s.cancel(e),n?n.then(br).catch(br):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,Vd))}isActive(){return this.observers.some(e=>yi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===oA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Sc(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!n5(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=q(this,ur))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=q(this,ur))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),q(this,Us).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(q(this,ur)&&(q(this,$l)?q(this,ur).cancel({revert:!0}):q(this,ur).cancelRetry()),this.scheduleGc()),q(this,Us).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ve(this,hi,To).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(q(this,ur))return q(this,ur).continueRetry(),q(this,ur).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(me(this,$l,!0),r.signal)})},i=()=>{const h=s5(this.options,n),p=(()=>{const g={client:q(this,Rl),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return me(this,$l,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:q(this,Rl),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),me(this,Ol,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Ve(this,hi,To).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,y;Jb(h)&&h.silent||Ve(this,hi,To).call(this,{type:"error",error:h}),Jb(h)||((p=(f=q(this,Us).config).onError)==null||p.call(f,h,this),(y=(g=q(this,Us).config).onSettled)==null||y.call(g,this.state.data,h,this)),this.scheduleGc()};return me(this,ur,c5({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){c(w);return}(p=(f=q(this,Us).config).onSuccess)==null||p.call(f,h,this),(y=(g=q(this,Us).config).onSettled)==null||y.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{Ve(this,hi,To).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{Ve(this,hi,To).call(this,{type:"pause"})},onContinue:()=>{Ve(this,hi,To).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),q(this,ur).start()}},Vd=new WeakMap,Ol=new WeakMap,Us=new WeakMap,Rl=new WeakMap,ur=new WeakMap,zg=new WeakMap,$l=new WeakMap,hi=new WeakSet,To=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...u5(r.data,this.options),fetchMeta:e.meta??null};case"success":return me(this,Ol,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Jb(s)&&s.revert&&q(this,Ol)?{...q(this,Ol),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),En.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),q(this,Us).notify({query:this,type:"updated",action:e})})},GO);function u5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:o5(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function bW(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ki,KO,_W=(KO=class extends kh{constructor(e={}){super();Ne(this,Ki);this.config=e,me(this,Ki,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??iA(s,n);let o=this.get(i);return o||(o=new vW({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){q(this,Ki).has(e.queryHash)||(q(this,Ki).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=q(this,Ki).get(e.queryHash);n&&(e.destroy(),n===e&&q(this,Ki).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){En.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return q(this,Ki).get(e)}getAll(){return[...q(this,Ki).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>hT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>hT(e,r)):n}notify(e){En.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){En.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){En.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ki=new WeakMap,KO),Yi,yr,Dl,Qi,Ra,YO,EW=(YO=class extends l5{constructor(e){super();Ne(this,Qi);Ne(this,Yi);Ne(this,yr);Ne(this,Dl);this.mutationId=e.mutationId,me(this,yr,e.mutationCache),me(this,Yi,[]),this.state=e.state||d5(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){q(this,Yi).includes(e)||(q(this,Yi).push(e),this.clearGcTimeout(),q(this,yr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){me(this,Yi,q(this,Yi).filter(n=>n!==e)),this.scheduleGc(),q(this,yr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){q(this,Yi).length||(this.state.status==="pending"?this.scheduleGc():q(this,yr).remove(this))}continue(){var e;return((e=q(this,Dl))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,y,w,b,v,E,_,x,S,T;const n=()=>{Ve(this,Qi,Ra).call(this,{type:"continue"})};me(this,Dl,c5({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,O)=>{Ve(this,Qi,Ra).call(this,{type:"failed",failureCount:C,error:O})},onPause:()=>{Ve(this,Qi,Ra).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,yr).canRun(this)}));const r=this.state.status==="pending",s=!q(this,Dl).canStart();try{if(r)n();else{Ve(this,Qi,Ra).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=q(this,yr).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));O!==this.state.context&&Ve(this,Qi,Ra).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const C=await q(this,Dl).start();return await((u=(l=q(this,yr).config).onSuccess)==null?void 0:u.call(l,C,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,C,e,this.state.context)),await((p=(f=q(this,yr).config).onSettled)==null?void 0:p.call(f,C,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,C,null,e,this.state.context)),Ve(this,Qi,Ra).call(this,{type:"success",data:C}),C}catch(C){try{throw await((b=(w=q(this,yr).config).onError)==null?void 0:b.call(w,C,e,this.state.context,this)),await((E=(v=this.options).onError)==null?void 0:E.call(v,C,e,this.state.context)),await((x=(_=q(this,yr).config).onSettled)==null?void 0:x.call(_,void 0,C,this.state.variables,this.state.context,this)),await((T=(S=this.options).onSettled)==null?void 0:T.call(S,void 0,C,e,this.state.context)),C}finally{Ve(this,Qi,Ra).call(this,{type:"error",error:C})}}finally{q(this,yr).runNext(this)}}},Yi=new WeakMap,yr=new WeakMap,Dl=new WeakMap,Qi=new WeakSet,Ra=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),En.batch(()=>{q(this,Yi).forEach(r=>{r.onMutationUpdate(e)}),q(this,yr).notify({mutation:this,type:"updated",action:e})})},YO);function d5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Uo,fi,qg,QO,CW=(QO=class extends kh{constructor(e={}){super();Ne(this,Uo);Ne(this,fi);Ne(this,qg);this.config=e,me(this,Uo,new Set),me(this,fi,new Map),me(this,qg,0)}build(e,n,r){const s=new EW({mutationCache:this,mutationId:++$m(this,qg)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){q(this,Uo).add(e);const n=oy(e);if(typeof n=="string"){const r=q(this,fi).get(n);r?r.push(e):q(this,fi).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(q(this,Uo).delete(e)){const n=oy(e);if(typeof n=="string"){const r=q(this,fi).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&q(this,fi).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=oy(e);if(typeof n=="string"){const r=q(this,fi).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=oy(e);if(typeof n=="string"){const s=(r=q(this,fi).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){En.batch(()=>{q(this,Uo).forEach(e=>{this.notify({type:"removed",mutation:e})}),q(this,Uo).clear(),q(this,fi).clear()})}getAll(){return Array.from(q(this,Uo))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>fT(n,r))}findAll(e={}){return this.getAll().filter(n=>fT(e,n))}notify(e){En.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return En.batch(()=>Promise.all(e.map(n=>n.continue().catch(br))))}},Uo=new WeakMap,fi=new WeakMap,qg=new WeakMap,QO);function oy(t){var e;return(e=t.options.scope)==null?void 0:e.id}function mT(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=s5(e.options,e.fetchOptions),b=async(v,E,_)=>{if(g)return Promise.reject();if(E==null&&v.pages.length)return Promise.resolve(v);const S=(()=>{const R={client:e.client,queryKey:e.queryKey,pageParam:E,direction:_?"backward":"forward",meta:e.options.meta};return y(R),R})(),T=await w(S),{maxPages:C}=e.options,O=_?fW:hW;return{pages:O(v.pages,T,C),pageParams:O(v.pageParams,E,C)}};if(s&&i.length){const v=s==="backward",E=v?xW:yT,_={pages:i,pageParams:o},x=E(r,_);a=await b(_,x,v)}else{const v=t??i.length;do{const E=c===0?o[0]??r.initialPageParam:yT(r,a);if(c>0&&E==null)break;a=await b(a,E),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function yT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function xW(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var en,ec,tc,Gd,Kd,nc,Yd,Qd,JO,SW=(JO=class{constructor(t={}){Ne(this,en);Ne(this,ec);Ne(this,tc);Ne(this,Gd);Ne(this,Kd);Ne(this,nc);Ne(this,Yd);Ne(this,Qd);me(this,en,t.queryCache||new _W),me(this,ec,t.mutationCache||new CW),me(this,tc,t.defaultOptions||{}),me(this,Gd,new Map),me(this,Kd,new Map),me(this,nc,0)}mount(){$m(this,nc)._++,q(this,nc)===1&&(me(this,Yd,aA.subscribe(async t=>{t&&(await this.resumePausedMutations(),q(this,en).onFocus())})),me(this,Qd,s0.subscribe(async t=>{t&&(await this.resumePausedMutations(),q(this,en).onOnline())})))}unmount(){var t,e;$m(this,nc)._--,q(this,nc)===0&&((t=q(this,Yd))==null||t.call(this),me(this,Yd,void 0),(e=q(this,Qd))==null||e.call(this),me(this,Qd,void 0))}isFetching(t){return q(this,en).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return q(this,ec).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=q(this,en).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=q(this,en).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Sc(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return q(this,en).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=q(this,en).get(r.queryHash),i=s==null?void 0:s.state.data,o=uW(e,i);if(o!==void 0)return q(this,en).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return En.batch(()=>q(this,en).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=q(this,en).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=q(this,en);En.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=q(this,en);return En.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=En.batch(()=>q(this,en).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(br).catch(br)}invalidateQueries(t,e={}){return En.batch(()=>(q(this,en).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=En.batch(()=>q(this,en).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(br)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(br)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=q(this,en).build(this,e);return n.isStaleByTime(Sc(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(br).catch(br)}fetchInfiniteQuery(t){return t.behavior=mT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(br).catch(br)}ensureInfiniteQueryData(t){return t.behavior=mT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return s0.isOnline()?q(this,ec).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,en)}getMutationCache(){return q(this,ec)}getDefaultOptions(){return q(this,tc)}setDefaultOptions(t){me(this,tc,t)}setQueryDefaults(t,e){q(this,Gd).set(nu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...q(this,Gd).values()],n={};return e.forEach(r=>{cg(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){q(this,Kd).set(nu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...q(this,Kd).values()],n={};return e.forEach(r=>{cg(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...q(this,tc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=iA(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===oA&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...q(this,tc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){q(this,en).clear(),q(this,ec).clear()}},en=new WeakMap,ec=new WeakMap,tc=new WeakMap,Gd=new WeakMap,Kd=new WeakMap,nc=new WeakMap,Yd=new WeakMap,Qd=new WeakMap,JO),Fr,tt,Wg,wr,jl,Jd,rc,sc,Hg,Zd,Xd,Ul,Ll,ic,eh,mt,Rf,ZE,XE,eC,tC,nC,rC,sC,h5,ZO,AW=(ZO=class extends kh{constructor(e,n){super();Ne(this,mt);Ne(this,Fr);Ne(this,tt);Ne(this,Wg);Ne(this,wr);Ne(this,jl);Ne(this,Jd);Ne(this,rc);Ne(this,sc);Ne(this,Hg);Ne(this,Zd);Ne(this,Xd);Ne(this,Ul);Ne(this,Ll);Ne(this,ic);Ne(this,eh,new Set);this.options=n,me(this,Fr,e),me(this,sc,null),me(this,rc,JE()),this.options.experimental_prefetchInRender||q(this,rc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(q(this,tt).addObserver(this),wT(q(this,tt),this.options)?Ve(this,mt,Rf).call(this):this.updateResult(),Ve(this,mt,tC).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return iC(q(this,tt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return iC(q(this,tt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ve(this,mt,nC).call(this),Ve(this,mt,rC).call(this),q(this,tt).removeObserver(this)}setOptions(e){const n=this.options,r=q(this,tt);if(this.options=q(this,Fr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof yi(this.options.enabled,q(this,tt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ve(this,mt,sC).call(this),q(this,tt).setOptions(this.options),n._defaulted&&!r0(this.options,n)&&q(this,Fr).getQueryCache().notify({type:"observerOptionsUpdated",query:q(this,tt),observer:this});const s=this.hasListeners();s&&vT(q(this,tt),r,this.options,n)&&Ve(this,mt,Rf).call(this),this.updateResult(),s&&(q(this,tt)!==r||yi(this.options.enabled,q(this,tt))!==yi(n.enabled,q(this,tt))||Sc(this.options.staleTime,q(this,tt))!==Sc(n.staleTime,q(this,tt)))&&Ve(this,mt,ZE).call(this);const i=Ve(this,mt,XE).call(this);s&&(q(this,tt)!==r||yi(this.options.enabled,q(this,tt))!==yi(n.enabled,q(this,tt))||i!==q(this,ic))&&Ve(this,mt,eC).call(this,i)}getOptimisticResult(e){const n=q(this,Fr).getQueryCache().build(q(this,Fr),e),r=this.createResult(n,e);return TW(this,r)&&(me(this,wr,r),me(this,Jd,this.options),me(this,jl,q(this,tt).state)),r}getCurrentResult(){return q(this,wr)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){q(this,eh).add(e)}getCurrentQuery(){return q(this,tt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=q(this,Fr).defaultQueryOptions(e),r=q(this,Fr).getQueryCache().build(q(this,Fr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Ve(this,mt,Rf).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),q(this,wr)))}createResult(e,n){var C;const r=q(this,tt),s=this.options,i=q(this,wr),o=q(this,jl),a=q(this,Jd),l=e!==r?e.state:q(this,Wg),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const O=this.hasListeners(),R=!O&&wT(e,n),B=O&&vT(e,r,n,s);(R||B)&&(d={...d,...u5(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=d;f=d.data;let w=!1;if(n.placeholderData!==void 0&&f===void 0&&y==="pending"){let O;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,w=!0):O=typeof n.placeholderData=="function"?n.placeholderData((C=q(this,Xd))==null?void 0:C.state.data,q(this,Xd)):n.placeholderData,O!==void 0&&(y="success",f=QE(i==null?void 0:i.data,O,n),h=!0)}if(n.select&&f!==void 0&&!w)if(i&&f===(o==null?void 0:o.data)&&n.select===q(this,Hg))f=q(this,Zd);else try{me(this,Hg,n.select),f=n.select(f),f=QE(i==null?void 0:i.data,f,n),me(this,Zd,f),me(this,sc,null)}catch(O){me(this,sc,O)}q(this,sc)&&(p=q(this,sc),f=q(this,Zd),g=Date.now(),y="error");const b=d.fetchStatus==="fetching",v=y==="pending",E=y==="error",_=v&&b,x=f!==void 0,T={status:y,fetchStatus:d.fetchStatus,isPending:v,isSuccess:y==="success",isError:E,isInitialLoading:_,isLoading:_,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:E&&!x,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:E&&x,isStale:cA(e,n),refetch:this.refetch,promise:q(this,rc)};if(this.options.experimental_prefetchInRender){const O=H=>{T.status==="error"?H.reject(T.error):T.data!==void 0&&H.resolve(T.data)},R=()=>{const H=me(this,rc,T.promise=JE());O(H)},B=q(this,rc);switch(B.status){case"pending":e.queryHash===r.queryHash&&O(B);break;case"fulfilled":(T.status==="error"||T.data!==B.value)&&R();break;case"rejected":(T.status!=="error"||T.error!==B.reason)&&R();break}}return T}updateResult(){const e=q(this,wr),n=this.createResult(q(this,tt),this.options);if(me(this,jl,q(this,tt).state),me(this,Jd,this.options),q(this,jl).data!==void 0&&me(this,Xd,q(this,tt)),r0(n,e))return;me(this,wr,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!q(this,eh).size)return!0;const o=new Set(i??q(this,eh));return this.options.throwOnError&&o.add("error"),Object.keys(q(this,wr)).some(a=>{const c=a;return q(this,wr)[c]!==e[c]&&o.has(c)})};Ve(this,mt,h5).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ve(this,mt,tC).call(this)}},Fr=new WeakMap,tt=new WeakMap,Wg=new WeakMap,wr=new WeakMap,jl=new WeakMap,Jd=new WeakMap,rc=new WeakMap,sc=new WeakMap,Hg=new WeakMap,Zd=new WeakMap,Xd=new WeakMap,Ul=new WeakMap,Ll=new WeakMap,ic=new WeakMap,eh=new WeakMap,mt=new WeakSet,Rf=function(e){Ve(this,mt,sC).call(this);let n=q(this,tt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(br)),n},ZE=function(){Ve(this,mt,nC).call(this);const e=Sc(this.options.staleTime,q(this,tt));if(tu||q(this,wr).isStale||!KE(e))return;const r=n5(q(this,wr).dataUpdatedAt,e)+1;me(this,Ul,setTimeout(()=>{q(this,wr).isStale||this.updateResult()},r))},XE=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(q(this,tt)):this.options.refetchInterval)??!1},eC=function(e){Ve(this,mt,rC).call(this),me(this,ic,e),!(tu||yi(this.options.enabled,q(this,tt))===!1||!KE(q(this,ic))||q(this,ic)===0)&&me(this,Ll,setInterval(()=>{(this.options.refetchIntervalInBackground||aA.isFocused())&&Ve(this,mt,Rf).call(this)},q(this,ic)))},tC=function(){Ve(this,mt,ZE).call(this),Ve(this,mt,eC).call(this,Ve(this,mt,XE).call(this))},nC=function(){q(this,Ul)&&(clearTimeout(q(this,Ul)),me(this,Ul,void 0))},rC=function(){q(this,Ll)&&(clearInterval(q(this,Ll)),me(this,Ll,void 0))},sC=function(){const e=q(this,Fr).getQueryCache().build(q(this,Fr),this.options);if(e===q(this,tt))return;const n=q(this,tt);me(this,tt,e),me(this,Wg,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},h5=function(e){En.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(q(this,wr))}),q(this,Fr).getQueryCache().notify({query:q(this,tt),type:"observerResultsUpdated"})})},ZO);function IW(t,e){return yi(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function wT(t,e){return IW(t,e)||t.state.data!==void 0&&iC(t,e,e.refetchOnMount)}function iC(t,e,n){if(yi(e.enabled,t)!==!1&&Sc(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&cA(t,e)}return!1}function vT(t,e,n,r){return(t!==e||yi(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&cA(t,n)}function cA(t,e){return yi(e.enabled,t)!==!1&&t.isStaleByTime(Sc(e.staleTime,t))}function TW(t,e){return!r0(t.getCurrentResult(),e)}var oc,ac,zr,Lo,Yo,cw,oC,XO,NW=(XO=class extends kh{constructor(n,r){super();Ne(this,Yo);Ne(this,oc);Ne(this,ac);Ne(this,zr);Ne(this,Lo);me(this,oc,n),this.setOptions(r),this.bindMethods(),Ve(this,Yo,cw).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=q(this,oc).defaultMutationOptions(n),r0(this.options,r)||q(this,oc).getMutationCache().notify({type:"observerOptionsUpdated",mutation:q(this,zr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&nu(r.mutationKey)!==nu(this.options.mutationKey)?this.reset():((s=q(this,zr))==null?void 0:s.state.status)==="pending"&&q(this,zr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=q(this,zr))==null||n.removeObserver(this)}onMutationUpdate(n){Ve(this,Yo,cw).call(this),Ve(this,Yo,oC).call(this,n)}getCurrentResult(){return q(this,ac)}reset(){var n;(n=q(this,zr))==null||n.removeObserver(this),me(this,zr,void 0),Ve(this,Yo,cw).call(this),Ve(this,Yo,oC).call(this)}mutate(n,r){var s;return me(this,Lo,r),(s=q(this,zr))==null||s.removeObserver(this),me(this,zr,q(this,oc).getMutationCache().build(q(this,oc),this.options)),q(this,zr).addObserver(this),q(this,zr).execute(n)}},oc=new WeakMap,ac=new WeakMap,zr=new WeakMap,Lo=new WeakMap,Yo=new WeakSet,cw=function(){var r;const n=((r=q(this,zr))==null?void 0:r.state)??d5();me(this,ac,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},oC=function(n){En.batch(()=>{var r,s,i,o,a,c,l,u;if(q(this,Lo)&&this.hasListeners()){const d=q(this,ac).variables,h=q(this,ac).context;(n==null?void 0:n.type)==="success"?((s=(r=q(this,Lo)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=q(this,Lo)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=q(this,Lo)).onError)==null||c.call(a,n.error,d,h),(u=(l=q(this,Lo)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(q(this,ac))})})},XO);function PW(t){return JSON.stringify(t,(e,n)=>kW(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function kW(t){if(!bT(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!bT(n)||!n.hasOwnProperty("isPrototypeOf"))}function bT(t){return Object.prototype.toString.call(t)==="[object Object]"}function f5(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:y,getNextPageParam:w,initialPageParam:b,_optimisticResults:v,enabled:E,notifyOnChangeProps:_,placeholderData:x,refetchInterval:S,refetchIntervalInBackground:T,refetchOnMount:C,refetchOnReconnect:O,refetchOnWindowFocus:R,retryOnMount:B,select:H,staleTime:z,suspense:A,throwOnError:I,config:j,connector:N,query:k,...L}=t;return L}function OW(t){return{mutationFn(e){return ow(t,e)},mutationKey:["connect"]}}function RW(t){return{mutationFn(e){return HD(t,e)},mutationKey:["disconnect"]}}function $W(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return aq(t,{...i,address:r})},queryKey:DW(e)}}function DW(t={}){return["ensName",f5(t)]}function jW(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return cq(t,{...o,connector:r})},queryKey:UW(e)}}function UW(t={}){const{connector:e,...n}=t;return["walletClient",{...f5(n),connectorUid:e==null?void 0:e.uid}]}var p5=F.createContext(void 0),lA=t=>{const e=F.useContext(p5);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},LW=({client:t,children:e})=>(F.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(p5.Provider,{value:t,children:e})),g5=F.createContext(!1),MW=()=>F.useContext(g5);g5.Provider;function BW(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var FW=F.createContext(BW()),zW=()=>F.useContext(FW),qW=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},WW=t=>{F.useEffect(()=>{t.clearReset()},[t])},HW=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||i5(n,[t.error,r])),VW=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},GW=(t,e)=>t.isLoading&&t.isFetching&&!e,KW=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,_T=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function YW(t,e,n){var d,h,f,p,g;const r=MW(),s=zW(),i=lA(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",VW(o),qW(o,s),WW(s);const a=!i.getQueryCache().get(o.queryHash),[c]=F.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(F.useSyncExternalStore(F.useCallback(y=>{const w=u?c.subscribe(En.batchCalls(y)):br;return c.updateResult(),w},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),F.useEffect(()=>{c.setOptions(o)},[o,c]),KW(o,l))throw _T(o,c,s);if(HW({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!tu&&GW(l,r)){const y=a?_T(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(br).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function QW(t,e){return YW(t,AW)}function m5(t,e){const n=lA(),[r]=F.useState(()=>new NW(n,t));F.useEffect(()=>{r.setOptions(t)},[r,t]);const s=F.useSyncExternalStore(F.useCallback(o=>r.subscribe(En.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=F.useCallback((o,a)=>{r.mutate(o,a).catch(br)},[r]);if(s.error&&i5(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function y5(t){const e=QW({...t,queryKeyHashFn:PW});return e.queryKey=t.queryKey,e}function w5(t={}){const e=Kc(t);return F.useSyncExternalStore(n=>fq(e,{onChange:n}),()=>oT(e),()=>oT(e))}function JW(t={}){const e=Kc(t);return F.useSyncExternalStore(n=>KD(e,{onChange:n}),()=>aT(e),()=>aT(e))}function v5(t={}){const{mutation:e}=t,n=Kc(t),r=OW(n),{mutate:s,mutateAsync:i,...o}=m5({...e,...r});return F.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:JW({config:n})}}function ZW(t={}){const e=Kc(t);return F.useSyncExternalStore(n=>pq(e,{onChange:n}),()=>Gi(e),()=>Gi(e))}function b5(t={}){const{mutation:e}=t,n=Kc(t),r=RW(n),{mutate:s,mutateAsync:i,...o}=m5({...e,...r});return{...o,connectors:ZW({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function _5(t={}){const{address:e,query:n={}}=t,r=Kc(t),s=w5({config:r}),i=$W(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return y5({...n,...i,enabled:o})}function E5(t={}){const{query:e={},...n}=t,r=Kc(n),s=lA(),{address:i,connector:o,status:a}=dv({config:r}),c=w5({config:r}),l=t.connector??o,{queryKey:u,...d}=jW(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=F.useRef(i);return F.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),y5({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}const XW="_verified_lvyh0_1",uA={verified:XW},eH=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:uA.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),tH=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:uA.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),nH=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:uA.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function C5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=C5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ac(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=C5(t))&&(r&&(r+=" "),r+=e);return r}const rH="_root_98iqw_1",sH="_article_98iqw_21",ET={root:rH,article:sH},dA=({className:t,children:e})=>m.jsx("div",{className:Ac("react-tweet-theme",ET.root,t),children:m.jsx("article",{className:ET.article,children:e})}),x5=t=>m.jsx("img",{...t}),iH="_header_nqq4j_1",oH="_avatar_nqq4j_11",aH="_avatarOverflow_nqq4j_16",cH="_avatarSquare_nqq4j_23",lH="_avatarShadow_nqq4j_26",uH="_author_nqq4j_37",dH="_authorLink_nqq4j_44",hH="_authorVerified_nqq4j_53",fH="_authorLinkText_nqq4j_56",pH="_authorMeta_nqq4j_63",gH="_authorFollow_nqq4j_66",mH="_username_nqq4j_69",yH="_follow_nqq4j_74",wH="_separator_nqq4j_82",vH="_brand_nqq4j_86",bH="_twitterIcon_nqq4j_90",Un={header:iH,avatar:oH,avatarOverflow:aH,avatarSquare:cH,avatarShadow:lH,author:uH,authorLink:dH,authorVerified:hH,authorLinkText:fH,authorMeta:pH,authorFollow:gH,username:mH,follow:yH,separator:wH,brand:vH,twitterIcon:bH},_H="_verifiedOld_lcna5_1",EH="_verifiedBlue_lcna5_4",CH="_verifiedGovernment_lcna5_7",Zb={verifiedOld:_H,verifiedBlue:EH,verifiedGovernment:CH},S5=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(eH,{}),s=Zb.verifiedBlue;if(n)switch(t.is_blue_verified||(s=Zb.verifiedOld),t.verified_type){case"Government":r=m.jsx(nH,{}),s=Zb.verifiedGovernment;break;case"Business":r=m.jsx(tH,{}),s=null;break}return n?m.jsx("div",{className:Ac(e,s),children:r}):null},xH=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:x5,{user:s}=t;return m.jsxs("div",{className:Un.header,children:[m.jsxs("a",{href:t.url,className:Un.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Ac(Un.avatarOverflow,s.profile_image_shape==="Square"&&Un.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:Un.avatarOverflow,children:m.jsx("div",{className:Un.avatarShadow})})]}),m.jsxs("div",{className:Un.author,children:[m.jsxs("a",{href:t.url,className:Un.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Un.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(S5,{user:s,className:Un.authorVerified})]}),m.jsxs("div",{className:Un.authorMeta,children:[m.jsx("a",{href:t.url,className:Un.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:Un.authorFollow,children:[m.jsx("span",{className:Un.separator,children:"·"}),m.jsx("a",{href:s.follow_url,className:Un.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:Un.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Un.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},SH="_root_1ec15_1",AH={root:SH},IH=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:AH.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),TH="_root_eihfa_1",NH={root:TH},PH=({href:t,children:e})=>m.jsx("a",{href:t,className:NH.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),kH="_root_1xq52_1",OH={root:kH},RH=({tweet:t})=>m.jsx("p",{className:OH.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(PH,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),CT=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,A5=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,$H=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,DH=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,jH=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,UH=t=>`https://x.com/hashtag/${t.text}`,LH=t=>`https://x.com/search?q=%24${t.text}`,MH=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,I5=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},BH=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},FH=t=>{const e=BH(t);return e.length>1?e[1]:e[0]},aC=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function xT(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return sf(n,"hashtag",t.entities.hashtags),sf(n,"mention",t.entities.user_mentions),sf(n,"url",t.entities.urls),sf(n,"symbol",t.entities.symbols),t.entities.media&&sf(n,"media",t.entities.media),zH(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:UH(r),text:s});case"mention":return Object.assign(r,{href:A5(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:LH(r),text:s});default:return Object.assign(r,{text:s})}})}function sf(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function zH(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const qH=t=>({...t,url:CT(t),user:{...t.user,url:A5(t),follow_url:jH(t)},like_url:$H(t),reply_url:DH(t),in_reply_to_url:t.in_reply_to_screen_name?MH(t):void 0,entities:xT(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:CT(t.quoted_tweet),entities:xT(t.quoted_tweet)}:void 0}),WH="_root_g9tkv_1",HH="_rounded_g9tkv_6",VH="_mediaWrapper_g9tkv_10",GH="_grid2Columns_g9tkv_17",KH="_grid3_g9tkv_20",YH="_grid2x2_g9tkv_23",QH="_mediaContainer_g9tkv_26",JH="_mediaLink_g9tkv_34",ZH="_skeleton_g9tkv_38",XH="_image_g9tkv_43",cs={root:WH,rounded:HH,mediaWrapper:VH,grid2Columns:GH,grid3:KH,grid2x2:YH,mediaContainer:QH,mediaLink:JH,skeleton:ZH,image:XH},eV="_anchor_fp31d_1",tV="_videoButton_fp31d_17",nV="_videoButtonIcon_fp31d_35",rV="_watchOnTwitter_fp31d_44",sV="_viewReplies_fp31d_60",Du={anchor:eV,videoButton:tV,videoButtonIcon:nV,watchOnTwitter:rV,viewReplies:sV},iV=({tweet:t,media:e})=>{const[n,r]=F.useState(!0),[s,i]=F.useState(!1),[o,a]=F.useState(!1),c=FH(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:cs.image,poster:I5(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:Du.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:Du.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:Du.watchOnTwitter,children:m.jsx("a",{href:t.url,className:Du.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:Ac(Du.anchor,Du.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},oV=t=>m.jsx("img",{...t}),ST=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},T5=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:oV;return m.jsx("div",{className:Ac(cs.root,!n&&cs.rounded),children:m.jsx("div",{className:Ac(cs.mediaWrapper,o>1&&cs.grid2Columns,o===3&&cs.grid3,o>4&&cs.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(F.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:Ac(cs.mediaContainer,cs.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:cs.skeleton,style:ST(l,o)}),m.jsx(c,{src:I5(l,"small"),alt:l.ext_alt_text||"Image",className:cs.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:cs.mediaContainer,children:[m.jsx("div",{className:cs.skeleton,style:ST(l,o)}),m.jsx(iV,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},aV={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},cV=new Intl.DateTimeFormat("en-US",aV),lV=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},uV=t=>{const e=lV(cV.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},dV="_root_i24yn_1",hV={root:dV},fV=({tweet:t})=>{const e=new Date(t.created_at),n=uV(e);return m.jsx("a",{className:hV.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},pV="_info_19qcj_1",gV="_infoLink_19qcj_10",mV="_infoIcon_19qcj_30",Xb={info:pV,infoLink:gV,infoIcon:mV},yV=({tweet:t})=>m.jsxs("div",{className:Xb.info,children:[m.jsx(fV,{tweet:t}),m.jsx("a",{className:Xb.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Xb.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),wV="_actions_n2anf_1",vV="_like_n2anf_13",bV="_reply_n2anf_14",_V="_copy_n2anf_15",EV="_likeIconWrapper_n2anf_27",CV="_likeCount_n2anf_30",xV="_replyIconWrapper_n2anf_35",SV="_copyIconWrapper_n2anf_36",AV="_likeIcon_n2anf_27",IV="_replyIcon_n2anf_35",TV="_copyIcon_n2anf_36",NV="_replyText_n2anf_56",PV="_copyText_n2anf_57",qr={actions:wV,like:vV,reply:bV,copy:_V,likeIconWrapper:EV,likeCount:CV,replyIconWrapper:xV,copyIconWrapper:SV,likeIcon:AV,replyIcon:IV,copyIcon:TV,replyText:NV,copyText:PV},kV=({tweet:t})=>{const[e,n]=F.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return F.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:qr.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:qr.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:qr.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:qr.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:qr.copyText,children:e?"Copied!":"Copy link"})]})},OV=({tweet:t})=>{const e=aC(t.favorite_count);return m.jsxs("div",{className:qr.actions,children:[m.jsxs("a",{className:qr.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:qr.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:qr.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:qr.likeCount,children:e})]}),m.jsxs("a",{className:qr.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:qr.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:qr.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:qr.replyText,children:"Reply"})]}),m.jsx(kV,{tweet:t})]})},RV="_replies_1cutb_1",$V="_link_1cutb_4",DV="_text_1cutb_23",e1={replies:RV,link:$V,text:DV},jV=({tweet:t})=>m.jsx("div",{className:e1.replies,children:m.jsx("a",{className:e1.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:e1.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${aC(t.conversation_count)} reply`:`Read ${aC(t.conversation_count)} replies`})})}),UV="_root_q5799_1",LV="_article_q5799_16",AT={root:UV,article:LV},MV=({tweet:t,children:e})=>m.jsx("div",{className:AT.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:AT.article,children:e})}),BV="_header_r31i5_1",FV="_avatar_r31i5_11",zV="_avatarSquare_r31i5_17",qV="_author_r31i5_21",WV="_authorText_r31i5_26",HV="_username_r31i5_33",Zc={header:BV,avatar:FV,avatarSquare:zV,author:qV,authorText:WV,username:HV},VV=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Zc.header,children:[m.jsx("a",{href:t.url,className:Zc.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:Ac(Zc.avatarOverflow,e.profile_image_shape==="Square"&&Zc.avatarSquare),children:m.jsx(x5,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Zc.author,children:[m.jsx("div",{className:Zc.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(S5,{user:e}),m.jsx("div",{className:Zc.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},GV="_root_175ot_1",KV={root:GV},YV=({tweet:t})=>m.jsx("p",{className:KV.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),QV=({tweet:t})=>{var e;return m.jsxs(MV,{tweet:t,children:[m.jsx(VV,{tweet:t}),m.jsx(YV,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(T5,{quoted:!0,tweet:t}):null]})},JV=({tweet:t,components:e})=>{var n;const r=F.useMemo(()=>qH(t),[t]);return m.jsxs(dA,{children:[m.jsx(xH,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(IH,{tweet:r}),m.jsx(RH,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(T5,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(QV,{tweet:r.quoted_tweet}),m.jsx(yV,{tweet:r}),m.jsx(OV,{tweet:r}),m.jsx(jV,{tweet:r})]})},ZV="_root_16yxa_1",XV={root:ZV},eG=t=>m.jsx(dA,{children:m.jsxs("div",{className:XV.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found…"})]})}),tG="_skeleton_oi7hr_1",nG={skeleton:tG},ay=({style:t})=>m.jsx("span",{className:nG.skeleton,style:t}),rG="_root_17qqv_1",sG={root:rG},iG=()=>m.jsxs(dA,{className:sG.root,children:[m.jsx(ay,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(ay,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(ay,{style:{height:"2rem"}}),m.jsx(ay,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var N5={exports:{}},P5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh=F;function oG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var aG=typeof Object.is=="function"?Object.is:oG,cG=fh.useState,lG=fh.useEffect,uG=fh.useLayoutEffect,dG=fh.useDebugValue;function hG(t,e){var n=e(),r=cG({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return uG(function(){s.value=n,s.getSnapshot=e,t1(s)&&i({inst:s})},[t,n,e]),lG(function(){return t1(s)&&i({inst:s}),t(function(){t1(s)&&i({inst:s})})},[t]),dG(n),n}function t1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!aG(t,n)}catch{return!0}}function fG(t,e){return e()}var pG=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?fG:hG;P5.useSyncExternalStore=fh.useSyncExternalStore!==void 0?fh.useSyncExternalStore:pG;N5.exports=P5;var gG=N5.exports;const k5=0,O5=1,R5=2,IT=3;var TT=Object.prototype.hasOwnProperty;function cC(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&cC(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(TT.call(t,n)&&++r&&!TT.call(e,n)||!(n in e)||!cC(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Mo=new WeakMap,dc=()=>{},_r=dc(),lC=Object,st=t=>t===_r,eo=t=>typeof t=="function",Lc=(t,e)=>({...t,...e}),$5=t=>eo(t.then),n1={},cy={},hA="undefined",im=typeof window!=hA,uC=typeof document!=hA,mG=im&&"Deno"in window,yG=()=>im&&typeof window.requestAnimationFrame!=hA,D5=(t,e)=>{const n=Mo.get(t);return[()=>!st(e)&&t.get(e)||n1,r=>{if(!st(e)){const s=t.get(e);e in cy||(cy[e]=s),n[5](e,Lc(s,r),s||n1)}},n[6],()=>!st(e)&&e in cy?cy[e]:!st(e)&&t.get(e)||n1]};let dC=!0;const wG=()=>dC,[hC,fC]=im&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[dc,dc],vG=()=>{const t=uC&&document.visibilityState;return st(t)||t!=="hidden"},bG=t=>(uC&&document.addEventListener("visibilitychange",t),hC("focus",t),()=>{uC&&document.removeEventListener("visibilitychange",t),fC("focus",t)}),_G=t=>{const e=()=>{dC=!0,t()},n=()=>{dC=!1};return hC("online",e),hC("offline",n),()=>{fC("online",e),fC("offline",n)}},EG={isOnline:wG,isVisible:vG},CG={initFocus:bG,initReconnect:_G},NT=!Ws.useId,lg=!im||mG,xG=t=>yG()?window.requestAnimationFrame(t):setTimeout(t,1),r1=lg?F.useEffect:F.useLayoutEffect,s1=typeof navigator<"u"&&navigator.connection,PT=!lg&&s1&&(["slow-2g","2g"].includes(s1.effectiveType)||s1.saveData),ly=new WeakMap,i1=(t,e)=>lC.prototype.toString.call(t)===`[object ${e}]`;let SG=0;const pC=t=>{const e=typeof t,n=i1(t,"Date"),r=i1(t,"RegExp"),s=i1(t,"Object");let i,o;if(lC(t)===t&&!n&&!r){if(i=ly.get(t),i)return i;if(i=++SG+"~",ly.set(t,i),Array.isArray(t)){for(i="@",o=0;o<t.length;o++)i+=pC(t[o])+",";ly.set(t,i)}if(s){i="#";const a=lC.keys(t).sort();for(;!st(o=a.pop());)st(t[o])||(i+=o+":"+pC(t[o])+",");ly.set(t,i)}}else i=n?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return i},fA=t=>{if(eo(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?pC(t):"",[t,e]};let AG=0;const gC=()=>++AG;async function j5(...t){const[e,n,r,s]=t,i=Lc({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(eo(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=fA(h);if(!f)return;const[p,g]=D5(e,f),[y,w,b,v]=Mo.get(e),E=()=>{const H=y[f];return(eo(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],H&&H[0])?H[0](R5).then(()=>p().data):p().data};if(t.length<3)return E();let _=r,x;const S=gC();w[f]=[S,0];const T=!st(c),C=p(),O=C.data,R=C._c,B=st(R)?O:R;if(T&&(c=eo(c)?c(B,O):c,g({data:c,_c:B})),eo(_))try{_=_(B)}catch(H){x=H}if(_&&$5(_))if(_=await _.catch(H=>{x=H}),S!==w[f][0]){if(x)throw x;return _}else x&&T&&l(x)&&(o=!0,g({data:B,_c:_r}));if(o&&!x)if(eo(o)){const H=o(_,B);g({data:H,error:_r,_c:_r})}else g({data:_,error:_r,_c:_r});if(w[f][1]=gC(),Promise.resolve(E()).then(()=>{g({_c:_r})}),x){if(u)throw x;return}return _}}const kT=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},IG=(t,e)=>{if(!Mo.has(t)){const n=Lc(CG,e),r=Object.create(null),s=j5.bind(_r,t);let i=dc;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Mo.has(t)&&(Mo.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!lg)){const u=n.initFocus(setTimeout.bind(_r,kT.bind(_r,r,k5))),d=n.initReconnect(setTimeout.bind(_r,kT.bind(_r,r,O5)));i=()=>{u&&u(),d&&d(),Mo.delete(t)}}};return l(),[t,s,l,i]}return[t,Mo.get(t)[4]]},TG=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!st(i)&&o>i||setTimeout(r,a,s)},NG=cC,[U5,PG]=IG(new Map),kG=Lc({onLoadingSlow:dc,onSuccess:dc,onError:dc,onErrorRetry:TG,onDiscarded:dc,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:PT?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:PT?5e3:3e3,compare:NG,isPaused:()=>!1,cache:U5,mutate:PG,fallback:{}},EG),OG=(t,e)=>{const n=Lc(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Lc(s,o))}return n},RG=F.createContext({}),$G="$inf$",L5=im&&window.__SWR_DEVTOOLS_USE__,DG=L5?window.__SWR_DEVTOOLS_USE__:[],jG=()=>{L5&&(window.__SWR_DEVTOOLS_REACT__=Ws)},UG=t=>eo(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],LG=()=>Lc(kG,F.useContext(RG)),MG=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=fA(e),[,,,a]=Mo.get(U5);if(o.startsWith($G))return n(...i);const c=a[o];return st(c)?n(...i):(delete a[o],c)}),r),BG=DG.concat(MG),FG=t=>function(...n){const r=LG(),[s,i,o]=UG(n),a=OG(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(BG);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},zG=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};jG();const o1=Ws.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),a1={dedupe:!0},qG=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,y]=Mo.get(r),[w,b]=fA(t),v=F.useRef(!1),E=F.useRef(!1),_=F.useRef(w),x=F.useRef(e),S=F.useRef(n),T=()=>S.current,C=()=>T().isVisible()&&T().isOnline(),[O,R,B,H]=D5(r,w),z=F.useRef({}).current,A=st(o)?st(n.fallback)?_r:n.fallback[w]:o,I=(Ye,Qe)=>{for(const qt in z){const St=qt;if(St==="data"){if(!s(Ye[St],Qe[St])&&(!st(Ye[St])||!s(ee,Qe[St])))return!1}else if(Qe[St]!==Ye[St])return!1}return!0},j=F.useMemo(()=>{const Ye=!w||!e?!1:st(a)?T().isPaused()||i?!1:c!==!1:a,Qe=Zt=>{const Sn=Lc(Zt);return delete Sn._k,Ye?{isValidating:!0,isLoading:!0,...Sn}:Sn},qt=O(),St=H(),xn=Qe(qt),ss=qt===St?xn:Qe(St);let Ut=xn;return[()=>{const Zt=Qe(O());return I(Zt,Ut)?(Ut.data=Zt.data,Ut.isLoading=Zt.isLoading,Ut.isValidating=Zt.isValidating,Ut.error=Zt.error,Ut):(Ut=Zt,Zt)},()=>ss]},[r,w]),N=gG.useSyncExternalStore(F.useCallback(Ye=>B(w,(Qe,qt)=>{I(qt,Qe)||Ye()}),[r,w]),j[0],j[1]),k=!v.current,L=f[w]&&f[w].length>0,W=N.data,G=st(W)?A&&$5(A)?o1(A):A:W,Z=N.error,Q=F.useRef(G),ee=h?st(W)?st(Q.current)?G:Q.current:W:G,ae=L&&!st(Z)?!1:k&&!st(a)?a:T().isPaused()?!1:i?st(G)?!1:c:st(G)||c,ye=!!(w&&e&&k&&ae),$e=st(N.isValidating)?ye:N.isValidating,Ae=st(N.isLoading)?ye:N.isLoading,Me=F.useCallback(async Ye=>{const Qe=x.current;if(!w||!Qe||E.current||T().isPaused())return!1;let qt,St,xn=!0;const ss=Ye||{},Ut=!g[w]||!ss.dedupe,Zt=()=>NT?!E.current&&w===_.current&&v.current:w===_.current,Sn={isValidating:!1,isLoading:!1},ei=()=>{R(Sn)},is=()=>{const fn=g[w];fn&&fn[1]===St&&delete g[w]},Is={isValidating:!0};st(O().data)&&(Is.isLoading=!0);try{if(Ut&&(R(Is),n.loadingTimeout&&st(O().data)&&setTimeout(()=>{xn&&Zt()&&T().onLoadingSlow(w,n)},n.loadingTimeout),g[w]=[Qe(b),gC()]),[qt,St]=g[w],qt=await qt,Ut&&setTimeout(is,n.dedupingInterval),!g[w]||g[w][1]!==St)return Ut&&Zt()&&T().onDiscarded(w),!1;Sn.error=_r;const fn=p[w];if(!st(fn)&&(St<=fn[0]||St<=fn[1]||fn[1]===0))return ei(),Ut&&Zt()&&T().onDiscarded(w),!1;const Xn=O().data;Sn.data=s(Xn,qt)?Xn:qt,Ut&&Zt()&&T().onSuccess(qt,w,n)}catch(fn){is();const Xn=T(),{shouldRetryOnError:mo}=Xn;Xn.isPaused()||(Sn.error=fn,Ut&&Zt()&&(Xn.onError(fn,w,Xn),(mo===!0||eo(mo)&&mo(fn))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||C())&&Xn.onErrorRetry(fn,w,Xn,la=>{const ti=f[w];ti&&ti[0]&&ti[0](IT,la)},{retryCount:(ss.retryCount||0)+1,dedupe:!0})))}return xn=!1,ei(),!0},[w,r]),yt=F.useCallback((...Ye)=>j5(r,_.current,...Ye),[]);if(r1(()=>{x.current=e,S.current=n,st(W)||(Q.current=W)}),r1(()=>{if(!w)return;const Ye=Me.bind(_r,a1);let Qe=0;T().revalidateOnFocus&&(Qe=Date.now()+T().focusThrottleInterval);const St=zG(w,f,(xn,ss={})=>{if(xn==k5){const Ut=Date.now();T().revalidateOnFocus&&Ut>Qe&&C()&&(Qe=Ut+T().focusThrottleInterval,Ye())}else if(xn==O5)T().revalidateOnReconnect&&C()&&Ye();else{if(xn==R5)return Me();if(xn==IT)return Me(ss)}});return E.current=!1,_.current=w,v.current=!0,R({_k:b}),ae&&(st(G)||lg?Ye():xG(Ye)),()=>{E.current=!0,St()}},[w]),r1(()=>{let Ye;function Qe(){const St=eo(l)?l(O().data):l;St&&Ye!==-1&&(Ye=setTimeout(qt,St))}function qt(){!O().error&&(u||T().isVisible())&&(d||T().isOnline())?Me(a1).then(Qe):Qe()}return Qe(),()=>{Ye&&(clearTimeout(Ye),Ye=-1)}},[l,u,d,w]),F.useDebugValue(ee),i&&st(G)&&w){if(!NT&&lg)throw new Error("Fallback data is required when using Suspense in SSR.");x.current=e,S.current=n,E.current=!1;const Ye=y[w];if(!st(Ye)){const Qe=yt(Ye);o1(Qe)}if(st(Z)){const Qe=Me(a1);st(ee)||(Qe.status="fulfilled",Qe.value=!0),o1(Qe)}else throw Z}return{mutate:yt,get data(){return z.data=!0,ee},get error(){return z.error=!0,Z},get isValidating(){return z.isValidating=!0,$e},get isLoading(){return z.isLoading=!0,Ae}}},OT=FG(qG);class WG extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const HG=OT.default||OT,VG="https://react-tweet.vercel.app";async function GG([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new WG({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const KG=(t,e,n)=>{const{isLoading:r,data:s,error:i}=HG(()=>e||t?[e||t&&`${VG}/api/tweet/${t}`,n]:null,GG,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},YG=({id:t,apiUrl:e,fallback:n=m.jsx(iG,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=KG(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||eG;return m.jsx(l,{error:i?i(a):a})}return m.jsx(JV,{tweet:o,components:r})};var hv={exports:{}},M5={},B5={exports:{}},QG="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",JG=QG,ZG=JG;function F5(){}function z5(){}z5.resetWarningCache=F5;var XG=function(){function t(r,s,i,o,a,c){if(c!==ZG){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:z5,resetWarningCache:F5};return n.PropTypes=n,n};B5.exports=XG();var q5=B5.exports;function W5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=W5(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function RT(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=W5(t))&&(r&&(r+=" "),r+=e);return r}const eK=Object.freeze(Object.defineProperty({__proto__:null,clsx:RT,default:RT},Symbol.toStringTag,{value:"Module"})),tK=D0(eK);var rn={},po={};Object.defineProperty(po,"__esModule",{value:!0});po.dontSetMe=oK;po.findInArray=nK;po.int=iK;po.isFunction=rK;po.isNum=sK;function nK(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function rK(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function sK(t){return typeof t=="number"&&!isNaN(t)}function iK(t){return parseInt(t,10)}function oK(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var wu={};Object.defineProperty(wu,"__esModule",{value:!0});wu.browserPrefixToKey=V5;wu.browserPrefixToStyle=aK;wu.default=void 0;wu.getPrefix=H5;const c1=["Moz","Webkit","O","ms"];function H5(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<c1.length;r++)if(V5(e,c1[r])in n)return c1[r];return""}function V5(t,e){return e?"".concat(e).concat(cK(t)):t}function aK(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function cK(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}wu.default=H5();Object.defineProperty(rn,"__esModule",{value:!0});rn.addClassName=Y5;rn.addEvent=dK;rn.addUserSelectStyles=EK;rn.createCSSTransform=wK;rn.createSVGTransform=vK;rn.getTouch=bK;rn.getTouchIdentifier=_K;rn.getTranslation=pA;rn.innerHeight=gK;rn.innerWidth=mK;rn.matchesSelector=K5;rn.matchesSelectorAndParentsTo=uK;rn.offsetXYFromParent=yK;rn.outerHeight=fK;rn.outerWidth=pK;rn.removeClassName=Q5;rn.removeEvent=hK;rn.removeUserSelectStyles=CK;var vs=po,$T=lK(wu);function G5(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(G5=function(r){return r?n:e})(t)}function lK(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=G5(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}let uy="";function K5(t,e){return uy||(uy=(0,vs.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,vs.isFunction)(t[n])})),(0,vs.isFunction)(t[uy])?t[uy](e):!1}function uK(t,e,n){let r=t;do{if(K5(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function dK(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function hK(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function fK(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,vs.int)(n.borderTopWidth),e+=(0,vs.int)(n.borderBottomWidth),e}function pK(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,vs.int)(n.borderLeftWidth),e+=(0,vs.int)(n.borderRightWidth),e}function gK(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,vs.int)(n.paddingTop),e-=(0,vs.int)(n.paddingBottom),e}function mK(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,vs.int)(n.paddingLeft),e-=(0,vs.int)(n.paddingRight),e}function yK(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function wK(t,e){const n=pA(t,e,"px");return{[(0,$T.browserPrefixToKey)("transform",$T.default)]:n}}function vK(t,e){return pA(t,e,"")}function pA(t,e,n){let{x:r,y:s}=t,i="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);i="translate(".concat(o,", ").concat(a,")")+i}return i}function bK(t,e){return t.targetTouches&&(0,vs.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,vs.findInArray)(t.changedTouches,n=>e===n.identifier)}function _K(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function EK(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&Y5(t.body,"react-draggable-transparent-selection")}function CK(t){if(t)try{if(t.body&&Q5(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function Y5(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function Q5(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var go={};Object.defineProperty(go,"__esModule",{value:!0});go.canDragX=AK;go.canDragY=IK;go.createCoreData=NK;go.createDraggableData=PK;go.getBoundPosition=xK;go.getControlPosition=TK;go.snapToGrid=SK;var ls=po,Ad=rn;function xK(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:kK(r);const s=gA(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=i.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,ls.int)(u.paddingLeft)+(0,ls.int)(l.marginLeft),top:-s.offsetTop+(0,ls.int)(u.paddingTop)+(0,ls.int)(l.marginTop),right:(0,Ad.innerWidth)(c)-(0,Ad.outerWidth)(s)-s.offsetLeft+(0,ls.int)(u.paddingRight)-(0,ls.int)(l.marginRight),bottom:(0,Ad.innerHeight)(c)-(0,Ad.outerHeight)(s)-s.offsetTop+(0,ls.int)(u.paddingBottom)-(0,ls.int)(l.marginBottom)}}return(0,ls.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,ls.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,ls.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,ls.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function SK(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function AK(t){return t.props.axis==="both"||t.props.axis==="x"}function IK(t){return t.props.axis==="both"||t.props.axis==="y"}function TK(t,e,n){const r=typeof e=="number"?(0,Ad.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=gA(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Ad.offsetXYFromParent)(r||t,i,n.props.scale)}function NK(t,e,n){const r=!(0,ls.isNum)(t.lastX),s=gA(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function PK(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function kK(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function gA(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var fv={},pv={};Object.defineProperty(pv,"__esModule",{value:!0});pv.default=OK;function OK(){}Object.defineProperty(fv,"__esModule",{value:!0});fv.default=void 0;var l1=$K(F),Pr=mA(q5),RK=mA(DS),nr=rn,ya=go,u1=po,of=mA(pv);function mA(t){return t&&t.__esModule?t:{default:t}}function J5(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(J5=function(r){return r?n:e})(t)}function $K(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=J5(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function mr(t,e,n){return e=DK(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DK(t){var e=jK(t,"string");return typeof e=="symbol"?e:String(e)}function jK(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ai={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let wa=ai.mouse,gv=class extends l1.Component{constructor(){super(...arguments),mr(this,"dragging",!1),mr(this,"lastX",NaN),mr(this,"lastY",NaN),mr(this,"touchIdentifier",null),mr(this,"mounted",!1),mr(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,nr.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,nr.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const s=(0,nr.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,ya.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,ya.createCoreData)(this,o,a);(0,of.default)("DraggableCore: handleDragStart: %j",c),(0,of.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,nr.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,nr.addEvent)(r,wa.move,this.handleDrag),(0,nr.addEvent)(r,wa.stop,this.handleDragStop))}),mr(this,"handleDrag",e=>{const n=(0,ya.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,ya.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,ya.createCoreData)(this,r,s);if((0,of.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),mr(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,ya.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,ya.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,ya.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,nr.removeUserSelectStyles)(a.ownerDocument),(0,of.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,of.default)("DraggableCore: Removing handlers"),(0,nr.removeEvent)(a.ownerDocument,wa.move,this.handleDrag),(0,nr.removeEvent)(a.ownerDocument,wa.stop,this.handleDragStop))}),mr(this,"onMouseDown",e=>(wa=ai.mouse,this.handleDragStart(e))),mr(this,"onMouseUp",e=>(wa=ai.mouse,this.handleDragStop(e))),mr(this,"onTouchStart",e=>(wa=ai.touch,this.handleDragStart(e))),mr(this,"onTouchEnd",e=>(wa=ai.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,nr.addEvent)(e,ai.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,nr.removeEvent)(n,ai.mouse.move,this.handleDrag),(0,nr.removeEvent)(n,ai.touch.move,this.handleDrag),(0,nr.removeEvent)(n,ai.mouse.stop,this.handleDragStop),(0,nr.removeEvent)(n,ai.touch.stop,this.handleDragStop),(0,nr.removeEvent)(e,ai.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,nr.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:RK.default.findDOMNode(this)}render(){return l1.cloneElement(l1.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};fv.default=gv;mr(gv,"displayName","DraggableCore");mr(gv,"propTypes",{allowAnyClick:Pr.default.bool,children:Pr.default.node.isRequired,disabled:Pr.default.bool,enableUserSelectHack:Pr.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Pr.default.arrayOf(Pr.default.number),handle:Pr.default.string,cancel:Pr.default.string,nodeRef:Pr.default.object,onStart:Pr.default.func,onDrag:Pr.default.func,onStop:Pr.default.func,onMouseDown:Pr.default.func,scale:Pr.default.number,className:u1.dontSetMe,style:u1.dontSetMe,transform:u1.dontSetMe});mr(gv,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=h(F),n=u(q5),r=u(DS),s=u(tK),i=rn,o=go,a=po,c=u(fv),l=u(pv);function u(b){return b&&b.__esModule?b:{default:b}}function d(b){if(typeof WeakMap!="function")return null;var v=new WeakMap,E=new WeakMap;return(d=function(_){return _?E:v})(b)}function h(b,v){if(b&&b.__esModule)return b;if(b===null||typeof b!="object"&&typeof b!="function")return{default:b};var E=d(v);if(E&&E.has(b))return E.get(b);var _={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in b)if(S!=="default"&&Object.prototype.hasOwnProperty.call(b,S)){var T=x?Object.getOwnPropertyDescriptor(b,S):null;T&&(T.get||T.set)?Object.defineProperty(_,S,T):_[S]=b[S]}return _.default=b,E&&E.set(b,_),_}function f(){return f=Object.assign?Object.assign.bind():function(b){for(var v=1;v<arguments.length;v++){var E=arguments[v];for(var _ in E)Object.prototype.hasOwnProperty.call(E,_)&&(b[_]=E[_])}return b},f.apply(this,arguments)}function p(b,v,E){return v=g(v),v in b?Object.defineProperty(b,v,{value:E,enumerable:!0,configurable:!0,writable:!0}):b[v]=E,b}function g(b){var v=y(b,"string");return typeof v=="symbol"?v:String(v)}function y(b,v){if(typeof b!="object"||b===null)return b;var E=b[Symbol.toPrimitive];if(E!==void 0){var _=E.call(b,v);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(b)}class w extends e.Component{static getDerivedStateFromProps(v,E){let{position:_}=v,{prevPropsPosition:x}=E;return _&&(!x||_.x!==x.x||_.y!==x.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:x}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(v){super(v),p(this,"onDragStart",(E,_)=>{if((0,l.default)("Draggable: onDragStart: %j",_),this.props.onStart(E,(0,o.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(E,_)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",_);const x=(0,o.createDraggableData)(this,_),S={x:x.x,y:x.y,slackX:0,slackY:0};if(this.props.bounds){const{x:C,y:O}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[R,B]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=R,S.y=B,S.slackX=this.state.slackX+(C-S.x),S.slackY=this.state.slackY+(O-S.y),x.x=S.x,x.y=S.y,x.deltaX=S.x-this.state.x,x.deltaY=S.y-this.state.y}if(this.props.onDrag(E,x)===!1)return!1;this.setState(S)}),p(this,"onDragStop",(E,_)=>{if(!this.state.dragging||this.props.onStop(E,(0,o.createDraggableData)(this,_))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",_);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:C,y:O}=this.props.position;S.x=C,S.y=O}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:v.position?v.position.x:v.defaultPosition.x,y:v.position?v.position.y:v.defaultPosition.y,prevPropsPosition:{...v.position},slackX:0,slackY:0,isElementSVG:!1},v.position&&!(v.onDrag||v.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var v,E;return(v=(E=this.props)===null||E===void 0||(E=E.nodeRef)===null||E===void 0?void 0:E.current)!==null&&v!==void 0?v:r.default.findDOMNode(this)}render(){const{axis:v,bounds:E,children:_,defaultPosition:x,defaultClassName:S,defaultClassNameDragging:T,defaultClassNameDragged:C,position:O,positionOffset:R,scale:B,...H}=this.props;let z={},A=null;const j=!!!O||this.state.dragging,N=O||x,k={x:(0,o.canDragX)(this)&&j?this.state.x:N.x,y:(0,o.canDragY)(this)&&j?this.state.y:N.y};this.state.isElementSVG?A=(0,i.createSVGTransform)(k,R):z=(0,i.createCSSTransform)(k,R);const L=(0,s.default)(_.props.className||"",S,{[T]:this.state.dragging,[C]:this.state.dragged});return e.createElement(c.default,f({},H,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:L,style:{..._.props.style,...z},transform:A}))}}t.default=w,p(w,"displayName","Draggable"),p(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(M5);const{default:Z5,DraggableCore:UK}=M5;hv.exports=Z5;hv.exports.default=Z5;hv.exports.DraggableCore=UK;var LK=hv.exports;const om=pu(LK);function Yt(){return Yt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yt.apply(null,arguments)}function X5(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var e8={exports:{}},xt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jn=typeof Symbol=="function"&&Symbol.for,yA=jn?Symbol.for("react.element"):60103,wA=jn?Symbol.for("react.portal"):60106,mv=jn?Symbol.for("react.fragment"):60107,yv=jn?Symbol.for("react.strict_mode"):60108,wv=jn?Symbol.for("react.profiler"):60114,vv=jn?Symbol.for("react.provider"):60109,bv=jn?Symbol.for("react.context"):60110,vA=jn?Symbol.for("react.async_mode"):60111,_v=jn?Symbol.for("react.concurrent_mode"):60111,Ev=jn?Symbol.for("react.forward_ref"):60112,Cv=jn?Symbol.for("react.suspense"):60113,MK=jn?Symbol.for("react.suspense_list"):60120,xv=jn?Symbol.for("react.memo"):60115,Sv=jn?Symbol.for("react.lazy"):60116,BK=jn?Symbol.for("react.block"):60121,FK=jn?Symbol.for("react.fundamental"):60117,zK=jn?Symbol.for("react.responder"):60118,qK=jn?Symbol.for("react.scope"):60119;function Ss(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case yA:switch(t=t.type,t){case vA:case _v:case mv:case wv:case yv:case Cv:return t;default:switch(t=t&&t.$$typeof,t){case bv:case Ev:case Sv:case xv:case vv:return t;default:return e}}case wA:return e}}}function t8(t){return Ss(t)===_v}xt.AsyncMode=vA;xt.ConcurrentMode=_v;xt.ContextConsumer=bv;xt.ContextProvider=vv;xt.Element=yA;xt.ForwardRef=Ev;xt.Fragment=mv;xt.Lazy=Sv;xt.Memo=xv;xt.Portal=wA;xt.Profiler=wv;xt.StrictMode=yv;xt.Suspense=Cv;xt.isAsyncMode=function(t){return t8(t)||Ss(t)===vA};xt.isConcurrentMode=t8;xt.isContextConsumer=function(t){return Ss(t)===bv};xt.isContextProvider=function(t){return Ss(t)===vv};xt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===yA};xt.isForwardRef=function(t){return Ss(t)===Ev};xt.isFragment=function(t){return Ss(t)===mv};xt.isLazy=function(t){return Ss(t)===Sv};xt.isMemo=function(t){return Ss(t)===xv};xt.isPortal=function(t){return Ss(t)===wA};xt.isProfiler=function(t){return Ss(t)===wv};xt.isStrictMode=function(t){return Ss(t)===yv};xt.isSuspense=function(t){return Ss(t)===Cv};xt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===mv||t===_v||t===wv||t===yv||t===Cv||t===MK||typeof t=="object"&&t!==null&&(t.$$typeof===Sv||t.$$typeof===xv||t.$$typeof===vv||t.$$typeof===bv||t.$$typeof===Ev||t.$$typeof===FK||t.$$typeof===zK||t.$$typeof===qK||t.$$typeof===BK)};xt.typeOf=Ss;e8.exports=xt;var WK=e8.exports,bA=WK,HK={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},VK={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},GK={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_A={};_A[bA.ForwardRef]=GK;_A[bA.Memo]=n8;function DT(t){return bA.isMemo(t)?n8:_A[t.$$typeof]||HK}var KK=Object.defineProperty,YK=Object.getOwnPropertyNames,jT=Object.getOwnPropertySymbols,QK=Object.getOwnPropertyDescriptor,JK=Object.getPrototypeOf,UT=Object.prototype;function r8(t,e,n){if(typeof e!="string"){if(UT){var r=JK(e);r&&r!==UT&&r8(t,r,n)}var s=YK(e);jT&&(s=s.concat(jT(e)));for(var i=DT(t),o=DT(e),a=0;a<s.length;++a){var c=s[a];if(!VK[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=QK(e,c);try{KK(t,c,l)}catch{}}}}return t}var ZK=r8;const XK=pu(ZK);var s8={};Object.defineProperty(s8,"__esModule",{value:!0});s8.default=eY;function eY(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function dy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i0(){return i0=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i0.apply(this,arguments)}function tY(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function va(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nY(t){var e=function(n){tY(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,dy(va(va(i)),"cachedTheme",void 0),dy(va(va(i)),"lastOuterTheme",void 0),dy(va(va(i)),"lastTheme",void 0),dy(va(va(i)),"renderProvider",function(l){var u=i.props.children;return Ws.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?i0({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Ws.createElement(t.Consumer,null,this.renderProvider):null},r}(Ws.Component);return e}function rY(t){return function(n){var r=Ws.forwardRef(function(s,i){return Ws.createElement(t.Consumer,null,function(o){return Ws.createElement(n,i0({theme:o,ref:i},s))})});return XK(r,n),r}}function sY(t){var e=function(){var r=Ws.useContext(t);return r};return e}function iY(t){return{context:t,withTheme:rY(t),useTheme:sY(t),ThemeProvider:nY(t)}}var i8=F.createContext();iY(i8);var LT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oh=(typeof window>"u"?"undefined":LT(window))==="object"&&(typeof document>"u"?"undefined":LT(document))==="object"&&document.nodeType===9;function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}function oY(t,e){if(ug(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ug(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function aY(t){var e=oY(t,"string");return ug(e)=="symbol"?e:e+""}function cY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aY(r.key),r)}}function EA(t,e,n){return e&&cY(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mC(t,e){return mC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},mC(t,e)}function o8(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,mC(t,e)}function MT(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var lY={}.constructor;function yC(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(yC);if(t.constructor!==lY)return t;var e={};for(var n in t)e[n]=yC(t[n]);return e}function Av(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=yC(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var BT=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},Fl=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=BT(e[r]," ");else n=BT(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function Rh(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function af(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function dg(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=Rh(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=af(f+":"+u+Fl(p)+";",o))}}else for(var g in a){var y=a[g];y!=null&&(r&&(r+=l),r+=af(g+":"+u+Fl(y)+";",o))}for(var w in e){var b=e[w];b!=null&&w!=="fallbacks"&&(r&&(r+=l),r+=af(w+":"+u+Fl(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),af(""+t+u+"{"+r,o)+af("}",o))}var uY=/([[\].#*$><+~=|^:(),"'`\s])/g,FT=typeof CSS<"u"&&CSS.escape,CA=function(t){return FT?FT(t):t.replace(uY,"\\$1")},a8=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),wC=function(t){o8(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(MT(MT(o)),l),o.selectorText="."+CA(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=Fl(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Yt({},s,{allowEmpty:!0}):s;return dg(this.selectorText,this.style,a)},EA(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(a8),dY={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new wC(e,n,r)}},d1={indent:1,children:!0},hY=/@([\w-]+)/,fY=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(hY);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new Iv(Yt({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=d1);var s=Rh(r),i=s.linebreak;if(r.indent==null&&(r.indent=d1.indent),r.children==null&&(r.children=d1.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),pY=/@container|@media|@supports\s+/,gY={onCreateRule:function(e,n,r){return pY.test(e)?new fY(e,n,r):null}},h1={indent:1,children:!0},mY=/@keyframes\s+([\w-]+)/,vC=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(mY);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:CA(c(this,a)),this.rules=new Iv(Yt({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Yt({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=h1);var s=Rh(r),i=s.linebreak;if(r.indent==null&&(r.indent=h1.indent),r.children==null&&(r.children=h1.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),yY=/@keyframes\s+/,wY=/\$([\w-]+)/g,bC=function(e,n){return typeof e=="string"?e.replace(wY,function(r,s){return s in n?n[s]:r}):e},zT=function(e,n,r){var s=e[n],i=bC(s,r);i!==s&&(e[n]=i)},vY={onCreateRule:function(e,n,r){return typeof e=="string"&&yY.test(e)?new vC(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&zT(e,"animation-name",r.keyframes),"animation"in e&&zT(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return bC(e,s.keyframes);case"animation-name":return bC(e,s.keyframes);default:return e}}},bY=function(t){o8(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Yt({},s,{allowEmpty:!0}):s;return dg(this.key,this.style,a)},e}(a8),_Y={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new bY(e,n,r):null}},EY=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=Rh(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=dg(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return dg(this.at,this.style,r)},t}(),CY=/@font-face/,xY={onCreateRule:function(e,n,r){return CY.test(e)?new EY(e,n,r):null}},SY=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return dg(this.key,this.style,r)},t}(),AY={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new SY(e,n,r):null}},IY=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),TY={"@charset":!0,"@import":!0,"@namespace":!0},NY={onCreateRule:function(e,n,r){return e in TY?new IY(e,n,r):null}},qT=[dY,gY,vY,_Y,xY,AY,NY],PY={process:!0},WT={force:!0,process:!0},Iv=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Yt({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+CA(this.classes[p]));var g=Av(p,s,f);if(!g)return null;this.register(g);var y=f.index===void 0?this.index.length:f.index;return this.index.splice(y,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Yt({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof wC?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof vC&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof wC?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof vC&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=PY);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,WT)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,WT)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=Rh(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),c8=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Yt({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new Iv(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),kY=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),OY=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=X5(s,["attached"]),a=Rh(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},EA(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),np=new OY,_C=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),EC="2f1acc6c3a606b082e5eef5e54414ffb";_C[EC]==null&&(_C[EC]=0);var HT=_C[EC]++,VT=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+HT+a+n:c+i.key+"-"+HT+(a?"-"+a:"")+"-"+n};return r},l8=function(e){var n;return function(){return n||(n=e()),n}},RY=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},$Y=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=Fl(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},DY=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},jY=function(e,n){return e.selectorText=n,e.selectorText===n},u8=l8(function(){return document.querySelector("head")});function UY(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function LY(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function MY(t){for(var e=u8(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function BY(t){var e=np.registry;if(e.length>0){var n=UY(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=LY(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=MY(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function FY(t,e){var n=e.insertionPoint,r=BY(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}u8().appendChild(t)}var zY=l8(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),GT=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},KT=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},qY=function(){var e=document.createElement("style");return e.textContent=`
`,e},WY=function(){function t(n){this.getPropertyValue=RY,this.setProperty=$Y,this.removeProperty=DY,this.setSelector=jY,this.hasInsertedRules=!1,this.cssRules=[],n&&np.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||qY(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=zY();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){FY(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=KT(i,s);if(a=GT(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=KT(i,s),d=GT(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof c8&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),HY=0,VY=function(){function t(n){this.id=HY++,this.version="10.10.0",this.plugins=new kY,this.options={id:{minify:!1},createGenerateId:VT,Renderer:Oh?WY:null,plugins:[]},this.generateId=VT({minify:!1});for(var r=0;r<qT.length;r++)this.plugins.use(qT[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Yt({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=np.index===0?0:np.index+1);var a=new c8(r,Yt({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),np.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Yt({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=Av(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),d8=function(e){return new VY(e)},YT=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},EA(t,[{key:"size",get:function(){return this.length}}]),t}(),xA=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function h8(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=h8(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */d8();var f8=Date.now(),f1="fnValues"+f8,p1="fnStyle"+ ++f8,GY=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=Av(n,{},s);return i[p1]=r,i},onProcessStyle:function(n,r){if(f1 in r||p1 in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[f1]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[p1];a&&(o.style=a(n)||{});var c=o[f1];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function KY(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var cd;typeof self<"u"?cd=self:typeof window<"u"?cd=window:typeof global<"u"?cd=global:typeof module<"u"?cd=module:cd=Function("return this")();var QT=KY(cd),JT=function(e){return e&&e[QT]&&e===e[QT]()},YY=function(e){return{onCreateRule:function(r,s,i){if(!JT(s))return null;var o=s,a=Av(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!JT(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},QY=/;\n/,JY=function(e){for(var n={},r=e.split(QY),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},ZY=function(e){typeof e.style=="string"&&(e.style=JY(e.style))};function XY(){return{onProcessRule:ZY}}var Ic="@global",CC="@global ",eQ=function(){function t(n,r,s){this.type="global",this.at=Ic,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new Iv(Yt({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),tQ=function(){function t(n,r,s){this.type="global",this.at=Ic,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(CC.length);this.rule=s.jss.createRule(i,r,Yt({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),nQ=/\s*,\s*/g;function p8(t,e){for(var n=t.split(nQ),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function rQ(t,e){var n=t.options,r=t.style,s=r?r[Ic]:null;if(s){for(var i in s)e.addRule(i,s[i],Yt({},n,{selector:p8(i,t.selector)}));delete r[Ic]}}function sQ(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Ic.length)!==Ic)){var i=p8(s.substr(Ic.length),t.selector);e.addRule(i,r[s],Yt({},n,{selector:i})),delete r[s]}}function iQ(){function t(n,r,s){if(!n)return null;if(n===Ic)return new eQ(n,r,s);if(n[0]==="@"&&n.substr(0,CC.length)===CC)return new tQ(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(rQ(n,r),sQ(n,r))}return{onCreateRule:t,onProcessRule:e}}var lw=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},g1="extendCurrValue"+Date.now();function oQ(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Cl(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Yt({},t,{extend:l}):t.extend[c];Cl(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Cl(t.extend.extend,e,n,r);continue}if(lw(t.extend[d])){d in r||(r[d]={}),Cl(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function aQ(t,e,n,r){for(var s in t)if(s!=="extend"){if(lw(r[s])&&lw(t[s])){Cl(t[s],e,n,r[s]);continue}if(lw(t[s])){r[s]=Cl(t[s],e,n);continue}r[s]=t[s]}}function Cl(t,e,n,r){return r===void 0&&(r={}),oQ(t,e,n,r),aQ(t,e,n,r),r}function cQ(){function t(n,r,s){return"extend"in n?Cl(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[g1])s.prop(i,null);return s[g1]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[g1]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var ZT=/\s*,\s*/g,lQ=/&/g,uQ=/\$([\w-]+)/g;function dQ(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(ZT),a=s.split(ZT),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(lQ,u):u+" "+h}return c}function n(s,i,o){if(o)return Yt({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Yt({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(uQ,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Yt({},l,{selector:p})):c.addRule(g,s[d],Yt({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function xC(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=xC(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return xC(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function hQ(){function t(e,n){return"composes"in e&&(xC(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var fQ=/[A-Z]/g,pQ=/^ms-/,m1={};function gQ(t){return"-"+t.toLowerCase()}function g8(t){if(m1.hasOwnProperty(t))return m1[t];var e=t.replace(fQ,gQ);return m1[t]=pQ.test(e)?"-"+e:e}function o0(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:g8(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(o0):e.fallbacks=o0(t.fallbacks)),e}function mQ(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=o0(n[r]);return n}return o0(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=g8(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var J=xA&&CSS?CSS.px:"px",hy=xA&&CSS?CSS.ms:"ms",ju=xA&&CSS?CSS.percent:"%",yQ={"animation-delay":hy,"animation-duration":hy,"background-position":J,"background-position-x":J,"background-position-y":J,"background-size":J,border:J,"border-bottom":J,"border-bottom-left-radius":J,"border-bottom-right-radius":J,"border-bottom-width":J,"border-left":J,"border-left-width":J,"border-radius":J,"border-right":J,"border-right-width":J,"border-top":J,"border-top-left-radius":J,"border-top-right-radius":J,"border-top-width":J,"border-width":J,"border-block":J,"border-block-end":J,"border-block-end-width":J,"border-block-start":J,"border-block-start-width":J,"border-block-width":J,"border-inline":J,"border-inline-end":J,"border-inline-end-width":J,"border-inline-start":J,"border-inline-start-width":J,"border-inline-width":J,"border-start-start-radius":J,"border-start-end-radius":J,"border-end-start-radius":J,"border-end-end-radius":J,margin:J,"margin-bottom":J,"margin-left":J,"margin-right":J,"margin-top":J,"margin-block":J,"margin-block-end":J,"margin-block-start":J,"margin-inline":J,"margin-inline-end":J,"margin-inline-start":J,padding:J,"padding-bottom":J,"padding-left":J,"padding-right":J,"padding-top":J,"padding-block":J,"padding-block-end":J,"padding-block-start":J,"padding-inline":J,"padding-inline-end":J,"padding-inline-start":J,"mask-position-x":J,"mask-position-y":J,"mask-size":J,height:J,width:J,"min-height":J,"max-height":J,"min-width":J,"max-width":J,bottom:J,left:J,top:J,right:J,inset:J,"inset-block":J,"inset-block-end":J,"inset-block-start":J,"inset-inline":J,"inset-inline-end":J,"inset-inline-start":J,"box-shadow":J,"text-shadow":J,"column-gap":J,"column-rule":J,"column-rule-width":J,"column-width":J,"font-size":J,"font-size-delta":J,"letter-spacing":J,"text-decoration-thickness":J,"text-indent":J,"text-stroke":J,"text-stroke-width":J,"word-spacing":J,motion:J,"motion-offset":J,outline:J,"outline-offset":J,"outline-width":J,perspective:J,"perspective-origin-x":ju,"perspective-origin-y":ju,"transform-origin":ju,"transform-origin-x":ju,"transform-origin-y":ju,"transform-origin-z":ju,"transition-delay":hy,"transition-duration":hy,"vertical-align":J,"flex-basis":J,"shape-margin":J,size:J,gap:J,grid:J,"grid-gap":J,"row-gap":J,"grid-row-gap":J,"grid-column-gap":J,"grid-template-rows":J,"grid-template-columns":J,"grid-auto-rows":J,"grid-auto-columns":J,"box-shadow-x":J,"box-shadow-y":J,"box-shadow-blur":J,"box-shadow-spread":J,"font-line-height":J,"text-shadow-x":J,"text-shadow-y":J,"text-shadow-blur":J};function m8(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var wQ=m8(yQ);function rp(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=rp(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=rp(s,e[s],n);else for(var i in e)e[i]=rp(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||wQ[t];return o&&!(e===0&&o===J)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function vQ(t){t===void 0&&(t={});var e=m8(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=rp(o,s[o],e);return s}function r(s,i){return rp(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var bQ={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},_Q={position:!0,size:!0},fy={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},y1={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function EQ(t,e,n){return t.map(function(r){return w8(r,e,n,!1,!0)})}function y8(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?y8(t[0],e,n,r):typeof t[0]=="object"?EQ(t,e,r):[t]}function w8(t,e,n,r,s){if(!(fy[e]||y1[e]))return[];var i=[];if(y1[e]&&(t=CQ(t,n,y1[e],r)),Object.keys(t).length)for(var o in fy[e]){if(t[o]){Array.isArray(t[o])?i.push(_Q[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}fy[e][o]!=null&&i.push(fy[e][o])}return!i.length||s?i:[i]}function CQ(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=hg((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function hg(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=hg(t.fallbacks[i],e,!0);continue}t[r]=y8(s,r,bQ,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=hg(t.fallbacks,e,!0);continue}t[r]=w8(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function xQ(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=hg(e[r],n);return e}return hg(e,n)}return{onProcessStyle:t}}function SC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function SQ(t){if(Array.isArray(t))return SC(t)}function AQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function IQ(t,e){if(t){if(typeof t=="string")return SC(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SC(t,e):void 0}}function TQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NQ(t){return SQ(t)||AQ(t)||IQ(t)||TQ()}var $f="",AC="",v8="",b8="",PQ=Oh&&"ontouchstart"in document.documentElement;if(Oh){var w1={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},kQ=document.createElement("p"),v1=kQ.style,OQ="Transform";for(var b1 in w1)if(b1+OQ in v1){$f=b1,AC=w1[b1];break}$f==="Webkit"&&"msHyphens"in v1&&($f="ms",AC=w1.ms,b8="edge"),$f==="Webkit"&&"-apple-trailing-word"in v1&&(v8="apple")}var We={js:$f,css:AC,vendor:v8,browser:b8,isTouch:PQ};function RQ(t){return t[1]==="-"||We.js==="ms"?t:"@"+We.css+"keyframes"+t.substr(10)}var $Q={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:We.js==="ms"?"-webkit-"+e:We.css+e}},DQ={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:We.js==="Webkit"?We.css+"print-"+e:e}},jQ=/[-\s]+(.)?/g;function UQ(t,e){return e?e.toUpperCase():""}function SA(t){return t.replace(jQ,UQ)}function Mc(t){return SA("-"+t)}var LQ={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(We.js==="Webkit"){var r="mask-image";if(SA(r)in n)return e;if(We.js+Mc(r)in n)return We.css+e}return e}},MQ={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:We.vendor==="apple"&&!We.isTouch?We.css+e:e}},BQ={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:We.css+e}},FQ={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:We.css+e}},zQ={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:We.js==="Webkit"||We.js==="ms"&&We.browser!=="edge"?We.css+e:e}},qQ={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:We.js==="Moz"||We.js==="ms"||We.vendor==="apple"?We.css+e:e}},WQ={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(We.js==="Webkit"){var r="WebkitColumn"+Mc(e);return r in n?We.css+"column-"+e:!1}if(We.js==="Moz"){var s="page"+Mc(e);return s in n?"page-"+e:!1}return!1}},HQ={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(We.js==="Moz")return e;var r=e.replace("-inline","");return We.js+Mc(r)in n?We.css+r:!1}},VQ={supportedProperty:function(e,n){return SA(e)in n?e:!1}},GQ={supportedProperty:function(e,n){var r=Mc(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:We.js+r in n?We.css+e:We.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},KQ={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:We.js==="ms"?""+We.css+e:e}},YQ={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:We.js==="ms"?We.css+"scroll-chaining":e}},QQ={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},JQ={supportedProperty:function(e,n){var r=QQ[e];return r&&We.js+Mc(r)in n?We.css+r:!1}},_8={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},ZQ=Object.keys(_8),XQ=function(e){return We.css+e},eJ={supportedProperty:function(e,n,r){var s=r.multiple;if(ZQ.indexOf(e)>-1){var i=_8[e];if(!Array.isArray(i))return We.js+Mc(i)in n?We.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(We.js+Mc(i[0])in n))return!1;return i.map(XQ)}return!1}},E8=[$Q,DQ,LQ,MQ,BQ,FQ,zQ,qQ,WQ,HQ,VQ,GQ,KQ,YQ,JQ,eJ],XT=E8.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),tJ=E8.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,NQ(e.noPrefill)),t},[]),Df,fl={};if(Oh){Df=document.createElement("p");var _1=window.getComputedStyle(document.documentElement,"");for(var E1 in _1)isNaN(E1)||(fl[_1[E1]]=_1[E1]);tJ.forEach(function(t){return delete fl[t]})}function IC(t,e){if(e===void 0&&(e={}),!Df)return t;if(fl[t]!=null)return fl[t];(t==="transition"||t==="transform")&&(e[t]=t in Df.style);for(var n=0;n<XT.length&&(fl[t]=XT[n](t,Df.style,e),!fl[t]);n++);try{Df.style[t]=""}catch{return!1}return fl[t]}var Uu={},nJ={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},rJ=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,$a;function sJ(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?IC(e):", "+IC(n);return r||e||n}Oh&&($a=document.createElement("p"));function eN(t,e){var n=e;if(!$a||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Uu[r]!=null)return Uu[r];try{$a.style[t]=n}catch{return Uu[r]=!1,!1}if(nJ[t])n=n.replace(rJ,sJ);else if($a.style[t]===""&&(n=We.css+n,n==="-ms-flex"&&($a.style[t]="-ms-flexbox"),$a.style[t]=n,$a.style[t]===""))return Uu[r]=!1,!1;return $a.style[t]="",Uu[r]=n,Uu[r]}function iJ(){function t(s){if(s.type==="keyframes"){var i=s;i.at=RQ(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=IC(i);c&&c!==i&&(a=!0);var l=!1,u=eN(c,Fl(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return eN(i,Fl(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function oJ(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var aJ=function(e){return e===void 0&&(e={}),{plugins:[GY(),YY(e.observable),XY(),iQ(),cQ(),dQ(),hQ(),mQ(),vQ(e.defaultUnit),xQ(),iJ(),oJ()]}},cJ=Number.MIN_SAFE_INTEGER||-1e9,lJ=function(){return cJ++},uJ=F.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Oh}),tN=new Map,AA=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new YT),r[n];var s=tN.get(n);return s||(s=new YT,tN.set(n,s)),s},nN=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=AA(r,s);o.manage(i),r.registry&&r.registry.add(n)}},dJ=function(e){if(e.sheet){var n=AA(e.context,e.index);n.unmanage(e.theme)}},hJ=d8(aJ()),C8=new WeakMap,x8=function(e){return C8.get(e)},fJ=function(e,n){C8.set(e,n)},pJ=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function gJ(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Yt({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var mJ=function(e){if(!e.context.disableStylesGeneration){var n=AA(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||hJ,i=pJ(e),o=h8(i),a=s.createStyleSheet(i,gJ(e,o!==null));return fJ(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},yJ=function(e,n){for(var r in n)e.deleteRule(n[r])},wJ=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},vJ=function(e,n){var r=x8(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},bJ=function(e,n){if(!n)return e.classes;var r=x8(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function rN(t){return t?F.useEffect:Ws.useInsertionEffect||F.useLayoutEffect}var C1={},Oi=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?lJ():s,o=r.theming,a=r.name,c=X5(r,["index","theming","name"]),l=o&&o.context||i8,u=function(f){return typeof e=="function"&&(f||F.useContext(l))||C1},d={};return function(f){var p=F.useRef(!0),g=F.useContext(uJ),y=u(f&&f.theme),w=F.useMemo(function(){var _=mJ({context:g,styles:e,name:a,theme:y,index:i,sheetOptions:c});return _&&g.isSSR&&nN({index:i,context:g,sheet:_,theme:y}),[_,_?vJ(_,f):null]},[g,y]),b=w[0],v=w[1];rN(g.isSSR)(function(){b&&v&&!p.current&&wJ(f,b,v)},[f]),rN(g.isSSR)(function(){return b&&nN({index:i,context:g,sheet:b,theme:y}),function(){b&&(dJ({index:i,context:g,sheet:b,theme:y}),v&&yJ(b,v))}},[b]);var E=F.useMemo(function(){return b&&v?bJ(b,v):d},[b,v]);return F.useDebugValue(E),F.useDebugValue(y===C1?"No theme":y),F.useEffect(function(){p.current=!1}),E}};const _J=Oi({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function x1({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=_J(),d=F.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(om,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const EJ=Oi({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function Ds({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=EJ({isOpen:e}),u=F.useRef(null),d=()=>{r&&r(t)};return m.jsx(om,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const S1=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],CJ=80,xJ=80,SJ=10,AJ=10,IJ=10,TJ=10,NJ=({onIconClick:t})=>{const e=S1.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:IJ+d*(CJ+SJ),y:TJ+u*(xJ+AJ)},u++,u>=4&&(u=0,d++)}),l},[r,s]=F.useState(n()),[i,o]=F.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(x1,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(Ds,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:S1.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(x1,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(Ds,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:S1.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(x1,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},PJ=Oi({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),kJ=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=F.useState(!1),[o,a]=F.useState(new Date),c=PJ({isOpen:s});F.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://dexscreener.com/solana/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Dexscreener"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function S8(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function IA(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function A8(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function TA(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function I8(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function T8(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function OJ(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const RJ=Oi({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),$J=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=RJ({isOpen:t}),i=F.useRef(null),[o,a]=F.useState([]),[c,l]=F.useState(!1),[u,d]=F.useState(!1),[h,f]=F.useState({}),[p,g]=F.useState(null),{data:y}=E5();F.useEffect(()=>{t&&r&&w()},[t,r]);const w=async()=>{l(!0),g(null);try{const x=await S8(r);a(x);const S={};x.forEach(T=>{S[T.id]=0}),f(S)}catch(x){g(x.message)}finally{l(!1)}},b=(x,S)=>{f(T=>({...T,[x]:Math.max(0,S)}))},v=async()=>{const x=Object.entries(h).filter(([,S])=>S>0).map(([S,T])=>({id:S,quantity:T}));if(x.length===0){g("Please select at least one item to mint");return}if(!y){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const S=await A8(r,x);if(console.log("Mint API result:",S),S.success&&S.mintTransaction){console.log("Got mint transaction:",S.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const T=await y.sendTransaction({to:S.mintTransaction.to,value:BigInt(S.mintTransaction.value),data:S.mintTransaction.data});console.log("Transaction sent successfully:",T),alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){console.error("Transaction sending failed:",T),g("Transaction failed: "+T.message)}}else throw new Error(S.message||"Could not retrieve minting transaction.")}catch(S){console.error("Minting failed:",S),g("Minting failed: "+S.message)}finally{d(!1)}},E=(x,S)=>`${parseFloat(x)} ${S}`,_=()=>{n&&n()};return t?m.jsx(om,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:_,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(x=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:x.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",E(x.token_price,x.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",x.wallet_limit===4294967295?"Unlimited":x.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:x.wallet_limit===4294967295?999:x.wallet_limit,value:h[x.id]||0,onChange:S=>b(x.id,parseInt(S.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},x.id))]}),m.jsx("button",{onClick:v,disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},DJ=Oi({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),jJ=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},UJ=({nft:t,onClose:e})=>{const n=DJ(),r=F.useRef(null),s=jJ(t.attributes);return m.jsx(om,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},LJ=Symbol(),sN=Object.getPrototypeOf,TC=new WeakMap,MJ=t=>t&&(TC.has(t)?TC.get(t):sN(t)===Object.prototype||sN(t)===Array.prototype),BJ=t=>MJ(t)&&t[LJ]||null,iN=(t,e=!0)=>{TC.set(t,e)},a0={},A1=t=>typeof t=="object"&&t!==null,Ba=new WeakMap,jf=new WeakSet,FJ=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>A1(l)&&!jf.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return iN(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(l,p),w={value:g,enumerable:y,configurable:!0};if(jf.has(g))iN(g,!1);else if(g instanceof Promise)delete w.value,w.get=()=>d(g);else if(Ba.has(g)){const[b,v]=Ba.get(g);w.value=i(b,v(),d)}Object.defineProperty(f,p,w)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!A1(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(C,O=++a[0])=>{d!==O&&(d=O,h.forEach(R=>R(C,O)))};let p=a[1];const g=(C=++a[1])=>(p!==C&&!h.size&&(p=C,w.forEach(([O])=>{const R=O[1](C);R>d&&(d=R)})),d),y=C=>(O,R)=>{const B=[...O];B[1]=[C,...B[1]],f(B,R)},w=new Map,b=(C,O)=>{if((a0?"production":void 0)!=="production"&&w.has(C))throw new Error("prop listener already exists");if(h.size){const R=O[3](y(C));w.set(C,[O,R])}else w.set(C,[O])},v=C=>{var O;const R=w.get(C);R&&(w.delete(C),(O=R[1])==null||O.call(R))},E=C=>(h.add(C),h.size===1&&w.forEach(([R,B],H)=>{if((a0?"production":void 0)!=="production"&&B)throw new Error("remove already exists");const z=R[3](y(H));w.set(H,[R,z])}),()=>{h.delete(C),h.size===0&&w.forEach(([R,B],H)=>{B&&(B(),w.set(H,[R]))})}),_=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),S=e(_,{deleteProperty(C,O){const R=Reflect.get(C,O);v(O);const B=Reflect.deleteProperty(C,O);return B&&f(["delete",[O],R]),B},set(C,O,R,B){const H=Reflect.has(C,O),z=Reflect.get(C,O,B);if(H&&(t(z,R)||o.has(R)&&t(z,o.get(R))))return!0;v(O),A1(R)&&(R=BJ(R)||R);let A=R;if(R instanceof Promise)R.then(I=>{R.status="fulfilled",R.value=I,f(["resolve",[O],I])}).catch(I=>{R.status="rejected",R.reason=I,f(["reject",[O],I])});else{!Ba.has(R)&&n(R)&&(A=c(R));const I=!jf.has(A)&&Ba.get(A);I&&b(O,I)}return Reflect.set(C,O,A,B),f(["set",[O],R,z]),!0}});o.set(l,S);const T=[_,g,i,E];return Ba.set(S,T),Reflect.ownKeys(l).forEach(C=>{const O=Object.getOwnPropertyDescriptor(l,C);"value"in O&&(S[C]=l[C],delete O.value,delete O.writable),Object.defineProperty(_,C,O)}),S})=>[c,Ba,jf,t,e,n,r,s,i,o,a],[zJ]=FJ();function jt(t={}){return zJ(t)}function Kn(t,e,n){const r=Ba.get(t);(a0?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function fg(t,e){const n=Ba.get(t);(a0?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function ru(t){return jf.add(t),t}function Yn(t,e,n,r){let s=t[e];return Kn(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function qJ(t){const e=jt({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var oN={};const X={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof oN<"u"?oN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},pg={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=X.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var WJ=20,HJ=1,su=1e6,aN=1e6,VJ=-7,GJ=21,KJ=!1,am="[big.js] ",vu=am+"Invalid ",Tv=vu+"decimal places",YJ=vu+"rounding mode",N8=am+"Division by zero",Ct={},so=void 0,QJ=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function P8(){function t(e){var n=this;if(!(n instanceof t))return e===so?P8():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(vu+"value");e=e===0&&1/e<0?"-0":String(e)}JJ(n,e)}n.constructor=t}return t.prototype=Ct,t.DP=WJ,t.RM=HJ,t.NE=VJ,t.PE=GJ,t.strict=KJ,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function JJ(t,e){var n,r,s;if(!QJ.test(e))throw Error(vu+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function bu(t,e,n,r){var s=t.c;if(n===so&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(YJ);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==so))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==so||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function _u(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Ct.abs=function(){var t=new this.constructor(this);return t.s=1,t};Ct.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Ct.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>su)throw Error(Tv);if(!s[0])throw Error(N8);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),y=g.length,w=t,b=w.c=[],v=0,E=o+(w.e=e.e-t.e)+1;for(w.s=i,i=E<0?0:E,h.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:h;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[y]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==so)&&i--);return!b[0]&&v!=1&&(b.shift(),w.e--,E--),v>E&&bu(w,E,n.RM,g[0]!==so),w};Ct.eq=function(t){return this.cmp(t)===0};Ct.gt=function(t){return this.cmp(t)>0};Ct.gte=function(t){return this.cmp(t)>-1};Ct.lt=function(t){return this.cmp(t)<0};Ct.lte=function(t){return this.cmp(t)<1};Ct.minus=Ct.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Ct.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(N8);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Ct.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Ct.plus=Ct.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Ct.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-aN||t>aN)throw Error(vu+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Ct.prec=function(t,e){if(t!==~~t||t<1||t>su)throw Error(vu+"precision");return bu(new this.constructor(this),t,e)};Ct.round=function(t,e){if(t===so)t=0;else if(t!==~~t||t<-su||t>su)throw Error(Tv);return bu(new this.constructor(this),t+this.e+1,e)};Ct.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(am+"No square root");i=Math.sqrt(+_u(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return bu(t,(s.DP-=4)+t.e+1,s.RM)};Ct.times=Ct.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Ct.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==so){if(t!==~~t||t<0||t>su)throw Error(Tv);for(n=bu(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return _u(n,!0,!!r)};Ct.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==so){if(t!==~~t||t<0||t>su)throw Error(Tv);for(n=bu(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return _u(n,!1,!!r)};Ct[Symbol.for("nodejs.util.inspect.custom")]=Ct.toJSON=Ct.toString=function(){var t=this,e=t.constructor;return _u(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Ct.toNumber=function(){var t=+_u(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(am+"Imprecise conversion");return t};Ct.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==so){if(t!==~~t||t<1||t>su)throw Error(vu+"precision");for(n=bu(new r(n),t,e);n.c.length<t;)n.c.push(0)}return _u(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Ct.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(am+"valueOf disallowed");return _u(t,t.e<=e.NE||t.e>=e.PE,!0)};var cf=P8();const ZJ={bigNumber(t){return t?new cf(t):new cf(0)},multiply(t,e){if(t===void 0||e===void 0)return new cf(0);const n=new cf(t),r=new cf(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},XJ=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],eZ=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],tZ=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],nZ={getERC20Abi:t=>X.USDT_CONTRACT_ADDRESSES.includes(t)?tZ:XJ,getSwapAbi:()=>eZ},hs={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Le={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function I1(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const De={setItem(t,e){Uf()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Uf())return localStorage.getItem(t)||void 0},removeItem(t){Uf()&&localStorage.removeItem(t)},clear(){Uf()&&localStorage.clear()}};function Uf(){return typeof window<"u"&&typeof localStorage<"u"}function qo(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var cN={};const T1=(typeof process<"u"&&typeof cN<"u"?cN.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",k8=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]},{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]}],rZ="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",bt={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:T1,SECURE_SITE_DASHBOARD:`${T1}/dashboard`,SECURE_SITE_FAVICON:`${T1}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld","coinbase"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},he={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=he.getActiveNamespace(),e=he.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{De.setItem(Le.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=De.getItem(Le.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{De.removeItem(Le.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{De.setItem(Le.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{De.setItem(Le.ACTIVE_CAIP_NETWORK_ID,t),he.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return De.getItem(Le.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{De.removeItem(Le.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=I1(t);De.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=he.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),De.setItem(Le.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=De.getItem(Le.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=I1(t);De.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return De.getItem(Le.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=I1(t);return De.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{De.setItem(Le.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return De.getItem(Le.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{De.removeItem(Le.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return De.getItem(Le.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=De.getItem(Le.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{De.setItem(Le.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return De.getItem(Le.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=De.getItem(Le.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));De.setItem(Le.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=he.getConnectedNamespaces();e.includes(t)||(e.push(t),he.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=he.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),he.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return De.getItem(Le.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{De.setItem(Le.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{De.removeItem(Le.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=De.getItem(Le.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=he.getBalanceCache();De.setItem(Le.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=he.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;he.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=he.getBalanceCache();e[t.caipAddress]=t,De.setItem(Le.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=De.getItem(Le.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=he.getBalanceCache();De.setItem(Le.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=he.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),he.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=he.getNativeBalanceCache();e[t.caipAddress]=t,De.setItem(Le.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=De.getItem(Le.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=he.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;he.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=he.getEnsCache();e[t.address]=t,De.setItem(Le.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=he.getEnsCache();De.setItem(Le.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=De.getItem(Le.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=he.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;he.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=he.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},De.setItem(Le.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=he.getIdentityCache();De.setItem(Le.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{De.removeItem(Le.PORTFOLIO_CACHE),De.removeItem(Le.NATIVE_BALANCE_CACHE),De.removeItem(Le.ENS_CACHE),De.removeItem(Le.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{De.setItem(Le.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=De.getItem(Le.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=he.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===X.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};De.setItem(Le.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=De.getItem(Le.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=he.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),De.setItem(Le.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=De.getItem(Le.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=he.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),De.setItem(Le.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=he.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),De.setItem(Le.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(he.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},Se={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Se.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=bt.TEN_SEC_MS:!0},isAllowedRetry(t,e=bt.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Se.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+bt.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Se.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Se.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?he.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Se.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return X.W3M_API_URL},getBlockchainApiUrl(){return X.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return X.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?bt.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in X.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function lf(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class cm{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await lf(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await lf(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await lf(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await lf(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await lf(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const sZ={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?bt.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Se.isTelegram()){if(Se.isIos())return t.filter(e=>e!=="google");if(Se.isMac())return t.filter(e=>e!=="x");if(Se.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ke=jt({features:bt.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:bt.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),se={state:ke,subscribeKey(t,e){return Yn(ke,t,e)},setOptions(t){Object.assign(ke,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...ke.remoteFeatures,...t};ke.remoteFeatures=e,(n=ke.remoteFeatures)!=null&&n.socials&&(ke.remoteFeatures.socials=sZ.filterSocialsByPlatform(ke.remoteFeatures.socials))},setFeatures(t){if(!t)return;ke.features||(ke.features=bt.DEFAULT_FEATURES);const e={...ke.features,...t};ke.features=e},setProjectId(t){ke.projectId=t},setCustomRpcUrls(t){ke.customRpcUrls=t},setAllWallets(t){ke.allWallets=t},setIncludeWalletIds(t){ke.includeWalletIds=t},setExcludeWalletIds(t){ke.excludeWalletIds=t},setFeaturedWalletIds(t){ke.featuredWalletIds=t},setTokens(t){ke.tokens=t},setTermsConditionsUrl(t){ke.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ke.privacyPolicyUrl=t},setCustomWallets(t){ke.customWallets=t},setIsSiweEnabled(t){ke.isSiweEnabled=t},setIsUniversalProvider(t){ke.isUniversalProvider=t},setSdkVersion(t){ke.sdkVersion=t},setMetadata(t){ke.metadata=t},setDisableAppend(t){ke.disableAppend=t},setEIP6963Enabled(t){ke.enableEIP6963=t},setDebug(t){ke.debug=t},setEnableWalletConnect(t){ke.enableWalletConnect=t},setEnableWalletGuide(t){ke.enableWalletGuide=t},setEnableAuthLogger(t){ke.enableAuthLogger=t},setEnableWallets(t){ke.enableWallets=t},setPreferUniversalLinks(t){ke.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){ke.hasMultipleAddresses=t},setSIWX(t){ke.siwx=t},setConnectMethodsOrder(t){ke.features={...ke.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ke.features={...ke.features,walletFeaturesOrder:t}},setSocialsOrder(t){ke.remoteFeatures={...ke.remoteFeatures,socials:t}},setCollapseWallets(t){ke.features={...ke.features,collapseWallets:t}},setEnableEmbedded(t){ke.enableEmbedded=t},setAllowUnsupportedChain(t){ke.allowUnsupportedChain=t},setManualWCControl(t){ke.manualWCControl=t},setEnableNetworkSwitch(t){ke.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ke.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ke.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ke.universalProviderConfigOverride},getSnapshot(){return fg(ke)}},iZ=Object.freeze({enabled:!0,events:[]}),oZ=new cm({baseUrl:Se.getAnalyticsUrl(),clientId:null}),aZ=5,cZ=60*1e3,ba=jt({...iZ}),lZ={state:ba,subscribeKey(t,e){return Yn(ba,t,e)},async sendError(t,e){if(!ba.enabled)return;const n=Date.now();if(ba.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<cZ}).length>=aZ)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};ba.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=se.state;await oZ.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Se.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){ba.enabled=!0},disable(){ba.enabled=!1},clearEvents(){ba.events=[]}};class ph extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,ph.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,ph):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function lN(t,e){const n=t instanceof ph?t:new ph(t instanceof Error?t.message:String(t),e,t);throw lZ.sendError(n,n.category),n}function As(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return lN(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return lN(a,e)}},n[r]=i}else n[r]=s}),n}const Ji={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},uZ={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Ji.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Ji.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Ji.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Ji.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===X.CHAIN.SOLANA&&t===Ji.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Ji.COINBASE.url}/dapp?cb_url=${r}`)}},os=jt({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),dZ={state:os,subscribeNetworkImages(t){return Kn(os.networkImages,()=>t(os.networkImages))},subscribeKey(t,e){return Yn(os,t,e)},subscribe(t){return Kn(os,()=>t(os))},setWalletImage(t,e){os.walletImages[t]=e},setNetworkImage(t,e){os.networkImages[t]=e},setChainImage(t,e){os.chainImages[t]=e},setConnectorImage(t,e){os.connectorImages={...os.connectorImages,[t]:e}},setTokenImage(t,e){os.tokenImages[t]=e},setCurrencyImage(t,e){os.currencyImages[t]=e}},wi=As(dZ),hZ={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},N1=jt({networkImagePromises:{}}),O8={async fetchWalletImage(t){if(t)return await Te._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(N1.networkImagePromises[t]||(N1.networkImagePromises[t]=Te._fetchNetworkImage(t)),await N1.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return wi.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return wi.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return wi.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return wi.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return wi.state.connectorImages[t.imageId]},getChainImage(t){return wi.state.networkImages[hZ[t]]}},_a=jt({message:"",variant:"info",open:!1}),fZ={state:_a,subscribeKey(t,e){return Yn(_a,t,e)},open(t,e){const{debug:n}=se.state,{shortMessage:r,longMessage:s}=t;n&&(_a.message=r,_a.variant=e,_a.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){_a.open=!1,_a.message="",_a.variant="info"}},un=As(fZ),pZ=Se.getAnalyticsUrl(),gZ=new cm({baseUrl:pZ,clientId:null}),mZ=["MODAL_CREATED"],bo=jt({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),_t={state:bo,subscribe(t){return Kn(bo,()=>t(bo))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=se.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=de.state.address;if(mZ.includes(t.data.event)||typeof window>"u")return;await gZ.post({path:"/e",params:_t.getSdkProperties(),body:{eventId:Se.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),bo.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===X.HTTP_STATUS_CODES.FORBIDDEN&&!bo.reportedErrors.FORBIDDEN&&(un.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Uf()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),bo.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;bo.timestamp=Date.now(),bo.data=t,(e=se.state.features)!=null&&e.analytics&&_t._sendAnalyticsEvent(bo)}},yZ=Se.getApiUrl(),kr=new cm({baseUrl:yZ,clientId:null}),wZ=40,uN=4,vZ=20,Fe=jt({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Te={state:Fe,subscribeKey(t,e){return Yn(Fe,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=se.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return se.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${kr.baseUrl}/getWalletImage/${t}`,n=await kr.getBlob({path:e,params:Te._getSdkProperties()});wi.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${kr.baseUrl}/public/getAssetImage/${t}`,n=await kr.getBlob({path:e,params:Te._getSdkProperties()});wi.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${kr.baseUrl}/public/getAssetImage/${t}`,n=await kr.getBlob({path:e,params:Te._getSdkProperties()});wi.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${kr.baseUrl}/public/getCurrencyImage/${t}`,n=await kr.getBlob({path:e,params:Te._getSdkProperties()});wi.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${kr.baseUrl}/public/getTokenImage/${t}`,n=await kr.getBlob({path:e,params:Te._getSdkProperties()});wi.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Se.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Ji.COINBASE.id?!0:D.state.activeChain==="solana"&&(n.id===Ji.SOLFLARE.id||n.id===Ji.PHANTOM.id)):t},async fetchProjectConfig(){return(await kr.get({path:"/appkit/v1/config",params:Te._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await kr.get({path:"/projects/v1/origins",params:Te._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===X.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=X.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=D.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!O8.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Te._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=fe.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Te._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Te._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Te._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Te._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Ji).map(o=>o.id));const r=await kr.get({path:"/getWallets",params:{...Te._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Te._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=se.state;if(t!=null&&t.length){const e={...Te._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??uN,include:t},{data:n}=await Te.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Te._fetchWalletImage(i))),Fe.featured=r,Fe.allFeatured=r}},async fetchRecommendedWallets(){try{Fe.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=se.state,r=[...e??[],...n??[]].filter(Boolean),s=D.getRequestedCaipNetworkIds().join(","),i={page:1,entries:uN,include:t,exclude:r,chains:s},{data:o,count:a}=await Te.fetchWallets(i),c=he.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Te._fetchWalletImage(d))),Fe.recommended=o,Fe.allRecommended=o,Fe.count=a??0}catch{}finally{Fe.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=se.state,s=D.getRequestedCaipNetworkIds().join(","),i=[...Fe.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:wZ,include:e,exclude:i,chains:s},{data:a,count:c}=await Te.fetchWallets(o),l=a.slice(0,vZ).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Te._fetchWalletImage(u))),Fe.wallets=Se.uniqueBy([...Fe.wallets,...Te._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Fe.count=c>Fe.count?c:Fe.count,Fe.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Te.fetchWallets(e);n&&n.forEach(r=>{Fe.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=se.state,s=D.getRequestedCaipNetworkIds().join(",");Fe.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Te.fetchWallets(i);_t.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Te._fetchWalletImage(c)),Se.wait(300)]),Fe.search=Te._filterOutExtensions(o)},initPromise(t,e){const n=Fe.promises[t];return n||(Fe.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Te.initPromise("connectorImages",Te.fetchConnectorImages),e&&Te.initPromise("featuredWallets",Te.fetchFeaturedWallets),n&&Te.initPromise("recommendedWallets",Te.fetchRecommendedWallets),r&&Te.initPromise("networkImages",Te.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=se.state.features)!=null&&t.analytics&&Te.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await kr.get({path:"/getAnalyticsConfig",params:Te._getSdkProperties()});se.setFeatures({analytics:t})}catch{se.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Fe.featured=Fe.allFeatured,Fe.recommended=Fe.allRecommended;return}const e=D.getRequestedCaipNetworkIds().join(",");Fe.featured=Fe.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Fe.recommended=Fe.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Fe.filteredWallets=Fe.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Fe.filteredWallets=[]},setFilterByNamespace(t){if(!t){Fe.featured=Fe.allFeatured,Fe.recommended=Fe.allRecommended;return}const e=D.getRequestedCaipNetworkIds().join(",");Fe.featured=Fe.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Fe.recommended=Fe.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Fe.filteredWallets=Fe.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},At=jt({view:"Connect",history:["Connect"],transactionStack:[]}),bZ={state:At,subscribeKey(t,e){return Yn(At,t,e)},pushTransactionStack(t){At.transactionStack.push(t)},popTransactionStack(t){const e=At.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Re.goBack();break;case"cancel":s==null||s(),Re.goBack();break}},push(t,e){t!==At.view&&(At.view=t,At.history.push(t),At.data=e)},reset(t,e){At.view=t,At.history=[t],At.data=e},replace(t,e){At.history.at(-1)===t||(At.view=t,At.history[At.history.length-1]=t,At.data=e)},goBack(){var r;const t=D.state.activeCaipAddress,e=Re.state.view==="ConnectingFarcaster",n=!t&&e;if(At.history.length>1){At.history.pop();const[s]=At.history.slice(-1);s&&(t&&s==="Connect"?At.view="Account":At.view=s)}else gt.close();(r=At.data)!=null&&r.wallet&&(At.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){de.setFarcasterUrl(void 0,D.state.activeChain);const a=fe.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=fg(se.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(At.history.length>1){At.history=At.history.slice(0,t+1);const[e]=At.history.slice(-1);e&&(At.view=e)}},goBackOrCloseModal(){Re.state.history.length>1?Re.goBack():gt.close()}},Re=As(bZ),_o=jt({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),NC={state:_o,subscribe(t){return Kn(_o,()=>t(_o))},setThemeMode(t){_o.themeMode=t;try{const e=fe.getAuthConnector();if(e){const n=NC.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:qo(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){_o.themeVariables={..._o.themeVariables,...t};try{const e=fe.getAuthConnector();if(e){const n=NC.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:qo(_o.themeVariables,_o.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return fg(_o)}},Wr=As(NC),R8={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},at=jt({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...R8},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),_Z={state:at,subscribe(t){return Kn(at,()=>{t(at)})},subscribeKey(t,e){return Yn(at,t,e)},initialize(t){t.forEach(e=>{const n=he.getConnectedConnectorId(e);n&&fe.setConnectorId(n,e)})},setActiveConnector(t){t&&(at.activeConnector=ru(t))},setConnectors(t){t.filter(s=>!at.allConnectors.some(i=>i.id===s.id&&fe.getConnectorName(i.name)===fe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&at.allConnectors.push(ru(s))});const n=fe.getEnabledNamespaces(),r=fe.getEnabledConnectors(n);at.connectors=fe.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(at.filterByNamespaceMap).forEach(e=>{at.filterByNamespaceMap[e]=!1}),t.forEach(e=>{at.filterByNamespaceMap[e]=!0}),fe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){at.filterByNamespaceMap[t]=e,fe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=fe.getEnabledNamespaces(),e=fe.getEnabledConnectors(t),n=fe.areAllNamespacesEnabled();at.connectors=fe.mergeMultiChainConnectors(e),n?Te.clearFilterByNamespaces():Te.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(at.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return at.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(at.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=fe.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===X.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=fe.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===X.CONNECTOR_ID.AUTH){const s=t,i=fg(se.state),o=Wr.getSnapshot().themeMode,a=Wr.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:qo(a,o)}),fe.setConnectors([t])}else fe.setConnectors([t])},getAuthConnector(t){var r;const e=t||D.state.activeChain,n=at.connectors.find(s=>s.id===X.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return at.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return at.allConnectors.find(e=>e.id===t)},getConnector(t,e){return at.allConnectors.filter(r=>r.chain===D.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=fg(se.state),r=Wr.getSnapshot().themeMode,s=Wr.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:qo(s,r)})},getConnectorsByNamespace(t){const e=at.allConnectors.filter(n=>n.chain===t);return fe.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=fe.getConnector(t.id,t.rdns),n=D.state.activeChain;uZ.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Re.push("ConnectingExternal",{connector:e}):Re.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?fe.getConnectorsByNamespace(t):fe.mergeMultiChainConnectors(at.allConnectors)},setFilterByNamespace(t){at.filterByNamespace=t,at.connectors=fe.getConnectors(t),Te.setFilterByNamespace(t)},setConnectorId(t,e){t&&(at.activeConnectorIds={...at.activeConnectorIds,[e]:t},he.setConnectedConnectorId(e,t))},removeConnectorId(t){at.activeConnectorIds={...at.activeConnectorIds,[t]:void 0},he.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return at.activeConnectorIds[t]},isConnected(t){return t?!!at.activeConnectorIds[t]:Object.values(at.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){at.activeConnectorIds={...R8}}},fe=As(_Z),gg={getConnectionStatus(t,e){const n=fe.state.activeConnectorIds[e],r=_e.state.connections.get(e)??[];return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},validateAccountSwitch({namespace:t,connection:e,address:n}){if(t===X.CHAIN.BITCOIN){if(!n)throw new Error("Address parameter is required for switching bip122 connection");const{type:s}=e.accounts.find(i=>i.address.toLowerCase()===n.toLowerCase())??{};if(typeof s=="string"&&s!=="payment")throw new Error(`Switching to non-payment accounts is not allowed for ${t}`)}},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},filterConnectionsByAccountType(t,e){return t.map(n=>{const r=n.accounts.filter(s=>typeof s.type=="string"?s.type.toLowerCase()===e.toLowerCase():!0);return{...n,accounts:r}})},getConnectionsData(t){const e=_e.state.connections.get(t)??[],n=e.filter(a=>!a.recent),r=fe.state.activeConnectorIds[t],i=e.filter(a=>a.recent).filter(a=>fe.getConnectorById(a.connectorId)),o=gg.excludeExistingConnections([...n.map(a=>a.connectorId),...r?[r]:[]],i);return{connections:n,recentConnections:o}}};var gh={};const EZ="https://secure.walletconnect.org/sdk",CZ=(typeof process<"u"&&typeof gh<"u"?gh.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||EZ,xZ=(typeof process<"u"&&typeof gh<"u"?gh.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",SZ=(typeof process<"u"&&typeof gh<"u"?gh.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ce={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Dn={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},AZ=1e3,Bo={checkNamespaceConnectorId(t,e){return fe.getConnectorId(t)===e},isSocialProvider(t){return bt.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&fe.setActiveConnector(e),s==null||s(Se.isMobile()&&t),r){const l=gt.subscribeKey("open",u=>{u||(Re.state.view!==r&&Re.replace(r),l(),a(new Error("Modal closed")))})}const c=D.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&gt.close(),c(),o(hs.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=D.subscribeKey("activeCaipAddress",s=>{s&&(gt.close(),r(),e(hs.parseCaipAddress(s)))});_e.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=de.state.socialWindow,i=de.state.socialProvider,o=!1,a=null;const c=D.subscribeKey("activeCaipAddress",l=>{l&&(e&&gt.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===X.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=fe.getAuthConnector();if(g&&!o){s&&(s.close(),de.setSocialWindow(void 0,D.state.activeChain),s=de.state.socialWindow),o=!0;const y=f.data.resultUri;if(i&&_t.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}}),await g.provider.connectSocial(y),i){he.setConnectedSocialProvider(i),await _e.connectExternal({id:g.id,type:g.type,socialUri:y},g.chain);const w=D.state.activeCaipAddress;if(!w){u(new Error("Failed to connect"));return}l(hs.parseCaipAddress(w)),_t.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&_t.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&_t.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(de.setSocialProvider(t,D.state.activeChain),i=de.state.socialProvider,_t.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=gt.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=fe.getAuthConnector();if(p&&!de.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();de.setFarcasterUrl(g,D.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=fe.getAuthConnector();a=Se.returnOpenHref(`${X.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){de.setSocialWindow(a,D.state.activeChain),s=de.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=gt.subscribeKey("open",c=>{c||(Re.state.view!==e&&Re.replace(e),a(),i(new Error("Modal closed")))})}const o=D.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&gt.close(),o(),s(hs.parseCaipAddress(a)))})})},async updateEmail(){const t=he.getConnectedConnectorId(D.state.activeChain),e=fe.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==X.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Re.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(gt.close(),clearInterval(i),o(),r({email:a}))},AZ),o=gt.subscribeKey("open",a=>{a||(Re.state.view!=="Connect"&&Re.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){var n;return D.checkIfSmartAccountEnabled()&&((n=de.state.preferredAccountTypes)==null?void 0:n[t])===Dn.ACCOUNT_TYPES.EOA}},ul=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),mn=jt({...ul}),IZ={state:mn,subscribeKey(t,e){return Yn(mn,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Se.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){mn.message=ul.message,mn.variant=ul.variant,mn.svg=ul.svg,mn.open=ul.open,mn.autoClose=ul.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ul.autoClose}){mn.open?(mn.open=!1,setTimeout(()=>{mn.message=t,mn.variant=n,mn.svg=e,mn.open=!0,mn.autoClose=r},150)):(mn.message=t,mn.variant=n,mn.svg=e,mn.open=!0,mn.autoClose=r)}},bi=IZ,kt=jt({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),TZ={state:kt,subscribe(t){return Kn(kt,()=>t(kt))},setLastNetworkInView(t){kt.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");kt.loading=!0;try{const s=await Oe.fetchTransactions({account:t,cursor:kt.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Lf.filterSpamTransactions(s.data),o=Lf.filterByConnectedChain(i),a=[...kt.transactions,...o];kt.loading=!1,e==="coinbase"?kt.coinbaseTransactions=Lf.groupTransactionsByYearAndMonth(kt.coinbaseTransactions,s.data):(kt.transactions=a,kt.transactionsByYear=Lf.groupTransactionsByYearAndMonth(kt.transactionsByYear,o)),kt.empty=a.length===0,kt.next=s.next?s.next:void 0}catch{const i=D.state.activeChain;_t.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:se.state.projectId,cursor:kt.next,isSmartAccount:((r=de.state.preferredAccountTypes)==null?void 0:r[i])===Dn.ACCOUNT_TYPES.SMART_ACCOUNT}}),bi.showError("Failed to fetch transactions"),kt.loading=!1,kt.empty=!0,kt.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=D.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){kt.next=void 0},resetTransactions(){kt.transactions=[],kt.transactionsByYear={},kt.lastNetworkInView=void 0,kt.loading=!1,kt.empty=!1,kt.next=void 0}},Lf=As(TZ,"API_ERROR"),nt=jt({connections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Xc;const NZ={state:nt,subscribe(t){return Kn(nt,()=>t(nt))},subscribeKey(t,e){return Yn(nt,t,e)},_getClient(){return nt._client},setClient(t){nt._client=ru(t)},initialize(t){const e=he.getConnections();for(const n of t){const r=n.namespace;if(r){const s=nt.connections.get(r)??[],i=e[r]??[],o=[...s,...i];nt.connections.set(r,o)}}},async connectWalletConnect(){var t,e,n,r;if(Se.isTelegram()||Se.isSafari()&&Se.isIos()){if(Xc){await Xc,Xc=void 0;return}if(!Se.isPairingExpired(nt==null?void 0:nt.wcPairingExpiry)){const s=nt.wcUri;nt.wcUri=s;return}Xc=(e=(t=_e._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),_e.state.status="connecting",await Xc,Xc=void 0,nt.wcPairingExpiry=void 0,_e.state.status="connected"}else await((r=(n=_e._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=_e._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&D.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=_e._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||D.state.activeChain;e&&fe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;gt.setLoading(!0,D.state.activeChain);const n=fe.getAuthConnector();n&&(de.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),he.setPreferredAccountTypes(de.state.preferredAccountTypes??{[e]:t}),await _e.reconnectExternal(n),gt.setLoading(!1,D.state.activeChain),_t.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=D.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=_e._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=_e._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=_e._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=_e._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=_e._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=_e._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=_e._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=_e._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=_e._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=_e._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=_e._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=_e._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){nt.wcUri=void 0,nt.wcPairingExpiry=void 0,nt.wcLinking=void 0,nt.recentWallet=void 0,nt.status="disconnected",Lf.resetTransactions(),he.deleteWalletConnectDeepLink()},resetUri(){nt.wcUri=void 0,nt.wcPairingExpiry=void 0,Xc=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=_e.state;t&&he.setWalletConnectDeepLink(t),e&&he.setAppKitRecent(e),_t.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Re.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){nt.wcBasic=t},setUri(t){nt.wcUri=t,nt.wcPairingExpiry=Se.getPairingExpiry()},setWcLinking(t){nt.wcLinking=t},setWcError(t){nt.wcError=t,nt.buffering=!1},setRecentWallet(t){nt.recentWallet=t},setBuffering(t){nt.buffering=t},setStatus(t){nt.status=t},setIsSwitchingConnection(t){nt.isSwitchingConnection=t},async disconnect({id:t,namespace:e}={}){var n;try{await((n=_e._getClient())==null?void 0:n.disconnect({id:t,chainNamespace:e}))}catch(r){throw new ph("Failed to disconnect","INTERNAL_SDK_ERROR",r)}},setConnections(t,e){nt.connections=new Map(nt.connections.set(e,t))},async handleAuthAccountSwitch({address:t,connection:e,namespace:n}){var o;const r=(o=e.accounts.find(a=>a.type==="smartAccount"))==null?void 0:o.address,i=(r==null?void 0:r.toLowerCase())===t.toLowerCase()&&Bo.canSwitchToSmartAccount(n)?"smartAccount":"eoa";await _e.setPreferredAccountType(i,n)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=fe.getConnectorById(t.connectorId),s=t.connectorId===X.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);const i=await _e.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return s&&n&&await _e.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),i==null?void 0:i.address},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=fe.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===X.CONNECTOR_ID.AUTH,a=t.connectorId===X.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Bo.isSocialProvider(i)){const{address:d}=await Bo.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){gt.open({view:"ConnectingFarcaster"})},onConnect(){Re.replace("ProfileWallets")}});c=d}else{const{address:d}=await Bo.connectEmail({closeModalOnConnect:r,onOpen(){gt.open({view:"EmailLogin"})},onConnect(){Re.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Bo.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){gt.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Re.replace("ProfileWallets")}});c=d}else{const d=await _e.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await _e.handleAuthAccountSwitch({address:n,connection:t,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){gg.validateAccountSwitch({namespace:n,connection:t,address:e});let i;const o=de.getCaipAddress(n);if(o){const{address:c}=hs.parseCaipAddress(o);i=c}const a=gg.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await _e.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await _e.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},_e=As(NZ),Lu=jt({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),io={state:Lu,subscribe(t){return Kn(Lu,()=>t(Lu))},subscribeOpen(t){return Yn(Lu,"open",t)},set(t){Object.assign(Lu,{...Lu,...t})}};function PZ(t){const e=Array.from(D.state.chains.keys());let n=[];return t?(n.push([t,D.state.chains.get(t)]),Bo.checkNamespaceConnectorId(t,X.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&Bo.checkNamespaceConnectorId(r,X.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,D.state.chains.get(r)])}):Bo.checkNamespaceConnectorId(t,X.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&Bo.checkNamespaceConnectorId(r,X.CONNECTOR_ID.AUTH)&&n.push([r,D.state.chains.get(r)])})):n=Array.from(D.state.chains.entries()),n}function $8(){var r,s;const t=((r=D.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=D.state.activeCaipNetwork)==null?void 0:s.id)||1,n=bt.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}const kZ={async getTokenList(){var r;const t=D.state.activeCaipNetwork,e=await Oe.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=D.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(_e==null?void 0:_e.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await Oe.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await Oe.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=_e.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await NA.getMyTokensWithBalance(t);return de.setTokenBalance(e,D.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:$8(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},vt=jt({tokenBalances:[],loading:!1}),OZ={state:vt,subscribe(t){return Kn(vt,()=>t(vt))},subscribeKey(t,e){return Yn(vt,t,e)},setToken(t){t&&(vt.token=ru(t))},setTokenAmount(t){vt.sendTokenAmount=t},setReceiverAddress(t){vt.receiverAddress=t},setReceiverProfileImageUrl(t){vt.receiverProfileImageUrl=t},setReceiverProfileName(t){vt.receiverProfileName=t},setNetworkBalanceInUsd(t){vt.networkBalanceInUSD=t},setLoading(t){vt.loading=t},async sendToken(){var t;try{switch(ft.setLoading(!0),(t=D.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await ft.sendEvmToken();return;case"solana":await ft.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{ft.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=D.state.activeChain,e=(n=de.state.preferredAccountTypes)==null?void 0:n[t];if(!ft.state.sendTokenAmount||!ft.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!ft.state.token)throw new Error("A token is required");(r=ft.state.token)!=null&&r.address?(_t.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Dn.ACCOUNT_TYPES.SMART_ACCOUNT,token:ft.state.token.address,amount:ft.state.sendTokenAmount,network:((s=D.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await ft.sendERC20Token({receiverAddress:ft.state.receiverAddress,tokenAddress:ft.state.token.address,sendTokenAmount:ft.state.sendTokenAmount,decimals:ft.state.token.quantity.decimals})):(_t.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Dn.ACCOUNT_TYPES.SMART_ACCOUNT,token:ft.state.token.symbol||"",amount:ft.state.sendTokenAmount,network:((i=D.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await ft.sendNativeToken({receiverAddress:ft.state.receiverAddress,sendTokenAmount:ft.state.sendTokenAmount,decimals:ft.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;vt.loading=!0;const e=(i=D.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=D.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=D.state.activeCaipAddress,s=r?Se.getPlainAddress(r):void 0;if(vt.lastRetry&&!Se.isAllowedRetry(vt.lastRetry,30*bt.ONE_SEC_MS))return vt.loading=!1,[];try{if(s&&e&&n){const a=await NA.getMyTokensWithBalance();return vt.tokenBalances=a,vt.lastRetry=void 0,a}}catch(a){vt.lastRetry=Date.now(),t==null||t(a),bi.showError("Token Balance Unavailable")}finally{vt.loading=!1}return[]},fetchNetworkBalance(){if(vt.tokenBalances.length===0)return;const t=kZ.mapBalancesToSwapTokens(vt.tokenBalances);if(!t)return;const e=t.find(n=>n.address===$8());e&&(vt.networkBalanceInUSD=e?ZJ.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Re.pushTransactionStack({});const e=t.receiverAddress,n=de.state.address,r=_e.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await _e.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),_t.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=de.state.preferredAccountTypes)==null?void 0:i.eip155)===Dn.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=ft.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=D.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=_e._getClient())==null||c.updateBalance("eip155"),ft.resetSend()},async sendERC20Token(t){Re.pushTransactionStack({onSuccess(){Re.replace("Account")}});const e=_e.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(de.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Se.getPlainAddress(t.tokenAddress);await _e.writeContract({fromAddress:de.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:nZ.getERC20Abi(n),chainNamespace:"eip155"}),ft.resetSend()}},async sendSolanaToken(){var t;if(!ft.state.sendTokenAmount||!ft.state.receiverAddress)throw new Error("An amount and receiver address are required");Re.pushTransactionStack({onSuccess(){Re.replace("Account")}}),await _e.sendTransaction({chainNamespace:"solana",to:ft.state.receiverAddress,value:ft.state.sendTokenAmount}),(t=_e._getClient())==null||t.updateBalance("solana"),ft.resetSend()},resetSend(){vt.token=void 0,vt.sendTokenAmount=void 0,vt.receiverAddress=void 0,vt.receiverProfileImageUrl=void 0,vt.receiverProfileName=void 0,vt.loading=!1,vt.tokenBalances=[]}},ft=As(OZ),P1={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},py={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},pe=jt({chains:qJ(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),RZ={state:pe,subscribe(t){return Kn(pe,()=>{t(pe)})},subscribeKey(t,e){return Yn(pe,t,e)},subscribeChainProp(t,e,n){let r;return Kn(pe.chains,()=>{var i;const s=n||pe.activeChain;if(s){const o=(i=pe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=he.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=se.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(pe.noAdapters=!0),pe.noAdapters||(pe.activeChain=a==null?void 0:a.namespace,pe.activeCaipNetwork=i,D.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),pe.activeChain&&io.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);D.state.chains.set(u,{namespace:u,networkState:jt({...py,caipNetwork:d==null?void 0:d[0]}),accountState:jt(P1),caipNetworks:d??[],...n}),D.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(pe.activeChain===t){const r=Array.from(pe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&D.setActiveCaipNetwork(s)}}pe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){pe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...py,caipNetwork:r[0]},accountState:P1,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),D.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=pe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),pe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),D.setRequestedCaipNetworks(r,t.chainNamespace),fe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=pe.chains.get(t);if(n){const o=((r=pe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&D.setActiveCaipNetwork(n.caipNetworks[0]),pe.chains.set(t,{...n,caipNetworks:a}),D.setRequestedCaipNetworks(a||[],t),a.length===0&&fe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=pe.chains.get(t);n&&(n.networkState={...n.networkState||py,...e},pe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=pe.chains.get(t);if(r){const s={...r.accountState||P1,...e};pe.chains.set(t,{...r,accountState:s}),(pe.chains.size===1||pe.activeChain===t)&&(e.caipAddress&&(pe.activeCaipAddress=e.caipAddress),de.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=pe.chains.get(t);if(n){const r={...n.networkState||py,...e};pe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){D.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&fe.removeConnectorId(n)},setActiveNamespace(t){var r,s;pe.activeChain=t;const e=t?pe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(pe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,pe.activeCaipNetwork=n,D.setChainNetworkData(t,{caipNetwork:n}),he.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),io.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;pe.activeChain!==t.chainNamespace&&D.setIsSwitchingNamespace(!0);const e=pe.chains.get(t.chainNamespace);pe.activeChain=t.chainNamespace,pe.activeCaipNetwork=t,D.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?pe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:pe.activeCaipAddress=void 0,D.setAccountProp("caipAddress",pe.activeCaipAddress,t.chainNamespace),e&&de.replaceState(e.accountState),ft.resetSend(),io.set({activeChain:pe.activeChain,selectedNetworkId:(i=pe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),he.setActiveCaipNetworkId(t.caipNetworkId),!D.checkIfSupportedNetwork(t.chainNamespace)&&se.state.enableNetworkSwitch&&!se.state.allowUnsupportedChain&&!_e.state.wcBasic&&D.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=pe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==D.state.activeChain,n=(s=D.getNetworkData(t))==null?void 0:s.caipNetwork,r=D.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await D.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=D.state.chains.get(D.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=pe.activeCaipNetwork)==null?void 0:o.id)})),r=D.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&gt.close()}catch{Re.goBack()}_t.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||pe.activeChain,n=pe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||pe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=pe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=pe.activeChain;if(e&&(n=e),!n)return;const r=(s=pe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=pe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=pe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Se.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return pe.chains.forEach(e=>{const n=D.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){D.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=D.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));fe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return pe.chains.forEach(e=>{const n=D.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return pe.activeCaipNetwork},getActiveCaipAddress(){return pe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=pe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=D.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());D.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||pe.activeCaipNetwork,r=D.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!pe.activeChain)return!0;const e=D.getRequestedCaipNetworks(pe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){D.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=pg.caipNetworkIdToNumber((r=pe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=pe.activeChain;if(!e||!t)return!1;const n=D.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){gt.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=pe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&bt.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){D.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");pe.activeCaipAddress=void 0,D.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),fe.removeConnectorId(e)},setIsSwitchingNamespace(t){pe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(pe.chains.forEach(s=>{X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=pe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=D.state.chains.get(t))==null?void 0:e.accountState:de.state},getNetworkData(t){var n;const e=t||pe.activeChain;if(e)return(n=D.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=D.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=fe.state.filterByNamespace;return(t?[pe.chains.get(t)]:Array.from(pe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?D.getRequestedCaipNetworks(t):D.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){pe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return pe.lastConnectedSIWECaipNetwork}},D=As(RZ),$Z={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},D8=Se.getBlockchainApiUrl(),Or=jt({clientId:null,api:new cm({baseUrl:D8,clientId:null}),supportedChains:{http:[],ws:[]}}),Oe={state:Or,async get(t){const{st:e,sv:n}=Oe.getSdkProperties(),r=se.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Or.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=se.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Or.supportedChains.http.length||await Oe.getSupportedNetworks()}catch{return!1}return Or.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Oe.get({path:"v1/supported-chains"});return Or.supportedChains=t,t}catch{return Or.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Oe.isNetworkSupported(e))return{avatar:"",name:""};const r=he.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Oe.get({path:`/v1/identity/${t}`,params:{sender:D.state.activeCaipAddress?Se.getPlainAddress(D.state.activeCaipAddress):void 0}});return he.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await Oe.isNetworkSupported((a=D.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Oe.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Oe.isNetworkSupported((o=D.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Oe.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Oe.isNetworkSupported((n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Oe.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await Oe.isNetworkSupported((n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Or.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:se.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Oe.isNetworkSupported((r=D.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Oe.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Oe.getSdkProperties();if(!await Oe.isNetworkSupported((s=D.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Oe.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Oe.isNetworkSupported((o=D.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Or.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:bt.CONVERT_SLIPPAGE_TOLERANCE},projectId:se.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Oe.getSdkProperties();if(!await Oe.isNetworkSupported((o=D.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Oe.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Oe.getSdkProperties();if(!await Oe.isNetworkSupported((l=D.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return bi.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=he.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Oe.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return he.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Oe.isNetworkSupported((n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Oe.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Oe.isNetworkSupported((n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Oe.get({path:`/v1/profile/reverse/${t}`,params:{sender:de.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Oe.isNetworkSupported((n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Oe.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Oe.isNetworkSupported((i=D.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Or.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Oe.isNetworkSupported((a=D.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Or.api.post({path:"/v1/generators/onrampurl",params:{projectId:se.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Oe.isNetworkSupported((e=D.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Oe.get({path:"/v1/onramp/options"})}catch{return $Z}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Oe.isNetworkSupported((s=D.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Or.api.post({path:"/v1/onramp/quote",params:{projectId:se.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Oe.isNetworkSupported((n=D.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Oe.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Oe.isNetworkSupported((s=D.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Or.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:se.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Or.clientId=t,Or.api=new cm({baseUrl:D8,clientId:t})}},k1={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Nh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},NA={async getMyTokensWithBalance(t){const e=de.state.address,n=D.state.activeCaipNetwork,r=fe.getConnectorId("eip155")===X.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=he.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace==="eip155"&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await Oe.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=k1.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await _e.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await _e.walletGetAssets({account:t,chainFilter:[s]});if(!k1.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>k1.createBalance(l,e.caipNetworkId));return he.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Ns=jt({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),DZ={state:Ns,replaceState(t){t&&Object.assign(Ns,ru(t))},subscribe(t){return D.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return D.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){D.setAccountProp("status",t,e)},getCaipAddress(t){return D.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Se.getPlainAddress(t):void 0;e===D.state.activeChain&&(D.state.activeCaipAddress=t),D.setAccountProp("caipAddress",t,e),D.setAccountProp("address",n,e)},setBalance(t,e,n){D.setAccountProp("balance",t,n),D.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){D.setAccountProp("profileName",t,e)},setProfileImage(t,e){D.setAccountProp("profileImage",t,e)},setUser(t,e){D.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){D.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){D.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){D.setAccountProp("currentTab",t,D.state.activeChain)},setTokenBalance(t,e){t&&D.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){D.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){D.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=D.getAccountProp("addressLabels",n)||new Map;r.set(t,e),D.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=D.getAccountProp("addressLabels",e)||new Map;n.delete(t),D.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){D.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){D.setAccountProp("preferredAccountTypes",{...Ns.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Ns.preferredAccountTypes=t},setSocialProvider(t,e){t&&D.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){D.setAccountProp("socialWindow",t?ru(t):void 0,e)},setFarcasterUrl(t,e){D.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Ns.balanceLoading=!0;const e=(i=D.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=D.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=D.state.activeCaipAddress,s=r?Se.getPlainAddress(r):void 0;if(Ns.lastRetry&&!Se.isAllowedRetry(Ns.lastRetry,30*bt.ONE_SEC_MS))return Ns.balanceLoading=!1,[];try{if(s&&e&&n){const a=await NA.getMyTokensWithBalance();return de.setTokenBalance(a,n),Ns.lastRetry=void 0,Ns.balanceLoading=!1,a}}catch(a){Ns.lastRetry=Date.now(),t==null||t(a),bi.showError("Token Balance Unavailable")}finally{Ns.balanceLoading=!1}return[]},resetAccount(t){D.resetAccount(t)}},de=As(DZ),jZ={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=D.state.activeCaipNetwork,r=Re.state.data;if(t.id===(n==null?void 0:n.id))return;const i=de.getCaipAddress(D.state.activeChain),o=t.chainNamespace!==D.state.activeChain,a=de.getCaipAddress(t.chainNamespace),l=fe.getConnectorId(D.state.activeChain)===X.CONNECTOR_ID.AUTH,u=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Re.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Re.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Re.push("SwitchNetwork",{...r,network:t})}},Rr=jt({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),UZ={state:Rr,subscribe(t){return Kn(Rr,()=>t(Rr))},subscribeKey(t,e){return Yn(Rr,t,e)},async open(t){var o,a;const e=de.state.status==="connected",n=t==null?void 0:t.namespace,r=D.state.activeChain,s=n&&n!==r,i=(o=D.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(_e.state.wcBasic?Te.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Te.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),fe.setFilterByNamespace(t==null?void 0:t.namespace),gt.setLoading(!0,n),n&&s){const c=((a=D.getNetworkData(n))==null?void 0:a.caipNetwork)||D.getRequestedCaipNetworks(n)[0];c&&jZ.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=D.state.noAdapters;se.state.manualWCControl||c&&!i?Se.isMobile()?Re.reset("AllWallets"):Re.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Re.reset(t.view,t.data):i?Re.reset("Account"):Re.reset("Connect")}Rr.open=!0,io.set({open:!0}),_t.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=se.state.enableEmbedded,e=!!D.state.activeCaipAddress;Rr.open&&_t.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Rr.open=!1,Re.reset("Connect"),gt.clearLoading(),t?e?Re.replace("Account"):Re.push("Connect"):io.set({open:!1}),_e.resetUri()},setLoading(t,e){e&&Rr.loadingNamespaceMap.set(e,t),Rr.loading=t,io.set({loading:t})},clearLoading(){Rr.loadingNamespaceMap.clear(),Rr.loading=!1},shake(){Rr.shake||(Rr.shake=!0,setTimeout(()=>{Rr.shake=!1},500))}},gt=As(UZ),sp={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},PC={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},LZ={providers:k8,selectedProvider:null,error:null,purchaseCurrency:sp,paymentCurrency:PC,purchaseCurrencies:[sp],paymentCurrencies:[],quotesLoading:!1},rt=jt(LZ),MZ={state:rt,subscribe(t){return Kn(rt,()=>t(rt))},subscribeKey(t,e){return Yn(rt,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=D.state.activeChain===X.CHAIN.SOLANA?"SOL":"USDC",n=de.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",rZ),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",se.state.projectId),rt.selectedProvider={...t,url:r.toString()}}else rt.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=k8.filter(r=>e.includes(r.name));rt.providers=n}else rt.providers=[]},setPurchaseCurrency(t){rt.purchaseCurrency=t},setPaymentCurrency(t){rt.paymentCurrency=t},setPurchaseAmount(t){kC.state.purchaseAmount=t},setPaymentAmount(t){kC.state.paymentAmount=t},async getAvailableCurrencies(){const t=await Oe.getOnrampOptions();rt.purchaseCurrencies=t.purchaseCurrencies,rt.paymentCurrencies=t.paymentCurrencies,rt.paymentCurrency=t.paymentCurrencies[0]||PC,rt.purchaseCurrency=t.purchaseCurrencies[0]||sp,await Te.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Te.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;rt.quotesLoading=!0;try{const n=await Oe.getOnrampQuote({purchaseCurrency:rt.purchaseCurrency,paymentCurrency:rt.paymentCurrency,amount:((t=rt.paymentAmount)==null?void 0:t.toString())||"0",network:(e=rt.purchaseCurrency)==null?void 0:e.symbol});return rt.quotesLoading=!1,rt.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return rt.error=n.message,rt.quotesLoading=!1,null}finally{rt.quotesLoading=!1}},resetState(){rt.selectedProvider=null,rt.error=null,rt.purchaseCurrency=sp,rt.paymentCurrency=PC,rt.purchaseCurrencies=[sp],rt.paymentCurrencies=[],rt.paymentAmount=void 0,rt.purchaseAmount=void 0,rt.quotesLoading=!1}},kC=As(MZ),dN=2147483648,BZ={convertEVMChainIdToCoinType(t){if(t>=dN)throw new Error("Invalid chainId");return(dN|t)>>>0}},Ps=jt({suggestions:[],loading:!1}),FZ={state:Ps,subscribe(t){return Kn(Ps,()=>t(Ps))},subscribeKey(t,e){return Yn(Ps,t,e)},async resolveName(t){var e,n;try{return await Oe.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Oe.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Ps.loading=!0,Ps.suggestions=[];const e=await Oe.getEnsNameSuggestions(t);return Ps.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Ps.suggestions}catch(e){const n=ip.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Ps.loading=!1}},async getNamesForAddress(t){try{if(!D.state.activeCaipNetwork)return[];const n=he.getEnsFromCacheForAddress(t);if(n)return n;const r=await Oe.reverseLookupEnsName({address:t});return he.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=ip.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=D.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=de.state.address,r=fe.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Ps.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Re.pushTransactionStack({onCancel(){Re.replace("RegisterAccountName")}});const i=await _e.signMessage(s);Ps.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=BZ.convertEVMChainIdToCoinType(Number(o));await Oe.registerEnsName({coinType:a,address:n,signature:i,message:s}),de.setProfileName(t,e.chainNamespace),Re.replace("RegisterAccountNameSuccess")}catch(s){const i=ip.parseEnsApiError(s,`Error registering name ${t}`);throw Re.replace("RegisterAccountName"),new Error(i)}finally{Ps.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},ip=As(FZ);var PA={exports:{}},Ld=typeof Reflect=="object"?Reflect:null,hN=Ld&&typeof Ld.apply=="function"?Ld.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},uw;Ld&&typeof Ld.ownKeys=="function"?uw=Ld.ownKeys:Object.getOwnPropertySymbols?uw=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:uw=function(e){return Object.getOwnPropertyNames(e)};function zZ(t){console&&console.warn&&console.warn(t)}var j8=Number.isNaN||function(e){return e!==e};function Nt(){Nt.init.call(this)}PA.exports=Nt;PA.exports.once=VZ;Nt.EventEmitter=Nt;Nt.prototype._events=void 0;Nt.prototype._eventsCount=0;Nt.prototype._maxListeners=void 0;var fN=10;function Nv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Nt,"defaultMaxListeners",{enumerable:!0,get:function(){return fN},set:function(t){if(typeof t!="number"||t<0||j8(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");fN=t}});Nt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Nt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||j8(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function U8(t){return t._maxListeners===void 0?Nt.defaultMaxListeners:t._maxListeners}Nt.prototype.getMaxListeners=function(){return U8(this)};Nt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")hN(c,this,n);else for(var l=c.length,u=z8(c,l),r=0;r<l;++r)hN(u[r],this,n);return!0};function L8(t,e,n,r){var s,i,o;if(Nv(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=U8(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,zZ(a)}return t}Nt.prototype.addListener=function(e,n){return L8(this,e,n,!1)};Nt.prototype.on=Nt.prototype.addListener;Nt.prototype.prependListener=function(e,n){return L8(this,e,n,!0)};function qZ(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M8(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=qZ.bind(r);return s.listener=n,r.wrapFn=s,s}Nt.prototype.once=function(e,n){return Nv(n),this.on(e,M8(this,e,n)),this};Nt.prototype.prependOnceListener=function(e,n){return Nv(n),this.prependListener(e,M8(this,e,n)),this};Nt.prototype.removeListener=function(e,n){var r,s,i,o,a;if(Nv(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():WZ(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Nt.prototype.off=Nt.prototype.removeListener;Nt.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function B8(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?HZ(s):z8(s,s.length)}Nt.prototype.listeners=function(e){return B8(this,e,!0)};Nt.prototype.rawListeners=function(e){return B8(this,e,!1)};Nt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):F8.call(t,e)};Nt.prototype.listenerCount=F8;function F8(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Nt.prototype.eventNames=function(){return this._eventsCount>0?uw(this._events):[]};function z8(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function WZ(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function HZ(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function VZ(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}q8(t,e,i,{once:!0}),e!=="error"&&GZ(t,s,{once:!0})})}function GZ(t,e,n){typeof t.on=="function"&&q8(t,"error",e,n)}function q8(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Js=PA.exports;const kA=pu(Js);var le={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var OC=function(t,e){return OC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},OC(t,e)};function KZ(t,e){OC(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var RC=function(){return RC=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},RC.apply(this,arguments)};function YZ(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function QZ(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function JZ(t,e){return function(n,r){e(n,r,t)}}function ZZ(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function XZ(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function eX(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function tX(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function nX(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function $C(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function W8(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function rX(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(W8(arguments[e]));return t}function sX(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function mg(t){return this instanceof mg?(this.v=t,this):new mg(t)}function iX(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof mg?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function oX(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:mg(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function aX(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $C=="function"?$C(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function cX(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function lX(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function uX(t){return t&&t.__esModule?t:{default:t}}function dX(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function hX(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const fX=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return RC},__asyncDelegator:oX,__asyncGenerator:iX,__asyncValues:aX,__await:mg,__awaiter:XZ,__classPrivateFieldGet:dX,__classPrivateFieldSet:hX,__createBinding:tX,__decorate:QZ,__exportStar:nX,__extends:KZ,__generator:eX,__importDefault:uX,__importStar:lX,__makeTemplateObject:cX,__metadata:ZZ,__param:JZ,__read:W8,__rest:YZ,__spread:rX,__spreadArrays:sX,__values:$C},Symbol.toStringTag,{value:"Module"})),Pv=D0(fX);var O1={},uf={},pN;function pX(){if(pN)return uf;pN=1,Object.defineProperty(uf,"__esModule",{value:!0}),uf.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return uf.delay=t,uf}var el={},R1={},tl={},gN;function gX(){return gN||(gN=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.ONE_THOUSAND=tl.ONE_HUNDRED=void 0,tl.ONE_HUNDRED=100,tl.ONE_THOUSAND=1e3),tl}var $1={},mN;function mX(){return mN||(mN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}($1)),$1}var yN;function H8(){return yN||(yN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pv;e.__exportStar(gX(),t),e.__exportStar(mX(),t)}(R1)),R1}var wN;function yX(){if(wN)return el;wN=1,Object.defineProperty(el,"__esModule",{value:!0}),el.fromMiliseconds=el.toMiliseconds=void 0;const t=H8();function e(r){return r*t.ONE_THOUSAND}el.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return el.fromMiliseconds=n,el}var vN;function wX(){return vN||(vN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pv;e.__exportStar(pX(),t),e.__exportStar(yX(),t)}(O1)),O1}var Mu={},bN;function vX(){if(bN)return Mu;bN=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Mu.Watch=t,Mu.default=t,Mu}var D1={},df={},_N;function bX(){if(_N)return df;_N=1,Object.defineProperty(df,"__esModule",{value:!0}),df.IWatch=void 0;class t{}return df.IWatch=t,df}var EN;function _X(){return EN||(EN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Pv.__exportStar(bX(),t)}(D1)),D1}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Pv;e.__exportStar(wX(),t),e.__exportStar(vX(),t),e.__exportStar(_X(),t),e.__exportStar(H8(),t)})(le);class Eu{}let EX=class extends Eu{constructor(e){super()}};const CN=le.FIVE_SECONDS,Cu={pulse:"heartbeat_pulse"};let CX=class V8 extends EX{constructor(e){super(e),this.events=new Js.EventEmitter,this.interval=CN,this.interval=(e==null?void 0:e.interval)||CN}static async init(e){const n=new V8(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),le.toMiliseconds(this.interval))}pulse(){this.events.emit(Cu.pulse)}};const xX=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,SX=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,AX=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function IX(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){TX(t);return}return e}function TX(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function gy(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!AX.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(xX.test(t)||SX.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,IX)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function NX(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Tn(t,...e){try{return NX(t(...e))}catch(n){return Promise.reject(n)}}function PX(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function kX(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function dw(t){if(PX(t))return String(t);if(kX(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return dw(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const DC="base64:";function OX(t){return typeof t=="string"?t:DC+DX(t)}function RX(t){return typeof t!="string"||!t.startsWith(DC)?t:$X(t.slice(DC.length))}function $X(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function DX(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Mr(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function jX(...t){return Mr(t.join(":"))}function my(t){return t=Mr(t),t?t+":":""}function UX(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function LX(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const MX="memory",BX=()=>{const t=new Map;return{name:MX,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function FX(t={}){const e={mounts:{"":t.driver||BX()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Mr(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await xN(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=Mr(g?p:p.key),w=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(y);f(v).items.push({key:y,value:w,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Mr(l);const{relativeKey:d,driver:h}=n(l);return Tn(h.hasItem,d,u)},getItem(l,u={}){l=Mr(l);const{relativeKey:d,driver:h}=n(l);return Tn(h.getItem,d,u).then(f=>gy(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Tn(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:jX(d.base,f.key),value:gy(f.value)}))):Promise.all(d.items.map(h=>Tn(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:gy(f)})))))},getItemRaw(l,u={}){l=Mr(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Tn(h.getItemRaw,d,u):Tn(h.getItem,d,u).then(f=>RX(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Mr(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Tn(f.setItem,h,dw(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Tn(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:dw(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Tn(d.driver.setItem,h.relativeKey,dw(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Mr(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Tn(f.setItemRaw,h,u,d);else if(f.setItem)await Tn(f.setItem,h,OX(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Mr(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Tn(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Tn(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Mr(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Tn(h.getMeta,d,u)),!u.nativeOnly){const p=await Tn(h.getItem,d+"$",u).then(g=>gy(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=my(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const w of d){(y=w.driver.flags)!=null&&y.maxDepth||(p=!1);const b=await Tn(w.driver.getKeys,w.relativeBase,u);for(const v of b){const E=w.mountpoint+Mr(v);h.some(_=>E.startsWith(_))||f.push(E)}h=[w.mountpoint,...h.filter(v=>!v.startsWith(w.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(w=>(!g||UX(w,u.maxDepth))&&LX(w,l))},async clear(l,u={}){l=my(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Tn(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>SN(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=my(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(xN(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=my(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await SN(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Mr(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Mr(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function xN(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function SN(t){typeof t.dispose=="function"&&await Tn(t.dispose)}function xu(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function G8(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=xu(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let j1;function lm(){return j1||(j1=G8("keyval-store","keyval")),j1}function AN(t,e=lm()){return e("readonly",n=>xu(n.get(t)))}function zX(t,e,n=lm()){return n("readwrite",r=>(r.put(e,t),xu(r.transaction)))}function qX(t,e=lm()){return e("readwrite",n=>(n.delete(t),xu(n.transaction)))}function WX(t=lm()){return t("readwrite",e=>(e.clear(),xu(e.transaction)))}function HX(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},xu(t.transaction)}function VX(t=lm()){return t("readonly",e=>{if(e.getAllKeys)return xu(e.getAllKeys());const n=[];return HX(e,r=>n.push(r.key)).then(()=>n)})}const GX=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),KX=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function iu(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return KX(t)}catch{return t}}function ra(t){return typeof t=="string"?t:GX(t)||""}const YX="idb-keyval";var QX=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=G8(t.dbName,t.storeName)),{name:YX,options:t,async hasItem(s){return!(typeof await AN(n(s),r)>"u")},async getItem(s){return await AN(n(s),r)??null},setItem(s,i){return zX(n(s),i,r)},removeItem(s){return qX(n(s),r)},getKeys(){return VX(r)},clear(){return WX(r)}}};const JX="WALLET_CONNECT_V2_INDEXED_DB",ZX="keyvaluestorage";let XX=class{constructor(){this.indexedDb=FX({driver:QX({dbName:JX,storeName:ZX})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,ra(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var U1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hw={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof U1<"u"&&U1.localStorage?hw.exports=U1.localStorage:typeof window<"u"&&window.localStorage?hw.exports=window.localStorage:hw.exports=new e})();function eee(t){var e;return[t[0],iu((e=t[1])!=null?e:"")]}let tee=class{constructor(){this.localStorage=hw.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(eee)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return iu(n)}async setItem(e,n){this.localStorage.setItem(e,ra(n))}async removeItem(e){this.localStorage.removeItem(e)}};const nee="wc_storage_version",IN=1,ree=async(t,e,n)=>{const r=nee,s=await e.getItem(r);if(s&&s>=IN){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,IN),n(e),see(t,o)},see=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let iee=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new tee;this.storage=e;try{const n=new XX;ree(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function oee(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var aee=cee;function cee(t,e,n){var r=n&&n.stringify||oee,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const TN=aee;var ld=oo;const yg=wee().console||{},lee={mapHttpRequest:yy,mapHttpResponse:yy,wrapRequestSerializer:L1,wrapResponseSerializer:L1,wrapErrorSerializer:L1,req:yy,res:yy,err:pee};function uee(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function oo(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||yg;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=uee(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=wg),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:gee(t)};c.levels=oo.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=wg,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=jC());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Bu(l,c,"error","log"),Bu(l,c,"fatal","error"),Bu(l,c,"warn","error"),Bu(l,c,"info","log"),Bu(l,c,"debug","log"),Bu(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var w=Object.assign({},r,y),b=t.browser.serialize===!0?Object.keys(w):s;delete p.serializers,kv([p],b,w,this._stdErrSerialize)}function v(E){this._childLevel=(E._childLevel|0)+1,this.error=Fu(E,p,"error"),this.fatal=Fu(E,p,"fatal"),this.warn=Fu(E,p,"warn"),this.info=Fu(E,p,"info"),this.debug=Fu(E,p,"debug"),this.trace=Fu(E,p,"trace"),w&&(this.serializers=w,this._serialize=b),e&&(this._logEvent=jC([].concat(E._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}oo.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};oo.stdSerializers=lee;oo.stdTimeFunctions=Object.assign({},{nullTime:K8,epochTime:Y8,unixTime:mee,isoTime:yee});function Bu(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?wg:s[n]?s[n]:yg[n]||yg[r]||wg,dee(t,e,n)}function dee(t,e,n){!t.transmit&&e[n]===wg||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===yg?yg:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&kv(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,hee(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=oo.levels.values[l],d=oo.levels.values[n];if(d<u)return;fee(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:oo.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function hee(t,e,n,r){t._serialize&&kv(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=oo.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?TN(s.shift(),s):void 0}else typeof i=="string"&&(i=TN(s.shift(),s));return i!==void 0&&(o.msg=i),o}function kv(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=oo.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Fu(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function fee(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;kv(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=jC(c)}function jC(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function pee(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function gee(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?K8:Y8}function yy(){return{}}function L1(t){return t}function wg(){}function K8(){return!1}function Y8(){return Date.now()}function mee(){return Math.round(Date.now()/1e3)}function yee(){return new Date(Date.now()).toISOString()}function wee(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const um=pu(ld),vee={level:"info"},dm="custom_context",OA=1e3*1024;let bee=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},NN=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new bee(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},Q8=class{constructor(e,n=OA){this.level=e??"error",this.levelValue=ld.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new NN(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===ld.levels.values.error?console.error(e):n===ld.levels.values.warn?console.warn(e):n===ld.levels.values.debug?console.debug(e):n===ld.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ra({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new NN(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(ra({extraMetadata:e})),new Blob(n,{type:"application/json"})}},_ee=class{constructor(e,n=OA){this.baseChunkLogger=new Q8(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},Eee=class{constructor(e,n=OA){this.baseChunkLogger=new Q8(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Cee=Object.defineProperty,xee=Object.defineProperties,See=Object.getOwnPropertyDescriptors,PN=Object.getOwnPropertySymbols,Aee=Object.prototype.hasOwnProperty,Iee=Object.prototype.propertyIsEnumerable,kN=(t,e,n)=>e in t?Cee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c0=(t,e)=>{for(var n in e||(e={}))Aee.call(e,n)&&kN(t,n,e[n]);if(PN)for(var n of PN(e))Iee.call(e,n)&&kN(t,n,e[n]);return t},l0=(t,e)=>xee(t,See(e));function $h(t){return l0(c0({},t),{level:(t==null?void 0:t.level)||vee.level})}function Tee(t,e=dm){return t[e]||""}function Nee(t,e,n=dm){return t[n]=e,t}function rs(t,e=dm){let n="";return typeof t.bindings>"u"?n=Tee(t,e):n=t.bindings().context||"",n}function Pee(t,e,n=dm){const r=rs(t,n);return r.trim()?`${r}/${e}`:e}function pr(t,e,n=dm){const r=Pee(t,e,n),s=t.child({context:r});return Nee(s,r,n)}function kee(t){var e,n;const r=new _ee((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:um(l0(c0({},t.opts),{level:"trace",browser:l0(c0({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Oee(t){var e;const n=new Eee((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:um(l0(c0({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function RA(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?kee(t):Oee(t)}var Ree=Object.defineProperty,$ee=(t,e,n)=>e in t?Ree(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ON=(t,e,n)=>$ee(t,typeof e!="symbol"?e+"":e,n);let Dee=class extends Eu{constructor(e){super(),this.opts=e,ON(this,"protocol","wc"),ON(this,"version",2)}};var jee=Object.defineProperty,Uee=(t,e,n)=>e in t?jee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lee=(t,e,n)=>Uee(t,e+"",n);let Mee=class extends Eu{constructor(e,n){super(),this.core=e,this.logger=n,Lee(this,"records",new Map)}},Bee=class{constructor(e,n){this.logger=e,this.core=n}},Fee=class extends Eu{constructor(e,n){super(),this.relayer=e,this.logger=n}},zee=class extends Eu{constructor(e){super()}},qee=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},Wee=class extends Eu{constructor(e,n){super(),this.relayer=e,this.logger=n}},Hee=class extends Eu{constructor(e,n){super(),this.core=e,this.logger=n}},Vee=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},Gee=class{constructor(e,n){this.projectId=e,this.logger=n}},Kee=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var Yee=Object.defineProperty,Qee=(t,e,n)=>e in t?Yee(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,RN=(t,e,n)=>Qee(t,typeof e!="symbol"?e+"":e,n);let Jee=class{constructor(e){this.opts=e,RN(this,"protocol","wc"),RN(this,"version",2)}},Zee=class{constructor(e){this.client=e}};function Xee(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function J8(t,...e){if(!Xee(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function $N(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ete(t,e){J8(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const zu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const M1=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function tte(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Z8(t){return typeof t=="string"&&(t=tte(t)),J8(t),t}let nte=class{clone(){return this._cloneInto()}};function rte(t){const e=r=>t().update(Z8(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function X8(t=32){if(zu&&typeof zu.getRandomValues=="function")return zu.getRandomValues(new Uint8Array(t));if(zu&&typeof zu.randomBytes=="function")return zu.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function ste(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let ite=class extends nte{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=M1(this.buffer)}update(e){$N(this);const{view:n,buffer:r,blockLen:s}=this;e=Z8(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=M1(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){$N(this),ete(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;ste(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=M1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const wy=BigInt(2**32-1),UC=BigInt(32);function e6(t,e=!1){return e?{h:Number(t&wy),l:Number(t>>UC&wy)}:{h:Number(t>>UC&wy)|0,l:Number(t&wy)|0}}function ote(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=e6(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const ate=(t,e)=>BigInt(t>>>0)<<UC|BigInt(e>>>0),cte=(t,e,n)=>t>>>n,lte=(t,e,n)=>t<<32-n|e>>>n,ute=(t,e,n)=>t>>>n|e<<32-n,dte=(t,e,n)=>t<<32-n|e>>>n,hte=(t,e,n)=>t<<64-n|e>>>n-32,fte=(t,e,n)=>t>>>n-32|e<<64-n,pte=(t,e)=>e,gte=(t,e)=>t,mte=(t,e,n)=>t<<n|e>>>32-n,yte=(t,e,n)=>e<<n|t>>>32-n,wte=(t,e,n)=>e<<n-32|t>>>64-n,vte=(t,e,n)=>t<<n-32|e>>>64-n;function bte(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const _te=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Ete=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Cte=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),xte=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Ste=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Ate=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ge={fromBig:e6,split:ote,toBig:ate,shrSH:cte,shrSL:lte,rotrSH:ute,rotrSL:dte,rotrBH:hte,rotrBL:fte,rotr32H:pte,rotr32L:gte,rotlSH:mte,rotlSL:yte,rotlBH:wte,rotlBL:vte,add:bte,add3L:_te,add3H:Ete,add4L:Cte,add4H:xte,add5H:Ate,add5L:Ste},[Ite,Tte]=Ge.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ea=new Uint32Array(80),Ca=new Uint32Array(80);let Nte=class extends ite{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)Ea[v]=e.getUint32(n),Ca[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const E=Ea[v-15]|0,_=Ca[v-15]|0,x=Ge.rotrSH(E,_,1)^Ge.rotrSH(E,_,8)^Ge.shrSH(E,_,7),S=Ge.rotrSL(E,_,1)^Ge.rotrSL(E,_,8)^Ge.shrSL(E,_,7),T=Ea[v-2]|0,C=Ca[v-2]|0,O=Ge.rotrSH(T,C,19)^Ge.rotrBH(T,C,61)^Ge.shrSH(T,C,6),R=Ge.rotrSL(T,C,19)^Ge.rotrBL(T,C,61)^Ge.shrSL(T,C,6),B=Ge.add4L(S,R,Ca[v-7],Ca[v-16]),H=Ge.add4H(B,x,O,Ea[v-7],Ea[v-16]);Ea[v]=H|0,Ca[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:b}=this;for(let v=0;v<80;v++){const E=Ge.rotrSH(d,h,14)^Ge.rotrSH(d,h,18)^Ge.rotrBH(d,h,41),_=Ge.rotrSL(d,h,14)^Ge.rotrSL(d,h,18)^Ge.rotrBL(d,h,41),x=d&f^~d&g,S=h&p^~h&y,T=Ge.add5L(b,_,S,Tte[v],Ca[v]),C=Ge.add5H(T,w,E,x,Ite[v],Ea[v]),O=T|0,R=Ge.rotrSH(r,s,28)^Ge.rotrBH(r,s,34)^Ge.rotrBH(r,s,39),B=Ge.rotrSL(r,s,28)^Ge.rotrBL(r,s,34)^Ge.rotrBL(r,s,39),H=r&i^r&a^i&a,z=s&o^s&c^o&c;w=g|0,b=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=Ge.add(l|0,u|0,C|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const A=Ge.add3L(O,B,z);r=Ge.add3H(A,C,R,H),s=A|0}({h:r,l:s}=Ge.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ge.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ge.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ge.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ge.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ge.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Ge.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:b}=Ge.add(this.Hh|0,this.Hl|0,w|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,b)}roundClean(){Ea.fill(0),Ca.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const Pte=rte(()=>new Nte);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $A=BigInt(0),t6=BigInt(1),kte=BigInt(2);function DA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function jA(t){if(!DA(t))throw new Error("Uint8Array expected")}function B1(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Ote=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function UA(t){jA(t);let e="";for(let n=0;n<t.length;n++)e+=Ote[t[n]];return e}function n6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?$A:BigInt("0x"+t)}const Eo={_0:48,_9:57,A:65,F:70,a:97,f:102};function DN(t){if(t>=Eo._0&&t<=Eo._9)return t-Eo._0;if(t>=Eo.A&&t<=Eo.F)return t-(Eo.A-10);if(t>=Eo.a&&t<=Eo.f)return t-(Eo.a-10)}function r6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=DN(t.charCodeAt(i)),a=DN(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Rte(t){return n6(UA(t))}function fw(t){return jA(t),n6(UA(Uint8Array.from(t).reverse()))}function s6(t,e){return r6(t.toString(16).padStart(e*2,"0"))}function LC(t,e){return s6(t,e).reverse()}function Co(t,e,n){let r;if(typeof e=="string")try{r=r6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(DA(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function jN(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];jA(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const F1=t=>typeof t=="bigint"&&$A<=t;function $te(t,e,n){return F1(t)&&F1(e)&&F1(n)&&e<=t&&t<n}function hf(t,e,n,r){if(!$te(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Dte(t){let e;for(e=0;t>$A;t>>=t6,e+=1);return e}const jte=t=>(kte<<BigInt(t-1))-t6,Ute={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||DA(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function LA(t,e,n={}){const r=(s,i,o)=>{const a=Ute[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function UN(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Rn=BigInt(0),an=BigInt(1),pl=BigInt(2),Lte=BigInt(3),MC=BigInt(4),LN=BigInt(5),MN=BigInt(8);function _n(t,e){const n=t%e;return n>=Rn?n:e+n}function Mte(t,e,n){if(e<Rn)throw new Error("invalid exponent, negatives unsupported");if(n<=Rn)throw new Error("invalid modulus");if(n===an)return Rn;let r=an;for(;e>Rn;)e&an&&(r=r*t%n),t=t*t%n,e>>=an;return r}function Ui(t,e,n){let r=t;for(;e-- >Rn;)r*=r,r%=n;return r}function BN(t,e){if(t===Rn)throw new Error("invert: expected non-zero number");if(e<=Rn)throw new Error("invert: expected positive modulus, got "+e);let n=_n(t,e),r=e,s=Rn,i=an;for(;n!==Rn;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==an)throw new Error("invert: does not exist");return _n(s,e)}function Bte(t){const e=(t-an)/pl;let n,r,s;for(n=t-an,r=0;n%pl===Rn;n/=pl,r++);for(s=pl;s<t&&Mte(s,e,t)!==t-an;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+an)/MC;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+an)/pl;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,an<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Fte(t){if(t%MC===Lte){const e=(t+an)/MC;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%MN===LN){const e=(t-LN)/MN;return function(n,r){const s=n.mul(r,pl),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,pl),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Bte(t)}const zte=(t,e)=>(_n(t,e)&an)===an,qte=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Wte(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=qte.reduce((r,s)=>(r[s]="function",r),e);return LA(t,n)}function Hte(t,e,n){if(n<Rn)throw new Error("invalid exponent, negatives unsupported");if(n===Rn)return t.ONE;if(n===an)return e;let r=t.ONE,s=e;for(;n>Rn;)n&an&&(r=t.mul(r,s)),s=t.sqr(s),n>>=an;return r}function Vte(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function i6(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function o6(t,e,n=!1,r={}){if(t<=Rn)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=i6(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:jte(s),ZERO:Rn,ONE:an,create:c=>_n(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Rn<=c&&c<t},is0:c=>c===Rn,isOdd:c=>(c&an)===an,neg:c=>_n(-c,t),eql:(c,l)=>c===l,sqr:c=>_n(c*c,t),add:(c,l)=>_n(c+l,t),sub:(c,l)=>_n(c-l,t),mul:(c,l)=>_n(c*l,t),pow:(c,l)=>Hte(a,c,l),div:(c,l)=>_n(c*BN(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>BN(c,t),sqrt:r.sqrt||(c=>(o||(o=Fte(t)),o(a,c))),invertBatch:c=>Vte(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?LC(c,i):s6(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?fw(c):Rte(c)}});return Object.freeze(a)}const FN=BigInt(0),vy=BigInt(1);function z1(t,e){const n=e.negate();return t?n:e}function a6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function q1(t,e){a6(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Gte(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Kte(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const W1=new WeakMap,c6=new WeakMap;function H1(t){return c6.get(t)||1}function Yte(t,e){return{constTimeNegate:z1,hasPrecomputes(n){return H1(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>FN;)r&vy&&(s=s.add(i)),i=i.double(),r>>=vy;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=q1(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=q1(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=vy);const g=f,y=f+Math.abs(p)-1,w=h%2!==0,b=p<0;p===0?c=c.add(z1(w,r[g])):a=a.add(z1(b,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=q1(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===FN)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=vy),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=W1.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&W1.set(r,s(i))),i},wNAFCached(n,r,s){const i=H1(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=H1(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){a6(r,e),c6.set(n,r),W1.delete(n)}}}function Qte(t,e,n,r){if(Gte(n,t),Kte(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Dte(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Jte(t){return Wte(t.Fp),LA(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...i6(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ri=BigInt(0),$r=BigInt(1),by=BigInt(2),Zte=BigInt(8),Xte={zip215:!0};function ene(t){const e=Jte(t);return LA(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function tne(t){const e=ene(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=by<<BigInt(a*8)-$r,u=n.create,d=o6(e.n,e.nBitLength),h=e.uvRatio||((A,I)=>{try{return{isValid:!0,value:n.sqrt(A*n.inv(I))}}catch{return{isValid:!1,value:ri}}}),f=e.adjustScalarBytes||(A=>A),p=e.domain||((A,I,j)=>{if(B1("phflag",j),I.length||j)throw new Error("Contexts/pre-hash are not supported");return A});function g(A,I){hf("coordinate "+A,I,ri,l)}function y(A){if(!(A instanceof v))throw new Error("ExtendedPoint expected")}const w=UN((A,I)=>{const{ex:j,ey:N,ez:k}=A,L=A.is0();I==null&&(I=L?Zte:n.inv(k));const W=u(j*I),G=u(N*I),Z=u(k*I);if(L)return{x:ri,y:$r};if(Z!==$r)throw new Error("invZ was invalid");return{x:W,y:G}}),b=UN(A=>{const{a:I,d:j}=e;if(A.is0())throw new Error("bad point: ZERO");const{ex:N,ey:k,ez:L,et:W}=A,G=u(N*N),Z=u(k*k),Q=u(L*L),ee=u(Q*Q),ae=u(G*I),ye=u(Q*u(ae+Z)),$e=u(ee+u(j*u(G*Z)));if(ye!==$e)throw new Error("bad point: equation left != right (1)");const Ae=u(N*k),Me=u(L*W);if(Ae!==Me)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(I,j,N,k){this.ex=I,this.ey=j,this.ez=N,this.et=k,g("x",I),g("y",j),g("z",N),g("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(I){if(I instanceof v)throw new Error("extended point not allowed");const{x:j,y:N}=I||{};return g("x",j),g("y",N),new v(j,N,$r,u(j*N))}static normalizeZ(I){const j=n.invertBatch(I.map(N=>N.ez));return I.map((N,k)=>N.toAffine(j[k])).map(v.fromAffine)}static msm(I,j){return Qte(v,d,I,j)}_setWindowSize(I){x.setWindowSize(this,I)}assertValidity(){b(this)}equals(I){y(I);const{ex:j,ey:N,ez:k}=this,{ex:L,ey:W,ez:G}=I,Z=u(j*G),Q=u(L*k),ee=u(N*G),ae=u(W*k);return Z===Q&&ee===ae}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:I}=e,{ex:j,ey:N,ez:k}=this,L=u(j*j),W=u(N*N),G=u(by*u(k*k)),Z=u(I*L),Q=j+N,ee=u(u(Q*Q)-L-W),ae=Z+W,ye=ae-G,$e=Z-W,Ae=u(ee*ye),Me=u(ae*$e),yt=u(ee*$e),wt=u(ye*ae);return new v(Ae,Me,wt,yt)}add(I){y(I);const{a:j,d:N}=e,{ex:k,ey:L,ez:W,et:G}=this,{ex:Z,ey:Q,ez:ee,et:ae}=I;if(j===BigInt(-1)){const Ut=u((L-k)*(Q+Z)),Zt=u((L+k)*(Q-Z)),Sn=u(Zt-Ut);if(Sn===ri)return this.double();const ei=u(W*by*ae),is=u(G*by*ee),Is=is+ei,fn=Zt+Ut,Xn=is-ei,mo=u(Is*Sn),la=u(fn*Xn),ti=u(Is*Xn),Nu=u(Sn*fn);return new v(mo,la,Nu,ti)}const ye=u(k*Z),$e=u(L*Q),Ae=u(G*N*ae),Me=u(W*ee),yt=u((k+L)*(Z+Q)-ye-$e),wt=Me-Ae,Ye=Me+Ae,Qe=u($e-j*ye),qt=u(yt*wt),St=u(Ye*Qe),xn=u(yt*Qe),ss=u(wt*Ye);return new v(qt,St,ss,xn)}subtract(I){return this.add(I.negate())}wNAF(I){return x.wNAFCached(this,I,v.normalizeZ)}multiply(I){const j=I;hf("scalar",j,$r,r);const{p:N,f:k}=this.wNAF(j);return v.normalizeZ([N,k])[0]}multiplyUnsafe(I,j=v.ZERO){const N=I;return hf("scalar",N,ri,r),N===ri?_:this.is0()||N===$r?this:x.wNAFCachedUnsafe(this,N,v.normalizeZ,j)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return x.unsafeLadder(this,r).is0()}toAffine(I){return w(this,I)}clearCofactor(){const{h:I}=e;return I===$r?this:this.multiplyUnsafe(I)}static fromHex(I,j=!1){const{d:N,a:k}=e,L=n.BYTES;I=Co("pointHex",I,L),B1("zip215",j);const W=I.slice(),G=I[L-1];W[L-1]=G&-129;const Z=fw(W),Q=j?l:n.ORDER;hf("pointHex.y",Z,ri,Q);const ee=u(Z*Z),ae=u(ee-$r),ye=u(N*ee-k);let{isValid:$e,value:Ae}=h(ae,ye);if(!$e)throw new Error("Point.fromHex: invalid y coordinate");const Me=(Ae&$r)===$r,yt=(G&128)!==0;if(!j&&Ae===ri&&yt)throw new Error("Point.fromHex: x=0 and x_0=1");return yt!==Me&&(Ae=u(-Ae)),v.fromAffine({x:Ae,y:Z})}static fromPrivateKey(I){return C(I).point}toRawBytes(){const{x:I,y:j}=this.toAffine(),N=LC(j,n.BYTES);return N[N.length-1]|=I&$r?128:0,N}toHex(){return UA(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,$r,u(e.Gx*e.Gy)),v.ZERO=new v(ri,$r,$r,ri);const{BASE:E,ZERO:_}=v,x=Yte(v,a*8);function S(A){return _n(A,r)}function T(A){return S(fw(A))}function C(A){const I=n.BYTES;A=Co("private key",A,I);const j=Co("hashed private key",i(A),2*I),N=f(j.slice(0,I)),k=j.slice(I,2*I),L=T(N),W=E.multiply(L),G=W.toRawBytes();return{head:N,prefix:k,scalar:L,point:W,pointBytes:G}}function O(A){return C(A).pointBytes}function R(A=new Uint8Array,...I){const j=jN(...I);return T(i(p(j,Co("context",A),!!s)))}function B(A,I,j={}){A=Co("message",A),s&&(A=s(A));const{prefix:N,scalar:k,pointBytes:L}=C(I),W=R(j.context,N,A),G=E.multiply(W).toRawBytes(),Z=R(j.context,G,L,A),Q=S(W+Z*k);hf("signature.s",Q,ri,r);const ee=jN(G,LC(Q,n.BYTES));return Co("result",ee,n.BYTES*2)}const H=Xte;function z(A,I,j,N=H){const{context:k,zip215:L}=N,W=n.BYTES;A=Co("signature",A,2*W),I=Co("message",I),j=Co("publicKey",j,W),L!==void 0&&B1("zip215",L),s&&(I=s(I));const G=fw(A.slice(W,2*W));let Z,Q,ee;try{Z=v.fromHex(j,L),Q=v.fromHex(A.slice(0,W),L),ee=E.multiplyUnsafe(G)}catch{return!1}if(!L&&Z.isSmallOrder())return!1;const ae=R(k,Q.toRawBytes(),Z.toRawBytes(),I);return Q.add(Z.multiplyUnsafe(ae)).subtract(ee).clearCofactor().equals(v.ZERO)}return E._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:B,verify:z,ExtendedPoint:v,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>o(n.BYTES),precompute(A=8,I=v.BASE){return I._setWindowSize(A),I.multiply(BigInt(3)),I}}}}BigInt(0),BigInt(1);const MA=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),zN=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const nne=BigInt(1),qN=BigInt(2);BigInt(3);const rne=BigInt(5),sne=BigInt(8);function ine(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=MA,o=t*t%i*t%i,a=Ui(o,qN,i)*o%i,c=Ui(a,nne,i)*t%i,l=Ui(c,rne,i)*c%i,u=Ui(l,e,i)*l%i,d=Ui(u,n,i)*u%i,h=Ui(d,r,i)*d%i,f=Ui(h,s,i)*h%i,p=Ui(f,s,i)*h%i,g=Ui(p,e,i)*l%i;return{pow_p_5_8:Ui(g,qN,i)*t%i,b2:o}}function one(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function ane(t,e){const n=MA,r=_n(e*e*e,n),s=_n(r*r*e,n),i=ine(t*s).pow_p_5_8;let o=_n(t*r*i,n);const a=_n(e*o*o,n),c=o,l=_n(o*zN,n),u=a===t,d=a===_n(-t,n),h=a===_n(-t*zN,n);return u&&(o=c),(d||h)&&(o=l),zte(o,n)&&(o=_n(-o,n)),{isValid:u||d,value:o}}const cne=o6(MA,void 0,!0),lne={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:cne,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:sne,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Pte,randomBytes:X8,adjustScalarBytes:one,uvRatio:ane},l6=tne(lne),une="EdDSA",dne="JWT",u0=".",Ov="base64url",u6="utf8",d6="utf8",hne=":",fne="did",pne="key",WN="base58btc",gne="z",mne="K36",yne=32;function BA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function h6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?BA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function f6(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=h6(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return BA(n)}function wne(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,b=p.length;w!==b&&p[w]===0;)w++,g++;for(var v=(b-w)*u+1>>>0,E=new Uint8Array(v);w!==b;){for(var _=p[w],x=0,S=v-1;(_!==0||x<y)&&S!==-1;S--,x++)_+=256*E[S]>>>0,E[S]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=x,w++}for(var T=v-y;T!==v&&E[T]===0;)T++;for(var C=c.repeat(g);T<v;++T)C+=t.charAt(E[T]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var _=0,x=b-1;(E!==0||_<w)&&x!==-1;x--,_++)E+=a*v[x]>>>0,v[x]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var S=b-w;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(y+(b-S)),C=y;S!==b;)T[C++]=v[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var vne=wne,bne=vne;const p6=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},_ne=t=>new TextEncoder().encode(t),Ene=t=>new TextDecoder().decode(t);let Cne=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},xne=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return g6(this,e)}},Sne=class{constructor(e){this.decoders=e}or(e){return g6(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const g6=(t,e)=>new Sne({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Ane=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Cne(e,n,r),this.decoder=new xne(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Rv=({name:t,prefix:e,encode:n,decode:r})=>new Ane(t,e,n,r),hm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=bne(n,e);return Rv({prefix:t,name:e,encode:r,decode:i=>p6(s(i))})},Ine=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Tne=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Qn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Rv({prefix:e,name:t,encode(s){return Tne(s,r,n)},decode(s){return Ine(s,r,n,t)}}),Nne=Rv({prefix:"\0",name:"identity",encode:t=>Ene(t),decode:t=>_ne(t)});var Pne=Object.freeze({__proto__:null,identity:Nne});const kne=Qn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var One=Object.freeze({__proto__:null,base2:kne});const Rne=Qn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var $ne=Object.freeze({__proto__:null,base8:Rne});const Dne=hm({prefix:"9",name:"base10",alphabet:"0123456789"});var jne=Object.freeze({__proto__:null,base10:Dne});const Une=Qn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Lne=Qn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Mne=Object.freeze({__proto__:null,base16:Une,base16upper:Lne});const Bne=Qn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Fne=Qn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zne=Qn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),qne=Qn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Wne=Qn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Hne=Qn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Vne=Qn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Gne=Qn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Kne=Qn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Yne=Object.freeze({__proto__:null,base32:Bne,base32upper:Fne,base32pad:zne,base32padupper:qne,base32hex:Wne,base32hexupper:Hne,base32hexpad:Vne,base32hexpadupper:Gne,base32z:Kne});const Qne=hm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Jne=hm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Zne=Object.freeze({__proto__:null,base36:Qne,base36upper:Jne});const Xne=hm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ere=hm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var tre=Object.freeze({__proto__:null,base58btc:Xne,base58flickr:ere});const nre=Qn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rre=Qn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),sre=Qn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ire=Qn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var ore=Object.freeze({__proto__:null,base64:nre,base64pad:rre,base64url:sre,base64urlpad:ire});const m6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),are=m6.reduce((t,e,n)=>(t[n]=e,t),[]),cre=m6.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function lre(t){return t.reduce((e,n)=>(e+=are[n],e),"")}function ure(t){const e=[];for(const n of t){const r=cre[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const dre=Rv({prefix:"🚀",name:"base256emoji",encode:lre,decode:ure});var hre=Object.freeze({__proto__:null,base256emoji:dre}),fre=y6,HN=128,pre=-128,gre=Math.pow(2,31);function y6(t,e,n){e=e||[],n=n||0;for(var r=n;t>=gre;)e[n++]=t&255|HN,t/=128;for(;t&pre;)e[n++]=t&255|HN,t>>>=7;return e[n]=t|0,y6.bytes=n-r+1,e}var mre=BC,yre=128,VN=127;function BC(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw BC.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&VN)<<s:(o&VN)*Math.pow(2,s),s+=7}while(o>=yre);return BC.bytes=i-r,n}var wre=Math.pow(2,7),vre=Math.pow(2,14),bre=Math.pow(2,21),_re=Math.pow(2,28),Ere=Math.pow(2,35),Cre=Math.pow(2,42),xre=Math.pow(2,49),Sre=Math.pow(2,56),Are=Math.pow(2,63),Ire=function(t){return t<wre?1:t<vre?2:t<bre?3:t<_re?4:t<Ere?5:t<Cre?6:t<xre?7:t<Sre?8:t<Are?9:10},Tre={encode:fre,decode:mre,encodingLength:Ire},w6=Tre;const GN=(t,e,n=0)=>(w6.encode(t,e,n),e),KN=t=>w6.encodingLength(t),FC=(t,e)=>{const n=e.byteLength,r=KN(t),s=r+KN(n),i=new Uint8Array(s+n);return GN(t,i,0),GN(n,i,r),i.set(e,s),new Nre(t,n,e,i)};let Nre=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const v6=({name:t,code:e,encode:n})=>new Pre(t,e,n);let Pre=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?FC(this.code,n):n.then(r=>FC(this.code,r))}else throw Error("Unknown type, must be binary type")}};const b6=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),kre=v6({name:"sha2-256",code:18,encode:b6("SHA-256")}),Ore=v6({name:"sha2-512",code:19,encode:b6("SHA-512")});var Rre=Object.freeze({__proto__:null,sha256:kre,sha512:Ore});const _6=0,$re="identity",E6=p6,Dre=t=>FC(_6,E6(t)),jre={code:_6,name:$re,encode:E6,digest:Dre};var Ure=Object.freeze({__proto__:null,identity:jre});new TextEncoder,new TextDecoder;const YN={...Pne,...One,...$ne,...jne,...Mne,...Yne,...Zne,...tre,...ore,...hre};({...Rre,...Ure});function C6(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const QN=C6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),V1=C6("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=h6(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),x6={utf8:QN,"utf-8":QN,hex:YN.base16,latin1:V1,ascii:V1,binary:V1,...YN};function $v(t,e="utf8"){const n=x6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Dh(t,e="utf8"){const n=x6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?BA(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function JN(t){return iu($v(Dh(t,Ov),u6))}function d0(t){return $v(Dh(ra(t),u6),Ov)}function S6(t){const e=Dh(mne,WN),n=gne+$v(f6([e,t]),WN);return[fne,pne,n].join(hne)}function Lre(t){return $v(t,Ov)}function Mre(t){return Dh(t,Ov)}function Bre(t){return Dh([d0(t.header),d0(t.payload)].join(u0),d6)}function Fre(t){return[d0(t.header),d0(t.payload),Lre(t.signature)].join(u0)}function zC(t){const e=t.split(u0),n=JN(e[0]),r=JN(e[1]),s=Mre(e[2]),i=Dh(e.slice(0,2).join(u0),d6);return{header:n,payload:r,signature:s,data:i}}function ZN(t=X8(yne)){const e=l6.getPublicKey(t);return{secretKey:f6([t,e]),publicKey:e}}async function zre(t,e,n,r,s=le.fromMiliseconds(Date.now())){const i={alg:une,typ:dne},o=S6(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=Bre({header:i,payload:c}),u=l6.sign(l,r.secretKey.slice(0,32));return Fre({header:i,payload:c,signature:u})}var XN=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},qre=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Wre=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Hre=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),Vre=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Gre=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Kre=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Yre=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,eP=3,Qre=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Kre]],tP=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Jre(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Gre:typeof navigator<"u"?Xre(navigator.userAgent):tse()}function Zre(t){return t!==""&&Qre.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function Xre(t){var e=Zre(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new Vre;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<eP&&(s=XN(XN([],s,!0),nse(eP-s.length),!0)):s=[];var i=s.join("."),o=ese(t),a=Yre.exec(t);return a&&a[1]?new Hre(n,i,o,a[1]):new qre(n,i,o)}function ese(t){for(var e=0,n=tP.length;e<n;e++){var r=tP[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function tse(){var t=typeof process<"u"&&process.version;return t?new Wre(process.version.slice(1)):null}function nse(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var $t={};Object.defineProperty($t,"__esModule",{value:!0});$t.getLocalStorage=$t.getLocalStorageOrThrow=$t.getCrypto=$t.getCryptoOrThrow=A6=$t.getLocation=$t.getLocationOrThrow=FA=$t.getNavigator=$t.getNavigatorOrThrow=ou=$t.getDocument=$t.getDocumentOrThrow=$t.getFromWindowOrThrow=$t.getFromWindow=void 0;function Su(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}$t.getFromWindow=Su;function jh(t){const e=Su(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}$t.getFromWindowOrThrow=jh;function rse(){return jh("document")}$t.getDocumentOrThrow=rse;function sse(){return Su("document")}var ou=$t.getDocument=sse;function ise(){return jh("navigator")}$t.getNavigatorOrThrow=ise;function ose(){return Su("navigator")}var FA=$t.getNavigator=ose;function ase(){return jh("location")}$t.getLocationOrThrow=ase;function cse(){return Su("location")}var A6=$t.getLocation=cse;function lse(){return jh("crypto")}$t.getCryptoOrThrow=lse;function use(){return Su("crypto")}$t.getCrypto=use;function dse(){return jh("localStorage")}$t.getLocalStorageOrThrow=dse;function hse(){return Su("localStorage")}$t.getLocalStorage=hse;var zA={};Object.defineProperty(zA,"__esModule",{value:!0});var I6=zA.getWindowMetadata=void 0;const nP=$t;function fse(){let t,e;try{t=nP.getDocumentOrThrow(),e=nP.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let w=e.protocol+"//"+e.host;if(y.indexOf("/")===0)w+=y;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");w+=v+"/"+y}h.push(w)}else if(y.indexOf("//")===0){const w=e.protocol+y;h.push(w)}else h.push(y)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}I6=zA.getWindowMetadata=fse;function vg(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function qC(t){return vg(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const T6="2.31.0";let ff={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${T6}`};class au extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof au?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof au&&n.cause.docsPath||n.docsPath,i=(a=ff.getDocsUrl)==null?void 0:a.call(ff,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...ff.version?[`Version: ${ff.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=T6}walk(e){return N6(this,e)}}function N6(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?N6(t.cause,e):e?null:t}class P6 extends au{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Uh(t,{dir:e,size:n=32}={}){return typeof t=="string"?pse(t,{dir:e,size:n}):gse(t,{dir:e,size:n})}function pse(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new P6({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function gse(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new P6({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class mse extends au{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class yse extends au{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Lh(t,{size:e}){if(qC(t)>e)throw new yse({givenSize:qC(t),maxSize:e})}function WC(t,e={}){const{signed:n}=e;e.size&&Lh(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function wse(t,e={}){return Number(WC(t,e))}const vse=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function HC(t,e={}){return typeof t=="number"||typeof t=="bigint"?O6(t,e):typeof t=="string"?Ese(t,e):typeof t=="boolean"?bse(t,e):k6(t,e)}function bse(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Lh(n,{size:e.size}),Uh(n,{size:e.size})):n}function k6(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=vse[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Lh(r,{size:e.size}),Uh(r,{dir:"right",size:e.size})):r}function O6(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new mse({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Uh(a,{size:r}):a}const _se=new TextEncoder;function Ese(t,e={}){const n=_se.encode(t);return k6(n,e)}const Cse=new TextEncoder;function xse(t,e={}){return typeof t=="number"||typeof t=="bigint"?Ase(t,e):typeof t=="boolean"?Sse(t,e):vg(t)?R6(t,e):$6(t,e)}function Sse(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Lh(n,{size:e.size}),Uh(n,{size:e.size})):n}const xo={zero:48,nine:57,A:65,F:70,a:97,f:102};function rP(t){if(t>=xo.zero&&t<=xo.nine)return t-xo.zero;if(t>=xo.A&&t<=xo.F)return t-(xo.A-10);if(t>=xo.a&&t<=xo.f)return t-(xo.a-10)}function R6(t,e={}){let n=t;e.size&&(Lh(n,{size:e.size}),n=Uh(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=rP(r.charCodeAt(a++)),l=rP(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new au(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Ase(t,e){const n=O6(t,e);return R6(n)}function $6(t,e={}){const n=Cse.encode(t);return typeof e.size=="number"?(Lh(n,{size:e.size}),Uh(n,{dir:"right",size:e.size})):n}function D6(t,e){const n=e||"hex",r=jS(vg(t,{strict:!1})?xse(t):t);return n==="bytes"?r:HC(r)}class Ise extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const G1=new Ise(8192);function Tse(t,e){if(G1.has(`${t}.${e}`))return G1.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=D6($6(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return G1.set(`${t}.${e}`,i),i}function Nse(t){const e=D6(`0x${t.substring(4)}`).substring(26);return Tse(`0x${e}`)}async function Pse({hash:t,signature:e}){const n=vg(t)?t:HC(t),{secp256k1:r}=await sn(async()=>{const{secp256k1:o}=await import("./secp256k1-CGWaw0Sf.js");return{secp256k1:o}},__vite__mapDeps([2,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=sP(f);return new r.Signature(WC(l),WC(u)).addRecoveryBit(p)}const o=vg(e)?e:HC(e);if(qC(o)!==65)throw new Error("invalid signature length");const a=wse(`0x${o.slice(130)}`),c=sP(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function sP(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function kse({hash:t,signature:e}){return Nse(await Pse({hash:t,signature:e}))}function Ose(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let E=p-1;(b!==0||v<d)&&E!==-1;E--,v++)b+=256*g[E]>>>0,g[E]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let w=r.repeat(u);for(;y<p;++y)w+=t.charAt(g[y]);return w}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let E=0;for(let _=f-1;(v!==0||E<h)&&_!==-1;_--,E++)v+=n*p[_]>>>0,p[_]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=E,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const y=new Uint8Array(d+(f-g));let w=d;for(;g!==f;)y[w++]=p[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var Rse="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Mh=Ose(Rse);function $se(t){const e=t.length;let n=0,r=0;for(;r<e;){let s=t.charCodeAt(r++);if(s&4294967168)if(!(s&4294965248))n+=2;else{if(s>=55296&&s<=56319&&r<e){const i=t.charCodeAt(r);(i&64512)===56320&&(++r,s=((s&1023)<<10)+(i&1023)+65536)}s&4294901760?n+=4:n+=3}else{n++;continue}}return n}function Dse(t,e,n){const r=t.length;let s=n,i=0;for(;i<r;){let o=t.charCodeAt(i++);if(o&4294967168)if(!(o&4294965248))e[s++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&i<r){const a=t.charCodeAt(i);(a&64512)===56320&&(++i,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[s++]=o>>18&7|240,e[s++]=o>>12&63|128,e[s++]=o>>6&63|128):(e[s++]=o>>12&15|224,e[s++]=o>>6&63|128)}else{e[s++]=o;continue}e[s++]=o&63|128}}const jse=new TextEncoder,Use=50;function Lse(t,e,n){jse.encodeInto(t,e.subarray(n))}function Mse(t,e,n){t.length>Use?Lse(t,e,n):Dse(t,e,n)}const Bse=4096;function j6(t,e,n){let r=e;const s=r+n,i=[];let o="";for(;r<s;){const a=t[r++];if(!(a&128))i.push(a);else if((a&224)===192){const c=t[r++]&63;i.push((a&31)<<6|c)}else if((a&240)===224){const c=t[r++]&63,l=t[r++]&63;i.push((a&31)<<12|c<<6|l)}else if((a&248)===240){const c=t[r++]&63,l=t[r++]&63,u=t[r++]&63;let d=(a&7)<<18|c<<12|l<<6|u;d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|d&1023),i.push(d)}else i.push(a);i.length>=Bse&&(o+=String.fromCharCode(...i),i.length=0)}return i.length>0&&(o+=String.fromCharCode(...i)),o}const Fse=new TextDecoder,zse=200;function qse(t,e,n){const r=t.subarray(e,e+n);return Fse.decode(r)}function Wse(t,e,n){return n>zse?qse(t,e,n):j6(t,e,n)}class _y{constructor(e,n){this.type=e,this.data=n}}class fs extends Error{constructor(e){super(e);const n=Object.create(fs.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:fs.name})}}const pf=4294967295;function Hse(t,e,n){const r=n/4294967296,s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function U6(t,e,n){const r=Math.floor(n/4294967296),s=n;t.setUint32(e,r),t.setUint32(e+4,s)}function L6(t,e){const n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function Vse(t,e){const n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}const Gse=-1,Kse=4294967296-1,Yse=17179869184-1;function Qse({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=Yse)if(e===0&&t<=Kse){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{const n=t/4294967296,r=t&4294967295,s=new Uint8Array(8),i=new DataView(s.buffer);return i.setUint32(0,e<<2|n&3),i.setUint32(4,r),s}else{const n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),U6(r,4,t),n}}function Jse(t){const e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,s=Math.floor(r/1e9);return{sec:n+s,nsec:r-s*1e9}}function Zse(t){if(t instanceof Date){const e=Jse(t);return Qse(e)}else return null}function Xse(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const n=e.getUint32(0),r=e.getUint32(4),s=(n&3)*4294967296+r,i=n>>>2;return{sec:s,nsec:i}}case 12:{const n=L6(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new fs(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function eie(t){const e=Xse(t);return new Date(e.sec*1e3+e.nsec/1e6)}const tie={type:Gse,encode:Zse,decode:eie};class h0{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(tie)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{const s=-1-e;this.builtInEncoders[s]=n,this.builtInDecoders[s]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){const s=this.builtInEncoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=-1-r;return new _y(o,i)}}}for(let r=0;r<this.encoders.length;r++){const s=this.encoders[r];if(s!=null){const i=s(e,n);if(i!=null){const o=r;return new _y(o,i)}}}return e instanceof _y?e:null}decode(e,n,r){const s=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return s?s(e,n,r):new _y(n,e)}}h0.defaultCodec=new h0;function nie(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function VC(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):nie(t)?new Uint8Array(t):Uint8Array.from(t)}const rie=100,sie=2048;let iie=class M6{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??h0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??rie,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??sie,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new M6({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){const n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){const n=new ArrayBuffer(e),r=new Uint8Array(n),s=new DataView(n);r.set(this.bytes),this.view=s,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const r=$se(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),Mse(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){const r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);const r=VC(e);this.writeU8a(r)}encodeArray(e,n){const r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(const s of e)this.doEncode(s,n+1)}countWithoutUndefined(e,n){let r=0;for(const s of n)e[s]!==void 0&&r++;return r}encodeMap(e,n){const r=Object.keys(e);this.sortKeys&&r.sort();const s=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(const i of r){const o=e[i];this.ignoreUndefined&&o===void 0||(this.encodeString(i),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){const r=e.data(this.pos+6),s=r.length;if(s>=4294967296)throw new Error(`Too large extension object: ${s}`);this.writeU8(201),this.writeU32(s),this.writeI8(e.type),this.writeU8a(r);return}const n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),Hse(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),U6(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function oie(t,e){return new iie(e).encodeSharedRef(t)}function K1(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const aie=16,cie=16;class lie{constructor(e=aie,n=cie){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){const s=this.caches[r-1];e:for(const i of s){const o=i.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return i.str}return null}store(e,n){const r=this.caches[e.length-1],s={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=s:r.push(s)}decode(e,n,r){const s=this.find(e,n,r);if(s!=null)return this.hit++,s;this.miss++;const i=j6(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,i),i}}const GC="array",op="map_key",B6="map_value",uie=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new fs("The type of key must be string or number but "+typeof t)};class die{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const n=this.getUninitializedStateFromPool();n.type=GC,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){const n=this.getUninitializedStateFromPool();n.type=op,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===GC){const r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===op||e.type===B6){const r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const gf=-1,qA=new DataView(new ArrayBuffer(0)),hie=new Uint8Array(qA.buffer);try{qA.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const iP=new RangeError("Insufficient data"),fie=new lie;let pie=class F6{constructor(e){this.totalPos=0,this.pos=0,this.view=qA,this.bytes=hie,this.headByte=gf,this.stack=new die,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??h0.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??pf,this.maxBinLength=(e==null?void 0:e.maxBinLength)??pf,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??pf,this.maxMapLength=(e==null?void 0:e.maxMapLength)??pf,this.maxExtLength=(e==null?void 0:e.maxExtLength)??pf,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:fie,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??uie}clone(){return new F6({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=gf,this.stack.reset()}setBuffer(e){const n=VC(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===gf&&!this.hasRemaining(1))this.setBuffer(e);else{const n=this.bytes.subarray(this.pos),r=VC(e),s=new Uint8Array(n.length+r.length);s.set(n),s.set(r,n.length),this.setBuffer(s)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(const a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(c){if(!(c instanceof RangeError))throw c}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}const{headByte:s,pos:i,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${K1(s)} at ${o} (${i} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,s=-1;for await(const i of e){if(n&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(i),r&&(s=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){const s=e-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e<160){const s=e-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else{const s=e-160;n=this.decodeString(s,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){const s=this.lookU8();n=this.decodeString(s,1)}else if(e===218){const s=this.lookU16();n=this.decodeString(s,2)}else if(e===219){const s=this.lookU32();n=this.decodeString(s,4)}else if(e===220){const s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===221){const s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else n=[]}else if(e===222){const s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===223){const s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else n={}}else if(e===196){const s=this.lookU8();n=this.decodeBinary(s,1)}else if(e===197){const s=this.lookU16();n=this.decodeBinary(s,2)}else if(e===198){const s=this.lookU32();n=this.decodeBinary(s,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){const s=this.lookU8();n=this.decodeExtension(s,1)}else if(e===200){const s=this.lookU16();n=this.decodeExtension(s,2)}else if(e===201){const s=this.lookU32();n=this.decodeExtension(s,4)}else throw new fs(`Unrecognized type byte: ${K1(e)}`);this.complete();const r=this.stack;for(;r.length>0;){const s=r.top();if(s.type===GC)if(s.array[s.position]=n,s.position++,s.position===s.size)n=s.array,r.release(s);else continue e;else if(s.type===op){if(n==="__proto__")throw new fs("The key __proto__ is not allowed");s.key=this.mapKeyConverter(n),s.type=B6;continue e}else if(s.map[s.key]=n,s.readCount++,s.readCount===s.size)n=s.map,r.release(s);else{s.key=null,s.type=op;continue e}}return n}}readHeadByte(){return this.headByte===gf&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=gf}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new fs(`Unrecognized array type byte: ${K1(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new fs(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new fs(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){var i;if(e>this.maxStrLength)throw new fs(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw iP;const r=this.pos+n;let s;return this.stateIsMapKey()&&((i=this.keyDecoder)!=null&&i.canBeCached(e))?s=this.keyDecoder.decode(this.bytes,r,e):s=Wse(this.bytes,r,e),this.pos+=n+e,s}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===op:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new fs(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw iP;const r=this.pos+n,s=this.bytes.subarray(r,r+e);return this.pos+=n+e,s}decodeExtension(e,n){if(e>this.maxExtLength)throw new fs(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const r=this.view.getInt8(this.pos+n),s=this.decodeBinary(e,n+1);return this.extensionCodec.decode(s,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=Vse(this.view,this.pos);return this.pos+=8,e}readI64(){const e=L6(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function gie(t,e){return new pie(e).decode(t)}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function mie(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function z6(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function f0(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function WA(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function KC(t){if(!Array.isArray(t))throw new Error("array expected")}function p0(t,e){if(!z6(!0,e))throw new Error(`${t}: array of strings expected`)}function yie(t,e){if(!z6(!1,e))throw new Error(`${t}: array of numbers expected`)}function wie(...t){const e=i=>i,n=(i,o)=>a=>i(o(a)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function vie(t){const e=typeof t=="string"?t.split(""):t,n=e.length;p0("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(KC(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(KC(s),s.map(i=>{f0("alphabet.decode",i);const o=r.get(i);if(o===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return o}))}}function bie(t=""){return f0("join",t),{encode:e=>(p0("join.decode",e),e.join(t)),decode:e=>(f0("join.decode",e),e.split(t))}}function _ie(t,e="="){return WA(t),f0("padding",e),{encode(n){for(p0("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){p0("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const q6=(t,e)=>e===0?t:q6(e,t%e),g0=(t,e)=>t+(e-q6(t,e)),Y1=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function oP(t,e,n,r){if(KC(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(g0(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${g0(e,n)}`);let s=0,i=0;const o=Y1[e],a=Y1[n]-1,c=[];for(const l of t){if(WA(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=n;i-=n)c.push((s>>i-n&a)>>>0);const u=Y1[i];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-i&a,!r&&i>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&i>0&&c.push(s>>>0),c}function Eie(t,e=!1){if(WA(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(g0(8,t)>32||g0(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!mie(n))throw new Error("radix2.encode input should be Uint8Array");return oP(Array.from(n),8,t,!e)},decode:n=>(yie("radix2.decode",n),Uint8Array.from(oP(n,t,8,e)))}}const Cie=wie(Eie(5),vie("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),_ie(5),bie(""));function HA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function W6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?HA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function ap(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=W6(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return HA(n)}function xie(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,b=p.length;w!==b&&p[w]===0;)w++,g++;for(var v=(b-w)*u+1>>>0,E=new Uint8Array(v);w!==b;){for(var _=p[w],x=0,S=v-1;(_!==0||x<y)&&S!==-1;S--,x++)_+=256*E[S]>>>0,E[S]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=x,w++}for(var T=v-y;T!==v&&E[T]===0;)T++;for(var C=c.repeat(g);T<v;++T)C+=t.charAt(E[T]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var _=0,x=b-1;(E!==0||_<w)&&x!==-1;x--,_++)E+=a*v[x]>>>0,v[x]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var S=b-w;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(y+(b-S)),C=y;S!==b;)T[C++]=v[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var Sie=xie,Aie=Sie;const Iie=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Tie=t=>new TextEncoder().encode(t),Nie=t=>new TextDecoder().decode(t);class Pie{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class kie{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return H6(this,e)}}class Oie{constructor(e){this.decoders=e}or(e){return H6(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const H6=(t,e)=>new Oie({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Rie{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Pie(e,n,r),this.decoder=new kie(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Dv=({name:t,prefix:e,encode:n,decode:r})=>new Rie(t,e,n,r),fm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Aie(n,e);return Dv({prefix:t,name:e,encode:r,decode:i=>Iie(s(i))})},$ie=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Die=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Jn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Dv({prefix:e,name:t,encode(s){return Die(s,r,n)},decode(s){return $ie(s,r,n,t)}}),jie=Dv({prefix:"\0",name:"identity",encode:t=>Nie(t),decode:t=>Tie(t)}),Uie=Object.freeze(Object.defineProperty({__proto__:null,identity:jie},Symbol.toStringTag,{value:"Module"})),Lie=Jn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Mie=Object.freeze(Object.defineProperty({__proto__:null,base2:Lie},Symbol.toStringTag,{value:"Module"})),Bie=Jn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Fie=Object.freeze(Object.defineProperty({__proto__:null,base8:Bie},Symbol.toStringTag,{value:"Module"})),zie=fm({prefix:"9",name:"base10",alphabet:"0123456789"}),qie=Object.freeze(Object.defineProperty({__proto__:null,base10:zie},Symbol.toStringTag,{value:"Module"})),Wie=Jn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Hie=Jn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Vie=Object.freeze(Object.defineProperty({__proto__:null,base16:Wie,base16upper:Hie},Symbol.toStringTag,{value:"Module"})),Gie=Jn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Kie=Jn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Yie=Jn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Qie=Jn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Jie=Jn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Zie=Jn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Xie=Jn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eoe=Jn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),toe=Jn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),noe=Object.freeze(Object.defineProperty({__proto__:null,base32:Gie,base32hex:Jie,base32hexpad:Xie,base32hexpadupper:eoe,base32hexupper:Zie,base32pad:Yie,base32padupper:Qie,base32upper:Kie,base32z:toe},Symbol.toStringTag,{value:"Module"})),roe=fm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),soe=fm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ioe=Object.freeze(Object.defineProperty({__proto__:null,base36:roe,base36upper:soe},Symbol.toStringTag,{value:"Module"})),ooe=fm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),aoe=fm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),coe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:ooe,base58flickr:aoe},Symbol.toStringTag,{value:"Module"})),loe=Jn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),uoe=Jn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),doe=Jn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),hoe=Jn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),foe=Object.freeze(Object.defineProperty({__proto__:null,base64:loe,base64pad:uoe,base64url:doe,base64urlpad:hoe},Symbol.toStringTag,{value:"Module"})),V6=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),poe=V6.reduce((t,e,n)=>(t[n]=e,t),[]),goe=V6.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function moe(t){return t.reduce((e,n)=>(e+=poe[n],e),"")}function yoe(t){const e=[];for(const n of t){const r=goe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const woe=Dv({prefix:"🚀",name:"base256emoji",encode:moe,decode:yoe}),voe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:woe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const aP={...Uie,...Mie,...Fie,...qie,...Vie,...noe,...ioe,...coe,...foe,...voe};function G6(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const cP=G6("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Q1=G6("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=W6(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),K6={utf8:cP,"utf-8":cP,hex:aP.base16,latin1:Q1,ascii:Q1,binary:Q1,...aP};function qs(t,e="utf8"){const n=K6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?HA(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function ts(t,e="utf8"){const n=K6[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const boe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},_oe="Input must be an string, Buffer or Uint8Array";function Eoe(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(_oe);return e}function Coe(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function Ey(t){return(4294967296+t).toString(16).substring(1)}function xoe(t,e,n){let r=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)r+=Ey(e[s]).toUpperCase(),r+=" ",r+=Ey(e[s+1]).toUpperCase();else if(n===64)r+=Ey(e[s+1]).toUpperCase(),r+=Ey(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?r+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(r+=" ")}console.log(r)}function Soe(t,e,n){let r=new Date().getTime();const s=new Uint8Array(e);for(let o=0;o<e;o++)s[o]=o%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let o=0;o<n;o++){const a=t(s),c=new Date().getTime(),l=c-r;r=c,console.log("Hashed in "+l+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(l/1e3)*100)/100+" MB PER SECOND")}}var Y6={normalizeInput:Eoe,toHex:Coe,debugPrint:xoe,testSpeed:Soe};const pw=Y6;function Cy(t,e,n){const r=t[e]+t[n];let s=t[e+1]+t[n+1];r>=4294967296&&s++,t[e]=r,t[e+1]=s}function lP(t,e,n,r){let s=t[e]+n;n<0&&(s+=4294967296);let i=t[e+1]+r;s>=4294967296&&i++,t[e]=s,t[e+1]=i}function Q6(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function xa(t,e,n,r,s,i){const o=Mf[s],a=Mf[s+1],c=Mf[i],l=Mf[i+1];Cy(ze,t,e),lP(ze,t,o,a);let u=ze[r]^ze[t],d=ze[r+1]^ze[t+1];ze[r]=d,ze[r+1]=u,Cy(ze,n,r),u=ze[e]^ze[n],d=ze[e+1]^ze[n+1],ze[e]=u>>>24^d<<8,ze[e+1]=d>>>24^u<<8,Cy(ze,t,e),lP(ze,t,c,l),u=ze[r]^ze[t],d=ze[r+1]^ze[t+1],ze[r]=u>>>16^d<<16,ze[r+1]=d>>>16^u<<16,Cy(ze,n,r),u=ze[e]^ze[n],d=ze[e+1]^ze[n+1],ze[e]=d>>>31^u<<1,ze[e+1]=u>>>31^d<<1}const J6=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Aoe=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],rr=new Uint8Array(Aoe.map(function(t){return t*2})),ze=new Uint32Array(32),Mf=new Uint32Array(32);function Z6(t,e){let n=0;for(n=0;n<16;n++)ze[n]=t.h[n],ze[n+16]=J6[n];for(ze[24]=ze[24]^t.t,ze[25]=ze[25]^t.t/4294967296,e&&(ze[28]=~ze[28],ze[29]=~ze[29]),n=0;n<32;n++)Mf[n]=Q6(t.b,4*n);for(n=0;n<12;n++)xa(0,8,16,24,rr[n*16+0],rr[n*16+1]),xa(2,10,18,26,rr[n*16+2],rr[n*16+3]),xa(4,12,20,28,rr[n*16+4],rr[n*16+5]),xa(6,14,22,30,rr[n*16+6],rr[n*16+7]),xa(0,10,20,30,rr[n*16+8],rr[n*16+9]),xa(2,12,22,24,rr[n*16+10],rr[n*16+11]),xa(4,14,16,26,rr[n*16+12],rr[n*16+13]),xa(6,8,18,28,rr[n*16+14],rr[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^ze[n]^ze[n+16]}const Sa=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function X6(t,e,n,r){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Sa.fill(0),Sa[0]=t,e&&(Sa[1]=e.length),Sa[2]=1,Sa[3]=1,n&&Sa.set(n,32),r&&Sa.set(r,48);for(let i=0;i<16;i++)s.h[i]=J6[i]^Q6(Sa,i*4);return e&&(VA(s,e),s.c=128),s}function VA(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,Z6(t,!1),t.c=0),t.b[t.c++]=e[n]}function ej(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;Z6(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function tj(t,e,n,r,s){n=n||64,t=pw.normalizeInput(t),r&&(r=pw.normalizeInput(r)),s&&(s=pw.normalizeInput(s));const i=X6(n,e,r,s);return VA(i,t),ej(i)}function Ioe(t,e,n,r,s){const i=tj(t,e,n,r,s);return pw.toHex(i)}var Toe={blake2b:tj,blake2bHex:Ioe,blake2bInit:X6,blake2bUpdate:VA,blake2bFinal:ej};const nj=Y6;function Noe(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Aa(t,e,n,r,s,i){ut[t]=ut[t]+ut[e]+s,ut[r]=xy(ut[r]^ut[t],16),ut[n]=ut[n]+ut[r],ut[e]=xy(ut[e]^ut[n],12),ut[t]=ut[t]+ut[e]+i,ut[r]=xy(ut[r]^ut[t],8),ut[n]=ut[n]+ut[r],ut[e]=xy(ut[e]^ut[n],7)}function xy(t,e){return t>>>e^t<<32-e}const rj=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),sr=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),ut=new Uint32Array(16),Ln=new Uint32Array(16);function sj(t,e){let n=0;for(n=0;n<8;n++)ut[n]=t.h[n],ut[n+8]=rj[n];for(ut[12]^=t.t,ut[13]^=t.t/4294967296,e&&(ut[14]=~ut[14]),n=0;n<16;n++)Ln[n]=Noe(t.b,4*n);for(n=0;n<10;n++)Aa(0,4,8,12,Ln[sr[n*16+0]],Ln[sr[n*16+1]]),Aa(1,5,9,13,Ln[sr[n*16+2]],Ln[sr[n*16+3]]),Aa(2,6,10,14,Ln[sr[n*16+4]],Ln[sr[n*16+5]]),Aa(3,7,11,15,Ln[sr[n*16+6]],Ln[sr[n*16+7]]),Aa(0,5,10,15,Ln[sr[n*16+8]],Ln[sr[n*16+9]]),Aa(1,6,11,12,Ln[sr[n*16+10]],Ln[sr[n*16+11]]),Aa(2,7,8,13,Ln[sr[n*16+12]],Ln[sr[n*16+13]]),Aa(3,4,9,14,Ln[sr[n*16+14]],Ln[sr[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=ut[n]^ut[n+8]}function ij(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(rj),b:new Uint8Array(64),c:0,t:0,outlen:t};return r.h[0]^=16842752^n<<8^t,n>0&&(GA(r,e),r.c=64),r}function GA(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,sj(t,!1),t.c=0),t.b[t.c++]=e[n]}function oj(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;sj(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function aj(t,e,n){n=n||32,t=nj.normalizeInput(t);const r=ij(n,e);return GA(r,t),oj(r)}function Poe(t,e,n){const r=aj(t,e,n);return nj.toHex(r)}var koe={blake2s:aj,blake2sHex:Poe,blake2sInit:ij,blake2sUpdate:GA,blake2sFinal:oj};const mf=Toe,yf=koe;var Ooe={blake2b:mf.blake2b,blake2bHex:mf.blake2bHex,blake2bInit:mf.blake2bInit,blake2bUpdate:mf.blake2bUpdate,blake2bFinal:mf.blake2bFinal,blake2s:yf.blake2s,blake2sHex:yf.blake2sHex,blake2sInit:yf.blake2sInit,blake2sUpdate:yf.blake2sUpdate,blake2sFinal:yf.blake2sFinal},Roe={};const $oe=":";function Md(t){const[e,n]=t.split($oe);return{namespace:e,reference:n}}function cj(t,e){return t.includes(":")?[t]:e.chains||[]}var Doe=Object.defineProperty,joe=Object.defineProperties,Uoe=Object.getOwnPropertyDescriptors,uP=Object.getOwnPropertySymbols,Loe=Object.prototype.hasOwnProperty,Moe=Object.prototype.propertyIsEnumerable,dP=(t,e,n)=>e in t?Doe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hP=(t,e)=>{for(var n in e||(e={}))Loe.call(e,n)&&dP(t,n,e[n]);if(uP)for(var n of uP(e))Moe.call(e,n)&&dP(t,n,e[n]);return t},Boe=(t,e)=>joe(t,Uoe(e));const Foe="ReactNative",ms={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},zoe="js";function m0(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Yc(){return!ou()&&!!FA()&&navigator.product===Foe}function qoe(){return Yc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Woe(){return Yc()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Bh(){return!m0()&&!!FA()&&!!ou()}function pm(){return Yc()?ms.reactNative:m0()?ms.node:Bh()?ms.browser:ms.unknown}function fP(){var t;try{return Yc()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Hoe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function Voe(t){var e,n;const r=lj();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Boe(hP(hP({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function lj(){return I6()||{name:"",description:"",url:"",icons:[""]}}function Goe(){if(pm()===ms.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=Jre();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Koe(){var t;const e=pm();return e===ms.browser?[e,((t=A6())==null?void 0:t.host)||"unknown"].join(":"):e}function uj(t,e,n){const r=Goe(),s=Koe();return[[t,e].join("-"),[zoe,n].join("-"),r,s].join("/")}function Yoe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=uj(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=Hoe(l[1]||"",d);return l[0]+"?"+h}function xl(t,e){return t.filter(n=>e.includes(n)).length===t.length}function YC(t){return Object.fromEntries(t.entries())}function QC(t){return new Map(Object.entries(t))}function dl(t=le.FIVE_MINUTES,e){const n=le.toMiliseconds(t||le.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function hc(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function dj(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Qoe(t){return dj("topic",t)}function Joe(t){return dj("id",t)}function hj(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function wn(t,e){return le.fromMiliseconds(Date.now()+le.toMiliseconds(t))}function Fa(t){return Date.now()>=le.toMiliseconds(t)}function pt(t,e){return`${t}${e?`:${e}`:""}`}function ao(t=[],e=[]){return[...new Set([...t,...e])]}async function Zoe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=Xoe(i,t,e),a=pm();if(a===ms.browser){if(!((r=ou())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}eae(o)}else a===ms.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function Xoe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${sae(r,!0)}`}else s=`${s}/wc?${r}`;return s}function eae(t){let e="_self";rae()?e="_top":(nae()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function tae(t,e){let n="";try{if(Bh()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function pP(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function gP(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function KA(){return typeof process<"u"&&Roe.IS_VITEST==="true"}function nae(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function rae(){try{return window.self!==window.top}catch{return!1}}function sae(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function fj(t){return Buffer.from(t,"base64").toString("utf-8")}function iae(t){return new Promise(e=>setTimeout(e,t))}const Sy=BigInt(2**32-1),mP=BigInt(32);function pj(t,e=!1){return e?{h:Number(t&Sy),l:Number(t>>mP&Sy)}:{h:Number(t>>mP&Sy)|0,l:Number(t&Sy)|0}}function gj(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=pj(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const yP=(t,e,n)=>t>>>n,wP=(t,e,n)=>t<<32-n|e>>>n,za=(t,e,n)=>t>>>n|e<<32-n,qa=(t,e,n)=>t<<32-n|e>>>n,Bf=(t,e,n)=>t<<64-n|e>>>n-32,Ff=(t,e,n)=>t>>>n-32|e<<64-n,oae=(t,e)=>e,aae=(t,e)=>t,cae=(t,e,n)=>t<<n|e>>>32-n,lae=(t,e,n)=>e<<n|t>>>32-n,uae=(t,e,n)=>e<<n-32|t>>>64-n,dae=(t,e,n)=>t<<n-32|e>>>64-n;function ui(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const YA=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),QA=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,hae=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),fae=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,pae=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),gae=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,qu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function JA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function sa(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ks(t,...e){if(!JA(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ZA(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");sa(t.outputLen),sa(t.blockLen)}function Bc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function XA(t,e){Ks(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function bg(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Ys(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function J1(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Li(t,e){return t<<32-e|t>>>e}const mj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function yj(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const No=mj?t=>t:t=>yj(t);function mae(t){for(let e=0;e<t.length;e++)t[e]=yj(t[e]);return t}const Wa=mj?t=>t:mae,wj=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",yae=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _g(t){if(Ks(t),wj)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=yae[t[n]];return e}const So={_0:48,_9:57,A:65,F:70,a:97,f:102};function vP(t){if(t>=So._0&&t<=So._9)return t-So._0;if(t>=So.A&&t<=So.F)return t-(So.A-10);if(t>=So.a&&t<=So.f)return t-(So.a-10)}function eI(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(wj)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=vP(t.charCodeAt(i)),a=vP(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function wae(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Si(t){return typeof t=="string"&&(t=wae(t)),Ks(t),t}function Sl(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Ks(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let jv=class{};function gm(t){const e=r=>t().update(Si(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function vae(t){const e=(r,s)=>t(s).update(Si(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Fh(t=32){if(qu&&typeof qu.getRandomValues=="function")return qu.getRandomValues(new Uint8Array(t));if(qu&&typeof qu.randomBytes=="function")return Uint8Array.from(qu.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const bae=BigInt(0),wf=BigInt(1),_ae=BigInt(2),Eae=BigInt(7),Cae=BigInt(256),xae=BigInt(113),vj=[],bj=[],_j=[];for(let t=0,e=wf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],vj.push(2*(5*r+n)),bj.push((t+1)*(t+2)/2%64);let s=bae;for(let i=0;i<7;i++)e=(e<<wf^(e>>Eae)*xae)%Cae,e&_ae&&(s^=wf<<(wf<<BigInt(i))-wf);_j.push(s)}const Ej=gj(_j,!0),Sae=Ej[0],Aae=Ej[1],bP=(t,e,n)=>n>32?uae(t,e,n):cae(t,e,n),_P=(t,e,n)=>n>32?dae(t,e,n):lae(t,e,n);function Iae(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=bP(l,u,1)^n[a],h=_P(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=bj[o],c=bP(s,i,a),l=_P(s,i,a),u=vj[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Sae[r],t[1]^=Aae[r]}Ys(n)}let Tae=class Cj extends jv{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,sa(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=bg(this.state)}clone(){return this._cloneInto()}keccak(){Wa(this.state32),Iae(this.state32,this.rounds),Wa(this.state32),this.posOut=0,this.pos=0}update(e){Bc(this),e=Si(e),Ks(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Bc(this,!1),Ks(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return sa(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(XA(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Ys(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Cj(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Nae=(t,e,n)=>gm(()=>new Tae(e,t,n)),Pae=Nae(1,136,256/8);function kae(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Oae(t,e,n){return t&e^~t&n}function Rae(t,e,n){return t&e^t&n^e&n}let xj=class extends jv{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=J1(this.buffer)}update(e){Bc(this),e=Si(e),Ks(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=J1(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Bc(this),XA(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Ys(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;kae(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=J1(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}};const Ia=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ir=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),or=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),$ae=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ta=new Uint32Array(64);let Dae=class extends xj{constructor(e=32){super(64,e,8,!1),this.A=Ia[0]|0,this.B=Ia[1]|0,this.C=Ia[2]|0,this.D=Ia[3]|0,this.E=Ia[4]|0,this.F=Ia[5]|0,this.G=Ia[6]|0,this.H=Ia[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Ta[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Ta[d-15],f=Ta[d-2],p=Li(h,7)^Li(h,18)^h>>>3,g=Li(f,17)^Li(f,19)^f>>>10;Ta[d]=g+Ta[d-7]+p+Ta[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Li(a,6)^Li(a,11)^Li(a,25),f=u+h+Oae(a,c,l)+$ae[d]+Ta[d]|0,p=(Li(r,2)^Li(r,13)^Li(r,22))+Rae(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Ys(Ta)}destroy(){this.set(0,0,0,0,0,0,0,0),Ys(this.buffer)}};const Sj=gj(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),jae=Sj[0],Uae=Sj[1],Na=new Uint32Array(80),Pa=new Uint32Array(80);let tI=class extends xj{constructor(e=64){super(128,e,16,!1),this.Ah=or[0]|0,this.Al=or[1]|0,this.Bh=or[2]|0,this.Bl=or[3]|0,this.Ch=or[4]|0,this.Cl=or[5]|0,this.Dh=or[6]|0,this.Dl=or[7]|0,this.Eh=or[8]|0,this.El=or[9]|0,this.Fh=or[10]|0,this.Fl=or[11]|0,this.Gh=or[12]|0,this.Gl=or[13]|0,this.Hh=or[14]|0,this.Hl=or[15]|0}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)Na[v]=e.getUint32(n),Pa[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const E=Na[v-15]|0,_=Pa[v-15]|0,x=za(E,_,1)^za(E,_,8)^yP(E,_,7),S=qa(E,_,1)^qa(E,_,8)^wP(E,_,7),T=Na[v-2]|0,C=Pa[v-2]|0,O=za(T,C,19)^Bf(T,C,61)^yP(T,C,6),R=qa(T,C,19)^Ff(T,C,61)^wP(T,C,6),B=hae(S,R,Pa[v-7],Pa[v-16]),H=fae(B,x,O,Na[v-7],Na[v-16]);Na[v]=H|0,Pa[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:w,Hl:b}=this;for(let v=0;v<80;v++){const E=za(d,h,14)^za(d,h,18)^Bf(d,h,41),_=qa(d,h,14)^qa(d,h,18)^Ff(d,h,41),x=d&f^~d&g,S=h&p^~h&y,T=pae(b,_,S,Uae[v],Pa[v]),C=gae(T,w,E,x,jae[v],Na[v]),O=T|0,R=za(r,s,28)^Bf(r,s,34)^Bf(r,s,39),B=qa(r,s,28)^Ff(r,s,34)^Ff(r,s,39),H=r&i^r&a^i&a,z=s&o^s&c^o&c;w=g|0,b=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=ui(l|0,u|0,C|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const A=YA(O,B,z);r=QA(A,C,R,H),s=A|0}({h:r,l:s}=ui(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ui(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=ui(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=ui(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=ui(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=ui(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=ui(this.Gh|0,this.Gl|0,g|0,y|0),{h:w,l:b}=ui(this.Hh|0,this.Hl|0,w|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,w,b)}roundClean(){Ys(Na,Pa)}destroy(){Ys(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Lae=class extends tI{constructor(){super(48),this.Ah=ir[0]|0,this.Al=ir[1]|0,this.Bh=ir[2]|0,this.Bl=ir[3]|0,this.Ch=ir[4]|0,this.Cl=ir[5]|0,this.Dh=ir[6]|0,this.Dl=ir[7]|0,this.Eh=ir[8]|0,this.El=ir[9]|0,this.Fh=ir[10]|0,this.Fl=ir[11]|0,this.Gh=ir[12]|0,this.Gl=ir[13]|0,this.Hh=ir[14]|0,this.Hl=ir[15]|0}};const ar=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);let Mae=class extends tI{constructor(){super(32),this.Ah=ar[0]|0,this.Al=ar[1]|0,this.Bh=ar[2]|0,this.Bl=ar[3]|0,this.Ch=ar[4]|0,this.Cl=ar[5]|0,this.Dh=ar[6]|0,this.Dl=ar[7]|0,this.Eh=ar[8]|0,this.El=ar[9]|0,this.Fh=ar[10]|0,this.Fl=ar[11]|0,this.Gh=ar[12]|0,this.Gl=ar[13]|0,this.Hh=ar[14]|0,this.Hl=ar[15]|0}};const Uv=gm(()=>new Dae),Bae=gm(()=>new tI),Fae=gm(()=>new Lae),zae=gm(()=>new Mae),qae=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),yn=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ge=new Uint32Array(32);function ka(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ge[2*t],l=ge[2*t+1],u=ge[2*e],d=ge[2*e+1],h=ge[2*n],f=ge[2*n+1],p=ge[2*r],g=ge[2*r+1],y=YA(c,u,o);l=QA(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:oae(g,p),Dl:aae(g)},{h:f,l:h}=ui(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:za(d,u,24),Bl:qa(d,u,24)},ge[2*t]=c,ge[2*t+1]=l,ge[2*e]=u,ge[2*e+1]=d,ge[2*n]=h,ge[2*n+1]=f,ge[2*r]=p,ge[2*r+1]=g}function Oa(t,e,n,r,s,i){const o=s[i],a=s[i+1];let c=ge[2*t],l=ge[2*t+1],u=ge[2*e],d=ge[2*e+1],h=ge[2*n],f=ge[2*n+1],p=ge[2*r],g=ge[2*r+1],y=YA(c,u,o);l=QA(y,l,d,a),c=y|0,{Dh:g,Dl:p}={Dh:g^l,Dl:p^c},{Dh:g,Dl:p}={Dh:za(g,p,16),Dl:qa(g,p,16)},{h:f,l:h}=ui(f,h,g,p),{Bh:d,Bl:u}={Bh:d^f,Bl:u^h},{Bh:d,Bl:u}={Bh:Bf(d,u,63),Bl:Ff(d,u,63)},ge[2*t]=c,ge[2*t+1]=l,ge[2*e]=u,ge[2*e+1]=d,ge[2*n]=h,ge[2*n+1]=f,ge[2*r]=p,ge[2*r+1]=g}function Wae(t,e={},n,r,s){if(sa(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:o,personalization:a}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(o!==void 0&&o.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==s)throw new Error("personalization must be undefined or "+s)}class Hae extends jv{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,sa(e),sa(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=bg(this.buffer)}update(e){Bc(this),e=Si(e),Ks(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<i;){this.pos===n&&(Wa(s),this.compress(s,0,!1),Wa(s),this.pos=0);const l=Math.min(n-this.pos,i-c),u=o+c;if(l===n&&!(u%4)&&c+l<i){const d=new Uint32Array(a,u,Math.floor((i-c)/4));Wa(d);for(let h=0;c+n<i;h+=s.length,c+=n)this.length+=n,this.compress(d,h,!1);Wa(d);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Bc(this),XA(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,Ys(this.buffer.subarray(n)),Wa(r),this.compress(r,0,!0),Wa(r);const s=bg(e);this.get().forEach((i,o)=>s[o]=No(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class Vae extends Hae{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=yn[0]|0,this.v0h=yn[1]|0,this.v1l=yn[2]|0,this.v1h=yn[3]|0,this.v2l=yn[4]|0,this.v2h=yn[5]|0,this.v3l=yn[6]|0,this.v3h=yn[7]|0,this.v4l=yn[8]|0,this.v4h=yn[9]|0,this.v5l=yn[10]|0,this.v5h=yn[11]|0,this.v6l=yn[12]|0,this.v6h=yn[13]|0,this.v7l=yn[14]|0,this.v7h=yn[15]|0,Wae(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,o=0;if(r!==void 0&&(r=Si(r),o=r.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,i!==void 0){i=Si(i);const a=bg(i);this.v4l^=No(a[0]),this.v4h^=No(a[1]),this.v5l^=No(a[2]),this.v5h^=No(a[3])}if(s!==void 0){s=Si(s);const a=bg(s);this.v6l^=No(a[0]),this.v6h^=No(a[1]),this.v7l^=No(a[2]),this.v7h^=No(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:o,v3l:a,v3h:c,v4l:l,v4h:u,v5l:d,v5h:h,v6l:f,v6h:p,v7l:g,v7h:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=o|0,this.v3l=a|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=d|0,this.v5h=h|0,this.v6l=f|0,this.v6h=p|0,this.v7l=g|0,this.v7h=y|0}compress(e,n,r){this.get().forEach((c,l)=>ge[l]=c),ge.set(yn,16);let{h:s,l:i}=pj(BigInt(this.length));ge[24]=yn[8]^i,ge[25]=yn[9]^s,r&&(ge[28]=~ge[28],ge[29]=~ge[29]);let o=0;const a=qae;for(let c=0;c<12;c++)ka(0,4,8,12,e,n+2*a[o++]),Oa(0,4,8,12,e,n+2*a[o++]),ka(1,5,9,13,e,n+2*a[o++]),Oa(1,5,9,13,e,n+2*a[o++]),ka(2,6,10,14,e,n+2*a[o++]),Oa(2,6,10,14,e,n+2*a[o++]),ka(3,7,11,15,e,n+2*a[o++]),Oa(3,7,11,15,e,n+2*a[o++]),ka(0,5,10,15,e,n+2*a[o++]),Oa(0,5,10,15,e,n+2*a[o++]),ka(1,6,11,12,e,n+2*a[o++]),Oa(1,6,11,12,e,n+2*a[o++]),ka(2,7,8,13,e,n+2*a[o++]),Oa(2,7,8,13,e,n+2*a[o++]),ka(3,4,9,14,e,n+2*a[o++]),Oa(3,4,9,14,e,n+2*a[o++]);this.v0l^=ge[0]^ge[16],this.v0h^=ge[1]^ge[17],this.v1l^=ge[2]^ge[18],this.v1h^=ge[3]^ge[19],this.v2l^=ge[4]^ge[20],this.v2h^=ge[5]^ge[21],this.v3l^=ge[6]^ge[22],this.v3h^=ge[7]^ge[23],this.v4l^=ge[8]^ge[24],this.v4h^=ge[9]^ge[25],this.v5l^=ge[10]^ge[26],this.v5h^=ge[11]^ge[27],this.v6l^=ge[12]^ge[28],this.v6h^=ge[13]^ge[29],this.v7l^=ge[14]^ge[30],this.v7h^=ge[15]^ge[31],Ys(ge)}destroy(){this.destroyed=!0,Ys(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Gae=vae(t=>new Vae(t)),Kae="https://rpc.walletconnect.org/v1";function Aj(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Pae(n)).toString("hex")}async function Yae(t,e,n,r,s,i){switch(n.t){case"eip191":return await Qae(t,e,n.s);case"eip1271":return await Jae(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Qae(t,e,n){return(await kse({hash:Aj(e),signature:n})).toLowerCase()===t.toLowerCase()}async function Jae(t,e,n,r,s,i){const o=Md(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l=n.substring(2),u=(l.length/2).toString(16).padStart(64,"0"),d=(e.startsWith("0x")?e:Aj(e)).substring(2),h=a+d+c+u+l,f=await fetch(`${i||Kae}/?chainId=${r}&projectId=${s}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Zae(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Zae(){return Date.now()+Math.floor(Math.random()*1e3)}function Xae(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return Mh.encode(i)}function ece(t){const e=new Uint8Array(Buffer.from(t,"base64")),n=Array.from("TransactionData::").map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);r.set(n),r.set(e,n.length);const s=Gae(r,{dkLen:32});return Mh.encode(s)}function EP(t){const e=new Uint8Array(Uv(tce(t)));return Mh.encode(e)}function tce(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function CP(t){const e=Buffer.from(t,"base64"),n=gie(e).txn;if(!n)throw new Error("Invalid signed transaction: missing 'txn' field");const r=oie(n),s=Buffer.from("TX"),i=Buffer.concat([s,Buffer.from(r)]),o=zae(i);return Cie.encode(o).replace(/=+$/,"")}function Z1(t){const e=[];let n=BigInt(t);for(;n>=BigInt(128);)e.push(Number(n&BigInt(127)|BigInt(128))),n>>=BigInt(7);return e.push(Number(n)),Buffer.from(e)}function nce(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),n=Buffer.from(t.signed.authInfoBytes,"base64"),r=Buffer.from(t.signature.signature,"base64"),s=[];s.push(Buffer.from([10])),s.push(Z1(e.length)),s.push(e),s.push(Buffer.from([18])),s.push(Z1(n.length)),s.push(n),s.push(Buffer.from([26])),s.push(Z1(r.length)),s.push(r);const i=Buffer.concat(s),o=Uv(i);return Buffer.from(o).toString("hex").toUpperCase()}var rce=Object.defineProperty,sce=Object.defineProperties,ice=Object.getOwnPropertyDescriptors,xP=Object.getOwnPropertySymbols,oce=Object.prototype.hasOwnProperty,ace=Object.prototype.propertyIsEnumerable,SP=(t,e,n)=>e in t?rce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cce=(t,e)=>{for(var n in e||(e={}))oce.call(e,n)&&SP(t,n,e[n]);if(xP)for(var n of xP(e))ace.call(e,n)&&SP(t,n,e[n]);return t},lce=(t,e)=>sce(t,ice(e));const uce="did:pkh:",nI=t=>t==null?void 0:t.split(":"),dce=t=>{const e=t&&nI(t);if(e)return t.includes(uce)?e[3]:e[1]},JC=t=>{const e=t&&nI(t);if(e)return e[2]+":"+e[3]},y0=t=>{const e=t&&nI(t);if(e)return e.pop()};async function AP(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=Ij(s,s.iss),o=y0(s.iss);return await Yae(o,i,r,JC(s.iss),n)}const Ij=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=y0(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${dce(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=gw(t.resources);if(p){const g=Eg(p);s=bce(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function hce(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function fce(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function cu(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function pce(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:gce(e,n,r)}}}function gce(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function Tj(t){return cu(t),`urn:recap:${hce(t).replace(/=/g,"")}`}function Eg(t){const e=fce(t.replace("urn:recap:",""));return cu(e),e}function mce(t,e,n){const r=pce(t,e,n);return Tj(r)}function yce(t){return t&&t.includes("urn:recap:")}function wce(t,e){const n=Eg(t),r=Eg(e),s=vce(n,r);return Tj(s)}function vce(t,e){cu(t),cu(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=lce(cce({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function bce(t="",e){cu(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function IP(t){var e;const n=Eg(t);cu(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function TP(t){const e=Eg(t);cu(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function gw(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return yce(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function Nj(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ZC(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function X1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Vr(t,...e){if(!Nj(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function NP(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _ce(t,e){Vr(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Tc(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function mh(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ece(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const Cce=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function xce(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function XC(t){if(typeof t=="string")t=xce(t);else if(Nj(t))t=ex(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Sce(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Ace(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Ice=(t,e)=>{function n(r,...s){if(Vr(r),!Cce)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Vr(l):Vr(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Vr(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Vr(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Vr(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Vr(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function PP(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Nce(e))throw new Error("invalid output, must be aligned");return e}function kP(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Tce(t,e,n){ZC(n);const r=new Uint8Array(16),s=Ece(r);return kP(s,0,BigInt(e),n),kP(s,8,BigInt(t),n),r}function Nce(t){return t.byteOffset%4===0}function ex(t){return Uint8Array.from(t)}const Pj=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Pce=Pj("expand 16-byte k"),kce=Pj("expand 32-byte k"),Oce=Tc(Pce),Rce=Tc(kce);function ct(t,e){return t<<e|t>>>32-e}function tx(t){return t.byteOffset%4===0}const Ay=64,$ce=16,kj=2**32-1,OP=new Uint32Array;function Dce(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(Ay),u=Tc(l),d=tx(s)&&tx(i),h=d?Tc(s):OP,f=d?Tc(i):OP;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=kj)throw new Error("arx: counter overflow");const g=Math.min(Ay,c-p);if(d&&g===Ay){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let w=0,b;w<$ce;w++)b=y+w,f[b]=h[b]^u[w];p+=Ay;continue}for(let y=0,w;y<g;y++)w=p+y,i[w]=s[w]^l[y];p+=g}}function jce(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Sce({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return X1(s),X1(o),ZC(i),ZC(n),(a,c,l,u,d=0)=>{Vr(a),Vr(c),Vr(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Vr(u),X1(d),d<0||d>=kj)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=ex(a)),y=Rce;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=Oce,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);tx(c)||f.push(c=ex(c));const w=Tc(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,w,Tc(c.subarray(0,16)),w),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const E=new Uint8Array(12);E.set(c,i?0:12-c.length),c=E,f.push(c)}const v=Tc(c);return Dce(t,y,w,v,l,u,d,o),mh(...f),u}}const Mn=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Uce{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=XC(e),Vr(e,32);const n=Mn(e,0),r=Mn(e,2),s=Mn(e,4),i=Mn(e,6),o=Mn(e,8),a=Mn(e,10),c=Mn(e,12),l=Mn(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Mn(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],y=o[9],w=Mn(e,n+0),b=Mn(e,n+2),v=Mn(e,n+4),E=Mn(e,n+6),_=Mn(e,n+8),x=Mn(e,n+10),S=Mn(e,n+12),T=Mn(e,n+14);let C=i[0]+(w&8191),O=i[1]+((w>>>13|b<<3)&8191),R=i[2]+((b>>>10|v<<6)&8191),B=i[3]+((v>>>7|E<<9)&8191),H=i[4]+((E>>>4|_<<12)&8191),z=i[5]+(_>>>1&8191),A=i[6]+((_>>>14|x<<2)&8191),I=i[7]+((x>>>11|S<<5)&8191),j=i[8]+((S>>>8|T<<8)&8191),N=i[9]+(T>>>5|s),k=0,L=k+C*a+O*(5*y)+R*(5*g)+B*(5*p)+H*(5*f);k=L>>>13,L&=8191,L+=z*(5*h)+A*(5*d)+I*(5*u)+j*(5*l)+N*(5*c),k+=L>>>13,L&=8191;let W=k+C*c+O*a+R*(5*y)+B*(5*g)+H*(5*p);k=W>>>13,W&=8191,W+=z*(5*f)+A*(5*h)+I*(5*d)+j*(5*u)+N*(5*l),k+=W>>>13,W&=8191;let G=k+C*l+O*c+R*a+B*(5*y)+H*(5*g);k=G>>>13,G&=8191,G+=z*(5*p)+A*(5*f)+I*(5*h)+j*(5*d)+N*(5*u),k+=G>>>13,G&=8191;let Z=k+C*u+O*l+R*c+B*a+H*(5*y);k=Z>>>13,Z&=8191,Z+=z*(5*g)+A*(5*p)+I*(5*f)+j*(5*h)+N*(5*d),k+=Z>>>13,Z&=8191;let Q=k+C*d+O*u+R*l+B*c+H*a;k=Q>>>13,Q&=8191,Q+=z*(5*y)+A*(5*g)+I*(5*p)+j*(5*f)+N*(5*h),k+=Q>>>13,Q&=8191;let ee=k+C*h+O*d+R*u+B*l+H*c;k=ee>>>13,ee&=8191,ee+=z*a+A*(5*y)+I*(5*g)+j*(5*p)+N*(5*f),k+=ee>>>13,ee&=8191;let ae=k+C*f+O*h+R*d+B*u+H*l;k=ae>>>13,ae&=8191,ae+=z*c+A*a+I*(5*y)+j*(5*g)+N*(5*p),k+=ae>>>13,ae&=8191;let ye=k+C*p+O*f+R*h+B*d+H*u;k=ye>>>13,ye&=8191,ye+=z*l+A*c+I*a+j*(5*y)+N*(5*g),k+=ye>>>13,ye&=8191;let $e=k+C*g+O*p+R*f+B*h+H*d;k=$e>>>13,$e&=8191,$e+=z*u+A*l+I*c+j*a+N*(5*y),k+=$e>>>13,$e&=8191;let Ae=k+C*y+O*g+R*p+B*f+H*h;k=Ae>>>13,Ae&=8191,Ae+=z*d+A*u+I*l+j*c+N*a,k+=Ae>>>13,Ae&=8191,k=(k<<2)+k|0,k=k+L|0,L=k&8191,k=k>>>13,W+=k,i[0]=L,i[1]=W,i[2]=G,i[3]=Z,i[4]=Q,i[5]=ee,i[6]=ae,i[7]=ye,i[8]=$e,i[9]=Ae}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;mh(r)}update(e){NP(this),e=XC(e),Vr(e);const{buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){mh(this.h,this.r,this.buffer,this.pad)}digestInto(e){NP(this),_ce(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Lce(t){const e=(r,s)=>t(s).update(XC(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Mce=Lce(t=>new Uce(t));function Bce(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],y=e[6],w=e[7],b=s,v=n[0],E=n[1],_=n[2],x=o,S=a,T=c,C=l,O=u,R=d,B=h,H=f,z=p,A=g,I=y,j=w,N=b,k=v,L=E,W=_;for(let Z=0;Z<i;Z+=2)x=x+O|0,N=ct(N^x,16),z=z+N|0,O=ct(O^z,12),x=x+O|0,N=ct(N^x,8),z=z+N|0,O=ct(O^z,7),S=S+R|0,k=ct(k^S,16),A=A+k|0,R=ct(R^A,12),S=S+R|0,k=ct(k^S,8),A=A+k|0,R=ct(R^A,7),T=T+B|0,L=ct(L^T,16),I=I+L|0,B=ct(B^I,12),T=T+B|0,L=ct(L^T,8),I=I+L|0,B=ct(B^I,7),C=C+H|0,W=ct(W^C,16),j=j+W|0,H=ct(H^j,12),C=C+H|0,W=ct(W^C,8),j=j+W|0,H=ct(H^j,7),x=x+R|0,W=ct(W^x,16),I=I+W|0,R=ct(R^I,12),x=x+R|0,W=ct(W^x,8),I=I+W|0,R=ct(R^I,7),S=S+B|0,N=ct(N^S,16),j=j+N|0,B=ct(B^j,12),S=S+B|0,N=ct(N^S,8),j=j+N|0,B=ct(B^j,7),T=T+H|0,k=ct(k^T,16),z=z+k|0,H=ct(H^z,12),T=T+H|0,k=ct(k^T,8),z=z+k|0,H=ct(H^z,7),C=C+O|0,L=ct(L^C,16),A=A+L|0,O=ct(O^A,12),C=C+O|0,L=ct(L^C,8),A=A+L|0,O=ct(O^A,7);let G=0;r[G++]=o+x|0,r[G++]=a+S|0,r[G++]=c+T|0,r[G++]=l+C|0,r[G++]=u+O|0,r[G++]=d+R|0,r[G++]=h+B|0,r[G++]=f+H|0,r[G++]=p+z|0,r[G++]=g+A|0,r[G++]=y+I|0,r[G++]=w+j|0,r[G++]=b+N|0,r[G++]=v+k|0,r[G++]=E+L|0,r[G++]=_+W|0}const Fce=jce(Bce,{counterRight:!1,counterLength:4,allowShortKeys:!1}),zce=new Uint8Array(16),RP=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(zce.subarray(n))},qce=new Uint8Array(32);function $P(t,e,n,r,s){const i=t(e,n,qce),o=Mce.create(i);s&&RP(o,s),RP(o,r);const a=Tce(r.length,s?s.length:0,!0);o.update(a);const c=o.digest();return mh(i,a),c}const Wce=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=PP(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=$P(t,e,n,a,r);return i.set(c,o),mh(c),i},decrypt(s,i){i=PP(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=$P(t,e,n,o,r);if(!Ace(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),mh(c),i}}),Oj=Ice({blockSize:64,nonceLength:12,tagLength:16},Wce(Fce));let Rj=class extends jv{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,ZA(e);const r=Si(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Ys(i)}update(e){return Bc(this),this.iHash.update(e),this}digestInto(e){Bc(this),Ks(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Lv=(t,e,n)=>new Rj(t,e).update(n).digest();Lv.create=(t,e)=>new Rj(t,e);function Hce(t,e,n){return ZA(t),n===void 0&&(n=new Uint8Array(t.outputLen)),Lv(t,Si(n),Si(e))}const e_=Uint8Array.from([0]),DP=Uint8Array.of();function Vce(t,e,n,r=32){ZA(t),sa(r);const s=t.outputLen;if(r>255*s)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(r/s);n===void 0&&(n=DP);const o=new Uint8Array(i*s),a=Lv.create(t,e),c=a._cloneInto(),l=new Uint8Array(a.outputLen);for(let u=0;u<i;u++)e_[0]=u+1,c.update(u===0?DP:l).update(n).update(e_).digestInto(l),o.set(l,s*u),a._cloneInto(c);return a.destroy(),c.destroy(),Ys(l,e_),o.slice(0,r)}const Gce=(t,e,n,r,s)=>Vce(t,Hce(t,e,n),r,s),Mv=Uv,rI=BigInt(0),nx=BigInt(1);function w0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Iy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function $j(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?rI:BigInt("0x"+t)}function Bv(t){return $j(_g(t))}function v0(t){return Ks(t),$j(_g(Uint8Array.from(t).reverse()))}function sI(t,e){return eI(t.toString(16).padStart(e*2,"0"))}function iI(t,e){return sI(t,e).reverse()}function Hr(t,e,n){let r;if(typeof e=="string")try{r=eI(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(JA(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const t_=t=>typeof t=="bigint"&&rI<=t;function Kce(t,e,n){return t_(t)&&t_(e)&&t_(n)&&e<=t&&t<n}function rx(t,e,n,r){if(!Kce(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Yce(t){let e;for(e=0;t>rI;t>>=nx,e+=1);return e}const Fv=t=>(nx<<BigInt(t))-nx;function Qce(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=h=>new Uint8Array(h),s=h=>Uint8Array.of(h);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...h)=>n(o,i,...h),u=(h=r(0))=>{o=l(s(0),h),i=l(),h.length!==0&&(o=l(s(1),h),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const f=[];for(;h<e;){i=l();const p=i.slice();f.push(p),h+=i.length}return Sl(...f)};return(h,f)=>{c(),u(h);let p;for(;!(p=f(d()));)u();return c(),p}}function zv(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function jP(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Qr=BigInt(0),xr=BigInt(1),Al=BigInt(2),Jce=BigInt(3),Dj=BigInt(4),jj=BigInt(5),Uj=BigInt(8);function Ms(t,e){const n=t%e;return n>=Qr?n:e+n}function ci(t,e,n){let r=t;for(;e-- >Qr;)r*=r,r%=n;return r}function UP(t,e){if(t===Qr)throw new Error("invert: expected non-zero number");if(e<=Qr)throw new Error("invert: expected positive modulus, got "+e);let n=Ms(t,e),r=e,s=Qr,i=xr;for(;n!==Qr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==xr)throw new Error("invert: does not exist");return Ms(s,e)}function Lj(t,e){const n=(t.ORDER+xr)/Dj,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Zce(t,e){const n=(t.ORDER-jj)/Uj,r=t.mul(e,Al),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Al),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Xce(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-xr,n=0;for(;e%Al===Qr;)e/=Al,n++;let r=Al;const s=zh(t);for(;LP(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Lj;let i=s.pow(r,e);const o=(e+xr)/Al;return function(a,c){if(a.is0(c))return c;if(LP(a,c)!==1)throw new Error("Cannot find square root");let l=n,u=a.mul(a.ONE,i),d=a.pow(c,e),h=a.pow(c,o);for(;!a.eql(d,a.ONE);){if(a.is0(d))return a.ZERO;let f=1,p=a.sqr(d);for(;!a.eql(p,a.ONE);)if(f++,p=a.sqr(p),f===l)throw new Error("Cannot find square root");const g=xr<<BigInt(l-f-1),y=a.pow(u,g);l=f,u=a.sqr(y),d=a.mul(d,u),h=a.mul(h,y)}return h}}function ele(t){return t%Dj===Jce?Lj:t%Uj===jj?Zce:Xce(t)}const tle=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function nle(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=tle.reduce((r,s)=>(r[s]="function",r),e);return zv(t,n),t}function rle(t,e,n){if(n<Qr)throw new Error("invalid exponent, negatives unsupported");if(n===Qr)return t.ONE;if(n===xr)return e;let r=t.ONE,s=e;for(;n>Qr;)n&xr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=xr;return r}function Mj(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function LP(t,e){const n=(t.ORDER-xr)/Al,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function sle(t,e){e!==void 0&&sa(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function zh(t,e,n=!1,r={}){if(t<=Qr)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=sle(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:Fv(o),ZERO:Qr,ONE:xr,create:u=>Ms(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Qr<=u&&u<t},is0:u=>u===Qr,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&xr)===xr,neg:u=>Ms(-u,t),eql:(u,d)=>u===d,sqr:u=>Ms(u*u,t),add:(u,d)=>Ms(u+d,t),sub:(u,d)=>Ms(u-d,t),mul:(u,d)=>Ms(u*d,t),pow:(u,d)=>rle(l,u,d),div:(u,d)=>Ms(u*UP(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>UP(u,t),sqrt:i||(u=>(c||(c=ele(t)),c(l,u))),toBytes:u=>n?iI(u,a):sI(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?v0(u):Bv(u)},invertBatch:u=>Mj(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function Bj(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Fj(t){const e=Bj(t);return e+Math.ceil(e/2)}function ile(t,e,n=!1){const r=t.length,s=Bj(e),i=Fj(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?v0(t):Bv(t),a=Ms(o,e-xr)+xr;return n?iI(a,s):sI(a,s)}const yh=BigInt(0),Il=BigInt(1);function cp(t,e){const n=e.negate();return t?n:e}function ole(t,e,n){const r=i=>i.pz,s=Mj(t.Fp,n.map(r));return n.map((i,o)=>i.toAffine(s[o])).map(t.fromAffine)}function zj(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function n_(t,e){zj(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=Fv(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function MP(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Il);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function ale(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function cle(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const r_=new WeakMap,qj=new WeakMap;function s_(t){return qj.get(t)||1}function BP(t){if(t!==yh)throw new Error("invalid wNAF")}function lle(t,e){return{constTimeNegate:cp,hasPrecomputes(n){return s_(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>yh;)r&Il&&(s=s.add(i)),i=i.double(),r>>=Il;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=n_(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=n_(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=MP(s,c,a);s=l,d?o=o.add(cp(f,r[p])):i=i.add(cp(h,r[u]))}return BP(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=n_(n,e);for(let a=0;a<o.windows&&s!==yh;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=MP(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return BP(s),i},getPrecomputes(n,r,s){let i=r_.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),r_.set(r,i))),i},wNAFCached(n,r,s){const i=s_(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=s_(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){zj(r,e),qj.set(n,r),r_.delete(n)}}}function ule(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>yh||r>yh;)n&Il&&(i=i.add(s)),r&Il&&(o=o.add(s)),s=s.double(),n>>=Il,r>>=Il;return{p1:i,p2:o}}function dle(t,e,n,r){ale(n,t),cle(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Yce(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Fv(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],w=Number(y>>BigInt(f)&l);u[w]=u[w].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function FP(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return nle(e),e}else return zh(t)}function hle(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const o of["p","n","h"]){const a=e[o];if(!(typeof a=="bigint"&&a>yh))throw new Error(`CURVE.${o} must be positive bigint`)}const r=FP(e.p,n.Fp),s=FP(e.n,n.Fn),i=["Gx","Gy","a","b"];for(const o of i)if(!r.isValid(e[o]))throw new Error(`CURVE.${o} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const vf=BigInt(0),Wu=BigInt(1),Ty=BigInt(2);function fle(t){return zv(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function ple(t){const e=fle(t),{P:n,type:r,adjustScalarBytes:s,powPminus2:i,randomBytes:o}=e,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const c=o||Fh,l=a?255:448,u=a?32:56,d=BigInt(a?9:5),h=BigInt(a?121665:39081),f=a?Ty**BigInt(254):Ty**BigInt(447),p=a?BigInt(8)*Ty**BigInt(251)-Wu:BigInt(4)*Ty**BigInt(445)-Wu,g=f+p+Wu,y=C=>Ms(C,n),w=b(d);function b(C){return iI(y(C),u)}function v(C){const O=Hr("u coordinate",C,u);return a&&(O[31]&=127),y(v0(O))}function E(C){return v0(s(Hr("scalar",C,u)))}function _(C,O){const R=T(v(O),E(C));if(R===vf)throw new Error("invalid private or public key received");return b(R)}function x(C){return _(C,w)}function S(C,O,R){const B=y(C*(O-R));return O=y(O-B),R=y(R+B),{x_2:O,x_3:R}}function T(C,O){rx("u",C,vf,n),rx("scalar",O,f,g);const R=O,B=C;let H=Wu,z=vf,A=C,I=Wu,j=vf;for(let k=BigInt(l-1);k>=vf;k--){const L=R>>k&Wu;j^=L,{x_2:H,x_3:A}=S(j,H,A),{x_2:z,x_3:I}=S(j,z,I),j=L;const W=H+z,G=y(W*W),Z=H-z,Q=y(Z*Z),ee=G-Q,ae=A+I,ye=A-I,$e=y(ye*W),Ae=y(ae*Z),Me=$e+Ae,yt=$e-Ae;A=y(Me*Me),I=y(B*y(yt*yt)),H=y(G*Q),z=y(ee*(G+y(h*ee)))}({x_2:H,x_3:A}=S(j,H,A)),{x_2:z,x_3:I}=S(j,z,I);const N=i(z);return y(H*N)}return{scalarMult:_,scalarMultBase:x,getSharedSecret:(C,O)=>_(C,O),getPublicKey:C=>x(C),utils:{randomPrivateKey:()=>c(u)},GuBytes:w.slice()}}BigInt(0);const gle=BigInt(1),zP=BigInt(2),mle=BigInt(3),yle=BigInt(5);BigInt(8);const Wj={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function wle(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=Wj.p,o=t*t%i*t%i,a=ci(o,zP,i)*o%i,c=ci(a,gle,i)*t%i,l=ci(c,yle,i)*c%i,u=ci(l,e,i)*l%i,d=ci(u,n,i)*u%i,h=ci(d,r,i)*d%i,f=ci(h,s,i)*h%i,p=ci(f,s,i)*h%i,g=ci(p,e,i)*l%i;return{pow_p_5_8:ci(g,zP,i)*t%i,b2:o}}function vle(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const sx=(()=>{const t=Wj.p;return ple({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:n,b2:r}=wle(e);return Ms(ci(n,mle,t)*r,t)},adjustScalarBytes:vle})})();function qP(t){t.lowS!==void 0&&w0("lowS",t.lowS),t.prehash!==void 0&&w0("prehash",t.prehash)}class ble extends Error{constructor(e=""){super(e)}}const jo={Err:ble,_tlv:{encode:(t,e)=>{const{Err:n}=jo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Iy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Iy(s.length/2|128):"";return Iy(t)+i+s+e},decode(t,e){const{Err:n}=jo;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=jo;if(t<lp)throw new e("integer: negative integers are not allowed");let n=Iy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=jo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Bv(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=jo,s=Hr("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=jo,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},lp=BigInt(0),up=BigInt(1),_le=BigInt(2),Ny=BigInt(3),Ele=BigInt(4);function Cle(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function Hj(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Hr("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function xle(t,e={}){const{Fp:n,Fn:r}=hle("weierstrass",t,e),{h:s,n:i}=t;zv(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,C,O){const{x:R,y:B}=C.toAffine(),H=n.toBytes(R);if(w0("isCompressed",O),O){a();const z=!n.isOdd(B);return Sl(Vj(z),H)}else return Sl(Uint8Array.of(4),H,n.toBytes(B))}function l(T){Ks(T);const C=n.BYTES,O=C+1,R=2*C+1,B=T.length,H=T[0],z=T.subarray(1);if(B===O&&(H===2||H===3)){const A=n.fromBytes(z);if(!n.isValid(A))throw new Error("bad point: is not on curve, wrong x");const I=h(A);let j;try{j=n.sqrt(I)}catch(k){const L=k instanceof Error?": "+k.message:"";throw new Error("bad point: is not on curve, sqrt error"+L)}a();const N=n.isOdd(j);return(H&1)===1!==N&&(j=n.neg(j)),{x:A,y:j}}else if(B===R&&H===4){const A=n.fromBytes(z.subarray(C*0,C*1)),I=n.fromBytes(z.subarray(C*1,C*2));if(!f(A,I))throw new Error("bad point: is not on curve");return{x:A,y:I}}else throw new Error(`bad point: got length ${B}, expected compressed=${O} or uncompressed=${R}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=Cle(n,t.a,t.b);function f(T,C){const O=n.sqr(C),R=h(T);return n.eql(O,R)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,Ny),Ele),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function y(T,C,O=!1){if(!n.isValid(C)||O&&n.is0(C))throw new Error(`bad point coordinate ${T}`);return C}function w(T){if(!(T instanceof _))throw new Error("ProjectivePoint expected")}const b=jP((T,C)=>{const{px:O,py:R,pz:B}=T;if(n.eql(B,n.ONE))return{x:O,y:R};const H=T.is0();C==null&&(C=H?n.ONE:n.inv(B));const z=n.mul(O,C),A=n.mul(R,C),I=n.mul(B,C);if(H)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:z,y:A}}),v=jP(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:C,y:O}=T.toAffine();if(!n.isValid(C)||!n.isValid(O))throw new Error("bad point: x or y not field elements");if(!f(C,O))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function E(T,C,O,R,B){return O=new _(n.mul(O.px,T),O.py,O.pz),C=cp(R,C),O=cp(B,O),C.add(O)}class _{constructor(C,O,R){this.px=y("x",C),this.py=y("y",O,!0),this.pz=y("z",R),Object.freeze(this)}static fromAffine(C){const{x:O,y:R}=C||{};if(!C||!n.isValid(O)||!n.isValid(R))throw new Error("invalid affine point");if(C instanceof _)throw new Error("projective point not allowed");return n.is0(O)&&n.is0(R)?_.ZERO:new _(O,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){return ole(_,"pz",C)}static fromBytes(C){return Ks(C),_.fromHex(C)}static fromHex(C){const O=_.fromAffine(d(Hr("pointHex",C)));return O.assertValidity(),O}static fromPrivateKey(C){const O=Hj(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return _.BASE.multiply(O(C))}static msm(C,O){return dle(_,r,C,O)}precompute(C=8,O=!0){return S.setWindowSize(this,C),O||this.multiply(Ny),this}_setWindowSize(C){this.precompute(C)}assertValidity(){v(this)}hasEvenY(){const{y:C}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(C)}equals(C){w(C);const{px:O,py:R,pz:B}=this,{px:H,py:z,pz:A}=C,I=n.eql(n.mul(O,A),n.mul(H,B)),j=n.eql(n.mul(R,A),n.mul(z,B));return I&&j}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:C,b:O}=t,R=n.mul(O,Ny),{px:B,py:H,pz:z}=this;let A=n.ZERO,I=n.ZERO,j=n.ZERO,N=n.mul(B,B),k=n.mul(H,H),L=n.mul(z,z),W=n.mul(B,H);return W=n.add(W,W),j=n.mul(B,z),j=n.add(j,j),A=n.mul(C,j),I=n.mul(R,L),I=n.add(A,I),A=n.sub(k,I),I=n.add(k,I),I=n.mul(A,I),A=n.mul(W,A),j=n.mul(R,j),L=n.mul(C,L),W=n.sub(N,L),W=n.mul(C,W),W=n.add(W,j),j=n.add(N,N),N=n.add(j,N),N=n.add(N,L),N=n.mul(N,W),I=n.add(I,N),L=n.mul(H,z),L=n.add(L,L),N=n.mul(L,W),A=n.sub(A,N),j=n.mul(L,k),j=n.add(j,j),j=n.add(j,j),new _(A,I,j)}add(C){w(C);const{px:O,py:R,pz:B}=this,{px:H,py:z,pz:A}=C;let I=n.ZERO,j=n.ZERO,N=n.ZERO;const k=t.a,L=n.mul(t.b,Ny);let W=n.mul(O,H),G=n.mul(R,z),Z=n.mul(B,A),Q=n.add(O,R),ee=n.add(H,z);Q=n.mul(Q,ee),ee=n.add(W,G),Q=n.sub(Q,ee),ee=n.add(O,B);let ae=n.add(H,A);return ee=n.mul(ee,ae),ae=n.add(W,Z),ee=n.sub(ee,ae),ae=n.add(R,B),I=n.add(z,A),ae=n.mul(ae,I),I=n.add(G,Z),ae=n.sub(ae,I),N=n.mul(k,ee),I=n.mul(L,Z),N=n.add(I,N),I=n.sub(G,N),N=n.add(G,N),j=n.mul(I,N),G=n.add(W,W),G=n.add(G,W),Z=n.mul(k,Z),ee=n.mul(L,ee),G=n.add(G,Z),Z=n.sub(W,Z),Z=n.mul(k,Z),ee=n.add(ee,Z),W=n.mul(G,ee),j=n.add(j,W),W=n.mul(ae,ee),I=n.mul(Q,I),I=n.sub(I,W),W=n.mul(Q,G),N=n.mul(ae,N),N=n.add(N,W),new _(I,j,N)}subtract(C){return this.add(C.negate())}is0(){return this.equals(_.ZERO)}multiply(C){const{endo:O}=e;if(!r.isValidNot0(C))throw new Error("invalid scalar: out of range");let R,B;const H=z=>S.wNAFCached(this,z,_.normalizeZ);if(O){const{k1neg:z,k1:A,k2neg:I,k2:j}=O.splitScalar(C),{p:N,f:k}=H(A),{p:L,f:W}=H(j);B=k.add(W),R=E(O.beta,N,L,z,I)}else{const{p:z,f:A}=H(C);R=z,B=A}return _.normalizeZ([R,B])[0]}multiplyUnsafe(C){const{endo:O}=e,R=this;if(!r.isValid(C))throw new Error("invalid scalar: out of range");if(C===lp||R.is0())return _.ZERO;if(C===up)return R;if(S.hasPrecomputes(this))return this.multiply(C);if(O){const{k1neg:B,k1:H,k2neg:z,k2:A}=O.splitScalar(C),{p1:I,p2:j}=ule(_,R,H,A);return E(O.beta,I,j,B,z)}else return S.wNAFCachedUnsafe(R,C)}multiplyAndAddUnsafe(C,O,R){const B=this.multiplyUnsafe(O).add(C.multiplyUnsafe(R));return B.is0()?void 0:B}toAffine(C){return b(this,C)}isTorsionFree(){const{isTorsionFree:C}=e;return s===up?!0:C?C(_,this):S.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:C}=e;return s===up?this:C?C(_,this):this.multiplyUnsafe(s)}toBytes(C=!0){return w0("isCompressed",C),this.assertValidity(),u(_,this,C)}toRawBytes(C=!0){return this.toBytes(C)}toHex(C=!0){return _g(this.toBytes(C))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=r;const x=r.BITS,S=lle(_,e.endo?Math.ceil(x/2):x);return _}function Vj(t){return Uint8Array.of(t?2:3)}function Sle(t,e,n={}){zv(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Fh,s=e.hmac||((R,...B)=>Lv(e.hash,R,Sl(...B))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(R){const B=a>>up;return R>B}function u(R){return l(R)?o.neg(R):R}function d(R,B){if(!o.isValidNot0(B))throw new Error(`invalid signature ${R}: out of range 1..CURVE.n`)}class h{constructor(B,H,z){d("r",B),d("s",H),this.r=B,this.s=H,z!=null&&(this.recovery=z),Object.freeze(this)}static fromCompact(B){const H=o.BYTES,z=Hr("compactSignature",B,H*2);return new h(o.fromBytes(z.subarray(0,H)),o.fromBytes(z.subarray(H,H*2)))}static fromDER(B){const{r:H,s:z}=jo.toSig(Hr("DER",B));return new h(H,z)}assertValidity(){}addRecoveryBit(B){return new h(this.r,this.s,B)}recoverPublicKey(B){const H=i.ORDER,{r:z,s:A,recovery:I}=this;if(I==null||![0,1,2,3].includes(I))throw new Error("recovery id invalid");if(a*_le<H&&I>1)throw new Error("recovery id is ambiguous for h>1 curve");const j=I===2||I===3?z+a:z;if(!i.isValid(j))throw new Error("recovery id 2 or 3 invalid");const N=i.toBytes(j),k=t.fromHex(Sl(Vj((I&1)===0),N)),L=o.inv(j),W=v(Hr("msgHash",B)),G=o.create(-W*L),Z=o.create(A*L),Q=t.BASE.multiplyUnsafe(G).add(k.multiplyUnsafe(Z));if(Q.is0())throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(B){if(B==="compact")return Sl(o.toBytes(this.r),o.toBytes(this.s));if(B==="der")return eI(jo.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return _g(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return _g(this.toBytes("compact"))}}const f=Hj(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(R){try{return f(R),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const R=a;return ile(r(Fj(R)),R)},precompute(R=8,B=t.BASE){return B.precompute(R,!1)}};function g(R,B=!0){return t.fromPrivateKey(R).toBytes(B)}function y(R){if(typeof R=="bigint")return!1;if(R instanceof t)return!0;const B=Hr("key",R).length,H=i.BYTES,z=H+1,A=2*H+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===z))return B===z||B===A}function w(R,B,H=!0){if(y(R)===!0)throw new Error("first arg must be private key");if(y(B)===!1)throw new Error("second arg must be public key");return t.fromHex(B).multiply(f(R)).toBytes(H)}const b=e.bits2int||function(R){if(R.length>8192)throw new Error("input is too large");const B=Bv(R),H=R.length*8-c;return H>0?B>>BigInt(H):B},v=e.bits2int_modN||function(R){return o.create(b(R))},E=Fv(c);function _(R){return rx("num < 2^"+c,R,lp,E),o.toBytes(R)}function x(R,B,H=S){if(["recovered","canonical"].some(Q=>Q in H))throw new Error("sign() legacy options not supported");const{hash:z}=e;let{lowS:A,prehash:I,extraEntropy:j}=H;A==null&&(A=!0),R=Hr("msgHash",R),qP(H),I&&(R=Hr("prehashed msgHash",z(R)));const N=v(R),k=f(B),L=[_(k),_(N)];if(j!=null&&j!==!1){const Q=j===!0?r(i.BYTES):j;L.push(Hr("extraEntropy",Q))}const W=Sl(...L),G=N;function Z(Q){const ee=b(Q);if(!o.isValidNot0(ee))return;const ae=o.inv(ee),ye=t.BASE.multiply(ee).toAffine(),$e=o.create(ye.x);if($e===lp)return;const Ae=o.create(ae*o.create(G+$e*k));if(Ae===lp)return;let Me=(ye.x===$e?0:2)|Number(ye.y&up),yt=Ae;return A&&l(Ae)&&(yt=u(Ae),Me^=1),new h($e,yt,Me)}return{seed:W,k2sig:Z}}const S={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function C(R,B,H=S){const{seed:z,k2sig:A}=x(R,B,H);return Qce(e.hash.outputLen,o.BYTES,s)(z,A)}t.BASE.precompute(8);function O(R,B,H,z=T){const A=R;B=Hr("msgHash",B),H=Hr("publicKey",H),qP(z);const{lowS:I,prehash:j,format:N}=z;if("strict"in z)throw new Error("options.strict was renamed to lowS");if(N!==void 0&&!["compact","der","js"].includes(N))throw new Error('format must be "compact", "der" or "js"');const k=typeof A=="string"||JA(A),L=!k&&!N&&typeof A=="object"&&A!==null&&typeof A.r=="bigint"&&typeof A.s=="bigint";if(!k&&!L)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let W,G;try{if(L)if(N===void 0||N==="js")W=new h(A.r,A.s);else throw new Error("invalid format");if(k){try{N!=="compact"&&(W=h.fromDER(A))}catch(Me){if(!(Me instanceof jo.Err))throw Me}!W&&N!=="der"&&(W=h.fromCompact(A))}G=t.fromHex(H)}catch{return!1}if(!W||I&&W.hasHighS())return!1;j&&(B=e.hash(B));const{r:Z,s:Q}=W,ee=v(B),ae=o.inv(Q),ye=o.create(ee*ae),$e=o.create(Z*ae),Ae=t.BASE.multiplyUnsafe(ye).add(G.multiplyUnsafe($e));return Ae.is0()?!1:o.create(Ae.x)===Z}return Object.freeze({getPublicKey:g,getSharedSecret:w,sign:C,verify:O,utils:p,Point:t,Signature:h})}function Ale(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=zh(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function Ile(t){const{CURVE:e,curveOpts:n}=Ale(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function Tle(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function Nle(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=Ile(t),s=xle(e,n),i=Sle(s,r,n);return Tle(t,i)}function ix(t,e){const n=r=>Nle({...t,hash:r});return{...n(e),create:n}}const Gj={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Kj={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Yj={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Ple=zh(Gj.p),kle=zh(Kj.p),Ole=zh(Yj.p),Rle=ix({...Gj,Fp:Ple,lowS:!1},Uv);ix({...Kj,Fp:kle,lowS:!1},Fae),ix({...Yj,Fp:Ole,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Bae);const $le=Rle,Qj="base10",Sr="base16",_i="base64pad",Ka="base64url",mm="utf8",Jj=0,Vo=1,ym=2,Dle=0,WP=1,dp=12,oI=32;function jle(){const t=sx.utils.randomPrivateKey(),e=sx.getPublicKey(t);return{privateKey:ts(t,Sr),publicKey:ts(e,Sr)}}function ox(){const t=Fh(oI);return ts(t,Sr)}function Ule(t,e){const n=sx.getSharedSecret(qs(t,Sr),qs(e,Sr)),r=Gce(Mv,n,void 0,void 0,oI);return ts(r,Sr)}function mw(t){const e=Mv(qs(t,Sr));return ts(e,Sr)}function Zi(t){const e=Mv(qs(t,mm));return ts(e,Sr)}function Zj(t){return qs(`${t}`,Qj)}function lu(t){return Number(ts(t,Qj))}function Xj(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function e4(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function Lle(t){const e=Zj(typeof t.type<"u"?t.type:Jj);if(lu(e)===Vo&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?qs(t.senderPublicKey,Sr):void 0,r=typeof t.iv<"u"?qs(t.iv,Sr):Fh(dp),s=qs(t.symKey,Sr),i=Oj(s,r).encrypt(qs(t.message,mm)),o=t4({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Ka?Xj(o):o}function Mle(t){const e=qs(t.symKey,Sr),{sealed:n,iv:r}=Cg({encoded:t.encoded,encoding:t.encoding}),s=Oj(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ts(s,mm)}function Ble(t,e){const n=Zj(ym),r=Fh(dp),s=qs(t,mm),i=t4({type:n,sealed:s,iv:r});return e===Ka?Xj(i):i}function Fle(t,e){const{sealed:n}=Cg({encoded:t,encoding:e});return ts(n,mm)}function t4(t){if(lu(t.type)===ym)return ts(ap([t.type,t.sealed]),_i);if(lu(t.type)===Vo){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ts(ap([t.type,t.senderPublicKey,t.iv,t.sealed]),_i)}return ts(ap([t.type,t.iv,t.sealed]),_i)}function Cg(t){const e=(t.encoding||_i)===Ka?e4(t.encoded):t.encoded,n=qs(e,_i),r=n.slice(Dle,WP),s=WP;if(lu(r)===Vo){const c=s+oI,l=c+dp,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(lu(r)===ym){const c=n.slice(s),l=Fh(dp);return{type:r,sealed:c,iv:l}}const i=s+dp,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function zle(t,e){const n=Cg({encoded:t,encoding:e==null?void 0:e.encoding});return n4({type:lu(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ts(n.senderPublicKey,Sr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function n4(t){const e=(t==null?void 0:t.type)||Jj;if(e===Vo){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function HP(t){return t.type===Vo&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function VP(t){return t.type===ym}function qle(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return ap([new Uint8Array([4]),e,n])}function Wle(t,e){const[n,r,s]=t.split("."),i=Buffer.from(e4(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=Mv(c),u=qle(e);if(!$le.verify(ap([o,a]),l,u))throw new Error("Invalid signature");return zC(t).payload}const Hle="irn";function b0(t){return(t==null?void 0:t.relay)||{protocol:Hle}}function zf(t){const e=boe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function Vle(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function GP(t){if(!t.includes("wc:")){const l=fj(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:Gle(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:Vle(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function Gle(t){return t.startsWith("//")?t.substring(2):t}function Kle(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function KP(t){const e=new URLSearchParams,n=Kle(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Py(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var Yle=Object.defineProperty,Qle=Object.defineProperties,Jle=Object.getOwnPropertyDescriptors,YP=Object.getOwnPropertySymbols,Zle=Object.prototype.hasOwnProperty,Xle=Object.prototype.propertyIsEnumerable,QP=(t,e,n)=>e in t?Yle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eue=(t,e)=>{for(var n in e||(e={}))Zle.call(e,n)&&QP(t,n,e[n]);if(YP)for(var n of YP(e))Xle.call(e,n)&&QP(t,n,e[n]);return t},tue=(t,e)=>Qle(t,Jle(e));function qh(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function nue(t){const e=[];return Object.values(t).forEach(n=>{e.push(...qh(n.accounts))}),e}function rue(t,e){const n=[];return Object.values(t).forEach(r=>{qh(r.accounts).includes(e)&&n.push(...r.methods)}),n}function sue(t,e){const n=[];return Object.values(t).forEach(r=>{qh(r.accounts).includes(e)&&n.push(...r.events)}),n}function qv(t){return t.includes(":")}function Id(t){return qv(t)?t.split(":")[0]:t}function JP(t){var e,n,r;const s={};if(!Nc(t))return s;for(const[i,o]of Object.entries(t)){const a=qv(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Id(i);s[u]=tue(eue({},s[u]),{chains:ao(a,(e=s[u])==null?void 0:e.chains),methods:ao(c,(n=s[u])==null?void 0:n.methods),events:ao(l,(r=s[u])==null?void 0:r.events)})}return s}function iue(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function ZP(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=iue(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=ao(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function oue(t,e){var n,r,s,i,o,a;const c=JP(t),l=JP(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:ao((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:ao((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:ao((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const aue={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},cue={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ue(t,e){const{message:n,code:r}=cue[t];return{message:e?`${n} ${e}`:n,code:r}}function Wt(t,e){const{message:n,code:r}=aue[t];return{message:e?`${n} ${e}`:n,code:r}}function Go(t,e){return!!Array.isArray(t)}function Nc(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Wn(t){return typeof t>"u"}function dn(t,e){return e&&Wn(t)?!0:typeof t=="string"&&!!t.trim().length}function aI(t,e){return e&&Wn(t)?!0:typeof t=="number"&&!isNaN(t)}function lue(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return xl(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=qh(a),d=n[o];(!xl(cj(o,d),u)||!xl(d.methods,c)||!xl(d.events,l))&&(i=!1)}),i):!1}function _0(t){return dn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function uue(t){if(dn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&_0(n)}}return!1}function due(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(dn(t,!1)){if(e(t))return!0;const n=fj(t);return e(n)}}catch{}return!1}function hue(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function fue(t){return t==null?void 0:t.topic}function pue(t,e){let n=null;return dn(t==null?void 0:t.publicKey,!1)||(n=ue("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function XP(t){let e=!0;return Go(t)?t.length&&(e=t.every(n=>dn(n,!1))):e=!1,e}function gue(t,e,n){let r=null;return Go(e)&&e.length?e.forEach(s=>{r||_0(s)||(r=Wt("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):_0(t)||(r=Wt("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function mue(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=gue(s,cj(s,i),`${e} ${n}`);o&&(r=o)}),r}function yue(t,e){let n=null;return Go(t)?t.forEach(r=>{n||uue(r)||(n=Wt("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Wt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function wue(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=yue(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function vue(t,e){let n=null;return XP(t==null?void 0:t.methods)?XP(t==null?void 0:t.events)||(n=Wt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Wt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function r4(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=vue(r,`${e}, namespace`);s&&(n=s)}),n}function bue(t,e,n){let r=null;if(t&&Nc(t)){const s=r4(t,e);s&&(r=s);const i=mue(t,e,n);i&&(r=i)}else r=ue("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function i_(t,e){let n=null;if(t&&Nc(t)){const r=r4(t,e);r&&(n=r);const s=wue(t,e);s&&(n=s)}else n=ue("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function s4(t){return dn(t.protocol,!0)}function _ue(t,e){let n=!1;return t?t&&Go(t)&&t.length&&t.forEach(r=>{n=s4(r)}):n=!0,n}function Eue(t){return typeof t=="number"}function Br(t){return typeof t<"u"&&typeof t!==null}function Cue(t){return!(!t||typeof t!="object"||!t.code||!aI(t.code,!1)||!t.message||!dn(t.message,!1))}function xue(t){return!(Wn(t)||!dn(t.method,!1))}function Sue(t){return!(Wn(t)||Wn(t.result)&&Wn(t.error)||!aI(t.id,!1)||!dn(t.jsonrpc,!1))}function Aue(t){return!(Wn(t)||!dn(t.name,!1))}function ek(t,e){return!(!_0(e)||!nue(t).includes(e))}function Iue(t,e,n){return dn(n,!1)?rue(t,e).includes(n):!1}function Tue(t,e,n){return dn(n,!1)?sue(t,e).includes(n):!1}function tk(t,e,n){let r=null;const s=Nue(t),i=Pue(e),o=Object.keys(s),a=Object.keys(i),c=nk(Object.keys(t)),l=nk(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=ue("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),xl(o,a)||(r=ue("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=qh(e[d].accounts);h.includes(d)||(r=ue("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(xl(s[d].methods,i[d].methods)?xl(s[d].events,i[d].events)||(r=ue("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=ue("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function Nue(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function nk(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Pue(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=qh(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function kue(t,e){return aI(t,!1)&&t<=e.max&&t>=e.min}function rk(){const t=pm();return new Promise(e=>{switch(t){case ms.browser:e(Oue());break;case ms.reactNative:e(Rue());break;case ms.node:e($ue());break;default:e(!0)}})}function Oue(){return Bh()&&(navigator==null?void 0:navigator.onLine)}async function Rue(){if(Yc()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function $ue(){return!0}function Due(t){switch(pm()){case ms.browser:jue(t);break;case ms.reactNative:Uue(t);break}}function jue(t){!Yc()&&Bh()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Uue(t){Yc()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function Lue(){var t;return Bh()&&ou()?((t=ou())==null?void 0:t.visibilityState)==="visible":!0}const o_={};class bf{static get(e){return o_[e]}static set(e,n){o_[e]=n}static delete(e){delete o_[e]}}function Mue(t){const e=Mh.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function Bue({publicKey:t,signature:e,payload:n}){var r;const s=ax(n.method),i=128|parseInt(((r=n.version)==null?void 0:r.toString())||"4"),o=que(n.address),a=n.era==="00"?new Uint8Array([0]):ax(n.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const c=parseInt(n.nonce,16),l=new Uint8Array([c&255,c>>8&255]),u=BigInt(`0x${zue(n.tip)}`),d=Hue(u),h=new Uint8Array([0,...t,o,...e,...a,...l,...d,...s]),f=Wue(h.length+1);return new Uint8Array([...f,i,...h])}function Fue(t){const e=ax(t),n=Ooe.blake2b(e,void 0,32);return"0x"+Buffer.from(n).toString("hex")}function ax(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function zue(t){return t.startsWith("0x")?t.slice(2):t}function que(t){const e=Mh.decode(t)[0];return e===42?0:e===60?2:1}function Wue(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function Hue(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function Vue(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),n=Mue(t.transaction.address),r=Bue({publicKey:n,signature:e,payload:t.transaction}),s=Buffer.from(r).toString("hex");return Fue(s)}const Gue="PARSE_ERROR",Kue="INVALID_REQUEST",Yue="METHOD_NOT_FOUND",Que="INVALID_PARAMS",i4="INTERNAL_ERROR",cI="SERVER_ERROR",Jue=[-32700,-32600,-32601,-32602,-32603],hp={[Gue]:{code:-32700,message:"Parse error"},[Kue]:{code:-32600,message:"Invalid Request"},[Yue]:{code:-32601,message:"Method not found"},[Que]:{code:-32602,message:"Invalid params"},[i4]:{code:-32603,message:"Internal error"},[cI]:{code:-32e3,message:"Server error"}},o4=cI;function Zue(t){return Jue.includes(t)}function sk(t){return Object.keys(hp).includes(t)?hp[t]:hp[o4]}function Xue(t){const e=Object.values(hp).find(n=>n.code===t);return e||hp[o4]}function a4(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var c4={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cx=function(t,e){return cx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},cx(t,e)};function ede(t,e){cx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var lx=function(){return lx=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lx.apply(this,arguments)};function tde(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function nde(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function rde(t,e){return function(n,r){e(n,r,t)}}function sde(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ide(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function ode(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ade(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function cde(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function ux(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l4(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function lde(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l4(arguments[e]));return t}function ude(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function xg(t){return this instanceof xg?(this.v=t,this):new xg(t)}function dde(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof xg?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function hde(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:xg(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function fde(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ux=="function"?ux(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function pde(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function gde(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function mde(t){return t&&t.__esModule?t:{default:t}}function yde(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function wde(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const vde=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return lx},__asyncDelegator:hde,__asyncGenerator:dde,__asyncValues:fde,__await:xg,__awaiter:ide,__classPrivateFieldGet:yde,__classPrivateFieldSet:wde,__createBinding:ade,__decorate:nde,__exportStar:cde,__extends:ede,__generator:ode,__importDefault:mde,__importStar:gde,__makeTemplateObject:pde,__metadata:sde,__param:rde,__read:l4,__rest:tde,__spread:lde,__spreadArrays:ude,__values:ux},Symbol.toStringTag,{value:"Module"})),bde=D0(vde);var Ao={},ik;function _de(){if(ik)return Ao;ik=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.isBrowserCryptoAvailable=Ao.getSubtleCrypto=Ao.getBrowerCrypto=void 0;function t(){return(nn==null?void 0:nn.crypto)||(nn==null?void 0:nn.msCrypto)||{}}Ao.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Ao.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Ao.isBrowserCryptoAvailable=n,Ao}var Io={},ok;function Ede(){if(ok)return Io;ok=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.isBrowser=Io.isNode=Io.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Io.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Io.isNode=e;function n(){return!t()&&!e()}return Io.isBrowser=n,Io}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=bde;e.__exportStar(_de(),t),e.__exportStar(Ede(),t)})(c4);function Hi(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Tl(t=6){return BigInt(Hi(t))}function fc(t,e,n){return{id:n||Hi(),jsonrpc:"2.0",method:t,params:e}}function Wv(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Hv(t,e,n){return{id:t,jsonrpc:"2.0",error:Cde(e)}}function Cde(t,e){return typeof t>"u"?sk(i4):(typeof t=="string"&&(t=Object.assign(Object.assign({},sk(cI)),{message:t})),Zue(t.code)&&(t=Xue(t.code)),t)}let xde=class{},Sde=class extends xde{constructor(){super()}},Ade=class extends Sde{constructor(e){super()}};const Ide="^https?:",Tde="^wss?:";function Nde(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function u4(t,e){const n=Nde(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function ak(t){return u4(t,Ide)}function ck(t){return u4(t,Tde)}function Pde(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function d4(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function lI(t){return d4(t)&&"method"in t}function Vv(t){return d4(t)&&(Vi(t)||Ls(t))}function Vi(t){return"result"in t}function Ls(t){return"error"in t}let Zs=class extends Ade{constructor(e){super(e),this.events=new Js.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(fc(e.method,e.params||[],e.id||Tl().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Ls(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Vv(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const kde=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Ode=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",lk=t=>t.split("?")[0],uk=10,Rde=kde();let $de=class{constructor(e){if(this.url=e,this.events=new Js.EventEmitter,this.registering=!1,!ck(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ra(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!ck(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=c4.isReactNative()?void 0:{rejectUnauthorized:!Pde(e)},i=new Rde(e,[],s);Ode()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?iu(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Hv(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return a4(e,lk(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>uk&&this.events.setMaxListeners(uk)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${lk(this.url)}`));return this.events.emit("register_error",n),n}};var Dde={};const h4="wc",f4=2,dx="core",uo=`${h4}@2:${dx}:`,jde={logger:"error"},Ude={database:":memory:"},Lde="crypto",dk="client_ed25519_seed",Mde=le.ONE_DAY,Bde="keychain",Fde="0.3",zde="messages",qde="0.3",hk=le.SIX_HOURS,Wde="publisher",p4="irn",Hde="error",g4="wss://relay.walletconnect.org",Vde="relayer",kn={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Gde="_subscription",ks={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Kde=.1,hx="2.21.3",Bt={link_mode:"link_mode",relay:"relay"},yw={inbound:"inbound",outbound:"outbound"},Yde="0.3",Qde="WALLETCONNECT_CLIENT_ID",fk="WALLETCONNECT_LINK_MODE_APPS",us={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Jde="subscription",Zde="0.3",Xde="pairing",ehe="0.3",_f={wc_pairingDelete:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:le.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:le.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:le.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:le.ONE_DAY,prompt:!1,tag:0},res:{ttl:le.ONE_DAY,prompt:!1,tag:0}}},gl={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},si={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},the="history",nhe="0.3",rhe="expirer",js={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},she="0.3",ihe="verify-api",ohe="https://verify.walletconnect.com",m4="https://verify.walletconnect.org",fp=m4,ahe=`${fp}/v3`,che=[ohe,m4],lhe="echo",uhe="https://echo.walletconnect.com",qi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Po={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ii={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},nl={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},rl={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Ef={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},dhe=.1,hhe="event-client",fhe=86400,phe="https://pulse.walletconnect.org/batch";function ghe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,w=0,b=p.length;w!==b&&p[w]===0;)w++,g++;for(var v=(b-w)*u+1>>>0,E=new Uint8Array(v);w!==b;){for(var _=p[w],x=0,S=v-1;(_!==0||x<y)&&S!==-1;S--,x++)_+=256*E[S]>>>0,E[S]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");y=x,w++}for(var T=v-y;T!==v&&E[T]===0;)T++;for(var C=c.repeat(g);T<v;++T)C+=t.charAt(E[T]);return C}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,w=0;p[g]===c;)y++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var E=n[p.charCodeAt(g)];if(E===255)return;for(var _=0,x=b-1;(E!==0||_<w)&&x!==-1;x--,_++)E+=a*v[x]>>>0,v[x]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");w=_,g++}if(p[g]!==" "){for(var S=b-w;S!==b&&v[S]===0;)S++;for(var T=new Uint8Array(y+(b-S)),C=y;S!==b;)T[C++]=v[S++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var mhe=ghe,yhe=mhe;const y4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},whe=t=>new TextEncoder().encode(t),vhe=t=>new TextDecoder().decode(t);class bhe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class _he{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return w4(this,e)}}class Ehe{constructor(e){this.decoders=e}or(e){return w4(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const w4=(t,e)=>new Ehe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Che{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new bhe(e,n,r),this.decoder=new _he(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Gv=({name:t,prefix:e,encode:n,decode:r})=>new Che(t,e,n,r),wm=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=yhe(n,e);return Gv({prefix:t,name:e,encode:r,decode:i=>y4(s(i))})},xhe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},She=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Zn=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Gv({prefix:e,name:t,encode(s){return She(s,r,n)},decode(s){return xhe(s,r,n,t)}}),Ahe=Gv({prefix:"\0",name:"identity",encode:t=>vhe(t),decode:t=>whe(t)});var Ihe=Object.freeze({__proto__:null,identity:Ahe});const The=Zn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Nhe=Object.freeze({__proto__:null,base2:The});const Phe=Zn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var khe=Object.freeze({__proto__:null,base8:Phe});const Ohe=wm({prefix:"9",name:"base10",alphabet:"0123456789"});var Rhe=Object.freeze({__proto__:null,base10:Ohe});const $he=Zn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Dhe=Zn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var jhe=Object.freeze({__proto__:null,base16:$he,base16upper:Dhe});const Uhe=Zn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Lhe=Zn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Mhe=Zn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Bhe=Zn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Fhe=Zn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),zhe=Zn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),qhe=Zn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Whe=Zn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hhe=Zn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Vhe=Object.freeze({__proto__:null,base32:Uhe,base32upper:Lhe,base32pad:Mhe,base32padupper:Bhe,base32hex:Fhe,base32hexupper:zhe,base32hexpad:qhe,base32hexpadupper:Whe,base32z:Hhe});const Ghe=wm({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Khe=wm({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Yhe=Object.freeze({__proto__:null,base36:Ghe,base36upper:Khe});const Qhe=wm({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Jhe=wm({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Zhe=Object.freeze({__proto__:null,base58btc:Qhe,base58flickr:Jhe});const Xhe=Zn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),efe=Zn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),tfe=Zn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),nfe=Zn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var rfe=Object.freeze({__proto__:null,base64:Xhe,base64pad:efe,base64url:tfe,base64urlpad:nfe});const v4=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),sfe=v4.reduce((t,e,n)=>(t[n]=e,t),[]),ife=v4.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function ofe(t){return t.reduce((e,n)=>(e+=sfe[n],e),"")}function afe(t){const e=[];for(const n of t){const r=ife[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const cfe=Gv({prefix:"🚀",name:"base256emoji",encode:ofe,decode:afe});var lfe=Object.freeze({__proto__:null,base256emoji:cfe}),ufe=b4,pk=128,dfe=-128,hfe=Math.pow(2,31);function b4(t,e,n){e=e||[],n=n||0;for(var r=n;t>=hfe;)e[n++]=t&255|pk,t/=128;for(;t&dfe;)e[n++]=t&255|pk,t>>>=7;return e[n]=t|0,b4.bytes=n-r+1,e}var ffe=fx,pfe=128,gk=127;function fx(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw fx.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&gk)<<s:(o&gk)*Math.pow(2,s),s+=7}while(o>=pfe);return fx.bytes=i-r,n}var gfe=Math.pow(2,7),mfe=Math.pow(2,14),yfe=Math.pow(2,21),wfe=Math.pow(2,28),vfe=Math.pow(2,35),bfe=Math.pow(2,42),_fe=Math.pow(2,49),Efe=Math.pow(2,56),Cfe=Math.pow(2,63),xfe=function(t){return t<gfe?1:t<mfe?2:t<yfe?3:t<wfe?4:t<vfe?5:t<bfe?6:t<_fe?7:t<Efe?8:t<Cfe?9:10},Sfe={encode:ufe,decode:ffe,encodingLength:xfe},_4=Sfe;const mk=(t,e,n=0)=>(_4.encode(t,e,n),e),yk=t=>_4.encodingLength(t),px=(t,e)=>{const n=e.byteLength,r=yk(t),s=r+yk(n),i=new Uint8Array(s+n);return mk(t,i,0),mk(n,i,r),i.set(e,s),new Afe(t,n,e,i)};class Afe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const E4=({name:t,code:e,encode:n})=>new Ife(t,e,n);class Ife{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?px(this.code,n):n.then(r=>px(this.code,r))}else throw Error("Unknown type, must be binary type")}}const C4=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Tfe=E4({name:"sha2-256",code:18,encode:C4("SHA-256")}),Nfe=E4({name:"sha2-512",code:19,encode:C4("SHA-512")});var Pfe=Object.freeze({__proto__:null,sha256:Tfe,sha512:Nfe});const x4=0,kfe="identity",S4=y4,Ofe=t=>px(x4,S4(t)),Rfe={code:x4,name:kfe,encode:S4,digest:Ofe};var $fe=Object.freeze({__proto__:null,identity:Rfe});new TextEncoder,new TextDecoder;const wk={...Ihe,...Nhe,...khe,...Rhe,...jhe,...Vhe,...Yhe,...Zhe,...rfe,...lfe};({...Pfe,...$fe});function A4(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Dfe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?A4(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function I4(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const vk=I4("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),a_=I4("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=Dfe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),jfe={utf8:vk,"utf-8":vk,hex:wk.base16,latin1:a_,ascii:a_,binary:a_,...wk};function Ufe(t,e="utf8"){const n=jfe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?A4(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var Lfe=Object.defineProperty,Mfe=(t,e,n)=>e in t?Lfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mi=(t,e,n)=>Mfe(t,typeof e!="symbol"?e+"":e,n);class Bfe{constructor(e,n){this.core=e,this.logger=n,Mi(this,"keychain",new Map),Mi(this,"name",Bde),Mi(this,"version",Fde),Mi(this,"initialized",!1),Mi(this,"storagePrefix",uo),Mi(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Mi(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Mi(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Mi(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=ue("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Mi(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=pr(n,this.name)}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,YC(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?QC(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Ffe=Object.defineProperty,zfe=(t,e,n)=>e in t?Ffe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bn=(t,e,n)=>zfe(t,typeof e!="symbol"?e+"":e,n);class qfe{constructor(e,n,r){this.core=e,this.logger=n,Bn(this,"name",Lde),Bn(this,"keychain"),Bn(this,"randomSessionIdentifier",ox()),Bn(this,"initialized",!1),Bn(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Bn(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Bn(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=ZN(s);return S6(i.publicKey)}),Bn(this,"generateKeyPair",()=>{this.isInitialized();const s=jle();return this.setPrivateKey(s.publicKey,s.privateKey)}),Bn(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=ZN(i),a=this.randomSessionIdentifier;return await zre(a,s,Mde,o)}),Bn(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=Ule(a,i);return this.setSymKey(c,o)}),Bn(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||mw(s);return await this.keychain.set(o,s),o}),Bn(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Bn(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Bn(this,"encode",async(s,i,o)=>{this.isInitialized();const a=n4(o),c=ra(i);if(VP(a))return Ble(c,o==null?void 0:o.encoding);if(HP(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return Lle({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Bn(this,"decode",async(s,i,o)=>{this.isInitialized();const a=zle(i,o);if(VP(a)){const c=Fle(i,o==null?void 0:o.encoding);return iu(c)}if(HP(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=Mle({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return iu(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Bn(this,"getPayloadType",(s,i=_i)=>{const o=Cg({encoded:s,encoding:i});return lu(o.type)}),Bn(this,"getPayloadSenderPublicKey",(s,i=_i)=>{const o=Cg({encoded:s,encoding:i});return o.senderPublicKey?ts(o.senderPublicKey,Sr):void 0}),this.core=e,this.logger=pr(n,this.name),this.keychain=r||new Bfe(this.core,this.logger)}get context(){return rs(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(dk)}catch{e=ox(),await this.keychain.set(dk,e)}return Ufe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Wfe=Object.defineProperty,Hfe=Object.defineProperties,Vfe=Object.getOwnPropertyDescriptors,bk=Object.getOwnPropertySymbols,Gfe=Object.prototype.hasOwnProperty,Kfe=Object.prototype.propertyIsEnumerable,gx=(t,e,n)=>e in t?Wfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yfe=(t,e)=>{for(var n in e||(e={}))Gfe.call(e,n)&&gx(t,n,e[n]);if(bk)for(var n of bk(e))Kfe.call(e,n)&&gx(t,n,e[n]);return t},Qfe=(t,e)=>Hfe(t,Vfe(e)),as=(t,e,n)=>gx(t,typeof e!="symbol"?e+"":e,n);class Jfe extends Bee{constructor(e,n){super(e,n),this.logger=e,this.core=n,as(this,"messages",new Map),as(this,"messagesWithoutClientAck",new Map),as(this,"name",zde),as(this,"version",qde),as(this,"initialized",!1),as(this,"storagePrefix",uo),as(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),as(this,"set",async(r,s,i)=>{this.isInitialized();const o=Zi(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===yw.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,Qfe(Yfe({},c),{[o]:s}))}return await this.persist(),o}),as(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),as(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),as(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Zi(s);return typeof i[o]<"u"}),as(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Zi(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),as(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=pr(e,this.name),this.core=n}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,YC(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,YC(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?QC(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?QC(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Zfe=Object.defineProperty,Xfe=Object.defineProperties,epe=Object.getOwnPropertyDescriptors,_k=Object.getOwnPropertySymbols,tpe=Object.prototype.hasOwnProperty,npe=Object.prototype.propertyIsEnumerable,mx=(t,e,n)=>e in t?Zfe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ky=(t,e)=>{for(var n in e||(e={}))tpe.call(e,n)&&mx(t,n,e[n]);if(_k)for(var n of _k(e))npe.call(e,n)&&mx(t,n,e[n]);return t},c_=(t,e)=>Xfe(t,epe(e)),oi=(t,e,n)=>mx(t,typeof e!="symbol"?e+"":e,n);class rpe extends Fee{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,oi(this,"events",new Js.EventEmitter),oi(this,"name",Wde),oi(this,"queue",new Map),oi(this,"publishTimeout",le.toMiliseconds(le.ONE_MINUTE)),oi(this,"initialPublishTimeout",le.toMiliseconds(le.ONE_SECOND*15)),oi(this,"needsTransportRestart",!1),oi(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||hk,c=b0(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Tl().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const y=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(kn.publish,y),g(h))};this.relayer.events.on(kn.publish,y);const w=hc(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(E=>{this.logger.warn(E,E==null?void 0:E.message),v(E)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await w,this.events.removeListener(kn.publish,y)}catch(b){this.queue.set(d,c_(ky({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await hc(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),oi(this,"on",(r,s)=>{this.events.on(r,s)}),oi(this,"once",(r,s)=>{this.events.once(r,s)}),oi(this,"off",(r,s)=>{this.events.off(r,s)}),oi(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=pr(n,this.name),this.registerEventListeners()}get context(){return rs(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=hk,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:zf(b0().protocol).publish,params:ky({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Wn((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Wn((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(kn.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,c_(ky({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(c_(ky({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Cu.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(kn.connection_stalled);return}this.checkQueue()}),this.relayer.on(kn.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var spe=Object.defineProperty,ipe=(t,e,n)=>e in t?spe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hu=(t,e,n)=>ipe(t,typeof e!="symbol"?e+"":e,n);class ope{constructor(){Hu(this,"map",new Map),Hu(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Hu(this,"get",e=>this.map.get(e)||[]),Hu(this,"exists",(e,n)=>this.get(e).includes(n)),Hu(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Hu(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var ape=Object.defineProperty,cpe=Object.defineProperties,lpe=Object.getOwnPropertyDescriptors,Ek=Object.getOwnPropertySymbols,upe=Object.prototype.hasOwnProperty,dpe=Object.prototype.propertyIsEnumerable,yx=(t,e,n)=>e in t?ape(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cf=(t,e)=>{for(var n in e||(e={}))upe.call(e,n)&&yx(t,n,e[n]);if(Ek)for(var n of Ek(e))dpe.call(e,n)&&yx(t,n,e[n]);return t},l_=(t,e)=>cpe(t,lpe(e)),Pt=(t,e,n)=>yx(t,typeof e!="symbol"?e+"":e,n);class hpe extends Wee{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Pt(this,"subscriptions",new Map),Pt(this,"topicMap",new ope),Pt(this,"events",new Js.EventEmitter),Pt(this,"name",Jde),Pt(this,"version",Zde),Pt(this,"pending",new Map),Pt(this,"cached",[]),Pt(this,"initialized",!1),Pt(this,"storagePrefix",uo),Pt(this,"subscribeTimeout",le.toMiliseconds(le.ONE_MINUTE)),Pt(this,"initialSubscribeTimeout",le.toMiliseconds(le.ONE_SECOND*15)),Pt(this,"clientId"),Pt(this,"batchSubscribeTopicsLimit",500),Pt(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Pt(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=b0(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Pt(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Pt(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Pt(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Pt(this,"on",(r,s)=>{this.events.on(r,s)}),Pt(this,"once",(r,s)=>{this.events.once(r,s)}),Pt(this,"off",(r,s)=>{this.events.off(r,s)}),Pt(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Pt(this,"start",async()=>{await this.onConnect()}),Pt(this,"stop",async()=>{await this.onDisconnect()}),Pt(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Pt(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Pt(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Cu.pulse,async()=>{await this.checkPending()}),this.events.on(us.created,async r=>{const s=us.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(us.deleted,async r=>{const s=us.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=pr(n,this.name),this.clientId=""}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=b0(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Wt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Bt.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:zf(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Bt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},le.toMiliseconds(le.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(us.created,d),u(h.id))};this.events.on(us.created,d);try{const h=await hc(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(us.created,d),u(h)}catch{}}),l=await hc(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(kn.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:zf(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await hc(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(kn.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:zf(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await hc(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(kn.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:zf(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,l_(Cf({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Cf({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Cf({},n)),this.topicMap.set(n.topic,e),this.events.emit(us.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(us.deleted,l_(Cf({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(us.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(us.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>l_(Cf({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await iae(le.toMiliseconds(le.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Zi(e+await this.getClientId())}}var fpe=Object.defineProperty,Ck=Object.getOwnPropertySymbols,ppe=Object.prototype.hasOwnProperty,gpe=Object.prototype.propertyIsEnumerable,wx=(t,e,n)=>e in t?fpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xk=(t,e)=>{for(var n in e||(e={}))ppe.call(e,n)&&wx(t,n,e[n]);if(Ck)for(var n of Ck(e))gpe.call(e,n)&&wx(t,n,e[n]);return t},lt=(t,e,n)=>wx(t,typeof e!="symbol"?e+"":e,n);class mpe extends zee{constructor(e){super(e),lt(this,"protocol","wc"),lt(this,"version",2),lt(this,"core"),lt(this,"logger"),lt(this,"events",new Js.EventEmitter),lt(this,"provider"),lt(this,"messages"),lt(this,"subscriber"),lt(this,"publisher"),lt(this,"name",Vde),lt(this,"transportExplicitlyClosed",!1),lt(this,"initialized",!1),lt(this,"connectionAttemptInProgress",!1),lt(this,"relayUrl"),lt(this,"projectId"),lt(this,"packageName"),lt(this,"bundleId"),lt(this,"hasExperiencedNetworkDisruption",!1),lt(this,"pingTimeout"),lt(this,"heartBeatTimeout",le.toMiliseconds(le.THIRTY_SECONDS+le.FIVE_SECONDS)),lt(this,"reconnectTimeout"),lt(this,"connectPromise"),lt(this,"reconnectInProgress",!1),lt(this,"requestsInFlight",[]),lt(this,"connectTimeout",le.toMiliseconds(le.ONE_SECOND*15)),lt(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Tl().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),lt(this,"resetPingTimeout",()=>{m0()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),lt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),lt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(kn.connect)}),lt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),lt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(kn.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),lt(this,"registerProviderListeners",()=>{this.provider.on(ks.payload,this.onPayloadHandler),this.provider.on(ks.connect,this.onConnectHandler),this.provider.on(ks.disconnect,this.onDisconnectHandler),this.provider.on(ks.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?pr(e.logger,this.name):um($h({level:e.logger||Hde})),this.messages=new Jfe(this.logger,e.core),this.subscriber=new hpe(this,this.logger),this.publisher=new rpe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||g4,this.projectId=e.projectId,qoe()?this.packageName=fP():Woe()&&(this.bundleId=fP()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return rs(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Bt.relay},yw.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(us.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(us.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,xk({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await hc(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await rk())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=wn(le.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(kn.message,e),await this.recordMessageEvent(e,yw.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to connect"))};this.provider.once(ks.disconnect,i),await hc(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ks.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ks.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(ks.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,le.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(m0())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Zs(new $de(Yoe({sdkVersion:hx,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),lI(e)){if(!e.method.endsWith(Gde))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Bt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(xk({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Vv(e)&&this.events.emit(kn.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,yw.inbound),this.events.emit(kn.message,e))}async acknowledgePayload(e){const n=Wv(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(ks.payload,this.onPayloadHandler),this.provider.off(ks.connect,this.onConnectHandler),this.provider.off(ks.disconnect,this.onDisconnectHandler),this.provider.off(ks.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await rk();Due(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Cu.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&Lue())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(kn.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},le.toMiliseconds(Kde)))))}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function ype(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Sk(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Ak(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const wpe="[object RegExp]",vpe="[object String]",bpe="[object Number]",_pe="[object Boolean]",Ik="[object Arguments]",Epe="[object Symbol]",Cpe="[object Date]",xpe="[object Map]",Spe="[object Set]",Ape="[object Array]",Ipe="[object Function]",Tpe="[object ArrayBuffer]",u_="[object Object]",Npe="[object Error]",Ppe="[object DataView]",kpe="[object Uint8Array]",Ope="[object Uint8ClampedArray]",Rpe="[object Uint16Array]",$pe="[object Uint32Array]",Dpe="[object BigUint64Array]",jpe="[object Int8Array]",Upe="[object Int16Array]",Lpe="[object Int32Array]",Mpe="[object BigInt64Array]",Bpe="[object Float32Array]",Fpe="[object Float64Array]";function zpe(){}function Tk(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function qpe(t,e,n){return qf(t,e,void 0,void 0,void 0,void 0,n)}function qf(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return pp(t,e,i,o)}return pp(t,e,i,o)}function pp(t,e,n,r){if(Object.is(t,e))return!0;let s=Ak(t),i=Ak(e);if(s===Ik&&(s=u_),i===Ik&&(i=u_),s!==i)return!1;switch(s){case vpe:return t.toString()===e.toString();case bpe:{const c=t.valueOf(),l=e.valueOf();return ype(c,l)}case _pe:case Cpe:case Epe:return Object.is(t.valueOf(),e.valueOf());case wpe:return t.source===e.source&&t.flags===e.flags;case Ipe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case xpe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!qf(l,e.get(c),c,t,e,n,r))return!1;return!0}case Spe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>qf(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case Ape:case kpe:case Ope:case Rpe:case $pe:case Dpe:case jpe:case Upe:case Lpe:case Mpe:case Bpe:case Fpe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!qf(t[c],e[c],c,t,e,n,r))return!1;return!0}case Tpe:return t.byteLength!==e.byteLength?!1:pp(new Uint8Array(t),new Uint8Array(e),n,r);case Ppe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:pp(new Uint8Array(t),new Uint8Array(e),n,r);case Npe:return t.name===e.name&&t.message===e.message;case u_:{if(!(pp(t.constructor,e.constructor,n,r)||Tk(t)&&Tk(e)))return!1;const c=[...Object.keys(t),...Sk(t)],l=[...Object.keys(e),...Sk(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!qf(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function Wpe(t,e){return qpe(t,e,zpe)}var Hpe=Object.defineProperty,Nk=Object.getOwnPropertySymbols,Vpe=Object.prototype.hasOwnProperty,Gpe=Object.prototype.propertyIsEnumerable,vx=(t,e,n)=>e in t?Hpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pk=(t,e)=>{for(var n in e||(e={}))Vpe.call(e,n)&&vx(t,n,e[n]);if(Nk)for(var n of Nk(e))Gpe.call(e,n)&&vx(t,n,e[n]);return t},Dr=(t,e,n)=>vx(t,typeof e!="symbol"?e+"":e,n);class Au extends qee{constructor(e,n,r,s=uo,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Dr(this,"map",new Map),Dr(this,"version",Yde),Dr(this,"cached",[]),Dr(this,"initialized",!1),Dr(this,"getKey"),Dr(this,"storagePrefix",uo),Dr(this,"recentlyDeleted",[]),Dr(this,"recentlyDeletedLimit",200),Dr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Wn(o)?this.map.set(this.getKey(o),o):hue(o)?this.map.set(o.id,o):fue(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Dr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Dr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Dr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>Wpe(a[c],o[c]))):this.values)),Dr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Pk(Pk({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Dr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=pr(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=ue("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Kpe=Object.defineProperty,Ype=(t,e,n)=>e in t?Kpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xe=(t,e,n)=>Ype(t,typeof e!="symbol"?e+"":e,n);class Qpe{constructor(e,n){this.core=e,this.logger=n,Xe(this,"name",Xde),Xe(this,"version",ehe),Xe(this,"events",new kA),Xe(this,"pairings"),Xe(this,"initialized",!1),Xe(this,"storagePrefix",uo),Xe(this,"ignoredPayloadTypes",[Vo]),Xe(this,"registeredMethods",[]),Xe(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Xe(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Xe(this,"create",async r=>{this.isInitialized();const s=ox(),i=await this.core.crypto.setSymKey(s),o=wn(le.FIVE_MINUTES),a={protocol:p4},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=KP({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(gl.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Xe(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[qi.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=GP(r.uri);s.props.properties.topic=i,s.addTrace(qi.pairing_uri_validation_success),s.addTrace(qi.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(qi.existing_pairing),u.active)throw s.setError(Po.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(qi.pairing_not_expired)}const d=c||wn(le.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(qi.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(gl.create,h),s.addTrace(qi.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(qi.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Po.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Po.subscribe_pairing_topic_failure),f}return s.addTrace(qi.subscribe_pairing_topic_success),h}),Xe(this,"activate",async({topic:r})=>{this.isInitialized();const s=wn(le.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Xe(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=dl();this.events.once(pt("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Xe(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Xe(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Xe(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Xe(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Wt("USER_DISCONNECTED")),await this.deletePairing(s))}),Xe(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return KP({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Xe(this,"sendRequest",async(r,s,i)=>{const o=fc(s,i),a=await this.core.crypto.encode(r,o),c=_f[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Xe(this,"sendResult",async(r,s,i)=>{const o=Wv(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=_f[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Xe(this,"sendError",async(r,s,i)=>{const o=Hv(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=_f[c]?_f[c].res:_f.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Xe(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Wt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Xe(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Fa(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Xe(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Xe(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Xe(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(gl.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Xe(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Vi(s)?this.events.emit(pt("pairing_ping",i),{}):Ls(s)&&this.events.emit(pt("pairing_ping",i),{error:s.error})},500)}),Xe(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(gl.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Xe(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Wt("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Xe(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Wt("WC_METHOD_UNSUPPORTED",r))}),Xe(this,"isValidPair",(r,s)=>{var i;if(!Br(r)){const{message:a}=ue("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Po.malformed_pairing_uri),new Error(a)}if(!due(r.uri)){const{message:a}=ue("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Po.malformed_pairing_uri),new Error(a)}const o=GP(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=ue("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Po.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ue("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Po.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&le.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Po.pairing_expired);const{message:a}=ue("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Xe(this,"isValidPing",async r=>{if(!Br(r)){const{message:i}=ue("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Xe(this,"isValidDisconnect",async r=>{if(!Br(r)){const{message:i}=ue("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Xe(this,"isValidPairingTopic",async r=>{if(!dn(r,!1)){const{message:s}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Fa(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=ue("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=pr(n,this.name),this.pairings=new Au(this.core,this.logger,this.name,this.storagePrefix)}get context(){return rs(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(kn.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Bt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);lI(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):Vv(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(js.expired,async e=>{const{topic:n}=hj(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(gl.expire,{topic:n}))})}}var Jpe=Object.defineProperty,Zpe=(t,e,n)=>e in t?Jpe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fn=(t,e,n)=>Zpe(t,typeof e!="symbol"?e+"":e,n);class Xpe extends Mee{constructor(e,n){super(e,n),this.core=e,this.logger=n,Fn(this,"records",new Map),Fn(this,"events",new Js.EventEmitter),Fn(this,"name",the),Fn(this,"version",nhe),Fn(this,"cached",[]),Fn(this,"initialized",!1),Fn(this,"storagePrefix",uo),Fn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Fn(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:wn(le.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(si.created,o)}),Fn(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Ls(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(si.updated,s))}),Fn(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Fn(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(si.deleted,i)}}),this.persist()}),Fn(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Fn(this,"on",(r,s)=>{this.events.on(r,s)}),Fn(this,"once",(r,s)=>{this.events.once(r,s)}),Fn(this,"off",(r,s)=>{this.events.off(r,s)}),Fn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=pr(n,this.name)}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:fc(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(si.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(si.created,e=>{const n=si.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(si.updated,e=>{const n=si.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(si.deleted,e=>{const n=si.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Cu.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{le.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(si.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ege=Object.defineProperty,tge=(t,e,n)=>e in t?ege(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cr=(t,e,n)=>tge(t,typeof e!="symbol"?e+"":e,n);class nge extends Hee{constructor(e,n){super(e,n),this.core=e,this.logger=n,cr(this,"expirations",new Map),cr(this,"events",new Js.EventEmitter),cr(this,"name",rhe),cr(this,"version",she),cr(this,"cached",[]),cr(this,"initialized",!1),cr(this,"storagePrefix",uo),cr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),cr(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),cr(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(js.created,{target:i,expiration:o})}),cr(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),cr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(js.deleted,{target:s,expiration:i})}}),cr(this,"on",(r,s)=>{this.events.on(r,s)}),cr(this,"once",(r,s)=>{this.events.once(r,s)}),cr(this,"off",(r,s)=>{this.events.off(r,s)}),cr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=pr(n,this.name)}get context(){return rs(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Qoe(e);if(typeof e=="number")return Joe(e);const{message:n}=ue("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(js.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=ue("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=ue("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;le.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(js.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Cu.pulse,()=>this.checkExpirations()),this.events.on(js.created,e=>{const n=js.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(js.expired,e=>{const n=js.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(js.deleted,e=>{const n=js.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}}var rge=Object.defineProperty,sge=(t,e,n)=>e in t?rge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ln=(t,e,n)=>sge(t,typeof e!="symbol"?e+"":e,n);class ige extends Vee{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,ln(this,"name",ihe),ln(this,"abortController"),ln(this,"isDevEnv"),ln(this,"verifyUrlV3",ahe),ln(this,"storagePrefix",uo),ln(this,"version",f4),ln(this,"publicKey"),ln(this,"fetchPromise"),ln(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&le.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ln(this,"register",async s=>{if(!Bh()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=ou(),u=this.startAbortTimer(le.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=w=>{if(w.data&&typeof w.data=="string")try{const b=JSON.parse(w.data);if(b.type==="verify_attestation"){if(zC(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),ln(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(zC(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),ln(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(le.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ln(this,"getVerifyUrl",s=>{let i=s||fp;return che.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${fp}`),i=fp),i}),ln(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(le.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),ln(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),ln(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ln(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ln(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ln(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),ln(this,"validateAttestation",(s,i)=>{const o=Wle(s,i.publicKey),a={hasExpired:le.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=pr(n,this.name),this.abortController=new AbortController,this.isDevEnv=KA(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return rs(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),le.toMiliseconds(e))}}var oge=Object.defineProperty,age=(t,e,n)=>e in t?oge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kk=(t,e,n)=>age(t,typeof e!="symbol"?e+"":e,n);class cge extends Gee{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,kk(this,"context",lhe),kk(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${uhe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=pr(n,this.context)}}var lge=Object.defineProperty,Ok=Object.getOwnPropertySymbols,uge=Object.prototype.hasOwnProperty,dge=Object.prototype.propertyIsEnumerable,bx=(t,e,n)=>e in t?lge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xf=(t,e)=>{for(var n in e||(e={}))uge.call(e,n)&&bx(t,n,e[n]);if(Ok)for(var n of Ok(e))dge.call(e,n)&&bx(t,n,e[n]);return t},An=(t,e,n)=>bx(t,typeof e!="symbol"?e+"":e,n);class hge extends Kee{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,An(this,"context",hhe),An(this,"storagePrefix",uo),An(this,"storageVersion",dhe),An(this,"events",new Map),An(this,"shouldPersist",!1),An(this,"init",async()=>{if(!KA())try{const s={eventId:gP(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:uj(this.core.relayer.protocol,this.core.relayer.version,hx)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),An(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=gP(),u=this.core.projectId||"",d=Date.now(),h=xf({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),An(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return xf(xf({},a),this.setMethods(a.eventId))}),An(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),An(this,"setEventListeners",()=>{this.core.heartbeat.on(Cu.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{le.fromMiliseconds(Date.now())-le.fromMiliseconds(s.timestamp)>fhe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),An(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),An(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),An(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),An(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),An(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,xf(xf({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),An(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),An(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${phe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${hx}${i}`,{method:"POST",body:JSON.stringify(s)})}),An(this,"getAppDomain",()=>lj().url),this.logger=pr(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var fge=Object.defineProperty,Rk=Object.getOwnPropertySymbols,pge=Object.prototype.hasOwnProperty,gge=Object.prototype.propertyIsEnumerable,_x=(t,e,n)=>e in t?fge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$k=(t,e)=>{for(var n in e||(e={}))pge.call(e,n)&&_x(t,n,e[n]);if(Rk)for(var n of Rk(e))gge.call(e,n)&&_x(t,n,e[n]);return t},Ot=(t,e,n)=>_x(t,typeof e!="symbol"?e+"":e,n);let mge=class T4 extends Dee{constructor(e){var n;super(e),Ot(this,"protocol",h4),Ot(this,"version",f4),Ot(this,"name",dx),Ot(this,"relayUrl"),Ot(this,"projectId"),Ot(this,"customStoragePrefix"),Ot(this,"events",new Js.EventEmitter),Ot(this,"logger"),Ot(this,"heartbeat"),Ot(this,"relayer"),Ot(this,"crypto"),Ot(this,"storage"),Ot(this,"history"),Ot(this,"expirer"),Ot(this,"pairing"),Ot(this,"verify"),Ot(this,"echoClient"),Ot(this,"linkModeSupportedApps"),Ot(this,"eventClient"),Ot(this,"initialized",!1),Ot(this,"logChunkController"),Ot(this,"on",(a,c)=>this.events.on(a,c)),Ot(this,"once",(a,c)=>this.events.once(a,c)),Ot(this,"off",(a,c)=>this.events.off(a,c)),Ot(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Ot(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Bt.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||g4,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=$h({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:jde.logger,name:dx}),{logger:i,chunkLoggerController:o}=RA({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=pr(i,this.name),this.heartbeat=new CX,this.crypto=new qfe(this,this.logger,e==null?void 0:e.keychain),this.history=new Xpe(this,this.logger),this.expirer=new nge(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new iee($k($k({},Ude),e==null?void 0:e.storageOptions)),this.relayer=new mpe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Qpe(this,this.logger),this.verify=new ige(this,this.logger,this.storage),this.echoClient=new cge(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new hge(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new T4(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(Qde,r),n}get context(){return rs(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(fk,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(fk)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&Dde.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const yge=mge,N4="wc",P4=2,k4="client",uI=`${N4}@${P4}:${k4}:`,d_={name:k4,logger:"error"},Dk="WALLETCONNECT_DEEPLINK_CHOICE",wge="proposal",jk="Proposal expired",vge="session",Vu=le.SEVEN_DAYS,bge="engine",In={wc_sessionPropose:{req:{ttl:le.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1104},res:{ttl:le.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1106},res:{ttl:le.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:le.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:le.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1112},res:{ttl:le.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:le.ONE_DAY,prompt:!1,tag:1114},res:{ttl:le.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:le.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:le.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:le.FIVE_MINUTES,prompt:!1,tag:1119}}},h_={min:le.FIVE_MINUTES,max:le.SEVEN_DAYS},Bi={idle:"IDLE",active:"ACTIVE"},_ge={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},Ege="request",Cge=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],xge="wc",Sge="auth",Age="authKeys",Ige="pairingTopics",Tge="requests",Kv=`${xge}@${1.5}:${Sge}:`,ww=`${Kv}:PUB_KEY`;var Nge=Object.defineProperty,Pge=Object.defineProperties,kge=Object.getOwnPropertyDescriptors,Uk=Object.getOwnPropertySymbols,Oge=Object.prototype.hasOwnProperty,Rge=Object.prototype.propertyIsEnumerable,Ex=(t,e,n)=>e in t?Nge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lt=(t,e)=>{for(var n in e||(e={}))Oge.call(e,n)&&Ex(t,n,e[n]);if(Uk)for(var n of Uk(e))Rge.call(e,n)&&Ex(t,n,e[n]);return t},jr=(t,e)=>Pge(t,kge(e)),re=(t,e,n)=>Ex(t,typeof e!="symbol"?e+"":e,n);class $ge extends Zee{constructor(e){super(e),re(this,"name",bge),re(this,"events",new kA),re(this,"initialized",!1),re(this,"requestQueue",{state:Bi.idle,queue:[]}),re(this,"sessionRequestQueue",{state:Bi.idle,queue:[]}),re(this,"requestQueueDelay",le.ONE_SECOND),re(this,"expectedPairingMethodMap",new Map),re(this,"recentlyDeletedMap",new Map),re(this,"recentlyDeletedLimit",200),re(this,"relayMessageCache",[]),re(this,"pendingSessions",new Map),re(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(In)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},le.toMiliseconds(this.requestQueueDelay)))}),re(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=jr(Lt({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=oue(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const x=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=x.active}}catch(x){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),x}if(!u||!h){const{topic:x,uri:S}=await this.client.core.pairing.create();u=x,d=S}if(!u){const{message:x}=ue("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(x)}const f=await this.client.core.crypto.generateKeyPair(),p=In.wc_sessionPropose.req.ttl||le.FIVE_MINUTES,g=wn(p),y=jr(Lt(Lt({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:p4}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Hi()}),w=pt("session_connect",y.id),{reject:b,resolve:v,done:E}=dl(p,jk),_=({id:x})=>{x===y.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(y.id),this.events.emit(w,{error:{message:jk,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(w,({error:x,session:S})=>{this.client.events.off("proposal_expire",_),x?b(x):S&&v(S)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:d,approval:E}}),re(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),re(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[ii.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(C){throw o.setError(nl.no_internet_connection),C}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(C){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(nl.proposal_not_found),C}try{await this.isValidApprove(n)}catch(C){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(nl.session_approve_namespace_validation_failure),C}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:w}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ii.session_approve_started,properties:{topic:p,trace:[ii.session_approve_started,ii.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),E=g.publicKey,_=await this.client.core.crypto.generateSharedKey(v,E),x=Lt(Lt(Lt({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:wn(Vu)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),S=Bt.relay;b.addTrace(ii.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:S})}catch(C){throw b.setError(nl.subscribe_session_topic_failure),C}b.addTrace(ii.subscribe_session_topic_success);const T=jr(Lt({},x),{topic:_,requiredNamespaces:y,optionalNamespaces:w,pairingTopic:p,acknowledged:!1,self:x.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:Bt.relay});await this.client.session.set(_,T),b.addTrace(ii.store_session);try{b.addTrace(ii.publishing_session_settle),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:x,throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(nl.session_settle_publish_failure),C}),b.addTrace(ii.session_settle_publish_success),b.addTrace(ii.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(C=>{throw b==null||b.setError(nl.session_approve_publish_failure),C}),b.addTrace(ii.session_approve_publish_success)}catch(C){throw this.client.logger.error(C),this.client.session.delete(_,Wt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),C}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(_,wn(Vu)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),re(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&await this.sendError({id:r,topic:i,error:s,rpcOpts:In.wc_sessionPropose.reject}),await this.deleteProposal(r)}),re(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=dl(),c=Hi(),l=Tl().toString(),u=this.client.session.get(r).namespaces;return this.events.once(pt("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),re(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Hi(),{done:i,resolve:o,reject:a}=dl();return this.events.once(pt("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,wn(Vu)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),re(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=In.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Bt.relay&&await this.confirmOnlineStateOrThrow();const c=Hi(),l=Tl().toString(),{done:u,resolve:d,reject:h}=dl(o,"Request expired. Please try again.");this.events.once(pt("session_request",c),({error:y,result:w})=>{y?h(y):d(w)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:jr(Lt({},s),{expiryTimestamp:wn(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:jr(Lt({},s),{expiryTimestamp:wn(o)}),chainId:r};return await Promise.all([new Promise(async y=>{await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(c,g)}).catch(w=>h(w)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var w;if(!((w=a.sessionConfig)!=null&&w.disableDeepLink)){const b=await tae(this.client.core.storage,Dk);await Zoe({id:c,topic:i,wcDeepLink:b})}y()}),u()]).then(y=>y[2])}),re(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Bt.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Vi(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Ls(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),re(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Hi(),i=Tl().toString(),{done:o,resolve:a,reject:c}=dl();this.events.once(pt("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),re(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Tl().toString(),a=Hi();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),re(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Wt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=ue("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),re(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>lue(r,n)))),re(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),re(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Bt.link_mode:Bt.relay;o===Bt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:y}=n,w=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const E=await this.client.core.crypto.generateKeyPair(),_=mw(E);if(await Promise.all([this.client.auth.authKeys.set(ww,{responseTopic:_,publicKey:E}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:b})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:k}=Md(a[0]);let L=mce(k,"request",g);gw(w)&&(L=wce(L,w.pop())),w.push(L)}const x=y&&y>In.wc_sessionAuthenticate.req.ttl?y:In.wc_sessionAuthenticate.req.ttl,S={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:w},requester:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:wn(x)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},C={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:wn(In.wc_sessionPropose.req.ttl),id:Hi()},{done:O,resolve:R,reject:B}=dl(x,"Request expired"),H=Hi(),z=pt("session_connect",C.id),A=pt("session_request",H),I=async({error:k,session:L})=>{this.events.off(A,j),k?B(k):L&&R({session:L})},j=async k=>{var L,W,G;if(await this.deletePendingAuthRequest(H,{message:"fulfilled",code:0}),k.error){const Ae=Wt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===Ae.code?void 0:(this.events.off(z,I),B(k.error.message))}await this.deleteProposal(C.id),this.events.off(z,I);const{cacaos:Z,responder:Q}=k.result,ee=[],ae=[];for(const Ae of Z){await AP({cacao:Ae,projectId:this.client.core.projectId})||(this.client.logger.error(Ae,"Signature verification failed"),B(Wt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Me}=Ae,yt=gw(Me.resources),wt=[JC(Me.iss)],Ye=y0(Me.iss);if(yt){const Qe=IP(yt),qt=TP(yt);ee.push(...Qe),wt.push(...qt)}for(const Qe of wt)ae.push(`${Qe}:${Ye}`)}const ye=await this.client.core.crypto.generateSharedKey(E,Q.publicKey);let $e;ee.length>0&&($e={topic:ye,acknowledged:!0,self:{publicKey:E,metadata:this.client.metadata},peer:Q,controller:Q.publicKey,expiry:wn(Vu),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:ZP([...new Set(ee)],[...new Set(ae)]),transportType:o},await this.client.core.relayer.subscribe(ye,{transportType:o}),await this.client.session.set(ye,$e),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:Q.metadata}),$e=this.client.session.get(ye)),(L=this.client.metadata.redirect)!=null&&L.linkMode&&(W=Q.metadata.redirect)!=null&&W.linkMode&&(G=Q.metadata.redirect)!=null&&G.universal&&r&&(this.client.core.addLinkModeSupportedApp(Q.metadata.redirect.universal),this.client.session.update(ye,{transportType:Bt.link_mode})),R({auths:Z,session:$e})};this.events.once(z,I),this.events.once(A,j);let N;try{if(i){const k=fc("wc_sessionAuthenticate",S,H);this.client.core.history.set(b,k);const L=await this.client.core.crypto.encode("",k,{type:ym,encoding:Ka});N=Py(r,b,L)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:S,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:H}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:C,expiry:In.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:C.id})])}catch(k){throw this.events.off(z,I),this.events.off(A,j),k}return await this.setProposal(C.id,C),await this.setAuthRequest(H,{request:jr(Lt({},S),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:N??v,response:O}}),re(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[rl.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(Ef.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Ef.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Bt.relay;a===Bt.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=mw(c),d={type:Vo,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const y of s){if(!await AP({cacao:y,projectId:this.client.core.projectId})){i.setError(Ef.invalid_cacao);const _=Wt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(rl.cacaos_verified);const{p:w}=y,b=gw(w.resources),v=[JC(w.iss)],E=y0(w.iss);if(b){const _=IP(b),x=TP(b);h.push(..._),v.push(...x)}for(const _ of v)f.push(`${_}:${E}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(rl.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:wn(Vu),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:ZP([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(rl.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(Ef.subscribe_authenticated_session_topic_failure),y}i.addTrace(rl.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(rl.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(rl.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(Ef.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),re(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Bt.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=mw(o),l={type:Vo,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:In.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.deleteProposal(r)}),re(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return Ij(r,s)}),re(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),re(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),re(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Wt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Dk).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Wt("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Bi.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),re(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(nl.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Wt("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),re(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Bi.idle,this.client.events.emit("session_request_expire",{id:n}))}),re(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),re(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),re(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,wn(In.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),re(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Bt.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),re(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||wn(In.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),re(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=fc(s,i,c);let f;const p=!!u;try{const w=p?Ka:_i;f=await this.client.core.crypto.encode(r,h,{encoding:w})}catch(w){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),w}let g;if(Cge.includes(s)){const w=Zi(JSON.stringify(h)),b=Zi(f);g=await this.client.core.verify.register({id:b,decryptedId:w})}const y=In[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(r,h),p){const w=Py(u,r,f);await global.Linking.openURL(w,this.client.name)}else{const w=In[s].req;o&&(w.ttl=o),a&&(w.id=a),w.tvf=jr(Lt({},d),{correlationId:h.id}),l?(w.internal=jr(Lt({},w.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,w)):this.client.core.relayer.publish(r,f,w).catch(b=>this.client.logger.error(b))}return h.id}),re(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=Wv(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Ka:_i;u=await this.client.core.crypto.encode(s,l,jr(Lt({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{f=this.getTVFParams(r,p.params,i)}catch(g){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${g==null?void 0:g.message}`)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=Py(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=In[p].res;g.tvf=jr(Lt({},f),{correlationId:r}),o?(g.internal=jr(Lt({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),re(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=Hv(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Ka:_i;u=await this.client.core.crypto.encode(s,l,jr(Lt({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=Py(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||In[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),re(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Fa(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Fa(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),re(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),re(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),re(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Bi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Bi.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Bi.idle}),re(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),re(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),re(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=ue("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),re(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),re(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Po.proposal_listener_not_found)),this.isValidConnect(Lt({},s.params));const u=a.expiryTimestamp||wn(In.wc_sessionPropose.req.ttl),d=Lt({id:c,pairingTopic:r,expiryTimestamp:u,attestation:i,encryptedId:o},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Zi(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(qi.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:In.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),re(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Vi(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ls(r)){await this.deleteProposal(i);const o=pt("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),re(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=jr(Lt(Lt(Lt({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Bt.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(pt("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),re(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Vi(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(pt("session_approve",s),{})):Ls(r)&&(await this.client.session.delete(n,Wt("USER_DISCONNECTED")),this.events.emit(pt("session_approve",s),{error:r.error}))}),re(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=bf.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Wt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Lt({topic:n},s));try{bf.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0})}catch(c){throw bf.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),re(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),re(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=pt("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vi(r)?this.events.emit(pt("session_update",s),{}):Ls(r)&&this.events.emit(pt("session_update",s),{error:r.error})}),re(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,wn(Vu)),await this.sendResult({id:s,topic:n,result:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),re(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=pt("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vi(r)?this.events.emit(pt("session_extend",s),{}):Ls(r)&&this.events.emit(pt("session_extend",s),{error:r.error})}),re(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),re(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=pt("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Vi(r)?this.events.emit(pt("session_ping",s),{}):Ls(r)&&this.events.emit(pt("session_ping",s),{error:r.error})},500)}),re(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(kn.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Wt("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),re(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Lt({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Zi(JSON.stringify(fc("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Bt.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),re(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=pt("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Vi(r)?this.events.emit(pt("session_request",s),{result:r.result}):Ls(r)&&this.events.emit(pt("session_request",s),{error:r.error})}),re(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=bf.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Lt({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),bf.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),re(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Vi(r)?this.events.emit(pt("session_request",s),{result:r.result}):Ls(r)&&this.events.emit(pt("session_request",s),{error:r.error})}),re(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Zi(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Bt.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Vo,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:In.wc_sessionAuthenticate.autoReject,appLink:h})}}),re(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),re(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Bi.idle,this.processSessionRequestQueue()},le.toMiliseconds(this.requestQueueDelay))}),re(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=pt("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(pt("session_request",i.request.id),{error:r})})}),re(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Bi.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Bi.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),re(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),re(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:fc("wc_sessionPropose",jr(Lt({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id),attestation:r.attestation,encryptedId:r.encryptedId})}),re(this,"isValidConnect",async n=>{if(!Br(n)){const{message:l}=ue("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Wn(r)||await this.isValidPairingTopic(r),!_ue(c)){const{message:l}=ue("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Wn(s)&&Nc(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Wn(i)&&Nc(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Wn(o)||this.validateSessionProps(o,"sessionProperties"),!Wn(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),re(this,"validateNamespaces",(n,r)=>{const s=bue(n,"connect()",r);if(s)throw new Error(s.message)}),re(this,"isValidApprove",async n=>{if(!Br(n))throw new Error(ue("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=i_(s,"approve()");if(l)throw new Error(l.message);const u=tk(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!dn(i,!0)){const{message:d}=ue("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Wn(o)||this.validateSessionProps(o,"sessionProperties"),!Wn(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),re(this,"isValidReject",async n=>{if(!Br(n)){const{message:i}=ue("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!Cue(s)){const{message:i}=ue("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),re(this,"isValidSessionSettleRequest",n=>{if(!Br(n)){const{message:l}=ue("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!s4(r)){const{message:l}=ue("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=pue(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=i_(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Fa(o)){const{message:l}=ue("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),re(this,"isValidUpdate",async n=>{if(!Br(n)){const{message:c}=ue("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=i_(s,"update()");if(o)throw new Error(o.message);const a=tk(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),re(this,"isValidExtend",async n=>{if(!Br(n)){const{message:s}=ue("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),re(this,"isValidRequest",async n=>{if(!Br(n)){const{message:c}=ue("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!ek(a,i)){const{message:c}=ue("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!xue(s)){const{message:c}=ue("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!Iue(a,i,s.method)){const{message:c}=ue("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!kue(o,h_)){const{message:c}=ue("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${h_.min} and ${h_.max}`);throw new Error(c)}}),re(this,"isValidRespond",async n=>{var r;if(!Br(n)){const{message:o}=ue("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!Sue(i)){const{message:o}=ue("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),re(this,"isValidPing",async n=>{if(!Br(n)){const{message:s}=ue("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),re(this,"isValidEmit",async n=>{if(!Br(n)){const{message:a}=ue("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!ek(o,i)){const{message:a}=ue("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!Aue(s)){const{message:a}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!Tue(o,i,s.name)){const{message:a}=ue("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),re(this,"isValidDisconnect",async n=>{if(!Br(n)){const{message:s}=ue("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),re(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!dn(s,!1))throw new Error("uri is required parameter");if(!dn(i,!1))throw new Error("domain is required parameter");if(!dn(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Md(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Md(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),re(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||fp,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Bt.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),re(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=ue("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),re(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),re(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),re(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=ue("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),re(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Bt.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),re(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),re(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=pP(n,"topic")||"",s=decodeURIComponent(pP(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Bt.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),re(this,"registerLinkModeListeners",async()=>{var n;if(KA()||Yc()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),re(this,"getTVFParams",(n,r,s)=>{var i,o,a;if(!((i=r.request)!=null&&i.method))return{};const c={correlationId:n,rpcMethods:[r.request.method],chainId:r.chainId};try{const l=this.extractTxHashesFromResult(r.request,s);c.txHashes=l,c.contractAddresses=this.isValidContractData(r.request.params)?[(a=(o=r.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(l){this.client.logger.warn("Error getting TVF params",l)}return c}),re(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),re(this,"extractTxHashesFromResult",(n,r)=>{var s;try{if(!r)return[];const i=n.method,o=_ge[i];if(i==="sui_signTransaction")return[ece(r.transactionBytes)];if(i==="near_signTransaction")return[EP(r)];if(i==="near_signTransactions")return r.map(c=>EP(c));if(i==="xrpl_signTransactionFor"||i==="xrpl_signTransaction")return[(s=r.tx_json)==null?void 0:s.hash];if(i==="polkadot_signTransaction")return[Vue({transaction:n.params.transactionPayload,signature:r.signature})];if(i==="algo_signTxn")return Go(r)?r.map(c=>CP(c)):[CP(r)];if(i==="cosmos_signDirect")return[nce(r)];if(typeof r=="string")return[r];const a=r[o.key];if(Go(a))return i==="solana_signAllTransactions"?a.map(c=>Xae(c)):a;if(typeof a=="string")return[a]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=ue("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(kn.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(ww)?this.client.auth.authKeys.get(ww):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Bt.link_mode?Ka:_i});lI(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Zi(r)})):Vv(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(js.expired,async e=>{const{topic:n,id:r}=hj(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,ue("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,ue("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(gl.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(gl.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!dn(e,!1)){const{message:n}=ue("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=ue("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Fa(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=ue("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!dn(e,!1)){const{message:n}=ue("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=ue("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Fa(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=ue("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=ue("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(dn(e,!1)){const{message:n}=ue("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=ue("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!Eue(e)){const{message:n}=ue("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=ue("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Fa(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=ue("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class Dge extends Au{constructor(e,n){super(e,n,wge,uI),this.core=e,this.logger=n}}let jge=class extends Au{constructor(e,n){super(e,n,vge,uI),this.core=e,this.logger=n}};class Uge extends Au{constructor(e,n){super(e,n,Ege,uI,r=>r.id),this.core=e,this.logger=n}}class Lge extends Au{constructor(e,n){super(e,n,Age,Kv,()=>ww),this.core=e,this.logger=n}}class Mge extends Au{constructor(e,n){super(e,n,Ige,Kv),this.core=e,this.logger=n}}class Bge extends Au{constructor(e,n){super(e,n,Tge,Kv,r=>r.id),this.core=e,this.logger=n}}var Fge=Object.defineProperty,zge=(t,e,n)=>e in t?Fge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,f_=(t,e,n)=>zge(t,typeof e!="symbol"?e+"":e,n);class qge{constructor(e,n){this.core=e,this.logger=n,f_(this,"authKeys"),f_(this,"pairingTopics"),f_(this,"requests"),this.authKeys=new Lge(this.core,this.logger),this.pairingTopics=new Mge(this.core,this.logger),this.requests=new Bge(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var Wge=Object.defineProperty,Hge=(t,e,n)=>e in t?Wge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,et=(t,e,n)=>Hge(t,typeof e!="symbol"?e+"":e,n);let Vge=class O4 extends Jee{constructor(e){super(e),et(this,"protocol",N4),et(this,"version",P4),et(this,"name",d_.name),et(this,"metadata"),et(this,"core"),et(this,"logger"),et(this,"events",new Js.EventEmitter),et(this,"engine"),et(this,"session"),et(this,"proposal"),et(this,"pendingRequest"),et(this,"auth"),et(this,"signConfig"),et(this,"on",(r,s)=>this.events.on(r,s)),et(this,"once",(r,s)=>this.events.once(r,s)),et(this,"off",(r,s)=>this.events.off(r,s)),et(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),et(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),et(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),et(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),et(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),et(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||d_.name,this.metadata=Voe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:um($h({level:(e==null?void 0:e.logger)||d_.logger}));this.core=(e==null?void 0:e.core)||new yge(e),this.logger=pr(n,this.name),this.session=new jge(this.core,this.logger),this.proposal=new Dge(this.core,this.logger),this.pendingRequest=new Uge(this.core,this.logger),this.engine=new $ge(this),this.auth=new qge(this.core,this.logger)}static async init(e){const n=new O4(e);return await n.initialize(),n}get context(){return rs(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},le.toMiliseconds(le.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Cx={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof nn<"u"&&nn,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof nn<"u"&&nn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(A){return A&&DataView.prototype.isPrototypeOf(A)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(A){return A&&u.indexOf(Object.prototype.toString.call(A))>-1};function h(A){if(typeof A!="string"&&(A=String(A)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(A)||A==="")throw new TypeError('Invalid character in header field name: "'+A+'"');return A.toLowerCase()}function f(A){return typeof A!="string"&&(A=String(A)),A}function p(A){var I={next:function(){var j=A.shift();return{done:j===void 0,value:j}}};return c.iterable&&(I[Symbol.iterator]=function(){return I}),I}function g(A){this.map={},A instanceof g?A.forEach(function(I,j){this.append(j,I)},this):Array.isArray(A)?A.forEach(function(I){if(I.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+I.length);this.append(I[0],I[1])},this):A&&Object.getOwnPropertyNames(A).forEach(function(I){this.append(I,A[I])},this)}g.prototype.append=function(A,I){A=h(A),I=f(I);var j=this.map[A];this.map[A]=j?j+", "+I:I},g.prototype.delete=function(A){delete this.map[h(A)]},g.prototype.get=function(A){return A=h(A),this.has(A)?this.map[A]:null},g.prototype.has=function(A){return this.map.hasOwnProperty(h(A))},g.prototype.set=function(A,I){this.map[h(A)]=f(I)},g.prototype.forEach=function(A,I){for(var j in this.map)this.map.hasOwnProperty(j)&&A.call(I,this.map[j],j,this)},g.prototype.keys=function(){var A=[];return this.forEach(function(I,j){A.push(j)}),p(A)},g.prototype.values=function(){var A=[];return this.forEach(function(I){A.push(I)}),p(A)},g.prototype.entries=function(){var A=[];return this.forEach(function(I,j){A.push([j,I])}),p(A)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(A){if(!A._noBody){if(A.bodyUsed)return Promise.reject(new TypeError("Already read"));A.bodyUsed=!0}}function w(A){return new Promise(function(I,j){A.onload=function(){I(A.result)},A.onerror=function(){j(A.error)}})}function b(A){var I=new FileReader,j=w(I);return I.readAsArrayBuffer(A),j}function v(A){var I=new FileReader,j=w(I),N=/charset=([A-Za-z0-9_-]+)/.exec(A.type),k=N?N[1]:"utf-8";return I.readAsText(A,k),j}function E(A){for(var I=new Uint8Array(A),j=new Array(I.length),N=0;N<I.length;N++)j[N]=String.fromCharCode(I[N]);return j.join("")}function _(A){if(A.slice)return A.slice(0);var I=new Uint8Array(A.byteLength);return I.set(new Uint8Array(A)),I.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(A){this.bodyUsed=this.bodyUsed,this._bodyInit=A,A?typeof A=="string"?this._bodyText=A:c.blob&&Blob.prototype.isPrototypeOf(A)?this._bodyBlob=A:c.formData&&FormData.prototype.isPrototypeOf(A)?this._bodyFormData=A:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)?this._bodyText=A.toString():c.arrayBuffer&&c.blob&&l(A)?(this._bodyArrayBuffer=_(A.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(A)||d(A))?this._bodyArrayBuffer=_(A):this._bodyText=A=Object.prototype.toString.call(A):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof A=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(A)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var A=y(this);if(A)return A;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var A=y(this);return A||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var A=y(this);if(A)return A;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var S=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(A){var I=A.toUpperCase();return S.indexOf(I)>-1?I:A}function C(A,I){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');I=I||{};var j=I.body;if(A instanceof C){if(A.bodyUsed)throw new TypeError("Already read");this.url=A.url,this.credentials=A.credentials,I.headers||(this.headers=new g(A.headers)),this.method=A.method,this.mode=A.mode,this.signal=A.signal,!j&&A._bodyInit!=null&&(j=A._bodyInit,A.bodyUsed=!0)}else this.url=String(A);if(this.credentials=I.credentials||this.credentials||"same-origin",(I.headers||!this.headers)&&(this.headers=new g(I.headers)),this.method=T(I.method||this.method||"GET"),this.mode=I.mode||this.mode||null,this.signal=I.signal||this.signal||function(){if("AbortController"in a){var L=new AbortController;return L.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&j)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(j),(this.method==="GET"||this.method==="HEAD")&&(I.cache==="no-store"||I.cache==="no-cache")){var N=/([?&])_=[^&]*/;if(N.test(this.url))this.url=this.url.replace(N,"$1_="+new Date().getTime());else{var k=/\?/;this.url+=(k.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function O(A){var I=new FormData;return A.trim().split("&").forEach(function(j){if(j){var N=j.split("="),k=N.shift().replace(/\+/g," "),L=N.join("=").replace(/\+/g," ");I.append(decodeURIComponent(k),decodeURIComponent(L))}}),I}function R(A){var I=new g,j=A.replace(/\r?\n[\t ]+/g," ");return j.split("\r").map(function(N){return N.indexOf(`
`)===0?N.substr(1,N.length):N}).forEach(function(N){var k=N.split(":"),L=k.shift().trim();if(L){var W=k.join(":").trim();try{I.append(L,W)}catch(G){console.warn("Response "+G.message)}}}),I}x.call(C.prototype);function B(A,I){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(I||(I={}),this.type="default",this.status=I.status===void 0?200:I.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=I.statusText===void 0?"":""+I.statusText,this.headers=new g(I.headers),this.url=I.url||"",this._initBody(A)}x.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},B.error=function(){var A=new B(null,{status:200,statusText:""});return A.ok=!1,A.status=0,A.type="error",A};var H=[301,302,303,307,308];B.redirect=function(A,I){if(H.indexOf(I)===-1)throw new RangeError("Invalid status code");return new B(null,{status:I,headers:{location:A}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(I,j){this.message=I,this.name=j;var N=Error(I);this.stack=N.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function z(A,I){return new Promise(function(j,N){var k=new C(A,I);if(k.signal&&k.signal.aborted)return N(new o.DOMException("Aborted","AbortError"));var L=new XMLHttpRequest;function W(){L.abort()}L.onload=function(){var Q={statusText:L.statusText,headers:R(L.getAllResponseHeaders()||"")};k.url.indexOf("file://")===0&&(L.status<200||L.status>599)?Q.status=200:Q.status=L.status,Q.url="responseURL"in L?L.responseURL:Q.headers.get("X-Request-URL");var ee="response"in L?L.response:L.responseText;setTimeout(function(){j(new B(ee,Q))},0)},L.onerror=function(){setTimeout(function(){N(new TypeError("Network request failed"))},0)},L.ontimeout=function(){setTimeout(function(){N(new TypeError("Network request timed out"))},0)},L.onabort=function(){setTimeout(function(){N(new o.DOMException("Aborted","AbortError"))},0)};function G(Q){try{return Q===""&&a.location.href?a.location.href:Q}catch{return Q}}if(L.open(k.method,G(k.url),!0),k.credentials==="include"?L.withCredentials=!0:k.credentials==="omit"&&(L.withCredentials=!1),"responseType"in L&&(c.blob?L.responseType="blob":c.arrayBuffer&&(L.responseType="arraybuffer")),I&&typeof I.headers=="object"&&!(I.headers instanceof g||a.Headers&&I.headers instanceof a.Headers)){var Z=[];Object.getOwnPropertyNames(I.headers).forEach(function(Q){Z.push(h(Q)),L.setRequestHeader(Q,f(I.headers[Q]))}),k.headers.forEach(function(Q,ee){Z.indexOf(ee)===-1&&L.setRequestHeader(ee,Q)})}else k.headers.forEach(function(Q,ee){L.setRequestHeader(ee,Q)});k.signal&&(k.signal.addEventListener("abort",W),L.onreadystatechange=function(){L.readyState===4&&k.signal.removeEventListener("abort",W)}),L.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return z.polyfill=!0,a.fetch||(a.fetch=z,a.Headers=g,a.Request=C,a.Response=B),o.Headers=g,o.Request=C,o.Response=B,o.fetch=z,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(Cx,Cx.exports);var Gge=Cx.exports;const Lk=pu(Gge);var Kge=Object.defineProperty,Yge=Object.defineProperties,Qge=Object.getOwnPropertyDescriptors,Mk=Object.getOwnPropertySymbols,Jge=Object.prototype.hasOwnProperty,Zge=Object.prototype.propertyIsEnumerable,Bk=(t,e,n)=>e in t?Kge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fk=(t,e)=>{for(var n in e||(e={}))Jge.call(e,n)&&Bk(t,n,e[n]);if(Mk)for(var n of Mk(e))Zge.call(e,n)&&Bk(t,n,e[n]);return t},zk=(t,e)=>Yge(t,Qge(e));const Xge={Accept:"application/json","Content-Type":"application/json"},eme="POST",qk={headers:Xge,method:eme},Wk=10;let Ri=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Js.EventEmitter,this.isAvailable=!1,this.registering=!1,!ak(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=ra(e),r=await(await Lk(this.url,zk(Fk({},qk),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!ak(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=ra({id:1,jsonrpc:"2.0",method:"test",params:[]});await Lk(e,zk(Fk({},qk),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?iu(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=Hv(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return a4(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Wk&&this.events.setMaxListeners(Wk)}};const Hk="error",tme="wss://relay.walletconnect.org",nme="wc",rme="universal_provider",Oy=`${nme}@2:${rme}:`,R4="https://rpc.walletconnect.org/v1/",ud="generic",sme=`${R4}bundler`,Xs={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function dI(t){return t==null||typeof t!="object"&&typeof t!="function"}function $4(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function D4(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ime="[object RegExp]",j4="[object String]",U4="[object Number]",L4="[object Boolean]",M4="[object Arguments]",ome="[object Symbol]",ame="[object Date]",cme="[object Map]",lme="[object Set]",ume="[object Array]",dme="[object ArrayBuffer]",hme="[object Object]",fme="[object DataView]",pme="[object Uint8Array]",gme="[object Uint8ClampedArray]",mme="[object Uint16Array]",yme="[object Uint32Array]",wme="[object Int8Array]",vme="[object Int16Array]",bme="[object Int32Array]",_me="[object Float32Array]",Eme="[object Float64Array]";function hI(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Cme(t,e){return Td(t,void 0,t,new Map,e)}function Td(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(dI(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Td(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Td(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Td(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(hI(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Td(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),ml(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),ml(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),ml(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,ml(o,t,n,r,s),o}if(typeof t=="object"&&xme(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),ml(o,t,n,r,s),o}return t}function ml(t,e,n=t,r,s){const i=[...Object.keys(e),...$4(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Td(e[a],a,n,r,s))}}function xme(t){switch(D4(t)){case M4:case ume:case dme:case fme:case L4:case ame:case _me:case Eme:case wme:case vme:case bme:case cme:case U4:case hme:case ime:case lme:case j4:case ome:case pme:case gme:case mme:case yme:return!0;default:return!1}}function Sme(t,e){return Cme(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case U4:case j4:case L4:{const o=new t.constructor(t==null?void 0:t.valueOf());return ml(o,t),o}case M4:{const o={};return ml(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Vk(t){return Sme(t)}function Gk(t){return t!==null&&typeof t=="object"&&D4(t)==="[object Arguments]"}function Kk(t){return typeof t=="object"&&t!==null}function Ame(){}function Ime(t){return hI(t)}function Tme(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Nme(t){if(dI(t))return t;if(Array.isArray(t)||hI(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Pme(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=xx(s,o,r,new Map)}return s}function xx(t,e,n,r){if(dI(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return Nme(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...$4(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(Gk(a)&&(a={...a}),Gk(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Vk(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||Kk(c)&&Kk(a)?t[o]=xx(c,a,n,r):c==null&&Tme(a)?t[o]=xx({},a,n,r):c==null&&Ime(a)?t[o]=Vk(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function kme(t,...e){return Pme(t,...e,Ame)}var Ome=Object.defineProperty,Rme=Object.defineProperties,$me=Object.getOwnPropertyDescriptors,Yk=Object.getOwnPropertySymbols,Dme=Object.prototype.hasOwnProperty,jme=Object.prototype.propertyIsEnumerable,Qk=(t,e,n)=>e in t?Ome(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ry=(t,e)=>{for(var n in e||(e={}))Dme.call(e,n)&&Qk(t,n,e[n]);if(Yk)for(var n of Yk(e))jme.call(e,n)&&Qk(t,n,e[n]);return t},Ume=(t,e)=>Rme(t,$me(e));function _s(t,e,n){var r;const s=Md(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${R4}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Iu(t){return t.includes(":")?t.split(":")[1]:t}function B4(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Lme(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function $y(t={},e={}){const n=Jk(t),r=Jk(e);return kme(n,r)}function Jk(t){var e,n,r,s,i;const o={};if(!Nc(t))return o;for(const[a,c]of Object.entries(t)){const l=qv(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Id(a);o[f]=Ume(Ry(Ry({},o[f]),c),{chains:ao(l,(e=o[f])==null?void 0:e.chains),methods:ao(u,(n=o[f])==null?void 0:n.methods),events:ao(d,(r=o[f])==null?void 0:r.events)}),(Nc(h)||Nc(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=Ry(Ry({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function Zk(t){return t.includes(":")?t.split(":")[2]:t}function Xk(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=qv(n)?[n]:r.chains?r.chains:B4(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function p_(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const F4={},ht=t=>F4[t],g_=(t,e)=>{F4[t]=e};var Mme=Object.defineProperty,Bme=(t,e,n)=>e in t?Mme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gu=(t,e,n)=>Bme(t,typeof e!="symbol"?e+"":e,n);class Fme{constructor(e){Gu(this,"name","polkadot"),Gu(this,"client"),Gu(this,"httpProviders"),Gu(this,"events"),Gu(this,"namespace"),Gu(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Iu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,ht("disableProviderPing")))}}var zme=Object.defineProperty,qme=Object.defineProperties,Wme=Object.getOwnPropertyDescriptors,eO=Object.getOwnPropertySymbols,Hme=Object.prototype.hasOwnProperty,Vme=Object.prototype.propertyIsEnumerable,Sx=(t,e,n)=>e in t?zme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tO=(t,e)=>{for(var n in e||(e={}))Hme.call(e,n)&&Sx(t,n,e[n]);if(eO)for(var n of eO(e))Vme.call(e,n)&&Sx(t,n,e[n]);return t},nO=(t,e)=>qme(t,Wme(e)),Ku=(t,e,n)=>Sx(t,typeof e!="symbol"?e+"":e,n);class Gme{constructor(e){Ku(this,"name","eip155"),Ku(this,"client"),Ku(this,"chainId"),Ku(this,"namespace"),Ku(this,"httpProviders"),Ku(this,"events"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||_s(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,ht("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Iu(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:nO(tO({},u.sessionProperties||{}),{capabilities:nO(tO({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(fc("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${sme}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var Kme=Object.defineProperty,Yme=(t,e,n)=>e in t?Kme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yu=(t,e,n)=>Yme(t,typeof e!="symbol"?e+"":e,n);class Qme{constructor(e){Yu(this,"name","solana"),Yu(this,"client"),Yu(this,"httpProviders"),Yu(this,"events"),Yu(this,"namespace"),Yu(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Iu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,ht("disableProviderPing")))}}var Jme=Object.defineProperty,Zme=(t,e,n)=>e in t?Jme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qu=(t,e,n)=>Zme(t,typeof e!="symbol"?e+"":e,n);class Xme{constructor(e){Qu(this,"name","cosmos"),Qu(this,"client"),Qu(this,"httpProviders"),Qu(this,"events"),Qu(this,"namespace"),Qu(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Iu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,ht("disableProviderPing")))}}var eye=Object.defineProperty,tye=(t,e,n)=>e in t?eye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ju=(t,e,n)=>tye(t,typeof e!="symbol"?e+"":e,n);class nye{constructor(e){Ju(this,"name","algorand"),Ju(this,"client"),Ju(this,"httpProviders"),Ju(this,"events"),Ju(this,"namespace"),Ju(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||_s(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Zs(new Ri(r,ht("disableProviderPing")))}}var rye=Object.defineProperty,sye=(t,e,n)=>e in t?rye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zu=(t,e,n)=>sye(t,typeof e!="symbol"?e+"":e,n);class iye{constructor(e){Zu(this,"name","cip34"),Zu(this,"client"),Zu(this,"httpProviders"),Zu(this,"events"),Zu(this,"namespace"),Zu(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Iu(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,ht("disableProviderPing")))}}var oye=Object.defineProperty,aye=(t,e,n)=>e in t?oye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xu=(t,e,n)=>aye(t,typeof e!="symbol"?e+"":e,n);class cye{constructor(e){Xu(this,"name","elrond"),Xu(this,"client"),Xu(this,"httpProviders"),Xu(this,"events"),Xu(this,"namespace"),Xu(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Iu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,ht("disableProviderPing")))}}var lye=Object.defineProperty,uye=(t,e,n)=>e in t?lye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ed=(t,e,n)=>uye(t,typeof e!="symbol"?e+"":e,n);class dye{constructor(e){ed(this,"name","multiversx"),ed(this,"client"),ed(this,"httpProviders"),ed(this,"events"),ed(this,"namespace"),ed(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Iu(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,ht("disableProviderPing")))}}var hye=Object.defineProperty,fye=(t,e,n)=>e in t?hye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,td=(t,e,n)=>fye(t,typeof e!="symbol"?e+"":e,n);class pye{constructor(e){td(this,"name","near"),td(this,"client"),td(this,"httpProviders"),td(this,"events"),td(this,"namespace"),td(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||_s(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace);return typeof r>"u"?void 0:new Zs(new Ri(r,ht("disableProviderPing")))}}var gye=Object.defineProperty,mye=(t,e,n)=>e in t?gye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nd=(t,e,n)=>mye(t,typeof e!="symbol"?e+"":e,n);class yye{constructor(e){nd(this,"name","tezos"),nd(this,"client"),nd(this,"httpProviders"),nd(this,"events"),nd(this,"namespace"),nd(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||_s(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace);return typeof r>"u"?void 0:new Zs(new Ri(r))}}var wye=Object.defineProperty,vye=(t,e,n)=>e in t?wye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rd=(t,e,n)=>vye(t,typeof e!="symbol"?e+"":e,n);class bye{constructor(e){rd(this,"name",ud),rd(this,"client"),rd(this,"httpProviders"),rd(this,"events"),rd(this,"namespace"),rd(this,"chainId"),this.namespace=e.namespace,this.events=ht("events"),this.client=ht("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Xs.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Md(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||_s(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Zs(new Ri(r,ht("disableProviderPing")))}}var _ye=Object.defineProperty,Eye=Object.defineProperties,Cye=Object.getOwnPropertyDescriptors,rO=Object.getOwnPropertySymbols,xye=Object.prototype.hasOwnProperty,Sye=Object.prototype.propertyIsEnumerable,Ax=(t,e,n)=>e in t?_ye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dy=(t,e)=>{for(var n in e||(e={}))xye.call(e,n)&&Ax(t,n,e[n]);if(rO)for(var n of rO(e))Sye.call(e,n)&&Ax(t,n,e[n]);return t},m_=(t,e)=>Eye(t,Cye(e)),Os=(t,e,n)=>Ax(t,typeof e!="symbol"?e+"":e,n);let Aye=class z4{constructor(e){Os(this,"client"),Os(this,"namespaces"),Os(this,"optionalNamespaces"),Os(this,"sessionProperties"),Os(this,"scopedProperties"),Os(this,"events",new kA),Os(this,"rpcProviders",{}),Os(this,"session"),Os(this,"providerOpts"),Os(this,"logger"),Os(this,"uri"),Os(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:um($h({level:(e==null?void 0:e.logger)||Hk})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new z4(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Dy({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,Wv(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Wt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=Xk(this.session.namespaces);this.namespaces=$y(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=Xk(s.namespaces);return this.namespaces=$y(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===ud?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Go(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await Vge.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Hk,relayUrl:this.providerOpts.relayUrl||tme,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Id(n)))];g_("client",this.client),g_("events",this.events),g_("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=Lme(n,this.session),s=B4(r),i=$y(this.namespaces,this.optionalNamespaces),o=m_(Dy({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new Gme({namespace:o});break;case"algorand":this.rpcProviders[n]=new nye({namespace:o});break;case"solana":this.rpcProviders[n]=new Qme({namespace:o});break;case"cosmos":this.rpcProviders[n]=new Xme({namespace:o});break;case"polkadot":this.rpcProviders[n]=new Fme({namespace:o});break;case"cip34":this.rpcProviders[n]=new iye({namespace:o});break;case"elrond":this.rpcProviders[n]=new cye({namespace:o});break;case"multiversx":this.rpcProviders[n]=new dye({namespace:o});break;case"near":this.rpcProviders[n]=new pye({namespace:o});break;case"tezos":this.rpcProviders[n]=new yye({namespace:o});break;default:this.rpcProviders[ud]?this.rpcProviders[ud].updateNamespace(o):this.rpcProviders[ud]=new bye({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Go(o)&&this.events.emit("accountsChanged",o.map(Zk))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Id(o),l=p_(o)!==p_(a)?`${c}:${p_(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=m_(Dy({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",m_(Dy({},Wt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Xs.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[ud]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=$y(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Id(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Id(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(Zk);if(!Go(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Oy}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${Oy}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${Oy}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(Oy)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};const gp={getSIWX(){return se.state.siwx},async initializeIfEnabled(){var i;const t=se.state.siwx,e=D.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(D.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await gt.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),_t.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=_e._getClient())==null?void 0:i.disconnect().catch(console.error)),Re.reset("Connect"),bi.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=se.state.siwx,e=Se.getPlainAddress(D.getActiveCaipAddress()),n=D.getActiveCaipNetwork(),r=_e._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();fe.getConnectorId(n.chainNamespace)===X.CONNECTOR_ID.AUTH&&Re.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),D.setLastConnectedSIWECaipNetwork(n),gt.close(),_t.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!gt.state.open||Re.state.view==="ApproveTransaction")&&await gt.open({view:"SIWXSignMessage"}),i.isSmartAccount?bi.showError("This application might not support Smart Accounts"):bi.showError("Signature declined"),_t.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=D.getLastConnectedSIWECaipNetwork();r?D.switchActiveNetwork(r):await _e.disconnect()}else gt.close();Re.reset("Connect"),_t.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=D.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,Se.getPlainAddress(D.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=se.state.siwx,e=Se.getPlainAddress(D.getActiveCaipAddress()),n=D.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Re.state.view==="ApproveTransaction",r=Re.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=gp.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=D.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(bi.showLoading("Authenticating...",{autoClose:!1}),de.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),_t.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:gp.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),_t.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:gp.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{bi.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=D.state.activeChain;return{network:((e=D.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=de.state.preferredAccountTypes)==null?void 0:n[t])===Dn.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Ft={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},pc={ConnectorExplorerIds:{[X.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[X.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[X.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[X.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Ft.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Ft.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Ft.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Ft.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Ft.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Ft.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Ft.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Ft.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Ft.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Ft.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Ft.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[X.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[X.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[X.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[X.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[X.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[X.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[X.CONNECTOR_ID.INJECTED]:"Browser Wallet",[X.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[X.CONNECTOR_ID.COINBASE]:"Coinbase",[X.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[X.CONNECTOR_ID.LEDGER]:"Ledger",[X.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[X.CONNECTOR_ID.INJECTED]:"INJECTED",[X.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[X.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[X.CONNECTOR_ID.AUTH]:"AUTH"}},Sg={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Ft.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=D.state.activeChain;return X.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>fe.getConnectorId(e)===X.CONNECTOR_ID.AUTH&&e===t)}},Iye=new AbortController,Vt={EmbeddedWalletAbortController:Iye,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${Tye()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"},SERVER_ERROR_APP_CONFIGURATION:{shortMessage:"Server Error",longMessage:t=>`Failed to get App Configuration ${t||""}`},RATE_LIMITED_APP_CONFIGURATION:{shortMessage:"Rate Limited",longMessage:"Rate limited when trying to get the App Configuration"}}};function Tye(){return typeof window<"u"}const Nye={createLogger(t,e="error"){const n=$h({level:e}),{logger:r}=RA({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},Pye="rpc.walletconnect.org";function sO(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const y_=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],to={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Pye}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:X.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${X.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return y_.includes(e)?sO(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(w=>w.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:pc.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>to.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(ny(a.url,a.config))}),y_.includes(t.caipNetworkId)&&r.push(ny(sO(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(ny(a))}),sT(r)},extendWagmiTransports(t,e,n){if(y_.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return sT([n,ny(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:X.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=he.getActiveCaipNetworkId(),n=D.getAllRequestedCaipNetworks(),r=Array.from(((c=D.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},E0={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ur=jt({providers:{...E0},providerIds:{...E0}}),It={state:Ur,subscribeKey(t,e){return Yn(Ur,t,e)},subscribe(t){return Kn(Ur,()=>{t(Ur)})},subscribeProviders(t){return Kn(Ur.providers,()=>t(Ur.providers))},setProvider(t,e){e&&(Ur.providers[t]=ru(e))},getProvider(t){return Ur.providers[t]},setProviderId(t,e){e&&(Ur.providerIds[t]=e)},getProviderId(t){if(t)return Ur.providerIds[t]},reset(){Ur.providers={...E0},Ur.providerIds={...E0}},resetChain(t){Ur.providers[t]=void 0,Ur.providerIds[t]=void 0}},iO={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},zn={set(t,e){ps.isClient&&localStorage.setItem(`${Ce.STORAGE_KEY}${t}`,e)},get(t){return ps.isClient?localStorage.getItem(`${Ce.STORAGE_KEY}${t}`):null},delete(t,e){ps.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ce.STORAGE_KEY}${t}`))}},jy=30*1e3,ps={checkIfAllowedToTriggerEmail(){const t=zn.get(Ce.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<jy){const n=Math.ceil((jy-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=zn.get(Ce.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<jy)return Math.ceil((jy-e)/1e3)}return 0},checkIfRequestExists(t){return Dn.NOT_SAFE_RPC_METHODS.includes(t.method)||Dn.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(iO.transactionHash))||(t==null?void 0:t.match(iO.signedMessage)))?Ce.RPC_RESPONSE_TYPE_TX:Ce.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Dn.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var dt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(dt||(dt={}));var Ix;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Ix||(Ix={}));const we=dt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ya=t=>{switch(typeof t){case"undefined":return we.undefined;case"string":return we.string;case"number":return isNaN(t)?we.nan:we.number;case"boolean":return we.boolean;case"function":return we.function;case"bigint":return we.bigint;case"symbol":return we.symbol;case"object":return Array.isArray(t)?we.array:t===null?we.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?we.promise:typeof Map<"u"&&t instanceof Map?we.map:typeof Set<"u"&&t instanceof Set?we.set:typeof Date<"u"&&t instanceof Date?we.date:we.object;default:return we.unknown}},oe=dt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),kye=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Ai extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,dt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ai.create=t=>new Ai(t);const Ag=(t,e)=>{let n;switch(t.code){case oe.invalid_type:t.received===we.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case oe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,dt.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:n=`Unrecognized key(s) in object: ${dt.joinValues(t.keys,", ")}`;break;case oe.invalid_union:n="Invalid input";break;case oe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${dt.joinValues(t.options)}`;break;case oe.invalid_enum_value:n=`Invalid enum value. Expected ${dt.joinValues(t.options)}, received '${t.received}'`;break;case oe.invalid_arguments:n="Invalid function arguments";break;case oe.invalid_return_type:n="Invalid function return type";break;case oe.invalid_date:n="Invalid date";break;case oe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:dt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case oe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case oe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case oe.custom:n="Invalid input";break;case oe.invalid_intersection_types:n="Intersection results could not be merged";break;case oe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case oe.not_finite:n="Number must be finite";break;default:n=e.defaultError,dt.assertNever(t)}return{message:n}};let q4=Ag;function Oye(t){q4=t}function C0(){return q4}const x0=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},Rye=[];function Ee(t,e){const n=x0({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,C0(),Ag].filter(r=>!!r)});t.common.issues.push(n)}class fr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Be;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return fr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Be;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Be=Object.freeze({status:"aborted"}),W4=t=>({status:"dirty",value:t}),Ir=t=>({status:"valid",value:t}),Tx=t=>t.status==="aborted",Nx=t=>t.status==="dirty",Ig=t=>t.status==="valid",S0=t=>typeof Promise<"u"&&t instanceof Promise;var Pe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Pe||(Pe={}));class ho{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const oO=(t,e)=>{if(Ig(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ai(t.common.issues);return this._error=n,this._error}}};function He(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Ke{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ya(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ya(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fr,ctx:{common:e.parent.common,data:e.data,parsedType:Ya(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(S0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ya(e)},i=this._parseSync({data:e,path:s.path,parent:s});return oO(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ya(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(S0(s)?s:Promise.resolve(s));return oO(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:oe.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Pi({schema:this,typeName:je.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Ko.create(this,this._def)}nullable(){return hu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ii.create(this,this._def)}promise(){return vh.create(this,this._def)}or(e){return kg.create([this,e],this._def)}and(e){return Og.create(this,e,this._def)}transform(e){return new Pi({...He(this._def),schema:this,typeName:je.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Ug({...He(this._def),innerType:this,defaultValue:n,typeName:je.ZodDefault})}brand(){return new V4({typeName:je.ZodBranded,type:this,...He(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new N0({...He(this._def),innerType:this,catchValue:n,typeName:je.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return vm.create(this,e)}readonly(){return k0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const $ye=/^c[^\s-]{8,}$/i,Dye=/^[a-z][a-z0-9]*$/,jye=/^[0-9A-HJKMNP-TV-Z]{26}$/,Uye=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Lye=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Mye="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let w_;const Bye=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Fye=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,zye=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function qye(t,e){return!!((e==="v4"||!e)&&Bye.test(t)||(e==="v6"||!e)&&Fye.test(t))}class Ei extends Ke{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==we.string){const i=this._getOrReturnCtx(e);return Ee(i,{code:oe.invalid_type,expected:we.string,received:i.parsedType}),Be}const r=new fr;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ee(s,{code:oe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ee(s,{code:oe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ee(s,{code:oe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ee(s,{code:oe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Lye.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"email",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")w_||(w_=new RegExp(Mye,"u")),w_.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"emoji",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Uye.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"uuid",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")$ye.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"cuid",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Dye.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"cuid2",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")jye.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"ulid",code:oe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ee(s,{validation:"url",code:oe.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"regex",code:oe.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:oe.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:oe.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:oe.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?zye(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ee(s,{code:oe.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?qye(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ee(s,{validation:"ip",code:oe.invalid_string,message:i.message}),r.dirty()):dt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:oe.invalid_string,...Pe.errToObj(r)})}_addCheck(e){return new Ei({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Pe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Pe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Pe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Pe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Pe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Pe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Pe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Pe.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Pe.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Pe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Pe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Pe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Pe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Pe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Pe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Pe.errToObj(n)})}nonempty(e){return this.min(1,Pe.errToObj(e))}trim(){return new Ei({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ei({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ei({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ei.create=t=>{var e;return new Ei({checks:[],typeName:je.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...He(t)})};function Wye(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Fc extends Ke{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==we.number){const i=this._getOrReturnCtx(e);return Ee(i,{code:oe.invalid_type,expected:we.number,received:i.parsedType}),Be}let r;const s=new fr;for(const i of this._def.checks)i.kind==="int"?dt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:oe.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:oe.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:oe.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Wye(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:oe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ee(r,{code:oe.not_finite,message:i.message}),s.dirty()):dt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Pe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Pe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Pe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Pe.toString(n))}setLimit(e,n,r,s){return new Fc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Pe.toString(s)}]})}_addCheck(e){return new Fc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Pe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Pe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Pe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Pe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Pe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Pe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&dt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Fc.create=t=>new Fc({checks:[],typeName:je.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...He(t)});class zc extends Ke{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==we.bigint){const i=this._getOrReturnCtx(e);return Ee(i,{code:oe.invalid_type,expected:we.bigint,received:i.parsedType}),Be}let r;const s=new fr;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:oe.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:oe.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ee(r,{code:oe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):dt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Pe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Pe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Pe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Pe.toString(n))}setLimit(e,n,r,s){return new zc({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Pe.toString(s)}]})}_addCheck(e){return new zc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Pe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Pe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}zc.create=t=>{var e;return new zc({checks:[],typeName:je.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...He(t)})};class Tg extends Ke{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==we.boolean){const r=this._getOrReturnCtx(e);return Ee(r,{code:oe.invalid_type,expected:we.boolean,received:r.parsedType}),Be}return Ir(e.data)}}Tg.create=t=>new Tg({typeName:je.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...He(t)});class uu extends Ke{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==we.date){const i=this._getOrReturnCtx(e);return Ee(i,{code:oe.invalid_type,expected:we.date,received:i.parsedType}),Be}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ee(i,{code:oe.invalid_date}),Be}const r=new fr;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ee(s,{code:oe.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ee(s,{code:oe.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):dt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new uu({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Pe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Pe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}uu.create=t=>new uu({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:je.ZodDate,...He(t)});class A0 extends Ke{_parse(e){if(this._getType(e)!==we.symbol){const r=this._getOrReturnCtx(e);return Ee(r,{code:oe.invalid_type,expected:we.symbol,received:r.parsedType}),Be}return Ir(e.data)}}A0.create=t=>new A0({typeName:je.ZodSymbol,...He(t)});class Ng extends Ke{_parse(e){if(this._getType(e)!==we.undefined){const r=this._getOrReturnCtx(e);return Ee(r,{code:oe.invalid_type,expected:we.undefined,received:r.parsedType}),Be}return Ir(e.data)}}Ng.create=t=>new Ng({typeName:je.ZodUndefined,...He(t)});class Pg extends Ke{_parse(e){if(this._getType(e)!==we.null){const r=this._getOrReturnCtx(e);return Ee(r,{code:oe.invalid_type,expected:we.null,received:r.parsedType}),Be}return Ir(e.data)}}Pg.create=t=>new Pg({typeName:je.ZodNull,...He(t)});class wh extends Ke{constructor(){super(...arguments),this._any=!0}_parse(e){return Ir(e.data)}}wh.create=t=>new wh({typeName:je.ZodAny,...He(t)});class zl extends Ke{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ir(e.data)}}zl.create=t=>new zl({typeName:je.ZodUnknown,...He(t)});class ia extends Ke{_parse(e){const n=this._getOrReturnCtx(e);return Ee(n,{code:oe.invalid_type,expected:we.never,received:n.parsedType}),Be}}ia.create=t=>new ia({typeName:je.ZodNever,...He(t)});class I0 extends Ke{_parse(e){if(this._getType(e)!==we.undefined){const r=this._getOrReturnCtx(e);return Ee(r,{code:oe.invalid_type,expected:we.void,received:r.parsedType}),Be}return Ir(e.data)}}I0.create=t=>new I0({typeName:je.ZodVoid,...He(t)});class Ii extends Ke{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==we.array)return Ee(n,{code:oe.invalid_type,expected:we.array,received:n.parsedType}),Be;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Ee(n,{code:o?oe.too_big:oe.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ee(n,{code:oe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ee(n,{code:oe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new ho(n,o,n.path,a)))).then(o=>fr.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new ho(n,o,n.path,a)));return fr.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Ii({...this._def,minLength:{value:e,message:Pe.toString(n)}})}max(e,n){return new Ii({...this._def,maxLength:{value:e,message:Pe.toString(n)}})}length(e,n){return new Ii({...this._def,exactLength:{value:e,message:Pe.toString(n)}})}nonempty(e){return this.min(1,e)}}Ii.create=(t,e)=>new Ii({type:t,minLength:null,maxLength:null,exactLength:null,typeName:je.ZodArray,...He(e)});function dd(t){if(t instanceof Gt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Ko.create(dd(r))}return new Gt({...t._def,shape:()=>e})}else return t instanceof Ii?new Ii({...t._def,type:dd(t.element)}):t instanceof Ko?Ko.create(dd(t.unwrap())):t instanceof hu?hu.create(dd(t.unwrap())):t instanceof fo?fo.create(t.items.map(e=>dd(e))):t}class Gt extends Ke{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=dt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==we.object){const l=this._getOrReturnCtx(e);return Ee(l,{code:oe.invalid_type,expected:we.object,received:l.parsedType}),Be}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ia&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new ho(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ia){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Ee(s,{code:oe.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new ho(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>fr.mergeObjectSync(r,l)):fr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Pe.errToObj,new Gt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=Pe.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Gt({...this._def,unknownKeys:"strip"})}passthrough(){return new Gt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Gt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Gt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:je.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Gt({...this._def,catchall:e})}pick(e){const n={};return dt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Gt({...this._def,shape:()=>n})}omit(e){const n={};return dt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Gt({...this._def,shape:()=>n})}deepPartial(){return dd(this)}partial(e){const n={};return dt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Gt({...this._def,shape:()=>n})}required(e){const n={};return dt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ko;)i=i._def.innerType;n[r]=i}}),new Gt({...this._def,shape:()=>n})}keyof(){return H4(dt.objectKeys(this.shape))}}Gt.create=(t,e)=>new Gt({shape:()=>t,unknownKeys:"strip",catchall:ia.create(),typeName:je.ZodObject,...He(e)});Gt.strictCreate=(t,e)=>new Gt({shape:()=>t,unknownKeys:"strict",catchall:ia.create(),typeName:je.ZodObject,...He(e)});Gt.lazycreate=(t,e)=>new Gt({shape:t,unknownKeys:"strip",catchall:ia.create(),typeName:je.ZodObject,...He(e)});class kg extends Ke{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Ai(a.ctx.common.issues));return Ee(n,{code:oe.invalid_union,unionErrors:o}),Be}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Ai(c));return Ee(n,{code:oe.invalid_union,unionErrors:a}),Be}}get options(){return this._def.options}}kg.create=(t,e)=>new kg({options:t,typeName:je.ZodUnion,...He(e)});const vw=t=>t instanceof $g?vw(t.schema):t instanceof Pi?vw(t.innerType()):t instanceof Dg?[t.value]:t instanceof qc?t.options:t instanceof jg?Object.keys(t.enum):t instanceof Ug?vw(t._def.innerType):t instanceof Ng?[void 0]:t instanceof Pg?[null]:null;class Yv extends Ke{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==we.object)return Ee(n,{code:oe.invalid_type,expected:we.object,received:n.parsedType}),Be;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ee(n,{code:oe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=vw(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new Yv({typeName:je.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...He(r)})}}function Px(t,e){const n=Ya(t),r=Ya(e);if(t===e)return{valid:!0,data:t};if(n===we.object&&r===we.object){const s=dt.objectKeys(e),i=dt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=Px(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===we.array&&r===we.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=Px(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===we.date&&r===we.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Og extends Ke{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(Tx(i)||Tx(o))return Be;const a=Px(i.value,o.value);return a.valid?((Nx(i)||Nx(o))&&n.dirty(),{status:n.value,value:a.data}):(Ee(r,{code:oe.invalid_intersection_types}),Be)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Og.create=(t,e,n)=>new Og({left:t,right:e,typeName:je.ZodIntersection,...He(n)});class fo extends Ke{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==we.array)return Ee(r,{code:oe.invalid_type,expected:we.array,received:r.parsedType}),Be;if(r.data.length<this._def.items.length)return Ee(r,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&r.data.length>this._def.items.length&&(Ee(r,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new ho(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>fr.mergeArray(n,o)):fr.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new fo({...this._def,rest:e})}}fo.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new fo({items:t,typeName:je.ZodTuple,rest:null,...He(e)})};class Rg extends Ke{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==we.object)return Ee(r,{code:oe.invalid_type,expected:we.object,received:r.parsedType}),Be;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new ho(r,a,r.path,a)),value:o._parse(new ho(r,r.data[a],r.path,a))});return r.common.async?fr.mergeObjectAsync(n,s):fr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ke?new Rg({keyType:e,valueType:n,typeName:je.ZodRecord,...He(r)}):new Rg({keyType:Ei.create(),valueType:e,typeName:je.ZodRecord,...He(n)})}}class T0 extends Ke{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==we.map)return Ee(r,{code:oe.invalid_type,expected:we.map,received:r.parsedType}),Be;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new ho(r,a,r.path,[l,"key"])),value:i._parse(new ho(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Be;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Be;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}T0.create=(t,e,n)=>new T0({valueType:e,keyType:t,typeName:je.ZodMap,...He(n)});class du extends Ke{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==we.set)return Ee(r,{code:oe.invalid_type,expected:we.set,received:r.parsedType}),Be;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ee(r,{code:oe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ee(r,{code:oe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Be;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new ho(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new du({...this._def,minSize:{value:e,message:Pe.toString(n)}})}max(e,n){return new du({...this._def,maxSize:{value:e,message:Pe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}du.create=(t,e)=>new du({valueType:t,minSize:null,maxSize:null,typeName:je.ZodSet,...He(e)});class Bd extends Ke{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==we.function)return Ee(n,{code:oe.invalid_type,expected:we.function,received:n.parsedType}),Be;function r(a,c){return x0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,C0(),Ag].filter(l=>!!l),issueData:{code:oe.invalid_arguments,argumentsError:c}})}function s(a,c){return x0({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,C0(),Ag].filter(l=>!!l),issueData:{code:oe.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof vh){const a=this;return Ir(async function(...c){const l=new Ai([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Ir(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Ai([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Ai([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Bd({...this._def,args:fo.create(e).rest(zl.create())})}returns(e){return new Bd({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Bd({args:e||fo.create([]).rest(zl.create()),returns:n||zl.create(),typeName:je.ZodFunction,...He(r)})}}class $g extends Ke{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}$g.create=(t,e)=>new $g({getter:t,typeName:je.ZodLazy,...He(e)});class Dg extends Ke{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ee(n,{received:n.data,code:oe.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:e.data}}get value(){return this._def.value}}Dg.create=(t,e)=>new Dg({value:t,typeName:je.ZodLiteral,...He(e)});function H4(t,e){return new qc({values:t,typeName:je.ZodEnum,...He(e)})}class qc extends Ke{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ee(n,{expected:dt.joinValues(r),received:n.parsedType,code:oe.invalid_type}),Be}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Ee(n,{received:n.data,code:oe.invalid_enum_value,options:r}),Be}return Ir(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return qc.create(e)}exclude(e){return qc.create(this.options.filter(n=>!e.includes(n)))}}qc.create=H4;class jg extends Ke{_parse(e){const n=dt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==we.string&&r.parsedType!==we.number){const s=dt.objectValues(n);return Ee(r,{expected:dt.joinValues(s),received:r.parsedType,code:oe.invalid_type}),Be}if(n.indexOf(e.data)===-1){const s=dt.objectValues(n);return Ee(r,{received:r.data,code:oe.invalid_enum_value,options:s}),Be}return Ir(e.data)}get enum(){return this._def.values}}jg.create=(t,e)=>new jg({values:t,typeName:je.ZodNativeEnum,...He(e)});class vh extends Ke{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==we.promise&&n.common.async===!1)return Ee(n,{code:oe.invalid_type,expected:we.promise,received:n.parsedType}),Be;const r=n.parsedType===we.promise?n.data:Promise.resolve(n.data);return Ir(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}vh.create=(t,e)=>new vh({type:t,typeName:je.ZodPromise,...He(e)});class Pi extends Ke{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===je.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ee(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ig(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ig(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);dt.assertNever(s)}}Pi.create=(t,e,n)=>new Pi({schema:t,typeName:je.ZodEffects,effect:e,...He(n)});Pi.createWithPreprocess=(t,e,n)=>new Pi({schema:e,effect:{type:"preprocess",transform:t},typeName:je.ZodEffects,...He(n)});class Ko extends Ke{_parse(e){return this._getType(e)===we.undefined?Ir(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ko.create=(t,e)=>new Ko({innerType:t,typeName:je.ZodOptional,...He(e)});class hu extends Ke{_parse(e){return this._getType(e)===we.null?Ir(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}hu.create=(t,e)=>new hu({innerType:t,typeName:je.ZodNullable,...He(e)});class Ug extends Ke{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===we.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Ug.create=(t,e)=>new Ug({innerType:t,typeName:je.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...He(e)});class N0 extends Ke{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return S0(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ai(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ai(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}N0.create=(t,e)=>new N0({innerType:t,typeName:je.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...He(e)});class P0 extends Ke{_parse(e){if(this._getType(e)!==we.nan){const r=this._getOrReturnCtx(e);return Ee(r,{code:oe.invalid_type,expected:we.nan,received:r.parsedType}),Be}return{status:"valid",value:e.data}}}P0.create=t=>new P0({typeName:je.ZodNaN,...He(t)});const Hye=Symbol("zod_brand");class V4 extends Ke{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class vm extends Ke{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Be:i.status==="dirty"?(n.dirty(),W4(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Be:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new vm({in:e,out:n,typeName:je.ZodPipeline})}}class k0 extends Ke{_parse(e){const n=this._def.innerType._parse(e);return Ig(n)&&(n.value=Object.freeze(n.value)),n}}k0.create=(t,e)=>new k0({innerType:t,typeName:je.ZodReadonly,...He(e)});const G4=(t,e={},n)=>t?wh.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):wh.create(),Vye={object:Gt.lazycreate};var je;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(je||(je={}));const Gye=(t,e={message:`Input not instance of ${t.name}`})=>G4(n=>n instanceof t,e),K4=Ei.create,Y4=Fc.create,Kye=P0.create,Yye=zc.create,Q4=Tg.create,Qye=uu.create,Jye=A0.create,Zye=Ng.create,Xye=Pg.create,ewe=wh.create,twe=zl.create,nwe=ia.create,rwe=I0.create,swe=Ii.create,iwe=Gt.create,owe=Gt.strictCreate,awe=kg.create,cwe=Yv.create,lwe=Og.create,uwe=fo.create,dwe=Rg.create,hwe=T0.create,fwe=du.create,pwe=Bd.create,gwe=$g.create,mwe=Dg.create,ywe=qc.create,wwe=jg.create,vwe=vh.create,aO=Pi.create,bwe=Ko.create,_we=hu.create,Ewe=Pi.createWithPreprocess,Cwe=vm.create,xwe=()=>K4().optional(),Swe=()=>Y4().optional(),Awe=()=>Q4().optional(),Iwe={string:t=>Ei.create({...t,coerce:!0}),number:t=>Fc.create({...t,coerce:!0}),boolean:t=>Tg.create({...t,coerce:!0}),bigint:t=>zc.create({...t,coerce:!0}),date:t=>uu.create({...t,coerce:!0})},Twe=Be;var P=Object.freeze({__proto__:null,defaultErrorMap:Ag,setErrorMap:Oye,getErrorMap:C0,makeIssue:x0,EMPTY_PATH:Rye,addIssueToContext:Ee,ParseStatus:fr,INVALID:Be,DIRTY:W4,OK:Ir,isAborted:Tx,isDirty:Nx,isValid:Ig,isAsync:S0,get util(){return dt},get objectUtil(){return Ix},ZodParsedType:we,getParsedType:Ya,ZodType:Ke,ZodString:Ei,ZodNumber:Fc,ZodBigInt:zc,ZodBoolean:Tg,ZodDate:uu,ZodSymbol:A0,ZodUndefined:Ng,ZodNull:Pg,ZodAny:wh,ZodUnknown:zl,ZodNever:ia,ZodVoid:I0,ZodArray:Ii,ZodObject:Gt,ZodUnion:kg,ZodDiscriminatedUnion:Yv,ZodIntersection:Og,ZodTuple:fo,ZodRecord:Rg,ZodMap:T0,ZodSet:du,ZodFunction:Bd,ZodLazy:$g,ZodLiteral:Dg,ZodEnum:qc,ZodNativeEnum:jg,ZodPromise:vh,ZodEffects:Pi,ZodTransformer:Pi,ZodOptional:Ko,ZodNullable:hu,ZodDefault:Ug,ZodCatch:N0,ZodNaN:P0,BRAND:Hye,ZodBranded:V4,ZodPipeline:vm,ZodReadonly:k0,custom:G4,Schema:Ke,ZodSchema:Ke,late:Vye,get ZodFirstPartyTypeKind(){return je},coerce:Iwe,any:ewe,array:swe,bigint:Yye,boolean:Q4,date:Qye,discriminatedUnion:cwe,effect:aO,enum:ywe,function:pwe,instanceof:Gye,intersection:lwe,lazy:gwe,literal:mwe,map:hwe,nan:Kye,nativeEnum:wwe,never:nwe,null:Xye,nullable:_we,number:Y4,object:iwe,oboolean:Awe,onumber:Swe,optional:bwe,ostring:xwe,pipeline:Cwe,preprocess:Ewe,promise:vwe,record:dwe,set:fwe,strictObject:owe,string:K4,symbol:Jye,transformer:aO,tuple:uwe,undefined:Zye,union:awe,unknown:twe,void:rwe,NEVER:Twe,ZodIssueCode:oe,quotelessJson:kye,ZodError:Ai});const Xt=P.object({message:P.string()});function ve(t){return P.literal(Ce[t])}P.object({accessList:P.array(P.string()),blockHash:P.string().nullable(),blockNumber:P.string().nullable(),chainId:P.string().or(P.number()),from:P.string(),gas:P.string(),hash:P.string(),input:P.string().nullable(),maxFeePerGas:P.string(),maxPriorityFeePerGas:P.string(),nonce:P.string(),r:P.string(),s:P.string(),to:P.string(),transactionIndex:P.string().nullable(),type:P.string(),v:P.string(),value:P.string()});const Nwe=P.object({chainId:P.string().or(P.number())}),Pwe=P.object({email:P.string().email()}),kwe=P.object({otp:P.string()}),Owe=P.object({uri:P.string(),preferredAccountType:P.optional(P.string()),chainId:P.optional(P.string().or(P.number()))}),Rwe=P.object({chainId:P.optional(P.string().or(P.number())),preferredAccountType:P.optional(P.string()),socialUri:P.optional(P.string())}),$we=P.object({provider:P.enum(["google","github","apple","facebook","x","discord"])}),Dwe=P.object({email:P.string().email()}),jwe=P.object({otp:P.string()}),Uwe=P.object({otp:P.string()}),Lwe=P.object({themeMode:P.optional(P.enum(["light","dark"])),themeVariables:P.optional(P.record(P.string(),P.string().or(P.number()))),w3mThemeVariables:P.optional(P.record(P.string(),P.string()))}),Mwe=P.object({metadata:P.object({name:P.string(),description:P.string(),url:P.string(),icons:P.array(P.string())}).optional(),sdkVersion:P.string().optional(),sdkType:P.string().optional(),projectId:P.string()}),Bwe=P.object({type:P.string()}),Fwe=P.object({action:P.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),zwe=P.object({url:P.string()}),qwe=P.object({userName:P.string()}),Wwe=P.object({email:P.string().optional().nullable(),address:P.string(),chainId:P.string().or(P.number()),accounts:P.array(P.object({address:P.string(),type:P.enum([Dn.ACCOUNT_TYPES.EOA,Dn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:P.string().optional().nullable(),preferredAccountType:P.optional(P.string())}),Hwe=P.object({action:P.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),Vwe=P.object({email:P.string().email().optional().nullable(),address:P.string(),chainId:P.string().or(P.number()),smartAccountDeployed:P.optional(P.boolean()),accounts:P.array(P.object({address:P.string(),type:P.enum([Dn.ACCOUNT_TYPES.EOA,Dn.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:P.optional(P.string())}),Gwe=P.object({uri:P.string()}),Kwe=P.object({isConnected:P.boolean()}),Ywe=P.object({chainId:P.string().or(P.number())}),Qwe=P.object({chainId:P.string().or(P.number())}),Jwe=P.object({newEmail:P.string().email()}),Zwe=P.object({smartAccountEnabledNetworks:P.array(P.number())});P.object({address:P.string(),isDeployed:P.boolean()});const Xwe=P.object({version:P.string().optional()}),e0e=P.object({type:P.string(),address:P.string()}),t0e=P.any(),n0e=P.object({method:P.literal("eth_accounts")}),r0e=P.object({method:P.literal("eth_blockNumber")}),s0e=P.object({method:P.literal("eth_call"),params:P.array(P.any())}),i0e=P.object({method:P.literal("eth_chainId")}),o0e=P.object({method:P.literal("eth_estimateGas"),params:P.array(P.any())}),a0e=P.object({method:P.literal("eth_feeHistory"),params:P.array(P.any())}),c0e=P.object({method:P.literal("eth_gasPrice")}),l0e=P.object({method:P.literal("eth_getAccount"),params:P.array(P.any())}),u0e=P.object({method:P.literal("eth_getBalance"),params:P.array(P.any())}),d0e=P.object({method:P.literal("eth_getBlockByHash"),params:P.array(P.any())}),h0e=P.object({method:P.literal("eth_getBlockByNumber"),params:P.array(P.any())}),f0e=P.object({method:P.literal("eth_getBlockReceipts"),params:P.array(P.any())}),p0e=P.object({method:P.literal("eth_getBlockTransactionCountByHash"),params:P.array(P.any())}),g0e=P.object({method:P.literal("eth_getBlockTransactionCountByNumber"),params:P.array(P.any())}),m0e=P.object({method:P.literal("eth_getCode"),params:P.array(P.any())}),y0e=P.object({method:P.literal("eth_getFilterChanges"),params:P.array(P.any())}),w0e=P.object({method:P.literal("eth_getFilterLogs"),params:P.array(P.any())}),v0e=P.object({method:P.literal("eth_getLogs"),params:P.array(P.any())}),b0e=P.object({method:P.literal("eth_getProof"),params:P.array(P.any())}),_0e=P.object({method:P.literal("eth_getStorageAt"),params:P.array(P.any())}),E0e=P.object({method:P.literal("eth_getTransactionByBlockHashAndIndex"),params:P.array(P.any())}),C0e=P.object({method:P.literal("eth_getTransactionByBlockNumberAndIndex"),params:P.array(P.any())}),x0e=P.object({method:P.literal("eth_getTransactionByHash"),params:P.array(P.any())}),S0e=P.object({method:P.literal("eth_getTransactionCount"),params:P.array(P.any())}),A0e=P.object({method:P.literal("eth_getTransactionReceipt"),params:P.array(P.any())}),I0e=P.object({method:P.literal("eth_getUncleCountByBlockHash"),params:P.array(P.any())}),T0e=P.object({method:P.literal("eth_getUncleCountByBlockNumber"),params:P.array(P.any())}),N0e=P.object({method:P.literal("eth_maxPriorityFeePerGas")}),P0e=P.object({method:P.literal("eth_newBlockFilter")}),k0e=P.object({method:P.literal("eth_newFilter"),params:P.array(P.any())}),O0e=P.object({method:P.literal("eth_newPendingTransactionFilter")}),R0e=P.object({method:P.literal("eth_sendRawTransaction"),params:P.array(P.any())}),$0e=P.object({method:P.literal("eth_syncing"),params:P.array(P.any())}),D0e=P.object({method:P.literal("eth_uninstallFilter"),params:P.array(P.any())}),cO=P.object({method:P.literal("personal_sign"),params:P.array(P.any())}),j0e=P.object({method:P.literal("eth_signTypedData_v4"),params:P.array(P.any())}),U0e=P.object({method:P.literal("eth_sendTransaction"),params:P.array(P.any())}),L0e=P.object({method:P.literal("solana_signMessage"),params:P.object({message:P.string(),pubkey:P.string()})}),M0e=P.object({method:P.literal("solana_signTransaction"),params:P.object({transaction:P.string()})}),B0e=P.object({method:P.literal("solana_signAllTransactions"),params:P.object({transactions:P.array(P.string())})}),F0e=P.object({method:P.literal("solana_signAndSendTransaction"),params:P.object({transaction:P.string(),options:P.object({skipPreflight:P.boolean().optional(),preflightCommitment:P.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:P.number().optional(),minContextSlot:P.number().optional()}).optional()})}),z0e=P.object({method:P.literal("wallet_sendCalls"),params:P.array(P.object({chainId:P.string().or(P.number()).optional(),from:P.string().optional(),version:P.string().optional(),capabilities:P.any().optional(),calls:P.array(P.object({to:P.string().startsWith("0x"),data:P.string().startsWith("0x").optional(),value:P.string().optional()}))}))}),q0e=P.object({method:P.literal("wallet_getCallsStatus"),params:P.array(P.string())}),W0e=P.object({method:P.literal("wallet_getCapabilities")}),H0e=P.object({method:P.literal("wallet_grantPermissions"),params:P.array(P.any())}),V0e=P.object({method:P.literal("wallet_revokePermissions"),params:P.any()}),G0e=P.object({method:P.literal("wallet_getAssets"),params:P.any()}),lO=P.object({token:P.string()}),be=P.object({id:P.string().optional()}),Sf={appEvent:be.extend({type:ve("APP_SWITCH_NETWORK"),payload:Nwe}).or(be.extend({type:ve("APP_CONNECT_EMAIL"),payload:Pwe})).or(be.extend({type:ve("APP_CONNECT_DEVICE")})).or(be.extend({type:ve("APP_CONNECT_OTP"),payload:kwe})).or(be.extend({type:ve("APP_CONNECT_SOCIAL"),payload:Owe})).or(be.extend({type:ve("APP_GET_FARCASTER_URI")})).or(be.extend({type:ve("APP_CONNECT_FARCASTER")})).or(be.extend({type:ve("APP_GET_USER"),payload:P.optional(Rwe)})).or(be.extend({type:ve("APP_GET_SOCIAL_REDIRECT_URI"),payload:$we})).or(be.extend({type:ve("APP_SIGN_OUT")})).or(be.extend({type:ve("APP_IS_CONNECTED"),payload:P.optional(lO)})).or(be.extend({type:ve("APP_GET_CHAIN_ID")})).or(be.extend({type:ve("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(be.extend({type:ve("APP_INIT_SMART_ACCOUNT")})).or(be.extend({type:ve("APP_SET_PREFERRED_ACCOUNT"),payload:Bwe})).or(be.extend({type:ve("APP_RPC_REQUEST"),payload:cO.or(G0e).or(n0e).or(r0e).or(s0e).or(i0e).or(o0e).or(a0e).or(c0e).or(l0e).or(u0e).or(d0e).or(h0e).or(f0e).or(p0e).or(g0e).or(m0e).or(y0e).or(w0e).or(v0e).or(b0e).or(_0e).or(E0e).or(C0e).or(x0e).or(S0e).or(A0e).or(I0e).or(T0e).or(N0e).or(P0e).or(k0e).or(O0e).or(R0e).or($0e).or(D0e).or(cO).or(j0e).or(U0e).or(L0e).or(M0e).or(B0e).or(F0e).or(q0e).or(z0e).or(W0e).or(H0e).or(V0e)})).or(be.extend({type:ve("APP_UPDATE_EMAIL"),payload:Dwe})).or(be.extend({type:ve("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:jwe})).or(be.extend({type:ve("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Uwe})).or(be.extend({type:ve("APP_SYNC_THEME"),payload:Lwe})).or(be.extend({type:ve("APP_SYNC_DAPP_DATA"),payload:Mwe})).or(be.extend({type:ve("APP_RELOAD")})),frameEvent:be.extend({type:ve("FRAME_SWITCH_NETWORK_ERROR"),payload:Xt}).or(be.extend({type:ve("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Qwe})).or(be.extend({type:ve("FRAME_CONNECT_EMAIL_SUCCESS"),payload:Fwe})).or(be.extend({type:ve("FRAME_CONNECT_EMAIL_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:zwe})).or(be.extend({type:ve("FRAME_GET_FARCASTER_URI_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:qwe})).or(be.extend({type:ve("FRAME_CONNECT_FARCASTER_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_CONNECT_OTP_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_CONNECT_OTP_SUCCESS")})).or(be.extend({type:ve("FRAME_CONNECT_DEVICE_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_CONNECT_DEVICE_SUCCESS")})).or(be.extend({type:ve("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:Wwe})).or(be.extend({type:ve("FRAME_CONNECT_SOCIAL_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_GET_USER_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_GET_USER_SUCCESS"),payload:Vwe})).or(be.extend({type:ve("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Gwe})).or(be.extend({type:ve("FRAME_SIGN_OUT_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_SIGN_OUT_SUCCESS")})).or(be.extend({type:ve("FRAME_IS_CONNECTED_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_IS_CONNECTED_SUCCESS"),payload:Kwe})).or(be.extend({type:ve("FRAME_GET_CHAIN_ID_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Ywe})).or(be.extend({type:ve("FRAME_RPC_REQUEST_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_RPC_REQUEST_SUCCESS"),payload:t0e})).or(be.extend({type:ve("FRAME_SESSION_UPDATE"),payload:lO})).or(be.extend({type:ve("FRAME_UPDATE_EMAIL_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_UPDATE_EMAIL_SUCCESS"),payload:Hwe})).or(be.extend({type:ve("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(be.extend({type:ve("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Jwe})).or(be.extend({type:ve("FRAME_SYNC_THEME_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_SYNC_THEME_SUCCESS")})).or(be.extend({type:ve("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(be.extend({type:ve("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Zwe})).or(be.extend({type:ve("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:e0e})).or(be.extend({type:ve("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_READY"),payload:Xwe})).or(be.extend({type:ve("FRAME_RELOAD_ERROR"),payload:Xt})).or(be.extend({type:ve("FRAME_RELOAD_SUCCESS")}))};function v_(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}class K0e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=X.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!v_(Ce.FRAME_EVENT_KEY,l))return;const u=Sf.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}ps.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{ps.isClient&&window.addEventListener("message",({data:o})=>{if(!v_(Ce.FRAME_EVENT_KEY,o))return;const a=Sf.frameEvent.parse(o);i(a)})},onAppEvent:i=>{ps.isClient&&window.addEventListener("message",({data:o})=>{if(!v_(Ce.APP_EVENT_KEY,o))return;const a=Sf.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(ps.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Sf.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(ps.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Sf.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),ps.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${CZ}?projectId=${e}&chainId=${r}&version=${SZ}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class Y0e{constructor(e){var i;const n=$h({level:xZ}),{logger:r,chunkLoggerController:s}=RA({opts:n});this.logger=pr(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Q0e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Y0e(e)),this.abortController=i,this.w3mFrame=new K0e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!zn.get(Ce.EMAIL_LOGIN_USED_KEY)}getEmail(){return zn.get(Ce.EMAIL)}getUsername(){return zn.get(Ce.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ce.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{ps.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ce.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ce.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ce.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ce.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ce.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ce.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ce.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ce.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ce.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ce.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ce.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ce.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ce.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ce.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ce.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ce.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ce.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ce.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ce.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ce.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Dn.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ce.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ce.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ce.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Dn.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ce.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ce.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Dn.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ce.APP_SYNC_DAPP_DATA,Ce.APP_SYNC_THEME,Ce.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ce.APP_CONNECT_EMAIL,Ce.APP_CONNECT_DEVICE,Ce.APP_CONNECT_OTP,Ce.APP_CONNECT_SOCIAL,Ce.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,w){var b,v,E;y.id===u&&((v=w==null?void 0:(b=w.logger).info)==null||v.call(b,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((E=y.payload)==null?void 0:E.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){zn.set(Ce.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){zn.set(Ce.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&zn.set(Ce.EMAIL,e),zn.set(Ce.EMAIL_LOGIN_USED_KEY,"true"),zn.delete(Ce.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){zn.delete(Ce.EMAIL_LOGIN_USED_KEY),zn.delete(Ce.EMAIL),zn.delete(Ce.LAST_USED_CHAIN_KEY),zn.delete(Ce.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&zn.set(Ce.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=zn.get(Ce.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){zn.set(Ce.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class ql{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return ql.instance||(ql.instance=new Q0e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),ql.instance}}var uO={};const J0e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof uO<"u"?uO.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},kx={filterOutDuplicatesByRDNS(t){const e=se.state.enableEIP6963?fe.state.connectors:[],n=he.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Se.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=fe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=he.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=fe.state,{featuredWalletIds:n}=se.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=se.state.features)==null?void 0:c.connectMethodsOrder),r=e||fe.state.connectors;if(n)return n;const{injected:s,announced:i}=bw.getConnectorsByType(r,Te.state.recommended,Te.state.featured),o=s.filter(bw.showConnector),a=i.filter(bw.showConnector);return o.length||a.length?["wallet","email","social"]:J0e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Te.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Te.state.excludedWallets.some(r=>Sg.isLowerCaseMatch(r.name,t.name));return e||n}},bw={getConnectorsByType(t,e,n){const{customWallets:r}=se.state,s=he.getRecentWallets(),i=kx.filterOutDuplicateWallets(e),o=kx.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Te.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Te.state.excludedWallets.some(i=>Sg.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Se.isMobile()||Se.isMobile()&&!e&&!_e.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(D.state.chains.values()).some(n=>fe.getConnectorId(n.namespace)===X.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=se.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=bw.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:se.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),p=new Set(f.map(w=>w.type)),g=c.filter(w=>p.has(w)).map(w=>({type:w,isEnabled:!0})),y=f.filter(({type:w})=>!g.some(({type:v})=>v===w));return Array.from(new Set([...g,...y].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!Se.isMobile())return{accounts:[],chainId:void 0};if(t.id===X.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _w=globalThis,fI=_w.ShadowRoot&&(_w.ShadyCSS===void 0||_w.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,pI=Symbol(),dO=new WeakMap;let J4=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==pI)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(fI&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=dO.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&dO.set(n,e))}return e}toString(){return this.cssText}};const Rs=t=>new J4(typeof t=="string"?t:t+"",void 0,pI),Fd=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new J4(n,t,pI)},Z0e=(t,e)=>{if(fI)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=_w.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},hO=fI?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Rs(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:X0e,defineProperty:eve,getOwnPropertyDescriptor:tve,getOwnPropertyNames:nve,getOwnPropertySymbols:rve,getPrototypeOf:sve}=Object,Pc=globalThis,fO=Pc.trustedTypes,ive=fO?fO.emptyScript:"",b_=Pc.reactiveElementPolyfillSupport,mp=(t,e)=>t,Ox={toAttribute(t,e){switch(e){case Boolean:t=t?ive:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Z4=(t,e)=>!X0e(t,e),pO={attribute:!0,type:String,converter:Ox,reflect:!1,useDefault:!1,hasChanged:Z4};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Pc.litPropertyMetadata??(Pc.litPropertyMetadata=new WeakMap);let hd=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=pO){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&eve(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=tve(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??pO}static _$Ei(){if(this.hasOwnProperty(mp("elementProperties")))return;const e=sve(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(mp("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(mp("properties"))){const n=this.properties,r=[...nve(n),...rve(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(hO(s))}else e!==void 0&&n.push(hO(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Z0e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:Ox).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:Ox;this._$Em=s,this[s]=c.fromAttribute(n,a.type)??((o=this._$Ej)==null?void 0:o.get(s))??null,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??Z4)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};hd.elementStyles=[],hd.shadowRootOptions={mode:"open"},hd[mp("elementProperties")]=new Map,hd[mp("finalized")]=new Map,b_==null||b_({ReactiveElement:hd}),(Pc.reactiveElementVersions??(Pc.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yp=globalThis,O0=yp.trustedTypes,gO=O0?O0.createPolicy("lit-html",{createHTML:t=>t}):void 0,X4="$lit$",Qa=`lit$${Math.random().toFixed(9).slice(2)}$`,eU="?"+Qa,ove=`<${eU}>`,fu=document,Lg=()=>fu.createComment(""),Mg=t=>t===null||typeof t!="object"&&typeof t!="function",gI=Array.isArray,ave=t=>gI(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",__=`[ 	
\f\r]`,Af=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,mO=/-->/g,yO=/>/g,sl=RegExp(`>|${__}(?:([^\\s"'>=/]+)(${__}*=${__}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),wO=/'/g,vO=/"/g,tU=/^(?:script|style|textarea|title)$/i,nU=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),kEe=nU(1),OEe=nU(2),bh=Symbol.for("lit-noChange"),On=Symbol.for("lit-nothing"),bO=new WeakMap,Nl=fu.createTreeWalker(fu,129);function rU(t,e){if(!gI(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return gO!==void 0?gO.createHTML(e):e}const cve=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Af;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Af?u[1]==="!--"?o=mO:u[1]!==void 0?o=yO:u[2]!==void 0?(tU.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=sl):u[3]!==void 0&&(o=sl):o===sl?u[0]===">"?(o=s??Af,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?sl:u[3]==='"'?vO:wO):o===vO||o===wO?o=sl:o===mO||o===yO?o=Af:(o=sl,s=void 0);const f=o===sl&&t[a+1].startsWith("/>")?" ":"";i+=o===Af?c+ove:d>=0?(r.push(l),c.slice(0,d)+X4+c.slice(d)+Qa+f):c+Qa+(d===-2?a:f)}return[rU(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Bg{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=cve(e,n);if(this.el=Bg.createElement(l,r),Nl.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Nl.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(X4)){const h=u[o++],f=s.getAttribute(d).split(Qa),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?uve:p[1]==="?"?dve:p[1]==="@"?hve:Qv}),s.removeAttribute(d)}else d.startsWith(Qa)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(tU.test(s.tagName)){const d=s.textContent.split(Qa),h=d.length-1;if(h>0){s.textContent=O0?O0.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Lg()),Nl.nextNode(),c.push({type:2,index:++i});s.append(d[h],Lg())}}}else if(s.nodeType===8)if(s.data===eU)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Qa,d+1))!==-1;)c.push({type:7,index:i}),d+=Qa.length-1}i++}}static createElement(e,n){const r=fu.createElement("template");return r.innerHTML=e,r}}function _h(t,e,n=t,r){var o,a;if(e===bh)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Mg(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=_h(t,s._$AS(t,e.values),s,r)),e}class lve{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??fu).importNode(n,!0);Nl.currentNode=s;let i=Nl.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new bm(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new fve(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Nl.nextNode(),o++)}return Nl.currentNode=fu,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class bm{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=On,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=_h(this,e,n),Mg(e)?e===On||e==null||e===""?(this._$AH!==On&&this._$AR(),this._$AH=On):e!==this._$AH&&e!==bh&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):ave(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==On&&Mg(this._$AH)?this._$AA.nextSibling.data=e:this.T(fu.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Bg.createElement(rU(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new lve(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=bO.get(e.strings);return n===void 0&&bO.set(e.strings,n=new Bg(e)),n}k(e){gI(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new bm(this.O(Lg()),this.O(Lg()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e&&e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class Qv{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=On,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=On}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=_h(this,e,n,0),o=!Mg(e)||e!==this._$AH&&e!==bh,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=_h(this,a[r+c],n,c),l===bh&&(l=this._$AH[c]),o||(o=!Mg(l)||l!==this._$AH[c]),l===On?e=On:e!==On&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===On?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class uve extends Qv{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===On?void 0:e}}class dve extends Qv{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==On)}}class hve extends Qv{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=_h(this,e,n,0)??On)===bh)return;const r=this._$AH,s=e===On&&r!==On||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==On&&(r===On||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class fve{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){_h(this,e)}}const E_=yp.litHtmlPolyfillSupport;E_==null||E_(Bg,bm),(yp.litHtmlVersions??(yp.litHtmlVersions=[])).push("3.3.0");const pve=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new bm(e.insertBefore(Lg(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Wl=globalThis;class Ew extends hd{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=pve(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return bh}}var eR;Ew._$litElement$=!0,Ew.finalized=!0,(eR=Wl.litElementHydrateSupport)==null||eR.call(Wl,{LitElement:Ew});const C_=Wl.litElementPolyfillSupport;C_==null||C_({LitElement:Ew});(Wl.litElementVersions??(Wl.litElementVersions=[])).push("4.2.0");let wp,kc,Oc;function REe(t,e){wp=document.createElement("style"),kc=document.createElement("style"),Oc=document.createElement("style"),wp.textContent=zd(t).core.cssText,kc.textContent=zd(t).dark.cssText,Oc.textContent=zd(t).light.cssText,document.head.appendChild(wp),document.head.appendChild(kc),document.head.appendChild(Oc),sU(e)}function sU(t){kc&&Oc&&(t==="light"?(kc.removeAttribute("media"),Oc.media="enabled"):(Oc.removeAttribute("media"),kc.media="enabled"))}function gve(t){wp&&kc&&Oc&&(wp.textContent=zd(t).core.cssText,kc.textContent=zd(t).dark.cssText,Oc.textContent=zd(t).light.cssText)}function zd(t){return{core:Fd`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Rs(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Rs((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Rs((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Rs((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Rs((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Fd`
      :root {
        --w3m-color-mix: ${Rs((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Rs(qo(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Rs(qo(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Fd`
      :root {
        --w3m-color-mix: ${Rs((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Rs(qo(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Rs(qo(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const $Ee=Fd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,DEe=Fd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,jEe=Fd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Wf={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},iU=pz({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function _m(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const _O=_m({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),EO=_m({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});_m({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});_m({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});_m({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const mve={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},vp={getMethodsByChainNamespace(t){return mve[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case _O.caipNetworkId:u.chains.push(_O.deprecatedCaipNetworkId);break;case EO.caipNetworkId:u.chains.push(EO.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await ip.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};class mI{constructor({provider:e,namespace:n}){this.id=X.CONNECTOR_ID.WALLET_CONNECT,this.name=pc.ConnectorNamesMap[X.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=pc.ConnectorImageIds[X.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=D.getCaipNetworks.bind(D),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=se.state.universalProviderConfigOverride,s=vp.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return gp.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:yve})}}const yve=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class oU{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>D.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:X.CONNECTOR_ID.AUTH,type:"AUTH",name:X.CONNECTOR_NAMES.AUTH,provider:e,imageId:pc.ConnectorImageIds[X.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){de.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=de.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof mI);if(!e)throw new Error("WalletConnectConnector not found");return e}}class wve extends oU{setUniversalProvider(e){this.addConnector(new mI({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Se.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&bt.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(de.state.balanceLoading&&e.chainId===((c=D.state.activeCaipNetwork)==null?void 0:c.id))return{balance:de.state.balance||"0.00",symbol:de.state.balanceSymbol||""};const s=(await de.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=D.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===X.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:Mh.encode(new TextEncoder().encode(r)),pubkey:s}},(a=D.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=D.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===X.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Ql(n.id)}]}))}catch(u){if(u.code===Wf.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Wf.ERROR_INVALID_CHAIN_ID||u.code===Wf.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Wf.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Ql(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const vve=["email","socials","swaps","onramp","activity","reownBranding"],Uy={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?bt.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?bt.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?bt.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?bt.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?bt.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?bt.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?bt.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?bt.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?bt.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},bve={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=Uy[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=Uy[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return Uy[t].processApi(e)},processFallbackFeature(t,e){return Uy[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Te.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?bt.DEFAULT_REMOTE_FEATURES:bt.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of vve){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),bt.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;un.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class _ve{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=D.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=D.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=D.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return D.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>D.getCaipNetworks(n),this.getActiveChainNamespace=()=>D.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{D.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>D.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>D.state.activeChain===n||!n?D.state.activeCaipAddress:D.getAccountProp("caipAddress",n),this.setClientId=n=>{Oe.setClientId(n)},this.getProvider=n=>It.getProvider(n),this.getProviderType=n=>It.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=de.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{de.setCaipAddress(n,r),n&&se.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{de.setBalance(n,r,s)},this.setProfileName=(n,r)=>{de.setProfileName(n,r)},this.setProfileImage=(n,r)=>{de.setProfileImage(n,r)},this.setUser=(n,r)=>{de.setUser(n,r)},this.resetAccount=n=>{de.resetAccount(n)},this.setCaipNetwork=n=>{D.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{D.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{de.setAllAccounts(n,r),se.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{de.setStatus(n,r),fe.isConnected()?he.setConnectionStatus("connected"):he.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>D.getAccountProp("address",n),this.setConnectors=n=>{const r=[...fe.state.allConnectors,...n];fe.setConnectors(r)},this.setConnections=(n,r)=>{_e.setConnections(n,r)},this.fetchIdentity=n=>Oe.fetchIdentity(n),this.getReownName=n=>ip.getNamesForAddress(n),this.getConnectors=()=>fe.getConnectors(),this.getConnectorImage=n=>O8.getConnectorImage(n),this.getConnections=n=>gg.getConnectionsData(n).connections,this.getRecentConnections=n=>gg.getConnectionsData(n).recentConnections,this.switchConnection=n=>_e.switchConnection(n),this.deleteConnection=n=>he.deleteAddressFromConnection(n),this.setConnectedWalletInfo=(n,r)=>{const s=It.getProviderId(r),i=n?{...n,type:s}:void 0;de.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!D.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{de.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{de.removeAddressLabel(n,r)},this.getAddress=n=>D.state.activeChain===n||!n?de.state.address:D.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>D.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{D.resetNetwork(n)},this.addConnector=n=>{fe.addConnector(n)},this.resetWcConnection=()=>{_e.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{de.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{de.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{D.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{de.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{se.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await bve.fetchRemoteFeatures(e),se.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&kC.setOnrampProviders(this.remoteFeatures.onramp),((n=se.state.remoteFeatures)!=null&&n.email||Array.isArray((r=se.state.remoteFeatures)==null?void 0:r.socials)&&((s=se.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){try{const e=await Te.fetchAllowedOrigins();if(!e||!Se.isClient()){un.open(Vt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}const n=window.location.origin;vp.isOriginAllowed(n,e,Wf.DEFAULT_ALLOWED_ANCESTORS)||un.open(Vt.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}catch(e){if(!(e instanceof Error)){un.open(Vt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}switch(e.message){case"RATE_LIMITED":un.open(Vt.ALERT_ERRORS.RATE_LIMITED_APP_CONFIGURATION,"error");break;case"SERVER_ERROR":{const n=e.cause instanceof Error?e.cause:e;un.open({shortMessage:Vt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.shortMessage,longMessage:Vt.ALERT_ERRORS.SERVER_ERROR_APP_CONFIGURATION.longMessage(n.message)},"error");break}default:un.open(Vt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}}}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,_t.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Wr.setThemeMode(e.themeMode),e.themeVariables&&Wr.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");D.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&D.setActiveCaipNetwork(n)}initializeConnectionController(e){_e.initialize(e.adapters??[]),_e.setWcBasic(e.basic??!1)}initializeConnectorController(){fe.initialize(this.chainNamespaces)}initializeProjectSettings(e){se.setProjectId(e.projectId),se.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;se.setDebug(e.debug!==!1),se.setEnableWalletConnect(e.enableWalletConnect!==!1),se.setEnableWalletGuide(e.enableWalletGuide!==!1),se.setEnableWallets(e.enableWallets!==!1),se.setEIP6963Enabled(e.enableEIP6963!==!1),se.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),se.setEnableAuthLogger(e.enableAuthLogger!==!1),se.setCustomRpcUrls(e.customRpcUrls),se.setEnableEmbedded(e.enableEmbedded),se.setAllWallets(e.allWallets),se.setIncludeWalletIds(e.includeWalletIds),se.setExcludeWalletIds(e.excludeWalletIds),se.setFeaturedWalletIds(e.featuredWalletIds),se.setTokens(e.tokens),se.setTermsConditionsUrl(e.termsConditionsUrl),se.setPrivacyPolicyUrl(e.privacyPolicyUrl),se.setCustomWallets(e.customWallets),se.setFeatures(e.features),se.setAllowUnsupportedChain(e.allowUnsupportedChain),se.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),se.setPreferUniversalLinks(e.experimental_preferUniversalLinks),se.setDefaultAccountTypes(e.defaultAccountTypes);const n=he.getPreferredAccountTypes()||{},r={...se.state.defaultAccountTypes,...n};de.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),se.setMetadata(e.metadata),se.setDisableAppend(e.disableAppend),se.setEnableEmbedded(e.enableEmbedded),se.setSIWX(e.siwx),!e.projectId){un.open(Vt.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===X.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");se.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Se.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=to.getUnsupportedNetwork(`${n}:${e}`);D.setActiveCaipNetwork(r)}}getDefaultNetwork(){return to.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return to.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return to.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?to.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=It.getProvider(e),s=It.getProviderId(e),{caipAddress:i}=D.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),he.removeConnectedNamespace(e),It.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),fe.removeConnectorId(e),D.resetAccount(e),D.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=D.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),he.setConnectedNamespaces([...D.state.chains.keys()]),this.chainNamespaces.forEach(o=>{fe.setConnectorId(Ft.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,y,w,b,v,E;const c=D.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const _=this.getCaipNetworks().find(x=>x.chainNamespace===i);_&&this.setCaipNetwork(_)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((w=(y=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:y.http)==null?void 0:w[0])||((E=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:E[0])});if(!h)return;he.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=de.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=D.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),he.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async({chainNamespace:e}={})=>{const n=PZ(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));ft.resetSend(),_e.resetWcConnection(),await gp.clearSessions(),fe.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));he.deleteConnectedSocialProvider(),_t.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(D.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:de.state.address,provider:It.getProvider(D.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(bt.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(D.state.activeChain),s=It.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===X.CHAIN.EVM){const n=this.getAdapter(D.state.activeChain),r=It.getProvider(D.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:de.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:D.state.activeChain}),de.state.profileImage||!1},getEnsAddress:async e=>await vp.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(D.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=It.getProvider(D.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(D.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(D.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(D.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(D.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(D.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(D.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!de.state.address||this.updateNativeBalance(de.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},_e.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(It.getProviderId(D.state.activeChain)===Ft.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=It.getProvider(n),i=It.getProviderId(n);if(e.chainNamespace===D.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Ft.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=hs.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new wve({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=he.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(he.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=D.state.activeChain===e,c=D.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=de.state.address,i=D.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=D.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=D.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=D.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===X.CHAIN.EVM&&Se.isSafeApp()&&fe.setConnectorId(X.CONNECTOR_ID.SAFE,e);const n=fe.getConnectorId(e);switch(this.setStatus("connecting",e),n){case X.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case X.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=fe.getConnectorId(e),s=this.getCaipNetwork(e),o=fe.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Se.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){var r,s;const e=Object.keys(((s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)||{}),n=this.chainNamespaces.map(async i=>{var u,d,h,f,p;const o=this.getAdapter(i),a=((f=(h=(d=(u=this.universalProvider)==null?void 0:u.session)==null?void 0:d.namespaces)==null?void 0:h[i])==null?void 0:f.accounts)||[],c=(p=D.state.activeCaipNetwork)==null?void 0:p.id,l=a.find(g=>{const{chainId:y}=hs.parseCaipAddress(g);return y===(c==null?void 0:c.toString())})||a[0];if(l){const g=hs.validateCaipAddress(l),{chainId:y,address:w}=hs.parseCaipAddress(g);if(It.setProviderId(i,Ft.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&D.state.activeCaipNetwork&&(o==null?void 0:o.namespace)!==X.CHAIN.EVM){const b=o==null?void 0:o.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:D.state.activeCaipNetwork});It.setProvider(i,b)}else It.setProvider(i,this.universalProvider);fe.setConnectorId(X.CONNECTOR_ID.WALLET_CONNECT,i),he.addConnectedNamespace(i),this.syncWalletConnectAccounts(i),await this.syncAccount({address:w,chainId:y,chainNamespace:i})}else e.includes(i)&&this.setStatus("disconnected",i);this.syncConnectedWalletInfo(i),await D.setApprovedCaipNetworksData(i)});await Promise.all(n)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=hs.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Se.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){It.setProviderId(s,e),It.setProvider(s,n),fe.setConnectorId(r,s)}async syncAllAccounts(e){const n=fe.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===D.state.activeChain,r=D.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=he.getActiveNetworkProps(),c=i||a,l=((d=D.state.activeCaipNetwork)==null?void 0:d.name)===X.UNSUPPORTED_NETWORK_NAME,u=D.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],w=y.find(v=>{var E;return((E=hs.parseCaipNetworkId(v))==null?void 0:E.chainId)===c.toString()}),b=y.find(v=>{var E;return((E=hs.parseCaipNetworkId(v))==null?void 0:E.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===w),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===D.state.activeChain?se.state.enableNetworkSwitch&&!se.state.allowUnsupportedChain&&((h=D.state.activeCaipNetwork)==null?void 0:h.name)===X.UNSUPPORTED_NETWORK_NAME?D.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),Sg.isLowerCaseMatch(s,de.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=fe.getConnectorId(e),r=It.getProviderId(e);if(r===Ft.CONNECTOR_TYPE_ANNOUNCED||r===Ft.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Ft.CONNECTOR_TYPE_WALLET_CONNECT){const i=It.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===X.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===X.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!pg.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=D.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=Nye.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};se.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await Aye.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{_e.setUri(e)}),this.universalProvider.on("connect",_e.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),_e.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(vp.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Se.isCaipAddress(r[0])&&this.syncAccount(hs.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Se.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){_t.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Vt.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Vt.ALERT_ERRORS[o];a&&(un.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&_e.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return gt.open({...e,data:{swap:e.arguments}})}return gt.open(e)}async close(){await this.injectModalUi(),gt.close()}setLoading(e,n){gt.setLoading(e,n)}async disconnect(e){await _e.disconnect({namespace:e})}getSIWX(){return se.state.siwx}getError(){return""}getChainId(){var e;return(e=D.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){un.open(Vt.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await D.switchActiveNetwork(n)}getWalletProvider(){return D.state.activeChain?It.state.providers[D.state.activeChain]:null}getWalletProviderType(){return It.getProviderId(D.state.activeChain)}subscribeProviders(e){return It.subscribeProviders(e)}getThemeMode(){return Wr.state.themeMode}getThemeVariables(){return Wr.state.themeVariables}setThemeMode(e){Wr.setThemeMode(e),sU(Wr.state.themeMode)}setTermsConditionsUrl(e){se.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){se.setPrivacyPolicyUrl(e)}setThemeVariables(e){Wr.setThemeVariables(e),gve(Wr.state.themeVariables)}subscribeTheme(e){return Wr.subscribe(e)}subscribeConnections(e){return _e.subscribe(e)}getWalletInfo(e){return e?D.getAccountProp("connectedWalletInfo",e):de.state.connectedWalletInfo}getAccount(e){var o;const n=fe.getAuthConnector(e),r=D.getAccountData(e),s=D.state.activeChain,i=he.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Se.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===X.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:he.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?D.subscribeChainProp("accountState",r,n):D.subscribe(r),fe.subscribe(r)}subscribeNetwork(e){return D.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e,n){return n?de.subscribeKey("connectedWalletInfo",e,n):de.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){de.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){D.subscribeKey("activeCaipNetwork",e)}getState(){return io.state}subscribeState(e){return io.subscribe(e)}showErrorMessage(e){bi.showError(e)}showSuccessMessage(e){bi.showSuccess(e)}getEvent(){return{..._t.state}}subscribeEvents(e){return _t.subscribe(e)}replace(e){Re.replace(e)}redirect(e){Re.push(e)}popTransactionStack(e){Re.popTransactionStack(e)}isOpen(){return gt.state.open}isTransactionStackEmpty(){return Re.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){se.setFeatures(e)}updateRemoteFeatures(e){se.setRemoteFeatures(e)}updateOptions(e){const r={...se.state||{},...e};se.setOptions(r)}setConnectMethodsOrder(e){se.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){se.setWalletFeaturesOrder(e)}setCollapseWallets(e){se.setCollapseWallets(e)}setSocialsOrder(e){se.setSocialsOrder(e)}getConnectMethodsOrder(){return kx.getConnectOrderMethod(se.state.features,fe.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||D.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&D.removeNetwork(e,n)}}let CO=!1;class Eve extends _ve{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{ps.checkIfRequestExists(n)?ps.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Dn.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Dn.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=ps.checkIfRequestIsSafe(r),i=de.state.address,o=D.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=D.state.activeChain;fe.getConnectorId(n)===X.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=D.state.activeChain,s=r===X.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=se.state.defaultAccountTypes[r],o=(l=de.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;Sg.isLowerCaseMatch(n.address,de.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...de.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Se.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Se.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...de.state.user||{},username:n},D.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,D.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,D.state.activeChain)})}async syncAuthConnector(e,n){var d,h,f,p;const r=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n),s=n===D.state.activeChain;if(!r)return;this.setLoading(!0,n);const i=e.getLoginEmailUsed();this.setLoading(i,n),i&&this.setStatus("connecting",n);const o=e.getEmail(),a=e.getUsername();this.setUser({...((d=de.state)==null?void 0:d.user)||{},username:a,email:o},n),this.setupAuthConnectorListeners(e);const{isConnected:c}=await e.isConnected(),l=Wr.getSnapshot(),u=se.getSnapshot();await Promise.all([e.syncDappData({metadata:u.metadata,sdkVersion:u.sdkVersion,projectId:u.projectId,sdkType:u.sdkType}),e.syncTheme({themeMode:l.themeMode,themeVariables:l.themeVariables,w3mThemeVariables:qo(l.themeVariables,l.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&s&&(c&&((h=this.connectionControllerClient)!=null&&h.connectExternal)?(await((p=this.connectionControllerClient)==null?void 0:p.connectExternal({id:X.CONNECTOR_ID.AUTH,info:{name:X.CONNECTOR_ID.AUTH},type:Ft.CONNECTOR_TYPE_AUTH,provider:e,chainId:(f=D.state.activeCaipNetwork)==null?void 0:f.id,chain:n})),this.setStatus("connected",n)):fe.getConnectorId(n)===X.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),he.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Se.isTelegram())return;const r=he.getTelegramSocialProvider();if(!r||!Se.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;de.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=fe.getAuthConnector();r&&o&&(this.setLoading(!0,e),await _e.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),he.setConnectedSocialProvider(r),he.removeTelegramSocialProvider(),_t.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var l,u,d,h;if(!X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(l=this.remoteFeatures)==null?void 0:l.email,s=Array.isArray((u=this.remoteFeatures)==null?void 0:u.socials)&&this.remoteFeatures.socials.length>0,i=r||s,a=Sg.getActiveNamespaceConnectedToAuth()||e;!this.authProvider&&((d=this.options)!=null&&d.projectId)&&i&&(this.authProvider=ql.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(h=this.getCaipNetwork(a))==null?void 0:h.caipNetworkId,abortController:Vt.EmbeddedWalletAbortController,onTimeout:f=>{f==="iframe_load_failed"?un.open(Vt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):f==="iframe_request_timeout"?un.open(Vt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):f==="unverified_domain"&&un.open(Vt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),io.subscribeOpen(f=>{var p;!f&&this.isTransactionStackEmpty()&&((p=this.authProvider)==null||p.rejectRpcRequests())}));const c=e===D.state.activeChain;this.authProvider&&c&&(this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Te.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=D.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=It.getProvider(r),u=It.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=It.getProviderId(n)===Ft.CONNECTOR_TYPE_AUTH,u=It.getProviderId(r),d=u===Ft.CONNECTOR_TYPE_AUTH,h=X.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(D.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:X.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Ft.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Ft.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),io.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==X.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=It.getProviderId(e);if(n===Ft.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=he.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Se.isClient()&&!CO)try{const e={...bt.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Se.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!se.state.disableAppend&&!se.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}CO=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Se.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(sn(()=>import("./embedded-wallet-n5Amuigf.js"),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14]))),n.email&&r.push(sn(()=>import("./email-Ds-OS_kh.js"),__vite__mapDeps([15,4,14,8,13,7,12,16,9]))),n.socials&&r.push(sn(()=>import("./socials-CzTps5Gl.js"),__vite__mapDeps([17,4,18,7,19,20,13,21,12,8,14,22,6,23]))),n.swaps&&n.swaps.length>0&&r.push(sn(()=>import("./swaps-BUiax8Tq.js"),__vite__mapDeps([24,4,12,8,25,26,27,6,13,23,9,7]))),e.send&&r.push(sn(()=>import("./send-DRnk0o5D.js"),__vite__mapDeps([28,4,12,8,13,7,19,14,27,6,9,29,30]))),e.receive&&r.push(sn(()=>import("./receive-Br0XzHuj.js"),__vite__mapDeps([31,4,32,6,22]))),n.onramp&&n.onramp.length>0&&r.push(sn(()=>import("./onramp-Cyl8ycUX.js"),__vite__mapDeps([33,4,34,23,13,6,8,35,18,7,19,36,14,12,21,9]))),n.activity&&r.push(sn(()=>import("./transactions-Cp5APLMo.js"),__vite__mapDeps([37,4,38,34,23,13,14,6]))),e.pay&&r.push(sn(()=>import("./index-J0KiOLBZ.js"),__vite__mapDeps([39,4,12,8,40,6,13,10,35,30,21]))),await Promise.all([...r,sn(()=>import("./index-BQzzKTPg.js"),__vite__mapDeps([41,4,6,8,29,13,42,26,10,35,12,11,40,38,34,23,14,25,30,7,9,16,18,19,20,5,21,32,22,36])),sn(()=>import("./w3m-modal-BHrc-sKc.js"),__vite__mapDeps([43,4,10,6,13,11,8,26,42]))])}}let Da;function Cve(t){t&&(Da=t)}function Jv(){if(!Da)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Da==null?void 0:Da.open(n))}async function e(){await(Da==null?void 0:Da.close())}return{open:t,close:e}}const xve="1.7.10";let Ly;function Sve(t){return Ly||(Ly=new Eve({...t,sdkVersion:Se.generateSdkVersion(t.adapters??[],"react",xve)}),Cve(Ly)),Ly}const Ave=Oi({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),xO=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Ive=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=Ave({isOpen:t}),{open:i}=Jv(),o=F.useRef(null),[a,c]=F.useState([]),[l,u]=F.useState(!0),[d,h]=F.useState(null),[f,p]=F.useState("all"),[g,y]=F.useState(1),[w,b]=F.useState(1),[v,E]=F.useState(0),[_,x]=F.useState(null),[S,T]=F.useState(xO[0]),[C,O]=F.useState(!1),[R,B]=F.useState(null),H=F.useCallback(async()=>{var k,L;try{if((k=window.solana)!=null&&k.isPhantom){const W=await window.solana.connect();B(W.publicKey.toString());return}if((L=window.solflare)!=null&&L.isSolflare){const W=await window.solflare.connect();B(W.publicKey.toString());return}i()}catch(W){console.error("Failed to connect Solana wallet:",W),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}O(!1)},[i]);F.useEffect(()=>{var k,L;(k=window.solana)!=null&&k.publicKey?B(window.solana.publicKey.toString()):(L=window.solflare)!=null&&L.publicKey&&B(window.solflare.publicKey.toString())},[]),F.useEffect(()=>{t&&(async()=>{var L;u(!0),h(null);try{let W,G=f==="owned"&&r||void 0;if(S.api==="opensea-solana"){if(f==="owned"&&!R){O(!0),u(!1);return}G=R||void 0,W=await T8(S.slug,50),console.log("Fetched Solana NFTs from collection:",W.data.length),f==="owned"&&R&&(console.log("Filtering for owner:",R),console.log("Sample NFT owner data:",(L=W.data[0])==null?void 0:L.owners),console.log("All NFTs owner data:",W.data.map(Q=>({name:Q.name,owners:Q.owners,owner_of:Q.owner_of}))),W.data.some(Q=>Q.owners&&Q.owners.length>0)?(W.data=W.data.filter(Q=>{const ee=Q.owners.some(ae=>ae.owner_of&&ae.owner_of.toLowerCase()===R.toLowerCase());return ee&&console.log("Found owned NFT:",Q.name),ee}),console.log("NFTs after filtering:",W.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else S.api==="opensea"?W=await TA(S.slug,50,G):W=await IA(S.slug,g,50,G);c(W.data),b(W.totalPages),E(W.totalCount)}catch(W){W instanceof Error?h(W.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,S,R]),F.useEffect(()=>{C&&H()},[C,H]);const z=k=>new Date(k).toLocaleDateString(),A=k=>S.api==="opensea-solana"&&(!k.owners||k.owners.length===0)?"Owner data unavailable":k.owners.length>0?`${k.owners[0].owner_of.substring(0,6)}...`:"N/A",I=()=>{n&&n()},j=async k=>{if(S.api==="opensea"&&S.chain)try{const L=await I8(S.chain,k.address,k.token_id.toString()),W={...k,attributes:JSON.stringify(L.traits||[])};x(W)}catch(L){console.error("Failed to fetch full NFT details",L),x(k)}else x(k)},N=k=>{T(k),y(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(om,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:I,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:s.collectionSelector,children:xO.map(k=>m.jsx("button",{className:`${s.collectionButton} ${S.slug===k.slug?"active":""}`,onClick:()=>N(k),children:k.name},k.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!R,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||R?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||R?1:.6},children:"My NFTs"}),S.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{H()},style:{background:R?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:R?"white":"black",marginLeft:"auto"},children:R?`Solana: ${R.slice(0,4)}...${R.slice(-4)}`:"Connect Solana"})]}),S.api==="opensea-solana"&&!R&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${S.api==="opensea-solana"?(R==null?void 0:R.slice(0,6))+"..."+(R==null?void 0:R.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(k=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{j(k)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${k.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",k.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",A(k)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",z(k.created_at)]})]},k.id))}),f!=="recent"&&w>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>y(k=>Math.max(1,k-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",w]}),m.jsx("button",{onClick:()=>y(k=>Math.min(w,k+1)),disabled:g===w,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===w?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),_&&m.jsx(UJ,{nft:_,onClose:()=>x(null)})]}):null},Tve=Oi({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),Nve=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}];function aU(){const t=Tve(),e=F.useRef(null),[n,r]=F.useState(null),[s,i]=F.useState(""),[o,a]=F.useState(""),[c,l]=F.useState(36),[u,d]=F.useState(36),[h,f]=F.useState(!1),[p,g]=F.useState(!1),[y,w]=F.useState(!1),[b,v]=F.useState(!1),[E,_]=F.useState(!1),x=F.useCallback(()=>{const z=N=>{const k=e.current;if(!k)return;N.textAlign="center";const L=(W,G)=>{const Z=W.split(" "),Q=[];let ee="";for(let ae=0;ae<Z.length;ae++){const ye=ee?ee+" "+Z[ae]:Z[ae];N.measureText(ye).width<=G?ee=ye:(ee&&Q.push(ee),ee=Z[ae])}return ee&&Q.push(ee),Q};if(s){N.font=`bold ${c}px Impact`;const W=k.width*.9;(function(){return N.font=`bold ${c}px Impact`,L(s,W)})().forEach((Z,Q)=>{const ee=c+10+Q*c*1.2;N.strokeStyle="#000",N.lineWidth=4,N.strokeText(Z,k.width/2,ee),N.fillStyle="#fff",N.fillText(Z,k.width/2,ee)})}if(o){N.font=`bold ${u}px Impact`;const W=k.width*.9,G=function(){return N.font=`bold ${u}px Impact`,L(o,W)}(),Z=12;G.forEach((Q,ee)=>{const ae=k.height-Z-(G.length-1-ee)*u*1.2;N.strokeStyle="#000",N.lineWidth=4,N.strokeText(Q,k.width/2,ae),N.fillStyle="#fff",N.fillText(Q,k.width/2,ae)})}},A=N=>{try{h&&S(N),p&&T(N),y&&C(N)}catch{console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead."),f(!1),g(!1),w(!1)}},I=e.current;if(!I)return;const j=I.getContext("2d");if(j)if(j.clearRect(0,0,I.width,I.height),n){console.log("Loading image:",n);const N=new Image;N.crossOrigin="anonymous",N.onload=()=>{console.log("Image loaded successfully:",N.width,"x",N.height);const k=e.current;if(!k||k!==I)return;const L=k.getContext("2d");if(!L)return;L.clearRect(0,0,k.width,k.height);const W=Math.min(k.width/N.width,k.height/N.height),G=(k.width-N.width*W)/2,Z=(k.height-N.height*W)/2;console.log("Drawing image at:",G,Z,"with scale:",W),L.drawImage(N,G,Z,N.width*W,N.height*W),z(L),A(k)},N.onerror=k=>{console.error("Failed to load image:",n,k);const L=e.current;if(!L||L!==I)return;const W=L.getContext("2d");W&&(W.clearRect(0,0,L.width,L.height),W.fillStyle="#333",W.fillRect(0,0,L.width,L.height),z(W),A(L))},N.src=n}else j.fillStyle="#333",j.fillRect(0,0,I.width,I.height),z(j),A(I)},[n,s,c,o,u,h,p,y]),S=z=>{const A=z.getContext("2d");if(!A)return;const I=A.getImageData(0,0,z.width,z.height),j=I.data;for(let N=0;N<j.length;N+=4){const k=j[N],L=j[N+1],W=j[N+2],G=(k+L+W)/3,Z=1.8;j[N]=Math.min(255,G+(k-G)*Z),j[N+1]=Math.min(255,G+(L-G)*Z*.7),j[N+2]=Math.min(255,G+(W-G)*Z*.4);const Q=1.3;j[N]=Math.min(255,Math.max(0,j[N]*Q)),j[N+1]=Math.min(255,Math.max(0,j[N+1]*Q)),j[N+2]=Math.min(255,Math.max(0,j[N+2]*Q))}A.putImageData(I,0,0)},T=z=>{const A=z.getContext("2d");if(!A)return;const I=4,N=A.getImageData(0,0,z.width,z.height).data,k=new Uint8ClampedArray(N);for(let L=0;L<z.height;L+=I)for(let W=0;W<z.width;W+=I){const G=(L*z.width+W)*4,Z=N[G],Q=N[G+1],ee=N[G+2],ae=N[G+3];for(let ye=0;ye<I&&L+ye<z.height;ye++)for(let $e=0;$e<I&&W+$e<z.width;$e++){const Ae=((L+ye)*z.width+(W+$e))*4;k[Ae]=Z,k[Ae+1]=Q,k[Ae+2]=ee,k[Ae+3]=ae}}A.putImageData(new ImageData(k,z.width,z.height),0,0)},C=z=>{const A=z.getContext("2d");if(!A)return;const I=A.getImageData(0,0,z.width,z.height),j=I.data;for(let N=0;N<j.length;N+=4){const k=(Math.random()-.5)*50;j[N]=Math.max(0,Math.min(255,j[N]+k)),j[N+1]=Math.max(0,Math.min(255,j[N+1]+k)),j[N+2]=Math.max(0,Math.min(255,j[N+2]+k))}A.putImageData(I,0,0)};F.useEffect(()=>{x()},[x]);const O=z=>{var I;const A=(I=z.target.files)==null?void 0:I[0];A&&r(URL.createObjectURL(A))},R=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),w(!1)},B=()=>{const z=e.current;if(!z)return;const A=document.createElement("a");A.download="meme.png",A.href=z.toDataURL("image/png"),document.body.appendChild(A),A.click(),document.body.removeChild(A)},H=async z=>{_(!0),v(!1);try{console.log("Fetching NFTs for collection:",z);let A;if(z.api==="opensea"){console.log("Using OpenSea API for:",z.slug);const I=await TA(z.slug,50);A=I.data,console.log("OpenSea response:",I)}else if(z.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",z.slug);const I=await T8(z.slug,50);A=I.data,console.log("OpenSea Solana response:",I)}else{console.log("Using Scatter API for:",z.slug);const I=await IA(z.slug,1,50);A=I.data,console.log("Scatter response:",I)}if(A&&A.length>0){const I=A[Math.floor(Math.random()*A.length)],j=I.image||I.image_url||I.image_url_shrunk;console.log("Selected NFT:",I),console.log("Image URL:",j),r(j)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(A){console.error("Error fetching NFTs:",A),alert("Failed to fetch NFT images. Check console for details.")}finally{_(!1)}};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>v(z=>!z),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:Nve.map(z=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{H(z)},children:z.name},z.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:O})]}),E&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:z=>i(z.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:z=>l(Number(z.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:z=>a(z.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:z=>d(Number(z.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(z=>!z),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(z=>!z),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:y?"#00ffff":void 0},onClick:()=>w(z=>!z),children:"Grain"})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:B,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:R,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:320,height:320,className:t.canvas})})]})}const Pve=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>sn(async()=>{const{default:r}=await Promise.resolve().then(()=>Wh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class yI extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class kve extends yI{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ove extends yI{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Rve extends yI{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Rx;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Rx||(Rx={}));var $ve=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class Dve{constructor(e,{headers:n={},customFetch:r,region:s=Rx.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Pve(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return $ve(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:l}).catch(p=>{throw new kve(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new Ove(u);if(!u.ok)throw new Rve(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}var Kr={},wI={},Zv={},Em={},Xv={},eb={},jve=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Eh=jve();const Uve=Eh.fetch,cU=Eh.fetch.bind(Eh),lU=Eh.Headers,Lve=Eh.Request,Mve=Eh.Response,Wh=Object.freeze(Object.defineProperty({__proto__:null,Headers:lU,Request:Lve,Response:Mve,default:cU,fetch:Uve},Symbol.toStringTag,{value:"Module"})),Bve=D0(Wh);var tb={};Object.defineProperty(tb,"__esModule",{value:!0});let Fve=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};tb.default=Fve;var uU=nn&&nn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(eb,"__esModule",{value:!0});const zve=uU(Bve),qve=uU(tb);let Wve=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=zve.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c;let l=null,u=null,d=null,h=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=w:u=JSON.parse(w))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&y&&y.length>1&&(d=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await i.text();try{l=JSON.parse(g),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,f="OK")}catch{i.status===404&&g===""?(h=204,f="No Content"):l={message:g}}if(l&&this.isMaybeSingle&&(!((c=l==null?void 0:l.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,h=200,f="OK"),l&&this.shouldThrowOnError)throw new qve.default(l)}return{error:l,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};eb.default=Wve;var Hve=nn&&nn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xv,"__esModule",{value:!0});const Vve=Hve(eb);let Gve=class extends Vve.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Xv.default=Gve;var Kve=nn&&nn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Em,"__esModule",{value:!0});const Yve=Kve(Xv);let Qve=class extends Yve.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Em.default=Qve;var Jve=nn&&nn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zv,"__esModule",{value:!0});const If=Jve(Em);let Zve=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new If.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new If.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const c=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(c.length>0){const l=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new If.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new If.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new If.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Zv.default=Zve;var nb={},rb={};Object.defineProperty(rb,"__esModule",{value:!0});rb.version=void 0;rb.version="0.0.0-automated";Object.defineProperty(nb,"__esModule",{value:!0});nb.DEFAULT_HEADERS=void 0;const Xve=rb;nb.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Xve.version}`};var dU=nn&&nn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wI,"__esModule",{value:!0});const ebe=dU(Zv),tbe=dU(Em),nbe=nb;let rbe=class hU{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},nbe.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new ebe.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new hU(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{a.searchParams.append(u,d)})):(o="POST",c=n);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new tbe.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};wI.default=rbe;var Hh=nn&&nn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.PostgrestError=Kr.PostgrestBuilder=Kr.PostgrestTransformBuilder=Kr.PostgrestFilterBuilder=Kr.PostgrestQueryBuilder=Kr.PostgrestClient=void 0;const fU=Hh(wI);Kr.PostgrestClient=fU.default;const pU=Hh(Zv);Kr.PostgrestQueryBuilder=pU.default;const gU=Hh(Em);Kr.PostgrestFilterBuilder=gU.default;const mU=Hh(Xv);Kr.PostgrestTransformBuilder=mU.default;const yU=Hh(eb);Kr.PostgrestBuilder=yU.default;const wU=Hh(tb);Kr.PostgrestError=wU.default;var sbe=Kr.default={PostgrestClient:fU.default,PostgrestQueryBuilder:pU.default,PostgrestFilterBuilder:gU.default,PostgrestTransformBuilder:mU.default,PostgrestBuilder:yU.default,PostgrestError:wU.default};const{PostgrestClient:ibe,PostgrestQueryBuilder:zEe,PostgrestFilterBuilder:qEe,PostgrestTransformBuilder:WEe,PostgrestBuilder:HEe,PostgrestError:VEe}=sbe;function obe(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const abe=obe(),cbe="2.11.13",lbe={"X-Client-Info":`realtime-js/${cbe}`},ube="1.0.0",vU=1e4,dbe=1e3;var bp;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bp||(bp={}));var lr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(lr||(lr={}));var gi;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gi||(gi={}));var $x;(function(t){t.websocket="websocket"})($x||($x={}));var yl;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(yl||(yl={}));class hbe{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const c=r.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class bU{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Rt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Rt||(Rt={}));const SO=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=fbe(o,t,e,s),i),{})},fbe=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?_U(i,o):Dx(o)},_U=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return ybe(e,n)}switch(t){case Rt.bool:return pbe(e);case Rt.float4:case Rt.float8:case Rt.int2:case Rt.int4:case Rt.int8:case Rt.numeric:case Rt.oid:return gbe(e);case Rt.json:case Rt.jsonb:return mbe(e);case Rt.timestamp:return wbe(e);case Rt.abstime:case Rt.date:case Rt.daterange:case Rt.int4range:case Rt.int8range:case Rt.money:case Rt.reltime:case Rt.text:case Rt.time:case Rt.timestamptz:case Rt.timetz:case Rt.tsrange:case Rt.tstzrange:return Dx(e);default:return Dx(e)}},Dx=t=>t,pbe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},gbe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},mbe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},ybe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>_U(e,a))}return t},wbe=t=>typeof t=="string"?t.replace(" ","T"):t,EU=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class x_{constructor(e,n,r={},s=vU){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var AO;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(AO||(AO={}));class _p{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_p.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=_p.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=_p.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const d=i[l];if(d){const h=u.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=u.filter(y=>f.indexOf(y.presence_ref)<0),g=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const d=e[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[a].unshift(...h)}r(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var IO;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(IO||(IO={}));var TO;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(TO||(TO={}));var Ro;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ro||(Ro={}));class vI{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=lr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new x_(this,gi.join,this.params,this.timeout),this.rejoinTimer=new bU(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=lr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=lr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=lr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=lr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gi.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new _p(this),this.broadcastEndpointURL=EU(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==lr.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Ro.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ro.CLOSED));const c={},l={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Ro.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const y=h[g],{filter:{event:w,schema:b,table:v,filter:E}}=y,_=u&&u[g];if(_&&_.event===w&&_.schema===b&&_.table===v&&_.filter===E)p.push(Object.assign(Object.assign({},y),{id:_.id}));else{this.unsubscribe(),this.state=lr.errored,e==null||e(Ro.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Ro.SUBSCRIBED);return}}).receive("error",u=>{this.state=lr.errored,e==null||e(Ro.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ro.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=lr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new x_(this,gi.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new x_(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=gi;if(r&&[a,c,l,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(g=f.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var p,g,y,w,b,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const E=f.id,_=(p=f.filter)===null||p===void 0?void 0:p.event;return E&&((g=n.ids)===null||g===void 0?void 0:g.includes(E))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const E=(b=(w=f==null?void 0:f.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return E==="*"||E===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:y,commit_timestamp:w,type:b,errors:v}=p;h=Object.assign(Object.assign({},{schema:g,table:y,commit_timestamp:w,eventType:b,new:{},old:{},errors:v}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===lr.closed}_isJoined(){return this.state===lr.joined}_isJoining(){return this.state===lr.joining}_isLeaving(){return this.state===lr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&vI.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gi.close,{},e)}_onError(e){this._on(gi.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=lr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=SO(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=SO(e.columns,e.old_record)),n}}const NO=()=>{},vbe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bbe{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=lbe,this.params={},this.timeout=vU,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=NO,this.ref=0,this.logger=NO,this.conn=null,this.sendBuffer=[],this.serializer=new hbe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>sn(async()=>{const{default:c}=await Promise.resolve().then(()=>Wh);return{default:c}},void 0).then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${$x.websocket}`,this.httpEndpoint=EU(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new bU(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){this.conn||(this.transport||(this.transport=abe),this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection())}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ube}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bp.connecting:return yl.Connecting;case bp.open:return yl.Open;case bp.closing:return yl.Closing;default:return yl.Closed}}isConnected(){return this.connectionState()===yl.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new vI(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(gi.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(dbe,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(gi.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([vbe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class bI extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Nn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class _be extends bI{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class jx extends bI{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Ebe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const CU=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>sn(async()=>{const{default:r}=await Promise.resolve().then(()=>Wh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Cbe=()=>Ebe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sn(()=>Promise.resolve().then(()=>Wh),void 0)).Response:Response}),Ux=t=>{if(Array.isArray(t))return t.map(n=>Ux(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Ux(r)}),e};var Tu=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const S_=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xbe=(t,e,n)=>Tu(void 0,void 0,void 0,function*(){const r=yield Cbe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new _be(S_(s),t.status||500))}).catch(s=>{e(new jx(S_(s),s))}):e(new jx(S_(t),t))}),Sbe=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Cm(t,e,n,r,s,i){return Tu(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,Sbe(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>xbe(c,a,r))})})}function R0(t,e,n,r){return Tu(this,void 0,void 0,function*(){return Cm(t,"GET",e,n,r)})}function Ha(t,e,n,r,s){return Tu(this,void 0,void 0,function*(){return Cm(t,"POST",e,r,s,n)})}function Abe(t,e,n,r,s){return Tu(this,void 0,void 0,function*(){return Cm(t,"PUT",e,r,s,n)})}function Ibe(t,e,n,r){return Tu(this,void 0,void 0,function*(){return Cm(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function xU(t,e,n,r,s){return Tu(this,void 0,void 0,function*(){return Cm(t,"DELETE",e,r,s,n)})}var Lr=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const Tbe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},PO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nbe{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=CU(s)}uploadOrUpdate(e,n,r,s){return Lr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},PO),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(Nn(i))return{data:null,error:i};throw i}})}upload(e,n,r){return Lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return Lr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let c;const l=Object.assign({upsert:PO.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:u}),h=yield d.json();return d.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(Nn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return Lr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ha(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new bI("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Nn(r))return{data:null,error:r};throw r}})}update(e,n,r){return Lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Lr(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Nn(s))return{data:null,error:s};throw s}})}copy(e,n,r){return Lr(this,void 0,void 0,function*(){try{return{data:{path:(yield Ha(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Nn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return Lr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ha(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Nn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return Lr(this,void 0,void 0,function*(){try{const s=yield Ha(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Nn(s))return{data:null,error:s};throw s}})}download(e,n){return Lr(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield R0(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Nn(a))return{data:null,error:a};throw a}})}info(e){return Lr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield R0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ux(r),error:null}}catch(r){if(Nn(r))return{data:null,error:r};throw r}})}exists(e){return Lr(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Ibe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Nn(r)&&r instanceof jx){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return Lr(this,void 0,void 0,function*(){try{return{data:yield xU(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}list(e,n,r){return Lr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Tbe),n),{prefix:e||""});return{data:yield Ha(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Nn(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Pbe="2.7.1",kbe={"X-Client-Info":`storage-js/${Pbe}`};var sd=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class Obe{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},kbe),n),this.fetch=CU(r)}listBuckets(){return sd(this,void 0,void 0,function*(){try{return{data:yield R0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Nn(e))return{data:null,error:e};throw e}})}getBucket(e){return sd(this,void 0,void 0,function*(){try{return{data:yield R0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return sd(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Nn(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return sd(this,void 0,void 0,function*(){try{return{data:yield Abe(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Nn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return sd(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return sd(this,void 0,void 0,function*(){try{return{data:yield xU(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Nn(n))return{data:null,error:n};throw n}})}}class Rbe extends Obe{constructor(e,n={},r){super(e,n,r)}from(e){return new Nbe(this.url,this.headers,e,this.fetch)}}const $be="2.50.1";let Hf="";typeof Deno<"u"?Hf="deno":typeof document<"u"?Hf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Hf="react-native":Hf="node";const Dbe={"X-Client-Info":`supabase-js-${Hf}/${$be}`},jbe={headers:Dbe},Ube={schema:"public"},Lbe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mbe={};var Bbe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};const Fbe=t=>{let e;return t?e=t:typeof fetch>"u"?e=cU:e=fetch,(...n)=>e(...n)},zbe=()=>typeof Headers>"u"?lU:Headers,qbe=(t,e,n)=>{const r=Fbe(n),s=zbe();return(i,o)=>Bbe(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:l}))})};var Wbe=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};function Hbe(t){return t.endsWith("/")?t:t+"/"}function Vbe(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Wbe(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const SU="2.70.0",fd=30*1e3,Lx=3,A_=Lx*fd,Gbe="http://localhost:9999",Kbe="supabase.auth.token",Ybe={"X-Client-Info":`gotrue-js/${SU}`},Mx="X-Supabase-Api-Version",AU={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Qbe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Jbe=6e5;class _I extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function qe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Zbe extends _I{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Xbe(t){return qe(t)&&t.name==="AuthApiError"}class IU extends _I{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Qc extends _I{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class ja extends Qc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function e1e(t){return qe(t)&&t.name==="AuthSessionMissingError"}class My extends Qc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class By extends Qc{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fy extends Qc{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function t1e(t){return qe(t)&&t.name==="AuthImplicitGrantRedirectError"}class kO extends Qc{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bx extends Qc{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function I_(t){return qe(t)&&t.name==="AuthRetryableFetchError"}class OO extends Qc{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Ep extends Qc{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const $0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),RO=` 	
\r=`.split(""),n1e=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<RO.length;e+=1)t[RO[e].charCodeAt(0)]=-2;for(let e=0;e<$0.length;e+=1)t[$0[e].charCodeAt(0)]=e;return t})();function $O(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n($0[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n($0[r]),e.queuedBits-=6}}function TU(t,e,n){const r=n1e[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function DO(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{i1e(o,r,n)};for(let o=0;o<t.length;o+=1)TU(t.charCodeAt(o),s,i);return e.join("")}function r1e(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function s1e(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}r1e(r,e)}}function i1e(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function o1e(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)TU(t.charCodeAt(s),n,r);return new Uint8Array(e)}function a1e(t){const e=[];return s1e(t,n=>e.push(n)),new Uint8Array(e)}function c1e(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>$O(s,n,r)),$O(null,n,r),e.join("")}function l1e(t){return Math.round(Date.now()/1e3)+t}function u1e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const li=()=>typeof window<"u"&&typeof document<"u",il={tested:!1,writable:!1},Cp=()=>{if(!li())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(il.tested)return il.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),il.tested=!0,il.writable=!0}catch{il.tested=!0,il.writable=!1}return il.writable};function d1e(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const NU=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>sn(async()=>{const{default:r}=await Promise.resolve().then(()=>Wh);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},h1e=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",PU=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},zy=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},qy=async(t,e)=>{await t.removeItem(e)};class sb{constructor(){this.promise=new sb.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}sb.promiseConstructor=Promise;function T_(t){const e=t.split(".");if(e.length!==3)throw new Ep("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Qbe.test(e[r]))throw new Ep("JWT not in base64url format");return{header:JSON.parse(DO(e[0])),payload:JSON.parse(DO(e[1])),signature:o1e(e[2]),raw:{header:e[0],payload:e[1]}}}async function f1e(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function p1e(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function g1e(t){return("0"+t.toString(16)).substr(-2)}function m1e(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,g1e).join("")}async function y1e(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function w1e(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await y1e(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function id(t,e,n=!1){const r=m1e();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await PU(t,`${e}-code-verifier`,s);const i=await w1e(r);return[i,r===i?"plain":"s256"]}const v1e=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function b1e(t){const e=t.headers.get(Mx);if(!e||!e.match(v1e))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _1e(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function E1e(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const C1e=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function od(t){if(!C1e.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var x1e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const hl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),S1e=[502,503,504];async function jO(t){var e;if(!h1e(t))throw new Bx(hl(t),0);if(S1e.includes(t.status))throw new Bx(hl(t),t.status);let n;try{n=await t.json()}catch(i){throw new IU(hl(i),i)}let r;const s=b1e(t);if(s&&s.getTime()>=AU["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new OO(hl(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ja}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new OO(hl(n),t.status,n.weak_password.reasons);throw new Zbe(hl(n),t.status||500,r)}const A1e=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Je(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Mx]||(i[Mx]=AU["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await I1e(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function I1e(t,e,n,r,s,i){const o=A1e(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new Bx(hl(c),0)}if(a.ok||await jO(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await jO(c)}}function ko(t){var e;let n=null;k1e(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=l1e(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function UO(t){const e=ko(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ja(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function T1e(t){return{data:t,error:null}}function N1e(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=x1e(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function P1e(t){return t}function k1e(t){return t.access_token&&t.refresh_token&&t.expires_in}const N_=["global","local","others"];var O1e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class R1e{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=NU(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=N_[0]){if(N_.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${N_.join(", ")}`);try{return await Je(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Je(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ja})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=O1e(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:N1e,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(qe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Je(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ja})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await Je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:P1e});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);l[`${y}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(qe(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){od(e);try{return await Je(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ja})}catch(n){if(qe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){od(e);try{return await Je(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ja})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){od(e);try{return await Je(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ja})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){od(e.userId);try{const{data:n,error:r}=await Je(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){od(e.userId),od(e.id);try{return{data:await Je(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}}const $1e={getItem:t=>Cp()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Cp()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Cp()&&globalThis.localStorage.removeItem(t)}};function LO(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function D1e(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ad={debug:!!(globalThis&&Cp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kU extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class j1e extends kU{}async function U1e(t,e,n){ad.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ad.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ad.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{ad.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw ad.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new j1e(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ad.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}D1e();const L1e={url:Gbe,storageKey:Kbe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ybe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function MO(t,e,n){return await n()}class Fg{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fg.nextInstanceID,Fg.nextInstanceID+=1,this.instanceID>0&&li()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},L1e),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new R1e({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=NU(s.fetch),this.lock=s.lock||MO,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:li()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=U1e:this.lock=MO,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Cp()?this.storage=$1e:(this.memoryStorage={},this.storage=LO(this.memoryStorage)):(this.memoryStorage={},this.storage=LO(this.memoryStorage)),li()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${SU}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=d1e(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),li()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),t1e(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return qe(n)?{error:n}:{error:new IU("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ko}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(qe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await id(this.storage,this.storageKey)),i=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:ko})}else if("phone"in e){const{phone:u,password:d,options:h}=e;i=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ko})}else throw new By("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(qe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await Je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:UO})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await Je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:UO})}else throw new By("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new My}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,c,l,u,d,h,f;let p,g;if("message"in e)p=e.message,g=e.signature;else{const{chain:y,wallet:w,statement:b,options:v}=e;let E;if(li())if(typeof w=="object")E=w;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))E=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=w}const _=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const x=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),b?{statement:b}:null));let S;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")S=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)S=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),g=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(u=v==null?void 0:v.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const x=await E.signMessage(new TextEncoder().encode(p),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=x}}try{const{data:y,error:w}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:c1e(g)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ko});if(w)throw w;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new My}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:w})}catch(y){if(qe(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const n=await zy(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ko});if(await qy(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new My}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(qe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await Je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ko}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new My}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await id(this.storage,this.storageKey));const{error:d}=await Je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await Je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new By("You must provide either an email or phone number.")}catch(a){if(qe(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ko});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(qe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await id(this.storage,this.storageKey)),await Je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:T1e})}catch(i){if(qe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new ja;const{error:s}=await Je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Je(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await Je(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new By("You must provide either an email or phone number and a type")}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await zy(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<A_:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ja}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ja}:await Je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ja})})}catch(n){if(qe(n))return e1e(n)&&(await this._removeSession(),await qy(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new ja;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await id(this.storage,this.storageKey));const{data:l,error:u}=await Je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:Ja});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ja;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=T_(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(qe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ja;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(qe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!li())throw new Fy("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fy(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new kO("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fy("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new kO("No code detected.");const{data:b,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new Fy("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=fd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(qe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await zy(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Xbe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await qy(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=u1e(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await id(this.storage,this.storageKey,!0));try{return await Je(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(qe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(qe(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:d,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Je(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return li()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(qe(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Je(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await p1e(async s=>(s>0&&await f1e(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ko})),(s,i)=>{const o=200*Math.pow(2,s);return i&&I_(i)&&Date.now()+o-r<fd})}catch(r){if(this._debug(n,"error",r),qe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),li()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await zy(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<A_;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${A_}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),I_(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new ja;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new sb;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ja;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),qe(i)){const o={session:null,error:i};return I_(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await PU(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await qy(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&li()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/fd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${fd}ms, refresh threshold is ${Lx} ticks`),s<=Lx&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof kU)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!li()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await id(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Je(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await Je(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(qe(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await Je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(qe(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(qe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=T_(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Jbe>Date.now()))return r;const{data:s,error:i}=await Je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Ep("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new Ep("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:f,error:p}=await this.getSession();if(p||!f.session)return{data:null,error:p};r=f.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=T_(r);if(_1e(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:o},error:null}}const l=E1e(s.alg),u=await this.fetchJwk(s.kid,n),d=await crypto.subtle.importKey("jwk",u,l,!0,["verify"]);if(!await crypto.subtle.verify(l,d,o,a1e(`${a}.${c}`)))throw new Ep("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}}Fg.nextInstanceID=0;const M1e=Fg;class B1e extends M1e{constructor(e){super(e)}}var F1e=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})};class z1e{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=Hbe(e),c=new URL(a);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:Ube,realtime:Mbe,auth:Object.assign(Object.assign({},Lbe),{storageKey:l}),global:jbe},d=Vbe(r??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=qbe(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new ibe(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Dve(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Rbe(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return F1e(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:c},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new B1e({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new bbe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const OU=(t,e,n)=>new z1e(t,e,n),q1e="https://roxwocgknkiqnsgiojgz.supabase.co",W1e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3NjMxMTIsImV4cCI6MjA0NjMzOTExMn0.NbLMZom-gk7XYGdV4MtXYcgR8R1s8xthrIQ0hpQfx9Y",ol=OU(q1e,W1e),Fi={AI:"ai",ONLINE:"online"},Wy={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},BO=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],H1e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],V1e=({onClose:t,onMinimize:e})=>{const{address:n}=dv(),[r,s]=F.useState(Fi.AI),[i,o]=F.useState(()=>JSON.parse(JSON.stringify(BO))),[a,c]=F.useState("blue"),[l,u]=F.useState(null),[d,h]=F.useState("active"),[f,p]=F.useState("easy"),[g,y]=F.useState("Connect wallet to play"),[w,b]=F.useState([]),[v,E]=F.useState([]),[_,x]=F.useState([]),[S,T]=F.useState(null),[C,O]=F.useState(!1),[R,B]=F.useState(!1),[H,z]=F.useState(!1),[A,I]=F.useState(!1),[j,N]=F.useState(null),[k,L]=F.useState(""),[W,G]=F.useState(.1),[Z,Q]=F.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ee=F.useRef(null),ae=F.useRef(!1),ye=F.useRef(i);F.useEffect(()=>{ye.current=i},[i]),F.useEffect(()=>{n?y("Select game mode"):(y("Connect wallet to play"),z(!1),O(!1),B(!1))},[n]),F.useEffect(()=>(console.log("AI worker disabled for testing"),y("AI worker disabled for testing"),()=>{ee.current&&ee.current.terminate()}),[]),F.useEffect(()=>{$e()},[]);const $e=async()=>{try{const $=new Promise((Y,te)=>window.setTimeout(()=>te(new Error("Database timeout")),1e4)),U=ol.from("leaderboard").select("*").order("points",{ascending:!1}),{data:M,error:V}=await Promise.race([U,$]);if(V){y("Failed to load leaderboard"),console.error("Leaderboard error:",V);return}M&&E(M)}catch($){y("Failed to load leaderboard"),console.error("Leaderboard error:",$)}},Ae=async $=>{if(n)try{const U=n.toLowerCase(),{data:M}=await ol.from("leaderboard").select("*").eq("username",U).maybeSingle(),V=((M==null?void 0:M.wins)||0)+($==="win"?1:0),Y=((M==null?void 0:M.losses)||0)+($==="loss"?1:0),te=((M==null?void 0:M.draws)||0)+($==="draw"?1:0),ce=V+Y+te,Ie=$==="win"?f==="hard"?5:3:$==="draw"?1:0,ot=((M==null?void 0:M.points)||0)+Ie;M?await ol.from("leaderboard").update({wins:V,losses:Y,draws:te,total_games:ce,points:ot,updated_at:new Date().toISOString()}).eq("username",U):await ol.from("leaderboard").insert({username:U,chain_type:"evm",wins:V,losses:Y,draws:te,total_games:ce,points:ot,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),$e()}catch(U){console.error("Error updating score:",U)}},Me=$=>$&&$===$.toUpperCase()?"red":"blue",yt=($,U)=>$>=0&&$<8&&U>=0&&U<8,wt=($,U)=>`${String.fromCharCode(97+U)}${8-$}`,Ye=($,U)=>{const M=U==="blue"?"k":"K";let V=null;for(let ce=0;ce<8;ce++){for(let Ie=0;Ie<8;Ie++)if($[ce][Ie]===M){V={row:ce,col:Ie};break}if(V)break}if(!V)return console.log(`King not found for ${U}`),!1;const Y=U==="blue"?"red":"blue",te=Qe(V.row,V.col,Y,$);return console.log(`${U} king at ${V.row},${V.col} under attack: ${te}`),te},Qe=($,U,M,V)=>{for(let Y=0;Y<8;Y++)for(let te=0;te<8;te++){const ce=V[Y][te];if(ce&&Me(ce)===M&&is(ce,Y,te,$,U,!1,M,V))return!0}return!1},qt=($,U,M,V,Y,te=i)=>{const ce=te.map(ot=>[...ot]),Ie=ce[$][U];return ce[M][V]=Ie,ce[$][U]=null,Ye(ce,Y)},St=($,U,M,V,Y,te)=>{const ce=$==="blue"?-1:1,Ie=$==="blue"?6:1;if(M===Y&&V===U+ce)return te[V][Y]===null;if(M===Y&&U===Ie&&V===U+2*ce)return te[U+ce][M]===null&&te[V][Y]===null;if(Math.abs(M-Y)===1&&V===U+ce){const ot=te[V][Y];return ot!==null&&Me(ot)!==$}if(Math.abs(M-Y)===1&&V===U+ce){const ot=te[U][Y];if(ot&&Me(ot)!==$&&ot.toLowerCase()==="p"&&Z.lastPawnDoubleMove&&Z.lastPawnDoubleMove.row===U&&Z.lastPawnDoubleMove.col===Y)return!0}return!1},xn=($,U,M,V,Y)=>$!==M&&U!==V?!1:ei($,U,M,V,Y),ss=($,U,M,V)=>{const Y=Math.abs($-M),te=Math.abs(U-V);return Y===2&&te===1||Y===1&&te===2},Ut=($,U,M,V,Y)=>Math.abs($-M)!==Math.abs(U-V)?!1:ei($,U,M,V,Y),Zt=($,U,M,V,Y)=>xn($,U,M,V,Y)||Ut($,U,M,V,Y),Sn=($,U,M,V,Y)=>{const te=Math.abs(U-V),ce=Math.abs(M-Y);if(te<=1&&ce<=1)return!0;if(te===0&&ce===2){if($==="blue"&&!Z.blueKingMoved){if(Y===6&&!Z.blueRooksMove.right||Y===2&&!Z.blueRooksMove.left)return!0}else if($==="red"&&!Z.redKingMoved&&(Y===6&&!Z.redRooksMove.right||Y===2&&!Z.redRooksMove.left))return!0}return!1},ei=($,U,M,V,Y)=>{const te=$===M?0:(M-$)/Math.abs(M-$),ce=U===V?0:(V-U)/Math.abs(V-U);let Ie=$+te,ot=U+ce;for(;Ie!==M||ot!==V;){if(Y[Ie][ot]!==null)return!1;Ie+=te,ot+=ce}return!0},is=($,U,M,V,Y,te=!0,ce=Me($),Ie=i)=>{if(!yt(V,Y))return!1;const ot=Ie[V][Y];if(ot&&Me(ot)===ce)return!1;const pn=$.toLowerCase();let gn=!1;switch(pn){case"p":gn=St(ce,U,M,V,Y,Ie);break;case"r":gn=xn(U,M,V,Y,Ie);break;case"n":gn=ss(U,M,V,Y);break;case"b":gn=Ut(U,M,V,Y,Ie);break;case"q":gn=Zt(U,M,V,Y,Ie);break;case"k":gn=Sn(ce,U,M,V,Y);break}return gn&&te?!qt(U,M,V,Y,ce,Ie):gn},Is=($,U=i,M=a)=>{const V=[],Y=U[$.row][$.col];if(!Y||Me(Y)!==M)return V;for(let te=0;te<8;te++)for(let ce=0;ce<8;ce++)is(Y,$.row,$.col,te,ce,!0,M,U)&&V.push({row:te,col:ce});return V},fn=($,U=i)=>{if(!Ye(U,$))return!1;for(let M=0;M<8;M++)for(let V=0;V<8;V++){const Y=U[M][V];if(Y&&Me(Y)===$&&Is({row:M,col:V},U,$).length>0)return!1}return!0},Xn=($,U=i)=>{if(Ye(U,$))return!1;for(let M=0;M<8;M++)for(let V=0;V<8;V++){const Y=U[M][V];if(Y&&Me(Y)===$&&Is({row:M,col:V},U,$).length>0)return!1}return!0},mo=($,U)=>{if(d!=="active"||ae.current)return;const M=i[$][U],V=M?Me(M):null;if(l&&_.some(Y=>Y.row===$&&Y.col===U)){la(l,{row:$,col:U});return}if(M&&V===a){const Y=Is({row:$,col:U});u({row:$,col:U}),x(Y);return}u(null),x([])},la=($,U,M=!1)=>{const V=i[$.row][$.col];if(!V)return;const Y=Me(V);if(V.toLowerCase()==="p"&&(Y==="blue"&&U.row===0||Y==="red"&&U.row===7)){N({from:$,to:U}),I(!0);return}ti($,U,"q",M)},ti=($,U,M="q",V=!1)=>{const Y=i[$.row][$.col];i[U.row][U.col];const te=Me(Y),ce=Y?Y.toLowerCase():"",Ie=i.map(yo=>[...yo]);Ie[U.row][U.col]=ce==="p"&&(te==="blue"&&U.row===0||te==="red"&&U.row===7)?te==="blue"?M:M.toUpperCase():Y,Ie[$.row][$.col]=null;const ot={...Z};ce==="k"?te==="blue"?ot.blueKingMoved=!0:ot.redKingMoved=!0:ce==="r"&&(te==="blue"?($.col===0&&(ot.blueRooksMove.left=!0),$.col===7&&(ot.blueRooksMove.right=!0)):($.col===0&&(ot.redRooksMove.left=!0),$.col===7&&(ot.redRooksMove.right=!0))),ce==="p"&&Math.abs($.row-U.row)===2?ot.lastPawnDoubleMove={row:U.row,col:U.col}:ot.lastPawnDoubleMove=null,ce==="k"&&Math.abs($.col-U.col)===2&&(U.col===6?(Ie[$.row][7]=null,Ie[$.row][5]=te==="blue"?"r":"R"):U.col===2&&(Ie[$.row][0]=null,Ie[$.row][3]=te==="blue"?"r":"R")),o(Ie),Q(ot),u(null),x([]),T({from:$,to:U});const pn=`${wt($.row,$.col)}-${wt(U.row,U.col)}`;b(yo=>[...yo,pn]);const gn=K(a),Ts=Nu(Ie,gn);if(Ts){h(Ts),r===Fi.AI&&Ae(Ts==="checkmate"?gn==="blue"?"win":"loss":"draw");return}c(gn),!V&&r===Fi.AI&&gn==="red"&&d==="active"?(y("AI is thinking..."),ae.current=!0,setTimeout(()=>{const yo=xm(Ie);yo?((gr,$i,Jc="q")=>{const da=Ie[gr.row][gr.col];if(!da)return;const Vh=Me(da),Pu=da.toLowerCase(),ku=Ie.map(Rm=>[...Rm]);ku[$i.row][$i.col]=Pu==="p"&&(Vh==="blue"&&$i.row===0||Vh==="red"&&$i.row===7)?Vh==="blue"?Jc:Jc.toUpperCase():da,ku[gr.row][gr.col]=null,o(ku),u(null),x([]),T({from:gr,to:$i});const Ou=`${wt(gr.row,gr.col)}-${wt($i.row,$i.col)}`;b(Rm=>[...Rm,Ou]);const ha=K(gn),fa=Nu(ku,ha);if(fa){h(fa),r===Fi.AI&&Ae(fa==="checkmate"?ha==="blue"?"win":"loss":"draw");return}c(ha),y(`Your turn (${ha})`)})(yo.from,yo.to,"q"):y("AI could not find a move"),ae.current=!1},1e3)):y(`Your turn (${gn})`)},Nu=($,U)=>(console.log("Checking game end for player:",U),console.log("Is king in check:",Ye($,U)),fn(U,$)?(console.log("CHECKMATE detected!"),y(`Checkmate! ${U==="blue"?"Red":"Blue"} wins!`),"checkmate"):Xn(U,$)?(console.log("STALEMATE detected!"),y("Stalemate! Game is a draw."),"stalemate"):(Ye($,U)?(console.log("CHECK detected!"),y(`${U==="blue"?"Blue":"Red"} is in check!`)):y(`Your turn (${U})`),null)),xm=$=>{const U=[];for(let M=0;M<8;M++)for(let V=0;V<8;V++){const Y=$[M][V];Y&&Me(Y)==="red"&&U.push({row:M,col:V})}for(let M=U.length-1;M>0;M--){const V=Math.floor(Math.random()*(M+1));[U[M],U[V]]=[U[V],U[M]]}for(const M of U){const V=Is(M,$,"red");if(V.length>0){const Y=V[Math.floor(Math.random()*V.length)],te=$.map(Ie=>[...Ie]),ce=te[M.row][M.col];if(te[Y.row][Y.col]=ce,te[M.row][M.col]=null,!Ye(te,"red"))return{from:M,to:Y}}}return null},Sm=()=>{o(JSON.parse(JSON.stringify(BO))),c("blue"),u(null),h("active"),b([]),x([]),T(null),z(!1),O(!1),B(!1),y("Select game mode"),Q({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ae.current&&(ae.current=!1)},ib=()=>{console.log("startAIGame called"),O(!0),B(!1),y("Select difficulty")},Am=()=>{console.log("startMultiplayerGame called"),B(!0),O(!1),y("Set wager and create/join game")},Im=()=>{console.log("startGame called, difficulty:",f,"gameMode:",r),z(!0),O(!1),B(!1),y(`Your turn (${a})`)},ob=async()=>{if(n)try{const $=Math.random().toString(36).substring(2,8).toUpperCase(),{error:U}=await ol.from("chess_games").insert({game_id:$,blue_player:n,board:JSON.stringify({positions:i,piece_state:Z}),current_player:"blue",game_state:"waiting",bet_amount:W,chain:"evm",is_public:!0});if(U)throw U;y(`Game created! Share code: ${$}`)}catch($){console.error("Error creating game:",$),y("Failed to create game")}},Tm=async()=>{if(!(!n||!k))try{const{data:$,error:U}=await ol.from("chess_games").select("*").eq("game_id",k).eq("game_state","waiting").single();if(U||!$){y("Game not found or already full");return}const{error:M}=await ol.from("chess_games").update({red_player:n,game_state:"active",updated_at:new Date().toISOString()}).eq("game_id",k);if(M)throw M;y("Joined game! Waiting for opponent..."),Im()}catch($){console.error("Error joining game:",$),y("Failed to join game")}},Nm=$=>`${$.slice(0,6)}...${$.slice(-4)}`,ab=($,U)=>{const M=i[$][U],V=(l==null?void 0:l.row)===$&&(l==null?void 0:l.col)===U,Y=_.some(ce=>ce.row===$&&ce.col===U),te=S&&(S.from.row===$&&S.from.col===U||S.to.row===$&&S.to.col===U);return m.jsxs("div",{className:`square ${V?"selected":""} ${Y?"legal-move":""} ${te?"last-move":""}`,onClick:()=>mo($,U),children:[M&&m.jsx("div",{className:"piece",style:{backgroundImage:Wy[M]?`url(${Wy[M]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),Y&&m.jsx("div",{className:"legal-move-indicator"})]},`${$}-${U}`)},cb=()=>{if(!A||!j)return null;const $=a==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:$.map(U=>m.jsx("div",{className:"promotion-piece",onClick:()=>{ti(j.from,j.to,U),I(!1),N(null)},style:{backgroundImage:Wy[U]?`url(${Wy[U]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},U))})]})})},[lb,Pm]=F.useState(null),km=($=!1,U="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${$?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:H1e.map(M=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>Pm(M.key),children:[m.jsx("img",{src:M.img,alt:M.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:M.name}),lb===M.key&&m.jsx("div",{className:"piece-gallery-desc",children:M.desc})]},M.key))}),m.jsx("div",{className:"piece-gallery-tip",children:U})]}),Om=()=>m.jsxs("div",{className:"difficulty-selection-row",children:[m.jsx("div",{className:"difficulty-gallery-col",children:km(!0,"click for chess piece movements")}),m.jsxs("div",{className:"difficulty-controls-col",children:[m.jsxs("div",{className:"difficulty-selection-panel",children:[m.jsx("h3",{children:"Select Difficulty"}),m.jsx("button",{className:`difficulty-btn ${f==="easy"?"selected":""}`,onClick:()=>p("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn ${f==="hard"?"selected":""}`,onClick:()=>p("hard"),children:"Kinda Harder"}),m.jsx("button",{className:"start-btn",onClick:Im,children:"Start Game"})]}),m.jsx("div",{className:"difficulty-leaderboard-panel",children:m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:v.slice(0,10).map(($,U)=>{const M=$;return m.jsxs("tr",{children:[m.jsx("td",{children:U+1}),m.jsx("td",{children:Nm(M.username)}),m.jsx("td",{children:M.wins}),m.jsx("td",{children:M.losses}),m.jsx("td",{children:M.draws}),m.jsx("td",{children:M.points})]},M.username)})})]})})]})})]})]}),K=$=>$==="blue"?"red":"blue";return n?m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsxs("div",{className:"chess-content",children:[!H&&!C&&!R&&m.jsx("div",{className:"gallery-main-area",children:km(!1)}),!H&&!C&&!R&&m.jsxs("div",{className:"game-mode-selection",children:[m.jsx("h3",{children:"Select Game Mode"}),m.jsx("button",{className:`mode-btn ${r===Fi.AI?"selected":""}`,onClick:()=>s(Fi.AI),children:"VS the House"}),m.jsx("button",{className:`mode-btn ${r===Fi.ONLINE?"selected":""}`,onClick:()=>s(Fi.ONLINE),disabled:!0,children:"PvP Under Construction"}),m.jsx("button",{className:"start-btn",onClick:()=>{r===Fi.AI?ib():Am()},children:"Continue"})]}),C&&Om(),R&&m.jsxs("div",{className:"multiplayer-selection",children:[m.jsx("h3",{children:"Multiplayer"}),m.jsxs("div",{className:"wager-input",children:[m.jsx("label",{children:"Wager (ETH):"}),m.jsx("input",{type:"number",value:W,onChange:$=>G(parseFloat($.target.value)||.1),min:"0.01",step:"0.01"})]}),m.jsx("button",{onClick:ob,children:"Create Game"}),m.jsxs("div",{className:"join-game",children:[m.jsx("input",{type:"text",value:k,onChange:$=>L($.target.value),placeholder:"Enter invite code"}),m.jsx("button",{onClick:Tm,children:"Join Game"})]}),g&&g.includes("Game created!")&&m.jsx("div",{className:"game-created",children:m.jsx("p",{children:g})})]}),H&&m.jsxs("div",{className:"game-container",children:[m.jsx("div",{className:"left-sidebar",children:m.jsxs("div",{className:"move-history",children:[m.jsx("h4",{children:"Move History"}),m.jsx("div",{className:"moves",children:w.slice().reverse().map(($,U)=>m.jsxs("span",{className:"move",children:[Math.floor((w.length-1-U)/2)+1,".",(w.length-1-U)%2===0?"":" ",$]},w.length-1-U))})]})}),m.jsxs("div",{className:"game-main",children:[m.jsxs("div",{className:"game-info",children:[m.jsx("div",{className:"status",children:g}),m.jsxs("div",{className:"current-player",children:["Current: ",a==="blue"?"Blue":"Red"]}),m.jsxs("div",{className:"wager-display",children:["Wager: ",r===Fi.AI?"NA":`${W} ETH`]})]}),m.jsx("div",{className:"chessboard-container",children:m.jsx("div",{className:"chessboard",children:Array.from({length:8},($,U)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(M,V)=>ab(U,V))},U))})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:Sm,children:"New Game"}),m.jsx("button",{onClick:Sm,children:"Back to Menu"})]})]}),!H&&!C&&!R&&m.jsx("div",{className:"right-sidebar",children:m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:v.slice(0,10).map(($,U)=>{const M=$;return m.jsxs("tr",{children:[m.jsx("td",{children:U+1}),m.jsx("td",{children:Nm(M.username)}),m.jsx("td",{children:M.wins}),m.jsx("td",{children:M.losses}),m.jsx("td",{children:M.draws}),m.jsx("td",{children:M.points})]},M.username)})})]})})]})})]})]}),cb()]}):m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsx("div",{className:"chess-content",children:m.jsx("div",{className:"wallet-required",children:m.jsx("p",{children:"Connect your wallet to play chess"})})})]})},G1e=Oi({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function K1e(){const t=G1e(),{open:e}=Jv(),{address:n,isConnected:r}=dv(),{isPending:s}=v5(),{disconnect:i}=b5(),{data:o}=_5({address:n}),[a,c]=F.useState("pixelawbs-popup"),[l,u]=F.useState(new Set),[d,h]=F.useState(!1),[f,p]=F.useState(!1),[g,y]=F.useState(!1),[w,b]=F.useState(!1),v=F.useRef(null);F.useEffect(()=>{if(a==="halloween-popup"&&v.current){const j=v.current.querySelector("script[data-tiktok-embed]");j&&j.remove();const N=document.createElement("script");N.src="https://www.tiktok.com/embed.js",N.async=!0,N.setAttribute("data-tiktok-embed","true"),v.current.appendChild(N)}},[a]);const E=(j,N,k)=>{if(j==="url"&&k)window.open(k,"_blank");else if(j==="popup"&&N)c(N),u(L=>{const W=new Set(L);return W.delete(N),W}),document.body.offsetWidth;else if(j==="wallet")r?i():e();else if(j==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else j==="nft-gallery"?p(!0):j==="meme-generator"?y(!0):j==="chess"&&b(!0)},_=()=>c(null),x=j=>{u(N=>new Set(N).add(j)),c(null)},S=j=>{j==="mint-popup"?h(!0):j==="nft-gallery-popup"?p(!0):j==="meme-generator-popup"?y(!0):j==="chess-game-popup"?b(!0):c(j),u(N=>{const k=new Set(N);return k.delete(j),k})},T=()=>h(!1),C=()=>p(!1),O=()=>y(!1),R=()=>b(!1),B=()=>{h(!1),u(j=>new Set(j).add("mint-popup"))},H=()=>{p(!1),u(j=>new Set(j).add("nft-gallery-popup"))},z=()=>{y(!1),u(j=>new Set(j).add("meme-generator-popup"))},A=()=>{b(!1),u(j=>new Set(j).add("chess-game-popup"))},I=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[m.jsx(NJ,{onIconClick:E}),m.jsx(kJ,{minimizedWindows:Array.from(l),onRestoreWindow:S,walletButton:I,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs(Ds,{id:"chat-popup",isOpen:a==="chat-popup",onClose:_,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Ds,{id:"purity-popup",isOpen:a==="purity-popup",onClose:_,onMinimize:x,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Ds,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:_,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Ds,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:_,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Ds,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:_,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(Ds,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:_,onMinimize:x,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(YG,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(Ds,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:_,onMinimize:x,children:(()=>{const j=N=>{N.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:j,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(Ds,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:_,onMinimize:x,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:v,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),m.jsxs(Ds,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:_,onMinimize:x,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{src:"https://dexscreener.com/solana/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&theme=dark&info=0",title:"DexScreener",style:{width:"100%",height:"100%",border:"none"}})})]}),m.jsx($J,{isOpen:d,onClose:T,onMinimize:B,walletAddress:n||""}),m.jsx(Ive,{isOpen:f,onClose:C,onMinimize:H,walletAddress:n}),m.jsx(Ds,{id:"meme-generator-popup",isOpen:g,onClose:O,onMinimize:z,children:m.jsx(aU,{})}),w&&m.jsx(V1e,{onClose:R,onMinimize:A})]})}const Y1e=Oi({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),FO=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Q1e=({onBack:t,walletAddress:e})=>{const n=Y1e(),{open:r}=Jv(),[s,i]=F.useState([]),[o,a]=F.useState(!0),[c,l]=F.useState(null),[u,d]=F.useState(FO[0]),[h,f]=F.useState(!1),[p,g]=F.useState(null),[y,w]=F.useState("all"),[b,v]=F.useState(null),E=F.useCallback(async()=>{var T,C;try{if((T=window.solana)!=null&&T.isPhantom){const O=await window.solana.connect();g(O.publicKey.toString());return}if((C=window.solflare)!=null&&C.isSolflare){const O=await window.solflare.connect();g(O.publicKey.toString());return}r()}catch(O){console.error("Failed to connect Solana wallet:",O),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);F.useEffect(()=>{var T,C;(T=window.solana)!=null&&T.publicKey?g(window.solana.publicKey.toString()):(C=window.solflare)!=null&&C.publicKey&&g(window.solflare.publicKey.toString())},[]),F.useEffect(()=>{(async()=>{a(!0);try{let C,O=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}O=p,C=await OJ(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",C.data.length)}else u.api==="opensea"?C=await TA(u.slug,100,O):C=await IA(u.slug,1,100,O);y==="owned"&&p&&(console.log("Filtering for owner:",p),C.data.some(B=>B.owners&&B.owners.length>0)?C.data=C.data.filter(B=>B.owners.some(z=>z.owner_of&&z.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(C.data)}catch(C){console.error(C)}finally{a(!1)}})()},[e,u,p,y]),F.useEffect(()=>{h&&E()},[h,E]);const _=async T=>{if(a(!0),u.api==="opensea"&&u.chain)try{const C=await I8(u.chain,T.address,T.token_id.toString()),O={...T,attributes:JSON.stringify(C.traits||[])};l(O)}catch(C){console.error("Failed to fetch full NFT details",C),l(T)}else l(T);a(!1)},x=()=>{if(!c)return null;let T=[];try{T=JSON.parse(c.attributes||"[]")}catch(C){console.error("Failed to parse NFT attributes:",C)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:T.map((C,O)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[C.trait_type,":"]})," ",C.value]},O))})]})},S=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:FO.map(T=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===T.slug?"active":""}`,onClick:()=>d(T),children:T.name},T.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>w("all"),style:{background:y==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:y==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>w("owned"),disabled:!e&&!p,style:{background:y==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:y==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{E()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(T=>{let C=T.image||T.image_url||T.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void _(T),children:[m.jsx("img",{src:C,alt:T.name,onError:O=>{O.currentTarget.src!==T.image_url&&T.image_url?O.currentTarget.src=T.image_url:O.currentTarget.src!==T.image_url_shrunk&&T.image_url_shrunk?O.currentTarget.src=T.image_url_shrunk:O.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:T.name})]},T.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?x():S()})]})},J1e=Oi({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),$s=({isOpen:t,onClose:e,title:n,children:r})=>{const s=J1e();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),m.jsx("div",{className:s.content,children:r})]})}):null},Z1e=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=F.useState([]),[i,o]=F.useState(!1),[a,c]=F.useState(!1),[l,u]=F.useState({}),[d,h]=F.useState(null),{data:f}=E5();F.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const E=await S8(n);s(E);const _={};E.forEach(x=>{_[x.id]=0}),u(_)}catch(E){h(E.message)}finally{o(!1)}},g=(E,_)=>{u(x=>({...x,[E]:Math.max(0,_)}))},y=async()=>{const E=Object.entries(l).filter(([,_])=>_>0).map(([_,x])=>({id:_,quantity:x}));if(E.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const _=await A8(n,E);if(_.success&&_.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const x=await f.sendTransaction({to:_.mintTransaction.to,value:BigInt(_.mintTransaction.value),data:_.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${x}`),e()}catch(x){h("Transaction failed: "+x.message)}}else throw new Error(_.message||"Could not retrieve minting transaction.")}catch(_){h("Minting failed: "+_.message)}finally{c(!1)}},w=(E,_)=>`${parseFloat(E)} ${_}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs($s,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:v,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(E=>m.jsxs("div",{style:b,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:E.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",w(E.token_price,E.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",E.wallet_limit===4294967295?"Unlimited":E.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:E.wallet_limit===4294967295?void 0:E.wallet_limit,value:l[E.id]||"",onChange:_=>g(E.id,parseInt(_.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},E.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:y,disabled:a,children:a?"Minting...":"Mint"})]})]})},X1e="https://roxwocgknkiqnsgiojgz.supabase.co",e_e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJveHdvY2drbmtpcW5zZ2lvamd6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzA3NjMxMTIsImV4cCI6MjA0NjMzOTExMn0.NbLMZom-gk7XYGdV4MtXYcgR8R1s8xthrIQ0hpQfx9Y",al=OU(X1e,e_e),zi={AI:"ai",ONLINE:"online"},Hy={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},zO=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],t_e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],n_e=({onClose:t,walletAddress:e})=>{const[n,r]=F.useState(zi.AI),[s,i]=F.useState(()=>JSON.parse(JSON.stringify(zO))),[o,a]=F.useState("blue"),[c,l]=F.useState(null),[u,d]=F.useState("active"),[h,f]=F.useState("easy"),[p,g]=F.useState("Connect wallet to play"),[y,w]=F.useState([]),[b,v]=F.useState([]),[E,_]=F.useState([]),[x,S]=F.useState(null),[T,C]=F.useState(!1),[O,R]=F.useState(!1),[B,H]=F.useState(!1),[z,A]=F.useState(!1),[I,j]=F.useState(null),[N,k]=F.useState(""),[L,W]=F.useState(.1),[G,Z]=F.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),Q=F.useRef(null),ee=F.useRef(!1),ae=F.useRef(s);F.useEffect(()=>{ae.current=s},[s]),F.useEffect(()=>{e?g("Select game mode"):(g("Connect wallet to play"),H(!1),C(!1),R(!1))},[e]),F.useEffect(()=>(console.log("AI worker disabled for testing"),g("AI worker disabled for testing"),()=>{Q.current&&Q.current.terminate()}),[]),F.useEffect(()=>{ye()},[]);const ye=async()=>{try{const K=new Promise((V,Y)=>window.setTimeout(()=>Y(new Error("Database timeout")),1e4)),$=al.from("leaderboard").select("*").order("points",{ascending:!1}),{data:U,error:M}=await Promise.race([$,K]);if(M){g("Failed to load leaderboard"),console.error("Leaderboard error:",M);return}U&&v(U)}catch(K){g("Failed to load leaderboard"),console.error("Leaderboard error:",K)}},$e=async K=>{if(e)try{const{data:$}=await al.from("chess_leaderboard").select("*").eq("username",e.toLowerCase()).eq("chain_type","evm").single();if($){const U=$,M=U.wins+(K==="win"?1:0),V=U.losses+(K==="loss"?1:0),Y=U.draws+(K==="draw"?1:0),te=M+V+Y,ce=M*3+Y;await al.from("chess_leaderboard").update({wins:M,losses:V,draws:Y,total_games:te,points:ce,updated_at:new Date().toISOString()}).eq("username",e.toLowerCase()).eq("chain_type","evm")}else await al.from("chess_leaderboard").insert({username:e.toLowerCase(),chain_type:"evm",wins:K==="win"?1:0,losses:K==="loss"?1:0,draws:K==="draw"?1:0,total_games:1,points:K==="win"?3:K==="draw"?1:0,updated_at:new Date().toISOString()});ye()}catch($){console.error("Error updating score:",$)}},Ae=K=>K&&K===K.toUpperCase()?"red":"blue",Me=(K,$)=>K>=0&&K<8&&$>=0&&$<8,yt=(K,$)=>`${String.fromCharCode(97+$)}${8-K}`,wt=(K,$)=>{const U=$==="blue"?"k":"K";let M=null;for(let te=0;te<8;te++){for(let ce=0;ce<8;ce++)if(K[te][ce]===U){M={row:te,col:ce};break}if(M)break}if(!M)return console.log(`King not found for ${$}`),!1;const V=$==="blue"?"red":"blue",Y=Ye(M.row,M.col,V,K);return console.log(`${$} king at ${M.row},${M.col} under attack: ${Y}`),Y},Ye=(K,$,U,M)=>{for(let V=0;V<8;V++)for(let Y=0;Y<8;Y++){const te=M[V][Y];if(te&&Ae(te)===U&&ei(te,V,Y,K,$,!1,U,M))return!0}return!1},Qe=(K,$,U,M,V,Y=s)=>{const te=Y.map(Ie=>[...Ie]),ce=te[K][$];return te[U][M]=ce,te[K][$]=null,wt(te,V)},qt=(K,$,U,M,V,Y)=>{const te=K==="blue"?-1:1,ce=K==="blue"?6:1;if(U===V&&M===$+te)return Y[M][V]===null;if(U===V&&$===ce&&M===$+2*te)return Y[$+te][U]===null&&Y[M][V]===null;if(Math.abs(U-V)===1&&M===$+te){const Ie=Y[M][V];return Ie!==null&&Ae(Ie)!==K}if(Math.abs(U-V)===1&&M===$+te){const Ie=Y[$][V];if(Ie&&Ae(Ie)!==K&&Ie.toLowerCase()==="p"&&G.lastPawnDoubleMove&&G.lastPawnDoubleMove.row===$&&G.lastPawnDoubleMove.col===V)return!0}return!1},St=(K,$,U,M,V)=>K!==U&&$!==M?!1:Sn(K,$,U,M,V),xn=(K,$,U,M)=>{const V=Math.abs(K-U),Y=Math.abs($-M);return V===2&&Y===1||V===1&&Y===2},ss=(K,$,U,M,V)=>Math.abs(K-U)!==Math.abs($-M)?!1:Sn(K,$,U,M,V),Ut=(K,$,U,M,V)=>St(K,$,U,M,V)||ss(K,$,U,M,V),Zt=(K,$,U,M,V)=>{const Y=Math.abs($-M),te=Math.abs(U-V);if(Y<=1&&te<=1)return!0;if(Y===0&&te===2){if(K==="blue"&&!G.blueKingMoved){if(V===6&&!G.blueRooksMove.right||V===2&&!G.blueRooksMove.left)return!0}else if(K==="red"&&!G.redKingMoved&&(V===6&&!G.redRooksMove.right||V===2&&!G.redRooksMove.left))return!0}return!1},Sn=(K,$,U,M,V)=>{const Y=K===U?0:(U-K)/Math.abs(U-K),te=$===M?0:(M-$)/Math.abs(M-$);let ce=K+Y,Ie=$+te;for(;ce!==U||Ie!==M;){if(V[ce][Ie]!==null)return!1;ce+=Y,Ie+=te}return!0},ei=(K,$,U,M,V,Y=!0,te=Ae(K),ce=s)=>{if(!Me(M,V))return!1;const Ie=ce[M][V];if(Ie&&Ae(Ie)===te)return!1;const ot=K.toLowerCase();let pn=!1;switch(ot){case"p":pn=qt(te,$,U,M,V,ce);break;case"r":pn=St($,U,M,V,ce);break;case"n":pn=xn($,U,M,V);break;case"b":pn=ss($,U,M,V,ce);break;case"q":pn=Ut($,U,M,V,ce);break;case"k":pn=Zt(te,$,U,M,V);break}return pn&&Y?!Qe($,U,M,V,te,ce):pn},is=(K,$=s,U=o)=>{const M=[],V=$[K.row][K.col];if(!V||Ae(V)!==U)return M;for(let Y=0;Y<8;Y++)for(let te=0;te<8;te++)ei(V,K.row,K.col,Y,te,!0,U,$)&&M.push({row:Y,col:te});return M},Is=(K,$=s)=>{if(!wt($,K))return!1;for(let U=0;U<8;U++)for(let M=0;M<8;M++){const V=$[U][M];if(V&&Ae(V)===K&&is({row:U,col:M},$,K).length>0)return!1}return!0},fn=(K,$=s)=>{if(wt($,K))return!1;for(let U=0;U<8;U++)for(let M=0;M<8;M++){const V=$[U][M];if(V&&Ae(V)===K&&is({row:U,col:M},$,K).length>0)return!1}return!0},Xn=(K,$)=>{if(u!=="active"||ee.current)return;const U=s[K][$],M=U?Ae(U):null;if(c&&E.some(V=>V.row===K&&V.col===$)){mo(c,{row:K,col:$});return}if(U&&M===o){const V=is({row:K,col:$});l({row:K,col:$}),_(V);return}l(null),_([])},mo=(K,$,U=!1)=>{const M=s[K.row][K.col];if(!M)return;const V=Ae(M);if(M.toLowerCase()==="p"&&(V==="blue"&&$.row===0||V==="red"&&$.row===7)){j({from:K,to:$}),A(!0);return}la(K,$,"q",U)},la=(K,$,U="q",M=!1)=>{const V=s[K.row][K.col];s[$.row][$.col];const Y=Ae(V),te=V?V.toLowerCase():"",ce=s.map(Ts=>[...Ts]);ce[$.row][$.col]=te==="p"&&(Y==="blue"&&$.row===0||Y==="red"&&$.row===7)?Y==="blue"?U:U.toUpperCase():V,ce[K.row][K.col]=null;const Ie={...G};te==="k"?Y==="blue"?Ie.blueKingMoved=!0:Ie.redKingMoved=!0:te==="r"&&(Y==="blue"?(K.col===0&&(Ie.blueRooksMove.left=!0),K.col===7&&(Ie.blueRooksMove.right=!0)):(K.col===0&&(Ie.redRooksMove.left=!0),K.col===7&&(Ie.redRooksMove.right=!0))),te==="p"&&Math.abs(K.row-$.row)===2?Ie.lastPawnDoubleMove={row:$.row,col:$.col}:Ie.lastPawnDoubleMove=null,te==="k"&&Math.abs(K.col-$.col)===2&&($.col===6?(ce[K.row][7]=null,ce[K.row][5]=Y==="blue"?"r":"R"):$.col===2&&(ce[K.row][0]=null,ce[K.row][3]=Y==="blue"?"r":"R")),i(ce),Z(Ie),l(null),_([]),S({from:K,to:$});const ot=`${yt(K.row,K.col)}-${yt($.row,$.col)}`;w(Ts=>[...Ts,ot]);const pn=Om(o),gn=ti(ce,pn);if(gn){d(gn),n===zi.AI&&$e(gn==="checkmate"?pn==="blue"?"win":"loss":"draw");return}a(pn),!M&&n===zi.AI&&pn==="red"&&u==="active"?(g("AI is thinking..."),ee.current=!0,setTimeout(()=>{const Ts=Nu(ce);Ts?((ua,gr,$i="q")=>{const Jc=ce[ua.row][ua.col];if(!Jc)return;const da=Ae(Jc),Vh=Jc.toLowerCase(),Pu=ce.map(fa=>[...fa]);Pu[gr.row][gr.col]=Vh==="p"&&(da==="blue"&&gr.row===0||da==="red"&&gr.row===7)?da==="blue"?$i:$i.toUpperCase():Jc,Pu[ua.row][ua.col]=null,i(Pu),l(null),_([]),S({from:ua,to:gr});const ku=`${yt(ua.row,ua.col)}-${yt(gr.row,gr.col)}`;w(fa=>[...fa,ku]);const Ou=Om(pn),ha=ti(Pu,Ou);if(ha){d(ha),n===zi.AI&&$e(ha==="checkmate"?Ou==="blue"?"win":"loss":"draw");return}a(Ou),g(`Your turn (${Ou})`)})(Ts.from,Ts.to,"q"):g("AI could not find a move"),ee.current=!1},1e3)):g(`Your turn (${pn})`)},ti=(K,$)=>(console.log("Checking game end for player:",$),console.log("Is king in check:",wt(K,$)),Is($,K)?(console.log("CHECKMATE detected!"),g(`Checkmate! ${$==="blue"?"Red":"Blue"} wins!`),"checkmate"):fn($,K)?(console.log("STALEMATE detected!"),g("Stalemate! Game is a draw."),"stalemate"):(wt(K,$)?(console.log("CHECK detected!"),g(`${$==="blue"?"Blue":"Red"} is in check!`)):g(`Your turn (${$})`),null)),Nu=K=>{const $=[];for(let U=0;U<8;U++)for(let M=0;M<8;M++){const V=K[U][M];V&&Ae(V)==="red"&&$.push({row:U,col:M})}for(let U=$.length-1;U>0;U--){const M=Math.floor(Math.random()*(U+1));[$[U],$[M]]=[$[M],$[U]]}for(const U of $){const M=is(U,K,"red");if(M.length>0){const V=M[Math.floor(Math.random()*M.length)],Y=K.map(ce=>[...ce]),te=Y[U.row][U.col];if(Y[V.row][V.col]=te,Y[U.row][U.col]=null,!wt(Y,"red"))return{from:U,to:V}}}return null},xm=()=>{i(JSON.parse(JSON.stringify(zO))),a("blue"),l(null),d("active"),w([]),_([]),S(null),H(!1),C(!1),R(!1),g("Select game mode"),Z({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ee.current&&(ee.current=!1)},Sm=()=>{console.log("startAIGame called"),C(!0),R(!1),g("Select difficulty")},ib=()=>{console.log("startMultiplayerGame called"),R(!0),C(!1),g("Set wager and create/join game")},Am=()=>{console.log("startGame called, difficulty:",h,"gameMode:",n),H(!0),C(!1),R(!1),g(`Your turn (${o})`)},Im=async()=>{if(e)try{const K=Math.random().toString(36).substring(2,8).toUpperCase(),{error:$}=await al.from("chess_games").insert({game_id:K,blue_player:e,board:JSON.stringify({positions:s,piece_state:G}),current_player:"blue",game_state:"waiting",bet_amount:L,chain:"evm",is_public:!0});if($)throw $;g(`Game created! Share code: ${K}`)}catch(K){console.error("Error creating game:",K),g("Failed to create game")}},ob=async()=>{if(!(!e||!N))try{const{data:K,error:$}=await al.from("chess_games").select("*").eq("game_id",N).eq("game_state","waiting").single();if($||!K){g("Game not found or already full");return}const{error:U}=await al.from("chess_games").update({red_player:e,game_state:"active",updated_at:new Date().toISOString()}).eq("game_id",N);if(U)throw U;g("Joined game! Waiting for opponent..."),Am()}catch(K){console.error("Error joining game:",K),g("Failed to join game")}},Tm=K=>`${K.slice(0,6)}...${K.slice(-4)}`,Nm=(K,$)=>{const U=s[K][$],M=(c==null?void 0:c.row)===K&&(c==null?void 0:c.col)===$,V=E.some(te=>te.row===K&&te.col===$),Y=x&&(x.from.row===K&&x.from.col===$||x.to.row===K&&x.to.col===$);return m.jsxs("div",{className:`square ${M?"selected":""} ${V?"legal-move":""} ${Y?"last-move":""}`,onClick:()=>Xn(K,$),children:[U&&m.jsx("div",{className:"piece",style:{backgroundImage:Hy[U]?`url(${Hy[U]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),V&&m.jsx("div",{className:"legal-move-indicator"})]},`${K}-${$}`)},ab=()=>{if(!z||!I)return null;const K=o==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:K.map($=>m.jsx("div",{className:"promotion-piece",onClick:()=>{la(I.from,I.to,$),A(!1),j(null)},style:{backgroundImage:Hy[$]?`url(${Hy[$]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},$))})]})})},[cb,lb]=F.useState(null),Pm=(K=!1,$="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${K?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:t_e.map(U=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>lb(U.key),children:[m.jsx("img",{src:U.img,alt:U.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:U.name}),cb===U.key&&m.jsx("div",{className:"piece-gallery-desc",children:U.desc})]},U.key))}),m.jsx("div",{className:"piece-gallery-tip",children:$})]}),km=()=>m.jsxs("div",{className:"difficulty-selection-row",children:[m.jsx("div",{className:"difficulty-gallery-col",children:Pm(!0,"click for chess piece movements")}),m.jsxs("div",{className:"difficulty-controls-col",children:[m.jsxs("div",{className:"difficulty-selection-panel",children:[m.jsx("h3",{children:"Select Difficulty"}),m.jsx("button",{className:`difficulty-btn ${h==="easy"?"selected":""}`,onClick:()=>f("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn ${h==="hard"?"selected":""}`,onClick:()=>f("hard"),children:"Kinda Harder"}),m.jsx("button",{className:"start-btn",onClick:Am,children:"Start Game"})]}),m.jsx("div",{className:"difficulty-leaderboard-panel",children:m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:b.slice(0,10).map((K,$)=>{const U=K;return m.jsxs("tr",{children:[m.jsx("td",{children:$+1}),m.jsx("td",{children:Tm(U.username)}),m.jsx("td",{children:U.wins}),m.jsx("td",{children:U.losses}),m.jsx("td",{children:U.draws}),m.jsx("td",{children:U.points})]},U.username)})})]})})]})})]})]}),Om=K=>K==="blue"?"red":"blue";return e?m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsx("div",{className:"chess-controls",children:m.jsx("button",{onClick:t,children:"×"})})]}),m.jsxs("div",{className:"chess-content",children:[!B&&!T&&!O&&m.jsx("div",{className:"gallery-main-area",children:Pm(!1)}),!B&&!T&&!O&&m.jsxs("div",{className:"game-mode-selection",children:[m.jsx("h3",{children:"Select Game Mode"}),m.jsx("button",{className:`mode-btn ${n===zi.AI?"selected":""}`,onClick:()=>r(zi.AI),children:"VS the House"}),m.jsx("button",{className:`mode-btn ${n===zi.ONLINE?"selected":""}`,onClick:()=>r(zi.ONLINE),disabled:!0,children:"PvP Under Construction"}),m.jsx("button",{className:"start-btn",onClick:()=>{n===zi.AI?Sm():ib()},children:"Continue"})]}),T&&km(),O&&m.jsxs("div",{className:"multiplayer-selection",children:[m.jsx("h3",{children:"Multiplayer"}),m.jsxs("div",{className:"wager-input",children:[m.jsx("label",{children:"Wager (ETH):"}),m.jsx("input",{type:"number",value:L,onChange:K=>W(parseFloat(K.target.value)||.1),min:"0.01",step:"0.01"})]}),m.jsx("button",{onClick:Im,children:"Create Game"}),m.jsxs("div",{className:"join-game",children:[m.jsx("input",{type:"text",value:N,onChange:K=>k(K.target.value),placeholder:"Enter invite code"}),m.jsx("button",{onClick:ob,children:"Join Game"})]}),p&&p.includes("Game created!")&&m.jsx("div",{className:"game-created",children:m.jsx("p",{children:p})})]}),B&&m.jsxs("div",{className:"game-container",children:[m.jsx("div",{className:"left-sidebar",children:m.jsxs("div",{className:"move-history",children:[m.jsx("h4",{children:"Move History"}),m.jsx("div",{className:"moves",children:y.slice().reverse().map((K,$)=>m.jsxs("span",{className:"move",children:[Math.floor((y.length-1-$)/2)+1,".",(y.length-1-$)%2===0?"":" ",K]},y.length-1-$))})]})}),m.jsxs("div",{className:"game-main",children:[m.jsxs("div",{className:"game-info",children:[m.jsx("div",{className:"status",children:p}),m.jsxs("div",{className:"current-player",children:["Current: ",o==="blue"?"Blue":"Red"]}),m.jsxs("div",{className:"wager-display",children:["Wager: ",n===zi.AI?"NA":`${L} ETH`]})]}),m.jsx("div",{className:"chessboard-container",children:m.jsx("div",{className:"chessboard",children:Array.from({length:8},(K,$)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(U,M)=>Nm($,M))},$))})}),m.jsxs("div",{className:"game-controls",children:[m.jsx("button",{onClick:xm,children:"New Game"}),m.jsx("button",{onClick:xm,children:"Back to Menu"})]})]}),!B&&!T&&!O&&m.jsx("div",{className:"right-sidebar",children:m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Points"})]})}),m.jsx("tbody",{children:b.slice(0,10).map((K,$)=>{const U=K;return m.jsxs("tr",{children:[m.jsx("td",{children:$+1}),m.jsx("td",{children:Tm(U.username)}),m.jsx("td",{children:U.wins}),m.jsx("td",{children:U.losses}),m.jsx("td",{children:U.draws}),m.jsx("td",{children:U.points})]},U.username)})})]})})]})})]})]}),ab()]}):m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsx("div",{className:"chess-controls",children:m.jsx("button",{onClick:t,children:"×"})})]}),m.jsx("div",{className:"chess-content",children:m.jsx("div",{className:"wallet-required",children:m.jsx("p",{children:"Connect your wallet to play chess"})})})]})},r_e=Oi({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),s_e=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],i_e=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],o_e=()=>{const t=r_e(),{open:e}=Jv(),{address:n,isConnected:r}=dv(),{isPending:s}=v5(),{disconnect:i}=b5(),{data:o}=_5({address:n}),[a,c]=F.useState("main"),[l,u]=F.useState(!1),[d,h]=F.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=F.useState(!1),[g,y]=F.useState(!1),[w,b]=F.useState(!1),[v,E]=F.useState(!1),[_,x]=F.useState(!1),[S,T]=F.useState(!1),[C,O]=F.useState(!1),[R,B]=F.useState(!1),[H,z]=F.useState(!1),[A,I]=F.useState(!1),[j,N]=F.useState(!1),[k,L]=F.useState(!1),[W,G]=F.useState(!1),Z=[{label:"Chess",icon:"/images/chessboard5.png",action:()=>G(!0)},{label:"Mint",icon:"/assets/mint.gif",action:()=>y(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>E(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>x(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],Q=ye=>{ye.disabled||ye.action()};if(F.useEffect(()=>{const ye=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ye)},[]),F.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(Q1e,{onBack:()=>c("main"),walletAddress:n||void 0});function ee({open:ye,onClose:$e,title:Ae,nfts:Me}){const yt=wt=>{switch(wt){case"lawbsters":T(!0);break;case"lawbstarz":O(!0);break;case"pixelawbs":B(!0);break;case"halloween":z(!0);break;case"lawbstation":I(!0);break;case"nexus":N(!0);break}};return m.jsx($s,{isOpen:ye,onClose:$e,title:Ae,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:Me.map(wt=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>yt(wt.id),children:[m.jsx("img",{src:wt.image,alt:wt.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:wt.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:wt.description})]},wt.id))})})}function ae({open:ye,onClose:$e}){return ye?m.jsxs($s,{isOpen:ye,onClose:$e,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:Z.map(ye=>m.jsxs("div",{className:t.icon,onClick:()=>Q(ye),children:[m.jsx("img",{src:ye.icon,alt:ye.label}),m.jsx("span",{children:ye.label})]},ye.label))}),l&&m.jsxs($s,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:ye=>ye.stopPropagation(),children:[m.jsx("a",{href:"https://dexscreener.com/solana/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Dexscreener"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),L(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(Z1e,{isOpen:g,onClose:()=>y(!1),walletAddress:n||""}),m.jsx(ee,{open:w,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:s_e}),m.jsx(ee,{open:v,onClose:()=>E(!1),title:"SOL NFTS FOLDER",nfts:i_e}),m.jsx(ae,{open:_,onClose:()=>x(!1)}),m.jsxs($s,{isOpen:S,onClose:()=>T(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs($s,{isOpen:C,onClose:()=>O(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs($s,{isOpen:R,onClose:()=>B(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{B(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs($s,{isOpen:H,onClose:()=>z(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs($s,{isOpen:A,onClose:()=>I(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs($s,{isOpen:j,onClose:()=>N(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx($s,{isOpen:k,onClose:()=>L(!1),title:"Meme Generator",children:m.jsx(aU,{})}),m.jsx($s,{isOpen:W,onClose:()=>G(!1),title:"Chess",children:m.jsx(n_e,{onClose:()=>G(!1),walletAddress:n||""})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function a_e(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=F.useState(e(t));function s(){r(e(t))}return F.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}function c_e(t){let e=[],n,r;function s(a){return pg.parseEvmChainId(a)||1}function i(){var a;return n||(n=ql.getInstance({projectId:t.options.projectId,chainId:(a=D.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?un.open(Vt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?un.open(Vt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&un.open(Vt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Vt.EmbeddedWalletAbortController})),n}async function o(a={}){var g,y;const c=i();let l=a.chainId;if(a.isReconnecting){const w=pg.parseEvmChainId(c.getLastUsedChainId()||""),b=(g=t.chains)==null?void 0:g[0].id;if(l=w||b,!l)throw new Error("ChainId not found in provider")}const u=(y=de.state.preferredAccountTypes)==null?void 0:y.eip155,{address:d,chainId:h,accounts:f}=await c.connect({chainId:l,preferredAccountType:u,socialUri:a.socialUri});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:X.CONNECTOR_ID.AUTH,name:X.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:X.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=ql.getInstance({projectId:t.options.projectId,chainId:(c=D.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Vt.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?un.open(Vt.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?un.open(Vt.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&un.open(Vt.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=D.state.activeChain===X.CHAIN.EVM;if(X.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>fe.getConnectorId(h)===X.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l,u;try{const d=a.chains.find(g=>g.id===c);if(!d)throw new lo(new Error("chain not found on connector."));const h=await this.getProvider(),f=(l=de.state.preferredAccountTypes)==null?void 0:l.eip155,p=await h.connect({chainId:c,preferredAccountType:f});return e=((u=p==null?void 0:p.accounts)==null?void 0:u.map(g=>g.address))||[p.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),d}catch(d){throw d instanceof Error?new lo(d):d}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(uc)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}EI.type="walletConnect";function EI(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:EI.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=D.getCaipNetworks(),y=await this.getProvider();if(!y)throw new Ma;a||(a=this.onDisplayUri,y.on("display_uri",a));const w=await this.isChainsStale();y.session&&w&&await y.disconnect();const b=se.state.universalProviderConfigOverride;if(!y.session||w){const C=vp.createNamespaces(g,b);await y.connect({optionalNamespaces:C,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(O=>Number(O.id)))}const v=await this.getAccounts(),E=await this.getChainId(),_=(p=(f=(h=y.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,x=_==null?void 0:_.some(C=>Number(C.split(":")[1])===E);let S=1;x?S=E:_!=null&&_[0]&&(S=Number(_[0].split(":")[1])),a&&(y.removeListener("display_uri",a),a=void 0),o&&(y.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),y.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),y.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),y.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),y.on("session_delete",c));const T=b==null?void 0:b.defaultChain;return y.setDefaultChain(T??`eip155:${S}`),{accounts:v,chainId:S}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new vn(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var p,g,y;const d=await this.getProvider();if(!((p=d==null?void 0:d.session)!=null&&p.namespaces))return[];const h=(y=(g=d==null?void 0:d.session)==null?void 0:g.namespaces[X.CHAIN.EVM])==null?void 0:y.accounts;return(h==null?void 0:h.map(w=>w.split(":")[2]))??[]},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=he.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const y=he.getStoredActiveCaipNetworkId(),w=e.getCaipNetworks(h),b=w==null?void 0:w.find(v=>v.id===y);b&&b.chainNamespace===X.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,y,w,b;const d=(g=e.getCaipNetwork(X.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(w=(y=(await this.getProvider()).session)==null?void 0:y.namespaces[X.CHAIN.EVM])==null?void 0:w.chains)==null?void 0:b[0],p=D.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,y,w,b;const f=await this.getProvider();if(!f)throw new Ma;const p=D.getCaipNetworks().find(v=>v.id===h);if(!p)throw new lo(new ag);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:Ue(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const E=v;if(/(?:user rejected)/iu.test(E.message))throw new vn(E);try{let _;d!=null&&d.blockExplorerUrls?_=d.blockExplorerUrls:_=(g=p.blockExplorers)!=null&&g.default.url?[(y=p.blockExplorers)==null?void 0:y.default.url]:[];const x=((b=(w=p.rpcUrls)==null?void 0:w.chainDefault)==null?void 0:b.http)||[],S={blockExplorerUrls:_,chainId:Ue(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:x};await f.request({method:"wallet_addEthereumChain",params:[S]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,h]),{...p,id:p.id}}catch(_){throw new vn(_)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>uc(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(D.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[X.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(y=>Number.parseInt(y.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Tf=jt({pendingTransactions:0}),qO={state:Tf,subscribeKey(t,e){return Yn(Tf,t,e)},increase(t){Tf[t]+=1},decrease(t){Tf[t]-=1},reset(t){Tf[t]=0}};function l_e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function u_e(t){if(Se.isSafeApp()){const{safe:e}=await sn(async()=>{const{safe:n}=await import("./index-fl1CMFI5.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function d_e(t){try{const{coinbaseWallet:e}=await sn(async()=>{const{coinbaseWallet:n}=await import("./index-fl1CMFI5.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const h_e={enable:!1,pollingInterval:3e4};class f_e extends oU{constructor(e){const n=to.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=X.CHAIN.EVM,this.adapterType=X.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...h_e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===X.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>Se.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Ud(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>Se.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Ud(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===X.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=to.getCaipNetworkId(s);i?n[s.id]=to.extendWagmiTransports(s,e.projectId,i):n[s.id]=to.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=jq({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=gq(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),qO.increase("pendingTransactions")}});const e=qO.subscribeKey("pendingTransactions",n=>{var r;n>=X.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){GD(this.wagmiConfig,{onChange:(e,n)=>{e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"&&(e.address!==(n==null?void 0:n.address)||n.status!=="connected")&&(this.setupWatchPendingTransactions(),this.emit("accountChanged",{address:e.address,chainId:e.chainId}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await d_e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await u_e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(EI(e,n)),e.enableInjected!==!1&&r.push(lv({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(c_e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async signMessage(e){try{return{signature:await dq(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Ud(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await lq(this.wagmiConfig,s);const i=await uq(this.wagmiConfig,s);return await mq(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(pg.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await yq(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await nq(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return Sz(e.value,e.decimals)}formatUnits(e){return Nh(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(e.id===X.CONNECTOR_ID.AUTH||e.id===X.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:pc.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:pc.ConnectorNamesMap[e.id]??e.name,imageId:pc.ConnectorImageIds[e.id],type:pc.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===X.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){KD(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Gi(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(Se.isSafeApp()&&n===X.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await ow(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await ow(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await cT(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var u,d,h,f,p;const{id:n,provider:r,type:s,info:i,chainId:o,socialUri:a}=e,c=this.getWagmiConnector(n);if(!c)throw new Error("connectionControllerClient:connectExternal - connector is undefined");if(r&&i&&c.id===X.CONNECTOR_ID.EIP6963&&((u=c.setEip6963Wallet)==null||u.call(c,{provider:r,info:i})),c.uid===((h=(d=this.wagmiConfig)==null?void 0:d.state)==null?void 0:h.current)){const g=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(c.uid);if(g)return{address:g==null?void 0:g.accounts[0],chainId:g==null?void 0:g.chainId,provider:r,type:s,id:n}}const l=await ow(this.wagmiConfig,{connector:c,chainId:o?Number(o):void 0,socialUri:a});return{address:l.accounts[0],chainId:l.chainId,provider:r,type:s,id:n}}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await HE(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=he.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await oq(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});he.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(){const e=Gi(this.wagmiConfig);await Promise.allSettled(e.map(async n=>{const r=this.getWagmiConnector(n.connector.id);r&&await HD(this.wagmiConfig,{connector:r})})),this.wagmiConfig.state.connections.clear()}async switchNetwork(e){var r,s,i,o,a;const{caipNetwork:n}=e;await cT(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:n.name,nativeCurrency:n.nativeCurrency,rpcUrls:[((i=(s=(r=n.rpcUrls)==null?void 0:r.chainDefault)==null?void 0:s.http)==null?void 0:i[0])??""],blockExplorerUrls:[((o=n.blockExplorers)==null?void 0:o.default.url)??""],iconUrls:[((a=n.assets)==null?void 0:a.imageUrl)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Gi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=l_e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Gi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Gi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Gi(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setUniversalProvider(e){e.on("connect",()=>{const n=Gi(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(D.state.activeChain==="eip155")return;HE(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new mI({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"}))}}const RU="7c65f27254d6ddd24cf7eedf2685c4fb",p_e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},$U=new f_e({networks:[iU],projectId:RU,ssr:!1});Sve({adapters:[$U],networks:[iU],projectId:RU,metadata:p_e,features:{analytics:!1}});const g_e=new SW,m_e=()=>a_e("(max-width: 768px)")?m.jsx(o_e,{}):m.jsx(K1e,{});P_.createRoot(document.getElementById("root")).render(m.jsx(Ws.StrictMode,{children:m.jsx(Mq,{config:$U.wagmiConfig,children:m.jsx(LW,{client:g_e,children:m.jsx(m_e,{})})})}));export{OEe as $,de as A,Oe as B,fe as C,Yn as D,ip as E,Kn as F,Te as G,kC as H,Lf as I,wi as J,nZ as K,It as L,gt as M,ZJ as N,se as O,hs as P,bw as Q,Re as R,bi as S,Wr as T,gg as U,Sg as V,Dn as W,jEe as X,kx as Y,jZ as Z,gp as _,Ew as a,Th as a$,On as a0,pu as a1,nn as a2,REe as a3,Z4 as a4,Ox as a5,bh as a6,sn as a7,$_e as a8,uc as a9,PD as aA,ND as aB,jc as aC,tp as aD,ea as aE,I_e as aF,DB as aG,Jl as aH,A_e as aI,T_e as aJ,Kw as aK,N_e as aL,s9 as aM,A$ as aN,S_e as aO,sv as aP,Fp as aQ,Yw as aR,D0 as aS,P_e as aT,i9 as aU,RT as aV,Iq as aW,tK as aX,Js as aY,Ez as aZ,_z as a_,lo as aa,ag as ab,Ue as ac,vn as ad,Ma as ae,$D as af,lv as ag,Qw as ah,QS as ai,Dc as aj,C_e as ak,cv as al,JS as am,E_e as an,__e as ao,L$ as ap,nv as aq,Gw as ar,_B as as,AB as at,k_e as au,b7 as av,ne as aw,qS as ax,Cr as ay,E7 as az,bt as b,Ql as b0,X0 as b1,Ar as b2,cn as b3,rm as b4,X as c,Se as d,D as e,_t as f,qo as g,DEe as h,Fd as i,ps as j,_e as k,Ft as l,Q0e as m,un as n,J0e as o,he as p,Vt as q,$Ee as r,ft as s,O8 as t,jt as u,kZ as v,As as w,kEe as x,NA as y,$8 as z};
