const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-DXErgpsE.js","assets/if-defined-dtQgSYua.js","assets/index-C7z98ChP.js","assets/index-CYANNYYk.js","assets/ref-BNp2iLcT.js","assets/index-BaUC18Uv.js","assets/index-YOL5g8Y0.js","assets/index-CIUedPfX.js","assets/index-B0vcT1gE.js","assets/index-BICK0SMf.js","assets/index-BZyLb232.js","assets/index-OE98exTR.js","assets/email-BoVpWVE7.js","assets/index-CF5TQEkI.js","assets/socials-BfTV5nQ0.js","assets/index-FMQVOaye.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-C28NlMct.js","assets/index-BkCMSRG9.js","assets/index-BArDj82g.js","assets/index-B-RwqRDq.js","assets/swaps-ZsRIMIVH.js","assets/index-BOFsiCAC.js","assets/index-BU-GS6OI.js","assets/index-Bv_-_KTX.js","assets/send-Dm8I1JQS.js","assets/index-DZ-cSiNC.js","assets/index-CYNHTGqF.js","assets/receive-BtlLktUN.js","assets/index-Dp5pX1V9.js","assets/onramp-Bm-ojRyo.js","assets/index-CZnyiw07.js","assets/index-DEXSQU5o.js","assets/index-CrB7-tDb.js","assets/transactions-DKDATpP4.js","assets/index-BfPHMZoN.js","assets/index-BWQd-4ZD.js","assets/index-Bcksghll.js","assets/index-Ch2XPuwa.js","assets/index-CemfBAkq.js","assets/w3m-modal-ByfQrccX.js"])))=>i.map(i=>d[i]);
var one=Object.defineProperty;var e$=t=>{throw TypeError(t)};var ane=(t,e,n)=>e in t?one(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ee=(t,e,n)=>ane(t,typeof e!="symbol"?e+"":e,n),FT=(t,e,n)=>e.has(t)||e$("Cannot "+n);var _=(t,e,n)=>(FT(t,e,"read from private field"),n?n.call(t):e.get(t)),K=(t,e,n)=>e.has(t)?e$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),U=(t,e,n,r)=>(FT(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),he=(t,e,n)=>(FT(t,e,"access private method"),n);var pd=(t,e,n,r)=>({set _(s){U(t,e,s,n)},get _(){return _(t,e,r)}});function cne(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wz(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var bz={exports:{}},xx={},vz={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dC=Symbol.for("react.element"),lne=Symbol.for("react.portal"),une=Symbol.for("react.fragment"),dne=Symbol.for("react.strict_mode"),hne=Symbol.for("react.profiler"),fne=Symbol.for("react.provider"),pne=Symbol.for("react.context"),gne=Symbol.for("react.forward_ref"),mne=Symbol.for("react.suspense"),yne=Symbol.for("react.memo"),wne=Symbol.for("react.lazy"),t$=Symbol.iterator;function bne(t){return t===null||typeof t!="object"?null:(t=t$&&t[t$]||t["@@iterator"],typeof t=="function"?t:null)}var Ez={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_z=Object.assign,Cz={};function U0(t,e,n){this.props=t,this.context=e,this.refs=Cz,this.updater=n||Ez}U0.prototype.isReactComponent={};U0.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};U0.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Az(){}Az.prototype=U0.prototype;function c5(t,e,n){this.props=t,this.context=e,this.refs=Cz,this.updater=n||Ez}var l5=c5.prototype=new Az;l5.constructor=c5;_z(l5,U0.prototype);l5.isPureReactComponent=!0;var n$=Array.isArray,Sz=Object.prototype.hasOwnProperty,u5={current:null},Iz={key:!0,ref:!0,__self:!0,__source:!0};function xz(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Sz.call(e,r)&&!Iz.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:dC,type:t,key:i,ref:o,props:s,_owner:u5.current}}function vne(t,e){return{$$typeof:dC,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function d5(t){return typeof t=="object"&&t!==null&&t.$$typeof===dC}function Ene(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var r$=/\/+/g;function jT(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ene(""+t.key):e.toString(36)}function FA(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case dC:case lne:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+jT(o,0):r,n$(s)?(n="",t!=null&&(n=t.replace(r$,"$&/")+"/"),FA(s,e,n,"",function(l){return l})):s!=null&&(d5(s)&&(s=vne(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(r$,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",n$(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+jT(i,a);o+=FA(i,e,n,c,s)}else if(c=bne(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+jT(i,a++),o+=FA(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _1(t,e,n){if(t==null)return t;var r=[],s=0;return FA(t,r,"","",function(i){return e.call(n,i,s++)}),r}function _ne(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _i={current:null},jA={transition:null},Cne={ReactCurrentDispatcher:_i,ReactCurrentBatchConfig:jA,ReactCurrentOwner:u5};function Nz(){throw Error("act(...) is not supported in production builds of React.")}Wt.Children={map:_1,forEach:function(t,e,n){_1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _1(t,function(){e++}),e},toArray:function(t){return _1(t,function(e){return e})||[]},only:function(t){if(!d5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Wt.Component=U0;Wt.Fragment=une;Wt.Profiler=hne;Wt.PureComponent=c5;Wt.StrictMode=dne;Wt.Suspense=mne;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cne;Wt.act=Nz;Wt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_z({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=u5.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Sz.call(e,c)&&!Iz.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:dC,type:t.type,key:s,ref:i,props:r,_owner:o}};Wt.createContext=function(t){return t={$$typeof:pne,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fne,_context:t},t.Consumer=t};Wt.createElement=xz;Wt.createFactory=function(t){var e=xz.bind(null,t);return e.type=t,e};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(t){return{$$typeof:gne,render:t}};Wt.isValidElement=d5;Wt.lazy=function(t){return{$$typeof:wne,_payload:{_status:-1,_result:t},_init:_ne}};Wt.memo=function(t,e){return{$$typeof:yne,type:t,compare:e===void 0?null:e}};Wt.startTransition=function(t){var e=jA.transition;jA.transition={};try{t()}finally{jA.transition=e}};Wt.unstable_act=Nz;Wt.useCallback=function(t,e){return _i.current.useCallback(t,e)};Wt.useContext=function(t){return _i.current.useContext(t)};Wt.useDebugValue=function(){};Wt.useDeferredValue=function(t){return _i.current.useDeferredValue(t)};Wt.useEffect=function(t,e){return _i.current.useEffect(t,e)};Wt.useId=function(){return _i.current.useId()};Wt.useImperativeHandle=function(t,e,n){return _i.current.useImperativeHandle(t,e,n)};Wt.useInsertionEffect=function(t,e){return _i.current.useInsertionEffect(t,e)};Wt.useLayoutEffect=function(t,e){return _i.current.useLayoutEffect(t,e)};Wt.useMemo=function(t,e){return _i.current.useMemo(t,e)};Wt.useReducer=function(t,e,n){return _i.current.useReducer(t,e,n)};Wt.useRef=function(t){return _i.current.useRef(t)};Wt.useState=function(t){return _i.current.useState(t)};Wt.useSyncExternalStore=function(t,e,n){return _i.current.useSyncExternalStore(t,e,n)};Wt.useTransition=function(){return _i.current.useTransition()};Wt.version="18.3.1";vz.exports=Wt;var L=vz.exports;const Lo=Gg(L),Ane=cne({__proto__:null,default:Lo},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sne=L,Ine=Symbol.for("react.element"),xne=Symbol.for("react.fragment"),Nne=Object.prototype.hasOwnProperty,Tne=Sne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rne={key:!0,ref:!0,__self:!0,__source:!0};function Tz(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Nne.call(e,r)&&!Rne.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Ine,type:t,key:i,ref:o,props:s,_owner:Tne.current}}xx.Fragment=xne;xx.jsx=Tz;xx.jsxs=Tz;bz.exports=xx;var w=bz.exports,s$={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re=function(t,e){if(!t)throw $0(e)},$0=function(t){return new Error("Firebase Database ("+Rz.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Pne=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},h5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Pz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Pne(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new One;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class One extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oz=function(t){const e=Pz(t);return h5.encodeByteArray(e,!0)},DS=function(t){return Oz(t).replace(/\./g,"")},qO=function(t){try{return h5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kne(t){return kz(void 0,t)}function kz(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Dne(n)||(t[n]=kz(t[n],e[n]));return t}function Dne(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lne=()=>Mne().__FIREBASE_DEFAULTS__,Une=()=>{if(typeof process>"u"||typeof s$>"u")return;const t=s$.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$ne=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qO(t[1]);return e&&JSON.parse(e)},Dz=()=>{try{return Lne()||Une()||$ne()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bne=t=>{var e,n;return(n=(e=Dz())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Fne=t=>{const e=Bne(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Mz=()=>{var t;return(t=Dz())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jne(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[DS(JSON.stringify(n)),DS(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zne(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zne())}function Wne(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hne(){return Rz.NODE_ADMIN===!0}function Gne(){try{return typeof indexedDB=="object"}catch{return!1}}function qne(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vne="FirebaseError";class hC extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Vne,Object.setPrototypeOf(this,hC.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uz.prototype.create)}}class Uz{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Kne(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new hC(s,a,r)}}function Kne(t,e){return t.replace(Yne,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Yne=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t){return JSON.parse(t)}function Hr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=cE(qO(i[0])||""),n=cE(qO(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Qne=function(t){const e=$z(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Jne=function(t){const e=$z(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function qw(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function i$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function MS(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function VO(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(o$(i)&&o$(o)){if(!VO(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function o$(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zne(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xne{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function f5(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ere=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Re(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Tx=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t){return t&&t._delegate?t._delegate:t}class lE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tre{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Nx;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rre(e))try{this.getOrInitializeService({instanceIdentifier:Ff})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ff){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ff){return this.instances.has(e)}getOptions(e=Ff){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nre(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ff){return this.component?this.component.multipleInstances?e:Ff:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nre(t){return t===Ff?void 0:t}function rre(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Hn||(Hn={}));const ire={debug:Hn.DEBUG,verbose:Hn.VERBOSE,info:Hn.INFO,warn:Hn.WARN,error:Hn.ERROR,silent:Hn.SILENT},ore=Hn.INFO,are={[Hn.DEBUG]:"log",[Hn.VERBOSE]:"log",[Hn.INFO]:"info",[Hn.WARN]:"warn",[Hn.ERROR]:"error"},cre=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=are[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bz{constructor(e){this.name=e,this._logLevel=ore,this._logHandler=cre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Hn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ire[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Hn.DEBUG,...e),this._logHandler(this,Hn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Hn.VERBOSE,...e),this._logHandler(this,Hn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Hn.INFO,...e),this._logHandler(this,Hn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Hn.WARN,...e),this._logHandler(this,Hn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Hn.ERROR,...e),this._logHandler(this,Hn.ERROR,...e)}}const lre=(t,e)=>e.some(n=>t instanceof n);let a$,c$;function ure(){return a$||(a$=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dre(){return c$||(c$=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fz=new WeakMap,KO=new WeakMap,jz=new WeakMap,zT=new WeakMap,p5=new WeakMap;function hre(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(kh(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Fz.set(n,t)}).catch(()=>{}),p5.set(e,t),e}function fre(t){if(KO.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});KO.set(t,e)}let YO={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return KO.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pre(t){YO=t(YO)}function gre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(WT(this),e,...n);return jz.set(r,e.sort?e.sort():[e]),kh(r)}:dre().includes(t)?function(...e){return t.apply(WT(this),e),kh(Fz.get(this))}:function(...e){return kh(t.apply(WT(this),e))}}function mre(t){return typeof t=="function"?gre(t):(t instanceof IDBTransaction&&fre(t),lre(t,ure())?new Proxy(t,YO):t)}function kh(t){if(t instanceof IDBRequest)return hre(t);if(zT.has(t))return zT.get(t);const e=mre(t);return e!==t&&(zT.set(t,e),p5.set(e,t)),e}const WT=t=>p5.get(t);function yre(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=kh(o);return r&&o.addEventListener("upgradeneeded",c=>{r(kh(o.result),c.oldVersion,c.newVersion,kh(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const wre=["get","getKey","getAll","getAllKeys","count"],bre=["put","add","delete","clear"],HT=new Map;function l$(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(HT.get(e))return HT.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=bre.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||wre.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return HT.set(e,i),i}pre(t=>({...t,get:(e,n,r)=>l$(e,n)||t.get(e,n,r),has:(e,n)=>!!l$(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vre{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ere(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ere(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const QO="@firebase/app",u$="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=new Bz("@firebase/app"),_re="@firebase/app-compat",Cre="@firebase/analytics-compat",Are="@firebase/analytics",Sre="@firebase/app-check-compat",Ire="@firebase/app-check",xre="@firebase/auth",Nre="@firebase/auth-compat",Tre="@firebase/database",Rre="@firebase/data-connect",Pre="@firebase/database-compat",Ore="@firebase/functions",kre="@firebase/functions-compat",Dre="@firebase/installations",Mre="@firebase/installations-compat",Lre="@firebase/messaging",Ure="@firebase/messaging-compat",$re="@firebase/performance",Bre="@firebase/performance-compat",Fre="@firebase/remote-config",jre="@firebase/remote-config-compat",zre="@firebase/storage",Wre="@firebase/storage-compat",Hre="@firebase/firestore",Gre="@firebase/vertexai-preview",qre="@firebase/firestore-compat",Vre="firebase",Kre="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="[DEFAULT]",Yre={[QO]:"fire-core",[_re]:"fire-core-compat",[Are]:"fire-analytics",[Cre]:"fire-analytics-compat",[Ire]:"fire-app-check",[Sre]:"fire-app-check-compat",[xre]:"fire-auth",[Nre]:"fire-auth-compat",[Tre]:"fire-rtdb",[Rre]:"fire-data-connect",[Pre]:"fire-rtdb-compat",[Ore]:"fire-fn",[kre]:"fire-fn-compat",[Dre]:"fire-iid",[Mre]:"fire-iid-compat",[Lre]:"fire-fcm",[Ure]:"fire-fcm-compat",[$re]:"fire-perf",[Bre]:"fire-perf-compat",[Fre]:"fire-rc",[jre]:"fire-rc-compat",[zre]:"fire-gcs",[Wre]:"fire-gcs-compat",[Hre]:"fire-fst",[qre]:"fire-fst-compat",[Gre]:"fire-vertex","fire-js":"fire-js",[Vre]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=new Map,Qre=new Map,ZO=new Map;function d$(t,e){try{t.container.addComponent(e)}catch(n){qu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function LS(t){const e=t.name;if(ZO.has(e))return qu.debug(`There were multiple attempts to register component ${e}.`),!1;ZO.set(e,t);for(const n of uE.values())d$(n,t);for(const n of Qre.values())d$(n,t);return!0}function Jre(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zre={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dh=new Uz("app","Firebase",Zre);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xre{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ese=Kre;function zz(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:JO,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Dh.create("bad-app-name",{appName:String(s)});if(n||(n=Mz()),!n)throw Dh.create("no-options");const i=uE.get(s);if(i){if(VO(n,i.options)&&VO(r,i.config))return i;throw Dh.create("duplicate-app",{appName:s})}const o=new sre(s);for(const c of ZO.values())o.addComponent(c);const a=new Xre(n,r,o);return uE.set(s,a),a}function Wz(t=JO){const e=uE.get(t);if(!e&&t===JO&&Mz())return zz();if(!e)throw Dh.create("no-app",{appName:t});return e}function tse(){return Array.from(uE.values())}function Ny(t,e,n){var r;let s=(r=Yre[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qu.warn(a.join(" "));return}LS(new lE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nse="firebase-heartbeat-database",rse=1,dE="firebase-heartbeat-store";let GT=null;function Hz(){return GT||(GT=yre(nse,rse,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(dE)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dh.create("idb-open",{originalErrorMessage:t.message})})),GT}async function sse(t){try{const n=(await Hz()).transaction(dE),r=await n.objectStore(dE).get(Gz(t));return await n.done,r}catch(e){if(e instanceof hC)qu.warn(e.message);else{const n=Dh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qu.warn(n.message)}}}async function h$(t,e){try{const r=(await Hz()).transaction(dE,"readwrite");await r.objectStore(dE).put(e,Gz(t)),await r.done}catch(n){if(n instanceof hC)qu.warn(n.message);else{const r=Dh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qu.warn(r.message)}}}function Gz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ise=1024,ose=30*24*60*60*1e3;class ase{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lse(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=f$();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=ose}),this._storage.overwrite(this._heartbeatsCache))}catch(r){qu.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=f$(),{heartbeatsToSend:r,unsentEntries:s}=cse(this._heartbeatsCache.heartbeats),i=DS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return qu.warn(n),""}}}function f$(){return new Date().toISOString().substring(0,10)}function cse(t,e=ise){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),p$(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),p$(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class lse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gne()?qne().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sse(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return h$(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return h$(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function p$(t){return DS(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function use(t){LS(new lE("platform-logger",e=>new vre(e),"PRIVATE")),LS(new lE("heartbeat",e=>new ase(e),"PRIVATE")),Ny(QO,u$,t),Ny(QO,u$,"esm2017"),Ny("fire-js","")}use("");var dse="firebase",hse="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ny(dse,hse,"app");var g$={};const m$="@firebase/database",y$="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qz="";function fse(t){qz=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pse{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Hr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:cE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gse{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return sd(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new pse(e)}}catch{}return new gse},op=Vz("localStorage"),mse=Vz("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=new Bz("@firebase/database"),yse=function(){let t=1;return function(){return t++}}(),Kz=function(t){const e=ere(t),n=new Xne;n.update(e);const r=n.digest();return h5.encodeByteArray(r)},fC=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=fC.apply(null,r):typeof r=="object"?e+=Hr(r):e+=r,e+=" "}return e};let Nv=null,w$=!0;const wse=function(t,e){Re(!0,"Can't turn on custom loggers persistently."),Ty.logLevel=Hn.VERBOSE,Nv=Ty.log.bind(Ty)},Vs=function(...t){if(w$===!0&&(w$=!1,Nv===null&&mse.get("logging_enabled")===!0&&wse()),Nv){const e=fC.apply(null,t);Nv(e)}},pC=function(t){return function(...e){Vs(t,...e)}},XO=function(...t){const e="FIREBASE INTERNAL ERROR: "+fC(...t);Ty.error(e)},Vu=function(...t){const e=`FIREBASE FATAL ERROR: ${fC(...t)}`;throw Ty.error(e),new Error(e)},Zi=function(...t){const e="FIREBASE WARNING: "+fC(...t);Ty.warn(e)},bse=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Zi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Yz=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},vse=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Vw="[MIN_NAME]",ug="[MAX_NAME]",F0=function(t,e){if(t===e)return 0;if(t===Vw||e===ug)return-1;if(e===Vw||t===ug)return 1;{const n=b$(t),r=b$(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Ese=function(t,e){return t===e?0:t<e?-1:1},vb=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Hr(e))},g5=function(t){if(typeof t!="object"||t===null)return Hr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Hr(e[r]),n+=":",n+=g5(t[e[r]]);return n+="}",n},Qz=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function io(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Jz=function(t){Re(!Yz(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},_se=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Cse=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ase(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Sse=new RegExp("^-?(0*)\\d{1,10}$"),Ise=-2147483648,xse=2147483647,b$=function(t){if(Sse.test(t)){const e=Number(t);if(e>=Ise&&e<=xse)return e}return null},j0=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Zi("Exception was thrown by user callback.",n),e},Math.floor(0))}},Nse=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Tv=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tse{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Zi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rse{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Vs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zi(e)}}class zA{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}zA.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5="5",Zz="v",Xz="s",eW="r",tW="f",nW=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rW="ls",sW="p",e2="ac",iW="websocket",oW="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=op.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&op.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Pse(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function cW(t,e,n){Re(typeof e=="string","typeof type must == string"),Re(typeof n=="object","typeof params must == object");let r;if(e===iW)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===oW)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Pse(t)&&(n.ns=t.namespace);const s=[];return io(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ose{constructor(){this.counters_={}}incrementCounter(e,n=1){sd(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return kne(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT={},VT={};function y5(t){const e=t.toString();return qT[e]||(qT[e]=new Ose),qT[e]}function kse(t,e){const n=t.toString();return VT[n]||(VT[n]=e()),VT[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dse{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&j0(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$="start",Mse="close",Lse="pLPCommand",Use="pRTLPCB",lW="id",uW="pw",dW="ser",$se="cb",Bse="seg",Fse="ts",jse="d",zse="dframe",hW=1870,fW=30,Wse=hW-fW,Hse=25e3,Gse=3e4;class iy{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pC(e),this.stats_=y5(n),this.urlFn=c=>(this.appCheckToken&&(c[e2]=this.appCheckToken),cW(n,oW,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Dse(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Gse)),vse(()=>{if(this.isClosed_)return;this.scriptTagHolder=new w5((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===v$)this.id=a,this.password=c;else if(o===Mse)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[v$]="t",r[dW]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$se]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Zz]=m5,this.transportSessionId&&(r[Xz]=this.transportSessionId),this.lastSessionId&&(r[rW]=this.lastSessionId),this.applicationId&&(r[sW]=this.applicationId),this.appCheckToken&&(r[e2]=this.appCheckToken),typeof location<"u"&&location.hostname&&nW.test(location.hostname)&&(r[eW]=tW);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){iy.forceAllow_=!0}static forceDisallow(){iy.forceDisallow_=!0}static isAvailable(){return iy.forceAllow_?!0:!iy.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_se()&&!Cse()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Hr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Oz(n),s=Qz(r,Wse);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[zse]="t",r[lW]=e,r[uW]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Hr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class w5{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=yse(),window[Lse+this.uniqueCallbackIdentifier]=e,window[Use+this.uniqueCallbackIdentifier]=n,this.myIFrame=w5.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Vs("frame writing exception"),a.stack&&Vs(a.stack),Vs(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Vs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[lW]=this.myID,e[uW]=this.myPW,e[dW]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+fW+r.length<=hW;){const o=this.pendingSegs.shift();r=r+"&"+Bse+s+"="+o.seg+"&"+Fse+s+"="+o.ts+"&"+jse+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Hse)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Vs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qse=16384,Vse=45e3;let US=null;typeof MozWebSocket<"u"?US=MozWebSocket:typeof WebSocket<"u"&&(US=WebSocket);class dc{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pC(this.connId),this.stats_=y5(n),this.connURL=dc.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Zz]=m5,typeof location<"u"&&location.hostname&&nW.test(location.hostname)&&(o[eW]=tW),n&&(o[Xz]=n),r&&(o[rW]=r),s&&(o[e2]=s),i&&(o[sW]=i),cW(e,iW,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,op.set("previous_websocket_failure",!0);try{let r;Hne(),this.mySock=new US(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){dc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&US!==null&&!dc.forceDisallow_}static previouslyFailed(){return op.isInMemoryStorage||op.get("previous_websocket_failure")===!0}markConnectionHealthy(){op.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=cE(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Re(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Hr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Qz(n,qse);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Vse))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}dc.responsesRequiredToBeHealthy=2;dc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[iy,dc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=dc&&dc.isAvailable();let r=n&&!dc.previouslyFailed();if(e.webSocketOnly&&(n||Zi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[dc];else{const s=this.transports_=[];for(const i of hE.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);hE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}hE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kse=6e4,Yse=5e3,Qse=10*1024,Jse=100*1024,KT="t",E$="d",Zse="s",_$="r",Xse="e",C$="o",A$="a",S$="n",I$="p",eie="h";class tie{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pC("c:"+this.id+":"),this.transportManager_=new hE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Tv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Jse?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Qse?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(KT in e){const n=e[KT];n===A$?this.upgradeIfSecondaryHealthy_():n===_$?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===C$&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=vb("t",e),r=vb("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:I$,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:A$,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:S$,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=vb("t",e),r=vb("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=vb(KT,e);if(E$ in e){const r=e[E$];if(n===eie){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===S$){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Zse?this.onConnectionShutdown_(r):n===_$?this.onReset_(r):n===Xse?XO("Server Error: "+r):n===C$?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):XO("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),m5!==r&&Zi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Tv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Kse))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Tv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Yse))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:I$,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(op.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gW=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Re(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Re(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S extends gW{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Lz()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $S}getInitialEvent(e){return Re(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$=32,N$=768;class Bn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function dn(){return new Bn("")}function Ut(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function rf(t){return t.pieces_.length-t.pieceNum_}function qn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Bn(t.pieces_,e)}function mW(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function nie(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function yW(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function wW(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Bn(e,0)}function Gr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Bn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Bn(n,0)}function zt(t){return t.pieceNum_>=t.pieces_.length}function fi(t,e){const n=Ut(t),r=Ut(e);if(n===null)return e;if(n===r)return fi(qn(t),qn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function b5(t,e){if(rf(t)!==rf(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function gc(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(rf(t)>rf(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class rie{constructor(e,n){this.errorPrefix_=n,this.parts_=yW(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Tx(this.parts_[r]);bW(this)}}function sie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Tx(e),bW(t)}function iie(t){const e=t.parts_.pop();t.byteLength_-=Tx(e),t.parts_.length>0&&(t.byteLength_-=1)}function bW(t){if(t.byteLength_>N$)throw new Error(t.errorPrefix_+"has a key path longer than "+N$+" bytes ("+t.byteLength_+").");if(t.parts_.length>x$)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+x$+") or object contains a cycle "+jf(t))}function jf(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5 extends gW{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new v5}getInitialEvent(e){return Re(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=1e3,oie=60*5*1e3,T$=30*1e3,aie=1.3,cie=3e4,lie="server_kill",R$=3;class Lu extends pW{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Lu.nextPersistentConnectionId_++,this.log_=pC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Eb,this.maxReconnectDelay_=oie,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");v5.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&$S.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Hr(i)),Re(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new Nx,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Re(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Re(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Lu.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&sd(e,"w")){const r=qw(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Zi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Jne(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=T$)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Qne(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Re(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Hr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):XO("Unrecognized action received from server: "+Hr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Re(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Eb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Eb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>cie&&(this.reconnectDelay_=Eb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*aie)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Lu.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Re(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Vs("getToken() completed but was canceled"):(Vs("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new tie(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Zi(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(lie)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Zi(d),c())}}}interrupt(e){Vs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Vs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],i$(this.interruptReasons_)&&(this.reconnectDelay_=Eb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>g5(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Bn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Vs("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=R$&&(this.reconnectDelay_=T$,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Vs("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=R$&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+qz.replace(/\./g,"-")]=1,Lz()?e["framework.cordova"]=1:Wne()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=$S.getInstance().currentlyOnline();return i$(this.interruptReasons_)&&e}}Lu.nextPersistentConnectionId_=0;Lu.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new $t(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new $t(Vw,e),s=new $t(Vw,n);return this.compare(r,s)!==0}minPost(){return $t.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let C1;class vW extends Rx{static get __EMPTY_NODE(){return C1}static set __EMPTY_NODE(e){C1=e}compare(e,n){return F0(e.name,n.name)}isDefinedOn(e){throw $0("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return $t.MIN}maxPost(){return new $t(ug,C1)}makePost(e,n){return Re(typeof e=="string","KeyIndex indexValue must always be a string."),new $t(e,C1)}toString(){return".key"}}const Ry=new vW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class rs{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rs.RED,this.left=s??Yi.EMPTY_NODE,this.right=i??Yi.EMPTY_NODE}copy(e,n,r,s,i){return new rs(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Yi.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Yi.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,rs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,rs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}rs.RED=!0;rs.BLACK=!1;class uie{copy(e,n,r,s,i){return this}insert(e,n,r){return new rs(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Yi{constructor(e,n=Yi.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Yi(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,rs.BLACK,null,null))}remove(e){return new Yi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rs.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new A1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new A1(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new A1(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new A1(this.root_,null,this.comparator_,!0,e)}}Yi.EMPTY_NODE=new uie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function die(t,e){return F0(t.name,e.name)}function E5(t,e){return F0(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t2;function hie(t){t2=t}const EW=function(t){return typeof t=="number"?"number:"+Jz(t):"string:"+t},_W=function(t){if(t.isLeafNode()){const e=t.val();Re(typeof e=="string"||typeof e=="number"||typeof e=="object"&&sd(e,".sv"),"Priority must be a string or number.")}else Re(t===t2||t.isEmpty(),"priority of unexpected type.");Re(t===t2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P$;class ns{constructor(e,n=ns.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Re(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),_W(this.priorityNode_)}static set __childrenNodeConstructor(e){P$=e}static get __childrenNodeConstructor(){return P$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ns(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ns.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return zt(e)?this:Ut(e)===".priority"?this.priorityNode_:ns.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ns.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ut(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Re(r!==".priority"||rf(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ns.__childrenNodeConstructor.EMPTY_NODE.updateChild(qn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+EW(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Jz(this.value_):e+=this.value_,this.lazyHash_=Kz(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ns.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ns.__childrenNodeConstructor?-1:(Re(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=ns.VALUE_TYPE_ORDER.indexOf(n),i=ns.VALUE_TYPE_ORDER.indexOf(r);return Re(s>=0,"Unknown leaf type: "+n),Re(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ns.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CW,AW;function fie(t){CW=t}function pie(t){AW=t}class gie extends Rx{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?F0(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return $t.MIN}maxPost(){return new $t(ug,new ns("[PRIORITY-POST]",AW))}makePost(e,n){const r=CW(e);return new $t(n,new ns("[PRIORITY-POST]",r))}toString(){return".priority"}}const Er=new gie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mie=Math.log(2);class yie{constructor(e){const n=i=>parseInt(Math.log(i)/mie,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const BS=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new rs(h,d.node,rs.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new rs(h,d.node,rs.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const y=d-p,m=d;d-=p;const b=s(y+1,m),v=t[y],A=n?n(v):v;f(new rs(A,v.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));g?h(y,rs.BLACK):(h(y,rs.BLACK),h(y,rs.RED))}return u},o=new yie(t.length),a=i(o);return new Yi(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YT;const wm={};class Ru{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Re(wm&&Er,"ChildrenNode.ts has not been loaded"),YT=YT||new Ru({".priority":wm},{".priority":Er}),YT}get(e){const n=qw(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Yi?n:null}hasIndex(e){return sd(this.indexSet_,e.toString())}addIndex(e,n){Re(e!==Ry,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator($t.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=BS(r,e.getCompare()):a=wm;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new Ru(u,l)}addToIndexes(e,n){const r=MS(this.indexes_,(s,i)=>{const o=qw(this.indexSet_,i);if(Re(o,"Missing index implementation for "+i),s===wm)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator($t.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),BS(a,o.getCompare())}else return wm;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new $t(e.name,a))),c.insert(e,e.node)}});return new Ru(r,this.indexSet_)}removeFromIndexes(e,n){const r=MS(this.indexes_,s=>{if(s===wm)return s;{const i=n.get(e.name);return i?s.remove(new $t(e.name,i)):s}});return new Ru(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _b;class wt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&_W(this.priorityNode_),this.children_.isEmpty()&&Re(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _b||(_b=new wt(new Yi(E5),null,Ru.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_b}updatePriority(e){return this.children_.isEmpty()?this:new wt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?_b:n}}getChild(e){const n=Ut(e);return n===null?this:this.getImmediateChild(n).getChild(qn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Re(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new $t(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?_b:this.priorityNode_;return new wt(s,o,i)}}updateChild(e,n){const r=Ut(e);if(r===null)return n;{Re(Ut(e)!==".priority"||rf(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(qn(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Er,(o,a)=>{n[o]=a.val(e),r++,i&&wt.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+EW(this.getPriority().val())+":"),this.forEachChild(Er,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Kz(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new $t(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new $t(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new $t(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,$t.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,$t.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===gC?-1:0}withIndex(e){if(e===Ry||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new wt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ry||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Er),s=n.getIterator(Er);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ry?null:this.indexMap_.get(e.toString())}}wt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class wie extends wt{constructor(){super(new Yi(E5),wt.EMPTY_NODE,Ru.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return wt.EMPTY_NODE}isEmpty(){return!1}}const gC=new wie;Object.defineProperties($t,{MIN:{value:new $t(Vw,wt.EMPTY_NODE)},MAX:{value:new $t(ug,gC)}});vW.__EMPTY_NODE=wt.EMPTY_NODE;ns.__childrenNodeConstructor=wt;hie(gC);pie(gC);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bie=!0;function os(t,e=null){if(t===null)return wt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Re(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ns(n,os(e))}if(!(t instanceof Array)&&bie){const n=[];let r=!1;if(io(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=os(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new $t(o,c)))}}),n.length===0)return wt.EMPTY_NODE;const i=BS(n,die,o=>o.name,E5);if(r){const o=BS(n,Er.getCompare());return new wt(i,os(e),new Ru({".priority":o},{".priority":Er}))}else return new wt(i,os(e),Ru.Default)}else{let n=wt.EMPTY_NODE;return io(t,(r,s)=>{if(sd(t,r)&&r.substring(0,1)!=="."){const i=os(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(os(e))}}fie(os);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vie extends Rx{constructor(e){super(),this.indexPath_=e,Re(!zt(e)&&Ut(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?F0(e.name,n.name):i}makePost(e,n){const r=os(e),s=wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new $t(n,s)}maxPost(){const e=wt.EMPTY_NODE.updateChild(this.indexPath_,gC);return new $t(ug,e)}toString(){return yW(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eie extends Rx{compare(e,n){const r=e.node.compareTo(n.node);return r===0?F0(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return $t.MIN}maxPost(){return $t.MAX}makePost(e,n){const r=os(e);return new $t(n,r)}toString(){return".value"}}const _ie=new Eie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SW(t){return{type:"value",snapshotNode:t}}function Kw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function fE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function pE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Cie(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Re(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(fE(n,a)):Re(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Kw(n,r)):o.trackChildChange(pE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Er,(s,i)=>{n.hasChild(s)||r.trackChildChange(fE(s,i))}),n.isLeafNode()||n.forEachChild(Er,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(pE(s,i,o))}else r.trackChildChange(Kw(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?wt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.indexedFilter_=new _5(e.getIndex()),this.index_=e.getIndex(),this.startPost_=gE.getStartPost_(e),this.endPost_=gE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new $t(n,r))||(r=wt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=wt.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(wt.EMPTY_NODE);const i=this;return n.forEachChild(Er,(o,a)=>{i.matches(new $t(o,a))||(s=s.updateImmediateChild(o,wt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aie{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new gE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new $t(n,r))||(r=wt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=wt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=wt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(wt.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Re(a.numChildren()===this.limit_,"");const c=new $t(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(pE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(fE(n,d));const g=a.updateImmediateChild(n,wt.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(Kw(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(fE(l.name,l.node)),i.trackChildChange(Kw(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,wt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Er}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Re(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Re(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vw}hasEnd(){return this.endSet_}getIndexEndValue(){return Re(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Re(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ug}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Re(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Er}copy(){const e=new C5;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Sie(t){return t.loadsAllData()?new _5(t.getIndex()):t.hasLimit()?new Aie(t):new gE(t)}function O$(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Er?n="$priority":t.index_===_ie?n="$value":t.index_===Ry?n="$key":(Re(t.index_ instanceof vie,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Hr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Hr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Hr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Hr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Hr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function k$(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Er&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS extends pW{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=pC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Re(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=FS.getListenId_(e,r),a={};this.listens_[o]=a;const c=O$(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),qw(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=FS.getListenId_(e,n);delete this.listens_[r]}get(e){const n=O$(e._queryParams),r=e._path.toString(),s=new Nx;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Zne(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=cE(a.responseText)}catch{Zi("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Zi("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iie{constructor(){this.rootNode_=wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(){return{value:null,children:new Map}}function IW(t,e,n){if(zt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ut(e);t.children.has(r)||t.children.set(r,jS());const s=t.children.get(r);e=qn(e),IW(s,e,n)}}function n2(t,e,n){t.value!==null?n(e,t.value):xie(t,(r,s)=>{const i=new Bn(e.toString()+"/"+r);n2(s,i,n)})}function xie(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nie{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&io(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=10*1e3,Tie=30*1e3,Rie=5*60*1e3;class Pie{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Nie(e);const r=D$+(Tie-D$)*Math.random();Tv(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;io(e,(s,i)=>{i>0&&sd(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Tv(this.reportStats_.bind(this),Math.floor(Math.random()*2*Rie))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mc;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(mc||(mc={}));function xW(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function A5(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function S5(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=mc.ACK_USER_WRITE,this.source=xW()}operationForChild(e){if(zt(this.path)){if(this.affectedTree.value!=null)return Re(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Bn(e));return new zS(dn(),n,this.revert)}}else return Re(Ut(this.path)===e,"operationForChild called for unrelated child."),new zS(qn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n){this.source=e,this.path=n,this.type=mc.LISTEN_COMPLETE}operationForChild(e){return zt(this.path)?new mE(this.source,dn()):new mE(this.source,qn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=mc.OVERWRITE}operationForChild(e){return zt(this.path)?new dg(this.source,dn(),this.snap.getImmediateChild(e)):new dg(this.source,qn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=mc.MERGE}operationForChild(e){if(zt(this.path)){const n=this.children.subtree(new Bn(e));return n.isEmpty()?null:n.value?new dg(this.source,dn(),n.value):new yE(this.source,dn(),n)}else return Re(Ut(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new yE(this.source,qn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(zt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ut(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oie{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function kie(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Cie(o.childName,o.snapshotNode))}),Cb(t,s,"child_removed",e,r,n),Cb(t,s,"child_added",e,r,n),Cb(t,s,"child_moved",i,r,n),Cb(t,s,"child_changed",e,r,n),Cb(t,s,"value",e,r,n),s}function Cb(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Mie(t,a,c)),o.forEach(a=>{const c=Die(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Die(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Mie(t,e,n){if(e.childName==null||n.childName==null)throw $0("Should only compare child_ events.");const r=new $t(e.childName,e.snapshotNode),s=new $t(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e){return{eventCache:t,serverCache:e}}function Rv(t,e,n,r){return Px(new sf(e,n,r),t.serverCache)}function NW(t,e,n,r){return Px(t.eventCache,new sf(e,n,r))}function WS(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function hg(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QT;const Lie=()=>(QT||(QT=new Yi(Ese)),QT);class Zn{constructor(e,n=Lie()){this.value=e,this.children=n}static fromObject(e){let n=new Zn(null);return io(e,(r,s)=>{n=n.set(new Bn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:dn(),value:this.value};if(zt(e))return null;{const r=Ut(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(qn(e),n);return i!=null?{path:Gr(new Bn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(zt(e))return this;{const n=Ut(e),r=this.children.get(n);return r!==null?r.subtree(qn(e)):new Zn(null)}}set(e,n){if(zt(e))return new Zn(n,this.children);{const r=Ut(e),i=(this.children.get(r)||new Zn(null)).set(qn(e),n),o=this.children.insert(r,i);return new Zn(this.value,o)}}remove(e){if(zt(e))return this.children.isEmpty()?new Zn(null):new Zn(null,this.children);{const n=Ut(e),r=this.children.get(n);if(r){const s=r.remove(qn(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Zn(null):new Zn(this.value,i)}else return this}}get(e){if(zt(e))return this.value;{const n=Ut(e),r=this.children.get(n);return r?r.get(qn(e)):null}}setTree(e,n){if(zt(e))return n;{const r=Ut(e),i=(this.children.get(r)||new Zn(null)).setTree(qn(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Zn(this.value,o)}}fold(e){return this.fold_(dn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Gr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,dn(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(zt(e))return null;{const i=Ut(e),o=this.children.get(i);return o?o.findOnPath_(qn(e),Gr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,dn(),n)}foreachOnPath_(e,n,r){if(zt(e))return this;{this.value&&r(n,this.value);const s=Ut(e),i=this.children.get(s);return i?i.foreachOnPath_(qn(e),Gr(n,s),r):new Zn(null)}}foreach(e){this.foreach_(dn(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Gr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this.writeTree_=e}static empty(){return new bc(new Zn(null))}}function Pv(t,e,n){if(zt(e))return new bc(new Zn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=fi(s,e);return i=i.updateChild(o,n),new bc(t.writeTree_.set(s,i))}else{const s=new Zn(n),i=t.writeTree_.setTree(e,s);return new bc(i)}}}function M$(t,e,n){let r=t;return io(n,(s,i)=>{r=Pv(r,Gr(e,s),i)}),r}function L$(t,e){if(zt(e))return bc.empty();{const n=t.writeTree_.setTree(e,new Zn(null));return new bc(n)}}function r2(t,e){return qg(t,e)!=null}function qg(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(fi(n.path,e)):null}function U$(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Er,(r,s)=>{e.push(new $t(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new $t(r,s.value))}),e}function Mh(t,e){if(zt(e))return t;{const n=qg(t,e);return n!=null?new bc(new Zn(n)):new bc(t.writeTree_.subtree(e))}}function s2(t){return t.writeTree_.isEmpty()}function Yw(t,e){return TW(dn(),t.writeTree_,e)}function TW(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Re(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=TW(Gr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Gr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t,e){return kW(e,t)}function Uie(t,e,n,r,s){Re(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Pv(t.visibleWrites,e,n)),t.lastWriteId=r}function $ie(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Bie(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Re(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Fie(a,r.path)?s=!1:gc(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return jie(t),!0;if(r.snap)t.visibleWrites=L$(t.visibleWrites,r.path);else{const a=r.children;io(a,c=>{t.visibleWrites=L$(t.visibleWrites,Gr(r.path,c))})}return!0}else return!1}function Fie(t,e){if(t.snap)return gc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&gc(Gr(t.path,n),e))return!0;return!1}function jie(t){t.visibleWrites=RW(t.allWrites,zie,dn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function zie(t){return t.visible}function RW(t,e,n){let r=bc.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)gc(n,o)?(a=fi(n,o),r=Pv(r,a,i.snap)):gc(o,n)&&(a=fi(o,n),r=Pv(r,dn(),i.snap.getChild(a)));else if(i.children){if(gc(n,o))a=fi(n,o),r=M$(r,a,i.children);else if(gc(o,n))if(a=fi(o,n),zt(a))r=M$(r,dn(),i.children);else{const c=qw(i.children,Ut(a));if(c){const l=c.getChild(qn(a));r=Pv(r,dn(),l)}}}else throw $0("WriteRecord should have .snap or .children")}}return r}function PW(t,e,n,r,s){if(!r&&!s){const i=qg(t.visibleWrites,e);if(i!=null)return i;{const o=Mh(t.visibleWrites,e);if(s2(o))return n;if(n==null&&!r2(o,dn()))return null;{const a=n||wt.EMPTY_NODE;return Yw(o,a)}}}else{const i=Mh(t.visibleWrites,e);if(!s&&s2(i))return n;if(!s&&n==null&&!r2(i,dn()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(gc(l.path,e)||gc(e,l.path))},a=RW(t.allWrites,o,e),c=n||wt.EMPTY_NODE;return Yw(a,c)}}}function Wie(t,e,n){let r=wt.EMPTY_NODE;const s=qg(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Er,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Mh(t.visibleWrites,e);return n.forEachChild(Er,(o,a)=>{const c=Yw(Mh(i,new Bn(o)),a);r=r.updateImmediateChild(o,c)}),U$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Mh(t.visibleWrites,e);return U$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Hie(t,e,n,r,s){Re(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Gr(e,n);if(r2(t.visibleWrites,i))return null;{const o=Mh(t.visibleWrites,i);return s2(o)?s.getChild(n):Yw(o,s.getChild(n))}}function Gie(t,e,n,r){const s=Gr(e,n),i=qg(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Mh(t.visibleWrites,s);return Yw(o,r.getNode().getImmediateChild(n))}else return null}function qie(t,e){return qg(t.visibleWrites,e)}function Vie(t,e,n,r,s,i,o){let a;const c=Mh(t.visibleWrites,e),l=qg(c,dn());if(l!=null)a=l;else if(n!=null)a=Yw(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Kie(){return{visibleWrites:bc.empty(),allWrites:[],lastWriteId:-1}}function HS(t,e,n,r){return PW(t.writeTree,t.treePath,e,n,r)}function I5(t,e){return Wie(t.writeTree,t.treePath,e)}function $$(t,e,n,r){return Hie(t.writeTree,t.treePath,e,n,r)}function GS(t,e){return qie(t.writeTree,Gr(t.treePath,e))}function Yie(t,e,n,r,s,i){return Vie(t.writeTree,t.treePath,e,n,r,s,i)}function x5(t,e,n){return Gie(t.writeTree,t.treePath,e,n)}function OW(t,e){return kW(Gr(t.treePath,e),t.writeTree)}function kW(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qie{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Re(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Re(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,pE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,fE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Kw(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,pE(r,e.snapshotNode,s.oldSnap));else throw $0("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jie{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const DW=new Jie;class N5{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new sf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return x5(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:hg(this.viewCache_),i=Yie(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zie(t){return{filter:t}}function Xie(t,e){Re(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Re(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function eoe(t,e,n,r,s){const i=new Qie;let o,a;if(n.type===mc.OVERWRITE){const l=n;l.source.fromUser?o=i2(t,e,l.path,l.snap,r,s,i):(Re(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!zt(l.path),o=qS(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===mc.MERGE){const l=n;l.source.fromUser?o=noe(t,e,l.path,l.children,r,s,i):(Re(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=o2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===mc.ACK_USER_WRITE){const l=n;l.revert?o=ioe(t,e,l.path,r,s,i):o=roe(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===mc.LISTEN_COMPLETE)o=soe(t,e,n.path,r,i);else throw $0("Unknown operation type: "+n.type);const c=i.getChanges();return toe(e,o,c),{viewCache:o,changes:c}}function toe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=WS(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(SW(WS(e)))}}function MW(t,e,n,r,s,i){const o=e.eventCache;if(GS(r,n)!=null)return e;{let a,c;if(zt(n))if(Re(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=hg(e),u=l instanceof wt?l:wt.EMPTY_NODE,d=I5(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=HS(r,hg(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Ut(n);if(l===".priority"){Re(rf(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=$$(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=qn(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=$$(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=x5(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return Rv(e,a,o.isFullyInitialized()||zt(n),t.filter.filtersNodes())}}function qS(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(zt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Ut(n);if(!c.isCompleteForPath(n)&&rf(n)>1)return e;const p=qn(n),y=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),y):l=u.updateChild(c.getNode(),f,y,p,DW,null)}const d=NW(e,l,c.isFullyInitialized()||zt(n),u.filtersNodes()),h=new N5(s,d,i);return MW(t,d,n,s,h,a)}function i2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new N5(s,e,i);if(zt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Rv(e,l,!0,t.filter.filtersNodes());else{const d=Ut(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Rv(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=qn(n),f=a.getNode().getImmediateChild(d);let p;if(zt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?mW(h)===".priority"&&g.getChild(wW(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=wt.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=Rv(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function B$(t,e){return t.eventCache.isCompleteForChild(e)}function noe(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Gr(n,c);B$(e,Ut(u))&&(a=i2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Gr(n,c);B$(e,Ut(u))||(a=i2(t,a,u,l,s,i,o))}),a}function F$(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function o2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;zt(n)?l=r:l=new Zn(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=F$(t,f,h);c=qS(t,c,new Bn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=F$(t,p,h);c=qS(t,c,new Bn(d),g,s,i,o,a)}}),c}function roe(t,e,n,r,s,i,o){if(GS(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(zt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return qS(t,e,n,c.getNode().getChild(n),s,i,a,o);if(zt(n)){let l=new Zn(null);return c.getNode().forEachChild(Ry,(u,d)=>{l=l.set(new Bn(u),d)}),o2(t,e,n,l,s,i,a,o)}else return e}else{let l=new Zn(null);return r.foreach((u,d)=>{const h=Gr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),o2(t,e,n,l,s,i,a,o)}}function soe(t,e,n,r,s){const i=e.serverCache,o=NW(e,i.getNode(),i.isFullyInitialized()||zt(n),i.isFiltered());return MW(t,o,n,r,DW,s)}function ioe(t,e,n,r,s,i){let o;if(GS(r,n)!=null)return e;{const a=new N5(r,e,s),c=e.eventCache.getNode();let l;if(zt(n)||Ut(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=HS(r,hg(e));else{const d=e.serverCache.getNode();Re(d instanceof wt,"serverChildren would be complete if leaf node"),u=I5(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Ut(n);let d=x5(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,qn(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,wt.EMPTY_NODE,qn(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=HS(r,hg(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||GS(r,dn())!=null,Rv(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ooe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new _5(r.getIndex()),i=Sie(r);this.processor_=Zie(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(wt.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(wt.EMPTY_NODE,a.getNode(),null),u=new sf(c,o.isFullyInitialized(),s.filtersNodes()),d=new sf(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Px(d,u),this.eventGenerator_=new Oie(this.query_)}get query(){return this.query_}}function aoe(t){return t.viewCache_.serverCache.getNode()}function coe(t){return WS(t.viewCache_)}function loe(t,e){const n=hg(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!zt(e)&&!n.getImmediateChild(Ut(e)).isEmpty())?n.getChild(e):null}function j$(t){return t.eventRegistrations_.length===0}function uoe(t,e){t.eventRegistrations_.push(e)}function z$(t,e,n){const r=[];if(n){Re(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function W$(t,e,n,r){e.type===mc.MERGE&&e.source.queryId!==null&&(Re(hg(t.viewCache_),"We should always have a full cache before handling merges"),Re(WS(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=eoe(t.processor_,s,e,n,r);return Xie(t.processor_,i.viewCache),Re(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,LW(t,i.changes,i.viewCache.eventCache.getNode(),null)}function doe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Er,(i,o)=>{r.push(Kw(i,o))}),n.isFullyInitialized()&&r.push(SW(n.getNode())),LW(t,r,n.getNode(),e)}function LW(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return kie(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VS;class UW{constructor(){this.views=new Map}}function hoe(t){Re(!VS,"__referenceConstructor has already been defined"),VS=t}function foe(){return Re(VS,"Reference.ts has not been loaded"),VS}function poe(t){return t.views.size===0}function T5(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Re(i!=null,"SyncTree gave us an op for an invalid query."),W$(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(W$(o,e,n,r));return i}}function $W(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=HS(n,s?r:null),c=!1;a?c=!0:r instanceof wt?(a=I5(n,r),c=!1):(a=wt.EMPTY_NODE,c=!1);const l=Px(new sf(a,c,!1),new sf(r,s,!1));return new ooe(e,l)}return o}function goe(t,e,n,r,s,i){const o=$W(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),uoe(o,n),doe(o,n)}function moe(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=of(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(z$(l,n,r)),j$(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(z$(c,n,r)),j$(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!of(t)&&i.push(new(foe())(e._repo,e._path)),{removed:i,events:o}}function BW(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Lh(t,e){let n=null;for(const r of t.views.values())n=n||loe(r,e);return n}function FW(t,e){if(e._queryParams.loadsAllData())return kx(t);{const r=e._queryIdentifier;return t.views.get(r)}}function jW(t,e){return FW(t,e)!=null}function of(t){return kx(t)!=null}function kx(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KS;function yoe(t){Re(!KS,"__referenceConstructor has already been defined"),KS=t}function woe(){return Re(KS,"Reference.ts has not been loaded"),KS}let boe=1;class H${constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zn(null),this.pendingWriteTree_=Kie(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zW(t,e,n,r,s){return Uie(t.pendingWriteTree_,e,n,r,s),s?yC(t,new dg(xW(),e,n)):[]}function ap(t,e,n=!1){const r=$ie(t.pendingWriteTree_,e);if(Bie(t.pendingWriteTree_,e)){let i=new Zn(null);return r.snap!=null?i=i.set(dn(),!0):io(r.children,o=>{i=i.set(new Bn(o),!0)}),yC(t,new zS(r.path,i,n))}else return[]}function mC(t,e,n){return yC(t,new dg(A5(),e,n))}function voe(t,e,n){const r=Zn.fromObject(n);return yC(t,new yE(A5(),e,r))}function Eoe(t,e){return yC(t,new mE(A5(),e))}function _oe(t,e,n){const r=P5(t,n);if(r){const s=O5(r),i=s.path,o=s.queryId,a=fi(i,e),c=new mE(S5(o),a);return k5(t,i,c)}else return[]}function YS(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||jW(o,e))){const c=moe(o,e,n,r);poe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>of(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=Soe(h);for(let p=0;p<f.length;++p){const g=f[p],y=g.query,m=qW(t,g);t.listenProvider_.startListening(Ov(y),wE(t,y),m.hashFn,m.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Ov(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(Dx(h));t.listenProvider_.stopListening(Ov(h),f)}))}Ioe(t,l)}return a}function WW(t,e,n,r){const s=P5(t,r);if(s!=null){const i=O5(s),o=i.path,a=i.queryId,c=fi(o,e),l=new dg(S5(a),c,n);return k5(t,o,l)}else return[]}function Coe(t,e,n,r){const s=P5(t,r);if(s){const i=O5(s),o=i.path,a=i.queryId,c=fi(o,e),l=Zn.fromObject(n),u=new yE(S5(a),c,l);return k5(t,o,u)}else return[]}function a2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=fi(h,s);i=i||Lh(f,p),o=o||of(f)});let a=t.syncPointTree_.get(s);a?(o=o||of(a),i=i||Lh(a,dn())):(a=new UW,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=wt.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Lh(p,dn());g&&(i=i.updateImmediateChild(f,g))}));const l=jW(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=Dx(e);Re(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=xoe();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=Ox(t.pendingWriteTree_,s);let d=goe(a,e,n,u,i,c);if(!l&&!o&&!r){const h=FW(a,e);d=d.concat(Noe(t,e,h))}return d}function R5(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=fi(o,e),l=Lh(a,c);if(l)return l});return PW(s,e,i,n,!0)}function Aoe(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=fi(l,n);r=r||Lh(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Lh(s,dn()):(s=new UW,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new sf(r,!0,!1):null,a=Ox(t.pendingWriteTree_,e._path),c=$W(s,e,a,i?o.getNode():wt.EMPTY_NODE,i);return coe(c)}function yC(t,e){return HW(e,t.syncPointTree_,null,Ox(t.pendingWriteTree_,dn()))}function HW(t,e,n,r){if(zt(t.path))return GW(t,e,n,r);{const s=e.get(dn());n==null&&s!=null&&(n=Lh(s,dn()));let i=[];const o=Ut(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=OW(r,o);i=i.concat(HW(a,c,l,u))}return s&&(i=i.concat(T5(s,t,r,n))),i}}function GW(t,e,n,r){const s=e.get(dn());n==null&&s!=null&&(n=Lh(s,dn()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=OW(r,o),u=t.operationForChild(o);u&&(i=i.concat(GW(u,a,c,l)))}),s&&(i=i.concat(T5(s,t,r,n))),i}function qW(t,e){const n=e.query,r=wE(t,n);return{hashFn:()=>(aoe(e)||wt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?_oe(t,n._path,r):Eoe(t,n._path);{const i=Ase(s,n);return YS(t,n,null,i)}}}}function wE(t,e){const n=Dx(e);return t.queryToTagMap.get(n)}function Dx(t){return t._path.toString()+"$"+t._queryIdentifier}function P5(t,e){return t.tagToQueryMap.get(e)}function O5(t){const e=t.indexOf("$");return Re(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Bn(t.substr(0,e))}}function k5(t,e,n){const r=t.syncPointTree_.get(e);Re(r,"Missing sync point for query tag that we're tracking");const s=Ox(t.pendingWriteTree_,e);return T5(r,n,s,null)}function Soe(t){return t.fold((e,n,r)=>{if(n&&of(n))return[kx(n)];{let s=[];return n&&(s=BW(n)),io(r,(i,o)=>{s=s.concat(o)}),s}})}function Ov(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(woe())(t._repo,t._path):t}function Ioe(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=Dx(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function xoe(){return boe++}function Noe(t,e,n){const r=e._path,s=wE(t,e),i=qW(t,n),o=t.listenProvider_.startListening(Ov(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Re(!of(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!zt(l)&&u&&of(u))return[kx(u).query];{let h=[];return u&&(h=h.concat(BW(u).map(f=>f.query))),io(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(Ov(u),wE(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new D5(n)}node(){return this.node_}}class M5{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Gr(this.path_,e);return new M5(this.syncTree_,n)}node(){return R5(this.syncTree_,this.path_)}}const Toe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},G$=function(t,e,n){if(!t||typeof t!="object")return t;if(Re(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Roe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Poe(t[".sv"],e);Re(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Roe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Re(!1,"Unexpected server value: "+t)}},Poe=function(t,e,n){t.hasOwnProperty("increment")||Re(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Re(!1,"Unexpected increment value: "+r);const s=e.node();if(Re(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},Ooe=function(t,e,n,r){return L5(e,new M5(n,t),r)},VW=function(t,e,n){return L5(t,new D5(e),n)};function L5(t,e,n){const r=t.getPriority().val(),s=G$(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=G$(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new ns(a,os(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new ns(s))),o.forEachChild(Er,(a,c)=>{const l=L5(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function $5(t,e){let n=e instanceof Bn?e:new Bn(e),r=t,s=Ut(n);for(;s!==null;){const i=qw(r.node.children,s)||{children:{},childCount:0};r=new U5(s,r,i),n=qn(n),s=Ut(n)}return r}function z0(t){return t.node.value}function KW(t,e){t.node.value=e,c2(t)}function YW(t){return t.node.childCount>0}function koe(t){return z0(t)===void 0&&!YW(t)}function Mx(t,e){io(t.node.children,(n,r)=>{e(new U5(n,t,r))})}function QW(t,e,n,r){n&&e(t),Mx(t,s=>{QW(s,e,!0)})}function Doe(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function wC(t){return new Bn(t.parent===null?t.name:wC(t.parent)+"/"+t.name)}function c2(t){t.parent!==null&&Moe(t.parent,t.name,t)}function Moe(t,e,n){const r=koe(n),s=sd(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,c2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,c2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Loe=/[\[\].#$\/\u0000-\u001F\u007F]/,Uoe=/[\[\].#$\u0000-\u001F\u007F]/,JT=10*1024*1024,JW=function(t){return typeof t=="string"&&t.length!==0&&!Loe.test(t)},ZW=function(t){return typeof t=="string"&&t.length!==0&&!Uoe.test(t)},$oe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ZW(t)},Boe=function(t,e,n,r){B5(f5(t,"value"),e,n)},B5=function(t,e,n){const r=n instanceof Bn?new rie(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+jf(r));if(typeof e=="function")throw new Error(t+"contains a function "+jf(r)+" with contents = "+e.toString());if(Yz(e))throw new Error(t+"contains "+e.toString()+" "+jf(r));if(typeof e=="string"&&e.length>JT/3&&Tx(e)>JT)throw new Error(t+"contains a string greater than "+JT+" utf8 bytes "+jf(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(io(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!JW(o)))throw new Error(t+" contains an invalid key ("+o+") "+jf(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);sie(r,o),B5(t,a,r),iie(r)}),s&&i)throw new Error(t+' contains ".value" child '+jf(r)+" in addition to actual children.")}},XW=function(t,e,n,r){if(!ZW(n))throw new Error(f5(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Foe=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),XW(t,e,n)},eH=function(t,e){if(Ut(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},joe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!JW(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!$oe(n))throw new Error(f5(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zoe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function F5(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!b5(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function tH(t,e,n){F5(t,n),nH(t,r=>b5(r,e))}function Ol(t,e,n){F5(t,n),nH(t,r=>gc(r,e)||gc(e,r))}function nH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Woe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Woe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Nv&&Vs("event: "+n.toString()),j0(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hoe="repo_interrupt",Goe=25;class qoe{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zoe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=jS(),this.transactionQueueTree_=new U5,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Voe(t,e,n){if(t.stats_=y5(t.repoInfo_),t.forceRestClient_||Nse())t.server_=new FS(t.repoInfo_,(r,s,i,o)=>{q$(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>V$(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Hr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Lu(t.repoInfo_,e,(r,s,i,o)=>{q$(t,r,s,i,o)},r=>{V$(t,r)},r=>{Yoe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=kse(t.repoInfo_,()=>new Pie(t.stats_,t.server_)),t.infoData_=new Iie,t.infoSyncTree_=new H$({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=mC(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),z5(t,"connected",!1),t.serverSyncTree_=new H$({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Ol(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Koe(t){const n=t.infoData_.getNode(new Bn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function j5(t){return Toe({timestamp:Koe(t)})}function q$(t,e,n,r,s){t.dataUpdateCount++;const i=new Bn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=MS(n,l=>os(l));o=Coe(t.serverSyncTree_,i,c,s)}else{const c=os(n);o=WW(t.serverSyncTree_,i,c,s)}else if(r){const c=MS(n,l=>os(l));o=voe(t.serverSyncTree_,i,c)}else{const c=os(n);o=mC(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=Ux(t,i)),Ol(t.eventQueue_,a,o)}function V$(t,e){z5(t,"connected",e),e===!1&&Zoe(t)}function Yoe(t,e){io(e,(n,r)=>{z5(t,n,r)})}function z5(t,e,n){const r=new Bn("/.info/"+e),s=os(n);t.infoData_.updateSnapshot(r,s);const i=mC(t.infoSyncTree_,r,s);Ol(t.eventQueue_,r,i)}function rH(t){return t.nextWriteId_++}function Qoe(t,e,n){const r=Aoe(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=os(s).withIndex(e._queryParams.getIndex());a2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=mC(t.serverSyncTree_,e._path,i);else{const a=wE(t.serverSyncTree_,e);o=WW(t.serverSyncTree_,e._path,i,a)}return Ol(t.eventQueue_,e._path,o),YS(t.serverSyncTree_,e,n,null,!0),i},s=>(Lx(t,"get for query "+Hr(e)+" failed: "+s),Promise.reject(new Error(s))))}function Joe(t,e,n,r,s){Lx(t,"set",{path:e.toString(),value:n,priority:r});const i=j5(t),o=os(n,r),a=R5(t.serverSyncTree_,e),c=VW(o,a,i),l=rH(t),u=zW(t.serverSyncTree_,e,c,l,!0);F5(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||Zi("set at "+e+" failed: "+h);const g=ap(t.serverSyncTree_,l,!p);Ol(t.eventQueue_,e,g),nae(t,s,h,f)});const d=cH(t,e);Ux(t,d),Ol(t.eventQueue_,d,[])}function Zoe(t){Lx(t,"onDisconnectEvents");const e=j5(t),n=jS();n2(t.onDisconnect_,dn(),(s,i)=>{const o=Ooe(s,i,t.serverSyncTree_,e);IW(n,s,o)});let r=[];n2(n,dn(),(s,i)=>{r=r.concat(mC(t.serverSyncTree_,s,i));const o=cH(t,s);Ux(t,o)}),t.onDisconnect_=jS(),Ol(t.eventQueue_,dn(),r)}function Xoe(t,e,n){let r;Ut(e._path)===".info"?r=a2(t.infoSyncTree_,e,n):r=a2(t.serverSyncTree_,e,n),tH(t.eventQueue_,e._path,r)}function eae(t,e,n){let r;Ut(e._path)===".info"?r=YS(t.infoSyncTree_,e,n):r=YS(t.serverSyncTree_,e,n),tH(t.eventQueue_,e._path,r)}function tae(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Hoe)}function Lx(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Vs(n,...e)}function nae(t,e,n,r){e&&j0(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function sH(t,e,n){return R5(t.serverSyncTree_,e,n)||wt.EMPTY_NODE}function W5(t,e=t.transactionQueueTree_){if(e||$x(t,e),z0(e)){const n=oH(t,e);Re(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&rae(t,wC(e),n)}else YW(e)&&Mx(e,n=>{W5(t,n)})}function rae(t,e,n){const r=n.map(l=>l.currentWriteId),s=sH(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Re(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=fi(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Lx(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(ap(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();$x(t,$5(t.transactionQueueTree_,e)),W5(t,t.transactionQueueTree_),Ol(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)j0(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Zi("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Ux(t,e)}},o)}function Ux(t,e){const n=iH(t,e),r=wC(n),s=oH(t,n);return sae(t,s,r),r}function sae(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=fi(n,c.path);let u=!1,d;if(Re(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(ap(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Goe)u=!0,d="maxretry",s=s.concat(ap(t.serverSyncTree_,c.currentWriteId,!0));else{const h=sH(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){B5("transaction failed: Data returned ",f,c.path);let p=os(f);typeof f=="object"&&f!=null&&sd(f,".priority")||(p=p.updatePriority(h.getPriority()));const y=c.currentWriteId,m=j5(t),b=VW(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=rH(t),o.splice(o.indexOf(y),1),s=s.concat(zW(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(ap(t.serverSyncTree_,y,!0))}else u=!0,d="nodata",s=s.concat(ap(t.serverSyncTree_,c.currentWriteId,!0))}Ol(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}$x(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)j0(r[a]);W5(t,t.transactionQueueTree_)}function iH(t,e){let n,r=t.transactionQueueTree_;for(n=Ut(e);n!==null&&z0(r)===void 0;)r=$5(r,n),e=qn(e),n=Ut(e);return r}function oH(t,e){const n=[];return aH(t,e,n),n.sort((r,s)=>r.order-s.order),n}function aH(t,e,n){const r=z0(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Mx(e,s=>{aH(t,s,n)})}function $x(t,e){const n=z0(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,KW(e,n.length>0?n:void 0)}Mx(e,r=>{$x(t,r)})}function cH(t,e){const n=wC(iH(t,e)),r=$5(t.transactionQueueTree_,e);return Doe(r,s=>{ZT(t,s)}),ZT(t,r),QW(r,s=>{ZT(t,s)}),n}function ZT(t,e){const n=z0(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Re(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Re(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(ap(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?KW(e,void 0):n.length=i+1,Ol(t.eventQueue_,wC(e),s);for(let o=0;o<r.length;o++)j0(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iae(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function oae(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Zi(`Invalid query segment '${n}' in query '${t}'`)}return e}const K$=function(t,e){const n=aae(t),r=n.namespace;n.domain==="firebase.com"&&Vu(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Vu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||bse();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new aW(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Bn(n.pathString)}},aae=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=iae(t.substring(u,d)));const h=oae(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cae{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Hr(this.snapshot.exportVal())}}class lae{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Re(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return zt(this._path)?null:mW(this._path)}get ref(){return new id(this._repo,this._path)}get _queryIdentifier(){const e=k$(this._queryParams),n=g5(e);return n==="{}"?"default":n}get _queryObject(){return k$(this._queryParams)}isEqual(e){if(e=B0(e),!(e instanceof H5))return!1;const n=this._repo===e._repo,r=b5(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+nie(this._path)}}class id extends H5{constructor(e,n){super(e,n,new C5,!1)}get parent(){const e=wW(this._path);return e===null?null:new id(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class bE{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Bn(e),r=l2(this.ref,e);return new bE(this._node.getChild(n),r,Er)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new bE(s,l2(this.ref,r),Er)))}hasChild(e){const n=new Bn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function sa(t,e){return t=B0(t),t._checkNotDeleted("ref"),e!==void 0?l2(t._root,e):t._root}function l2(t,e){return t=B0(t),Ut(t._path)===null?Foe("child","path",e):XW("child","path",e),new id(t._repo,Gr(t._path,e))}function uae(t){return eH("remove",t._path),kv(t,null)}function kv(t,e){t=B0(t),eH("set",t._path),Boe("set",e,t._path);const n=new Nx;return Joe(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Yf(t){t=B0(t);const e=new lH(()=>{}),n=new Bx(e);return Qoe(t._repo,t,n).then(r=>new bE(r,new id(t._repo,t._path),t._queryParams.getIndex()))}class Bx{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new cae("value",this,new bE(e.snapshotNode,new id(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new lae(this,e,n):null}matches(e){return e instanceof Bx?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function dae(t,e,n,r,s){const i=new lH(n,void 0),o=new Bx(i);return Xoe(t._repo,t,o),()=>eae(t._repo,t,o)}function Y$(t,e,n,r){return dae(t,"value",e)}hoe(id);yoe(id);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hae="FIREBASE_DATABASE_EMULATOR_HOST",u2={};let fae=!1;function pae(t,e,n,r){t.repoInfo_=new aW(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function gae(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Vu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vs("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=K$(i,s),a=o.repoInfo,c;typeof process<"u"&&g$&&(c=g$[hae]),c?(i=`http://${c}?ns=${a.namespace}`,o=K$(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new Rse(t.name,t.options,e);joe("Invalid Firebase Database URL",o),zt(o.path)||Vu("Database URL must point to the root of a Firebase Database (not including a child path).");const u=yae(a,t,l,new Tse(t.name,n));return new wae(u,t)}function mae(t,e){const n=u2[e];(!n||n[t.key]!==t)&&Vu(`Database ${e}(${t.repoInfo_}) has already been deleted.`),tae(t),delete n[t.key]}function yae(t,e,n,r){let s=u2[e.name];s||(s={},u2[e.name]=s);let i=s[t.toURLString()];return i&&Vu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new qoe(t,fae,n,r),s[t.toURLString()]=i,i}class wae{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Voe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new id(this._repo,dn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(mae(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Vu("Cannot call "+e+" on a deleted database.")}}function bae(t=Wz(),e){const n=Jre(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Fne("database");r&&vae(n,...r)}return n}function vae(t,e,n,r={}){t=B0(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Vu("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Vu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new zA(zA.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:jne(r.mockUserToken,t.app.options.projectId);i=new zA(o)}pae(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eae(t){fse(ese),LS(new lE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return gae(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Ny(m$,y$,t),Ny(m$,y$,"esm2017")}Lu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Lu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Eae();const _ae={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},Cae=tse().length?Wz():zz(_ae),QS=bae(Cae);var d2={},uH={exports:{}},Wo={},dH={exports:{}},hH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,D){var F=P.length;P.push(D);e:for(;0<F;){var H=F-1>>>1,te=P[H];if(0<s(te,D))P[H]=D,P[F]=te,F=H;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var D=P[0],F=P.pop();if(F!==D){P[0]=F;e:for(var H=0,te=P.length,re=te>>>1;H<re;){var ie=2*(H+1)-1,le=P[ie],Ce=ie+1,X=P[Ce];if(0>s(le,F))Ce<te&&0>s(X,le)?(P[H]=X,P[Ce]=F,H=Ce):(P[H]=le,P[ie]=F,H=ie);else if(Ce<te&&0>s(X,F))P[H]=X,P[Ce]=F,H=Ce;else break e}}return D}function s(P,D){var F=P.sortIndex-D.sortIndex;return F!==0?F:P.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var D=n(l);D!==null;){if(D.callback===null)r(l);else if(D.startTime<=P)r(l),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(l)}}function A(P){if(g=!1,v(P),!p)if(n(c)!==null)p=!0,N(C);else{var D=n(l);D!==null&&M(A,D.startTime-P)}}function C(P,D){p=!1,g&&(g=!1,m(T),T=-1),f=!0;var F=h;try{for(v(D),d=n(c);d!==null&&(!(d.expirationTime>D)||P&&!O());){var H=d.callback;if(typeof H=="function"){d.callback=null,h=d.priorityLevel;var te=H(d.expirationTime<=D);D=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(c)&&r(c),v(D)}else r(c);d=n(c)}if(d!==null)var re=!0;else{var ie=n(l);ie!==null&&M(A,ie.startTime-D),re=!1}return re}finally{d=null,h=F,f=!1}}var S=!1,x=null,T=-1,I=5,k=-1;function O(){return!(t.unstable_now()-k<I)}function B(){if(x!==null){var P=t.unstable_now();k=P;var D=!0;try{D=x(!0,P)}finally{D?G():(S=!1,x=null)}}else S=!1}var G;if(typeof b=="function")G=function(){b(B)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,R=W.port2;W.port1.onmessage=B,G=function(){R.postMessage(null)}}else G=function(){y(B,0)};function N(P){x=P,S||(S=!0,G())}function M(P,D){T=y(function(){P(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,N(C))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(P){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var F=h;h=D;try{return P()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,D){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var F=h;h=P;try{return D()}finally{h=F}},t.unstable_scheduleCallback=function(P,D,F){var H=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?H+F:H):F=H,P){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=F+te,P={id:u++,callback:D,priorityLevel:P,startTime:F,expirationTime:te,sortIndex:-1},F>H?(P.sortIndex=F,e(l,P),n(c)===null&&P===n(l)&&(g?(m(T),T=-1):g=!0,M(A,F-H))):(P.sortIndex=te,e(c,P),p||f||(p=!0,N(C))),P},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(P){var D=h;return function(){var F=h;h=D;try{return P.apply(this,arguments)}finally{h=F}}}})(hH);dH.exports=hH;var Aae=dH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sae=L,Fo=Aae;function Se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fH=new Set,vE={};function Vg(t,e){Qw(t,e),Qw(t+"Capture",e)}function Qw(t,e){for(vE[t]=e,t=0;t<e.length;t++)fH.add(e[t])}var Ku=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h2=Object.prototype.hasOwnProperty,Iae=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Q$={},J$={};function xae(t){return h2.call(J$,t)?!0:h2.call(Q$,t)?!1:Iae.test(t)?J$[t]=!0:(Q$[t]=!0,!1)}function Nae(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Tae(t,e,n,r){if(e===null||typeof e>"u"||Nae(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ci(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Os={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Os[t]=new Ci(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Os[e]=new Ci(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Os[t]=new Ci(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Os[t]=new Ci(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Os[t]=new Ci(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Os[t]=new Ci(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Os[t]=new Ci(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Os[t]=new Ci(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Os[t]=new Ci(t,5,!1,t.toLowerCase(),null,!1,!1)});var G5=/[\-:]([a-z])/g;function q5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(G5,q5);Os[e]=new Ci(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(G5,q5);Os[e]=new Ci(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(G5,q5);Os[e]=new Ci(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Os[t]=new Ci(t,1,!1,t.toLowerCase(),null,!1,!1)});Os.xlinkHref=new Ci("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Os[t]=new Ci(t,1,!1,t.toLowerCase(),null,!0,!0)});function V5(t,e,n,r){var s=Os.hasOwnProperty(e)?Os[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Tae(e,n,s,r)&&(n=null),r||s===null?xae(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var od=Sae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S1=Symbol.for("react.element"),oy=Symbol.for("react.portal"),ay=Symbol.for("react.fragment"),K5=Symbol.for("react.strict_mode"),f2=Symbol.for("react.profiler"),pH=Symbol.for("react.provider"),gH=Symbol.for("react.context"),Y5=Symbol.for("react.forward_ref"),p2=Symbol.for("react.suspense"),g2=Symbol.for("react.suspense_list"),Q5=Symbol.for("react.memo"),Fd=Symbol.for("react.lazy"),mH=Symbol.for("react.offscreen"),Z$=Symbol.iterator;function Ab(t){return t===null||typeof t!="object"?null:(t=Z$&&t[Z$]||t["@@iterator"],typeof t=="function"?t:null)}var fr=Object.assign,XT;function iv(t){if(XT===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);XT=e&&e[1]||""}return`
`+XT+t}var eR=!1;function tR(t,e){if(!t||eR)return"";eR=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{eR=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?iv(t):""}function Rae(t){switch(t.tag){case 5:return iv(t.type);case 16:return iv("Lazy");case 13:return iv("Suspense");case 19:return iv("SuspenseList");case 0:case 2:case 15:return t=tR(t.type,!1),t;case 11:return t=tR(t.type.render,!1),t;case 1:return t=tR(t.type,!0),t;default:return""}}function m2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ay:return"Fragment";case oy:return"Portal";case f2:return"Profiler";case K5:return"StrictMode";case p2:return"Suspense";case g2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gH:return(t.displayName||"Context")+".Consumer";case pH:return(t._context.displayName||"Context")+".Provider";case Y5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q5:return e=t.displayName||null,e!==null?e:m2(t.type)||"Memo";case Fd:e=t._payload,t=t._init;try{return m2(t(e))}catch{}}return null}function Pae(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return m2(e);case 8:return e===K5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function af(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yH(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Oae(t){var e=yH(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function I1(t){t._valueTracker||(t._valueTracker=Oae(t))}function wH(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yH(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function JS(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function y2(t,e){var n=e.checked;return fr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function X$(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=af(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bH(t,e){e=e.checked,e!=null&&V5(t,"checked",e,!1)}function w2(t,e){bH(t,e);var n=af(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?b2(t,e.type,n):e.hasOwnProperty("defaultValue")&&b2(t,e.type,af(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function eB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function b2(t,e,n){(e!=="number"||JS(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ov=Array.isArray;function Py(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+af(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function v2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Se(91));return fr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Se(92));if(ov(n)){if(1<n.length)throw Error(Se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:af(n)}}function vH(t,e){var n=af(e.value),r=af(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function nB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function EH(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function E2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?EH(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var x1,_H=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(x1=x1||document.createElement("div"),x1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=x1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function EE(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kae=["Webkit","ms","Moz","O"];Object.keys(Dv).forEach(function(t){kae.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dv[e]=Dv[t]})});function CH(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dv.hasOwnProperty(t)&&Dv[t]?(""+e).trim():e+"px"}function AH(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=CH(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Dae=fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _2(t,e){if(e){if(Dae[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Se(62))}}function C2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var A2=null;function J5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var S2=null,Oy=null,ky=null;function rB(t){if(t=EC(t)){if(typeof S2!="function")throw Error(Se(280));var e=t.stateNode;e&&(e=Hx(e),S2(t.stateNode,t.type,e))}}function SH(t){Oy?ky?ky.push(t):ky=[t]:Oy=t}function IH(){if(Oy){var t=Oy,e=ky;if(ky=Oy=null,rB(t),e)for(t=0;t<e.length;t++)rB(e[t])}}function xH(t,e){return t(e)}function NH(){}var nR=!1;function TH(t,e,n){if(nR)return t(e,n);nR=!0;try{return xH(t,e,n)}finally{nR=!1,(Oy!==null||ky!==null)&&(NH(),IH())}}function _E(t,e){var n=t.stateNode;if(n===null)return null;var r=Hx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Se(231,e,typeof n));return n}var I2=!1;if(Ku)try{var Sb={};Object.defineProperty(Sb,"passive",{get:function(){I2=!0}}),window.addEventListener("test",Sb,Sb),window.removeEventListener("test",Sb,Sb)}catch{I2=!1}function Mae(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Mv=!1,ZS=null,XS=!1,x2=null,Lae={onError:function(t){Mv=!0,ZS=t}};function Uae(t,e,n,r,s,i,o,a,c){Mv=!1,ZS=null,Mae.apply(Lae,arguments)}function $ae(t,e,n,r,s,i,o,a,c){if(Uae.apply(this,arguments),Mv){if(Mv){var l=ZS;Mv=!1,ZS=null}else throw Error(Se(198));XS||(XS=!0,x2=l)}}function Kg(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RH(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sB(t){if(Kg(t)!==t)throw Error(Se(188))}function Bae(t){var e=t.alternate;if(!e){if(e=Kg(t),e===null)throw Error(Se(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return sB(s),t;if(i===r)return sB(s),e;i=i.sibling}throw Error(Se(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Se(189))}}if(n.alternate!==r)throw Error(Se(190))}if(n.tag!==3)throw Error(Se(188));return n.stateNode.current===n?t:e}function PH(t){return t=Bae(t),t!==null?OH(t):null}function OH(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OH(t);if(e!==null)return e;t=t.sibling}return null}var kH=Fo.unstable_scheduleCallback,iB=Fo.unstable_cancelCallback,Fae=Fo.unstable_shouldYield,jae=Fo.unstable_requestPaint,xr=Fo.unstable_now,zae=Fo.unstable_getCurrentPriorityLevel,Z5=Fo.unstable_ImmediatePriority,DH=Fo.unstable_UserBlockingPriority,eI=Fo.unstable_NormalPriority,Wae=Fo.unstable_LowPriority,MH=Fo.unstable_IdlePriority,Fx=null,Al=null;function Hae(t){if(Al&&typeof Al.onCommitFiberRoot=="function")try{Al.onCommitFiberRoot(Fx,t,void 0,(t.current.flags&128)===128)}catch{}}var vc=Math.clz32?Math.clz32:Vae,Gae=Math.log,qae=Math.LN2;function Vae(t){return t>>>=0,t===0?32:31-(Gae(t)/qae|0)|0}var N1=64,T1=4194304;function av(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tI(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=av(a):(i&=o,i!==0&&(r=av(i)))}else o=n&~s,o!==0?r=av(o):i!==0&&(r=av(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vc(e),s=1<<n,r|=t[n],e&=~s;return r}function Kae(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yae(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vc(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Kae(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function N2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LH(){var t=N1;return N1<<=1,!(N1&4194240)&&(N1=64),t}function rR(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function bC(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vc(e),t[e]=n}function Qae(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vc(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function X5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vc(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Sn=0;function UH(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $H,eM,BH,FH,jH,T2=!1,R1=[],Uh=null,$h=null,Bh=null,CE=new Map,AE=new Map,qd=[],Jae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oB(t,e){switch(t){case"focusin":case"focusout":Uh=null;break;case"dragenter":case"dragleave":$h=null;break;case"mouseover":case"mouseout":Bh=null;break;case"pointerover":case"pointerout":CE.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":AE.delete(e.pointerId)}}function Ib(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=EC(e),e!==null&&eM(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Zae(t,e,n,r,s){switch(e){case"focusin":return Uh=Ib(Uh,t,e,n,r,s),!0;case"dragenter":return $h=Ib($h,t,e,n,r,s),!0;case"mouseover":return Bh=Ib(Bh,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return CE.set(i,Ib(CE.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,AE.set(i,Ib(AE.get(i)||null,t,e,n,r,s)),!0}return!1}function zH(t){var e=cp(t.target);if(e!==null){var n=Kg(e);if(n!==null){if(e=n.tag,e===13){if(e=RH(n),e!==null){t.blockedOn=e,jH(t.priority,function(){BH(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function WA(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=R2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);A2=r,n.target.dispatchEvent(r),A2=null}else return e=EC(n),e!==null&&eM(e),t.blockedOn=n,!1;e.shift()}return!0}function aB(t,e,n){WA(t)&&n.delete(e)}function Xae(){T2=!1,Uh!==null&&WA(Uh)&&(Uh=null),$h!==null&&WA($h)&&($h=null),Bh!==null&&WA(Bh)&&(Bh=null),CE.forEach(aB),AE.forEach(aB)}function xb(t,e){t.blockedOn===e&&(t.blockedOn=null,T2||(T2=!0,Fo.unstable_scheduleCallback(Fo.unstable_NormalPriority,Xae)))}function SE(t){function e(s){return xb(s,t)}if(0<R1.length){xb(R1[0],t);for(var n=1;n<R1.length;n++){var r=R1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Uh!==null&&xb(Uh,t),$h!==null&&xb($h,t),Bh!==null&&xb(Bh,t),CE.forEach(e),AE.forEach(e),n=0;n<qd.length;n++)r=qd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qd.length&&(n=qd[0],n.blockedOn===null);)zH(n),n.blockedOn===null&&qd.shift()}var Dy=od.ReactCurrentBatchConfig,nI=!0;function ece(t,e,n,r){var s=Sn,i=Dy.transition;Dy.transition=null;try{Sn=1,tM(t,e,n,r)}finally{Sn=s,Dy.transition=i}}function tce(t,e,n,r){var s=Sn,i=Dy.transition;Dy.transition=null;try{Sn=4,tM(t,e,n,r)}finally{Sn=s,Dy.transition=i}}function tM(t,e,n,r){if(nI){var s=R2(t,e,n,r);if(s===null)fR(t,e,r,rI,n),oB(t,r);else if(Zae(s,t,e,n,r))r.stopPropagation();else if(oB(t,r),e&4&&-1<Jae.indexOf(t)){for(;s!==null;){var i=EC(s);if(i!==null&&$H(i),i=R2(t,e,n,r),i===null&&fR(t,e,r,rI,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else fR(t,e,r,null,n)}}var rI=null;function R2(t,e,n,r){if(rI=null,t=J5(r),t=cp(t),t!==null)if(e=Kg(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RH(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rI=t,null}function WH(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zae()){case Z5:return 1;case DH:return 4;case eI:case Wae:return 16;case MH:return 536870912;default:return 16}default:return 16}}var Ah=null,nM=null,HA=null;function HH(){if(HA)return HA;var t,e=nM,n=e.length,r,s="value"in Ah?Ah.value:Ah.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return HA=s.slice(t,1<r?1-r:void 0)}function GA(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function P1(){return!0}function cB(){return!1}function Ho(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?P1:cB,this.isPropagationStopped=cB,this}return fr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=P1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=P1)},persist:function(){},isPersistent:P1}),e}var W0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rM=Ho(W0),vC=fr({},W0,{view:0,detail:0}),nce=Ho(vC),sR,iR,Nb,jx=fr({},vC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nb&&(Nb&&t.type==="mousemove"?(sR=t.screenX-Nb.screenX,iR=t.screenY-Nb.screenY):iR=sR=0,Nb=t),sR)},movementY:function(t){return"movementY"in t?t.movementY:iR}}),lB=Ho(jx),rce=fr({},jx,{dataTransfer:0}),sce=Ho(rce),ice=fr({},vC,{relatedTarget:0}),oR=Ho(ice),oce=fr({},W0,{animationName:0,elapsedTime:0,pseudoElement:0}),ace=Ho(oce),cce=fr({},W0,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lce=Ho(cce),uce=fr({},W0,{data:0}),uB=Ho(uce),dce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pce(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fce[t])?!!e[t]:!1}function sM(){return pce}var gce=fr({},vC,{key:function(t){if(t.key){var e=dce[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=GA(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hce[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sM,charCode:function(t){return t.type==="keypress"?GA(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?GA(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mce=Ho(gce),yce=fr({},jx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dB=Ho(yce),wce=fr({},vC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sM}),bce=Ho(wce),vce=fr({},W0,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ece=Ho(vce),_ce=fr({},jx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cce=Ho(_ce),Ace=[9,13,27,32],iM=Ku&&"CompositionEvent"in window,Lv=null;Ku&&"documentMode"in document&&(Lv=document.documentMode);var Sce=Ku&&"TextEvent"in window&&!Lv,GH=Ku&&(!iM||Lv&&8<Lv&&11>=Lv),hB=" ",fB=!1;function qH(t,e){switch(t){case"keyup":return Ace.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VH(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cy=!1;function Ice(t,e){switch(t){case"compositionend":return VH(e);case"keypress":return e.which!==32?null:(fB=!0,hB);case"textInput":return t=e.data,t===hB&&fB?null:t;default:return null}}function xce(t,e){if(cy)return t==="compositionend"||!iM&&qH(t,e)?(t=HH(),HA=nM=Ah=null,cy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return GH&&e.locale!=="ko"?null:e.data;default:return null}}var Nce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pB(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Nce[t.type]:e==="textarea"}function KH(t,e,n,r){SH(r),e=sI(e,"onChange"),0<e.length&&(n=new rM("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Uv=null,IE=null;function Tce(t){iG(t,0)}function zx(t){var e=dy(t);if(wH(e))return t}function Rce(t,e){if(t==="change")return e}var YH=!1;if(Ku){var aR;if(Ku){var cR="oninput"in document;if(!cR){var gB=document.createElement("div");gB.setAttribute("oninput","return;"),cR=typeof gB.oninput=="function"}aR=cR}else aR=!1;YH=aR&&(!document.documentMode||9<document.documentMode)}function mB(){Uv&&(Uv.detachEvent("onpropertychange",QH),IE=Uv=null)}function QH(t){if(t.propertyName==="value"&&zx(IE)){var e=[];KH(e,IE,t,J5(t)),TH(Tce,e)}}function Pce(t,e,n){t==="focusin"?(mB(),Uv=e,IE=n,Uv.attachEvent("onpropertychange",QH)):t==="focusout"&&mB()}function Oce(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zx(IE)}function kce(t,e){if(t==="click")return zx(e)}function Dce(t,e){if(t==="input"||t==="change")return zx(e)}function Mce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ac=typeof Object.is=="function"?Object.is:Mce;function xE(t,e){if(Ac(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!h2.call(e,s)||!Ac(t[s],e[s]))return!1}return!0}function yB(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wB(t,e){var n=yB(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yB(n)}}function JH(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JH(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZH(){for(var t=window,e=JS();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=JS(t.document)}return e}function oM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Lce(t){var e=ZH(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&JH(n.ownerDocument.documentElement,n)){if(r!==null&&oM(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=wB(n,i);var o=wB(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Uce=Ku&&"documentMode"in document&&11>=document.documentMode,ly=null,P2=null,$v=null,O2=!1;function bB(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;O2||ly==null||ly!==JS(r)||(r=ly,"selectionStart"in r&&oM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$v&&xE($v,r)||($v=r,r=sI(P2,"onSelect"),0<r.length&&(e=new rM("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ly)))}function O1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var uy={animationend:O1("Animation","AnimationEnd"),animationiteration:O1("Animation","AnimationIteration"),animationstart:O1("Animation","AnimationStart"),transitionend:O1("Transition","TransitionEnd")},lR={},XH={};Ku&&(XH=document.createElement("div").style,"AnimationEvent"in window||(delete uy.animationend.animation,delete uy.animationiteration.animation,delete uy.animationstart.animation),"TransitionEvent"in window||delete uy.transitionend.transition);function Wx(t){if(lR[t])return lR[t];if(!uy[t])return t;var e=uy[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in XH)return lR[t]=e[n];return t}var eG=Wx("animationend"),tG=Wx("animationiteration"),nG=Wx("animationstart"),rG=Wx("transitionend"),sG=new Map,vB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vf(t,e){sG.set(t,e),Vg(e,[t])}for(var uR=0;uR<vB.length;uR++){var dR=vB[uR],$ce=dR.toLowerCase(),Bce=dR[0].toUpperCase()+dR.slice(1);vf($ce,"on"+Bce)}vf(eG,"onAnimationEnd");vf(tG,"onAnimationIteration");vf(nG,"onAnimationStart");vf("dblclick","onDoubleClick");vf("focusin","onFocus");vf("focusout","onBlur");vf(rG,"onTransitionEnd");Qw("onMouseEnter",["mouseout","mouseover"]);Qw("onMouseLeave",["mouseout","mouseover"]);Qw("onPointerEnter",["pointerout","pointerover"]);Qw("onPointerLeave",["pointerout","pointerover"]);Vg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vg("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fce=new Set("cancel close invalid load scroll toggle".split(" ").concat(cv));function EB(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$ae(r,e,void 0,t),t.currentTarget=null}function iG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;EB(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;EB(s,a,l),i=c}}}if(XS)throw t=x2,XS=!1,x2=null,t}function Qn(t,e){var n=e[U2];n===void 0&&(n=e[U2]=new Set);var r=t+"__bubble";n.has(r)||(oG(e,t,2,!1),n.add(r))}function hR(t,e,n){var r=0;e&&(r|=4),oG(n,t,r,e)}var k1="_reactListening"+Math.random().toString(36).slice(2);function NE(t){if(!t[k1]){t[k1]=!0,fH.forEach(function(n){n!=="selectionchange"&&(Fce.has(n)||hR(n,!1,t),hR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[k1]||(e[k1]=!0,hR("selectionchange",!1,e))}}function oG(t,e,n,r){switch(WH(e)){case 1:var s=ece;break;case 4:s=tce;break;default:s=tM}n=s.bind(null,e,n,t),s=void 0,!I2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function fR(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=cp(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}TH(function(){var l=i,u=J5(n),d=[];e:{var h=sG.get(t);if(h!==void 0){var f=rM,p=t;switch(t){case"keypress":if(GA(n)===0)break e;case"keydown":case"keyup":f=mce;break;case"focusin":p="focus",f=oR;break;case"focusout":p="blur",f=oR;break;case"beforeblur":case"afterblur":f=oR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=lB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=sce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=bce;break;case eG:case tG:case nG:f=ace;break;case rG:f=Ece;break;case"scroll":f=nce;break;case"wheel":f=Cce;break;case"copy":case"cut":case"paste":f=lce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=dB}var g=(e&4)!==0,y=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,m!==null&&(A=_E(b,m),A!=null&&g.push(TE(b,A,v)))),y)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==A2&&(p=n.relatedTarget||n.fromElement)&&(cp(p)||p[Yu]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?cp(p):null,p!==null&&(y=Kg(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=lB,A="onMouseLeave",m="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=dB,A="onPointerLeave",m="onPointerEnter",b="pointer"),y=f==null?h:dy(f),v=p==null?h:dy(p),h=new g(A,b+"leave",f,n,u),h.target=y,h.relatedTarget=v,A=null,cp(u)===l&&(g=new g(m,b+"enter",p,n,u),g.target=v,g.relatedTarget=y,A=g),y=A,f&&p)t:{for(g=f,m=p,b=0,v=g;v;v=bm(v))b++;for(v=0,A=m;A;A=bm(A))v++;for(;0<b-v;)g=bm(g),b--;for(;0<v-b;)m=bm(m),v--;for(;b--;){if(g===m||m!==null&&g===m.alternate)break t;g=bm(g),m=bm(m)}g=null}else g=null;f!==null&&_B(d,h,f,g,!1),p!==null&&y!==null&&_B(d,y,p,g,!0)}}e:{if(h=l?dy(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=Rce;else if(pB(h))if(YH)C=Dce;else{C=Oce;var S=Pce}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=kce);if(C&&(C=C(t,l))){KH(d,C,n,u);break e}S&&S(t,h,l),t==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&b2(h,"number",h.value)}switch(S=l?dy(l):window,t){case"focusin":(pB(S)||S.contentEditable==="true")&&(ly=S,P2=l,$v=null);break;case"focusout":$v=P2=ly=null;break;case"mousedown":O2=!0;break;case"contextmenu":case"mouseup":case"dragend":O2=!1,bB(d,n,u);break;case"selectionchange":if(Uce)break;case"keydown":case"keyup":bB(d,n,u)}var x;if(iM)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else cy?qH(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(GH&&n.locale!=="ko"&&(cy||T!=="onCompositionStart"?T==="onCompositionEnd"&&cy&&(x=HH()):(Ah=u,nM="value"in Ah?Ah.value:Ah.textContent,cy=!0)),S=sI(l,T),0<S.length&&(T=new uB(T,t,null,n,u),d.push({event:T,listeners:S}),x?T.data=x:(x=VH(n),x!==null&&(T.data=x)))),(x=Sce?Ice(t,n):xce(t,n))&&(l=sI(l,"onBeforeInput"),0<l.length&&(u=new uB("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}iG(d,e)})}function TE(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sI(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_E(t,n),i!=null&&r.unshift(TE(t,i,s)),i=_E(t,e),i!=null&&r.push(TE(t,i,s))),t=t.return}return r}function bm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _B(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=_E(n,i),c!=null&&o.unshift(TE(n,c,a))):s||(c=_E(n,i),c!=null&&o.push(TE(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jce=/\r\n?/g,zce=/\u0000|\uFFFD/g;function CB(t){return(typeof t=="string"?t:""+t).replace(jce,`
`).replace(zce,"")}function D1(t,e,n){if(e=CB(e),CB(t)!==e&&n)throw Error(Se(425))}function iI(){}var k2=null,D2=null;function M2(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var L2=typeof setTimeout=="function"?setTimeout:void 0,Wce=typeof clearTimeout=="function"?clearTimeout:void 0,AB=typeof Promise=="function"?Promise:void 0,Hce=typeof queueMicrotask=="function"?queueMicrotask:typeof AB<"u"?function(t){return AB.resolve(null).then(t).catch(Gce)}:L2;function Gce(t){setTimeout(function(){throw t})}function pR(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),SE(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);SE(e)}function Fh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function SB(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var H0=Math.random().toString(36).slice(2),ml="__reactFiber$"+H0,RE="__reactProps$"+H0,Yu="__reactContainer$"+H0,U2="__reactEvents$"+H0,qce="__reactListeners$"+H0,Vce="__reactHandles$"+H0;function cp(t){var e=t[ml];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yu]||n[ml]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=SB(t);t!==null;){if(n=t[ml])return n;t=SB(t)}return e}t=n,n=t.parentNode}return null}function EC(t){return t=t[ml]||t[Yu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function dy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Se(33))}function Hx(t){return t[RE]||null}var $2=[],hy=-1;function Ef(t){return{current:t}}function Xn(t){0>hy||(t.current=$2[hy],$2[hy]=null,hy--)}function Vn(t,e){hy++,$2[hy]=t.current,t.current=e}var cf={},Qs=Ef(cf),Xi=Ef(!1),fg=cf;function Jw(t,e){var n=t.type.contextTypes;if(!n)return cf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function eo(t){return t=t.childContextTypes,t!=null}function oI(){Xn(Xi),Xn(Qs)}function IB(t,e,n){if(Qs.current!==cf)throw Error(Se(168));Vn(Qs,e),Vn(Xi,n)}function aG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Se(108,Pae(t)||"Unknown",s));return fr({},n,r)}function aI(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cf,fg=Qs.current,Vn(Qs,t),Vn(Xi,Xi.current),!0}function xB(t,e,n){var r=t.stateNode;if(!r)throw Error(Se(169));n?(t=aG(t,e,fg),r.__reactInternalMemoizedMergedChildContext=t,Xn(Xi),Xn(Qs),Vn(Qs,t)):Xn(Xi),Vn(Xi,n)}var uu=null,Gx=!1,gR=!1;function cG(t){uu===null?uu=[t]:uu.push(t)}function Kce(t){Gx=!0,cG(t)}function _f(){if(!gR&&uu!==null){gR=!0;var t=0,e=Sn;try{var n=uu;for(Sn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}uu=null,Gx=!1}catch(s){throw uu!==null&&(uu=uu.slice(t+1)),kH(Z5,_f),s}finally{Sn=e,gR=!1}}return null}var fy=[],py=0,cI=null,lI=0,ba=[],va=0,pg=null,Pu=1,Ou="";function zf(t,e){fy[py++]=lI,fy[py++]=cI,cI=t,lI=e}function lG(t,e,n){ba[va++]=Pu,ba[va++]=Ou,ba[va++]=pg,pg=t;var r=Pu;t=Ou;var s=32-vc(r)-1;r&=~(1<<s),n+=1;var i=32-vc(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pu=1<<32-vc(e)+s|n<<s|r,Ou=i+t}else Pu=1<<i|n<<s|r,Ou=t}function aM(t){t.return!==null&&(zf(t,1),lG(t,1,0))}function cM(t){for(;t===cI;)cI=fy[--py],fy[py]=null,lI=fy[--py],fy[py]=null;for(;t===pg;)pg=ba[--va],ba[va]=null,Ou=ba[--va],ba[va]=null,Pu=ba[--va],ba[va]=null}var Uo=null,Do=null,ir=!1,ac=null;function uG(t,e){var n=Ea(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function NB(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Uo=t,Do=Fh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Uo=t,Do=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pg!==null?{id:Pu,overflow:Ou}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ea(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Uo=t,Do=null,!0):!1;default:return!1}}function B2(t){return(t.mode&1)!==0&&(t.flags&128)===0}function F2(t){if(ir){var e=Do;if(e){var n=e;if(!NB(t,e)){if(B2(t))throw Error(Se(418));e=Fh(n.nextSibling);var r=Uo;e&&NB(t,e)?uG(r,n):(t.flags=t.flags&-4097|2,ir=!1,Uo=t)}}else{if(B2(t))throw Error(Se(418));t.flags=t.flags&-4097|2,ir=!1,Uo=t}}}function TB(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Uo=t}function M1(t){if(t!==Uo)return!1;if(!ir)return TB(t),ir=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!M2(t.type,t.memoizedProps)),e&&(e=Do)){if(B2(t))throw dG(),Error(Se(418));for(;e;)uG(t,e),e=Fh(e.nextSibling)}if(TB(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Do=Fh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Do=null}}else Do=Uo?Fh(t.stateNode.nextSibling):null;return!0}function dG(){for(var t=Do;t;)t=Fh(t.nextSibling)}function Zw(){Do=Uo=null,ir=!1}function lM(t){ac===null?ac=[t]:ac.push(t)}var Yce=od.ReactCurrentBatchConfig;function Tb(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Se(309));var r=n.stateNode}if(!r)throw Error(Se(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Se(284));if(!n._owner)throw Error(Se(290,t))}return t}function L1(t,e){throw t=Object.prototype.toString.call(e),Error(Se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function RB(t){var e=t._init;return e(t._payload)}function hG(t){function e(m,b){if(t){var v=m.deletions;v===null?(m.deletions=[b],m.flags|=16):v.push(b)}}function n(m,b){if(!t)return null;for(;b!==null;)e(m,b),b=b.sibling;return null}function r(m,b){for(m=new Map;b!==null;)b.key!==null?m.set(b.key,b):m.set(b.index,b),b=b.sibling;return m}function s(m,b){return m=Hh(m,b),m.index=0,m.sibling=null,m}function i(m,b,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<b?(m.flags|=2,b):v):(m.flags|=2,b)):(m.flags|=1048576,b)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,b,v,A){return b===null||b.tag!==6?(b=_R(v,m.mode,A),b.return=m,b):(b=s(b,v),b.return=m,b)}function c(m,b,v,A){var C=v.type;return C===ay?u(m,b,v.props.children,A,v.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fd&&RB(C)===b.type)?(A=s(b,v.props),A.ref=Tb(m,b,v),A.return=m,A):(A=ZA(v.type,v.key,v.props,null,m.mode,A),A.ref=Tb(m,b,v),A.return=m,A)}function l(m,b,v,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=CR(v,m.mode,A),b.return=m,b):(b=s(b,v.children||[]),b.return=m,b)}function u(m,b,v,A,C){return b===null||b.tag!==7?(b=Xp(v,m.mode,A,C),b.return=m,b):(b=s(b,v),b.return=m,b)}function d(m,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=_R(""+b,m.mode,v),b.return=m,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case S1:return v=ZA(b.type,b.key,b.props,null,m.mode,v),v.ref=Tb(m,null,b),v.return=m,v;case oy:return b=CR(b,m.mode,v),b.return=m,b;case Fd:var A=b._init;return d(m,A(b._payload),v)}if(ov(b)||Ab(b))return b=Xp(b,m.mode,v,null),b.return=m,b;L1(m,b)}return null}function h(m,b,v,A){var C=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(m,b,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case S1:return v.key===C?c(m,b,v,A):null;case oy:return v.key===C?l(m,b,v,A):null;case Fd:return C=v._init,h(m,b,C(v._payload),A)}if(ov(v)||Ab(v))return C!==null?null:u(m,b,v,A,null);L1(m,v)}return null}function f(m,b,v,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return m=m.get(v)||null,a(b,m,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case S1:return m=m.get(A.key===null?v:A.key)||null,c(b,m,A,C);case oy:return m=m.get(A.key===null?v:A.key)||null,l(b,m,A,C);case Fd:var S=A._init;return f(m,b,v,S(A._payload),C)}if(ov(A)||Ab(A))return m=m.get(v)||null,u(b,m,A,C,null);L1(b,A)}return null}function p(m,b,v,A){for(var C=null,S=null,x=b,T=b=0,I=null;x!==null&&T<v.length;T++){x.index>T?(I=x,x=null):I=x.sibling;var k=h(m,x,v[T],A);if(k===null){x===null&&(x=I);break}t&&x&&k.alternate===null&&e(m,x),b=i(k,b,T),S===null?C=k:S.sibling=k,S=k,x=I}if(T===v.length)return n(m,x),ir&&zf(m,T),C;if(x===null){for(;T<v.length;T++)x=d(m,v[T],A),x!==null&&(b=i(x,b,T),S===null?C=x:S.sibling=x,S=x);return ir&&zf(m,T),C}for(x=r(m,x);T<v.length;T++)I=f(x,m,T,v[T],A),I!==null&&(t&&I.alternate!==null&&x.delete(I.key===null?T:I.key),b=i(I,b,T),S===null?C=I:S.sibling=I,S=I);return t&&x.forEach(function(O){return e(m,O)}),ir&&zf(m,T),C}function g(m,b,v,A){var C=Ab(v);if(typeof C!="function")throw Error(Se(150));if(v=C.call(v),v==null)throw Error(Se(151));for(var S=C=null,x=b,T=b=0,I=null,k=v.next();x!==null&&!k.done;T++,k=v.next()){x.index>T?(I=x,x=null):I=x.sibling;var O=h(m,x,k.value,A);if(O===null){x===null&&(x=I);break}t&&x&&O.alternate===null&&e(m,x),b=i(O,b,T),S===null?C=O:S.sibling=O,S=O,x=I}if(k.done)return n(m,x),ir&&zf(m,T),C;if(x===null){for(;!k.done;T++,k=v.next())k=d(m,k.value,A),k!==null&&(b=i(k,b,T),S===null?C=k:S.sibling=k,S=k);return ir&&zf(m,T),C}for(x=r(m,x);!k.done;T++,k=v.next())k=f(x,m,T,k.value,A),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?T:k.key),b=i(k,b,T),S===null?C=k:S.sibling=k,S=k);return t&&x.forEach(function(B){return e(m,B)}),ir&&zf(m,T),C}function y(m,b,v,A){if(typeof v=="object"&&v!==null&&v.type===ay&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case S1:e:{for(var C=v.key,S=b;S!==null;){if(S.key===C){if(C=v.type,C===ay){if(S.tag===7){n(m,S.sibling),b=s(S,v.props.children),b.return=m,m=b;break e}}else if(S.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fd&&RB(C)===S.type){n(m,S.sibling),b=s(S,v.props),b.ref=Tb(m,S,v),b.return=m,m=b;break e}n(m,S);break}else e(m,S);S=S.sibling}v.type===ay?(b=Xp(v.props.children,m.mode,A,v.key),b.return=m,m=b):(A=ZA(v.type,v.key,v.props,null,m.mode,A),A.ref=Tb(m,b,v),A.return=m,m=A)}return o(m);case oy:e:{for(S=v.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(m,b.sibling),b=s(b,v.children||[]),b.return=m,m=b;break e}else{n(m,b);break}else e(m,b);b=b.sibling}b=CR(v,m.mode,A),b.return=m,m=b}return o(m);case Fd:return S=v._init,y(m,b,S(v._payload),A)}if(ov(v))return p(m,b,v,A);if(Ab(v))return g(m,b,v,A);L1(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(m,b.sibling),b=s(b,v),b.return=m,m=b):(n(m,b),b=_R(v,m.mode,A),b.return=m,m=b),o(m)):n(m,b)}return y}var Xw=hG(!0),fG=hG(!1),uI=Ef(null),dI=null,gy=null,uM=null;function dM(){uM=gy=dI=null}function hM(t){var e=uI.current;Xn(uI),t._currentValue=e}function j2(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function My(t,e){dI=t,uM=gy=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qi=!0),t.firstContext=null)}function Aa(t){var e=t._currentValue;if(uM!==t)if(t={context:t,memoizedValue:e,next:null},gy===null){if(dI===null)throw Error(Se(308));gy=t,dI.dependencies={lanes:0,firstContext:t}}else gy=gy.next=t;return e}var lp=null;function fM(t){lp===null?lp=[t]:lp.push(t)}function pG(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,fM(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qu(t,r)}function Qu(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jd=!1;function pM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Uu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,nn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qu(t,n)}return s=r.interleaved,s===null?(e.next=e,fM(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qu(t,n)}function qA(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,X5(t,n)}}function PB(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hI(t,e,n,r){var s=t.updateQueue;jd=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=fr({},d,h);break e;case 2:jd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);mg|=o,t.lanes=o,t.memoizedState=d}}function OB(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Se(191,s));s.call(r)}}}var _C={},Sl=Ef(_C),PE=Ef(_C),OE=Ef(_C);function up(t){if(t===_C)throw Error(Se(174));return t}function gM(t,e){switch(Vn(OE,e),Vn(PE,t),Vn(Sl,_C),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:E2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=E2(e,t)}Xn(Sl),Vn(Sl,e)}function e0(){Xn(Sl),Xn(PE),Xn(OE)}function mG(t){up(OE.current);var e=up(Sl.current),n=E2(e,t.type);e!==n&&(Vn(PE,t),Vn(Sl,n))}function mM(t){PE.current===t&&(Xn(Sl),Xn(PE))}var cr=Ef(0);function fI(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mR=[];function yM(){for(var t=0;t<mR.length;t++)mR[t]._workInProgressVersionPrimary=null;mR.length=0}var VA=od.ReactCurrentDispatcher,yR=od.ReactCurrentBatchConfig,gg=0,hr=null,jr=null,ss=null,pI=!1,Bv=!1,kE=0,Qce=0;function $s(){throw Error(Se(321))}function wM(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ac(t[n],e[n]))return!1;return!0}function bM(t,e,n,r,s,i){if(gg=i,hr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,VA.current=t===null||t.memoizedState===null?ele:tle,t=n(r,s),Bv){i=0;do{if(Bv=!1,kE=0,25<=i)throw Error(Se(301));i+=1,ss=jr=null,e.updateQueue=null,VA.current=nle,t=n(r,s)}while(Bv)}if(VA.current=gI,e=jr!==null&&jr.next!==null,gg=0,ss=jr=hr=null,pI=!1,e)throw Error(Se(300));return t}function vM(){var t=kE!==0;return kE=0,t}function Kc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ss===null?hr.memoizedState=ss=t:ss=ss.next=t,ss}function Sa(){if(jr===null){var t=hr.alternate;t=t!==null?t.memoizedState:null}else t=jr.next;var e=ss===null?hr.memoizedState:ss.next;if(e!==null)ss=e,jr=t;else{if(t===null)throw Error(Se(310));jr=t,t={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},ss===null?hr.memoizedState=ss=t:ss=ss.next=t}return ss}function DE(t,e){return typeof e=="function"?e(t):e}function wR(t){var e=Sa(),n=e.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=t;var r=jr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((gg&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,hr.lanes|=u,mg|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Ac(r,e.memoizedState)||(Qi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,hr.lanes|=i,mg|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bR(t){var e=Sa(),n=e.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Ac(i,e.memoizedState)||(Qi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function yG(){}function wG(t,e){var n=hr,r=Sa(),s=e(),i=!Ac(r.memoizedState,s);if(i&&(r.memoizedState=s,Qi=!0),r=r.queue,EM(EG.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ss!==null&&ss.memoizedState.tag&1){if(n.flags|=2048,ME(9,vG.bind(null,n,r,s,e),void 0,null),fs===null)throw Error(Se(349));gg&30||bG(n,e,s)}return s}function bG(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vG(t,e,n,r){e.value=n,e.getSnapshot=r,_G(e)&&CG(t)}function EG(t,e,n){return n(function(){_G(e)&&CG(t)})}function _G(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ac(t,n)}catch{return!0}}function CG(t){var e=Qu(t,1);e!==null&&Ec(e,t,1,-1)}function kB(t){var e=Kc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:DE,lastRenderedState:t},e.queue=t,t=t.dispatch=Xce.bind(null,hr,t),[e.memoizedState,t]}function ME(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=hr.updateQueue,e===null?(e={lastEffect:null,stores:null},hr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function AG(){return Sa().memoizedState}function KA(t,e,n,r){var s=Kc();hr.flags|=t,s.memoizedState=ME(1|e,n,void 0,r===void 0?null:r)}function qx(t,e,n,r){var s=Sa();r=r===void 0?null:r;var i=void 0;if(jr!==null){var o=jr.memoizedState;if(i=o.destroy,r!==null&&wM(r,o.deps)){s.memoizedState=ME(e,n,i,r);return}}hr.flags|=t,s.memoizedState=ME(1|e,n,i,r)}function DB(t,e){return KA(8390656,8,t,e)}function EM(t,e){return qx(2048,8,t,e)}function SG(t,e){return qx(4,2,t,e)}function IG(t,e){return qx(4,4,t,e)}function xG(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NG(t,e,n){return n=n!=null?n.concat([t]):null,qx(4,4,xG.bind(null,e,t),n)}function _M(){}function TG(t,e){var n=Sa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wM(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function RG(t,e){var n=Sa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wM(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function PG(t,e,n){return gg&21?(Ac(n,e)||(n=LH(),hr.lanes|=n,mg|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qi=!0),t.memoizedState=n)}function Jce(t,e){var n=Sn;Sn=n!==0&&4>n?n:4,t(!0);var r=yR.transition;yR.transition={};try{t(!1),e()}finally{Sn=n,yR.transition=r}}function OG(){return Sa().memoizedState}function Zce(t,e,n){var r=Wh(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},kG(t))DG(e,n);else if(n=pG(t,e,n,r),n!==null){var s=wi();Ec(n,t,r,s),MG(n,e,r)}}function Xce(t,e,n){var r=Wh(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(kG(t))DG(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ac(a,o)){var c=e.interleaved;c===null?(s.next=s,fM(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=pG(t,e,s,r),n!==null&&(s=wi(),Ec(n,t,r,s),MG(n,e,r))}}function kG(t){var e=t.alternate;return t===hr||e!==null&&e===hr}function DG(t,e){Bv=pI=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MG(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,X5(t,n)}}var gI={readContext:Aa,useCallback:$s,useContext:$s,useEffect:$s,useImperativeHandle:$s,useInsertionEffect:$s,useLayoutEffect:$s,useMemo:$s,useReducer:$s,useRef:$s,useState:$s,useDebugValue:$s,useDeferredValue:$s,useTransition:$s,useMutableSource:$s,useSyncExternalStore:$s,useId:$s,unstable_isNewReconciler:!1},ele={readContext:Aa,useCallback:function(t,e){return Kc().memoizedState=[t,e===void 0?null:e],t},useContext:Aa,useEffect:DB,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,KA(4194308,4,xG.bind(null,e,t),n)},useLayoutEffect:function(t,e){return KA(4194308,4,t,e)},useInsertionEffect:function(t,e){return KA(4,2,t,e)},useMemo:function(t,e){var n=Kc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Kc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Zce.bind(null,hr,t),[r.memoizedState,t]},useRef:function(t){var e=Kc();return t={current:t},e.memoizedState=t},useState:kB,useDebugValue:_M,useDeferredValue:function(t){return Kc().memoizedState=t},useTransition:function(){var t=kB(!1),e=t[0];return t=Jce.bind(null,t[1]),Kc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=hr,s=Kc();if(ir){if(n===void 0)throw Error(Se(407));n=n()}else{if(n=e(),fs===null)throw Error(Se(349));gg&30||bG(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,DB(EG.bind(null,r,i,t),[t]),r.flags|=2048,ME(9,vG.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Kc(),e=fs.identifierPrefix;if(ir){var n=Ou,r=Pu;n=(r&~(1<<32-vc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=kE++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Qce++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tle={readContext:Aa,useCallback:TG,useContext:Aa,useEffect:EM,useImperativeHandle:NG,useInsertionEffect:SG,useLayoutEffect:IG,useMemo:RG,useReducer:wR,useRef:AG,useState:function(){return wR(DE)},useDebugValue:_M,useDeferredValue:function(t){var e=Sa();return PG(e,jr.memoizedState,t)},useTransition:function(){var t=wR(DE)[0],e=Sa().memoizedState;return[t,e]},useMutableSource:yG,useSyncExternalStore:wG,useId:OG,unstable_isNewReconciler:!1},nle={readContext:Aa,useCallback:TG,useContext:Aa,useEffect:EM,useImperativeHandle:NG,useInsertionEffect:SG,useLayoutEffect:IG,useMemo:RG,useReducer:bR,useRef:AG,useState:function(){return bR(DE)},useDebugValue:_M,useDeferredValue:function(t){var e=Sa();return jr===null?e.memoizedState=t:PG(e,jr.memoizedState,t)},useTransition:function(){var t=bR(DE)[0],e=Sa().memoizedState;return[t,e]},useMutableSource:yG,useSyncExternalStore:wG,useId:OG,unstable_isNewReconciler:!1};function Qa(t,e){if(t&&t.defaultProps){e=fr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function z2(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:fr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vx={isMounted:function(t){return(t=t._reactInternals)?Kg(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wi(),s=Wh(t),i=Uu(r,s);i.payload=e,n!=null&&(i.callback=n),e=jh(t,i,s),e!==null&&(Ec(e,t,s,r),qA(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wi(),s=Wh(t),i=Uu(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=jh(t,i,s),e!==null&&(Ec(e,t,s,r),qA(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wi(),r=Wh(t),s=Uu(n,r);s.tag=2,e!=null&&(s.callback=e),e=jh(t,s,r),e!==null&&(Ec(e,t,r,n),qA(e,t,r))}};function MB(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!xE(n,r)||!xE(s,i):!0}function LG(t,e,n){var r=!1,s=cf,i=e.contextType;return typeof i=="object"&&i!==null?i=Aa(i):(s=eo(e)?fg:Qs.current,r=e.contextTypes,i=(r=r!=null)?Jw(t,s):cf),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function LB(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vx.enqueueReplaceState(e,e.state,null)}function W2(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},pM(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Aa(i):(i=eo(e)?fg:Qs.current,s.context=Jw(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(z2(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Vx.enqueueReplaceState(s,s.state,null),hI(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function t0(t,e){try{var n="",r=e;do n+=Rae(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function vR(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function H2(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rle=typeof WeakMap=="function"?WeakMap:Map;function UG(t,e,n){n=Uu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yI||(yI=!0,ek=r),H2(t,e)},n}function $G(t,e,n){n=Uu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){H2(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){H2(t,e),typeof r!="function"&&(zh===null?zh=new Set([this]):zh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function UB(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rle;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=yle.bind(null,t,e,n),e.then(t,t))}function $B(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function BB(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Uu(-1,1),e.tag=2,jh(n,e,1))),n.lanes|=1),t)}var sle=od.ReactCurrentOwner,Qi=!1;function ai(t,e,n,r){e.child=t===null?fG(e,null,n,r):Xw(e,t.child,n,r)}function FB(t,e,n,r,s){n=n.render;var i=e.ref;return My(e,s),r=bM(t,e,n,r,i,s),n=vM(),t!==null&&!Qi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ju(t,e,s)):(ir&&n&&aM(e),e.flags|=1,ai(t,e,r,s),e.child)}function jB(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!RM(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,BG(t,e,i,r,s)):(t=ZA(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:xE,n(o,r)&&t.ref===e.ref)return Ju(t,e,s)}return e.flags|=1,t=Hh(i,r),t.ref=e.ref,t.return=e,e.child=t}function BG(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(xE(i,r)&&t.ref===e.ref)if(Qi=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Qi=!0);else return e.lanes=t.lanes,Ju(t,e,s)}return G2(t,e,n,r,s)}function FG(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vn(yy,To),To|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Vn(yy,To),To|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Vn(yy,To),To|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Vn(yy,To),To|=r;return ai(t,e,s,n),e.child}function jG(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function G2(t,e,n,r,s){var i=eo(n)?fg:Qs.current;return i=Jw(e,i),My(e,s),n=bM(t,e,n,r,i,s),r=vM(),t!==null&&!Qi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ju(t,e,s)):(ir&&r&&aM(e),e.flags|=1,ai(t,e,n,s),e.child)}function zB(t,e,n,r,s){if(eo(n)){var i=!0;aI(e)}else i=!1;if(My(e,s),e.stateNode===null)YA(t,e),LG(e,n,r),W2(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Aa(l):(l=eo(n)?fg:Qs.current,l=Jw(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&LB(e,o,r,l),jd=!1;var h=e.memoizedState;o.state=h,hI(e,r,o,s),c=e.memoizedState,a!==r||h!==c||Xi.current||jd?(typeof u=="function"&&(z2(e,n,u,r),c=e.memoizedState),(a=jd||MB(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gG(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Qa(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Aa(c):(c=eo(n)?fg:Qs.current,c=Jw(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&LB(e,o,r,c),jd=!1,h=e.memoizedState,o.state=h,hI(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||Xi.current||jd?(typeof f=="function"&&(z2(e,n,f,r),p=e.memoizedState),(l=jd||MB(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return q2(t,e,n,r,i,s)}function q2(t,e,n,r,s,i){jG(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&xB(e,n,!1),Ju(t,e,i);r=e.stateNode,sle.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xw(e,t.child,null,i),e.child=Xw(e,null,a,i)):ai(t,e,a,i),e.memoizedState=r.state,s&&xB(e,n,!0),e.child}function zG(t){var e=t.stateNode;e.pendingContext?IB(t,e.pendingContext,e.pendingContext!==e.context):e.context&&IB(t,e.context,!1),gM(t,e.containerInfo)}function WB(t,e,n,r,s){return Zw(),lM(s),e.flags|=256,ai(t,e,n,r),e.child}var V2={dehydrated:null,treeContext:null,retryLane:0};function K2(t){return{baseLanes:t,cachePool:null,transitions:null}}function WG(t,e,n){var r=e.pendingProps,s=cr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Vn(cr,s&1),t===null)return F2(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Qx(o,r,0,null),t=Xp(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=K2(n),e.memoizedState=V2,t):CM(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return ile(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Hh(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Hh(a,i):(i=Xp(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?K2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=V2,r}return i=t.child,t=i.sibling,r=Hh(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function CM(t,e){return e=Qx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function U1(t,e,n,r){return r!==null&&lM(r),Xw(e,t.child,null,n),t=CM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ile(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=vR(Error(Se(422))),U1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Qx({mode:"visible",children:r.children},s,0,null),i=Xp(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Xw(e,t.child,null,o),e.child.memoizedState=K2(o),e.memoizedState=V2,i);if(!(e.mode&1))return U1(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Se(419)),r=vR(i,r,void 0),U1(t,e,o,r)}if(a=(o&t.childLanes)!==0,Qi||a){if(r=fs,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qu(t,s),Ec(r,t,s,-1))}return TM(),r=vR(Error(Se(421))),U1(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=wle.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Do=Fh(s.nextSibling),Uo=e,ir=!0,ac=null,t!==null&&(ba[va++]=Pu,ba[va++]=Ou,ba[va++]=pg,Pu=t.id,Ou=t.overflow,pg=e),e=CM(e,r.children),e.flags|=4096,e)}function HB(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),j2(t.return,e,n)}function ER(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function HG(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ai(t,e,r.children,n),r=cr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&HB(t,n,e);else if(t.tag===19)HB(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Vn(cr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&fI(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ER(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&fI(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ER(e,!0,n,null,i);break;case"together":ER(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function YA(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ju(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mg|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Se(153));if(e.child!==null){for(t=e.child,n=Hh(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hh(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ole(t,e,n){switch(e.tag){case 3:zG(e),Zw();break;case 5:mG(e);break;case 1:eo(e.type)&&aI(e);break;case 4:gM(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Vn(uI,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Vn(cr,cr.current&1),e.flags|=128,null):n&e.child.childLanes?WG(t,e,n):(Vn(cr,cr.current&1),t=Ju(t,e,n),t!==null?t.sibling:null);Vn(cr,cr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return HG(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Vn(cr,cr.current),r)break;return null;case 22:case 23:return e.lanes=0,FG(t,e,n)}return Ju(t,e,n)}var GG,Y2,qG,VG;GG=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Y2=function(){};qG=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,up(Sl.current);var i=null;switch(n){case"input":s=y2(t,s),r=y2(t,r),i=[];break;case"select":s=fr({},s,{value:void 0}),r=fr({},r,{value:void 0}),i=[];break;case"textarea":s=v2(t,s),r=v2(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=iI)}_2(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(vE.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(vE.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Qn("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};VG=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rb(t,e){if(!ir)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Bs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ale(t,e,n){var r=e.pendingProps;switch(cM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bs(e),null;case 1:return eo(e.type)&&oI(),Bs(e),null;case 3:return r=e.stateNode,e0(),Xn(Xi),Xn(Qs),yM(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(M1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ac!==null&&(rk(ac),ac=null))),Y2(t,e),Bs(e),null;case 5:mM(e);var s=up(OE.current);if(n=e.type,t!==null&&e.stateNode!=null)qG(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Se(166));return Bs(e),null}if(t=up(Sl.current),M1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ml]=e,r[RE]=i,t=(e.mode&1)!==0,n){case"dialog":Qn("cancel",r),Qn("close",r);break;case"iframe":case"object":case"embed":Qn("load",r);break;case"video":case"audio":for(s=0;s<cv.length;s++)Qn(cv[s],r);break;case"source":Qn("error",r);break;case"img":case"image":case"link":Qn("error",r),Qn("load",r);break;case"details":Qn("toggle",r);break;case"input":X$(r,i),Qn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Qn("invalid",r);break;case"textarea":tB(r,i),Qn("invalid",r)}_2(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&D1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&D1(r.textContent,a,t),s=["children",""+a]):vE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qn("scroll",r)}switch(n){case"input":I1(r),eB(r,i,!0);break;case"textarea":I1(r),nB(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=iI)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=EH(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ml]=e,t[RE]=r,GG(t,e,!1,!1),e.stateNode=t;e:{switch(o=C2(n,r),n){case"dialog":Qn("cancel",t),Qn("close",t),s=r;break;case"iframe":case"object":case"embed":Qn("load",t),s=r;break;case"video":case"audio":for(s=0;s<cv.length;s++)Qn(cv[s],t);s=r;break;case"source":Qn("error",t),s=r;break;case"img":case"image":case"link":Qn("error",t),Qn("load",t),s=r;break;case"details":Qn("toggle",t),s=r;break;case"input":X$(t,r),s=y2(t,r),Qn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=fr({},r,{value:void 0}),Qn("invalid",t);break;case"textarea":tB(t,r),s=v2(t,r),Qn("invalid",t);break;default:s=r}_2(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?AH(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_H(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&EE(t,c):typeof c=="number"&&EE(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vE.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Qn("scroll",t):c!=null&&V5(t,i,c,o))}switch(n){case"input":I1(t),eB(t,r,!1);break;case"textarea":I1(t),nB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+af(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Py(t,!!r.multiple,i,!1):r.defaultValue!=null&&Py(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=iI)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bs(e),null;case 6:if(t&&e.stateNode!=null)VG(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Se(166));if(n=up(OE.current),up(Sl.current),M1(e)){if(r=e.stateNode,n=e.memoizedProps,r[ml]=e,(i=r.nodeValue!==n)&&(t=Uo,t!==null))switch(t.tag){case 3:D1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&D1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ml]=e,e.stateNode=r}return Bs(e),null;case 13:if(Xn(cr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ir&&Do!==null&&e.mode&1&&!(e.flags&128))dG(),Zw(),e.flags|=98560,i=!1;else if(i=M1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Se(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Se(317));i[ml]=e}else Zw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bs(e),i=!1}else ac!==null&&(rk(ac),ac=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||cr.current&1?qr===0&&(qr=3):TM())),e.updateQueue!==null&&(e.flags|=4),Bs(e),null);case 4:return e0(),Y2(t,e),t===null&&NE(e.stateNode.containerInfo),Bs(e),null;case 10:return hM(e.type._context),Bs(e),null;case 17:return eo(e.type)&&oI(),Bs(e),null;case 19:if(Xn(cr),i=e.memoizedState,i===null)return Bs(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Rb(i,!1);else{if(qr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=fI(t),o!==null){for(e.flags|=128,Rb(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Vn(cr,cr.current&1|2),e.child}t=t.sibling}i.tail!==null&&xr()>n0&&(e.flags|=128,r=!0,Rb(i,!1),e.lanes=4194304)}else{if(!r)if(t=fI(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rb(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ir)return Bs(e),null}else 2*xr()-i.renderingStartTime>n0&&n!==1073741824&&(e.flags|=128,r=!0,Rb(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xr(),e.sibling=null,n=cr.current,Vn(cr,r?n&1|2:n&1),e):(Bs(e),null);case 22:case 23:return NM(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?To&1073741824&&(Bs(e),e.subtreeFlags&6&&(e.flags|=8192)):Bs(e),null;case 24:return null;case 25:return null}throw Error(Se(156,e.tag))}function cle(t,e){switch(cM(e),e.tag){case 1:return eo(e.type)&&oI(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return e0(),Xn(Xi),Xn(Qs),yM(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mM(e),null;case 13:if(Xn(cr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Se(340));Zw()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xn(cr),null;case 4:return e0(),null;case 10:return hM(e.type._context),null;case 22:case 23:return NM(),null;case 24:return null;default:return null}}var $1=!1,Ks=!1,lle=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function my(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){vr(t,e,r)}else n.current=null}function Q2(t,e,n){try{n()}catch(r){vr(t,e,r)}}var GB=!1;function ule(t,e){if(k2=nI,t=ZH(),oM(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(D2={focusedElem:t,selectionRange:n},nI=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){e=Ke;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,m=e.stateNode,b=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Qa(e.type,g),y);m.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(A){vr(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}return p=GB,GB=!1,p}function Fv(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Q2(e,n,i)}s=s.next}while(s!==r)}}function Kx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function J2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KG(t){var e=t.alternate;e!==null&&(t.alternate=null,KG(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ml],delete e[RE],delete e[U2],delete e[qce],delete e[Vce])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YG(t){return t.tag===5||t.tag===3||t.tag===4}function qB(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YG(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Z2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=iI));else if(r!==4&&(t=t.child,t!==null))for(Z2(t,e,n),t=t.sibling;t!==null;)Z2(t,e,n),t=t.sibling}function X2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(X2(t,e,n),t=t.sibling;t!==null;)X2(t,e,n),t=t.sibling}var Cs=null,oc=!1;function gd(t,e,n){for(n=n.child;n!==null;)QG(t,e,n),n=n.sibling}function QG(t,e,n){if(Al&&typeof Al.onCommitFiberUnmount=="function")try{Al.onCommitFiberUnmount(Fx,n)}catch{}switch(n.tag){case 5:Ks||my(n,e);case 6:var r=Cs,s=oc;Cs=null,gd(t,e,n),Cs=r,oc=s,Cs!==null&&(oc?(t=Cs,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Cs.removeChild(n.stateNode));break;case 18:Cs!==null&&(oc?(t=Cs,n=n.stateNode,t.nodeType===8?pR(t.parentNode,n):t.nodeType===1&&pR(t,n),SE(t)):pR(Cs,n.stateNode));break;case 4:r=Cs,s=oc,Cs=n.stateNode.containerInfo,oc=!0,gd(t,e,n),Cs=r,oc=s;break;case 0:case 11:case 14:case 15:if(!Ks&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Q2(n,e,o),s=s.next}while(s!==r)}gd(t,e,n);break;case 1:if(!Ks&&(my(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){vr(n,e,a)}gd(t,e,n);break;case 21:gd(t,e,n);break;case 22:n.mode&1?(Ks=(r=Ks)||n.memoizedState!==null,gd(t,e,n),Ks=r):gd(t,e,n);break;default:gd(t,e,n)}}function VB(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lle),e.forEach(function(r){var s=ble.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ja(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Cs=a.stateNode,oc=!1;break e;case 3:Cs=a.stateNode.containerInfo,oc=!0;break e;case 4:Cs=a.stateNode.containerInfo,oc=!0;break e}a=a.return}if(Cs===null)throw Error(Se(160));QG(i,o,s),Cs=null,oc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){vr(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JG(e,t),e=e.sibling}function JG(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ja(e,t),Lc(t),r&4){try{Fv(3,t,t.return),Kx(3,t)}catch(g){vr(t,t.return,g)}try{Fv(5,t,t.return)}catch(g){vr(t,t.return,g)}}break;case 1:ja(e,t),Lc(t),r&512&&n!==null&&my(n,n.return);break;case 5:if(ja(e,t),Lc(t),r&512&&n!==null&&my(n,n.return),t.flags&32){var s=t.stateNode;try{EE(s,"")}catch(g){vr(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&bH(s,i),C2(a,o);var l=C2(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?AH(s,d):u==="dangerouslySetInnerHTML"?_H(s,d):u==="children"?EE(s,d):V5(s,u,d,l)}switch(a){case"input":w2(s,i);break;case"textarea":vH(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Py(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Py(s,!!i.multiple,i.defaultValue,!0):Py(s,!!i.multiple,i.multiple?[]:"",!1))}s[RE]=i}catch(g){vr(t,t.return,g)}}break;case 6:if(ja(e,t),Lc(t),r&4){if(t.stateNode===null)throw Error(Se(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){vr(t,t.return,g)}}break;case 3:if(ja(e,t),Lc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{SE(e.containerInfo)}catch(g){vr(t,t.return,g)}break;case 4:ja(e,t),Lc(t);break;case 13:ja(e,t),Lc(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(IM=xr())),r&4&&VB(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ks=(l=Ks)||u,ja(e,t),Ks=l):ja(e,t),Lc(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ke=t,u=t.child;u!==null;){for(d=Ke=u;Ke!==null;){switch(h=Ke,f=h.child,h.tag){case 0:case 11:case 14:case 15:Fv(4,h,h.return);break;case 1:my(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){vr(r,n,g)}}break;case 5:my(h,h.return);break;case 22:if(h.memoizedState!==null){YB(d);continue}}f!==null?(f.return=h,Ke=f):YB(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=CH("display",o))}catch(g){vr(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){vr(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ja(e,t),Lc(t),r&4&&VB(t);break;case 21:break;default:ja(e,t),Lc(t)}}function Lc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YG(n)){var r=n;break e}n=n.return}throw Error(Se(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(EE(s,""),r.flags&=-33);var i=qB(t);X2(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qB(t);Z2(t,a,o);break;default:throw Error(Se(161))}}catch(c){vr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dle(t,e,n){Ke=t,ZG(t)}function ZG(t,e,n){for(var r=(t.mode&1)!==0;Ke!==null;){var s=Ke,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||$1;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Ks;a=$1;var l=Ks;if($1=o,(Ks=c)&&!l)for(Ke=s;Ke!==null;)o=Ke,c=o.child,o.tag===22&&o.memoizedState!==null?QB(s):c!==null?(c.return=o,Ke=c):QB(s);for(;i!==null;)Ke=i,ZG(i),i=i.sibling;Ke=s,$1=a,Ks=l}KB(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ke=i):KB(t)}}function KB(t){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ks||Kx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ks)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Qa(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&OB(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}OB(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&SE(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}Ks||e.flags&512&&J2(e)}catch(h){vr(e,e.return,h)}}if(e===t){Ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function YB(t){for(;Ke!==null;){var e=Ke;if(e===t){Ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function QB(t){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kx(4,e)}catch(c){vr(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){vr(e,s,c)}}var i=e.return;try{J2(e)}catch(c){vr(e,i,c)}break;case 5:var o=e.return;try{J2(e)}catch(c){vr(e,o,c)}}}catch(c){vr(e,e.return,c)}if(e===t){Ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ke=a;break}Ke=e.return}}var hle=Math.ceil,mI=od.ReactCurrentDispatcher,AM=od.ReactCurrentOwner,Ca=od.ReactCurrentBatchConfig,nn=0,fs=null,Dr=null,Ns=0,To=0,yy=Ef(0),qr=0,LE=null,mg=0,Yx=0,SM=0,jv=null,qi=null,IM=0,n0=1/0,au=null,yI=!1,ek=null,zh=null,B1=!1,Sh=null,wI=0,zv=0,tk=null,QA=-1,JA=0;function wi(){return nn&6?xr():QA!==-1?QA:QA=xr()}function Wh(t){return t.mode&1?nn&2&&Ns!==0?Ns&-Ns:Yce.transition!==null?(JA===0&&(JA=LH()),JA):(t=Sn,t!==0||(t=window.event,t=t===void 0?16:WH(t.type)),t):1}function Ec(t,e,n,r){if(50<zv)throw zv=0,tk=null,Error(Se(185));bC(t,n,r),(!(nn&2)||t!==fs)&&(t===fs&&(!(nn&2)&&(Yx|=n),qr===4&&Vd(t,Ns)),to(t,r),n===1&&nn===0&&!(e.mode&1)&&(n0=xr()+500,Gx&&_f()))}function to(t,e){var n=t.callbackNode;Yae(t,e);var r=tI(t,t===fs?Ns:0);if(r===0)n!==null&&iB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iB(n),e===1)t.tag===0?Kce(JB.bind(null,t)):cG(JB.bind(null,t)),Hce(function(){!(nn&6)&&_f()}),n=null;else{switch(UH(r)){case 1:n=Z5;break;case 4:n=DH;break;case 16:n=eI;break;case 536870912:n=MH;break;default:n=eI}n=oq(n,XG.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function XG(t,e){if(QA=-1,JA=0,nn&6)throw Error(Se(327));var n=t.callbackNode;if(Ly()&&t.callbackNode!==n)return null;var r=tI(t,t===fs?Ns:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bI(t,r);else{e=r;var s=nn;nn|=2;var i=tq();(fs!==t||Ns!==e)&&(au=null,n0=xr()+500,Zp(t,e));do try{gle();break}catch(a){eq(t,a)}while(!0);dM(),mI.current=i,nn=s,Dr!==null?e=0:(fs=null,Ns=0,e=qr)}if(e!==0){if(e===2&&(s=N2(t),s!==0&&(r=s,e=nk(t,s))),e===1)throw n=LE,Zp(t,0),Vd(t,r),to(t,xr()),n;if(e===6)Vd(t,r);else{if(s=t.current.alternate,!(r&30)&&!fle(s)&&(e=bI(t,r),e===2&&(i=N2(t),i!==0&&(r=i,e=nk(t,i))),e===1))throw n=LE,Zp(t,0),Vd(t,r),to(t,xr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Se(345));case 2:Wf(t,qi,au);break;case 3:if(Vd(t,r),(r&130023424)===r&&(e=IM+500-xr(),10<e)){if(tI(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){wi(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=L2(Wf.bind(null,t,qi,au),e);break}Wf(t,qi,au);break;case 4:if(Vd(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vc(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=xr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hle(r/1960))-r,10<r){t.timeoutHandle=L2(Wf.bind(null,t,qi,au),r);break}Wf(t,qi,au);break;case 5:Wf(t,qi,au);break;default:throw Error(Se(329))}}}return to(t,xr()),t.callbackNode===n?XG.bind(null,t):null}function nk(t,e){var n=jv;return t.current.memoizedState.isDehydrated&&(Zp(t,e).flags|=256),t=bI(t,e),t!==2&&(e=qi,qi=n,e!==null&&rk(e)),t}function rk(t){qi===null?qi=t:qi.push.apply(qi,t)}function fle(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ac(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vd(t,e){for(e&=~SM,e&=~Yx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vc(e),r=1<<n;t[n]=-1,e&=~r}}function JB(t){if(nn&6)throw Error(Se(327));Ly();var e=tI(t,0);if(!(e&1))return to(t,xr()),null;var n=bI(t,e);if(t.tag!==0&&n===2){var r=N2(t);r!==0&&(e=r,n=nk(t,r))}if(n===1)throw n=LE,Zp(t,0),Vd(t,e),to(t,xr()),n;if(n===6)throw Error(Se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wf(t,qi,au),to(t,xr()),null}function xM(t,e){var n=nn;nn|=1;try{return t(e)}finally{nn=n,nn===0&&(n0=xr()+500,Gx&&_f())}}function yg(t){Sh!==null&&Sh.tag===0&&!(nn&6)&&Ly();var e=nn;nn|=1;var n=Ca.transition,r=Sn;try{if(Ca.transition=null,Sn=1,t)return t()}finally{Sn=r,Ca.transition=n,nn=e,!(nn&6)&&_f()}}function NM(){To=yy.current,Xn(yy)}function Zp(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Wce(n)),Dr!==null)for(n=Dr.return;n!==null;){var r=n;switch(cM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oI();break;case 3:e0(),Xn(Xi),Xn(Qs),yM();break;case 5:mM(r);break;case 4:e0();break;case 13:Xn(cr);break;case 19:Xn(cr);break;case 10:hM(r.type._context);break;case 22:case 23:NM()}n=n.return}if(fs=t,Dr=t=Hh(t.current,null),Ns=To=e,qr=0,LE=null,SM=Yx=mg=0,qi=jv=null,lp!==null){for(e=0;e<lp.length;e++)if(n=lp[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}lp=null}return t}function eq(t,e){do{var n=Dr;try{if(dM(),VA.current=gI,pI){for(var r=hr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}pI=!1}if(gg=0,ss=jr=hr=null,Bv=!1,kE=0,AM.current=null,n===null||n.return===null){qr=1,LE=e,Dr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Ns,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=$B(o);if(f!==null){f.flags&=-257,BB(f,o,a,i,e),f.mode&1&&UB(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){UB(i,l,e),TM();break e}c=Error(Se(426))}}else if(ir&&a.mode&1){var y=$B(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),BB(y,o,a,i,e),lM(t0(c,a));break e}}i=c=t0(c,a),qr!==4&&(qr=2),jv===null?jv=[i]:jv.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=UG(i,c,e);PB(i,m);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(zh===null||!zh.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=$G(i,a,e);PB(i,A);break e}}i=i.return}while(i!==null)}rq(n)}catch(C){e=C,Dr===n&&n!==null&&(Dr=n=n.return);continue}break}while(!0)}function tq(){var t=mI.current;return mI.current=gI,t===null?gI:t}function TM(){(qr===0||qr===3||qr===2)&&(qr=4),fs===null||!(mg&268435455)&&!(Yx&268435455)||Vd(fs,Ns)}function bI(t,e){var n=nn;nn|=2;var r=tq();(fs!==t||Ns!==e)&&(au=null,Zp(t,e));do try{ple();break}catch(s){eq(t,s)}while(!0);if(dM(),nn=n,mI.current=r,Dr!==null)throw Error(Se(261));return fs=null,Ns=0,qr}function ple(){for(;Dr!==null;)nq(Dr)}function gle(){for(;Dr!==null&&!Fae();)nq(Dr)}function nq(t){var e=iq(t.alternate,t,To);t.memoizedProps=t.pendingProps,e===null?rq(t):Dr=e,AM.current=null}function rq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cle(n,e),n!==null){n.flags&=32767,Dr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qr=6,Dr=null;return}}else if(n=ale(n,e,To),n!==null){Dr=n;return}if(e=e.sibling,e!==null){Dr=e;return}Dr=e=t}while(e!==null);qr===0&&(qr=5)}function Wf(t,e,n){var r=Sn,s=Ca.transition;try{Ca.transition=null,Sn=1,mle(t,e,n,r)}finally{Ca.transition=s,Sn=r}return null}function mle(t,e,n,r){do Ly();while(Sh!==null);if(nn&6)throw Error(Se(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Se(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Qae(t,i),t===fs&&(Dr=fs=null,Ns=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||B1||(B1=!0,oq(eI,function(){return Ly(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ca.transition,Ca.transition=null;var o=Sn;Sn=1;var a=nn;nn|=4,AM.current=null,ule(t,n),JG(n,t),Lce(D2),nI=!!k2,D2=k2=null,t.current=n,dle(n),jae(),nn=a,Sn=o,Ca.transition=i}else t.current=n;if(B1&&(B1=!1,Sh=t,wI=s),i=t.pendingLanes,i===0&&(zh=null),Hae(n.stateNode),to(t,xr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(yI)throw yI=!1,t=ek,ek=null,t;return wI&1&&t.tag!==0&&Ly(),i=t.pendingLanes,i&1?t===tk?zv++:(zv=0,tk=t):zv=0,_f(),null}function Ly(){if(Sh!==null){var t=UH(wI),e=Ca.transition,n=Sn;try{if(Ca.transition=null,Sn=16>t?16:t,Sh===null)var r=!1;else{if(t=Sh,Sh=null,wI=0,nn&6)throw Error(Se(331));var s=nn;for(nn|=4,Ke=t.current;Ke!==null;){var i=Ke,o=i.child;if(Ke.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ke=l;Ke!==null;){var u=Ke;switch(u.tag){case 0:case 11:case 15:Fv(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ke=d;else for(;Ke!==null;){u=Ke;var h=u.sibling,f=u.return;if(KG(u),u===l){Ke=null;break}if(h!==null){h.return=f,Ke=h;break}Ke=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ke=o;else e:for(;Ke!==null;){if(i=Ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fv(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,Ke=m;break e}Ke=i.return}}var b=t.current;for(Ke=b;Ke!==null;){o=Ke;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ke=v;else e:for(o=b;Ke!==null;){if(a=Ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kx(9,a)}}catch(C){vr(a,a.return,C)}if(a===o){Ke=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Ke=A;break e}Ke=a.return}}if(nn=s,_f(),Al&&typeof Al.onPostCommitFiberRoot=="function")try{Al.onPostCommitFiberRoot(Fx,t)}catch{}r=!0}return r}finally{Sn=n,Ca.transition=e}}return!1}function ZB(t,e,n){e=t0(n,e),e=UG(t,e,1),t=jh(t,e,1),e=wi(),t!==null&&(bC(t,1,e),to(t,e))}function vr(t,e,n){if(t.tag===3)ZB(t,t,n);else for(;e!==null;){if(e.tag===3){ZB(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zh===null||!zh.has(r))){t=t0(n,t),t=$G(e,t,1),e=jh(e,t,1),t=wi(),e!==null&&(bC(e,1,t),to(e,t));break}}e=e.return}}function yle(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wi(),t.pingedLanes|=t.suspendedLanes&n,fs===t&&(Ns&n)===n&&(qr===4||qr===3&&(Ns&130023424)===Ns&&500>xr()-IM?Zp(t,0):SM|=n),to(t,e)}function sq(t,e){e===0&&(t.mode&1?(e=T1,T1<<=1,!(T1&130023424)&&(T1=4194304)):e=1);var n=wi();t=Qu(t,e),t!==null&&(bC(t,e,n),to(t,n))}function wle(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sq(t,n)}function ble(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Se(314))}r!==null&&r.delete(e),sq(t,n)}var iq;iq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xi.current)Qi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qi=!1,ole(t,e,n);Qi=!!(t.flags&131072)}else Qi=!1,ir&&e.flags&1048576&&lG(e,lI,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;YA(t,e),t=e.pendingProps;var s=Jw(e,Qs.current);My(e,n),s=bM(null,e,r,t,s,n);var i=vM();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,eo(r)?(i=!0,aI(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pM(e),s.updater=Vx,e.stateNode=s,s._reactInternals=e,W2(e,r,t,n),e=q2(null,e,r,!0,i,n)):(e.tag=0,ir&&i&&aM(e),ai(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(YA(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Ele(r),t=Qa(r,t),s){case 0:e=G2(null,e,r,t,n);break e;case 1:e=zB(null,e,r,t,n);break e;case 11:e=FB(null,e,r,t,n);break e;case 14:e=jB(null,e,r,Qa(r.type,t),n);break e}throw Error(Se(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qa(r,s),G2(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qa(r,s),zB(t,e,r,s,n);case 3:e:{if(zG(e),t===null)throw Error(Se(387));r=e.pendingProps,i=e.memoizedState,s=i.element,gG(t,e),hI(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=t0(Error(Se(423)),e),e=WB(t,e,r,n,s);break e}else if(r!==s){s=t0(Error(Se(424)),e),e=WB(t,e,r,n,s);break e}else for(Do=Fh(e.stateNode.containerInfo.firstChild),Uo=e,ir=!0,ac=null,n=fG(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zw(),r===s){e=Ju(t,e,n);break e}ai(t,e,r,n)}e=e.child}return e;case 5:return mG(e),t===null&&F2(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,M2(r,s)?o=null:i!==null&&M2(r,i)&&(e.flags|=32),jG(t,e),ai(t,e,o,n),e.child;case 6:return t===null&&F2(e),null;case 13:return WG(t,e,n);case 4:return gM(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xw(e,null,r,n):ai(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qa(r,s),FB(t,e,r,s,n);case 7:return ai(t,e,e.pendingProps,n),e.child;case 8:return ai(t,e,e.pendingProps.children,n),e.child;case 12:return ai(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Vn(uI,r._currentValue),r._currentValue=o,i!==null)if(Ac(i.value,o)){if(i.children===s.children&&!Xi.current){e=Ju(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Uu(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),j2(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Se(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),j2(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ai(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,My(e,n),s=Aa(s),r=r(s),e.flags|=1,ai(t,e,r,n),e.child;case 14:return r=e.type,s=Qa(r,e.pendingProps),s=Qa(r.type,s),jB(t,e,r,s,n);case 15:return BG(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qa(r,s),YA(t,e),e.tag=1,eo(r)?(t=!0,aI(e)):t=!1,My(e,n),LG(e,r,s),W2(e,r,s,n),q2(null,e,r,!0,t,n);case 19:return HG(t,e,n);case 22:return FG(t,e,n)}throw Error(Se(156,e.tag))};function oq(t,e){return kH(t,e)}function vle(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ea(t,e,n,r){return new vle(t,e,n,r)}function RM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ele(t){if(typeof t=="function")return RM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Y5)return 11;if(t===Q5)return 14}return 2}function Hh(t,e){var n=t.alternate;return n===null?(n=Ea(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ZA(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")RM(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ay:return Xp(n.children,s,i,e);case K5:o=8,s|=8;break;case f2:return t=Ea(12,n,e,s|2),t.elementType=f2,t.lanes=i,t;case p2:return t=Ea(13,n,e,s),t.elementType=p2,t.lanes=i,t;case g2:return t=Ea(19,n,e,s),t.elementType=g2,t.lanes=i,t;case mH:return Qx(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pH:o=10;break e;case gH:o=9;break e;case Y5:o=11;break e;case Q5:o=14;break e;case Fd:o=16,r=null;break e}throw Error(Se(130,t==null?t:typeof t,""))}return e=Ea(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Xp(t,e,n,r){return t=Ea(7,t,r,e),t.lanes=n,t}function Qx(t,e,n,r){return t=Ea(22,t,r,e),t.elementType=mH,t.lanes=n,t.stateNode={isHidden:!1},t}function _R(t,e,n){return t=Ea(6,t,null,e),t.lanes=n,t}function CR(t,e,n){return e=Ea(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _le(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rR(0),this.expirationTimes=rR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rR(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function PM(t,e,n,r,s,i,o,a,c){return t=new _le(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ea(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pM(i),t}function Cle(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oy,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function aq(t){if(!t)return cf;t=t._reactInternals;e:{if(Kg(t)!==t||t.tag!==1)throw Error(Se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(eo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Se(171))}if(t.tag===1){var n=t.type;if(eo(n))return aG(t,n,e)}return e}function cq(t,e,n,r,s,i,o,a,c){return t=PM(n,r,!0,t,s,i,o,a,c),t.context=aq(null),n=t.current,r=wi(),s=Wh(n),i=Uu(r,s),i.callback=e??null,jh(n,i,s),t.current.lanes=s,bC(t,s,r),to(t,r),t}function Jx(t,e,n,r){var s=e.current,i=wi(),o=Wh(s);return n=aq(n),e.context===null?e.context=n:e.pendingContext=n,e=Uu(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jh(s,e,o),t!==null&&(Ec(t,s,o,i),qA(t,s,o)),o}function vI(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function XB(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function OM(t,e){XB(t,e),(t=t.alternate)&&XB(t,e)}function Ale(){return null}var lq=typeof reportError=="function"?reportError:function(t){console.error(t)};function kM(t){this._internalRoot=t}Zx.prototype.render=kM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Se(409));Jx(t,e,null,null)};Zx.prototype.unmount=kM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yg(function(){Jx(null,t,null,null)}),e[Yu]=null}};function Zx(t){this._internalRoot=t}Zx.prototype.unstable_scheduleHydration=function(t){if(t){var e=FH();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qd.length&&e!==0&&e<qd[n].priority;n++);qd.splice(n,0,t),n===0&&zH(t)}};function DM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function e6(){}function Sle(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=vI(o);i.call(l)}}var o=cq(e,r,t,0,null,!1,!1,"",e6);return t._reactRootContainer=o,t[Yu]=o.current,NE(t.nodeType===8?t.parentNode:t),yg(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=vI(c);a.call(l)}}var c=PM(t,0,!1,null,null,!1,!1,"",e6);return t._reactRootContainer=c,t[Yu]=c.current,NE(t.nodeType===8?t.parentNode:t),yg(function(){Jx(e,c,n,r)}),c}function eN(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=vI(o);a.call(c)}}Jx(e,o,t,s)}else o=Sle(n,e,t,s,r);return vI(o)}$H=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=av(e.pendingLanes);n!==0&&(X5(e,n|1),to(e,xr()),!(nn&6)&&(n0=xr()+500,_f()))}break;case 13:yg(function(){var r=Qu(t,1);if(r!==null){var s=wi();Ec(r,t,1,s)}}),OM(t,1)}};eM=function(t){if(t.tag===13){var e=Qu(t,134217728);if(e!==null){var n=wi();Ec(e,t,134217728,n)}OM(t,134217728)}};BH=function(t){if(t.tag===13){var e=Wh(t),n=Qu(t,e);if(n!==null){var r=wi();Ec(n,t,e,r)}OM(t,e)}};FH=function(){return Sn};jH=function(t,e){var n=Sn;try{return Sn=t,e()}finally{Sn=n}};S2=function(t,e,n){switch(e){case"input":if(w2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Hx(r);if(!s)throw Error(Se(90));wH(r),w2(r,s)}}}break;case"textarea":vH(t,n);break;case"select":e=n.value,e!=null&&Py(t,!!n.multiple,e,!1)}};xH=xM;NH=yg;var Ile={usingClientEntryPoint:!1,Events:[EC,dy,Hx,SH,IH,xM]},Pb={findFiberByHostInstance:cp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xle={bundleType:Pb.bundleType,version:Pb.version,rendererPackageName:Pb.rendererPackageName,rendererConfig:Pb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:od.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=PH(t),t===null?null:t.stateNode},findFiberByHostInstance:Pb.findFiberByHostInstance||Ale,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var F1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!F1.isDisabled&&F1.supportsFiber)try{Fx=F1.inject(xle),Al=F1}catch{}}Wo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ile;Wo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!DM(e))throw Error(Se(200));return Cle(t,e,null,n)};Wo.createRoot=function(t,e){if(!DM(t))throw Error(Se(299));var n=!1,r="",s=lq;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=PM(t,1,!1,null,null,n,!1,r,s),t[Yu]=e.current,NE(t.nodeType===8?t.parentNode:t),new kM(e)};Wo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Se(188)):(t=Object.keys(t).join(","),Error(Se(268,t)));return t=PH(e),t=t===null?null:t.stateNode,t};Wo.flushSync=function(t){return yg(t)};Wo.hydrate=function(t,e,n){if(!Xx(e))throw Error(Se(200));return eN(null,t,e,!0,n)};Wo.hydrateRoot=function(t,e,n){if(!DM(t))throw Error(Se(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=lq;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cq(e,null,t,1,n??null,s,!1,i,o),t[Yu]=e.current,NE(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Zx(e)};Wo.render=function(t,e,n){if(!Xx(e))throw Error(Se(200));return eN(null,t,e,!1,n)};Wo.unmountComponentAtNode=function(t){if(!Xx(t))throw Error(Se(40));return t._reactRootContainer?(yg(function(){eN(null,null,t,!1,function(){t._reactRootContainer=null,t[Yu]=null})}),!0):!1};Wo.unstable_batchedUpdates=xM;Wo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xx(n))throw Error(Se(200));if(t==null||t._reactInternals===void 0)throw Error(Se(38));return eN(t,e,n,!1,r)};Wo.version="18.3.1-next-f1338f8080-20240426";function uq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uq)}catch(t){console.error(t)}}uq(),uH.exports=Wo;var MM=uH.exports,t6=MM;d2.createRoot=t6.createRoot,d2.hydrateRoot=t6.hydrateRoot;const dq="2.31.7";let Ob={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${dq}`},ge=class sk extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof sk?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof sk&&n.cause.docsPath||n.docsPath,i=(a=Ob.getDocsUrl)==null?void 0:a.call(Ob,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Ob.version?[`Version: ${Ob.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=dq}walk(e){return hq(this,e)}};function hq(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?hq(t.cause,e):e?null:t}let fq=class extends ge{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class Nle extends ge{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Tle extends ge{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let Rle=class extends ge{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},pq=class extends ge{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},gq=class extends ge{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class n6 extends ge{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function G0(t,{dir:e,size:n=32}={}){return typeof t=="string"?Gh(t,{dir:e,size:n}):Ple(t,{dir:e,size:n})}function Gh(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new gq({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Ple(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new gq({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function kl(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function _r(t){return kl(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Il(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const Ole=new TextEncoder;function q0(t,e={}){return typeof t=="number"||typeof t=="bigint"?Dle(t,e):typeof t=="boolean"?kle(t,e):kl(t)?Ia(t,e):eg(t,e)}function kle(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Pa(n,{size:e.size}),G0(n,{size:e.size})):n}const ql={zero:48,nine:57,A:65,F:70,a:97,f:102};function r6(t){if(t>=ql.zero&&t<=ql.nine)return t-ql.zero;if(t>=ql.A&&t<=ql.F)return t-(ql.A-10);if(t>=ql.a&&t<=ql.f)return t-(ql.a-10)}function Ia(t,e={}){let n=t;e.size&&(Pa(n,{size:e.size}),n=G0(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=r6(r.charCodeAt(a++)),l=r6(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ge(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function Dle(t,e){const n=tt(t,e);return Ia(n)}function eg(t,e={}){const n=Ole.encode(t);return typeof e.size=="number"?(Pa(n,{size:e.size}),G0(n,{dir:"right",size:e.size})):n}function Pa(t,{size:e}){if(_r(t)>e)throw new Rle({givenSize:_r(t),maxSize:e})}function jo(t,e={}){const{signed:n}=e;e.size&&Pa(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Mle(t,e={}){let n=t;if(e.size&&(Pa(n,{size:e.size}),n=Il(n)),Il(n)==="0x00")return!1;if(Il(n)==="0x01")return!0;throw new Tle(n)}function Sc(t,e={}){return Number(jo(t,e))}function mq(t,e={}){let n=Ia(t);return e.size&&(Pa(n,{size:e.size}),n=Il(n,{dir:"right"})),new TextDecoder().decode(n)}const Lle=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function xa(t,e={}){return typeof t=="number"||typeof t=="bigint"?tt(t,e):typeof t=="string"?r0(t,e):typeof t=="boolean"?yq(t,e):Qr(t,e)}function yq(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Pa(n,{size:e.size}),G0(n,{size:e.size})):n}function Qr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Lle[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Pa(r,{size:e.size}),G0(r,{dir:"right",size:e.size})):r}function tt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new fq({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?G0(a,{size:r}):a}const Ule=new TextEncoder;function r0(t,e={}){const n=Ule.encode(t);return Qr(n,e)}async function $le(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:tt(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Ic(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new Jle(t.type);return`${t.name}(${tN(t.inputs,{includeName:e})})`}function tN(t,{includeName:e=!1}={}){return t?t.map(n=>Ble(n,{includeName:e})).join(e?", ":","):""}function Ble(t,{includeName:e}){return t.type.startsWith("tuple")?`(${tN(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class Fle extends ge{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class s6 extends ge{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class wq extends ge{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${tN(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class CC extends ge{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class jle extends ge{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class zle extends ge{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${_r(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Wle extends ge{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Hle extends ge{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class i6 extends ge{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class bq extends ge{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Gle extends ge{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class vq extends ge{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class o6 extends ge{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class s0 extends ge{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Eq extends ge{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class qle extends ge{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class Vle extends ge{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Ic(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Ic(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Kle=class extends ge{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class UE extends ge{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${tN(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class nN extends ge{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Ic(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class Yle extends ge{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Qle extends ge{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let _q=class extends ge{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class Jle extends ge{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Na(t){return typeof t[0]=="string"?V0(t):Zle(t)}function Zle(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function V0(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let lf=class extends ge{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},rN=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const j1=BigInt(2**32-1),a6=BigInt(32);function Xle(t,e=!1){return e?{h:Number(t&j1),l:Number(t>>a6&j1)}:{h:Number(t>>a6&j1)|0,l:Number(t&j1)|0}}function eue(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Xle(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const tue=(t,e,n)=>t<<n|e>>>32-n,nue=(t,e,n)=>e<<n|t>>>32-n,rue=(t,e,n)=>e<<n-32|t>>>64-n,sue=(t,e,n)=>t<<n-32|e>>>64-n,vm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function LM(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $E(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function xc(t,...e){if(!LM(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function iue(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");$E(t.outputLen),$E(t.blockLen)}function i0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Cq(t,e){xc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function oue(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function o0(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function AR(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Uc(t,e){return t<<32-e|t>>>e}const aue=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function cue(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function lue(t){for(let e=0;e<t.length;e++)t[e]=cue(t[e]);return t}const c6=aue?t=>t:lue,Aq=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",uue=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function BE(t){if(xc(t),Aq)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=uue[t[n]];return e}const Vl={_0:48,_9:57,A:65,F:70,a:97,f:102};function l6(t){if(t>=Vl._0&&t<=Vl._9)return t-Vl._0;if(t>=Vl.A&&t<=Vl.F)return t-(Vl.A-10);if(t>=Vl.a&&t<=Vl.f)return t-(Vl.a-10)}function UM(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Aq)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=l6(t.charCodeAt(i)),a=l6(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function due(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function AC(t){return typeof t=="string"&&(t=due(t)),xc(t),t}function dp(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];xc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let $M=class{};function Sq(t){const e=r=>t().update(AC(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function hue(t){const e=(r,s)=>t(s).update(AC(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function fue(t=32){if(vm&&typeof vm.getRandomValues=="function")return vm.getRandomValues(new Uint8Array(t));if(vm&&typeof vm.randomBytes=="function")return Uint8Array.from(vm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const pue=BigInt(0),kb=BigInt(1),gue=BigInt(2),mue=BigInt(7),yue=BigInt(256),wue=BigInt(113),Iq=[],xq=[],Nq=[];for(let t=0,e=kb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Iq.push(2*(5*r+n)),xq.push((t+1)*(t+2)/2%64);let s=pue;for(let i=0;i<7;i++)e=(e<<kb^(e>>mue)*wue)%yue,e&gue&&(s^=kb<<(kb<<BigInt(i))-kb);Nq.push(s)}const Tq=eue(Nq,!0),bue=Tq[0],vue=Tq[1],u6=(t,e,n)=>n>32?rue(t,e,n):tue(t,e,n),d6=(t,e,n)=>n>32?sue(t,e,n):nue(t,e,n);function Rq(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=u6(l,u,1)^n[a],h=d6(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=xq[o],c=u6(s,i,a),l=d6(s,i,a),u=Iq[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=bue[r],t[1]^=vue[r]}o0(n)}let BM=class Pq extends $M{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,$E(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=oue(this.state)}clone(){return this._cloneInto()}keccak(){c6(this.state32),Rq(this.state32,this.rounds),c6(this.state32),this.posOut=0,this.pos=0}update(e){i0(this),e=AC(e),xc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){i0(this,!1),xc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return $E(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Cq(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,o0(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Pq(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Cf=(t,e,n)=>Sq(()=>new BM(e,t,n)),Eue=Cf(6,144,224/8),_ue=Cf(6,136,256/8),Cue=Cf(6,104,384/8),Aue=Cf(6,72,512/8),Sue=Cf(1,144,224/8),FM=Cf(1,136,256/8),Iue=Cf(1,104,384/8),xue=Cf(1,72,512/8),Oq=(t,e,n)=>hue((r={})=>new BM(e,t,r.dkLen===void 0?n:r.dkLen,!0)),Nue=Oq(31,168,128/8),Tue=Oq(31,136,256/8),zGe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:BM,keccakP:Rq,keccak_224:Sue,keccak_256:FM,keccak_384:Iue,keccak_512:xue,sha3_224:Eue,sha3_256:_ue,sha3_384:Cue,sha3_512:Aue,shake128:Nue,shake256:Tue},Symbol.toStringTag,{value:"Module"}));function xs(t,e){const n=e||"hex",r=FM(kl(t,{strict:!1})?q0(t):t);return n==="bytes"?r:xa(r)}const SR=new rN(8192);function SC(t,e){if(SR.has(`${t}.${e}`))return SR.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=xs(eg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return SR.set(`${t}.${e}`,i),i}function ku(t,e){if(!Ta(t,{strict:!1}))throw new lf({address:t});return SC(t,e)}const Rue=/^0x[a-fA-F0-9]{40}$/,IR=new rN(8192);function Ta(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(IR.has(r))return IR.get(r);const s=Rue.test(t)?t.toLowerCase()===t?!0:n?SC(t)===t:!0:!1;return IR.set(r,s),s}function a0(t,e,n,{strict:r}={}){return kl(t,{strict:!1})?EI(t,e,n,{strict:r}):Mq(t,e,n,{strict:r})}function kq(t,e){if(typeof e=="number"&&e>0&&e>_r(t)-1)throw new pq({offset:e,position:"start",size:_r(t)})}function Dq(t,e,n){if(typeof e=="number"&&typeof n=="number"&&_r(t)!==n-e)throw new pq({offset:n,position:"end",size:_r(t)})}function Mq(t,e,n,{strict:r}={}){kq(t,e);const s=t.slice(e,n);return r&&Dq(s,e,n),s}function EI(t,e,n,{strict:r}={}){kq(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&Dq(s,e,n),s}const Pue=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Lq=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Af(t,e){if(t.length!==e.length)throw new Wle({expectedLength:t.length,givenLength:e.length});const n=Oue({params:t,values:e}),r=zM(n);return r.length===0?"0x":r}function Oue({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(jM({param:t[r],value:e[r]}));return n}function jM({param:t,value:e}){const n=WM(t.type);if(n){const[r,s]=n;return Due(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return Bue(e,{param:t});if(t.type==="address")return kue(e);if(t.type==="bool")return Lue(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Lq.exec(t.type)??[];return Uue(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return Mue(e,{param:t});if(t.type==="string")return $ue(e);throw new Yle(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function zM(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=_r(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(tt(e+s,{size:32})),r.push(a),s+=_r(a)):n.push(a)}return Na([...n,...r])}function kue(t){if(!Ta(t))throw new lf({address:t});return{dynamic:!1,encoded:Gh(t.toLowerCase())}}function Due(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new _q(t);if(!r&&t.length!==e)throw new jle({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=jM({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=zM(i);if(r){const a=tt(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Na([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Na(i.map(({encoded:o})=>o))}}function Mue(t,{param:e}){const[,n]=e.type.split("bytes"),r=_r(t);if(!n){let s=t;return r%32!==0&&(s=Gh(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Na([Gh(tt(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new zle({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Gh(t,{dir:"right"})}}function Lue(t){if(typeof t!="boolean")throw new ge(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Gh(yq(t))}}function Uue(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new fq({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:tt(t,{size:32,signed:e})}}function $ue(t){const e=r0(t),n=Math.ceil(_r(e)/32),r=[];for(let s=0;s<n;s++)r.push(Gh(a0(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Na([Gh(tt(_r(e),{size:32})),...r])}}function Bue(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=jM({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?zM(r):Na(r.map(({encoded:s})=>s))}}function WM(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const xR="/docs/contract/encodeDeployData";function sN(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new Fle({docsPath:xR});if(!("inputs"in s))throw new s6({docsPath:xR});if(!s.inputs||s.inputs.length===0)throw new s6({docsPath:xR});const i=Af(s.inputs,n);return V0([r,i])}function Ar(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class Yg extends ge{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class XA extends ge{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function Fue(t){const e=xs(`0x${t.substring(4)}`).substring(26);return SC(`0x${e}`)}const jue="modulepreload",zue=function(t){return"/"+t},h6={},qs=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=zue(c),c in h6)return;h6[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":jue,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function Wue({hash:t,signature:e}){const n=kl(t)?t:xa(t),{secp256k1:r}=await qs(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>ome);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=f6(f);return new r.Signature(jo(l),jo(u)).addRecoveryBit(p)}const o=kl(e)?e:xa(e);if(_r(o)!==65)throw new Error("invalid signature length");const a=Sc(`0x${o.slice(130)}`),c=f6(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function f6(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Uq({hash:t,signature:e}){return Fue(await Wue({hash:t,signature:e}))}class p6 extends ge{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class $q extends ge{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Hue extends ge{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Gue={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Hue({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new $q({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new p6({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new p6({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function HM(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(Gue);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function que(t,e="hex"){const n=Bq(t),r=HM(new Uint8Array(n.length));return n.encode(r),e==="hex"?Qr(r.bytes):r.bytes}function Bq(t){return Array.isArray(t)?Vue(t.map(e=>Bq(e))):Kue(t)}function Vue(t){const e=t.reduce((s,i)=>s+i.length,0),n=Fq(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function Kue(t){const e=typeof t=="string"?Ia(t):t,n=Fq(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function Fq(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ge("Length is too large.")}function Yue(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=xs(V0(["0x05",que([e?tt(e):"0x",s,n?tt(n):"0x"])]));return r==="bytes"?Ia(i):i}async function jq(t){const{authorization:e,signature:n}=t;return Uq({hash:Yue(e),signature:n??e})}class ik extends ge{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Que extends ge{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class Jue extends ge{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class zq extends ge{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function Wq({chain:t,currentChainId:e}){if(!t)throw new Jue;if(e!==t.id)throw new Que({chain:t,currentChainId:e})}const Zue={gwei:9,wei:18},Xue={ether:-9,wei:9},ede={ether:-18,gwei:-9};function Qg(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function no(t,e="wei"){return Qg(t,Xue[e])}class hp extends ge{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(hp,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(hp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class _I extends ge{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${no(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(_I,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class ok extends ge{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${no(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(ok,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class ak extends ge{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(ak,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class ck extends ge{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(ck,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class lk extends ge{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(lk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class uk extends ge{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(uk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class dk extends ge{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(dk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class hk extends ge{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(hk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class fk extends ge{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(fk,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class CI extends ge{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${no(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${no(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(CI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class IC extends ge{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function GM(t,e="wei"){return Qg(t,Zue[e])}function xC(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class tde extends ge{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class nde extends ge{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",xC(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class rde extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=xC({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${GM(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${no(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${no(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${no(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Hq extends ge{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class Gq extends ge{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class sde extends ge{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Kr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),ide=t=>t,qM=t=>t;class Wv extends ge{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${qM(o)}`,e&&`Request body: ${Kr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class VM extends ge{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${qM(r)}`,`Request body: ${Kr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class g6 extends ge{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${qM(n)}`,`Request body: ${Kr(e)}`],name:"TimeoutError"})}}const ode=-1;class co extends ge{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof VM?e.code:n??ode}}class Go extends co{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class FE extends co{constructor(e){super(e,{code:FE.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(FE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class jE extends co{constructor(e){super(e,{code:jE.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(jE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class zE extends co{constructor(e,{method:n}={}){super(e,{code:zE.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(zE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class WE extends co{constructor(e){super(e,{code:WE.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(WE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class wg extends co{constructor(e){super(e,{code:wg.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(wg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class bg extends co{constructor(e){super(e,{code:bg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(bg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class HE extends co{constructor(e){super(e,{code:HE.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(HE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class qh extends co{constructor(e){super(e,{code:qh.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(qh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class c0 extends co{constructor(e){super(e,{code:c0.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(c0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class fp extends co{constructor(e,{method:n}={}){super(e,{code:fp.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(fp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class l0 extends co{constructor(e){super(e,{code:l0.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(l0,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class GE extends co{constructor(e){super(e,{code:GE.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(GE,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Fr extends Go{constructor(e){super(e,{code:Fr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Fr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class qE extends Go{constructor(e){super(e,{code:qE.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(qE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class VE extends Go{constructor(e,{method:n}={}){super(e,{code:VE.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(VE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class KE extends Go{constructor(e){super(e,{code:KE.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(KE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class YE extends Go{constructor(e){super(e,{code:YE.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(YE,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Dl extends Go{constructor(e){super(e,{code:Dl.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Dl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class u0 extends Go{constructor(e){super(e,{code:u0.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(u0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class QE extends Go{constructor(e){super(e,{code:QE.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(QE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class JE extends Go{constructor(e){super(e,{code:JE.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(JE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class ZE extends Go{constructor(e){super(e,{code:ZE.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(ZE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class XE extends Go{constructor(e){super(e,{code:XE.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(XE,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class e_ extends Go{constructor(e){super(e,{code:e_.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(e_,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class d0 extends Go{constructor(e){super(e,{code:d0.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(d0,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class ade extends co{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function iN(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ge?t.walk(s=>(s==null?void 0:s.code)===hp.code):t;return r instanceof ge?new hp({cause:t,message:r.details}):hp.nodeMessage.test(n)?new hp({cause:t,message:t.details}):_I.nodeMessage.test(n)?new _I({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):ok.nodeMessage.test(n)?new ok({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):ak.nodeMessage.test(n)?new ak({cause:t,nonce:e==null?void 0:e.nonce}):ck.nodeMessage.test(n)?new ck({cause:t,nonce:e==null?void 0:e.nonce}):lk.nodeMessage.test(n)?new lk({cause:t,nonce:e==null?void 0:e.nonce}):uk.nodeMessage.test(n)?new uk({cause:t}):dk.nodeMessage.test(n)?new dk({cause:t,gas:e==null?void 0:e.gas}):hk.nodeMessage.test(n)?new hk({cause:t,gas:e==null?void 0:e.gas}):fk.nodeMessage.test(n)?new fk({cause:t}):CI.nodeMessage.test(n)?new CI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new IC({cause:t})}function qq(t,{docsPath:e,...n}){const r=(()=>{const s=iN(t,n);return s instanceof IC?t:s})();return new rde(r,{docsPath:e,...n})}function oN(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const cde={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function K0(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=lde(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Qr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=tt(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=tt(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=tt(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=tt(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=tt(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=tt(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=cde[t.type]),typeof t.value<"u"&&(e.value=tt(t.value)),e}function lde(t){return t.map(e=>({address:e.address,r:e.r?tt(BigInt(e.r)):e.r,s:e.s?tt(BigInt(e.s)):e.s,chainId:tt(e.chainId),nonce:tt(e.nonce),...typeof e.yParity<"u"?{yParity:tt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:tt(e.v)}:{}}))}function ct(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const ude=2n**256n-1n;function Jg(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Ar(e):void 0;if(o&&!Ta(o.address))throw new lf({address:o.address});if(i&&!Ta(i))throw new lf({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new tde;if(r&&r>ude)throw new _I({maxFeePerGas:r});if(s&&r&&s>r)throw new CI({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Y0(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Sc(e)}class dde extends ge{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class KM extends ge{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class hde extends ge{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${no(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class Vq extends ge{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const Kq={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Yq(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Sc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Sc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?Kq[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=fde(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function fde(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function Qq(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:Yq(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function _l(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?tt(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new Vq({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||Qq)(c)}async function YM(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function pde(t,e){return Jq(t,e)}async function Jq(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await ct(t,_l,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return jo(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):ct(t,_l,"getBlock")({}),ct(t,YM,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new KM;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function gde(t,e){return pk(t,e)}async function pk(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new dde;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await ct(t,_l,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new KM;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await Jq(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await ct(t,YM,"getGasPrice")({}))}}class mde extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=xC({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${GM(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${no(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${no(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${no(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function yde(t,{docsPath:e,...n}){const r=(()=>{const s=iN(t,n);return s instanceof IC?t:s})();return new mde(r,{docsPath:e,...n})}class wde extends ge{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class bde extends ge{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function m6(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function vde(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=m6(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=m6(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function y6(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new n6({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new n6({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function Ede(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=tt(e)),n!==void 0&&(o.nonce=tt(n)),r!==void 0&&(o.state=y6(r)),s!==void 0){if(o.state)throw new bde;o.stateDiff=y6(s)}return o}function QM(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Ta(n,{strict:!1}))throw new lf({address:n});if(e[n])throw new wde({address:n});e[n]=Ede(r)}return e}async function JM(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?tt(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function aN(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Ar(n):void 0;try{let W=function(N){const{block:M,request:P,rpcStateOverride:D}=N;return t.request({method:"eth_estimateGas",params:D?[P,M??"latest",D]:M?[P,M]:[P]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,value:A,stateOverride:C,...S}=await NC(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof d=="bigint"?tt(d):void 0)||h,I=QM(C),k=await(async()=>{if(S.to)return S.to;if(c&&c.length>0)return await jq({authorization:c[0]}).catch(()=>{throw new ge("`to` is required. Could not infer from `authorizationList`")})})();Jg(e);const O=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,G=(O||K0)({...oN(S,{format:O}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:k,value:A});let R=BigInt(await W({block:T,request:G,rpcStateOverride:I}));if(c){const N=await JM(t,{address:G.from}),M=await Promise.all(c.map(async P=>{const{address:D}=P,F=await W({block:T,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:D,value:tt(N)},rpcStateOverride:I}).catch(()=>100000n);return 2n*BigInt(F)}));R+=M.reduce((P,D)=>P+D,0n)}return R}catch(a){throw yde(a,{...e,account:r,chain:t.chain})}}async function ZM(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?tt(r):n]},{dedupe:!!r});return Sc(s)}function Zq(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Ia(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Qr(i))}function Xq(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Ia(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Ia(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Qr(o))}function _de(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Cde(t,e,n){return t&e^~t&n}function Ade(t,e,n){return t&e^t&n^e&n}class Sde extends $M{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=AR(this.buffer)}update(e){i0(this),e=AC(e),xc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=AR(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){i0(this),Cq(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,o0(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;_de(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=AR(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const md=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ide=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yd=new Uint32Array(64);let xde=class extends Sde{constructor(e=32){super(64,e,8,!1),this.A=md[0]|0,this.B=md[1]|0,this.C=md[2]|0,this.D=md[3]|0,this.E=md[4]|0,this.F=md[5]|0,this.G=md[6]|0,this.H=md[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)yd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=yd[d-15],f=yd[d-2],p=Uc(h,7)^Uc(h,18)^h>>>3,g=Uc(f,17)^Uc(f,19)^f>>>10;yd[d]=g+yd[d-7]+p+yd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Uc(a,6)^Uc(a,11)^Uc(a,25),f=u+h+Cde(a,c,l)+Ide[d]+yd[d]|0,g=(Uc(r,2)^Uc(r,13)^Uc(r,22))+Ade(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){o0(yd)}destroy(){this.set(0,0,0,0,0,0,0,0),o0(this.buffer)}};const eV=Sq(()=>new xde),Nde=eV;function Tde(t,e){return Nde(kl(t,{strict:!1})?q0(t):t)}function Rde(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Tde(e);return s.set([n],0),r==="bytes"?s:Qr(s)}function Pde(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Rde({commitment:i,to:r,version:n}));return s}const w6=6,tV=32,XM=4096,nV=tV*XM,b6=nV*w6-1-1*XM*w6;class Ode extends ge{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class kde extends ge{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Dde(t){const e=typeof t.data=="string"?Ia(t.data):t.data,n=_r(e);if(!n)throw new kde;if(n>b6)throw new Ode({maxSize:b6,size:n});const r=[];let s=!0,i=0;for(;s;){const o=HM(new Uint8Array(nV));let a=0;for(;a<XM;){const c=e.slice(i,i+(tV-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Qr(o.bytes))}function Mde(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Dde({data:e}),i=t.commitments??Zq({blobs:s,kzg:n,to:r}),o=t.proofs??Xq({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Lde(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new nde({transaction:t})}const rV=["blobVersionedHashes","chainId","fees","gas","nonce","type"],v6=new Map;async function NC(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=rV,type:u}=e,d=n&&Ar(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await ct(t,_l,"getBlock")({blockTag:"latest"}),f)}let g;async function y(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await ct(t,Y0,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const m=await y();h.nonce=await c.consume({address:d.address,chainId:m,client:t})}else h.nonce=await ct(t,ZM,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const m=Zq({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=Pde({commitments:m,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=Xq({blobs:r,commitments:m,kzg:o}),v=Mde({blobs:r,commitments:m,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await y()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=Lde(h)}catch{let m=v6.get(t.uid);if(typeof m>"u"){const b=await p();m=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",v6.set(t.uid,m)}h.type=m?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const m=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await pk(t,{block:m,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new hde({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new KM;if(typeof e.gasPrice>"u"){const m=await p(),{gasPrice:b}=await pk(t,{block:m,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await ct(t,aN,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Jg(h),delete h.parameters,h}async function eL(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const NR=new rN(128);async function TC(t,e){var b,v,A,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...y}=e;if(typeof n>"u")throw new Yg({docsPath:"/docs/actions/wallet/sendTransaction"});const m=n?Ar(n):null;try{Jg(e);const S=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await jq({authorization:i[0]}).catch(()=>{throw new ge("`to` is required. Could not infer from `authorizationList`.")})})();if((m==null?void 0:m.type)==="json-rpc"||m===null){let x;r!==null&&(x=await ct(t,Y0,"getChainId")({}),Wq({currentChainId:x,chain:r}));const T=(A=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:A.format,k=(T||K0)({...oN(y,{format:T}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:m==null?void 0:m.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:S,type:p,value:g}),O=NR.get(t.uid),B=O?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:B,params:[k]},{retryCount:0})}catch(G){if(O===!1)throw G;const W=G;if(W.name==="InvalidInputRpcError"||W.name==="InvalidParamsRpcError"||W.name==="MethodNotFoundRpcError"||W.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(R=>(NR.set(t.uid,!0),R)).catch(R=>{const N=R;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(NR.set(t.uid,!1),W):N});throw W}}if((m==null?void 0:m.type)==="local"){const x=await ct(t,NC,"prepareTransactionRequest")({account:m,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:m.nonceManager,parameters:[...rV,"sidecars"],type:p,value:g,...y,to:S}),T=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,I=await m.signTransaction(x,{serializer:T});return await ct(t,eL,"sendRawTransaction")({serializedTransaction:I})}throw(m==null?void 0:m.type)==="smart"?new XA({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new XA({docsPath:"/docs/actions/wallet/sendTransaction",type:m==null?void 0:m.type})}catch(S){throw S instanceof XA?S:qq(S,{...e,account:m,chain:e.chain||void 0})}}function Ude(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=sN({abi:n,args:r,bytecode:s});return TC(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const gk=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],mk=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],sV=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],iV=[...sV,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],$de=[...sV,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],E6=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],_6=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],C6=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function Bde(t,e={}){typeof e.size<"u"&&Pa(t,{size:e.size});const n=Qr(t,e);return jo(n,e)}function Fde(t,e={}){let n=t;if(typeof e.size<"u"&&(Pa(n,{size:e.size}),n=Il(n)),n.length>1||n[0]>1)throw new Nle(n);return!!n[0]}function $u(t,e={}){typeof e.size<"u"&&Pa(t,{size:e.size});const n=Qr(t,e);return Sc(n,e)}function jde(t,e={}){let n=t;return typeof e.size<"u"&&(Pa(n,{size:e.size}),n=Il(n,{dir:"right"})),new TextDecoder().decode(n)}function RC(t,e){const n=typeof e=="string"?Ia(e):e,r=HM(n);if(_r(n)===0&&t.length>0)throw new CC;if(_r(e)&&_r(e)<32)throw new wq({data:typeof e=="string"?e:Qr(e),params:t,size:_r(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Uy(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Uy(t,e,{staticPosition:n}){const r=WM(e.type);if(r){const[s,i]=r;return Wde(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Vde(t,e,{staticPosition:n});if(e.type==="address")return zde(t);if(e.type==="bool")return Hde(t);if(e.type.startsWith("bytes"))return Gde(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return qde(t,e);if(e.type==="string")return Kde(t,{staticPosition:n});throw new Qle(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const A6=32,yk=32;function zde(t){const e=t.readBytes(32);return[SC(Qr(Mq(e,-20))),32]}function Wde(t,e,{length:n,staticPosition:r}){if(!n){const o=$u(t.readBytes(yk)),a=r+o,c=a+A6;t.setPosition(a);const l=$u(t.readBytes(A6)),u=t_(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=Uy(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(t_(e)){const o=$u(t.readBytes(yk)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Uy(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Uy(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Hde(t){return[Fde(t.readBytes(32),{size:32}),32]}function Gde(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=$u(t.readBytes(32));t.setPosition(n+o);const a=$u(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Qr(c),32]}return[Qr(t.readBytes(Number.parseInt(s),32)),32]}function qde(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?Bde(s,{signed:n}):$u(s,{signed:n}),32]}function Vde(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(t_(e)){const o=$u(t.readBytes(yk)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Uy(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Uy(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function Kde(t,{staticPosition:e}){const n=$u(t.readBytes(32)),r=e+n;t.setPosition(r);const s=$u(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=jde(Il(i));return t.setPosition(e+32),[o,32]}function t_(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(t_);const n=WM(t.type);return!!(n&&t_({...t,type:n[1]}))}const Yde=t=>xs(q0(t));function Qde(t){return Yde(t)}const Jde="1.0.8";let qo=class wk extends Error{constructor(e,n={}){var o;const r=n.cause instanceof wk?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof wk&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Jde}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function ad(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const oV=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,aV=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,cV=/^\(.+?\).*?$/,S6=/^tuple(?<array>(\[(\d*)\])*)$/;function bk(t){let e=t.type;if(S6.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=bk(i),s<n-1&&(e+=", ")}const r=ad(S6,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,bk({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Db(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=bk(s),r!==n-1&&(e+=", ")}return e}function AI(t){var e;return t.type==="function"?`function ${t.name}(${Db(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Db(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Db(t.inputs)})`:t.type==="error"?`error ${t.name}(${Db(t.inputs)})`:t.type==="constructor"?`constructor(${Db(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const lV=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Zde(t){return lV.test(t)}function Xde(t){return ad(lV,t)}const uV=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function ehe(t){return uV.test(t)}function the(t){return ad(uV,t)}const dV=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function nhe(t){return dV.test(t)}function rhe(t){return ad(dV,t)}const hV=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function tL(t){return hV.test(t)}function she(t){return ad(hV,t)}const fV=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function ihe(t){return fV.test(t)}function ohe(t){return ad(fV,t)}const pV=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function ahe(t){return pV.test(t)}function che(t){return ad(pV,t)}const lhe=/^receive\(\) external payable$/;function uhe(t){return lhe.test(t)}const dhe=new Set(["indexed"]),vk=new Set(["calldata","memory","storage"]);class hhe extends qo{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class fhe extends qo{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class phe extends qo{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class ghe extends qo{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class mhe extends qo{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class yhe extends qo{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class whe extends qo{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class bhe extends qo{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Q0 extends qo{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class vhe extends qo{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Ehe extends qo{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class _he extends qo{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Che extends qo{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Ahe(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const TR=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Ek(t,e={}){if(nhe(t))return She(t,e);if(ehe(t))return Ihe(t,e);if(Zde(t))return xhe(t,e);if(ihe(t))return Nhe(t,e);if(ahe(t))return The(t);if(uhe(t))return{type:"receive",stateMutability:"payable"};throw new vhe({signature:t})}function She(t,e={}){const n=rhe(t);if(!n)throw new Q0({signature:t,type:"function"});const r=hc(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(vg(r[a],{modifiers:vk,structs:e,type:"function"}));const o=[];if(n.returns){const a=hc(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(vg(a[l],{modifiers:vk,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function Ihe(t,e={}){const n=the(t);if(!n)throw new Q0({signature:t,type:"event"});const r=hc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(vg(r[o],{modifiers:dhe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function xhe(t,e={}){const n=Xde(t);if(!n)throw new Q0({signature:t,type:"error"});const r=hc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(vg(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Nhe(t,e={}){const n=ohe(t);if(!n)throw new Q0({signature:t,type:"constructor"});const r=hc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(vg(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function The(t){const e=che(t);if(!e)throw new Q0({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Rhe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Phe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Ohe=/^u?int$/;function vg(t,e){var d,h;const n=Ahe(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(TR.has(n))return TR.get(n);const r=cV.test(t),s=ad(r?Phe:Rhe,t);if(!s)throw new ghe({param:t});if(s.name&&Dhe(s.name))throw new mhe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=hc(s.type),p=[],g=f.length;for(let y=0;y<g;y++)p.push(vg(f[y],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Ohe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!gV(c))throw new phe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new yhe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(vk.has(s.modifier)&&!Mhe(c,!!s.array))throw new whe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return TR.set(n,u),u}function hc(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?hc(a,[...e,n.trim()]):hc(a,e,`${n}${o}`,r);case"(":return hc(a,e,`${n}${o}`,r+1);case")":return hc(a,e,`${n}${o}`,r-1);default:return hc(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new Che({current:n,depth:r});return e.push(n.trim()),e}function gV(t){return t==="address"||t==="bool"||t==="function"||t==="string"||oV.test(t)||aV.test(t)}const khe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Dhe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||oV.test(t)||aV.test(t)||khe.test(t)}function Mhe(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function mV(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!tL(a))continue;const c=she(a);if(!c)throw new Q0({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=vg(p,{type:"struct"});u.push(g)}if(!u.length)throw new Ehe({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=yV(c,e)}return r}const Lhe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function yV(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(cV.test(o.type))r.push(o);else{const c=ad(Lhe,o.type);if(!(c!=null&&c.type))throw new bhe({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new _he({type:u});r.push({...o,type:`tuple${l??""}`,components:yV(e[u]??[],e,new Set([...n,u]))})}else if(gV(u))r.push(o);else throw new fhe({type:u})}}return r}function wV(t){const e=mV(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];tL(i)||n.push(Ek(i,e))}return n}function I6(t){let e;if(typeof t=="string")e=Ek(t);else{const n=mV(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!tL(i)){e=Ek(i,n);break}}}if(!e)throw new hhe({signature:t});return e}function Uhe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ge("Unable to normalize signature.");return s}const $he=t=>{const e=typeof t=="string"?t:AI(t);return Uhe(e)};function bV(t){return Qde($he(t))}const cN=bV,PC=t=>a0(bV(t),0,4);function Zg(t){const{abi:e,args:n=[],name:r}=t,s=kl(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?PC(a)===r:a.type==="event"?cN(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?_k(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=vV(a.inputs,o.inputs,n);if(l)throw new Vle({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function _k(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ta(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>_k(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>_k(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function vV(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return vV(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ta(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ta(n[r],{strict:!1}):!1)return o}}const RR="/docs/contract/decodeFunctionResult";function Xg(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=Zg({abi:e,args:n,name:r});if(!a)throw new s0(r,{docsPath:RR});i=a}if(i.type!=="function")throw new s0(void 0,{docsPath:RR});if(!i.outputs)throw new Eq(i.name,{docsPath:RR});const o=RC(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const x6="/docs/contract/encodeFunctionData";function Bhe(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Zg({abi:e,args:n,name:r});if(!i)throw new s0(r,{docsPath:x6});s=i}if(s.type!=="function")throw new s0(void 0,{docsPath:x6});return{abi:[s],functionName:PC(Ic(s))}}function Oa(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:Bhe(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Af(s.inputs,e??[]):void 0;return V0([i,o??"0x"])}function J0({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new ik({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new ik({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const EV={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},_V={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Fhe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function jhe(t){const{abi:e,data:n}=t,r=a0(n,0,4);if(r==="0x")throw new CC;const i=[...e||[],_V,Fhe].find(o=>o.type==="error"&&r===PC(Ic(o)));if(!i)throw new bq(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?RC(i.inputs,a0(n,4)):void 0,errorName:i.name}}function CV({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Kr(e[i]):e[i]}`).join(", ")})`}class AV extends ge{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var y;const p=n?Ar(n):void 0;let g=xC({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${GM(h)} ${((y=s==null?void 0:s.nativeCurrency)==null?void 0:y.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${no(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${no(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${no(l)} gwei`,nonce:u});f&&(g+=`
${vde(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class SV extends ge{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Zg({abi:n,args:r,name:o}),l=c?CV({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Ic(c,{includeName:!0}):void 0,d=xC({address:s&&ide(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class Ck extends ge{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=jhe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=EV[f]}else{const f=u?Ic(u,{includeName:!0}):void 0,p=u&&h?CV({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof bq&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class zhe extends ge{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Whe extends ge{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class lN extends ge{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function nL(t,e){var r,s,i,o,a,c;if(!(t instanceof ge))return!1;const n=t.walk(l=>l instanceof Ck);return n instanceof Ck?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===EV[50]):!1}function Hhe(t){const{abi:e,data:n}=t,r=a0(n,0,4),s=e.find(i=>i.type==="function"&&r===PC(Ic(i)));if(!s)throw new qle(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?RC(s.inputs,a0(n,4)):void 0}}const PR="/docs/contract/encodeErrorResult";function N6(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=Zg({abi:e,args:r,name:n});if(!c)throw new i6(n,{docsPath:PR});s=c}if(s.type!=="error")throw new i6(void 0,{docsPath:PR});const i=Ic(s),o=PC(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Hle(s.name,{docsPath:PR});a=Af(s.inputs,r)}return V0([o,a])}const OR="/docs/contract/encodeFunctionResult";function Ghe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=Zg({abi:e,name:n});if(!o)throw new s0(n,{docsPath:OR});s=o}if(s.type!=="function")throw new s0(void 0,{docsPath:OR});if(!s.outputs)throw new Eq(s.name,{docsPath:OR});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new _q(r)})();return Af(s.outputs,i)}const rL="x-batch-gateway:true";async function qhe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=Hhe({abi:mk,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(rL)?await qhe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=Vhe(c)}})),Ghe({abi:mk,functionName:"query",result:[s,i]})}function Vhe(t){return t.name==="HttpRequestError"&&t.status?N6({abi:mk,errorName:"HttpError",args:[t.status,t.shortMessage]}):N6({abi:[_V],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function IV(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return kl(e)?e:null}function eS(t){let e=new Uint8Array(32).fill(0);if(!t)return Qr(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=IV(n[r]),i=s?q0(s):xs(eg(n[r]),"bytes");e=xs(Na([e,i]),"bytes")}return Qr(e)}function Khe(t){return`[${t.slice(2)}]`}function Yhe(t){const e=new Uint8Array(32).fill(0);return t?IV(t)||xs(eg(t)):Qr(e)}function uN(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(eg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=eg(s[i]);o.byteLength>255&&(o=eg(Khe(Yhe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Qhe=3;function Eg(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof lN?t:t instanceof ge?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof CC?new zhe({functionName:i}):[Qhe,wg.code].includes(c)&&(l||u||d||h)?new Ck({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof VM?u:h??d}):t;return new SV(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const sL=BigInt(0),Ak=BigInt(1);function SI(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function z1(t){const e=t.toString(16);return e.length&1?"0"+e:e}function xV(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?sL:BigInt("0x"+t)}function dN(t){return xV(BE(t))}function NV(t){return xc(t),xV(BE(Uint8Array.from(t).reverse()))}function iL(t,e){return UM(t.toString(16).padStart(e*2,"0"))}function TV(t,e){return iL(t,e).reverse()}function la(t,e,n){let r;if(typeof e=="string")try{r=UM(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(LM(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const kR=t=>typeof t=="bigint"&&sL<=t;function Jhe(t,e,n){return kR(t)&&kR(e)&&kR(n)&&e<=t&&t<n}function Zhe(t,e,n,r){if(!Jhe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Xhe(t){let e;for(e=0;t>sL;t>>=Ak,e+=1);return e}const hN=t=>(Ak<<BigInt(t))-Ak;function efe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return dp(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function oL(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function T6(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const tfe="0.1.1";function nfe(){return tfe}let Pr=class Sk extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof Sk){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Sk&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${nfe()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return RV(this,e)}};function RV(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?RV(t.cause,e):e?null:t}const rfe="#__bigint";function sfe(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+rfe:s,n)}function ife(t,e){if(P6(t)>e)throw new gfe({givenSize:P6(t),maxSize:e})}const Kl={zero:48,nine:57,A:65,F:70,a:97,f:102};function R6(t){if(t>=Kl.zero&&t<=Kl.nine)return t-Kl.zero;if(t>=Kl.A&&t<=Kl.F)return t-(Kl.A-10);if(t>=Kl.a&&t<=Kl.f)return t-(Kl.a-10)}function ofe(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new mfe({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function aL(t,e){if(Ra(t)>e)throw new Efe({givenSize:Ra(t),maxSize:e})}function afe(t,e){if(typeof e=="number"&&e>0&&e>Ra(t)-1)throw new MV({offset:e,position:"start",size:Ra(t)})}function cfe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ra(t)!==n-e)throw new MV({offset:n,position:"end",size:Ra(t)})}function PV(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new _fe({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const lfe=new TextEncoder;function ufe(t){return t instanceof Uint8Array?t:typeof t=="string"?hfe(t):dfe(t)}function dfe(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function hfe(t,e={}){const{size:n}=e;let r=t;n&&(aL(t,n),r=Cg(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=R6(s.charCodeAt(c++)),u=R6(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new Pr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function ffe(t,e={}){const{size:n}=e,r=lfe.encode(t);return typeof n=="number"?(ife(r,n),pfe(r,n)):r}function pfe(t,e){return ofe(t,{dir:"right",size:e})}function P6(t){return t.length}let gfe=class extends Pr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},mfe=class extends Pr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const yfe=new TextEncoder,wfe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bfe(t,e={}){const{strict:n=!1}=e;if(!t)throw new O6(t);if(typeof t!="string")throw new O6(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new k6(t);if(!t.startsWith("0x"))throw new k6(t)}function Ml(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function OV(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(aL(n,e.size),_g(n,e.size)):n}function kV(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=wfe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(aL(r,e.size),Cg(r,e.size)):r}function ui(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new DV({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?_g(c,r):c}function cL(t,e={}){return kV(yfe.encode(t),e)}function _g(t,e){return PV(t,{dir:"left",size:e})}function Cg(t,e){return PV(t,{dir:"right",size:e})}function lL(t,e,n,r={}){const{strict:s}=r;afe(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&cfe(i,e,n),i}function Ra(t){return Math.ceil((t.length-2)/2)}function vfe(t,e={}){const{strict:n=!1}=e;try{return bfe(t,{strict:n}),!0}catch{return!1}}let DV=class extends Pr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class O6 extends Pr{constructor(e){super(`Value \`${typeof e=="object"?sfe(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class k6 extends Pr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Efe=class extends Pr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class MV extends Pr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let _fe=class extends Pr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Cfe(t){return{address:t.address,amount:ui(t.amount),index:ui(t.index),validatorIndex:ui(t.validatorIndex)}}function LV(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:ui(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:ui(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:ui(t.gasLimit)},...typeof t.number=="bigint"&&{number:ui(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:ui(t.prevRandao)},...typeof t.time=="bigint"&&{time:ui(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Cfe)}}}const Afe="0x82ad56cb",UV="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Sfe="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Ife="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function $V(t,{docsPath:e,...n}){const r=(()=>{const s=iN(t,n);return s instanceof IC?t:s})();return new AV(r,{docsPath:e,...n})}function uL(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const DR=new Map;function BV({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>DR.delete(e),a=()=>c().map(({args:u})=>u),c=()=>DR.get(e)||[],l=u=>DR.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=uL();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function OC(t,e){var G,W,R,N;const{account:n=t.account,authorizationList:r,batch:s=!!((G=t.batch)!=null&&G.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:A,value:C,stateOverride:S,...x}=e,T=n?Ar(n):void 0;if(u&&(h||f))throw new ge("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new ge("Cannot provide both `code` & `to` as parameters.");const I=u&&d,k=h&&f&&A&&d,O=I||k,B=I?Tfe({code:u,data:d}):k?Rfe({data:d,factory:h,factoryData:f,to:A}):d;try{Jg(e);const P=(typeof i=="bigint"?tt(i):void 0)||o,D=l?LV(l):void 0,F=QM(S),H=(N=(R=(W=t.chain)==null?void 0:W.formatters)==null?void 0:R.transactionRequest)==null?void 0:N.format,re=(H||K0)({...oN(x,{format:H}),from:T==null?void 0:T.address,accessList:a,authorizationList:r,blobs:c,data:B,gas:p,gasPrice:g,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:O?void 0:A,value:C});if(s&&xfe({request:re})&&!F&&!D)try{return await Nfe(t,{...re,blockNumber:i,blockTag:o})}catch(Ce){if(!(Ce instanceof zq)&&!(Ce instanceof ik))throw Ce}const ie=(()=>{const Ce=[re,P];return F&&D?[...Ce,F,D]:F?[...Ce,F]:D?[...Ce,{},D]:Ce})(),le=await t.request({method:"eth_call",params:ie});return le==="0x"?{data:void 0}:{data:le}}catch(M){const P=Pfe(M),{offchainLookup:D,offchainLookupSignature:F}=await qs(async()=>{const{offchainLookup:H,offchainLookupSignature:te}=await import("./ccip-_89kzRXL.js");return{offchainLookup:H,offchainLookupSignature:te}},[]);if(t.ccipRead!==!1&&(P==null?void 0:P.slice(0,10))===F&&A)return{data:await D(t,{data:P,to:A})};throw O&&(P==null?void 0:P.slice(0,10))==="0x101bb98d"?new Whe({factory:h}):$V(M,{...e,account:T,chain:t.chain})}}function xfe({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Afe)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Nfe(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new zq;l=J0({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?tt(s):void 0)||i,{schedule:h}=BV({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(y){return y.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async y=>{const m=y.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),b=Oa({abi:gk,args:[m],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return Xg({abi:gk,args:[m],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new lN({data:f});return f==="0x"?{data:void 0}:{data:f}}function Tfe(t){const{code:e,data:n}=t;return sN({abi:wV(["constructor(bytes, bytes)"]),bytecode:UV,args:[e,n]})}function Rfe(t){const{data:e,factory:n,factoryData:r,to:s}=t;return sN({abi:wV(["constructor(address, bytes, address, bytes)"]),bytecode:Sfe,args:[s,e,n,r]})}function Pfe(t){var n;if(!(t instanceof ge))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Ll(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Oa({abi:n,args:s,functionName:i});try{const{data:c}=await ct(t,OC,"call")({...o,data:a,to:r});return Xg({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Eg(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Ofe(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return J0({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Oa({abi:_6,functionName:"addr",...s!=null?{args:[eS(i),BigInt(s)]}:{args:[eS(i)]}}),h={address:l,abi:iV,functionName:"resolve",args:[xa(uN(i)),d,o??[rL]],blockNumber:n,blockTag:r},p=await ct(t,Ll,"readContract")(h);if(p[0]==="0x")return null;const g=Xg({abi:_6,args:s!=null?[eS(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Il(g)==="0x00"?null:g}catch(d){if(a)throw d;if(nL(d,"resolve"))return null;throw d}}class kfe extends ge{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class Mb extends ge{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class dL extends ge{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Dfe extends ge{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Mfe=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Lfe=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Ufe=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,$fe=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Bfe(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function D6(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function FV({uri:t,gatewayUrls:e}){const n=Ufe.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=D6(e==null?void 0:e.ipfs,"https://ipfs.io"),s=D6(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(Mfe),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||Lfe.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace($fe,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new dL({uri:t})}function jV(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new kfe({data:t});return t.image||t.image_url||t.image_data}async function Ffe({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await hL({gatewayUrls:t,uri:jV(n)})}catch{throw new dL({uri:e})}}async function hL({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=FV({uri:e,gatewayUrls:t});if(r||await Bfe(n))return n;throw new dL({uri:e})}function jfe(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new Mb({reason:"Only EIP-155 supported"});if(!o)throw new Mb({reason:"Chain ID not found"});if(!c)throw new Mb({reason:"Contract address not found"});if(!s)throw new Mb({reason:"Token ID not found"});if(!a)throw new Mb({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function zfe(t,{nft:e}){if(e.namespace==="erc721")return Ll(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Ll(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Dfe({namespace:e.namespace})}async function Wfe(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?Hfe(t,{gatewayUrls:e,record:n}):hL({uri:n,gatewayUrls:e})}async function Hfe(t,{gatewayUrls:e,record:n}){const r=jfe(n),s=await zfe(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=FV({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return hL({uri:jV(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),Ffe({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function zV(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return J0({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:iV,functionName:"resolve",args:[xa(uN(i)),Oa({abi:E6,functionName:"text",args:[eS(i),s]}),o??[rL]],blockNumber:n,blockTag:r},f=await ct(t,Ll,"readContract")(d);if(f[0]==="0x")return null;const p=Xg({abi:E6,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(nL(d,"resolve"))return null;throw d}}async function Gfe(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await ct(t,zV,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await Wfe(t,{record:c,gatewayUrls:r})}catch{return null}}async function WV(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=J0({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:$de,functionName:"reverse",args:[xa(uN(c))],blockNumber:n,blockTag:r},u=ct(t,Ll,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(nL(l,"reverse"))return null;throw l}}async function qfe(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return J0({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await ct(t,Ll,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[xa(uN(s))],blockNumber:n,blockTag:r});return c}async function HV(t,e){var y,m,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?Ar(n):void 0;try{Jg(e);const A=(typeof r=="bigint"?tt(r):void 0)||s,C=(b=(m=(y=t.chain)==null?void 0:y.formatters)==null?void 0:m.transactionRequest)==null?void 0:b.format,x=(C||K0)({...oN(p,{format:C}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),T=await t.request({method:"eth_createAccessList",params:[x,A]});return{accessList:T.accessList,gasUsed:BigInt(T.gasUsed)}}catch(v){throw $V(v,{...e,account:g,chain:t.chain})}}function fN(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function Vfe(t){const e=fN(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class Kfe extends ge{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const M6="/docs/contract/encodeEventTopics";function kC(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=Zg({abi:e,name:n});if(!l)throw new o6(n,{docsPath:M6});s=l}if(s.type!=="event")throw new o6(void 0,{docsPath:M6});const i=Ic(s),o=cN(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>L6({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?L6({param:d,value:u[h]}):null))??[])}return[o,...a]}function L6({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return xs(q0(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new Kfe(t.type);return Af([t],[e])}async function GV(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=fN(t,{method:"eth_newFilter"}),u=i?kC({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?tt(o):o,toBlock:typeof c=="bigint"?tt(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function qV(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=fN(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>kC({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?tt(i):i,toBlock:typeof a=="bigint"?tt(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function VV(t){const e=fN(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Yfe(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Oa({abi:n,args:s,functionName:i});try{return await ct(t,aN,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Ar(a.account):void 0;throw Eg(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function Qfe(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const Jfe=new Map,Zfe=new Map;function Xfe(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Jfe),r=e(t,Zfe);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function epe(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Xfe(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const tpe=t=>`blockNumber.${t}`;async function DC(t,{cacheTime:e=t.cacheTime}={}){const n=await epe(()=>t.request({method:"eth_blockNumber"}),{cacheKey:tpe(t.uid),cacheTime:e});return BigInt(n)}async function npe(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?tt(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Sc(i)}async function U6(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?tt(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function pN(t,e){if(!Ta(t,{strict:!1}))throw new lf({address:t});if(!Ta(e,{strict:!1}))throw new lf({address:e});return t.toLowerCase()===e.toLowerCase()}const $6="/docs/contract/decodeEventLog";function fL(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new Gle({docsPath:$6});const c=e.find(g=>g.type==="event"&&o===cN(Ic(g)));if(!(c&&"name"in c)||c.type!=="event")throw new vq(o,{docsPath:$6});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,y)=>[g,y]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[y,m]=f[g],b=a[g];if(!b)throw new nN({abiItem:c,param:y});h[d?m:y.name||m]=rpe({param:y,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=RC(p,n);if(g)if(d)for(let y=0;y<u.length;y++)h[y]=h[y]??g.shift();else for(let y=0;y<p.length;y++)h[p[y].name]=g[y]}catch(g){if(i)throw g instanceof wq||g instanceof $q?new UE({abiItem:c,data:n,params:p,size:_r(n)}):g}else if(i)throw new UE({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function rpe({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(RC([t],e)||[])[0]}function pL(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===cN(u));if(!c)return null;const l=fL({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!spe({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof vq)return null;if(c instanceof UE||c instanceof nN){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function spe(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?pN(o,a):i.type==="string"||i.type==="bytes"?xs(q0(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function Zu(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function gL(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>kC({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?tt(r):r,toBlock:typeof s=="bigint"?tt(s):s}]});const f=h.map(p=>Zu(p));return u?pL({abi:u,args:a,logs:f,strict:l}):f}async function KV(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?Zg({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return ct(t,gL,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class ipe extends ge{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function ope(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await ct(t,Ll,"readContract")({abi:ape,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new ipe({address:n}):o}}const ape=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function cpe(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function lpe(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?tt(n):void 0,o=await t.request({method:"eth_feeHistory",params:[tt(e),i||r,s]},{dedupe:!!i});return cpe(o)}async function gN(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Zu(i));return!("abi"in e)||!e.abi?s:pL({abi:e.abi,logs:s,strict:n})}async function upe(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>Zu(i));return e.abi?pL({abi:e.abi,logs:s,strict:n}):s}async function dpe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?tt(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function mN(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?tt(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,tt(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,tt(i)]},{dedupe:!!a}),!c)throw new Hq({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||Yq)(c)}async function hpe(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([ct(t,DC,"getBlockNumber")({}),e?ct(t,mN,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const YV={"0x0":"reverted","0x1":"success"};function fpe(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>Zu(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Sc(t.transactionIndex):null,status:t.status?YV[t.status]:null,type:t.type?Kq[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function Ik(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new Gq({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||fpe)(n)}async function QV(t,e){var m;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((m=t.batch)==null?void 0:m.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=J0({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:A,args:C,functionName:S}=l[b];try{const x=Oa({abi:v,args:C,functionName:S});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:A}]}catch(x){const T=Eg(x,{abi:v,address:A,args:C,docsPath:"/docs/contract/multicall",functionName:S,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(b=>ct(t,Ll,"readContract")({abi:gk,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),y=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let C=0;C<h[b].length;C++)y.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let C=0;C<A.length;C++){const{returnData:S,success:x}=A[C],{callData:T}=h[b][C],{abi:I,address:k,functionName:O,args:B}=l[y.length];try{if(T==="0x")throw new CC;if(!x)throw new lN({data:S});const G=Xg({abi:I,args:B,data:S,functionName:O});y.push(r?{result:G,status:"success"}:G)}catch(G){const W=Eg(G,{abi:I,address:k,args:B,docsPath:"/docs/contract/multicall",functionName:O});if(!r)throw W;y.push({error:W,result:void 0,status:"failure"})}}}if(y.length!==l.length)throw new ge("multicall results mismatch");return y}async function xk(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?LV(h.blockOverrides):void 0,p=h.calls.map(y=>{const m=y,b=m.account?Ar(m.account):void 0,v=m.abi?Oa(m):m.data,A={...m,data:m.dataSuffix?Na([v||"0x",m.dataSuffix]):v,from:m.from??(b==null?void 0:b.address)};return Jg(A),K0(A)}),g=h.stateOverrides?QM(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?tt(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...Qq(h),calls:h.calls.map((p,g)=>{var k,O;const{abi:y,args:m,functionName:b,to:v}=s[f].calls[g],A=((k=p.error)==null?void 0:k.data)??p.returnData,C=BigInt(p.gasUsed),S=(O=p.logs)==null?void 0:O.map(B=>Zu(B)),x=p.status==="0x1"?"success":"failure",T=y&&x==="success"&&A!=="0x"?Xg({abi:y,data:A,functionName:b}):null,I=(()=>{var G;if(x==="success")return;let B;if(((G=p.error)==null?void 0:G.data)==="0x"?B=new CC:p.error&&(B=new lN(p.error)),!!B)return Eg(B,{abi:y??[],address:v??"0x",args:m,functionName:b??"<unknown>"})})();return{data:A,gasUsed:C,logs:S,status:x,...x==="success"?{result:T}:{error:I}}})}))}catch(c){const l=c,u=iN(l,{});throw u instanceof IC?l:u}}function JV(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=FM(ufe(t));return n==="Bytes"?r:kV(r)}let ppe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const gpe={checksum:new ppe(8192)},MR=gpe.checksum,mpe=/^0x[a-fA-F0-9]{40}$/;function yN(t,e={}){const{strict:n=!0}=e;if(!mpe.test(t))throw new B6({address:t,cause:new wpe});if(n){if(t.toLowerCase()===t)return;if(ype(t)!==t)throw new B6({address:t,cause:new bpe})}}function ype(t){if(MR.has(t))return MR.get(t);yN(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=JV(ffe(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return MR.set(t,s),s}function Nk(t,e={}){const{strict:n=!0}=e??{};try{return yN(t,{strict:n}),!0}catch{return!1}}class B6 extends Pr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class wpe extends Pr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class bpe extends Pr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function Tk(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Pr("Unable to normalize signature.");return s}function Rk(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Nk(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>Rk(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>Rk(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function ZV(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return ZV(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Nk(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Nk(n[r],{strict:!1}):!1)return o}}function XV(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?I6(t):t;return{...r,...n?{hash:wy(r)}:{}}}function vpe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=vfe(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?eK(l)===lL(e,0,4):l.type==="event"?wy(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new Pk({name:e});if(o.length===1)return{...o[0],...s?{hash:wy(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:wy(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?Rk(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=ZV(l.inputs,a.inputs,r);if(d)throw new _pe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new Pk({name:e});return{...c,...s?{hash:wy(c)}:{}}}function eK(t){return lL(wy(t),0,4)}function Epe(t){const e=typeof t=="string"?t:AI(t);return Tk(e)}function wy(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:JV(cL(Epe(t)))}class _pe extends Pr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${Tk(AI(e.abiItem))}\`, and`,`\`${n.type}\` in \`${Tk(AI(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Pk extends Pr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const Cpe=/^(.*)\[([0-9]*)\]$/,Ape=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,tK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Spe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(mL({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function mL({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=kpe(r.type);if(s){const[i,o]=s;return xpe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return Ope(n,{checksumAddress:t,parameter:r});if(r.type==="address")return Ipe(n,{checksum:t});if(r.type==="bool")return Tpe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=tK.exec(r.type)??[];return Rpe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return Npe(n,{type:r.type});if(r.type==="string")return Ppe(n);throw new iK(r.type)}function yL(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Ra(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(ui(e+s,{size:32})),r.push(a),s+=Ra(a)):n.push(a)}return Ml(...n,...r)}function Ipe(t,e){const{checksum:n=!1}=e;return yN(t,{strict:n}),{dynamic:!1,encoded:_g(t.toLowerCase())}}function xpe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new Mpe(t);if(!i&&t.length!==r)throw new Dpe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=mL({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=yL(a);if(i){const l=ui(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Ml(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Ml(...a.map(({encoded:c})=>c))}}function Npe(t,{type:e}){const[,n]=e.split("bytes"),r=Ra(t);if(!n){let s=t;return r%32!==0&&(s=Cg(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Ml(_g(ui(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new rK({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Cg(t)}}function Tpe(t){if(typeof t!="boolean")throw new Pr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:_g(OV(t))}}function Rpe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new DV({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:ui(t,{size:32,signed:e})}}function Ppe(t){const e=cL(t),n=Math.ceil(Ra(e)/32),r=[];for(let s=0;s<n;s++)r.push(Cg(lL(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Ml(Cg(ui(Ra(e),{size:32})),...r)}}function Ope(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=mL({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?yL(i):Ml(...i.map(({encoded:o})=>o))}}function kpe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function nK(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new sK({expectedLength:t.length,givenLength:e.length});const s=Spe({checksumAddress:r,parameters:t,values:e}),i=yL(s);return i.length===0?"0x":i}function Ok(t,e){if(t.length!==e.length)throw new sK({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(Ok.encode(s,i))}return Ml(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return yN(c),_g(c.toLowerCase(),s?32:0)}if(n==="string")return cL(r);if(n==="bytes")return r;if(n==="bool")return _g(OV(r),s?32:1);const i=n.match(tK);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return ui(r,{size:s?32:d,signed:l==="int"})}const o=n.match(Ape);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new rK({expectedSize:Number.parseInt(l),value:r});return Cg(r,s?32:0)}const a=n.match(Cpe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Ml(...u)}throw new iK(n)}t.encode=e})(Ok||(Ok={}));class Dpe extends Pr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class rK extends Pr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Ra(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class sK extends Pr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Mpe extends Pr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class iK extends Pr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function Lpe(t,e){var s;const{bytecode:n,args:r}=e;return Ml(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?nK(t.inputs,r):"0x")}function Upe(t){return XV(t)}function $pe(t,...e){const{overloads:n}=t,r=n?Bpe([t,...n],t.name,{args:e[0]}):t,s=Fpe(r),i=e.length>0?nK(r.inputs,e[0]):void 0;return i?Ml(s,i):s}function Em(t,e={}){return XV(t,e)}function Bpe(t,e,n){const r=vpe(t,e,n);if(r.type!=="function")throw new Pk({name:e,type:"function"});return r}function Fpe(t){return eK(t)}const jpe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",$c="0x0000000000000000000000000000000000000000",W1=new rN(8192);function zpe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(W1.get(n))return W1.get(n);const r=t().finally(()=>W1.delete(n));return W1.set(n,r),r}async function II(t){return new Promise(e=>setTimeout(e,t))}function xI(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await II(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function Wpe(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new fp(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new fp(new Error("method not supported"),{method:l});const u=s?r0(`${c}.${Kr(n)}`):void 0;return zpe(()=>xI(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case FE.code:throw new FE(f);case jE.code:throw new jE(f);case zE.code:throw new zE(f,{method:n.method});case WE.code:throw new WE(f);case wg.code:throw new wg(f);case bg.code:throw new bg(f);case HE.code:throw new HE(f);case qh.code:throw new qh(f);case c0.code:throw new c0(f);case fp.code:throw new fp(f,{method:n.method});case l0.code:throw new l0(f);case GE.code:throw new GE(f);case Fr.code:throw new Fr(f);case qE.code:throw new qE(f);case VE.code:throw new VE(f);case KE.code:throw new KE(f);case YE.code:throw new YE(f);case Dl.code:throw new Dl(f);case u0.code:throw new u0(f);case QE.code:throw new QE(f);case JE.code:throw new JE(f);case ZE.code:throw new ZE(f);case XE.code:throw new XE(f);case e_.code:throw new e_(f);case d0.code:throw new d0(f);case 5e3:throw new Fr(f);default:throw h instanceof ge?h:new ade(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof Wv){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>Hpe(h)}),{enabled:s,id:u})}}function Hpe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===l0.code||t.code===wg.code:t instanceof Wv&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function Gpe(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function oK(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function qpe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const F6=qpe();function Vpe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await oK(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Kr(r.map(v=>({jsonrpc:"2.0",id:v.id??F6.take(),...v}))):Kr({jsonrpc:"2.0",id:r.id??F6.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},y=new Request(t,g),m=await(s==null?void 0:s(y,g))??{...g,url:t};return await fetch(m.url??t,m)},{errorInstance:new g6({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new Wv({body:r,details:Kr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof Wv||h instanceof g6?h:new Wv({body:r,cause:h,url:t})}}}}class Kpe extends ge{constructor({domain:e}){super(`Invalid domain "${Kr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Ype extends ge{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Qpe extends ge{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Jpe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:hK({domain:e}),...t.types};dK({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(Zpe({domain:e,types:s})),r!=="EIP712Domain"&&i.push(aK({data:n,primaryType:r,types:s})),xs(Na(i))}function Zpe({domain:t,types:e}){return aK({data:t,primaryType:"EIP712Domain",types:e})}function aK({data:t,primaryType:e,types:n}){const r=cK({data:t,primaryType:e,types:n});return xs(r)}function cK({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[Xpe({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=uK({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Af(r,s)}function Xpe({primaryType:t,types:e}){const n=xa(ege({primaryType:t,types:e}));return xs(n)}function ege({primaryType:t,types:e}){let n="";const r=lK({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function lK({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])lK({primaryType:i.type,types:e},n);return n}function uK({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},xs(cK({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},xs(r)];if(n==="string")return[{type:"bytes32"},xs(xa(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>uK({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},xs(Af(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function tge(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Kr({domain:o,message:a,primaryType:r,types:s})}function dK(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(Lq);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,y,m]=h;tt(d,{signed:y==="int",size:Number.parseInt(m)/8})}if(u==="address"&&typeof d=="string"&&!Ta(d))throw new lf({address:d});const f=u.match(Pue);if(f){const[g,y]=f;if(y&&_r(d)!==Number.parseInt(y))throw new Kle({expectedSize:Number.parseInt(y),givenSize:_r(d)})}const p=s[u];p&&(nge(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new Kpe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new Ype({primaryType:r,types:s})}function hK({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function nge(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new Qpe({type:t})}const rge=`Ethereum Signed Message:
`;function sge(t){const e=typeof t=="string"?r0(t):typeof t.raw=="string"?t.raw:Qr(t.raw),n=r0(`${rge}${_r(e)}`);return Na([n,e])}function fK(t,e){return xs(sge(t),e)}const pK="0x6492649264926492649264926492649264926492649264926492649264926492";function ige(t){return EI(t,-32)===pK}function oge(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=V0([Af([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),pK]);return s==="hex"?i:Ia(i)}class age extends ge{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function cge(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new age({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const lge="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function uge(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Ar(e.account):void 0;if(o&&!l)throw new ge("`account` is required when `traceAssetChanges` is true");const u=l?Lpe(Upe("constructor(bytes, bytes)"),{bytecode:UV,args:[lge,$pe(Em("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async P=>{if(!P.data&&!P.abi)return;const{accessList:D}=await HV(t,{account:l.address,...P,data:P.abi?Oa(P):P.data});return D.map(({address:F,storageKeys:H})=>H.length>0?F:null)})).then(P=>P.flat().filter(Boolean)):[],h=await xk(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((P,D)=>({abi:[Em("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:P,from:$c,nonce:D})),stateOverrides:[{address:$c,nonce:0}]}]:[],{calls:[...s,{}].map(P=>({...P,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((P,D)=>({abi:[Em("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:P,from:$c,nonce:D})),stateOverrides:[{address:$c,nonce:0}]},{calls:d.map((P,D)=>({to:P,abi:[Em("function decimals() returns (uint256)")],functionName:"decimals",from:$c,nonce:D})),stateOverrides:[{address:$c,nonce:0}]},{calls:d.map((P,D)=>({to:P,abi:[Em("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:$c,nonce:D})),stateOverrides:[{address:$c,nonce:0}]},{calls:d.map((P,D)=>({to:P,abi:[Em("function symbol() returns (string)")],functionName:"symbol",from:$c,nonce:D})),stateOverrides:[{address:$c,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,y,m,b,v,A]=o?h:[],{calls:C,...S}=f,x=C.slice(0,-1)??[],T=(p==null?void 0:p.calls)??[],I=(g==null?void 0:g.calls)??[],k=[...T,...I].map(P=>P.status==="success"?jo(P.data):null),O=(y==null?void 0:y.calls)??[],B=(m==null?void 0:m.calls)??[],G=[...O,...B].map(P=>P.status==="success"?jo(P.data):null),W=((b==null?void 0:b.calls)??[]).map(P=>P.status==="success"?P.result:null),R=((A==null?void 0:A.calls)??[]).map(P=>P.status==="success"?P.result:null),N=((v==null?void 0:v.calls)??[]).map(P=>P.status==="success"?P.result:null),M=[];for(const[P,D]of G.entries()){const F=k[P];if(typeof D!="bigint"||typeof F!="bigint")continue;const H=W[P-1],te=R[P-1],re=N[P-1],ie=P===0?{address:jpe,decimals:18,symbol:"ETH"}:{address:d[P-1],decimals:re||H?Number(H??1):void 0,symbol:te??void 0};M.some(le=>le.token.address===ie.address)||M.push({token:ie,value:{pre:F,post:D,diff:D-F}})}return{assetChanges:M,block:S,results:x}}const LR=new Map,j6=new Map;let dge=0;function Xu(t,e,n){const r=++dge,s=()=>LR.get(t)||[],i=()=>{const u=s();LR.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=j6.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(LR.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&j6.set(t,l),o}function Z0(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await II(c);const l=async()=>{s&&(await t({unpoll:i}),await II(r),l())};l()})(),i}function hge(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=Kr(["watchBlocks",t.uid,e,n,r,u,c]);return Xu(p,{onBlock:s,onError:i},g=>Z0(async()=>{var y;try{const m=await ct(t,_l,"getBlock")({blockTag:e,includeTransactions:u});if(m.number!==null&&(d==null?void 0:d.number)!=null){if(m.number===d.number)return;if(m.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<m.number;b++){const v=await ct(t,_l,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(m==null?void 0:m.number)==null||m.number!==null&&m.number>d.number)&&(g.onBlock(m,d),d=m)}catch(m){(y=g.onError)==null||y.call(g,m)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,y=()=>p=!1;return(async()=>{try{r&&ct(t,_l,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const m=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:b}=await m.subscribe({params:["newHeads"],async onData(v){var C;if(!p)return;const A=await ct(t,_l,"getBlock")({blockNumber:(C=v.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(A,d),g=!1,d=A)},onError(v){i==null||i(v)}});y=b,p||y()}catch(m){i==null||i(m)}})(),()=>y()})()}function gK(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Kr(["watchBlockNumber",t.uid,e,n,o]);return Xu(d,{onBlockNumber:r,onError:s},h=>Z0(async()=>{var f;try{const p=await ct(t,DC,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Kr(["watchBlockNumber",t.uid,e,n]);return Xu(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const m=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return m?m.value:t.transport}return t.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(m){var v;if(!f)return;const b=jo((v=m.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(m){var b;(b=h.onError)==null||b.call(h,m)}});p=y,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function wN(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function fge(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const y=Kr(["watchEvent",e,n,r,t.uid,s,u,o]);return Xu(y,{onLogs:c,onError:a},m=>{let b;o!==void 0&&(b=o-1n);let v,A=!1;const C=Z0(async()=>{var S;if(!A){try{v=await ct(t,qV,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}A=!0;return}try{let x;if(v)x=await ct(t,gN,"getFilterChanges")({filter:v});else{const T=await ct(t,DC,"getBlockNumber")({});b&&b!==T?x=await ct(t,gL,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:T}):x=[],b=T}if(x.length===0)return;if(r)m.onLogs(x);else for(const T of x)m.onLogs([T])}catch(x){v&&x instanceof bg&&(A=!1),(S=m.onError)==null||S.call(m,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await ct(t,wN,"uninstallFilter")({filter:v}),C()}})})():(()=>{let y=!0,m=()=>y=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const S=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return S?S.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let A=[];v&&(A=[v.flatMap(x=>kC({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:C}=await b.subscribe({params:["logs",{address:e,topics:A}],onData(S){var T;if(!y)return;const x=S.result;try{const{eventName:I,args:k}=fL({abi:v??[],data:x.data,topics:x.topics,strict:f}),O=Zu(x,{args:k,eventName:I});c([O])}catch(I){let k,O;if(I instanceof UE||I instanceof nN){if(d)return;k=I.abiItem.name,O=(T=I.abiItem.inputs)==null?void 0:T.some(G=>!("name"in G&&G.name))}const B=Zu(x,{args:O?[]:{},eventName:k});c([B])}},onError(S){a==null||a(S)}});m=C,y||m()}catch(b){a==null||a(b)}})(),()=>m()})()}function mK(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Kr(["watchPendingTransactions",t.uid,e,i]);return Xu(l,{onTransactions:r,onError:n},u=>{let d;const h=Z0(async()=>{var f;try{if(!d)try{d=await ct(t,VV,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await ct(t,gN,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await ct(t,wN,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function pge(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>SC(r))}async function gge(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function mge(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Ar(n):void 0,i=r?[s==null?void 0:s.address,[tt(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const yK="0x5792579257925792579257925792579257925792579257925792579257925792",wK=tt(0,{size:32});async function yge(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Ar(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Oa({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Na([p,f.dataSuffix]):p,to:f.to,value:f.value?tt(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:tt(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new u0(new ge(b,{details:b}))}if(a&&d.length>1){const m="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new d0(new ge(m,{details:m}))}const p=[];for(const m of d){const b=TC(t,{account:u,chain:s,data:m.data,to:m.to,value:m.value?jo(m.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(m=>m.status==="rejected"))throw g[0].reason;const y=g.map(m=>m.status==="fulfilled"?m.value:wK);return{id:Na([...y,tt(s.id,{size:32}),yK])}}throw qq(h,{...e,account:u,chain:e.chain})}}async function bK(t,e){async function n(u){if(u.endsWith(yK.slice(2))){const h=Il(EI(u,-64,-32)),f=EI(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(y=>wK.slice(2)!==y?t.request({method:"eth_getTransactionReceipt",params:[`0x${y}`]},{dedupe:!0}):void 0)),g=p.some(y=>y===null)?100:p.every(y=>(y==null?void 0:y.status)==="0x1")?200:p.every(y=>(y==null?void 0:y.status)==="0x0")?500:600;return{atomic:!1,chainId:Sc(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Sc(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:jo(u.blockNumber),gasUsed:jo(u.gasUsed),status:YV[u.status]})))??[],statusCode:l,status:c,version:o}}async function wge(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function bge(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Kr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=uL();let u;const d=Xu(o,{resolve:c,reject:l},h=>{const f=Z0(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await bK(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new vge({id:n}))},i):void 0,await a}class vge extends ge{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function Ege(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function _ge(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Sc(t.nonce):void 0,storageProof:t.storageProof?Ege(t.storageProof):void 0}}async function Cge(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?tt(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return _ge(a)}async function vK(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Kr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:y,reject:m}=uL(),b=a?setTimeout(()=>{p(),f(),m(new sde({hash:n}))},a):void 0;return f=Xu(c,{onReplaced:r,resolve:y,reject:m},v=>{p=ct(t,gK,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const C=x=>{clearTimeout(b),p(),x(),f()};let S=A;if(!h)try{if(d){if(e>1&&(!d.blockNumber||S-d.blockNumber+1n<e))return;C(()=>v.resolve(d));return}if(l||(h=!0,await xI(async()=>{l=await ct(t,mN,"getTransaction")({hash:n}),l.blockNumber&&(S=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await ct(t,Ik,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||S-d.blockNumber+1n<e))return;C(()=>v.resolve(d))}catch(x){if(x instanceof Hq||x instanceof Gq){if(!l){h=!1;return}try{u=l,h=!0;const T=await xI(()=>ct(t,_l,"getBlock")({blockNumber:S,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:O})=>O instanceof Vq});h=!1;const I=T.transactions.find(({from:O,nonce:B})=>O===u.from&&B===u.nonce);if(!I||(d=await ct(t,Ik,"getTransactionReceipt")({hash:I.hash}),e>1&&(!d.blockNumber||S-d.blockNumber+1n<e)))return;let k="replaced";I.to===u.to&&I.value===u.value&&I.input===u.input?k="repriced":I.from===I.to&&I.value===0n&&(k="cancelled"),C(()=>{var O;(O=v.onReplaced)==null||O.call(v,{reason:k,replacedTransaction:u,transaction:I,transactionReceipt:d}),v.resolve(d)})}catch(T){C(()=>v.reject(T))}}else C(()=>v.reject(x))}}})}),g}async function Age(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>ku(n))}async function Sge(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function EK(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Yg({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Ar(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Ar(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await ct(t,Y0,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await ct(t,ZM,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&pN(o.address,i.address))&&(a.nonce+=1)),a}async function Ige(t,e){const{account:n=t.account}=e;if(!n)throw new Yg({docsPath:"/docs/eip7702/signAuthorization"});const r=Ar(n);if(!r.signAuthorization)throw new XA({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await EK(t,e);return r.signAuthorization(s)}async function xge(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Yg({docsPath:"/docs/actions/wallet/signTransaction"});const i=Ar(n);Jg({account:i,...e});const o=await ct(t,Y0,"getChainId")({});r!==null&&Wq({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||K0;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:tt(o),from:i.address}]},{retryCount:0})}async function _K(t,{account:e=t.account,message:n}){if(!e)throw new Yg({docsPath:"/docs/actions/wallet/signMessage"});const r=Ar(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?r0(n):n.raw instanceof Uint8Array?xa(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function Nge(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Yg({docsPath:"/docs/actions/wallet/signTypedData"});const o=Ar(n),a={EIP712Domain:hK({domain:r}),...e.types};if(dK({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=tge({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function Tge(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Ar(a.account):t.account,l=Oa({abi:n,args:s,functionName:o});try{const{data:u}=await ct(t,OC,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=Xg({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw Eg(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function Rge(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:tt(e)}]},{retryCount:0})}let CK=class extends $M{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,iue(e);const r=AC(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),o0(i)}update(e){return i0(this),this.iHash.update(e),this}digestInto(e){i0(this),xc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const AK=(t,e,n)=>new CK(t,e).update(n).digest();AK.create=(t,e)=>new CK(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ji=BigInt(0),bi=BigInt(1),pp=BigInt(2),Pge=BigInt(3),SK=BigInt(4),IK=BigInt(5),xK=BigInt(8);function ya(t,e){const n=t%e;return n>=Ji?n:e+n}function Qo(t,e,n){let r=t;for(;e-- >Ji;)r*=r,r%=n;return r}function z6(t,e){if(t===Ji)throw new Error("invert: expected non-zero number");if(e<=Ji)throw new Error("invert: expected positive modulus, got "+e);let n=ya(t,e),r=e,s=Ji,i=bi;for(;n!==Ji;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==bi)throw new Error("invert: does not exist");return ya(s,e)}function NK(t,e){const n=(t.ORDER+bi)/SK,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Oge(t,e){const n=(t.ORDER-IK)/xK,r=t.mul(e,pp),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,pp),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function kge(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-bi,n=0;for(;e%pp===Ji;)e/=pp,n++;let r=pp;const s=bN(t);for(;W6(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return NK;let i=s.pow(r,e);const o=(e+bi)/pp;return function(c,l){if(c.is0(l))return l;if(W6(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const y=bi<<BigInt(u-p-1),m=c.pow(d,y);u=p,d=c.sqr(m),h=c.mul(h,d),f=c.mul(f,m)}return f}}function Dge(t){return t%SK===Pge?NK:t%xK===IK?Oge:kge(t)}const Mge=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Lge(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Mge.reduce((r,s)=>(r[s]="function",r),e);return oL(t,n),t}function Uge(t,e,n){if(n<Ji)throw new Error("invalid exponent, negatives unsupported");if(n===Ji)return t.ONE;if(n===bi)return e;let r=t.ONE,s=e;for(;n>Ji;)n&bi&&(r=t.mul(r,s)),s=t.sqr(s),n>>=bi;return r}function TK(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function W6(t,e){const n=(t.ORDER-bi)/pp,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function $ge(t,e){e!==void 0&&$E(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function bN(t,e,n=!1,r={}){if(t<=Ji)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=$ge(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:hN(o),ZERO:Ji,ONE:bi,create:u=>ya(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Ji<=u&&u<t},is0:u=>u===Ji,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&bi)===bi,neg:u=>ya(-u,t),eql:(u,d)=>u===d,sqr:u=>ya(u*u,t),add:(u,d)=>ya(u+d,t),sub:(u,d)=>ya(u-d,t),mul:(u,d)=>ya(u*d,t),pow:(u,d)=>Uge(l,u,d),div:(u,d)=>ya(u*z6(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>z6(u,t),sqrt:i||(u=>(c||(c=Dge(t)),c(l,u))),toBytes:u=>n?TV(u,a):iL(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?NV(u):dN(u)},invertBatch:u=>TK(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function RK(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function PK(t){const e=RK(t);return e+Math.ceil(e/2)}function Bge(t,e,n=!1){const r=t.length,s=RK(e),i=PK(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?NV(t):dN(t),a=ya(o,e-bi)+bi;return n?TV(a,s):iL(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const h0=BigInt(0),gp=BigInt(1);function Hv(t,e){const n=e.negate();return t?n:e}function Fge(t,e,n){const r=o=>o.pz,s=TK(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function OK(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function UR(t,e){OK(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=hN(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function H6(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=gp);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function jge(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function zge(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const $R=new WeakMap,kK=new WeakMap;function BR(t){return kK.get(t)||1}function G6(t){if(t!==h0)throw new Error("invalid wNAF")}function Wge(t,e){return{constTimeNegate:Hv,hasPrecomputes(n){return BR(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>h0;)r&gp&&(s=s.add(i)),i=i.double(),r>>=gp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=UR(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=UR(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=H6(s,c,a);s=l,d?o=o.add(Hv(f,r[p])):i=i.add(Hv(h,r[u]))}return G6(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=UR(n,e);for(let a=0;a<o.windows&&s!==h0;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=H6(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return G6(s),i},getPrecomputes(n,r,s){let i=$R.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),$R.set(r,i))),i},wNAFCached(n,r,s){const i=BR(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=BR(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){OK(r,e),kK.set(n,r),$R.delete(n)}}}function Hge(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>h0||r>h0;)n&gp&&(i=i.add(s)),r&gp&&(o=o.add(s)),s=s.double(),n>>=gp,r>>=gp;return{p1:i,p2:o}}function Gge(t,e,n,r){jge(n,t),zge(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Xhe(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=hN(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const y=r[g],m=Number(y>>BigInt(f)&l);u[m]=u[m].add(n[g])}let p=o;for(let g=u.length-1,y=o;g>0;g--)y=y.add(u[g]),p=p.add(y);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function q6(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Lge(e),e}else return bN(t)}function qge(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>h0))throw new Error(`CURVE.${a} must be positive bigint`)}const r=q6(e.p,n.Fp),s=q6(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function V6(t){t.lowS!==void 0&&SI("lowS",t.lowS),t.prehash!==void 0&&SI("prehash",t.prehash)}class Vge extends Error{constructor(e=""){super(e)}}const du={Err:Vge,_tlv:{encode:(t,e)=>{const{Err:n}=du;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=z1(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?z1(s.length/2|128):"";return z1(t)+i+s+e},decode(t,e){const{Err:n}=du;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=du;if(t<Gv)throw new e("integer: negative integers are not allowed");let n=z1(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=du;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return dN(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=du,s=la("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=du,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Gv=BigInt(0),qv=BigInt(1),Kge=BigInt(2),H1=BigInt(3),Yge=BigInt(4);function Qge(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function DK(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=la("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function Jge(t,e={}){const{Fp:n,Fn:r}=qge("weierstrass",t,e),{h:s,n:i}=t;oL(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,I,k){const{x:O,y:B}=I.toAffine(),G=n.toBytes(O);if(SI("isCompressed",k),k){a();const W=!n.isOdd(B);return dp(MK(W),G)}else return dp(Uint8Array.of(4),G,n.toBytes(B))}function l(T){xc(T);const I=n.BYTES,k=I+1,O=2*I+1,B=T.length,G=T[0],W=T.subarray(1);if(B===k&&(G===2||G===3)){const R=n.fromBytes(W);if(!n.isValid(R))throw new Error("bad point: is not on curve, wrong x");const N=h(R);let M;try{M=n.sqrt(N)}catch(F){const H=F instanceof Error?": "+F.message:"";throw new Error("bad point: is not on curve, sqrt error"+H)}a();const P=n.isOdd(M);return(G&1)===1!==P&&(M=n.neg(M)),{x:R,y:M}}else if(B===O&&G===4){const R=n.fromBytes(W.subarray(I*0,I*1)),N=n.fromBytes(W.subarray(I*1,I*2));if(!f(R,N))throw new Error("bad point: is not on curve");return{x:R,y:N}}else throw new Error(`bad point: got length ${B}, expected compressed=${k} or uncompressed=${O}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=Qge(n,t.a,t.b);function f(T,I){const k=n.sqr(I),O=h(T);return n.eql(k,O)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,H1),Yge),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function y(T,I,k=!1){if(!n.isValid(I)||k&&n.is0(I))throw new Error(`bad point coordinate ${T}`);return I}function m(T){if(!(T instanceof C))throw new Error("ProjectivePoint expected")}const b=T6((T,I)=>{const{px:k,py:O,pz:B}=T;if(n.eql(B,n.ONE))return{x:k,y:O};const G=T.is0();I==null&&(I=G?n.ONE:n.inv(B));const W=n.mul(k,I),R=n.mul(O,I),N=n.mul(B,I);if(G)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:W,y:R}}),v=T6(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:I,y:k}=T.toAffine();if(!n.isValid(I)||!n.isValid(k))throw new Error("bad point: x or y not field elements");if(!f(I,k))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(T,I,k,O,B){return k=new C(n.mul(k.px,T),k.py,k.pz),I=Hv(O,I),k=Hv(B,k),I.add(k)}class C{constructor(I,k,O){this.px=y("x",I),this.py=y("y",k,!0),this.pz=y("z",O),Object.freeze(this)}static fromAffine(I){const{x:k,y:O}=I||{};if(!I||!n.isValid(k)||!n.isValid(O))throw new Error("invalid affine point");if(I instanceof C)throw new Error("projective point not allowed");return n.is0(k)&&n.is0(O)?C.ZERO:new C(k,O,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){return Fge(C,"pz",I)}static fromBytes(I){return xc(I),C.fromHex(I)}static fromHex(I){const k=C.fromAffine(d(la("pointHex",I)));return k.assertValidity(),k}static fromPrivateKey(I){const k=DK(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(k(I))}static msm(I,k){return Gge(C,r,I,k)}precompute(I=8,k=!0){return x.setWindowSize(this,I),k||this.multiply(H1),this}_setWindowSize(I){this.precompute(I)}assertValidity(){v(this)}hasEvenY(){const{y:I}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(I)}equals(I){m(I);const{px:k,py:O,pz:B}=this,{px:G,py:W,pz:R}=I,N=n.eql(n.mul(k,R),n.mul(G,B)),M=n.eql(n.mul(O,R),n.mul(W,B));return N&&M}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:I,b:k}=t,O=n.mul(k,H1),{px:B,py:G,pz:W}=this;let R=n.ZERO,N=n.ZERO,M=n.ZERO,P=n.mul(B,B),D=n.mul(G,G),F=n.mul(W,W),H=n.mul(B,G);return H=n.add(H,H),M=n.mul(B,W),M=n.add(M,M),R=n.mul(I,M),N=n.mul(O,F),N=n.add(R,N),R=n.sub(D,N),N=n.add(D,N),N=n.mul(R,N),R=n.mul(H,R),M=n.mul(O,M),F=n.mul(I,F),H=n.sub(P,F),H=n.mul(I,H),H=n.add(H,M),M=n.add(P,P),P=n.add(M,P),P=n.add(P,F),P=n.mul(P,H),N=n.add(N,P),F=n.mul(G,W),F=n.add(F,F),P=n.mul(F,H),R=n.sub(R,P),M=n.mul(F,D),M=n.add(M,M),M=n.add(M,M),new C(R,N,M)}add(I){m(I);const{px:k,py:O,pz:B}=this,{px:G,py:W,pz:R}=I;let N=n.ZERO,M=n.ZERO,P=n.ZERO;const D=t.a,F=n.mul(t.b,H1);let H=n.mul(k,G),te=n.mul(O,W),re=n.mul(B,R),ie=n.add(k,O),le=n.add(G,W);ie=n.mul(ie,le),le=n.add(H,te),ie=n.sub(ie,le),le=n.add(k,B);let Ce=n.add(G,R);return le=n.mul(le,Ce),Ce=n.add(H,re),le=n.sub(le,Ce),Ce=n.add(O,B),N=n.add(W,R),Ce=n.mul(Ce,N),N=n.add(te,re),Ce=n.sub(Ce,N),P=n.mul(D,le),N=n.mul(F,re),P=n.add(N,P),N=n.sub(te,P),P=n.add(te,P),M=n.mul(N,P),te=n.add(H,H),te=n.add(te,H),re=n.mul(D,re),le=n.mul(F,le),te=n.add(te,re),re=n.sub(H,re),re=n.mul(D,re),le=n.add(le,re),H=n.mul(te,le),M=n.add(M,H),H=n.mul(Ce,le),N=n.mul(ie,N),N=n.sub(N,H),H=n.mul(ie,te),P=n.mul(Ce,P),P=n.add(P,H),new C(N,M,P)}subtract(I){return this.add(I.negate())}is0(){return this.equals(C.ZERO)}multiply(I){const{endo:k}=e;if(!r.isValidNot0(I))throw new Error("invalid scalar: out of range");let O,B;const G=W=>x.wNAFCached(this,W,C.normalizeZ);if(k){const{k1neg:W,k1:R,k2neg:N,k2:M}=k.splitScalar(I),{p:P,f:D}=G(R),{p:F,f:H}=G(M);B=D.add(H),O=A(k.beta,P,F,W,N)}else{const{p:W,f:R}=G(I);O=W,B=R}return C.normalizeZ([O,B])[0]}multiplyUnsafe(I){const{endo:k}=e,O=this;if(!r.isValid(I))throw new Error("invalid scalar: out of range");if(I===Gv||O.is0())return C.ZERO;if(I===qv)return O;if(x.hasPrecomputes(this))return this.multiply(I);if(k){const{k1neg:B,k1:G,k2neg:W,k2:R}=k.splitScalar(I),{p1:N,p2:M}=Hge(C,O,G,R);return A(k.beta,N,M,B,W)}else return x.wNAFCachedUnsafe(O,I)}multiplyAndAddUnsafe(I,k,O){const B=this.multiplyUnsafe(k).add(I.multiplyUnsafe(O));return B.is0()?void 0:B}toAffine(I){return b(this,I)}isTorsionFree(){const{isTorsionFree:I}=e;return s===qv?!0:I?I(C,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:I}=e;return s===qv?this:I?I(C,this):this.multiplyUnsafe(s)}toBytes(I=!0){return SI("isCompressed",I),this.assertValidity(),u(C,this,I)}toRawBytes(I=!0){return this.toBytes(I)}toHex(I=!0){return BE(this.toBytes(I))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const S=r.BITS,x=Wge(C,e.endo?Math.ceil(S/2):S);return C}function MK(t){return Uint8Array.of(t?2:3)}function Zge(t,e,n={}){oL(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||fue,s=e.hmac||((O,...B)=>AK(e.hash,O,dp(...B))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(O){const B=a>>qv;return O>B}function u(O){return l(O)?o.neg(O):O}function d(O,B){if(!o.isValidNot0(B))throw new Error(`invalid signature ${O}: out of range 1..CURVE.n`)}class h{constructor(B,G,W){d("r",B),d("s",G),this.r=B,this.s=G,W!=null&&(this.recovery=W),Object.freeze(this)}static fromCompact(B){const G=o.BYTES,W=la("compactSignature",B,G*2);return new h(o.fromBytes(W.subarray(0,G)),o.fromBytes(W.subarray(G,G*2)))}static fromDER(B){const{r:G,s:W}=du.toSig(la("DER",B));return new h(G,W)}assertValidity(){}addRecoveryBit(B){return new h(this.r,this.s,B)}recoverPublicKey(B){const G=i.ORDER,{r:W,s:R,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*Kge<G&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const P=N===2||N===3?W+a:W;if(!i.isValid(P))throw new Error("recovery id 2 or 3 invalid");const D=i.toBytes(P),F=t.fromHex(dp(MK((N&1)===0),D)),H=o.inv(P),te=v(la("msgHash",B)),re=o.create(-te*H),ie=o.create(R*H),le=t.BASE.multiplyUnsafe(re).add(F.multiplyUnsafe(ie));if(le.is0())throw new Error("point at infinify");return le.assertValidity(),le}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(B){if(B==="compact")return dp(o.toBytes(this.r),o.toBytes(this.s));if(B==="der")return UM(du.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return BE(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return BE(this.toBytes("compact"))}}const f=DK(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(O){try{return f(O),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const O=a;return Bge(r(PK(O)),O)},precompute(O=8,B=t.BASE){return B.precompute(O,!1)}};function g(O,B=!0){return t.fromPrivateKey(O).toBytes(B)}function y(O){if(typeof O=="bigint")return!1;if(O instanceof t)return!0;const G=la("key",O).length,W=i.BYTES,R=W+1,N=2*W+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===R))return G===R||G===N}function m(O,B,G=!0){if(y(O)===!0)throw new Error("first arg must be private key");if(y(B)===!1)throw new Error("second arg must be public key");return t.fromHex(B).multiply(f(O)).toBytes(G)}const b=e.bits2int||function(O){if(O.length>8192)throw new Error("input is too large");const B=dN(O),G=O.length*8-c;return G>0?B>>BigInt(G):B},v=e.bits2int_modN||function(O){return o.create(b(O))},A=hN(c);function C(O){return Zhe("num < 2^"+c,O,Gv,A),o.toBytes(O)}function S(O,B,G=x){if(["recovered","canonical"].some(ie=>ie in G))throw new Error("sign() legacy options not supported");const{hash:W}=e;let{lowS:R,prehash:N,extraEntropy:M}=G;R==null&&(R=!0),O=la("msgHash",O),V6(G),N&&(O=la("prehashed msgHash",W(O)));const P=v(O),D=f(B),F=[C(D),C(P)];if(M!=null&&M!==!1){const ie=M===!0?r(i.BYTES):M;F.push(la("extraEntropy",ie))}const H=dp(...F),te=P;function re(ie){const le=b(ie);if(!o.isValidNot0(le))return;const Ce=o.inv(le),X=t.BASE.multiply(le).toAffine(),ce=o.create(X.x);if(ce===Gv)return;const fe=o.create(Ce*o.create(te+ce*D));if(fe===Gv)return;let de=(X.x===ce?0:2)|Number(X.y&qv),ve=fe;return R&&l(fe)&&(ve=u(fe),de^=1),new h(ce,ve,de)}return{seed:H,k2sig:re}}const x={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function I(O,B,G=x){const{seed:W,k2sig:R}=S(O,B,G);return efe(e.hash.outputLen,o.BYTES,s)(W,R)}t.BASE.precompute(8);function k(O,B,G,W=T){const R=O;B=la("msgHash",B),G=la("publicKey",G),V6(W);const{lowS:N,prehash:M,format:P}=W;if("strict"in W)throw new Error("options.strict was renamed to lowS");if(P!==void 0&&!["compact","der","js"].includes(P))throw new Error('format must be "compact", "der" or "js"');const D=typeof R=="string"||LM(R),F=!D&&!P&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!D&&!F)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let H,te;try{if(F)if(P===void 0||P==="js")H=new h(R.r,R.s);else throw new Error("invalid format");if(D){try{P!=="compact"&&(H=h.fromDER(R))}catch(ve){if(!(ve instanceof du.Err))throw ve}!H&&P!=="der"&&(H=h.fromCompact(R))}te=t.fromHex(G)}catch{return!1}if(!H||N&&H.hasHighS())return!1;M&&(B=e.hash(B));const{r:re,s:ie}=H,le=v(B),Ce=o.inv(ie),X=o.create(le*Ce),ce=o.create(re*Ce),fe=t.BASE.multiplyUnsafe(X).add(te.multiplyUnsafe(ce));return fe.is0()?!1:o.create(fe.x)===re}return Object.freeze({getPublicKey:g,getSharedSecret:m,sign:I,verify:k,utils:p,Point:t,Signature:h})}function Xge(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=bN(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function eme(t){const{CURVE:e,curveOpts:n}=Xge(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function tme(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function nme(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=eme(t),s=Jge(e,n),i=Zge(s,r,n);return tme(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function rme(t,e){const n=r=>nme({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const NI={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const sme=BigInt(1),kk=BigInt(2),K6=(t,e)=>(t+e/kk)/e;function ime(t){const e=NI.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Qo(u,n,e)*u%e,h=Qo(d,n,e)*u%e,f=Qo(h,kk,e)*l%e,p=Qo(f,s,e)*f%e,g=Qo(p,i,e)*p%e,y=Qo(g,a,e)*g%e,m=Qo(y,c,e)*y%e,b=Qo(m,a,e)*g%e,v=Qo(b,n,e)*u%e,A=Qo(v,o,e)*p%e,C=Qo(A,r,e)*l%e,S=Qo(C,kk,e);if(!Dk.eql(Dk.sqr(S),t))throw new Error("Cannot find square root");return S}const Dk=bN(NI.p,void 0,void 0,{sqrt:ime}),LK=rme({...NI,Fp:Dk,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=NI.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-sme*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=K6(i*t,e),c=K6(-r*t,e);let l=ya(t-a*n-c*s,e),u=ya(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},eV),ome=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:LK},Symbol.toStringTag,{value:"Module"}));function ame({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new LK.Signature(jo(t),jo(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Ia(o)}async function wL(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=kl(o)?o:typeof o=="object"&&"r"in o&&"s"in o?ame(o):Qr(o),u=await(async()=>!r&&!s||ige(l)?l:oge({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Oa({abi:C6,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:sN({abi:C6,args:[n,i,u],bytecode:Ife}),...c},{data:g}=await ct(t,OC,"call")(p);return Mle(g??"0x0")}catch(p){try{if(pN(ku(n),await Uq({hash:i,signature:o})))return!0}catch{}if(p instanceof AV)return!1;throw p}}async function cme(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=fK(n);return wL(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function lme(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=Jpe({message:o,primaryType:a,types:c,domain:l});return wL(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function ume(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function dme(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const y=h??!1,m=Kr(["watchContractEvent",r,s,i,t.uid,o,d,y,a]);return Xu(m,{onLogs:l,onError:c},b=>{let v;a!==void 0&&(v=a-1n);let A,C=!1;const S=Z0(async()=>{var x;if(!C){try{A=await ct(t,GV,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:y,fromBlock:a})}catch{}C=!0;return}try{let T;if(A)T=await ct(t,gN,"getFilterChanges")({filter:A});else{const I=await ct(t,DC,"getBlockNumber")({});v&&v<I?T=await ct(t,KV,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:I,strict:y}):T=[],v=I}if(T.length===0)return;if(i)b.onLogs(T);else for(const I of T)b.onLogs([I])}catch(T){A&&T instanceof bg&&(C=!1),(x=b.onError)==null||x.call(b,T)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await ct(t,wN,"uninstallFilter")({filter:A}),S()}})})():(()=>{const y=h??!1,m=Kr(["watchContractEvent",r,s,i,t.uid,o,d,y]);let b=!0,v=()=>b=!1;return Xu(m,{onLogs:l,onError:c},A=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const T=t.transport.transports.find(I=>I.config.type==="webSocket"||I.config.type==="ipc");return T?T.value:t.transport}return t.transport})(),S=o?kC({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await C.subscribe({params:["logs",{address:r,topics:S}],onData(T){var k;if(!b)return;const I=T.result;try{const{eventName:O,args:B}=fL({abi:n,data:I.data,topics:I.topics,strict:h}),G=Zu(I,{args:B,eventName:O});A.onLogs([G])}catch(O){let B,G;if(O instanceof UE||O instanceof nN){if(h)return;B=O.abiItem.name,G=(k=O.abiItem.inputs)==null?void 0:k.some(R=>!("name"in R&&R.name))}const W=Zu(I,{args:G?[]:{},eventName:B});A.onLogs([W])}},onError(T){var I;(I=A.onError)==null||I.call(A,T)}});v=x,b||v()}catch(C){c==null||c(C)}})(),()=>v()))})()}async function UK(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Yg({docsPath:"/docs/contract/writeContract"});const l=r?Ar(r):null,u=Oa({abi:n,args:i,functionName:a});try{return await ct(t,TC,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Eg(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function $o(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const tS="2.17.3",hme=()=>`@wagmi/core@${tS}`;var $K=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},TI,BK;let cd=class Mk extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return hme()}constructor(e,n={}){var i;super(),TI.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof Mk?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof Mk&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return $K(this,TI,"m",BK).call(this,this,e)}};TI=new WeakSet,BK=function t(e,n){return n!=null&&n(e)?e:e.cause?$K(this,TI,"m",t).call(this,e.cause,n):e};class n_ extends cd{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class fme extends cd{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class pme extends cd{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class gme extends cd{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class mme extends cd{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class yme extends cd{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function nS(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new fme;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const Lk=256;let G1=Lk,q1;function FK(t=11){if(!q1||G1+t>Lk*2){q1="",G1=0;for(let e=0;e<Lk;e++)q1+=(256+Math.random()*256|0).toString(16).substring(1)}return q1.substring(G1,G1+++t)}function jK(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Ar(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},y={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:FK()};function m(b){return v=>{const A=v(b);for(const S in y)delete A[S];const C={...b,...A};return Object.assign(C,{extend:m(C)})}}return Object.assign(y,{extend:m(y)})}function bL({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=FK();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:Wpe(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function wme(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>bL({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function RI(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=bme,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=bL({key:n,name:r,async request({method:g,params:y}){let m;const b=async(v=0)=>{const A=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const C=await A.request({method:g,params:y});return f({method:g,params:y,response:C,transport:A,status:"success"}),C}catch(C){if(f({error:C,method:g,params:y,transport:A,status:"error"}),i(C)||v===h.length-1||(m??(m=h.slice(v+1).some(S=>{const{include:x,exclude:T}=S({chain:c}).config.methods||{};return x?x.includes(g):T?!T.includes(g):!0})),!m))throw C;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};vme({chain:c,interval:g.interval??l,onTransports:y=>h=y,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function bme(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===c0.code||t.code===Fr.code||hp.nodeMessage.test(t.message)||t.code===5e3))}function vme({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const y=g({chain:t,retryCount:0,timeout:i}),m=Date.now();let b,v;try{await(r?r({transport:y}):y.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-m,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:y})=>y)))),p=o.map((g,y)=>{const m=u.map(S=>S[y].latency),v=1-m.reduce((S,x)=>S+x,0)/m.length/f,A=u.map(S=>S[y].success),C=A.reduce((S,x)=>S+x,0)/A.length;return C===0?[0,y]:[l*v+c*C,y]}).sort((g,y)=>y[0]-g[0]);n(p.map(([,g])=>o[g])),await II(e),d()};d()}class Eme extends ge{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Ih(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},y=e.retryCount??h,m=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new Eme;const v=Vpe(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:m});return bL({key:s,methods:i,name:o,async request({method:A,params:C}){const S={method:A,params:C},{schedule:x}=BV({id:b,wait:g,shouldSplitBatch(O){return O.length>p},fn:O=>v.request({body:O}),sort:(O,B)=>O.id-B.id}),T=async O=>n?x(O):[await v.request({body:O})],[{error:I,result:k}]=await T(S);if(u)return{error:I,result:k};if(I)throw new VM({body:S,error:I,url:b});return k},retryCount:y,retryDelay:l,timeout:m,type:"http"},{fetchOptions:r,url:b})}}function _me(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(Cme))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(Ame))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const Cme=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Ame=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Sme(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Ta(r.address,{strict:!1})||e&&!pN(r.address,e))return!1}catch{return!1}return!0}async function Ime(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=_me(s);if(!u.address||!Sme({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=fK(s);return wL(t,{address:u.address,hash:h,signature:a,...l})}function xme(t){return{call:e=>OC(t,e),createAccessList:e=>HV(t,e),createBlockFilter:()=>Vfe(t),createContractEventFilter:e=>GV(t,e),createEventFilter:e=>qV(t,e),createPendingTransactionFilter:()=>VV(t),estimateContractGas:e=>Yfe(t,e),estimateGas:e=>aN(t,e),getBalance:e=>JM(t,e),getBlobBaseFee:()=>Qfe(t),getBlock:e=>_l(t,e),getBlockNumber:e=>DC(t,e),getBlockTransactionCount:e=>npe(t,e),getBytecode:e=>U6(t,e),getChainId:()=>Y0(t),getCode:e=>U6(t,e),getContractEvents:e=>KV(t,e),getEip712Domain:e=>ope(t,e),getEnsAddress:e=>Ofe(t,e),getEnsAvatar:e=>Gfe(t,e),getEnsName:e=>WV(t,e),getEnsResolver:e=>qfe(t,e),getEnsText:e=>zV(t,e),getFeeHistory:e=>lpe(t,e),estimateFeesPerGas:e=>gde(t,e),getFilterChanges:e=>gN(t,e),getFilterLogs:e=>upe(t,e),getGasPrice:()=>YM(t),getLogs:e=>gL(t,e),getProof:e=>Cge(t,e),estimateMaxPriorityFeePerGas:e=>pde(t,e),getStorageAt:e=>dpe(t,e),getTransaction:e=>mN(t,e),getTransactionConfirmations:e=>hpe(t,e),getTransactionCount:e=>ZM(t,e),getTransactionReceipt:e=>Ik(t,e),multicall:e=>QV(t,e),prepareTransactionRequest:e=>NC(t,e),readContract:e=>Ll(t,e),sendRawTransaction:e=>eL(t,e),simulate:e=>xk(t,e),simulateBlocks:e=>xk(t,e),simulateCalls:e=>uge(t,e),simulateContract:e=>Tge(t,e),verifyMessage:e=>cme(t,e),verifySiweMessage:e=>Ime(t,e),verifyTypedData:e=>lme(t,e),uninstallFilter:e=>wN(t,e),waitForTransactionReceipt:e=>vK(t,e),watchBlocks:e=>hge(t,e),watchBlockNumber:e=>gK(t,e),watchContractEvent:e=>dme(t,e),watchEvent:e=>fge(t,e),watchPendingTransactions:e=>mK(t,e)}}function Nme(t){return{addChain:e=>$le(t,e),deployContract:e=>Ude(t,e),getAddresses:()=>pge(t),getCallsStatus:e=>bK(t,e),getCapabilities:e=>mge(t,e),getChainId:()=>Y0(t),getPermissions:()=>gge(t),prepareAuthorization:e=>EK(t,e),prepareTransactionRequest:e=>NC(t,e),requestAddresses:()=>Age(t),requestPermissions:e=>Sge(t,e),sendCalls:e=>yge(t,e),sendRawTransaction:e=>eL(t,e),sendTransaction:e=>TC(t,e),showCallsStatus:e=>wge(t,e),signAuthorization:e=>Ige(t,e),signMessage:e=>_K(t,e),signTransaction:e=>xge(t,e),signTypedData:e=>Nge(t,e),switchChain:e=>Rge(t,e),waitForCallsStatus:e=>bge(t,e),watchAsset:e=>ume(t,e),writeContract:e=>UK(t,e)}}async function MC(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new yme({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new pme;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new mme({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Ar(e.account??n.accounts[0]);if(o&&(o.address=ku(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new gme({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return jK({account:o,chain:a,name:"Connector Client",transport:l=>wme(c)({...l,retryCount:0})})}async function Uk(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function Tme(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await MC(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return $o(o,aN,"estimateGas")({...s,account:i})}function zK(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(ede[t])}function $y(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function Rme(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return $o(o,QV,"multicall")({allowFailure:n,contracts:s,...i})}function WK(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return $o(s,Ll,"readContract")(r)}async function Pme(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>Rme(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof SV)throw c;const l=()=>o.map(u=>WK(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function Ome(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await Y6(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await Y6(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=mq(Il(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await $o(c,JM,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Qg(u,zK(a)),symbol:d.nativeCurrency.symbol,value:u}}async function Y6(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await Pme(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Qg(c??"0",zK(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function Q6(t){return t.state.chainId}function Ag(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ag(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Ag(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function kme(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let V1=[];function Ja(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Ag(V1,e)?V1:(V1=e,e)}let FR=[];function J6(t){const e=t.connectors;return Ag(FR,e)?FR:(FR=e,e)}function Dme(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return $o(s,WV,"getEnsName")(r)}function $k(t,e={}){const n=kme(t,e);return n==null?void 0:n.extend(xme)}async function Mme(t,e={}){return(await MC(t,e)).extend(Nme)}async function Lme(t,e){const{account:n,chainId:r,...s}=e,i=n??$y(t).address,o=t.getClient({chainId:r});return $o(o,NC,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let jR=!1;async function Bk(t,e={}){var l,u;if(jR)return[];jR=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const y=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:y}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),jR=!1,a}async function Ume(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await MC(t,{account:n??void 0,chainId:r,connector:s}),await $o(o,TC,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function $me(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await MC(t,{account:n,connector:r}),$o(i,_K,"signMessage")({...s,...n?{account:n}:{}})}class zd extends cd{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class Bme extends cd{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function Z6(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new Bme({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new n_;return t.setState(a=>({...a,chainId:r})),i}function HK(t,e){const{onChange:n}=e;return t.subscribe(()=>$y(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Ag(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function Fme(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function GK(t,e){const{onChange:n}=e;return t.subscribe(()=>Ja(t),n,{equalityFn:Ag})}function qK(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function jme(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=$o(l,mK,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function zme(t,e){const{onChange:n}=e;return t.subscribe(()=>$k(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function VK(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await $o(i,vK,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await $o(i,mN,"getTransaction")({hash:a.transactionHash}),d=await $o(i,OC,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?mq(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function KK(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await MC(t,{account:n??void 0,chainId:r,connector:s}),await $o(o,UK,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function JGe(t){return t}vN.type="injected";function vN(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...Wme[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:vN.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,y,m,b;const d=await this.getProvider();if(!d)throw new zd;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(y=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:y.map(A=>ku(A)),h.length>0&&(h=await this.getAccounts())}catch(v){const A=v;if(A.code===Fr.code)throw new Fr(A);if(A.code===qh.code)throw A}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>ku(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const A=await this.switchChain({chainId:l}).catch(C=>{if(C.code===Fr.code)throw C;return{id:v}});v=(A==null?void 0:A.id)??v}return e&&await((m=c.storage)==null?void 0:m.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const A=v;throw A.code===Fr.code?new Fr(A):A.code===qh.code?new qh(A):A}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new zd;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await oK(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new zd;return(await l.request({method:"eth_accounts"})).map(d=>ku(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new zd;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=rS(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(m=>window.addEventListener("ethereum#initialized",()=>m(p()),{once:!0}))]:[],new Promise(m=>setTimeout(()=>m(p()),g))]))return!0}throw new zd}return!!(await xI(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,y,m;const d=await this.getProvider();if(!d)throw new zd;const h=c.chains.find(b=>b.id===u);if(!h)throw new Dl(new n_);const f=new Promise(b=>{const v=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:tt(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,...C}=h.blockExplorers??{};let S;l!=null&&l.blockExplorerUrls?S=l.blockExplorerUrls:A&&(S=[A.url,...Object.values(C).map(I=>I.url)]);let x;(y=l==null?void 0:l.rpcUrls)!=null&&y.length?x=l.rpcUrls:x=[((m=h.rpcUrls.default)==null?void 0:m.http[0])??""];const T={blockExplorerUrls:S,chainId:tt(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Fr(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new Fr(A)}throw v.code===Fr.code?new Fr(v):new Dl(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>ku(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const Wme={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:rS(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return rS(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:rS(t,"isPhantom")}}};function rS(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Hme(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Gme(){const t=new Set;let e=[];const n=()=>Hme(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const qme=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},Vme=qme;function Kme(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const Fk=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Fk(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Fk(r)(n)}}}},Yme=(t,e)=>(n,r,s)=>{let i={storage:Kme(()=>localStorage),partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,y)=>{d(g,y),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,y;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const m=((y=i.onRehydrateStorage)==null?void 0:y.call(i,(g=r())!=null?g:h))||void 0;return Fk(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[A,C]=b;if(f=i.merge(C,(v=r())!=null?v:h),n(f,!0),A)return u()}).then(()=>{m==null||m(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{m==null||m(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},Qme=Yme,X6=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},zR=t=>t?X6(t):X6;var YK={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var y=this._events[g],m=arguments.length,b,v;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),m){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,p),!0}for(v=1,b=new Array(m-1);v<m;v++)b[v-1]=arguments[v];y.fn.apply(y.context,b)}else{var A=y.length,C;for(v=0;v<A;v++)switch(y[v].once&&this.removeListener(l,y[v].fn,void 0,!0),m){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,u);break;case 3:y[v].fn.call(y[v].context,u,d);break;case 4:y[v].fn.call(y[v].context,u,d,h);break;default:if(!b)for(C=1,b=new Array(m-1);C<m;C++)b[C-1]=arguments[C];y[v].fn.apply(y[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,y=[],m=p.length;g<m;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&y.push(p[g]);y.length?this._events[f]=y.length===1?y[0]:y:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(YK);var Jme=YK.exports;const Zme=Gg(Jme);class Xme{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Zme})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function eye(t){return new Xme(t)}function tye(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function e8(t,e){return t.slice(0,e).join(".")||"."}function t8(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function nye(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=t8(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=t8(s,c);if(u!==0)return r?e.call(this,a,c,e8(i,u)):`[ref=${e8(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function rye(t,e,n,r){return JSON.stringify(t,nye((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function sye(t){const{deserialize:e=tye,key:n="wagmi",serialize:r=rye,storage:s=QK}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const QK={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function iye(){const t=typeof window<"u"&&window.localStorage?window.localStorage:QK;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const jk=256;let K1=jk,Y1;function oye(t=11){if(!Y1||K1+t>jk*2){Y1="",K1=0;for(let e=0;e<jk;e++)Y1+=(256+Math.random()*256|0).toString(16).substring(1)}return Y1.substring(K1,K1+++t)}function aye(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=sye({storage:iye()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?Gme():void 0,a=zR(()=>i.chains),c=zR(()=>{const C=[],S=new Set;for(const x of i.connectors??[]){const T=l(x);if(C.push(T),!s&&T.rdns){const I=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const k of I)S.add(k)}}if(!s&&o){const x=o.getProviders();for(const T of x)S.has(T.info.rdns)||C.push(l(u(T)))}return C});function l(C){var T;const S=eye(oye()),x={...C({emitter:S,chains:a.getState(),storage:n,transports:i.transports}),emitter:S,uid:S.uid};return S.on("connect",v),(T=x.setup)==null||T.call(x),x}function u(C){const{info:S}=C,x=C.provider;return vN({target:{...S,id:S.rdns,provider:x}})}const d=new Map;function h(C={}){const S=C.chainId??y.getState().chainId,x=a.getState().find(I=>I.id===S);if(C.chainId&&!x)throw new n_;{const I=d.get(y.getState().chainId);if(I&&!x)return I;if(!x)throw new n_}{const I=d.get(S);if(I)return I}let T;if(i.client)T=i.client({chain:x});else{const I=x.id,k=a.getState().map(G=>G.id),O={},B=Object.entries(i);for(const[G,W]of B)if(!(G==="chains"||G==="client"||G==="connectors"||G==="transports"))if(typeof W=="object")if(I in W)O[G]=W[I];else{if(k.some(N=>N in W))continue;O[G]=W}else O[G]=W;T=jK({...O,chain:x,batch:O.batch??{multicall:!0},transport:G=>i.transports[I]({...G,connectors:c})})}return d.set(S,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";tS.startsWith(g)?p=Number.parseInt(tS.replace(g,"")):p=Number.parseInt(tS.split(".")[0]??"0");const y=zR(Vme(n?Qme(f,{migrate(C,S){if(S===p)return C;const x=f(),T=m(C,x.chainId);return{...x,chainId:T}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([S,x])=>{const{id:T,name:I,type:k,uid:O}=x.connector;return[S,{...x,connector:{id:T,name:I,type:k,uid:O}}]})},chainId:C.chainId,current:C.current}},merge(C,S){typeof C=="object"&&C&&"status"in C&&delete C.status;const x=m(C,S.chainId);return{...S,...C,chainId:x}},skipHydration:s,storage:n,version:p}):f));y.setState(f());function m(C,S){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(x=>x.id===C.chainId)?C.chainId:S}r&&y.subscribe(({connections:C,current:S})=>{var x;return S?(x=C.get(S))==null?void 0:x.chainId:void 0},C=>{if(a.getState().some(x=>x.id===C))return y.setState(x=>({...x,chainId:C??x.chainId}))}),o==null||o.subscribe(C=>{const S=new Set,x=new Set;for(const I of c.getState())if(S.add(I.id),I.rdns){const k=typeof I.rdns=="string"?[I.rdns]:I.rdns;for(const O of k)x.add(O)}const T=[];for(const I of C){if(x.has(I.info.rdns))continue;const k=l(u(I));S.has(k.id)||T.push(k)}n&&!y.persist.hasHydrated()||c.setState(I=>[...I,...T],!0)});function b(C){y.setState(S=>{const x=S.connections.get(C.uid);return x?{...S,connections:new Map(S.connections).set(C.uid,{accounts:C.accounts??x.accounts,chainId:C.chainId??x.chainId,connector:x.connector})}:S})}function v(C){y.getState().status==="connecting"||y.getState().status==="reconnecting"||y.setState(S=>{const x=c.getState().find(T=>T.uid===C.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",b),x.emitter.listenerCount("change")||x.emitter.on("change",b),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...S,connections:new Map(S.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:x}),current:C.uid,status:"connected"}):S})}function A(C){y.setState(S=>{const x=S.connections.get(C.uid);if(x){const I=x.connector;I.emitter.listenerCount("change")&&x.connector.emitter.off("change",b),I.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),I.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(S.connections.delete(C.uid),S.connections.size===0)return{...S,connections:new Map,current:null,status:"disconnected"};const T=S.connections.values().next().value;return{...S,connections:new Map(S.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return y.getState()},setState(C){let S;typeof C=="function"?S=C(y.getState()):S=C;const x=f();typeof S!="object"&&(S=x),Object.keys(x).some(I=>!(I in S))&&(S=x),y.setState(S,!0)},subscribe(C,S,x){return y.subscribe(C,S,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:y,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const S=typeof C=="function"?C(a.getState()):C;if(S.length!==0)return a.setState(S,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:b,connect:v,disconnect:A}}}}function cye(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?Bk(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function lye(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=cye(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=L.useRef(!0);return L.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const JK=L.createContext(void 0);function uye(t){const{children:e,config:n}=t,r={value:n};return L.createElement(lye,t,L.createElement(JK.Provider,r,e))}const dye="2.15.6",hye=()=>`wagmi@${dye}`;let fye=class extends cd{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return hye()}};class pye extends fye{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function ka(t={}){const e=t.config??L.useContext(JK);if(!e)throw new pye;return e}var ZK={exports:{}},XK={},eY={exports:{}},tY={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0=L;function gye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mye=typeof Object.is=="function"?Object.is:gye,yye=f0.useState,wye=f0.useEffect,bye=f0.useLayoutEffect,vye=f0.useDebugValue;function Eye(t,e){var n=e(),r=yye({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return bye(function(){s.value=n,s.getSnapshot=e,WR(s)&&i({inst:s})},[t,n,e]),wye(function(){return WR(s)&&i({inst:s}),t(function(){WR(s)&&i({inst:s})})},[t]),vye(n),n}function WR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mye(t,n)}catch{return!0}}function _ye(t,e){return e()}var Cye=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_ye:Eye;tY.useSyncExternalStore=f0.useSyncExternalStore!==void 0?f0.useSyncExternalStore:Cye;eY.exports=tY;var nY=eY.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EN=L,Aye=nY;function Sye(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Iye=typeof Object.is=="function"?Object.is:Sye,xye=Aye.useSyncExternalStore,Nye=EN.useRef,Tye=EN.useEffect,Rye=EN.useMemo,Pye=EN.useDebugValue;XK.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Nye(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Rye(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,Iye(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=xye(t,i[0],i[1]);return Tye(function(){o.hasValue=!0,o.value=a},[a]),Pye(a),a};ZK.exports=XK;var rY=ZK.exports;const HR=t=>typeof t=="object"&&!Array.isArray(t);function Oye(t,e,n=e,r=Ag){const s=L.useRef([]),i=rY.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(HR(o)&&HR(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return L.useMemo(()=>{if(HR(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function LC(t={}){const e=ka(t);return Oye(n=>HK(e,{onChange:n}),()=>$y(e))}var X0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Sg=typeof window>"u"||"Deno"in globalThis;function li(){}function kye(t,e){return typeof t=="function"?t(e):t}function zk(t){return typeof t=="number"&&t>=0&&t!==1/0}function sY(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Vh(t,e){return typeof t=="function"?t(e):t}function wa(t,e){return typeof t=="function"?t(e):t}function n8(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==vL(o,e.options))return!1}else if(!r_(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function r8(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ig(e.options.mutationKey)!==Ig(i))return!1}else if(!r_(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function vL(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ig)(t)}function Ig(t){return JSON.stringify(t,(e,n)=>Wk(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function r_(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>r_(t[n],e[n])):!1}function EL(t,e){if(t===e)return t;const n=s8(t)&&s8(e);if(n||Wk(t)&&Wk(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=EL(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function PI(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function s8(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Wk(t){if(!i8(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!i8(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function i8(t){return Object.prototype.toString.call(t)==="[object Object]"}function Dye(t){return new Promise(e=>{setTimeout(e,t)})}function Hk(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?EL(t,e):e}function Mye(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Lye(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var _L=Symbol();function iY(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===_L?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function oY(t,e){return typeof t=="function"?t(...e):!!t}var Cp,Jd,Ky,oz,Uye=(oz=class extends X0{constructor(){super();K(this,Cp);K(this,Jd);K(this,Ky);U(this,Ky,e=>{if(!Sg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){_(this,Jd)||this.setEventListener(_(this,Ky))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,Jd))==null||e.call(this),U(this,Jd,void 0))}setEventListener(e){var n;U(this,Ky,e),(n=_(this,Jd))==null||n.call(this),U(this,Jd,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){_(this,Cp)!==e&&(U(this,Cp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof _(this,Cp)=="boolean"?_(this,Cp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Cp=new WeakMap,Jd=new WeakMap,Ky=new WeakMap,oz),CL=new Uye,Yy,Zd,Qy,az,$ye=(az=class extends X0{constructor(){super();K(this,Yy,!0);K(this,Zd);K(this,Qy);U(this,Qy,e=>{if(!Sg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){_(this,Zd)||this.setEventListener(_(this,Qy))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,Zd))==null||e.call(this),U(this,Zd,void 0))}setEventListener(e){var n;U(this,Qy,e),(n=_(this,Zd))==null||n.call(this),U(this,Zd,e(this.setOnline.bind(this)))}setOnline(e){_(this,Yy)!==e&&(U(this,Yy,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return _(this,Yy)}},Yy=new WeakMap,Zd=new WeakMap,Qy=new WeakMap,az),OI=new $ye;function Gk(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Bye(t){return Math.min(1e3*2**t,3e4)}function aY(t){return(t??"online")==="online"?OI.isOnline():!0}var cY=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function GR(t){return t instanceof cY}function lY(t){let e=!1,n=0,r=!1,s;const i=Gk(),o=g=>{var y;r||(h(new cY(g)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>CL.isFocused()&&(t.networkMode==="always"||OI.isOnline())&&t.canRun(),u=()=>aY(t.networkMode)&&t.canRun(),d=g=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var y;s=m=>{(r||l())&&g(m)},(y=t.onPause)==null||y.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const y=n===0?t.initialPromise:void 0;try{g=y??t.fn()}catch(m){g=Promise.reject(m)}Promise.resolve(g).then(d).catch(m=>{var S;if(r)return;const b=t.retry??(Sg?0:3),v=t.retryDelay??Bye,A=typeof v=="function"?v(n,m):v,C=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,m);if(e||!C){h(m);return}n++,(S=t.onFail)==null||S.call(t,n,m),Dye(A).then(()=>l()?void 0:f()).then(()=>{e?h(m):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var Fye=t=>setTimeout(t,0);function jye(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Fye;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Wr=jye(),Ap,cz,uY=(cz=class{constructor(){K(this,Ap)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zk(this.gcTime)&&U(this,Ap,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Sg?1/0:5*60*1e3))}clearGcTimeout(){_(this,Ap)&&(clearTimeout(_(this,Ap)),U(this,Ap,void 0))}},Ap=new WeakMap,cz),Jy,Sp,ua,Ip,zs,Y_,xp,Xa,iu,lz,zye=(lz=class extends uY{constructor(e){super();K(this,Xa);K(this,Jy);K(this,Sp);K(this,ua);K(this,Ip);K(this,zs);K(this,Y_);K(this,xp);U(this,xp,!1),U(this,Y_,e.defaultOptions),this.setOptions(e.options),this.observers=[],U(this,Ip,e.client),U(this,ua,_(this,Ip).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,U(this,Jy,Wye(this.options)),this.state=e.state??_(this,Jy),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_(this,zs))==null?void 0:e.promise}setOptions(e){this.options={..._(this,Y_),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,ua).remove(this)}setData(e,n){const r=Hk(this.state.data,e,this.options);return he(this,Xa,iu).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){he(this,Xa,iu).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=_(this,zs))==null?void 0:r.promise;return(s=_(this,zs))==null||s.cancel(e),n?n.then(li).catch(li):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,Jy))}isActive(){return this.observers.some(e=>wa(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_L||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Vh(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!sY(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,zs))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,zs))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_(this,ua).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(_(this,zs)&&(_(this,xp)?_(this,zs).cancel({revert:!0}):_(this,zs).cancelRetry()),this.scheduleGc()),_(this,ua).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||he(this,Xa,iu).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(_(this,zs))return _(this,zs).continueRetry(),_(this,zs).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(U(this,xp,!0),r.signal)})},i=()=>{const h=iY(this.options,n),p=(()=>{const g={client:_(this,Ip),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return U(this,xp,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:_(this,Ip),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),U(this,Sp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&he(this,Xa,iu).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,y;GR(h)&&h.silent||he(this,Xa,iu).call(this,{type:"error",error:h}),GR(h)||((p=(f=_(this,ua).config).onError)==null||p.call(f,h,this),(y=(g=_(this,ua).config).onSettled)==null||y.call(g,this.state.data,h,this)),this.scheduleGc()};return U(this,zs,lY({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,y;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(m){c(m);return}(p=(f=_(this,ua).config).onSuccess)==null||p.call(f,h,this),(y=(g=_(this,ua).config).onSettled)==null||y.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{he(this,Xa,iu).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{he(this,Xa,iu).call(this,{type:"pause"})},onContinue:()=>{he(this,Xa,iu).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),_(this,zs).start()}},Jy=new WeakMap,Sp=new WeakMap,ua=new WeakMap,Ip=new WeakMap,zs=new WeakMap,Y_=new WeakMap,xp=new WeakMap,Xa=new WeakSet,iu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...dY(r.data,this.options),fetchMeta:e.meta??null};case"success":return U(this,Sp,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return GR(s)&&s.revert&&_(this,Sp)?{..._(this,Sp),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Wr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),_(this,ua).notify({query:this,type:"updated",action:e})})},lz);function dY(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:aY(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Wye(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Zc,uz,Hye=(uz=class extends X0{constructor(e={}){super();K(this,Zc);this.config=e,U(this,Zc,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??vL(s,n);let o=this.get(i);return o||(o=new zye({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){_(this,Zc).has(e.queryHash)||(_(this,Zc).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=_(this,Zc).get(e.queryHash);n&&(e.destroy(),n===e&&_(this,Zc).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Wr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _(this,Zc).get(e)}getAll(){return[..._(this,Zc).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>n8(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>n8(e,r)):n}notify(e){Wr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Wr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Wr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Zc=new WeakMap,uz),Xc,si,Np,el,Md,dz,Gye=(dz=class extends uY{constructor(e){super();K(this,el);K(this,Xc);K(this,si);K(this,Np);this.mutationId=e.mutationId,U(this,si,e.mutationCache),U(this,Xc,[]),this.state=e.state||hY(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_(this,Xc).includes(e)||(_(this,Xc).push(e),this.clearGcTimeout(),_(this,si).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){U(this,Xc,_(this,Xc).filter(n=>n!==e)),this.scheduleGc(),_(this,si).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_(this,Xc).length||(this.state.status==="pending"?this.scheduleGc():_(this,si).remove(this))}continue(){var e;return((e=_(this,Np))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,y,m,b,v,A,C,S,x,T;const n=()=>{he(this,el,Md).call(this,{type:"continue"})};U(this,Np,lY({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(I,k)=>{he(this,el,Md).call(this,{type:"failed",failureCount:I,error:k})},onPause:()=>{he(this,el,Md).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,si).canRun(this)}));const r=this.state.status==="pending",s=!_(this,Np).canStart();try{if(r)n();else{he(this,el,Md).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=_(this,si).config).onMutate)==null?void 0:o.call(i,e,this));const k=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));k!==this.state.context&&he(this,el,Md).call(this,{type:"pending",context:k,variables:e,isPaused:s})}const I=await _(this,Np).start();return await((u=(l=_(this,si).config).onSuccess)==null?void 0:u.call(l,I,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,I,e,this.state.context)),await((p=(f=_(this,si).config).onSettled)==null?void 0:p.call(f,I,null,this.state.variables,this.state.context,this)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,I,null,e,this.state.context)),he(this,el,Md).call(this,{type:"success",data:I}),I}catch(I){try{throw await((b=(m=_(this,si).config).onError)==null?void 0:b.call(m,I,e,this.state.context,this)),await((A=(v=this.options).onError)==null?void 0:A.call(v,I,e,this.state.context)),await((S=(C=_(this,si).config).onSettled)==null?void 0:S.call(C,void 0,I,this.state.variables,this.state.context,this)),await((T=(x=this.options).onSettled)==null?void 0:T.call(x,void 0,I,e,this.state.context)),I}finally{he(this,el,Md).call(this,{type:"error",error:I})}}finally{_(this,si).runNext(this)}}},Xc=new WeakMap,si=new WeakMap,Np=new WeakMap,el=new WeakSet,Md=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Wr.batch(()=>{_(this,Xc).forEach(r=>{r.onMutationUpdate(e)}),_(this,si).notify({mutation:this,type:"updated",action:e})})},dz);function hY(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var pu,ec,Q_,hz,qye=(hz=class extends X0{constructor(e={}){super();K(this,pu);K(this,ec);K(this,Q_);this.config=e,U(this,pu,new Set),U(this,ec,new Map),U(this,Q_,0)}build(e,n,r){const s=new Gye({mutationCache:this,mutationId:++pd(this,Q_)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){_(this,pu).add(e);const n=Q1(e);if(typeof n=="string"){const r=_(this,ec).get(n);r?r.push(e):_(this,ec).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(_(this,pu).delete(e)){const n=Q1(e);if(typeof n=="string"){const r=_(this,ec).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&_(this,ec).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Q1(e);if(typeof n=="string"){const r=_(this,ec).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Q1(e);if(typeof n=="string"){const s=(r=_(this,ec).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Wr.batch(()=>{_(this,pu).forEach(e=>{this.notify({type:"removed",mutation:e})}),_(this,pu).clear(),_(this,ec).clear()})}getAll(){return Array.from(_(this,pu))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>r8(n,r))}findAll(e={}){return this.getAll().filter(n=>r8(e,n))}notify(e){Wr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Wr.batch(()=>Promise.all(e.map(n=>n.continue().catch(li))))}},pu=new WeakMap,ec=new WeakMap,Q_=new WeakMap,hz);function Q1(t){var e;return(e=t.options.scope)==null?void 0:e.id}function o8(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},m=iY(e.options,e.fetchOptions),b=async(v,A,C)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:A,direction:C?"backward":"forward",meta:e.options.meta};return y(O),O})(),T=await m(x),{maxPages:I}=e.options,k=C?Lye:Mye;return{pages:k(v.pages,T,I),pageParams:k(v.pageParams,A,I)}};if(s&&i.length){const v=s==="backward",A=v?Vye:a8,C={pages:i,pageParams:o},S=A(r,C);a=await b(C,S,v)}else{const v=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:a8(r,a);if(c>0&&A==null)break;a=await b(a,A),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function a8(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Vye(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var wr,Xd,eh,Zy,Xy,th,ew,tw,fz,Kye=(fz=class{constructor(t={}){K(this,wr);K(this,Xd);K(this,eh);K(this,Zy);K(this,Xy);K(this,th);K(this,ew);K(this,tw);U(this,wr,t.queryCache||new Hye),U(this,Xd,t.mutationCache||new qye),U(this,eh,t.defaultOptions||{}),U(this,Zy,new Map),U(this,Xy,new Map),U(this,th,0)}mount(){pd(this,th)._++,_(this,th)===1&&(U(this,ew,CL.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,wr).onFocus())})),U(this,tw,OI.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,wr).onOnline())})))}unmount(){var t,e;pd(this,th)._--,_(this,th)===0&&((t=_(this,ew))==null||t.call(this),U(this,ew,void 0),(e=_(this,tw))==null||e.call(this),U(this,tw,void 0))}isFetching(t){return _(this,wr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return _(this,Xd).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,wr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=_(this,wr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Vh(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return _(this,wr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=_(this,wr).get(r.queryHash),i=s==null?void 0:s.state.data,o=kye(e,i);if(o!==void 0)return _(this,wr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Wr.batch(()=>_(this,wr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,wr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=_(this,wr);Wr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=_(this,wr);return Wr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Wr.batch(()=>_(this,wr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(li).catch(li)}invalidateQueries(t,e={}){return Wr.batch(()=>(_(this,wr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Wr.batch(()=>_(this,wr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(li)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(li)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=_(this,wr).build(this,e);return n.isStaleByTime(Vh(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(li).catch(li)}fetchInfiniteQuery(t){return t.behavior=o8(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(li).catch(li)}ensureInfiniteQueryData(t){return t.behavior=o8(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return OI.isOnline()?_(this,Xd).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,wr)}getMutationCache(){return _(this,Xd)}getDefaultOptions(){return _(this,eh)}setDefaultOptions(t){U(this,eh,t)}setQueryDefaults(t,e){_(this,Zy).set(Ig(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[..._(this,Zy).values()],n={};return e.forEach(r=>{r_(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){_(this,Xy).set(Ig(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[..._(this,Xy).values()],n={};return e.forEach(r=>{r_(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={..._(this,eh).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=vL(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===_L&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{..._(this,eh).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){_(this,wr).clear(),_(this,Xd).clear()}},wr=new WeakMap,Xd=new WeakMap,eh=new WeakMap,Zy=new WeakMap,Xy=new WeakMap,th=new WeakMap,ew=new WeakMap,tw=new WeakMap,fz),Ui,Kt,J_,ii,Tp,nw,nh,rh,Z_,rw,sw,Rp,Pp,sh,iw,vn,lv,qk,Vk,Kk,Yk,Qk,Jk,Zk,fY,pz,Yye=(pz=class extends X0{constructor(e,n){super();K(this,vn);K(this,Ui);K(this,Kt);K(this,J_);K(this,ii);K(this,Tp);K(this,nw);K(this,nh);K(this,rh);K(this,Z_);K(this,rw);K(this,sw);K(this,Rp);K(this,Pp);K(this,sh);K(this,iw,new Set);this.options=n,U(this,Ui,e),U(this,rh,null),U(this,nh,Gk()),this.options.experimental_prefetchInRender||_(this,nh).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(_(this,Kt).addObserver(this),c8(_(this,Kt),this.options)?he(this,vn,lv).call(this):this.updateResult(),he(this,vn,Yk).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xk(_(this,Kt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xk(_(this,Kt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,he(this,vn,Qk).call(this),he(this,vn,Jk).call(this),_(this,Kt).removeObserver(this)}setOptions(e){const n=this.options,r=_(this,Kt);if(this.options=_(this,Ui).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof wa(this.options.enabled,_(this,Kt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");he(this,vn,Zk).call(this),_(this,Kt).setOptions(this.options),n._defaulted&&!PI(this.options,n)&&_(this,Ui).getQueryCache().notify({type:"observerOptionsUpdated",query:_(this,Kt),observer:this});const s=this.hasListeners();s&&l8(_(this,Kt),r,this.options,n)&&he(this,vn,lv).call(this),this.updateResult(),s&&(_(this,Kt)!==r||wa(this.options.enabled,_(this,Kt))!==wa(n.enabled,_(this,Kt))||Vh(this.options.staleTime,_(this,Kt))!==Vh(n.staleTime,_(this,Kt)))&&he(this,vn,qk).call(this);const i=he(this,vn,Vk).call(this);s&&(_(this,Kt)!==r||wa(this.options.enabled,_(this,Kt))!==wa(n.enabled,_(this,Kt))||i!==_(this,sh))&&he(this,vn,Kk).call(this,i)}getOptimisticResult(e){const n=_(this,Ui).getQueryCache().build(_(this,Ui),e),r=this.createResult(n,e);return Jye(this,r)&&(U(this,ii,r),U(this,nw,this.options),U(this,Tp,_(this,Kt).state)),r}getCurrentResult(){return _(this,ii)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){_(this,iw).add(e)}getCurrentQuery(){return _(this,Kt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=_(this,Ui).defaultQueryOptions(e),r=_(this,Ui).getQueryCache().build(_(this,Ui),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return he(this,vn,lv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),_(this,ii)))}createResult(e,n){var I;const r=_(this,Kt),s=this.options,i=_(this,ii),o=_(this,Tp),a=_(this,nw),l=e!==r?e.state:_(this,J_),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const k=this.hasListeners(),O=!k&&c8(e,n),B=k&&l8(e,r,n,s);(O||B)&&(d={...d,...dY(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=d;f=d.data;let m=!1;if(n.placeholderData!==void 0&&f===void 0&&y==="pending"){let k;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(k=i.data,m=!0):k=typeof n.placeholderData=="function"?n.placeholderData((I=_(this,sw))==null?void 0:I.state.data,_(this,sw)):n.placeholderData,k!==void 0&&(y="success",f=Hk(i==null?void 0:i.data,k,n),h=!0)}if(n.select&&f!==void 0&&!m)if(i&&f===(o==null?void 0:o.data)&&n.select===_(this,Z_))f=_(this,rw);else try{U(this,Z_,n.select),f=n.select(f),f=Hk(i==null?void 0:i.data,f,n),U(this,rw,f),U(this,rh,null)}catch(k){U(this,rh,k)}_(this,rh)&&(p=_(this,rh),f=_(this,rw),g=Date.now(),y="error");const b=d.fetchStatus==="fetching",v=y==="pending",A=y==="error",C=v&&b,S=f!==void 0,T={status:y,fetchStatus:d.fetchStatus,isPending:v,isSuccess:y==="success",isError:A,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:A&&!S,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&S,isStale:AL(e,n),refetch:this.refetch,promise:_(this,nh),isEnabled:wa(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const k=G=>{T.status==="error"?G.reject(T.error):T.data!==void 0&&G.resolve(T.data)},O=()=>{const G=U(this,nh,T.promise=Gk());k(G)},B=_(this,nh);switch(B.status){case"pending":e.queryHash===r.queryHash&&k(B);break;case"fulfilled":(T.status==="error"||T.data!==B.value)&&O();break;case"rejected":(T.status!=="error"||T.error!==B.reason)&&O();break}}return T}updateResult(){const e=_(this,ii),n=this.createResult(_(this,Kt),this.options);if(U(this,Tp,_(this,Kt).state),U(this,nw,this.options),_(this,Tp).data!==void 0&&U(this,sw,_(this,Kt)),PI(n,e))return;U(this,ii,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!_(this,iw).size)return!0;const o=new Set(i??_(this,iw));return this.options.throwOnError&&o.add("error"),Object.keys(_(this,ii)).some(a=>{const c=a;return _(this,ii)[c]!==e[c]&&o.has(c)})};he(this,vn,fY).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&he(this,vn,Yk).call(this)}},Ui=new WeakMap,Kt=new WeakMap,J_=new WeakMap,ii=new WeakMap,Tp=new WeakMap,nw=new WeakMap,nh=new WeakMap,rh=new WeakMap,Z_=new WeakMap,rw=new WeakMap,sw=new WeakMap,Rp=new WeakMap,Pp=new WeakMap,sh=new WeakMap,iw=new WeakMap,vn=new WeakSet,lv=function(e){he(this,vn,Zk).call(this);let n=_(this,Kt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(li)),n},qk=function(){he(this,vn,Qk).call(this);const e=Vh(this.options.staleTime,_(this,Kt));if(Sg||_(this,ii).isStale||!zk(e))return;const r=sY(_(this,ii).dataUpdatedAt,e)+1;U(this,Rp,setTimeout(()=>{_(this,ii).isStale||this.updateResult()},r))},Vk=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(_(this,Kt)):this.options.refetchInterval)??!1},Kk=function(e){he(this,vn,Jk).call(this),U(this,sh,e),!(Sg||wa(this.options.enabled,_(this,Kt))===!1||!zk(_(this,sh))||_(this,sh)===0)&&U(this,Pp,setInterval(()=>{(this.options.refetchIntervalInBackground||CL.isFocused())&&he(this,vn,lv).call(this)},_(this,sh)))},Yk=function(){he(this,vn,qk).call(this),he(this,vn,Kk).call(this,he(this,vn,Vk).call(this))},Qk=function(){_(this,Rp)&&(clearTimeout(_(this,Rp)),U(this,Rp,void 0))},Jk=function(){_(this,Pp)&&(clearInterval(_(this,Pp)),U(this,Pp,void 0))},Zk=function(){const e=_(this,Ui).getQueryCache().build(_(this,Ui),this.options);if(e===_(this,Kt))return;const n=_(this,Kt);U(this,Kt,e),U(this,J_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},fY=function(e){Wr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(_(this,ii))}),_(this,Ui).getQueryCache().notify({query:_(this,Kt),type:"observerResultsUpdated"})})},pz);function Qye(t,e){return wa(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function c8(t,e){return Qye(t,e)||t.state.data!==void 0&&Xk(t,e,e.refetchOnMount)}function Xk(t,e,n){if(wa(e.enabled,t)!==!1&&Vh(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&AL(t,e)}return!1}function l8(t,e,n,r){return(t!==e||wa(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&AL(t,n)}function AL(t,e){return wa(e.enabled,t)!==!1&&t.isStaleByTime(Vh(e.staleTime,t))}function Jye(t,e){return!PI(t.getCurrentResult(),e)}var ih,oh,$i,gu,Gu,sS,eD,gz,Zye=(gz=class extends X0{constructor(n,r){super();K(this,Gu);K(this,ih);K(this,oh);K(this,$i);K(this,gu);U(this,ih,n),this.setOptions(r),this.bindMethods(),he(this,Gu,sS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=_(this,ih).defaultMutationOptions(n),PI(this.options,r)||_(this,ih).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,$i),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Ig(r.mutationKey)!==Ig(this.options.mutationKey)?this.reset():((s=_(this,$i))==null?void 0:s.state.status)==="pending"&&_(this,$i).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=_(this,$i))==null||n.removeObserver(this)}onMutationUpdate(n){he(this,Gu,sS).call(this),he(this,Gu,eD).call(this,n)}getCurrentResult(){return _(this,oh)}reset(){var n;(n=_(this,$i))==null||n.removeObserver(this),U(this,$i,void 0),he(this,Gu,sS).call(this),he(this,Gu,eD).call(this)}mutate(n,r){var s;return U(this,gu,r),(s=_(this,$i))==null||s.removeObserver(this),U(this,$i,_(this,ih).getMutationCache().build(_(this,ih),this.options)),_(this,$i).addObserver(this),_(this,$i).execute(n)}},ih=new WeakMap,oh=new WeakMap,$i=new WeakMap,gu=new WeakMap,Gu=new WeakSet,sS=function(){var r;const n=((r=_(this,$i))==null?void 0:r.state)??hY();U(this,oh,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},eD=function(n){Wr.batch(()=>{var r,s,i,o,a,c,l,u;if(_(this,gu)&&this.hasListeners()){const d=_(this,oh).variables,h=_(this,oh).context;(n==null?void 0:n.type)==="success"?((s=(r=_(this,gu)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=_(this,gu)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=_(this,gu)).onError)==null||c.call(a,n.error,d,h),(u=(l=_(this,gu)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(_(this,oh))})})},gz);function Xye(t,e){return EL(t,e)}function ewe(t){return JSON.stringify(t,(e,n)=>twe(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function twe(t){if(!u8(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!u8(n)||!n.hasOwnProperty("isPrototypeOf"))}function u8(t){return Object.prototype.toString.call(t)==="[object Object]"}function _N(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:y,getNextPageParam:m,initialPageParam:b,_optimisticResults:v,enabled:A,notifyOnChangeProps:C,placeholderData:S,refetchInterval:x,refetchIntervalInBackground:T,refetchOnMount:I,refetchOnReconnect:k,refetchOnWindowFocus:O,retryOnMount:B,select:G,staleTime:W,suspense:R,throwOnError:N,config:M,connector:P,query:D,...F}=t;return F}function nwe(t){return{mutationFn(e){return nS(t,e)},mutationKey:["connect"]}}function rwe(t){return{mutationFn(e){return Uk(t,e)},mutationKey:["disconnect"]}}function swe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return Dme(t,{...i,address:r})},queryKey:iwe(e)}}function iwe(t={}){return["ensName",_N(t)]}function owe(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Mme(t,{...o,connector:r})},queryKey:awe(e)}}function awe(t={}){const{connector:e,...n}=t;return["walletClient",{..._N(n),connectorUid:e==null?void 0:e.uid}]}function cwe(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return WK(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:lwe(e)}}function lwe(t={}){const{abi:e,...n}=t;return["readContract",_N(n)]}function uwe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return VK(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:dwe(e)}}function dwe(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",_N(n)]}function hwe(t){return{mutationFn(e){return KK(t,e)},mutationKey:["writeContract"]}}var pY=L.createContext(void 0),SL=t=>{const e=L.useContext(pY);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},fwe=({client:t,children:e})=>(L.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),w.jsx(pY.Provider,{value:t,children:e})),gY=L.createContext(!1),pwe=()=>L.useContext(gY);gY.Provider;function gwe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var mwe=L.createContext(gwe()),ywe=()=>L.useContext(mwe),wwe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},bwe=t=>{L.useEffect(()=>{t.clearReset()},[t])},vwe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||oY(n,[t.error,r])),Ewe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},_we=(t,e)=>t.isLoading&&t.isFetching&&!e,Cwe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,d8=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Awe(t,e,n){var d,h,f,p,g;const r=pwe(),s=ywe(),i=SL(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",Ewe(o),wwe(o,s),bwe(s);const a=!i.getQueryCache().get(o.queryHash),[c]=L.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(L.useSyncExternalStore(L.useCallback(y=>{const m=u?c.subscribe(Wr.batchCalls(y)):li;return c.updateResult(),m},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),L.useEffect(()=>{c.setOptions(o)},[o,c]),Cwe(o,l))throw d8(o,c,s);if(vwe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Sg&&_we(l,r)){const y=a?d8(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;y==null||y.catch(li).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function Swe(t,e){return Awe(t,Yye)}function IL(t,e){const n=SL(),[r]=L.useState(()=>new Zye(n,t));L.useEffect(()=>{r.setOptions(t)},[r,t]);const s=L.useSyncExternalStore(L.useCallback(o=>r.subscribe(Wr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=L.useCallback((o,a)=>{r.mutate(o,a).catch(li)},[r]);if(s.error&&oY(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function CN(t){const e=Swe({...t,queryKeyHashFn:ewe});return e.queryKey=t.queryKey,e}function AN(t={}){const e=ka(t);return L.useSyncExternalStore(n=>Fme(e,{onChange:n}),()=>Q6(e),()=>Q6(e))}function Iwe(t={}){const e=ka(t);return L.useSyncExternalStore(n=>qK(e,{onChange:n}),()=>J6(e),()=>J6(e))}function mY(t={}){const{mutation:e}=t,n=ka(t),r=nwe(n),{mutate:s,mutateAsync:i,...o}=IL({...e,...r});return L.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:Iwe({config:n})}}function xwe(t={}){const e=ka(t);return L.useSyncExternalStore(n=>GK(e,{onChange:n}),()=>Ja(e),()=>Ja(e))}function yY(t={}){const{mutation:e}=t,n=ka(t),r=rwe(n),{mutate:s,mutateAsync:i,...o}=IL({...e,...r});return{...o,connectors:xwe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function wY(t={}){const{address:e,query:n={}}=t,r=ka(t),s=AN({config:r}),i=swe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return CN({...n,...i,enabled:o})}function Nwe(t={}){const e=ka(t);return rY.useSyncExternalStoreWithSelector(n=>zme(e,{onChange:n}),()=>$k(e,t),()=>$k(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function h8(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=ka(t),a=AN({config:o}),c=cwe(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return CN({...s,...c,enabled:l,structuralSharing:s.structuralSharing??Xye})}function bY(t={}){const{query:e={},...n}=t,r=ka(n),s=SL(),{address:i,connector:o,status:a}=LC({config:r}),c=AN({config:r}),l=t.connector??o,{queryKey:u,...d}=owe(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=L.useRef(i);return L.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),CN({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function qR(t={}){const{hash:e,query:n={}}=t,r=ka(t),s=AN({config:r}),i=uwe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return CN({...n,...i,enabled:o})}function VR(t={}){const{mutation:e}=t,n=ka(t),r=hwe(n),{mutate:s,mutateAsync:i,...o}=IL({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const Twe="_verified_lvyh0_1",xL={verified:Twe},Rwe=()=>w.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:xL.verified,children:w.jsx("g",{children:w.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),Pwe=()=>w.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:xL.verified,children:w.jsxs("g",{children:[w.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[w.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),w.jsx("stop",{offset:".539",stopColor:"#cd8105"}),w.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),w.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),w.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),w.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[w.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),w.jsx("stop",{offset:".406",stopColor:"#e2b719"}),w.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),w.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[w.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),w.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),w.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Owe=()=>w.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:xL.verified,children:w.jsx("g",{children:w.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function vY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=vY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Kh(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=vY(t))&&(r&&(r+=" "),r+=e);return r}const kwe="_root_98iqw_1",Dwe="_article_98iqw_21",f8={root:kwe,article:Dwe},NL=({className:t,children:e})=>w.jsx("div",{className:Kh("react-tweet-theme",f8.root,t),children:w.jsx("article",{className:f8.article,children:e})}),EY=t=>w.jsx("img",{...t}),Mwe="_header_nqq4j_1",Lwe="_avatar_nqq4j_11",Uwe="_avatarOverflow_nqq4j_16",$we="_avatarSquare_nqq4j_23",Bwe="_avatarShadow_nqq4j_26",Fwe="_author_nqq4j_37",jwe="_authorLink_nqq4j_44",zwe="_authorVerified_nqq4j_53",Wwe="_authorLinkText_nqq4j_56",Hwe="_authorMeta_nqq4j_63",Gwe="_authorFollow_nqq4j_66",qwe="_username_nqq4j_69",Vwe="_follow_nqq4j_74",Kwe="_separator_nqq4j_82",Ywe="_brand_nqq4j_86",Qwe="_twitterIcon_nqq4j_90",gs={header:Mwe,avatar:Lwe,avatarOverflow:Uwe,avatarSquare:$we,avatarShadow:Bwe,author:Fwe,authorLink:jwe,authorVerified:zwe,authorLinkText:Wwe,authorMeta:Hwe,authorFollow:Gwe,username:qwe,follow:Vwe,separator:Kwe,brand:Ywe,twitterIcon:Qwe},Jwe="_verifiedOld_lcna5_1",Zwe="_verifiedBlue_lcna5_4",Xwe="_verifiedGovernment_lcna5_7",KR={verifiedOld:Jwe,verifiedBlue:Zwe,verifiedGovernment:Xwe},_Y=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=w.jsx(Rwe,{}),s=KR.verifiedBlue;if(n)switch(t.is_blue_verified||(s=KR.verifiedOld),t.verified_type){case"Government":r=w.jsx(Owe,{}),s=KR.verifiedGovernment;break;case"Business":r=w.jsx(Pwe,{}),s=null;break}return n?w.jsx("div",{className:Kh(e,s),children:r}):null},e0e=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:EY,{user:s}=t;return w.jsxs("div",{className:gs.header,children:[w.jsxs("a",{href:t.url,className:gs.avatar,target:"_blank",rel:"noopener noreferrer",children:[w.jsx("div",{className:Kh(gs.avatarOverflow,s.profile_image_shape==="Square"&&gs.avatarSquare),children:w.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),w.jsx("div",{className:gs.avatarOverflow,children:w.jsx("div",{className:gs.avatarShadow})})]}),w.jsxs("div",{className:gs.author,children:[w.jsxs("a",{href:t.url,className:gs.authorLink,target:"_blank",rel:"noopener noreferrer",children:[w.jsx("div",{className:gs.authorLinkText,children:w.jsx("span",{title:s.name,children:s.name})}),w.jsx(_Y,{user:s,className:gs.authorVerified})]}),w.jsxs("div",{className:gs.authorMeta,children:[w.jsx("a",{href:t.url,className:gs.username,target:"_blank",rel:"noopener noreferrer",children:w.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),w.jsxs("div",{className:gs.authorFollow,children:[w.jsx("span",{className:gs.separator,children:"·"}),w.jsx("a",{href:s.follow_url,className:gs.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),w.jsx("a",{href:t.url,className:gs.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:w.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:gs.twitterIcon,children:w.jsx("g",{children:w.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},t0e="_root_1ec15_1",n0e={root:t0e},r0e=({tweet:t})=>w.jsxs("a",{href:t.in_reply_to_url,className:n0e.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),s0e="_root_eihfa_1",i0e={root:s0e},o0e=({href:t,children:e})=>w.jsx("a",{href:t,className:i0e.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),a0e="_root_1xq52_1",c0e={root:a0e},l0e=({tweet:t})=>w.jsx("p",{className:c0e.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return w.jsx(o0e,{href:e.href,children:e.text},n);case"media":return;default:return w.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),p8=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,CY=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,u0e=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,d0e=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,h0e=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,f0e=t=>`https://x.com/hashtag/${t.text}`,p0e=t=>`https://x.com/search?q=%24${t.text}`,g0e=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,AY=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},m0e=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},y0e=t=>{const e=m0e(t);return e.length>1?e[1]:e[0]},tD=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function g8(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return Lb(n,"hashtag",t.entities.hashtags),Lb(n,"mention",t.entities.user_mentions),Lb(n,"url",t.entities.urls),Lb(n,"symbol",t.entities.symbols),t.entities.media&&Lb(n,"media",t.entities.media),w0e(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:f0e(r),text:s});case"mention":return Object.assign(r,{href:CY(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:p0e(r),text:s});default:return Object.assign(r,{text:s})}})}function Lb(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function w0e(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const b0e=t=>({...t,url:p8(t),user:{...t.user,url:CY(t),follow_url:h0e(t)},like_url:u0e(t),reply_url:d0e(t),in_reply_to_url:t.in_reply_to_screen_name?g0e(t):void 0,entities:g8(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:p8(t.quoted_tweet),entities:g8(t.quoted_tweet)}:void 0}),v0e="_root_g9tkv_1",E0e="_rounded_g9tkv_6",_0e="_mediaWrapper_g9tkv_10",C0e="_grid2Columns_g9tkv_17",A0e="_grid3_g9tkv_20",S0e="_grid2x2_g9tkv_23",I0e="_mediaContainer_g9tkv_26",x0e="_mediaLink_g9tkv_34",N0e="_skeleton_g9tkv_38",T0e="_image_g9tkv_43",wo={root:v0e,rounded:E0e,mediaWrapper:_0e,grid2Columns:C0e,grid3:A0e,grid2x2:S0e,mediaContainer:I0e,mediaLink:x0e,skeleton:N0e,image:T0e},R0e="_anchor_fp31d_1",P0e="_videoButton_fp31d_17",O0e="_videoButtonIcon_fp31d_35",k0e="_watchOnTwitter_fp31d_44",D0e="_viewReplies_fp31d_60",_m={anchor:R0e,videoButton:P0e,videoButtonIcon:O0e,watchOnTwitter:k0e,viewReplies:D0e},M0e=({tweet:t,media:e})=>{const[n,r]=L.useState(!0),[s,i]=L.useState(!1),[o,a]=L.useState(!1),c=y0e(e);let l=0;return w.jsxs(w.Fragment,{children:[w.jsx("video",{className:wo.image,poster:AY(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:w.jsx("source",{src:c.url,type:c.content_type})}),n&&w.jsx("button",{type:"button",className:_m.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:w.jsx("svg",{viewBox:"0 0 24 24",className:_m.videoButtonIcon,"aria-hidden":"true",children:w.jsx("g",{children:w.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&w.jsx("div",{className:_m.watchOnTwitter,children:w.jsx("a",{href:t.url,className:_m.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&w.jsx("a",{href:t.url,className:Kh(_m.anchor,_m.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},L0e=t=>w.jsx("img",{...t}),m8=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},SY=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:L0e;return w.jsx("div",{className:Kh(wo.root,!n&&wo.rounded),children:w.jsx("div",{className:Kh(wo.mediaWrapper,o>1&&wo.grid2Columns,o===3&&wo.grid3,o>4&&wo.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>w.jsx(L.Fragment,{children:l.type==="photo"?w.jsxs("a",{href:t.url,className:Kh(wo.mediaContainer,wo.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[w.jsx("div",{className:wo.skeleton,style:m8(l,o)}),w.jsx(c,{src:AY(l,"small"),alt:l.ext_alt_text||"Image",className:wo.image,draggable:!0})]},l.media_url_https):w.jsxs("div",{className:wo.mediaContainer,children:[w.jsx("div",{className:wo.skeleton,style:m8(l,o)}),w.jsx(M0e,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},U0e={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},$0e=new Intl.DateTimeFormat("en-US",U0e),B0e=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},F0e=t=>{const e=B0e($0e.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},j0e="_root_i24yn_1",z0e={root:j0e},W0e=({tweet:t})=>{const e=new Date(t.created_at),n=F0e(e);return w.jsx("a",{className:z0e.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:w.jsx("time",{dateTime:e.toISOString(),children:n})})},H0e="_info_19qcj_1",G0e="_infoLink_19qcj_10",q0e="_infoIcon_19qcj_30",YR={info:H0e,infoLink:G0e,infoIcon:q0e},V0e=({tweet:t})=>w.jsxs("div",{className:YR.info,children:[w.jsx(W0e,{tweet:t}),w.jsx("a",{className:YR.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:w.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:YR.infoIcon,children:w.jsx("g",{children:w.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),K0e="_actions_n2anf_1",Y0e="_like_n2anf_13",Q0e="_reply_n2anf_14",J0e="_copy_n2anf_15",Z0e="_likeIconWrapper_n2anf_27",X0e="_likeCount_n2anf_30",ebe="_replyIconWrapper_n2anf_35",tbe="_copyIconWrapper_n2anf_36",nbe="_likeIcon_n2anf_27",rbe="_replyIcon_n2anf_35",sbe="_copyIcon_n2anf_36",ibe="_replyText_n2anf_56",obe="_copyText_n2anf_57",ji={actions:K0e,like:Y0e,reply:Q0e,copy:J0e,likeIconWrapper:Z0e,likeCount:X0e,replyIconWrapper:ebe,copyIconWrapper:tbe,likeIcon:nbe,replyIcon:rbe,copyIcon:sbe,replyText:ibe,copyText:obe},abe=({tweet:t})=>{const[e,n]=L.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return L.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),w.jsxs("button",{type:"button",className:ji.copy,"aria-label":"Copy link",onClick:r,children:[w.jsx("div",{className:ji.copyIconWrapper,children:e?w.jsx("svg",{viewBox:"0 0 24 24",className:ji.copyIcon,"aria-hidden":"true",children:w.jsx("g",{children:w.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):w.jsx("svg",{viewBox:"0 0 24 24",className:ji.copyIcon,"aria-hidden":"true",children:w.jsx("g",{children:w.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),w.jsx("span",{className:ji.copyText,children:e?"Copied!":"Copy link"})]})},cbe=({tweet:t})=>{const e=tD(t.favorite_count);return w.jsxs("div",{className:ji.actions,children:[w.jsxs("a",{className:ji.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[w.jsx("div",{className:ji.likeIconWrapper,children:w.jsx("svg",{viewBox:"0 0 24 24",className:ji.likeIcon,"aria-hidden":"true",children:w.jsx("g",{children:w.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),w.jsx("span",{className:ji.likeCount,children:e})]}),w.jsxs("a",{className:ji.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[w.jsx("div",{className:ji.replyIconWrapper,children:w.jsx("svg",{viewBox:"0 0 24 24",className:ji.replyIcon,"aria-hidden":"true",children:w.jsx("g",{children:w.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),w.jsx("span",{className:ji.replyText,children:"Reply"})]}),w.jsx(abe,{tweet:t})]})},lbe="_replies_1cutb_1",ube="_link_1cutb_4",dbe="_text_1cutb_23",QR={replies:lbe,link:ube,text:dbe},hbe=({tweet:t})=>w.jsx("div",{className:QR.replies,children:w.jsx("a",{className:QR.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:w.jsx("span",{className:QR.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${tD(t.conversation_count)} reply`:`Read ${tD(t.conversation_count)} replies`})})}),fbe="_root_q5799_1",pbe="_article_q5799_16",y8={root:fbe,article:pbe},gbe=({tweet:t,children:e})=>w.jsx("div",{className:y8.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:w.jsx("article",{className:y8.article,children:e})}),mbe="_header_r31i5_1",ybe="_avatar_r31i5_11",wbe="_avatarSquare_r31i5_17",bbe="_author_r31i5_21",vbe="_authorText_r31i5_26",Ebe="_username_r31i5_33",Rf={header:mbe,avatar:ybe,avatarSquare:wbe,author:bbe,authorText:vbe,username:Ebe},_be=({tweet:t})=>{const{user:e}=t;return w.jsxs("div",{className:Rf.header,children:[w.jsx("a",{href:t.url,className:Rf.avatar,target:"_blank",rel:"noopener noreferrer",children:w.jsx("div",{className:Kh(Rf.avatarOverflow,e.profile_image_shape==="Square"&&Rf.avatarSquare),children:w.jsx(EY,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),w.jsxs("div",{className:Rf.author,children:[w.jsx("div",{className:Rf.authorText,children:w.jsx("span",{title:e.name,children:e.name})}),w.jsx(_Y,{user:e}),w.jsx("div",{className:Rf.username,children:w.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},Cbe="_root_175ot_1",Abe={root:Cbe},Sbe=({tweet:t})=>w.jsx("p",{className:Abe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>w.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Ibe=({tweet:t})=>{var e;return w.jsxs(gbe,{tweet:t,children:[w.jsx(_be,{tweet:t}),w.jsx(Sbe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?w.jsx(SY,{quoted:!0,tweet:t}):null]})},xbe=({tweet:t,components:e})=>{var n;const r=L.useMemo(()=>b0e(t),[t]);return w.jsxs(NL,{children:[w.jsx(e0e,{tweet:r,components:e}),r.in_reply_to_status_id_str&&w.jsx(r0e,{tweet:r}),w.jsx(l0e,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?w.jsx(SY,{tweet:r,components:e}):null,r.quoted_tweet&&w.jsx(Ibe,{tweet:r.quoted_tweet}),w.jsx(V0e,{tweet:r}),w.jsx(cbe,{tweet:r}),w.jsx(hbe,{tweet:r})]})},Nbe="_root_16yxa_1",Tbe={root:Nbe},Rbe=t=>w.jsx(NL,{children:w.jsxs("div",{className:Tbe.root,children:[w.jsx("h3",{children:"Tweet not found"}),w.jsx("p",{children:"The embedded tweet could not be found…"})]})}),Pbe="_skeleton_oi7hr_1",Obe={skeleton:Pbe},J1=({style:t})=>w.jsx("span",{className:Obe.skeleton,style:t}),kbe="_root_17qqv_1",Dbe={root:kbe},Mbe=()=>w.jsxs(NL,{className:Dbe.root,children:[w.jsx(J1,{style:{height:"3rem",marginBottom:"0.75rem"}}),w.jsx(J1,{style:{height:"6rem",margin:"0.5rem 0"}}),w.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),w.jsx(J1,{style:{height:"2rem"}}),w.jsx(J1,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]}),IY=0,xY=1,NY=2,w8=3;var b8=Object.prototype.hasOwnProperty;function nD(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&nD(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(b8.call(t,n)&&++r&&!b8.call(e,n)||!(n in e)||!nD(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const xu=new WeakMap,xh=()=>{},di=xh(),rD=Object,tn=t=>t===di,yl=t=>typeof t=="function",uf=(t,e)=>({...t,...e}),TY=t=>yl(t.then),JR={},Z1={},TL="undefined",UC=typeof window!=TL,sD=typeof document!=TL,Lbe=UC&&"Deno"in window,Ube=()=>UC&&typeof window.requestAnimationFrame!=TL,RY=(t,e)=>{const n=xu.get(t);return[()=>!tn(e)&&t.get(e)||JR,r=>{if(!tn(e)){const s=t.get(e);e in Z1||(Z1[e]=s),n[5](e,uf(s,r),s||JR)}},n[6],()=>!tn(e)&&e in Z1?Z1[e]:!tn(e)&&t.get(e)||JR]};let iD=!0;const $be=()=>iD,[oD,aD]=UC&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[xh,xh],Bbe=()=>{const t=sD&&document.visibilityState;return tn(t)||t!=="hidden"},Fbe=t=>(sD&&document.addEventListener("visibilitychange",t),oD("focus",t),()=>{sD&&document.removeEventListener("visibilitychange",t),aD("focus",t)}),jbe=t=>{const e=()=>{iD=!0,t()},n=()=>{iD=!1};return oD("online",e),oD("offline",n),()=>{aD("online",e),aD("offline",n)}},zbe={isOnline:$be,isVisible:Bbe},Wbe={initFocus:Fbe,initReconnect:jbe},v8=!Lo.useId,s_=!UC||Lbe,Hbe=t=>Ube()?window.requestAnimationFrame(t):setTimeout(t,1),ZR=s_?L.useEffect:L.useLayoutEffect,XR=typeof navigator<"u"&&navigator.connection,E8=!s_&&XR&&(["slow-2g","2g"].includes(XR.effectiveType)||XR.saveData),X1=new WeakMap,Gbe=t=>rD.prototype.toString.call(t),eP=(t,e)=>t===`[object ${e}]`;let qbe=0;const cD=t=>{const e=typeof t,n=Gbe(t),r=eP(n,"Date"),s=eP(n,"RegExp"),i=eP(n,"Object");let o,a;if(rD(t)===t&&!r&&!s){if(o=X1.get(t),o)return o;if(o=++qbe+"~",X1.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=cD(t[a])+",";X1.set(t,o)}if(i){o="#";const c=rD.keys(t).sort();for(;!tn(a=c.pop());)tn(t[a])||(o+=a+":"+cD(t[a])+",");X1.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},RL=t=>{if(yl(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?cD(t):"",[t,e]};let Vbe=0;const lD=()=>++Vbe;async function PY(...t){const[e,n,r,s]=t,i=uf({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(yl(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=RL(h);if(!f)return;const[p,g]=RY(e,f),[y,m,b,v]=xu.get(e),A=()=>{const W=y[f];return(yl(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],W&&W[0])?W[0](NY).then(()=>p().data):p().data};if(t.length<3)return A();let C=r,S,x=!1;const T=lD();m[f]=[T,0];const I=!tn(c),k=p(),O=k.data,B=k._c,G=tn(B)?O:B;if(I&&(c=yl(c)?c(G,O):c,g({data:c,_c:G})),yl(C))try{C=C(G)}catch(W){S=W,x=!0}if(C&&TY(C))if(C=await C.catch(W=>{S=W,x=!0}),T!==m[f][0]){if(x)throw S;return C}else x&&I&&l(S)&&(o=!0,g({data:G,_c:di}));if(o&&!x)if(yl(o)){const W=o(C,G);g({data:W,error:di,_c:di})}else g({data:C,error:di,_c:di});if(m[f][1]=lD(),Promise.resolve(A()).then(()=>{g({_c:di})}),x){if(u)throw S;return}return C}}const _8=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Kbe=(t,e)=>{if(!xu.has(t)){const n=uf(Wbe,e),r=Object.create(null),s=PY.bind(di,t);let i=xh;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!xu.has(t)&&(xu.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!s_)){const u=n.initFocus(setTimeout.bind(di,_8.bind(di,r,IY))),d=n.initReconnect(setTimeout.bind(di,_8.bind(di,r,xY)));i=()=>{u&&u(),d&&d(),xu.delete(t)}}};return l(),[t,s,l,i]}return[t,xu.get(t)[4]]},Ybe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!tn(i)&&o>i||setTimeout(r,a,s)},Qbe=nD,[OY,Jbe]=Kbe(new Map),Zbe=uf({onLoadingSlow:xh,onSuccess:xh,onError:xh,onErrorRetry:Ybe,onDiscarded:xh,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:E8?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:E8?5e3:3e3,compare:Qbe,isPaused:()=>!1,cache:OY,mutate:Jbe,fallback:{}},zbe),Xbe=(t,e)=>{const n=uf(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=uf(s,o))}return n},eve=L.createContext({}),tve="$inf$",kY=UC&&window.__SWR_DEVTOOLS_USE__,nve=kY?window.__SWR_DEVTOOLS_USE__:[],rve=()=>{kY&&(window.__SWR_DEVTOOLS_REACT__=Lo)},sve=t=>yl(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],ive=()=>uf(Zbe,L.useContext(eve)),ove=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=RL(e),[,,,a]=xu.get(OY);if(o.startsWith(tve))return n(...i);const c=a[o];return tn(c)?n(...i):(delete a[o],c)}),r),ave=nve.concat(ove),cve=t=>function(...n){const r=ive(),[s,i,o]=sve(n),a=Xbe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(ave);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},lve=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};rve();const tP=Lo.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),nP={dedupe:!0},uve=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,y]=xu.get(r),[m,b]=RL(t),v=L.useRef(!1),A=L.useRef(!1),C=L.useRef(m),S=L.useRef(e),x=L.useRef(n),T=()=>x.current,I=()=>T().isVisible()&&T().isOnline(),[k,O,B,G]=RY(r,m),W=L.useRef({}).current,R=tn(o)?tn(n.fallback)?di:n.fallback[m]:o,N=(Ae,we)=>{for(const me in W){const Xe=me;if(Xe==="data"){if(!s(Ae[Xe],we[Xe])&&(!tn(Ae[Xe])||!s(le,we[Xe])))return!1}else if(we[Xe]!==Ae[Xe])return!1}return!0},M=L.useMemo(()=>{const Ae=!m||!e?!1:tn(a)?T().isPaused()||i?!1:c!==!1:a,we=Ht=>{const nr=uf(Ht);return delete nr._k,Ae?{isValidating:!0,isLoading:!0,...nr}:nr},me=k(),Xe=G(),Zt=we(me),jt=me===Xe?Zt:we(Xe);let fn=Zt;return[()=>{const Ht=we(k());return N(Ht,fn)?(fn.data=Ht.data,fn.isLoading=Ht.isLoading,fn.isValidating=Ht.isValidating,fn.error=Ht.error,fn):(fn=Ht,Ht)},()=>jt]},[r,m]),P=nY.useSyncExternalStore(L.useCallback(Ae=>B(m,(we,me)=>{N(me,we)||Ae()}),[r,m]),M[0],M[1]),D=!v.current,F=f[m]&&f[m].length>0,H=P.data,te=tn(H)?R&&TY(R)?tP(R):R:H,re=P.error,ie=L.useRef(te),le=h?tn(H)?tn(ie.current)?te:ie.current:H:te,Ce=F&&!tn(re)?!1:D&&!tn(a)?a:T().isPaused()?!1:i?tn(te)?!1:c:tn(te)||c,X=!!(m&&e&&D&&Ce),ce=tn(P.isValidating)?X:P.isValidating,fe=tn(P.isLoading)?X:P.isLoading,de=L.useCallback(async Ae=>{const we=S.current;if(!m||!we||A.current||T().isPaused())return!1;let me,Xe,Zt=!0;const jt=Ae||{},fn=!g[m]||!jt.dedupe,Ht=()=>v8?!A.current&&m===C.current&&v.current:m===C.current,nr={isValidating:!1,isLoading:!1},uo=()=>{O(nr)},$a=()=>{const En=g[m];En&&En[1]===Xe&&delete g[m]},ei={isValidating:!0};tn(k().data)&&(ei.isLoading=!0);try{if(fn&&(O(ei),n.loadingTimeout&&tn(k().data)&&setTimeout(()=>{Zt&&Ht()&&T().onLoadingSlow(m,n)},n.loadingTimeout),g[m]=[we(b),lD()]),[me,Xe]=g[m],me=await me,fn&&setTimeout($a,n.dedupingInterval),!g[m]||g[m][1]!==Xe)return fn&&Ht()&&T().onDiscarded(m),!1;nr.error=di;const En=p[m];if(!tn(En)&&(Xe<=En[0]||Xe<=En[1]||En[1]===0))return uo(),fn&&Ht()&&T().onDiscarded(m),!1;const Lr=k().data;nr.data=s(Lr,me)?Lr:me,fn&&Ht()&&T().onSuccess(me,m,n)}catch(En){$a();const Lr=T(),{shouldRetryOnError:_n}=Lr;Lr.isPaused()||(nr.error=En,fn&&Ht()&&(Lr.onError(En,m,Lr),(_n===!0||yl(_n)&&_n(En))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||I())&&Lr.onErrorRetry(En,m,Lr,ho=>{const Wl=f[m];Wl&&Wl[0]&&Wl[0](w8,ho)},{retryCount:(jt.retryCount||0)+1,dedupe:!0})))}return Zt=!1,uo(),!0},[m,r]),ve=L.useCallback((...Ae)=>PY(r,C.current,...Ae),[]);if(ZR(()=>{S.current=e,x.current=n,tn(H)||(ie.current=H)}),ZR(()=>{if(!m)return;const Ae=de.bind(di,nP);let we=0;T().revalidateOnFocus&&(we=Date.now()+T().focusThrottleInterval);const Xe=lve(m,f,(Zt,jt={})=>{if(Zt==IY){const fn=Date.now();T().revalidateOnFocus&&fn>we&&I()&&(we=fn+T().focusThrottleInterval,Ae())}else if(Zt==xY)T().revalidateOnReconnect&&I()&&Ae();else{if(Zt==NY)return de();if(Zt==w8)return de(jt)}});return A.current=!1,C.current=m,v.current=!0,O({_k:b}),Ce&&(g[m]||(tn(te)||s_?Ae():Hbe(Ae))),()=>{A.current=!0,Xe()}},[m]),ZR(()=>{let Ae;function we(){const Xe=yl(l)?l(k().data):l;Xe&&Ae!==-1&&(Ae=setTimeout(me,Xe))}function me(){!k().error&&(u||T().isVisible())&&(d||T().isOnline())?de(nP).then(we):we()}return we(),()=>{Ae&&(clearTimeout(Ae),Ae=-1)}},[l,u,d,m]),L.useDebugValue(le),i&&tn(te)&&m){if(!v8&&s_)throw new Error("Fallback data is required when using Suspense in SSR.");S.current=e,x.current=n,A.current=!1;const Ae=y[m];if(!tn(Ae)){const we=ve(Ae);tP(we)}if(tn(re)){const we=de(nP);tn(le)||(we.status="fulfilled",we.value=!0),tP(we)}else throw re}return{mutate:ve,get data(){return W.data=!0,le},get error(){return W.error=!0,re},get isValidating(){return W.isValidating=!0,ce},get isLoading(){return W.isLoading=!0,fe}}},C8=cve(uve);class dve extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const hve=C8.default||C8,fve="https://react-tweet.vercel.app";async function pve([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new dve({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const gve=(t,e,n)=>{const{isLoading:r,data:s,error:i}=hve(()=>e||t?[e||t&&`${fve}/api/tweet/${t}`,n]:null,pve,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},mve=({id:t,apiUrl:e,fallback:n=w.jsx(Mbe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=gve(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||Rbe;return w.jsx(l,{error:i?i(a):a})}return w.jsx(xbe,{tweet:o,components:r})};var SN={exports:{}},DY={},MY={exports:{}},yve="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wve=yve,bve=wve;function LY(){}function UY(){}UY.resetWarningCache=LY;var vve=function(){function t(r,s,i,o,a,c){if(c!==bve){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:UY,resetWarningCache:LY};return n.PropTypes=n,n};MY.exports=vve();var $Y=MY.exports,uD={exports:{}};function BY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=BY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function A8(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=BY(t))&&(r&&(r+=" "),r+=e);return r}uD.exports=A8,uD.exports.clsx=A8;var Eve=uD.exports,Sr={},jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.dontSetMe=Ive;jl.findInArray=_ve;jl.int=Sve;jl.isFunction=Cve;jl.isNum=Ave;function _ve(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Cve(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Ave(t){return typeof t=="number"&&!isNaN(t)}function Sve(t){return parseInt(t,10)}function Ive(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var em={};Object.defineProperty(em,"__esModule",{value:!0});em.browserPrefixToKey=jY;em.browserPrefixToStyle=xve;em.default=void 0;em.getPrefix=FY;const rP=["Moz","Webkit","O","ms"];function FY(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<rP.length;s++)if(jY(t,rP[s])in e)return rP[s];return""}function jY(t,e){return e?`${e}${Nve(t)}`:t}function xve(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Nve(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}em.default=FY();Object.defineProperty(Sr,"__esModule",{value:!0});Sr.addClassName=HY;Sr.addEvent=Rve;Sr.addUserSelectStyles=jve;Sr.createCSSTransform=Uve;Sr.createSVGTransform=$ve;Sr.getTouch=Bve;Sr.getTouchIdentifier=Fve;Sr.getTranslation=PL;Sr.innerHeight=Dve;Sr.innerWidth=Mve;Sr.matchesSelector=WY;Sr.matchesSelectorAndParentsTo=Tve;Sr.offsetXYFromParent=Lve;Sr.outerHeight=Ove;Sr.outerWidth=kve;Sr.removeClassName=GY;Sr.removeEvent=Pve;Sr.scheduleRemoveUserSelectStyles=zve;var Bo=jl,S8=zY(em);function zY(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(zY=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let eA="";function WY(t,e){return eA||(eA=(0,Bo.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Bo.isFunction)(t[n])})),(0,Bo.isFunction)(t[eA])?t[eA](e):!1}function Tve(t,e,n){let r=t;do{if(WY(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Rve(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Pve(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Ove(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Bo.int)(n.borderTopWidth),e+=(0,Bo.int)(n.borderBottomWidth),e}function kve(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Bo.int)(n.borderLeftWidth),e+=(0,Bo.int)(n.borderRightWidth),e}function Dve(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Bo.int)(n.paddingTop),e-=(0,Bo.int)(n.paddingBottom),e}function Mve(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Bo.int)(n.paddingLeft),e-=(0,Bo.int)(n.paddingRight),e}function Lve(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Uve(t,e){const n=PL(t,e,"px");return{[(0,S8.browserPrefixToKey)("transform",S8.default)]:n}}function $ve(t,e){return PL(t,e,"")}function PL(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function Bve(t,e){return t.targetTouches&&(0,Bo.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Bo.findInArray)(t.changedTouches,n=>e===n.identifier)}function Fve(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function jve(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&HY(t.body,"react-draggable-transparent-selection")}function zve(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{I8(t)}):I8(t)}function I8(t){if(t)try{if(t.body&&GY(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function HY(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function GY(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var zl={};Object.defineProperty(zl,"__esModule",{value:!0});zl.canDragX=Gve;zl.canDragY=qve;zl.createCoreData=Kve;zl.createDraggableData=Yve;zl.getBoundPosition=Wve;zl.getControlPosition=Vve;zl.snapToGrid=Hve;var bo=jl,by=Sr;function Wve(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Qve(r);const s=OL(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,bo.int)(u.paddingLeft)+(0,bo.int)(l.marginLeft),top:-s.offsetTop+(0,bo.int)(u.paddingTop)+(0,bo.int)(l.marginTop),right:(0,by.innerWidth)(c)-(0,by.outerWidth)(s)-s.offsetLeft+(0,bo.int)(u.paddingRight)-(0,bo.int)(l.marginRight),bottom:(0,by.innerHeight)(c)-(0,by.outerHeight)(s)-s.offsetTop+(0,bo.int)(u.paddingBottom)-(0,bo.int)(l.marginBottom)}}return(0,bo.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,bo.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,bo.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,bo.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Hve(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function Gve(t){return t.props.axis==="both"||t.props.axis==="x"}function qve(t){return t.props.axis==="both"||t.props.axis==="y"}function Vve(t,e,n){const r=typeof e=="number"?(0,by.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=OL(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,by.offsetXYFromParent)(r||t,i,n.props.scale)}function Kve(t,e,n){const r=!(0,bo.isNum)(t.lastX),s=OL(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Yve(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Qve(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function OL(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var IN={},xN={};Object.defineProperty(xN,"__esModule",{value:!0});xN.default=Jve;function Jve(){}Object.defineProperty(IN,"__esModule",{value:!0});IN.default=void 0;var sP=qY(L),ti=kL($Y),Zve=kL(MM),Fs=Sr,wd=zl,iP=jl,Ub=kL(xN);function kL(t){return t&&t.__esModule?t:{default:t}}function qY(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(qY=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function ri(t,e,n){return(e=Xve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xve(t){var e=eEe(t,"string");return typeof e=="symbol"?e:e+""}function eEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const qa={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let bd=qa.mouse,NN=class extends sP.Component{constructor(){super(...arguments),ri(this,"dragging",!1),ri(this,"lastX",NaN),ri(this,"lastY",NaN),ri(this,"touchIdentifier",null),ri(this,"mounted",!1),ri(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Fs.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,Fs.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,Fs.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,wd.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,wd.createCoreData)(this,o,a);(0,Ub.default)("DraggableCore: handleDragStart: %j",c),(0,Ub.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Fs.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Fs.addEvent)(r,bd.move,this.handleDrag),(0,Fs.addEvent)(r,bd.stop,this.handleDragStop))}),ri(this,"handleDrag",e=>{const n=(0,wd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,wd.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,wd.createCoreData)(this,r,s);if((0,Ub.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),ri(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,wd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,wd.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,wd.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Fs.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,Ub.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Ub.default)("DraggableCore: Removing handlers"),(0,Fs.removeEvent)(a.ownerDocument,bd.move,this.handleDrag),(0,Fs.removeEvent)(a.ownerDocument,bd.stop,this.handleDragStop))}),ri(this,"onMouseDown",e=>(bd=qa.mouse,this.handleDragStart(e))),ri(this,"onMouseUp",e=>(bd=qa.mouse,this.handleDragStop(e))),ri(this,"onTouchStart",e=>(bd=qa.touch,this.handleDragStart(e))),ri(this,"onTouchEnd",e=>(bd=qa.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Fs.addEvent)(e,qa.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,Fs.removeEvent)(n,qa.mouse.move,this.handleDrag),(0,Fs.removeEvent)(n,qa.touch.move,this.handleDrag),(0,Fs.removeEvent)(n,qa.mouse.stop,this.handleDragStop),(0,Fs.removeEvent)(n,qa.touch.stop,this.handleDragStop),(0,Fs.removeEvent)(e,qa.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Fs.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:Zve.default.findDOMNode(this)}render(){return sP.cloneElement(sP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};IN.default=NN;ri(NN,"displayName","DraggableCore");ri(NN,"propTypes",{allowAnyClick:ti.default.bool,allowMobileScroll:ti.default.bool,children:ti.default.node.isRequired,disabled:ti.default.bool,enableUserSelectHack:ti.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:ti.default.arrayOf(ti.default.number),handle:ti.default.string,cancel:ti.default.string,nodeRef:ti.default.object,onStart:ti.default.func,onDrag:ti.default.func,onStop:ti.default.func,onMouseDown:ti.default.func,scale:ti.default.number,className:iP.dontSetMe,style:iP.dontSetMe,transform:iP.dontSetMe});ri(NN,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(L),n=u($Y),r=u(MM),s=Eve,i=Sr,o=zl,a=jl,c=u(IN),l=u(xN);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,b){if(typeof WeakMap=="function")var v=new WeakMap,A=new WeakMap;return(d=function(C,S){if(!S&&C&&C.__esModule)return C;var x,T,I={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return I;if(x=S?A:v){if(x.has(C))return x.get(C);x.set(C,I)}for(const k in C)k!=="default"&&{}.hasOwnProperty.call(C,k)&&((T=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,k))&&(T.get||T.set)?x(I,k,T):I[k]=C[k]);return I})(m,b)}function h(){return h=Object.assign?Object.assign.bind():function(m){for(var b=1;b<arguments.length;b++){var v=arguments[b];for(var A in v)({}).hasOwnProperty.call(v,A)&&(m[A]=v[A])}return m},h.apply(null,arguments)}function f(m,b,v){return(b=p(b))in m?Object.defineProperty(m,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[b]=v,m}function p(m){var b=g(m,"string");return typeof b=="symbol"?b:b+""}function g(m,b){if(typeof m!="object"||!m)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var A=v.call(m,b);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(m)}class y extends e.Component{static getDerivedStateFromProps(b,v){let{position:A}=b,{prevPropsPosition:C}=v;return A&&(!C||A.x!==C.x||A.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:C}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(b){super(b),f(this,"onDragStart",(v,A)=>{if((0,l.default)("Draggable: onDragStart: %j",A),this.props.onStart(v,(0,o.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,A)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",A);const C=(0,o.createDraggableData)(this,A),S={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:I}=S;S.x+=this.state.slackX,S.y+=this.state.slackY;const[k,O]=(0,o.getBoundPosition)(this,S.x,S.y);S.x=k,S.y=O,S.slackX=this.state.slackX+(T-S.x),S.slackY=this.state.slackY+(I-S.y),C.x=S.x,C.y=S.y,C.deltaX=S.x-this.state.x,C.deltaY=S.y-this.state.y}if(this.props.onDrag(v,C)===!1)return!1;this.setState(S)}),f(this,"onDragStop",(v,A)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,A))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",A);const S={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:I}=this.props.position;S.x=T,S.y=I}this.setState(S)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,v;return((v=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:v,children:A,defaultPosition:C,defaultClassName:S,defaultClassNameDragging:x,defaultClassNameDragged:T,position:I,positionOffset:k,scale:O,...B}=this.props;let G={},W=null;const N=!!!I||this.state.dragging,M=I||C,P={x:(0,o.canDragX)(this)&&N?this.state.x:M.x,y:(0,o.canDragY)(this)&&N?this.state.y:M.y};this.state.isElementSVG?W=(0,i.createSVGTransform)(P,k):G=(0,i.createCSSTransform)(P,k);const D=(0,s.clsx)(A.props.className||"",S,{[x]:this.state.dragging,[T]:this.state.dragged});return e.createElement(c.default,h({},B,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(A),{className:D,style:{...A.props.style,...G},transform:W}))}}t.default=y,f(y,"displayName","Draggable"),f(y,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(DY);const{default:VY,DraggableCore:tEe}=DY;SN.exports=VY;SN.exports.default=VY;SN.exports.DraggableCore=tEe;var nEe=SN.exports;const $C=Gg(nEe);function dr(){return dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dr.apply(null,arguments)}function KY(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var YY={exports:{}},xn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ps=typeof Symbol=="function"&&Symbol.for,DL=ps?Symbol.for("react.element"):60103,ML=ps?Symbol.for("react.portal"):60106,TN=ps?Symbol.for("react.fragment"):60107,RN=ps?Symbol.for("react.strict_mode"):60108,PN=ps?Symbol.for("react.profiler"):60114,ON=ps?Symbol.for("react.provider"):60109,kN=ps?Symbol.for("react.context"):60110,LL=ps?Symbol.for("react.async_mode"):60111,DN=ps?Symbol.for("react.concurrent_mode"):60111,MN=ps?Symbol.for("react.forward_ref"):60112,LN=ps?Symbol.for("react.suspense"):60113,rEe=ps?Symbol.for("react.suspense_list"):60120,UN=ps?Symbol.for("react.memo"):60115,$N=ps?Symbol.for("react.lazy"):60116,sEe=ps?Symbol.for("react.block"):60121,iEe=ps?Symbol.for("react.fundamental"):60117,oEe=ps?Symbol.for("react.responder"):60118,aEe=ps?Symbol.for("react.scope"):60119;function Vo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case DL:switch(t=t.type,t){case LL:case DN:case TN:case PN:case RN:case LN:return t;default:switch(t=t&&t.$$typeof,t){case kN:case MN:case $N:case UN:case ON:return t;default:return e}}case ML:return e}}}function QY(t){return Vo(t)===DN}xn.AsyncMode=LL;xn.ConcurrentMode=DN;xn.ContextConsumer=kN;xn.ContextProvider=ON;xn.Element=DL;xn.ForwardRef=MN;xn.Fragment=TN;xn.Lazy=$N;xn.Memo=UN;xn.Portal=ML;xn.Profiler=PN;xn.StrictMode=RN;xn.Suspense=LN;xn.isAsyncMode=function(t){return QY(t)||Vo(t)===LL};xn.isConcurrentMode=QY;xn.isContextConsumer=function(t){return Vo(t)===kN};xn.isContextProvider=function(t){return Vo(t)===ON};xn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===DL};xn.isForwardRef=function(t){return Vo(t)===MN};xn.isFragment=function(t){return Vo(t)===TN};xn.isLazy=function(t){return Vo(t)===$N};xn.isMemo=function(t){return Vo(t)===UN};xn.isPortal=function(t){return Vo(t)===ML};xn.isProfiler=function(t){return Vo(t)===PN};xn.isStrictMode=function(t){return Vo(t)===RN};xn.isSuspense=function(t){return Vo(t)===LN};xn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===TN||t===DN||t===PN||t===RN||t===LN||t===rEe||typeof t=="object"&&t!==null&&(t.$$typeof===$N||t.$$typeof===UN||t.$$typeof===ON||t.$$typeof===kN||t.$$typeof===MN||t.$$typeof===iEe||t.$$typeof===oEe||t.$$typeof===aEe||t.$$typeof===sEe)};xn.typeOf=Vo;YY.exports=xn;var cEe=YY.exports,UL=cEe,lEe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},uEe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dEe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},JY={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$L={};$L[UL.ForwardRef]=dEe;$L[UL.Memo]=JY;function x8(t){return UL.isMemo(t)?JY:$L[t.$$typeof]||lEe}var hEe=Object.defineProperty,fEe=Object.getOwnPropertyNames,N8=Object.getOwnPropertySymbols,pEe=Object.getOwnPropertyDescriptor,gEe=Object.getPrototypeOf,T8=Object.prototype;function ZY(t,e,n){if(typeof e!="string"){if(T8){var r=gEe(e);r&&r!==T8&&ZY(t,r,n)}var s=fEe(e);N8&&(s=s.concat(N8(e)));for(var i=x8(t),o=x8(e),a=0;a<s.length;++a){var c=s[a];if(!uEe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=pEe(e,c);try{hEe(t,c,l)}catch{}}}}return t}var mEe=ZY;const yEe=Gg(mEe);var XY={};Object.defineProperty(XY,"__esModule",{value:!0});XY.default=wEe;function wEe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function tA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kI(){return kI=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kI.apply(this,arguments)}function bEe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function vd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vEe(t){var e=function(n){bEe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,tA(vd(vd(i)),"cachedTheme",void 0),tA(vd(vd(i)),"lastOuterTheme",void 0),tA(vd(vd(i)),"lastTheme",void 0),tA(vd(vd(i)),"renderProvider",function(l){var u=i.props.children;return Lo.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?kI({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Lo.createElement(t.Consumer,null,this.renderProvider):null},r}(Lo.Component);return e}function EEe(t){return function(n){var r=Lo.forwardRef(function(s,i){return Lo.createElement(t.Consumer,null,function(o){return Lo.createElement(n,kI({theme:o,ref:i},s))})});return yEe(r,n),r}}function _Ee(t){var e=function(){var r=Lo.useContext(t);return r};return e}function CEe(t){return{context:t,withTheme:EEe(t),useTheme:_Ee(t),ThemeProvider:vEe(t)}}var eQ=L.createContext();CEe(eQ);var R8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eb=(typeof window>"u"?"undefined":R8(window))==="object"&&(typeof document>"u"?"undefined":R8(document))==="object"&&document.nodeType===9;function i_(t){"@babel/helpers - typeof";return i_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i_(t)}function AEe(t,e){if(i_(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(i_(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function SEe(t){var e=AEe(t,"string");return i_(e)=="symbol"?e:e+""}function IEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SEe(r.key),r)}}function BL(t,e,n){return e&&IEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dD(t,e){return dD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},dD(t,e)}function tQ(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,dD(t,e)}function P8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var xEe={}.constructor;function hD(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(hD);if(t.constructor!==xEe)return t;var e={};for(var n in t)e[n]=hD(t[n]);return e}function BN(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=hD(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var O8=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},tg=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=O8(e[r]," ");else n=O8(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function tb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function $b(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function o_(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=tb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=$b(f+":"+u+tg(p)+";",o))}}else for(var g in a){var y=a[g];y!=null&&(r&&(r+=l),r+=$b(g+":"+u+tg(y)+";",o))}for(var m in e){var b=e[m];b!=null&&m!=="fallbacks"&&(r&&(r+=l),r+=$b(m+":"+u+tg(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),$b(""+t+u+"{"+r,o)+$b("}",o))}var NEe=/([[\].#*$><+~=|^:(),"'`\s])/g,k8=typeof CSS<"u"&&CSS.escape,FL=function(t){return k8?k8(t):t.replace(NEe,"\\$1")},nQ=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),fD=function(t){tQ(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(P8(P8(o)),l),o.selectorText="."+FL(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=tg(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?dr({},s,{allowEmpty:!0}):s;return o_(this.selectorText,this.style,a)},BL(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(nQ),TEe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new fD(e,n,r)}},oP={indent:1,children:!0},REe=/@([\w-]+)/,PEe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(REe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new FN(dr({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=oP);var s=tb(r),i=s.linebreak;if(r.indent==null&&(r.indent=oP.indent),r.children==null&&(r.children=oP.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),OEe=/@container|@media|@supports\s+/,kEe={onCreateRule:function(e,n,r){return OEe.test(e)?new PEe(e,n,r):null}},aP={indent:1,children:!0},DEe=/@keyframes\s+([\w-]+)/,pD=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(DEe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:FL(c(this,a)),this.rules=new FN(dr({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],dr({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=aP);var s=tb(r),i=s.linebreak;if(r.indent==null&&(r.indent=aP.indent),r.children==null&&(r.children=aP.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),MEe=/@keyframes\s+/,LEe=/\$([\w-]+)/g,gD=function(e,n){return typeof e=="string"?e.replace(LEe,function(r,s){return s in n?n[s]:r}):e},D8=function(e,n,r){var s=e[n],i=gD(s,r);i!==s&&(e[n]=i)},UEe={onCreateRule:function(e,n,r){return typeof e=="string"&&MEe.test(e)?new pD(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&D8(e,"animation-name",r.keyframes),"animation"in e&&D8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return gD(e,s.keyframes);case"animation-name":return gD(e,s.keyframes);default:return e}}},$Ee=function(t){tQ(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?dr({},s,{allowEmpty:!0}):s;return o_(this.key,this.style,a)},e}(nQ),BEe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new $Ee(e,n,r):null}},FEe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=tb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=o_(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return o_(this.at,this.style,r)},t}(),jEe=/@font-face/,zEe={onCreateRule:function(e,n,r){return jEe.test(e)?new FEe(e,n,r):null}},WEe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return o_(this.key,this.style,r)},t}(),HEe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new WEe(e,n,r):null}},GEe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),qEe={"@charset":!0,"@import":!0,"@namespace":!0},VEe={onCreateRule:function(e,n,r){return e in qEe?new GEe(e,n,r):null}},M8=[TEe,kEe,UEe,BEe,zEe,HEe,VEe],KEe={process:!0},L8={force:!0,process:!0},FN=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=dr({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+FL(this.classes[p]));var g=BN(p,s,f);if(!g)return null;this.register(g);var y=f.index===void 0?this.index.length:f.index;return this.index.splice(y,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=dr({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof fD?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof pD&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof fD?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof pD&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=KEe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,L8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,L8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=tb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),rQ=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=dr({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new FN(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),YEe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),QEe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=KY(s,["attached"]),a=tb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},BL(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),Vv=new QEe,mD=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),yD="2f1acc6c3a606b082e5eef5e54414ffb";mD[yD]==null&&(mD[yD]=0);var U8=mD[yD]++,$8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+U8+a+n:c+i.key+"-"+U8+(a?"-"+a:"")+"-"+n};return r},sQ=function(e){var n;return function(){return n||(n=e()),n}},JEe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},ZEe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=tg(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},XEe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},e_e=function(e,n){return e.selectorText=n,e.selectorText===n},iQ=sQ(function(){return document.querySelector("head")});function t_e(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function n_e(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function r_e(t){for(var e=iQ(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function s_e(t){var e=Vv.registry;if(e.length>0){var n=t_e(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=n_e(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=r_e(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function i_e(t,e){var n=e.insertionPoint,r=s_e(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}iQ().appendChild(t)}var o_e=sQ(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),B8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},F8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},a_e=function(){var e=document.createElement("style");return e.textContent=`
`,e},c_e=function(){function t(n){this.getPropertyValue=JEe,this.setProperty=ZEe,this.removeProperty=XEe,this.setSelector=e_e,this.hasInsertedRules=!1,this.cssRules=[],n&&Vv.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||a_e(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=o_e();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){i_e(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=F8(i,s);if(a=B8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=F8(i,s),d=B8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof rQ&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),l_e=0,u_e=function(){function t(n){this.id=l_e++,this.version="10.10.0",this.plugins=new YEe,this.options={id:{minify:!1},createGenerateId:$8,Renderer:eb?c_e:null,plugins:[]},this.generateId=$8({minify:!1});for(var r=0;r<M8.length;r++)this.plugins.use(M8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=dr({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=Vv.index===0?0:Vv.index+1);var a=new rQ(r,dr({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),Vv.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=dr({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=BN(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),oQ=function(e){return new u_e(e)},j8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},BL(t,[{key:"size",get:function(){return this.length}}]),t}(),jL=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function aQ(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=aQ(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */oQ();var cQ=Date.now(),cP="fnValues"+cQ,lP="fnStyle"+ ++cQ,d_e=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=BN(n,{},s);return i[lP]=r,i},onProcessStyle:function(n,r){if(cP in r||lP in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[cP]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[lP];a&&(o.style=a(n)||{});var c=o[cP];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function h_e(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Qm;typeof self<"u"?Qm=self:typeof window<"u"?Qm=window:typeof global<"u"?Qm=global:typeof module<"u"?Qm=module:Qm=Function("return this")();var z8=h_e(Qm),W8=function(e){return e&&e[z8]&&e===e[z8]()},f_e=function(e){return{onCreateRule:function(r,s,i){if(!W8(s))return null;var o=s,a=BN(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!W8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},p_e=/;\n/,g_e=function(e){for(var n={},r=e.split(p_e),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},m_e=function(e){typeof e.style=="string"&&(e.style=g_e(e.style))};function y_e(){return{onProcessRule:m_e}}var Yh="@global",wD="@global ",w_e=function(){function t(n,r,s){this.type="global",this.at=Yh,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new FN(dr({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),b_e=function(){function t(n,r,s){this.type="global",this.at=Yh,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(wD.length);this.rule=s.jss.createRule(i,r,dr({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),v_e=/\s*,\s*/g;function lQ(t,e){for(var n=t.split(v_e),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function E_e(t,e){var n=t.options,r=t.style,s=r?r[Yh]:null;if(s){for(var i in s)e.addRule(i,s[i],dr({},n,{selector:lQ(i,t.selector)}));delete r[Yh]}}function __e(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Yh.length)!==Yh)){var i=lQ(s.substr(Yh.length),t.selector);e.addRule(i,r[s],dr({},n,{selector:i})),delete r[s]}}function C_e(){function t(n,r,s){if(!n)return null;if(n===Yh)return new w_e(n,r,s);if(n[0]==="@"&&n.substr(0,wD.length)===wD)return new b_e(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(E_e(n,r),__e(n,r))}return{onCreateRule:t,onProcessRule:e}}var iS=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},uP="extendCurrValue"+Date.now();function A_e(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];mp(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?dr({},t,{extend:l}):t.extend[c];mp(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){mp(t.extend.extend,e,n,r);continue}if(iS(t.extend[d])){d in r||(r[d]={}),mp(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function S_e(t,e,n,r){for(var s in t)if(s!=="extend"){if(iS(r[s])&&iS(t[s])){mp(t[s],e,n,r[s]);continue}if(iS(t[s])){r[s]=mp(t[s],e,n);continue}r[s]=t[s]}}function mp(t,e,n,r){return r===void 0&&(r={}),A_e(t,e,n,r),S_e(t,e,n,r),r}function I_e(){function t(n,r,s){return"extend"in n?mp(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[uP])s.prop(i,null);return s[uP]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[uP]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var H8=/\s*,\s*/g,x_e=/&/g,N_e=/\$([\w-]+)/g;function T_e(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(H8),a=s.split(H8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(x_e,u):u+" "+h}return c}function n(s,i,o){if(o)return dr({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=dr({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(N_e,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],dr({},l,{selector:p})):c.addRule(g,s[d],dr({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function bD(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=bD(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return bD(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function R_e(){function t(e,n){return"composes"in e&&(bD(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var P_e=/[A-Z]/g,O_e=/^ms-/,dP={};function k_e(t){return"-"+t.toLowerCase()}function uQ(t){if(dP.hasOwnProperty(t))return dP[t];var e=t.replace(P_e,k_e);return dP[t]=O_e.test(e)?"-"+e:e}function DI(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:uQ(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(DI):e.fallbacks=DI(t.fallbacks)),e}function D_e(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=DI(n[r]);return n}return DI(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=uQ(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var ue=jL&&CSS?CSS.px:"px",nA=jL&&CSS?CSS.ms:"ms",Cm=jL&&CSS?CSS.percent:"%",M_e={"animation-delay":nA,"animation-duration":nA,"background-position":ue,"background-position-x":ue,"background-position-y":ue,"background-size":ue,border:ue,"border-bottom":ue,"border-bottom-left-radius":ue,"border-bottom-right-radius":ue,"border-bottom-width":ue,"border-left":ue,"border-left-width":ue,"border-radius":ue,"border-right":ue,"border-right-width":ue,"border-top":ue,"border-top-left-radius":ue,"border-top-right-radius":ue,"border-top-width":ue,"border-width":ue,"border-block":ue,"border-block-end":ue,"border-block-end-width":ue,"border-block-start":ue,"border-block-start-width":ue,"border-block-width":ue,"border-inline":ue,"border-inline-end":ue,"border-inline-end-width":ue,"border-inline-start":ue,"border-inline-start-width":ue,"border-inline-width":ue,"border-start-start-radius":ue,"border-start-end-radius":ue,"border-end-start-radius":ue,"border-end-end-radius":ue,margin:ue,"margin-bottom":ue,"margin-left":ue,"margin-right":ue,"margin-top":ue,"margin-block":ue,"margin-block-end":ue,"margin-block-start":ue,"margin-inline":ue,"margin-inline-end":ue,"margin-inline-start":ue,padding:ue,"padding-bottom":ue,"padding-left":ue,"padding-right":ue,"padding-top":ue,"padding-block":ue,"padding-block-end":ue,"padding-block-start":ue,"padding-inline":ue,"padding-inline-end":ue,"padding-inline-start":ue,"mask-position-x":ue,"mask-position-y":ue,"mask-size":ue,height:ue,width:ue,"min-height":ue,"max-height":ue,"min-width":ue,"max-width":ue,bottom:ue,left:ue,top:ue,right:ue,inset:ue,"inset-block":ue,"inset-block-end":ue,"inset-block-start":ue,"inset-inline":ue,"inset-inline-end":ue,"inset-inline-start":ue,"box-shadow":ue,"text-shadow":ue,"column-gap":ue,"column-rule":ue,"column-rule-width":ue,"column-width":ue,"font-size":ue,"font-size-delta":ue,"letter-spacing":ue,"text-decoration-thickness":ue,"text-indent":ue,"text-stroke":ue,"text-stroke-width":ue,"word-spacing":ue,motion:ue,"motion-offset":ue,outline:ue,"outline-offset":ue,"outline-width":ue,perspective:ue,"perspective-origin-x":Cm,"perspective-origin-y":Cm,"transform-origin":Cm,"transform-origin-x":Cm,"transform-origin-y":Cm,"transform-origin-z":Cm,"transition-delay":nA,"transition-duration":nA,"vertical-align":ue,"flex-basis":ue,"shape-margin":ue,size:ue,gap:ue,grid:ue,"grid-gap":ue,"row-gap":ue,"grid-row-gap":ue,"grid-column-gap":ue,"grid-template-rows":ue,"grid-template-columns":ue,"grid-auto-rows":ue,"grid-auto-columns":ue,"box-shadow-x":ue,"box-shadow-y":ue,"box-shadow-blur":ue,"box-shadow-spread":ue,"font-line-height":ue,"text-shadow-x":ue,"text-shadow-y":ue,"text-shadow-blur":ue};function dQ(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var L_e=dQ(M_e);function Kv(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=Kv(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=Kv(s,e[s],n);else for(var i in e)e[i]=Kv(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||L_e[t];return o&&!(e===0&&o===ue)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function U_e(t){t===void 0&&(t={});var e=dQ(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=Kv(o,s[o],e);return s}function r(s,i){return Kv(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var $_e={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},B_e={position:!0,size:!0},rA={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},hP={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function F_e(t,e,n){return t.map(function(r){return fQ(r,e,n,!1,!0)})}function hQ(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?hQ(t[0],e,n,r):typeof t[0]=="object"?F_e(t,e,r):[t]}function fQ(t,e,n,r,s){if(!(rA[e]||hP[e]))return[];var i=[];if(hP[e]&&(t=j_e(t,n,hP[e],r)),Object.keys(t).length)for(var o in rA[e]){if(t[o]){Array.isArray(t[o])?i.push(B_e[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}rA[e][o]!=null&&i.push(rA[e][o])}return!i.length||s?i:[i]}function j_e(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=a_((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function a_(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=a_(t.fallbacks[i],e,!0);continue}t[r]=hQ(s,r,$_e,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=a_(t.fallbacks,e,!0);continue}t[r]=fQ(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function z_e(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=a_(e[r],n);return e}return a_(e,n)}return{onProcessStyle:t}}function vD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function W_e(t){if(Array.isArray(t))return vD(t)}function H_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function G_e(t,e){if(t){if(typeof t=="string")return vD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vD(t,e):void 0}}function q_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V_e(t){return W_e(t)||H_e(t)||G_e(t)||q_e()}var uv="",ED="",pQ="",gQ="",K_e=eb&&"ontouchstart"in document.documentElement;if(eb){var fP={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Y_e=document.createElement("p"),pP=Y_e.style,Q_e="Transform";for(var gP in fP)if(gP+Q_e in pP){uv=gP,ED=fP[gP];break}uv==="Webkit"&&"msHyphens"in pP&&(uv="ms",ED=fP.ms,gQ="edge"),uv==="Webkit"&&"-apple-trailing-word"in pP&&(pQ="apple")}var Tt={js:uv,css:ED,vendor:pQ,browser:gQ,isTouch:K_e};function J_e(t){return t[1]==="-"||Tt.js==="ms"?t:"@"+Tt.css+"keyframes"+t.substr(10)}var Z_e={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Tt.js==="ms"?"-webkit-"+e:Tt.css+e}},X_e={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Tt.js==="Webkit"?Tt.css+"print-"+e:e}},eCe=/[-\s]+(.)?/g;function tCe(t,e){return e?e.toUpperCase():""}function zL(t){return t.replace(eCe,tCe)}function df(t){return zL("-"+t)}var nCe={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Tt.js==="Webkit"){var r="mask-image";if(zL(r)in n)return e;if(Tt.js+df(r)in n)return Tt.css+e}return e}},rCe={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Tt.vendor==="apple"&&!Tt.isTouch?Tt.css+e:e}},sCe={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Tt.css+e}},iCe={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Tt.css+e}},oCe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Tt.js==="Webkit"||Tt.js==="ms"&&Tt.browser!=="edge"?Tt.css+e:e}},aCe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Tt.js==="Moz"||Tt.js==="ms"||Tt.vendor==="apple"?Tt.css+e:e}},cCe={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Tt.js==="Webkit"){var r="WebkitColumn"+df(e);return r in n?Tt.css+"column-"+e:!1}if(Tt.js==="Moz"){var s="page"+df(e);return s in n?"page-"+e:!1}return!1}},lCe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Tt.js==="Moz")return e;var r=e.replace("-inline","");return Tt.js+df(r)in n?Tt.css+r:!1}},uCe={supportedProperty:function(e,n){return zL(e)in n?e:!1}},dCe={supportedProperty:function(e,n){var r=df(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Tt.js+r in n?Tt.css+e:Tt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},hCe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Tt.js==="ms"?""+Tt.css+e:e}},fCe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Tt.js==="ms"?Tt.css+"scroll-chaining":e}},pCe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},gCe={supportedProperty:function(e,n){var r=pCe[e];return r&&Tt.js+df(r)in n?Tt.css+r:!1}},mQ={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},mCe=Object.keys(mQ),yCe=function(e){return Tt.css+e},wCe={supportedProperty:function(e,n,r){var s=r.multiple;if(mCe.indexOf(e)>-1){var i=mQ[e];if(!Array.isArray(i))return Tt.js+df(i)in n?Tt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Tt.js+df(i[0])in n))return!1;return i.map(yCe)}return!1}},yQ=[Z_e,X_e,nCe,rCe,sCe,iCe,oCe,aCe,cCe,lCe,uCe,dCe,hCe,fCe,gCe,wCe],G8=yQ.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),bCe=yQ.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,V_e(e.noPrefill)),t},[]),dv,Qf={};if(eb){dv=document.createElement("p");var mP=window.getComputedStyle(document.documentElement,"");for(var yP in mP)isNaN(yP)||(Qf[mP[yP]]=mP[yP]);bCe.forEach(function(t){return delete Qf[t]})}function _D(t,e){if(e===void 0&&(e={}),!dv)return t;if(Qf[t]!=null)return Qf[t];(t==="transition"||t==="transform")&&(e[t]=t in dv.style);for(var n=0;n<G8.length&&(Qf[t]=G8[n](t,dv.style,e),!Qf[t]);n++);try{dv.style[t]=""}catch{return!1}return Qf[t]}var Am={},vCe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},ECe=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Ld;function _Ce(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?_D(e):", "+_D(n);return r||e||n}eb&&(Ld=document.createElement("p"));function q8(t,e){var n=e;if(!Ld||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Am[r]!=null)return Am[r];try{Ld.style[t]=n}catch{return Am[r]=!1,!1}if(vCe[t])n=n.replace(ECe,_Ce);else if(Ld.style[t]===""&&(n=Tt.css+n,n==="-ms-flex"&&(Ld.style[t]="-ms-flexbox"),Ld.style[t]=n,Ld.style[t]===""))return Am[r]=!1,!1;return Ld.style[t]="",Am[r]=n,Am[r]}function CCe(){function t(s){if(s.type==="keyframes"){var i=s;i.at=J_e(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=_D(i);c&&c!==i&&(a=!0);var l=!1,u=q8(c,tg(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return q8(i,tg(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function ACe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var SCe=function(e){return e===void 0&&(e={}),{plugins:[d_e(),f_e(e.observable),y_e(),C_e(),I_e(),T_e(),R_e(),D_e(),U_e(e.defaultUnit),z_e(),CCe(),ACe()]}},ICe=Number.MIN_SAFE_INTEGER||-1e9,xCe=function(){return ICe++},NCe=L.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!eb}),V8=new Map,WL=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new j8),r[n];var s=V8.get(n);return s||(s=new j8,V8.set(n,s)),s},K8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=WL(r,s);o.manage(i),r.registry&&r.registry.add(n)}},TCe=function(e){if(e.sheet){var n=WL(e.context,e.index);n.unmanage(e.theme)}},RCe=oQ(SCe()),wQ=new WeakMap,bQ=function(e){return wQ.get(e)},PCe=function(e,n){wQ.set(e,n)},OCe=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function kCe(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",dr({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var DCe=function(e){if(!e.context.disableStylesGeneration){var n=WL(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||RCe,i=OCe(e),o=aQ(i),a=s.createStyleSheet(i,kCe(e,o!==null));return PCe(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},MCe=function(e,n){for(var r in n)e.deleteRule(n[r])},LCe=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},UCe=function(e,n){var r=bQ(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},$Ce=function(e,n){if(!n)return e.classes;var r=bQ(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function Y8(t){return t?L.useEffect:Lo.useInsertionEffect||L.useLayoutEffect}var wP={},Rc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?xCe():s,o=r.theming,a=r.name,c=KY(r,["index","theming","name"]),l=o&&o.context||eQ,u=function(f){return typeof e=="function"&&(f||L.useContext(l))||wP},d={};return function(f){var p=L.useRef(!0),g=L.useContext(NCe),y=u(f&&f.theme),m=L.useMemo(function(){var C=DCe({context:g,styles:e,name:a,theme:y,index:i,sheetOptions:c});return C&&g.isSSR&&K8({index:i,context:g,sheet:C,theme:y}),[C,C?UCe(C,f):null]},[g,y]),b=m[0],v=m[1];Y8(g.isSSR)(function(){b&&v&&!p.current&&LCe(f,b,v)},[f]),Y8(g.isSSR)(function(){return b&&K8({index:i,context:g,sheet:b,theme:y}),function(){b&&(TCe({index:i,context:g,sheet:b,theme:y}),v&&MCe(b,v))}},[b]);var A=L.useMemo(function(){return b&&v?$Ce(b,v):d},[b,v]);return L.useDebugValue(A),L.useDebugValue(y===wP?"No theme":y),L.useEffect(function(){p.current=!1}),A}};const BCe=Rc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function bP({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=BCe(),d=L.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=w.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[w.jsx("img",{src:t,alt:e,className:u.iconImage}),w.jsx("span",{className:u.iconLabel,children:e})]});return o?f:w.jsx($C,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const FCe=Rc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function ia({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=FCe({isOpen:e}),u=L.useRef(null),d=()=>{r&&r(t)};return w.jsx($C,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:w.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[w.jsxs("div",{className:l.header,children:[w.jsx("span",{children:i||t.replace("-popup","")}),w.jsxs("div",{className:l.titleBarButtons,children:[w.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),w.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),w.jsx("div",{className:l.content,children:s})]})})}const vP=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],jCe=80,zCe=80,WCe=10,HCe=10,GCe=10,qCe=10,VCe=({onIconClick:t})=>{const e=vP.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:GCe+d*(jCe+WCe),y:qCe+u*(zCe+HCe)},u++,u>=4&&(u=0,d++)}),l},[r,s]=L.useState(n()),[i,o]=L.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return w.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:w.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>w.jsx(bP,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&w.jsx(ia,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:w.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:vP.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>w.jsx(bP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&w.jsx(ia,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:w.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:vP.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>w.jsx(bP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},KCe=Rc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),YCe=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=L.useState(!1),[o,a]=L.useState(new Date),c=KCe({isOpen:s});L.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return w.jsxs("div",{className:c.taskbar,children:[w.jsxs("div",{className:c.leftSection,children:[w.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),w.jsx("div",{className:c.windows,children:t.map(h=>w.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),w.jsxs("div",{className:c.rightSection,children:[w.jsxs("div",{className:c.statusSection,children:[w.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:w.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),w.jsx("div",{className:c.clock,children:l(o)})]}),s&&w.jsxs("div",{className:c.menu,children:[w.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),w.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),w.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),w.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),w.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),w.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),w.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),w.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function vQ(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function HL(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function EQ(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function GL(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function _Q(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function CQ(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function QCe(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const JCe=Rc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),ZCe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=JCe({isOpen:t}),i=L.useRef(null),[o,a]=L.useState([]),[c,l]=L.useState(!1),[u,d]=L.useState(!1),[h,f]=L.useState({}),[p,g]=L.useState(null),{data:y}=bY();L.useEffect(()=>{t&&r&&m()},[t,r]);const m=async()=>{l(!0),g(null);try{const S=await vQ(r);a(S);const x={};S.forEach(T=>{x[T.id]=0}),f(x)}catch(S){g(S.message)}finally{l(!1)}},b=(S,x)=>{f(T=>({...T,[S]:Math.max(0,x)}))},v=async()=>{const S=Object.entries(h).filter(([,x])=>x>0).map(([x,T])=>({id:x,quantity:T}));if(S.length===0){g("Please select at least one item to mint");return}if(!y){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const x=await EQ(r,S);if(console.log("Mint API result:",x),x.success&&x.mintTransaction){console.log("Got mint transaction:",x.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const T=await y.sendTransaction({to:x.mintTransaction.to,value:BigInt(x.mintTransaction.value),data:x.mintTransaction.data});console.log("Transaction sent successfully:",T),alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){console.error("Transaction sending failed:",T),g("Transaction failed: "+T.message)}}else throw new Error(x.message||"Could not retrieve minting transaction.")}catch(x){console.error("Minting failed:",x),g("Minting failed: "+x.message)}finally{d(!1)}},A=(S,x)=>`${parseFloat(S)} ${x}`,C=()=>{n&&n()};return t?w.jsx($C,{nodeRef:i,handle:`.${s.header}`,children:w.jsxs("div",{ref:i,className:s.popup,children:[w.jsxs("div",{className:s.header,children:[w.jsx("span",{children:"Mint Pixelawbster"}),w.jsxs("div",{className:s.titleBarButtons,children:[w.jsx("button",{className:s.titleBarButton,onClick:C,title:"Minimize",children:"_"}),w.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),w.jsxs("div",{className:s.content,children:[p&&w.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?w.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?w.jsx("div",{children:"No eligible invite lists found for your wallet."}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{style:{marginBottom:"20px"},children:[w.jsx("h3",{children:"Available Lists:"}),o.map(S=>w.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[w.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:S.name}),w.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",A(S.token_price,S.currency_symbol)]}),w.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",S.wallet_limit===4294967295?"Unlimited":S.wallet_limit," per wallet"]}),w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[w.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),w.jsx("input",{type:"number",min:"0",max:S.wallet_limit===4294967295?999:S.wallet_limit,value:h[S.id]||0,onChange:x=>b(S.id,parseInt(x.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},S.id))]}),w.jsx("button",{onClick:()=>void v(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},XCe=Rc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),e1e=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},t1e=({nft:t,onClose:e})=>{const n=XCe(),r=L.useRef(null),s=e1e(t.attributes);return w.jsx($C,{nodeRef:r,handle:`.${n.header}`,children:w.jsxs("div",{className:n.popup,ref:r,children:[w.jsxs("div",{className:n.header,children:[w.jsxs("span",{children:[t.name," - Details"]}),w.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),w.jsxs("div",{className:n.content,children:[w.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),w.jsx("h3",{children:"Traits"}),w.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>w.jsxs("li",{children:[w.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):w.jsx("li",{children:"No traits found."})})]})]})})},n1e=Symbol(),Q8=Object.getPrototypeOf,CD=new WeakMap,r1e=t=>t&&(CD.has(t)?CD.get(t):Q8(t)===Object.prototype||Q8(t)===Array.prototype),s1e=t=>r1e(t)&&t[n1e]||null,J8=(t,e=!0)=>{CD.set(t,e)},MI={},EP=t=>typeof t=="object"&&t!==null,Wd=new WeakMap,hv=new WeakSet,i1e=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>EP(l)&&!hv.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return J8(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:y}=Reflect.getOwnPropertyDescriptor(l,p),m={value:g,enumerable:y,configurable:!0};if(hv.has(g))J8(g,!1);else if(g instanceof Promise)delete m.value,m.get=()=>d(g);else if(Wd.has(g)){const[b,v]=Wd.get(g);m.value=i(b,v(),d)}Object.defineProperty(f,p,m)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!EP(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(I,k=++a[0])=>{d!==k&&(d=k,h.forEach(O=>O(I,k)))};let p=a[1];const g=(I=++a[1])=>(p!==I&&!h.size&&(p=I,m.forEach(([k])=>{const O=k[1](I);O>d&&(d=O)})),d),y=I=>(k,O)=>{const B=[...k];B[1]=[I,...B[1]],f(B,O)},m=new Map,b=(I,k)=>{if((MI?"production":void 0)!=="production"&&m.has(I))throw new Error("prop listener already exists");if(h.size){const O=k[3](y(I));m.set(I,[k,O])}else m.set(I,[k])},v=I=>{var k;const O=m.get(I);O&&(m.delete(I),(k=O[1])==null||k.call(O))},A=I=>(h.add(I),h.size===1&&m.forEach(([O,B],G)=>{if((MI?"production":void 0)!=="production"&&B)throw new Error("remove already exists");const W=O[3](y(G));m.set(G,[O,W])}),()=>{h.delete(I),h.size===0&&m.forEach(([O,B],G)=>{B&&(B(),m.set(G,[O]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(C,{deleteProperty(I,k){const O=Reflect.get(I,k);v(k);const B=Reflect.deleteProperty(I,k);return B&&f(["delete",[k],O]),B},set(I,k,O,B){const G=Reflect.has(I,k),W=Reflect.get(I,k,B);if(G&&(t(W,O)||o.has(O)&&t(W,o.get(O))))return!0;v(k),EP(O)&&(O=s1e(O)||O);let R=O;if(O instanceof Promise)O.then(N=>{O.status="fulfilled",O.value=N,f(["resolve",[k],N])}).catch(N=>{O.status="rejected",O.reason=N,f(["reject",[k],N])});else{!Wd.has(O)&&n(O)&&(R=c(O));const N=!hv.has(R)&&Wd.get(R);N&&b(k,N)}return Reflect.set(I,k,R,B),f(["set",[k],O,W]),!0}});o.set(l,x);const T=[C,g,i,A];return Wd.set(x,T),Reflect.ownKeys(l).forEach(I=>{const k=Object.getOwnPropertyDescriptor(l,I);"value"in k&&(x[I]=l[I],delete k.value,delete k.writable),Object.defineProperty(C,I,k)}),x})=>[c,Wd,hv,t,e,n,r,s,i,o,a],[o1e]=i1e();function er(t={}){return o1e(t)}function Js(t,e,n){const r=Wd.get(t);(MI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function c_(t,e){const n=Wd.get(t);(MI?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function xg(t){return hv.add(t),t}function Xs(t,e,n,r){let s=t[e];return Js(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function a1e(t){const e=er({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var Z8={};const je={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof Z8<"u"?Z8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},AQ={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=je.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var c1e=20,l1e=1,Ng=1e6,X8=1e6,u1e=-7,d1e=21,h1e=!1,BC="[big.js] ",tm=BC+"Invalid ",jN=tm+"decimal places",f1e=tm+"rounding mode",SQ=BC+"Division by zero",In={},xl=void 0,p1e=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function IQ(){function t(e){var n=this;if(!(n instanceof t))return e===xl?IQ():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(tm+"value");e=e===0&&1/e<0?"-0":String(e)}g1e(n,e)}n.constructor=t}return t.prototype=In,t.DP=c1e,t.RM=l1e,t.NE=u1e,t.PE=d1e,t.strict=h1e,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function g1e(t,e){var n,r,s;if(!p1e.test(e))throw Error(tm+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function nm(t,e,n,r){var s=t.c;if(n===xl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(f1e);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==xl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==xl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function rm(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}In.abs=function(){var t=new this.constructor(this);return t.s=1,t};In.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};In.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Ng)throw Error(jN);if(!s[0])throw Error(SQ);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),y=g.length,m=t,b=m.c=[],v=0,A=o+(m.e=e.e-t.e)+1;for(m.s=i,i=A<0?0:A,h.unshift(0);y++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(y=g.length))u=a>y?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=y==a?s:h;y;){if(g[--y]<c[y]){for(d=y;d&&!g[--d];)g[d]=9;--g[d],g[y]+=10}g[y]-=c[y]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[y]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==xl)&&i--);return!b[0]&&v!=1&&(b.shift(),m.e--,A--),v>A&&nm(m,A,n.RM,g[0]!==xl),m};In.eq=function(t){return this.cmp(t)===0};In.gt=function(t){return this.cmp(t)>0};In.gte=function(t){return this.cmp(t)>-1};In.lt=function(t){return this.cmp(t)<0};In.lte=function(t){return this.cmp(t)<1};In.minus=In.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};In.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(SQ);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};In.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};In.plus=In.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};In.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-X8||t>X8)throw Error(tm+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};In.prec=function(t,e){if(t!==~~t||t<1||t>Ng)throw Error(tm+"precision");return nm(new this.constructor(this),t,e)};In.round=function(t,e){if(t===xl)t=0;else if(t!==~~t||t<-Ng||t>Ng)throw Error(jN);return nm(new this.constructor(this),t+this.e+1,e)};In.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(BC+"No square root");i=Math.sqrt(+rm(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return nm(t,(s.DP-=4)+t.e+1,s.RM)};In.times=In.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};In.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==xl){if(t!==~~t||t<0||t>Ng)throw Error(jN);for(n=nm(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return rm(n,!0,!!r)};In.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==xl){if(t!==~~t||t<0||t>Ng)throw Error(jN);for(n=nm(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return rm(n,!1,!!r)};In[Symbol.for("nodejs.util.inspect.custom")]=In.toJSON=In.toString=function(){var t=this,e=t.constructor;return rm(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};In.toNumber=function(){var t=+rm(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(BC+"Imprecise conversion");return t};In.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==xl){if(t!==~~t||t<1||t>Ng)throw Error(tm+"precision");for(n=nm(new r(n),t,e);n.c.length<t;)n.c.push(0)}return rm(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};In.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(BC+"valueOf disallowed");return rm(t,t.e<=e.NE||t.e>=e.PE,!0)};var wl=IQ();const m1e={bigNumber(t){return t?new wl(t):new wl(0)},multiply(t,e){if(t===void 0||e===void 0)return new wl(0);const n=new wl(t),r=new wl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},y1e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],w1e=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],b1e=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],v1e={getERC20Abi:t=>je.USDT_CONTRACT_ADDRESSES.includes(t)?b1e:y1e,getSwapAbi:()=>w1e},Ed={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},It={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function _P(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const _t={setItem(t,e){fv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(fv())return localStorage.getItem(t)||void 0},removeItem(t){fv()&&localStorage.removeItem(t)},clear(){fv()&&localStorage.clear()}};function fv(){return typeof window<"u"&&typeof localStorage<"u"}function Du(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var e4={};const CP=(typeof process<"u"&&typeof e4<"u"?e4.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",xQ=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],E1e="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",On={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:CP,SECURE_SITE_DASHBOARD:`${CP}/dashboard`,SECURE_SITE_FAVICON:`${CP}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Qe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Qe.getActiveNamespace(),e=Qe.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{_t.setItem(It.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=_t.getItem(It.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{_t.removeItem(It.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{_t.setItem(It.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{_t.setItem(It.ACTIVE_CAIP_NETWORK_ID,t),Qe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return _t.getItem(It.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{_t.removeItem(It.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=_P(t);_t.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Qe.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),_t.setItem(It.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=_t.getItem(It.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=_P(t);_t.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return _t.getItem(It.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=_P(t);return _t.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{_t.setItem(It.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return _t.getItem(It.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{_t.removeItem(It.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return _t.getItem(It.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=_t.getItem(It.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{_t.setItem(It.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return _t.getItem(It.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=_t.getItem(It.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));_t.setItem(It.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Qe.getConnectedNamespaces();e.includes(t)||(e.push(t),Qe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Qe.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Qe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return _t.getItem(It.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{_t.setItem(It.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{_t.removeItem(It.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=_t.getItem(It.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Qe.getBalanceCache();_t.setItem(It.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Qe.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Qe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Qe.getBalanceCache();e[t.caipAddress]=t,_t.setItem(It.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=_t.getItem(It.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Qe.getBalanceCache();_t.setItem(It.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Qe.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Qe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Qe.getNativeBalanceCache();e[t.caipAddress]=t,_t.setItem(It.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=_t.getItem(It.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Qe.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Qe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Qe.getEnsCache();e[t.address]=t,_t.setItem(It.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Qe.getEnsCache();_t.setItem(It.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=_t.getItem(It.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Qe.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Qe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Qe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},_t.setItem(It.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Qe.getIdentityCache();_t.setItem(It.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{_t.removeItem(It.PORTFOLIO_CACHE),_t.removeItem(It.NATIVE_BALANCE_CACHE),_t.removeItem(It.ENS_CACHE),_t.removeItem(It.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{_t.setItem(It.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=_t.getItem(It.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Qe.getConnections(),[e]:t};_t.setItem(It.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=_t.getItem(It.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},it={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return it.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=On.TEN_SEC_MS:!0},isAllowedRetry(t,e=On.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(it.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+On.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(it.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!it.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Qe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,it.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return je.W3M_API_URL},getBlockchainApiUrl(){return je.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return je.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?On.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in je.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Bb(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let FC=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Bb(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Bb(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Bb(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Bb(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Bb(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const _1e={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?On.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(it.isTelegram()){if(it.isIos())return t.filter(e=>e!=="google");if(it.isMac())return t.filter(e=>e!=="x");if(it.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ut=er({features:On.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:On.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),_e={state:ut,subscribeKey(t,e){return Xs(ut,t,e)},setOptions(t){Object.assign(ut,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...ut.remoteFeatures,...t};ut.remoteFeatures=e,(n=ut.remoteFeatures)!=null&&n.socials&&(ut.remoteFeatures.socials=_1e.filterSocialsByPlatform(ut.remoteFeatures.socials))},setFeatures(t){if(!t)return;ut.features||(ut.features=On.DEFAULT_FEATURES);const e={...ut.features,...t};ut.features=e},setProjectId(t){ut.projectId=t},setCustomRpcUrls(t){ut.customRpcUrls=t},setAllWallets(t){ut.allWallets=t},setIncludeWalletIds(t){ut.includeWalletIds=t},setExcludeWalletIds(t){ut.excludeWalletIds=t},setFeaturedWalletIds(t){ut.featuredWalletIds=t},setTokens(t){ut.tokens=t},setTermsConditionsUrl(t){ut.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ut.privacyPolicyUrl=t},setCustomWallets(t){ut.customWallets=t},setIsSiweEnabled(t){ut.isSiweEnabled=t},setIsUniversalProvider(t){ut.isUniversalProvider=t},setSdkVersion(t){ut.sdkVersion=t},setMetadata(t){ut.metadata=t},setDisableAppend(t){ut.disableAppend=t},setEIP6963Enabled(t){ut.enableEIP6963=t},setDebug(t){ut.debug=t},setEnableWalletConnect(t){ut.enableWalletConnect=t},setEnableWalletGuide(t){ut.enableWalletGuide=t},setEnableAuthLogger(t){ut.enableAuthLogger=t},setEnableWallets(t){ut.enableWallets=t},setPreferUniversalLinks(t){ut.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){ut.hasMultipleAddresses=t},setSIWX(t){ut.siwx=t},setConnectMethodsOrder(t){ut.features={...ut.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ut.features={...ut.features,walletFeaturesOrder:t}},setSocialsOrder(t){ut.remoteFeatures={...ut.remoteFeatures,socials:t}},setCollapseWallets(t){ut.features={...ut.features,collapseWallets:t}},setEnableEmbedded(t){ut.enableEmbedded=t},setAllowUnsupportedChain(t){ut.allowUnsupportedChain=t},setManualWCControl(t){ut.manualWCControl=t},setEnableNetworkSwitch(t){ut.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ut.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ut.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ut.universalProviderConfigOverride},getSnapshot(){return c_(ut)}},C1e=Object.freeze({enabled:!0,events:[]}),A1e=new FC({baseUrl:it.getAnalyticsUrl(),clientId:null}),S1e=5,I1e=60*1e3,_d=er({...C1e}),x1e={state:_d,subscribeKey(t,e){return Xs(_d,t,e)},async sendError(t,e){if(!_d.enabled)return;const n=Date.now();if(_d.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<I1e}).length>=S1e)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};_d.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=_e.state;await A1e.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:it.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){_d.enabled=!0},disable(){_d.enabled=!1},clearEvents(){_d.events=[]}};let AD=class SD extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,SD.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,SD):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function t4(t,e){const n=t instanceof AD?t:new AD(t instanceof Error?t.message:String(t),e,t);throw x1e.sendError(n,n.category),n}function Ko(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return t4(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return t4(a,e)}},n[r]=i}else n[r]=s}),n}const dl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},N1e={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===dl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${dl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===dl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${dl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===je.CHAIN.SOLANA&&t===dl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${dl.COINBASE.url}/dapp?cb_url=${r}`)}},po=er({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),T1e={state:po,subscribeNetworkImages(t){return Js(po.networkImages,()=>t(po.networkImages))},subscribeKey(t,e){return Xs(po,t,e)},subscribe(t){return Js(po,()=>t(po))},setWalletImage(t,e){po.walletImages[t]=e},setNetworkImage(t,e){po.networkImages[t]=e},setChainImage(t,e){po.chainImages[t]=e},setConnectorImage(t,e){po.connectorImages={...po.connectorImages,[t]:e}},setTokenImage(t,e){po.tokenImages[t]=e},setCurrencyImage(t,e){po.currencyImages[t]=e}},cc=Ko(T1e),R1e={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},AP=er({networkImagePromises:{}}),NQ={async fetchWalletImage(t){if(t)return await ot._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(AP.networkImagePromises[t]||(AP.networkImagePromises[t]=ot._fetchNetworkImage(t)),await AP.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return cc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return cc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return cc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return cc.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return cc.state.connectorImages[t.imageId]},getChainImage(t){return cc.state.networkImages[R1e[t]]}},Cd=er({message:"",variant:"info",open:!1}),P1e={state:Cd,subscribeKey(t,e){return Xs(Cd,t,e)},open(t,e){const{debug:n}=_e.state,{shortMessage:r,longMessage:s}=t;n&&(Cd.message=r,Cd.variant=e,Cd.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Cd.open=!1,Cd.message="",Cd.variant="info"}},bl=Ko(P1e),O1e=it.getAnalyticsUrl(),k1e=new FC({baseUrl:O1e,clientId:null}),D1e=["MODAL_CREATED"],Yl=er({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),or={state:Yl,subscribe(t){return Js(Yl,()=>t(Yl))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=_e.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ye.state.address;if(D1e.includes(t.data.event)||typeof window>"u")return;await k1e.post({path:"/e",params:or.getSdkProperties(),body:{eventId:it.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Yl.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===je.HTTP_STATUS_CODES.FORBIDDEN&&!Yl.reportedErrors.FORBIDDEN&&(bl.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${fv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Yl.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Yl.timestamp=Date.now(),Yl.data=t,(e=_e.state.features)!=null&&e.analytics&&or._sendAnalyticsEvent(Yl)}},M1e=it.getApiUrl(),Ii=new FC({baseUrl:M1e,clientId:null}),L1e=40,n4=4,U1e=20,xt=er({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ot={state:xt,subscribeKey(t,e){return Xs(xt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=_e.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return _e.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ii.baseUrl}/getWalletImage/${t}`,n=await Ii.getBlob({path:e,params:ot._getSdkProperties()});cc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ii.baseUrl}/public/getAssetImage/${t}`,n=await Ii.getBlob({path:e,params:ot._getSdkProperties()});cc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ii.baseUrl}/public/getAssetImage/${t}`,n=await Ii.getBlob({path:e,params:ot._getSdkProperties()});cc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ii.baseUrl}/public/getCurrencyImage/${t}`,n=await Ii.getBlob({path:e,params:ot._getSdkProperties()});cc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ii.baseUrl}/public/getTokenImage/${t}`,n=await Ii.getBlob({path:e,params:ot._getSdkProperties()});cc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return it.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===dl.COINBASE.id?!0:z.state.activeChain==="solana"&&(n.id===dl.SOLFLARE.id||n.id===dl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ii.get({path:"/appkit/v1/config",params:ot._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ii.get({path:"/projects/v1/origins",params:ot._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=z.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!NQ.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>ot._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Fe.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>ot._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ot._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ot._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];ot._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(dl).map(o=>o.id));const r=await Ii.get({path:"/getWallets",params:{...ot._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:ot._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=_e.state;if(t!=null&&t.length){const e={...ot._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??n4,include:t},{data:n}=await ot.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ot._fetchWalletImage(i))),xt.featured=r,xt.allFeatured=r}},async fetchRecommendedWallets(){try{xt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=_e.state,r=[...e??[],...n??[]].filter(Boolean),s=z.getRequestedCaipNetworkIds().join(","),i={page:1,entries:n4,include:t,exclude:r,chains:s},{data:o,count:a}=await ot.fetchWallets(i),c=Qe.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>ot._fetchWalletImage(d))),xt.recommended=o,xt.allRecommended=o,xt.count=a??0}catch{}finally{xt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=_e.state,s=z.getRequestedCaipNetworkIds().join(","),i=[...xt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:L1e,include:e,exclude:i,chains:s},{data:a,count:c}=await ot.fetchWallets(o),l=a.slice(0,U1e).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ot._fetchWalletImage(u))),xt.wallets=it.uniqueBy([...xt.wallets,...ot._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),xt.count=c>xt.count?c:xt.count,xt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await ot.fetchWallets(e);n&&n.forEach(r=>{xt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=_e.state,s=z.getRequestedCaipNetworkIds().join(",");xt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await ot.fetchWallets(i);or.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ot._fetchWalletImage(c)),it.wait(300)]),xt.search=ot._filterOutExtensions(o)},initPromise(t,e){const n=xt.promises[t];return n||(xt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&ot.initPromise("connectorImages",ot.fetchConnectorImages),e&&ot.initPromise("featuredWallets",ot.fetchFeaturedWallets),n&&ot.initPromise("recommendedWallets",ot.fetchRecommendedWallets),r&&ot.initPromise("networkImages",ot.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=_e.state.features)!=null&&t.analytics&&ot.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ii.get({path:"/getAnalyticsConfig",params:ot._getSdkProperties()});_e.setFeatures({analytics:t})}catch{_e.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){xt.featured=xt.allFeatured,xt.recommended=xt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");xt.featured=xt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),xt.recommended=xt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),xt.filteredWallets=xt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){xt.filteredWallets=[]},setFilterByNamespace(t){if(!t){xt.featured=xt.allFeatured,xt.recommended=xt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");xt.featured=xt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),xt.recommended=xt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),xt.filteredWallets=xt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Nn=er({view:"Connect",history:["Connect"],transactionStack:[]}),$1e={state:Nn,subscribeKey(t,e){return Xs(Nn,t,e)},pushTransactionStack(t){Nn.transactionStack.push(t)},popTransactionStack(t){const e=Nn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Dt.goBack();break;case"cancel":s==null||s(),Dt.goBack();break}},push(t,e){t!==Nn.view&&(Nn.view=t,Nn.history.push(t),Nn.data=e)},reset(t,e){Nn.view=t,Nn.history=[t],Nn.data=e},replace(t,e){Nn.history.at(-1)===t||(Nn.view=t,Nn.history[Nn.history.length-1]=t,Nn.data=e)},goBack(){var r;const t=z.state.activeCaipAddress,e=Dt.state.view==="ConnectingFarcaster",n=!t&&e;if(Nn.history.length>1){Nn.history.pop();const[s]=Nn.history.slice(-1);s&&(t&&s==="Connect"?Nn.view="Account":Nn.view=s)}else ls.close();(r=Nn.data)!=null&&r.wallet&&(Nn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ye.setFarcasterUrl(void 0,z.state.activeChain);const a=Fe.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=c_(_e.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Nn.history.length>1){Nn.history=Nn.history.slice(0,t+1);const[e]=Nn.history.slice(-1);e&&(Nn.view=e)}},goBackOrCloseModal(){Dt.state.history.length>1?Dt.goBack():ls.close()}},Dt=Ko($1e),Ql=er({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),ID={state:Ql,subscribe(t){return Js(Ql,()=>t(Ql))},setThemeMode(t){Ql.themeMode=t;try{const e=Fe.getAuthConnector();if(e){const n=ID.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Du(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Ql.themeVariables={...Ql.themeVariables,...t};try{const e=Fe.getAuthConnector();if(e){const n=ID.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Du(Ql.themeVariables,Ql.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return c_(Ql)}},zi=Ko(ID),TQ={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},sn=er({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...TQ},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),B1e={state:sn,subscribe(t){return Js(sn,()=>{t(sn)})},subscribeKey(t,e){return Xs(sn,t,e)},initialize(t){t.forEach(e=>{const n=Qe.getConnectedConnectorId(e);n&&Fe.setConnectorId(n,e)})},setActiveConnector(t){t&&(sn.activeConnector=xg(t))},setConnectors(t){t.filter(s=>!sn.allConnectors.some(i=>i.id===s.id&&Fe.getConnectorName(i.name)===Fe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&sn.allConnectors.push(xg(s))});const n=Fe.getEnabledNamespaces(),r=Fe.getEnabledConnectors(n);sn.connectors=Fe.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(sn.filterByNamespaceMap).forEach(e=>{sn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{sn.filterByNamespaceMap[e]=!0}),Fe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){sn.filterByNamespaceMap[t]=e,Fe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Fe.getEnabledNamespaces(),e=Fe.getEnabledConnectors(t),n=Fe.areAllNamespacesEnabled();sn.connectors=Fe.mergeMultiChainConnectors(e),n?ot.clearFilterByNamespaces():ot.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(sn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return sn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(sn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Fe.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===je.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Fe.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===je.CONNECTOR_ID.AUTH){const s=t,i=c_(_e.state),o=zi.getSnapshot().themeMode,a=zi.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Du(a,o)}),Fe.setConnectors([t])}else Fe.setConnectors([t])},getAuthConnector(t){var r;const e=t||z.state.activeChain,n=sn.connectors.find(s=>s.id===je.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return sn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return sn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return sn.allConnectors.filter(r=>r.chain===z.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=c_(_e.state),r=zi.getSnapshot().themeMode,s=zi.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Du(s,r)})},getConnectorsByNamespace(t){const e=sn.allConnectors.filter(n=>n.chain===t);return Fe.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Fe.getConnector(t.id,t.rdns),n=z.state.activeChain;N1e.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Dt.push("ConnectingExternal",{connector:e}):Dt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Fe.getConnectorsByNamespace(t):Fe.mergeMultiChainConnectors(sn.allConnectors)},setFilterByNamespace(t){sn.filterByNamespace=t,sn.connectors=Fe.getConnectors(t),ot.setFilterByNamespace(t)},setConnectorId(t,e){t&&(sn.activeConnectorIds={...sn.activeConnectorIds,[e]:t},Qe.setConnectedConnectorId(e,t))},removeConnectorId(t){sn.activeConnectorIds={...sn.activeConnectorIds,[t]:void 0},Qe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return sn.activeConnectorIds[t]},isConnected(t){return t?!!sn.activeConnectorIds[t]:Object.values(sn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){sn.activeConnectorIds={...TQ}}},Fe=Ko(B1e);var p0={};const F1e="https://secure.walletconnect.org/sdk",j1e=(typeof process<"u"&&typeof p0<"u"?p0.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||F1e,z1e=(typeof process<"u"&&typeof p0<"u"?p0.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",W1e=(typeof process<"u"&&typeof p0<"u"?p0.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ve={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ts={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Hf=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Ur=er({...Hf}),H1e={state:Ur,subscribeKey(t,e){return Xs(Ur,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=it.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Ur.message=Hf.message,Ur.variant=Hf.variant,Ur.svg=Hf.svg,Ur.open=Hf.open,Ur.autoClose=Hf.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Hf.autoClose}){Ur.open?(Ur.open=!1,setTimeout(()=>{Ur.message=t,Ur.variant=n,Ur.svg=e,Ur.open=!0,Ur.autoClose=r},150)):(Ur.message=t,Ur.variant=n,Ur.svg=e,Ur.open=!0,Ur.autoClose=r)}},fc=H1e,Fn=er({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),G1e={state:Fn,subscribe(t){return Js(Fn,()=>t(Fn))},setLastNetworkInView(t){Fn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Fn.loading=!0;try{const s=await ft.fetchTransactions({account:t,cursor:Fn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=pv.filterSpamTransactions(s.data),o=pv.filterByConnectedChain(i),a=[...Fn.transactions,...o];Fn.loading=!1,e==="coinbase"?Fn.coinbaseTransactions=pv.groupTransactionsByYearAndMonth(Fn.coinbaseTransactions,s.data):(Fn.transactions=a,Fn.transactionsByYear=pv.groupTransactionsByYearAndMonth(Fn.transactionsByYear,o)),Fn.empty=a.length===0,Fn.next=s.next?s.next:void 0}catch{const i=z.state.activeChain;or.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:_e.state.projectId,cursor:Fn.next,isSmartAccount:((r=Ye.state.preferredAccountTypes)==null?void 0:r[i])===Ts.ACCOUNT_TYPES.SMART_ACCOUNT}}),fc.showError("Failed to fetch transactions"),Fn.loading=!1,Fn.empty=!0,Fn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Fn.next=void 0},resetTransactions(){Fn.transactions=[],Fn.transactionsByYear={},Fn.lastNetworkInView=void 0,Fn.loading=!1,Fn.empty=!1,Fn.next=void 0}},pv=Ko(G1e,"API_ERROR"),Ln=er({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Pf;const q1e={state:Ln,subscribeKey(t,e){return Xs(Ln,t,e)},_getClient(){return Ln._client},setClient(t){Ln._client=xg(t)},async connectWalletConnect(){var t,e,n,r;if(it.isTelegram()||it.isSafari()&&it.isIos()){if(Pf){await Pf,Pf=void 0;return}if(!it.isPairingExpired(Ln==null?void 0:Ln.wcPairingExpiry)){const s=Ln.wcUri;Ln.wcUri=s;return}Pf=(e=(t=pt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),pt.state.status="connecting",await Pf,Pf=void 0,Ln.wcPairingExpiry=void 0,pt.state.status="connected"}else await((r=(n=pt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=pt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&z.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=pt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||z.state.activeChain;e&&Fe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;ls.setLoading(!0,z.state.activeChain);const n=Fe.getAuthConnector();n&&(Ye.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Qe.setPreferredAccountTypes(Ye.state.preferredAccountTypes??{[e]:t}),await pt.reconnectExternal(n),ls.setLoading(!1,z.state.activeChain),or.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=pt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=pt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=pt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=pt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=pt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=pt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=pt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=pt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=pt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=pt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=pt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=pt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Ln.wcUri=void 0,Ln.wcPairingExpiry=void 0,Ln.wcLinking=void 0,Ln.recentWallet=void 0,Ln.status="disconnected",pv.resetTransactions(),Qe.deleteWalletConnectDeepLink()},resetUri(){Ln.wcUri=void 0,Ln.wcPairingExpiry=void 0,Pf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=pt.state;t&&Qe.setWalletConnectDeepLink(t),e&&Qe.setAppKitRecent(e),or.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Dt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Ln.wcBasic=t},setUri(t){Ln.wcUri=t,Ln.wcPairingExpiry=it.getPairingExpiry()},setWcLinking(t){Ln.wcLinking=t},setWcError(t){Ln.wcError=t,Ln.buffering=!1},setRecentWallet(t){Ln.recentWallet=t},setBuffering(t){Ln.buffering=t},setStatus(t){Ln.status=t},async disconnect(t){var e;try{await((e=pt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new AD("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Ln.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(Fe.state.activeConnectorIds[n]===t.connectorId){const i=z.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Ye.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=Fe.getConnector(t.connectorId);i?pt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},pt=Ko(q1e),Sm=er({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Nl={state:Sm,subscribe(t){return Js(Sm,()=>t(Sm))},subscribeOpen(t){return Xs(Sm,"open",t)},set(t){Object.assign(Sm,{...Sm,...t})}},SP={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Qg(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},r4={async getMyTokensWithBalance(t){const e=Ye.state.address,n=z.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await ft.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=SP.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await pt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await pt.walletGetAssets({account:t,chainFilter:[s]});return SP.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>SP.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:z.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Cn=er({tokenBalances:[],loading:!1}),V1e={state:Cn,subscribe(t){return Js(Cn,()=>t(Cn))},subscribeKey(t,e){return Xs(Cn,t,e)},setToken(t){t&&(Cn.token=xg(t))},setTokenAmount(t){Cn.sendTokenAmount=t},setReceiverAddress(t){Cn.receiverAddress=t},setReceiverProfileImageUrl(t){Cn.receiverProfileImageUrl=t},setReceiverProfileName(t){Cn.receiverProfileName=t},setNetworkBalanceInUsd(t){Cn.networkBalanceInUSD=t},setLoading(t){Cn.loading=t},async sendToken(){var t;try{switch(pn.setLoading(!0),(t=z.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await pn.sendEvmToken();return;case"solana":await pn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{pn.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=z.state.activeChain,e=(n=Ye.state.preferredAccountTypes)==null?void 0:n[t];if(!pn.state.sendTokenAmount||!pn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!pn.state.token)throw new Error("A token is required");(r=pn.state.token)!=null&&r.address?(or.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ts.ACCOUNT_TYPES.SMART_ACCOUNT,token:pn.state.token.address,amount:pn.state.sendTokenAmount,network:((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await pn.sendERC20Token({receiverAddress:pn.state.receiverAddress,tokenAddress:pn.state.token.address,sendTokenAmount:pn.state.sendTokenAmount,decimals:pn.state.token.quantity.decimals})):(or.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ts.ACCOUNT_TYPES.SMART_ACCOUNT,token:pn.state.token.symbol||"",amount:pn.state.sendTokenAmount,network:((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await pn.sendNativeToken({receiverAddress:pn.state.receiverAddress,sendTokenAmount:pn.state.sendTokenAmount,decimals:pn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Cn.loading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?it.getPlainAddress(r):void 0;if(Cn.lastRetry&&!it.isAllowedRetry(Cn.lastRetry,30*On.ONE_SEC_MS))return Cn.loading=!1,[];try{if(s&&e&&n){const a=await r4.getMyTokensWithBalance();return Cn.tokenBalances=a,Cn.lastRetry=void 0,a}}catch(a){Cn.lastRetry=Date.now(),t==null||t(a),fc.showError("Token Balance Unavailable")}finally{Cn.loading=!1}return[]},fetchNetworkBalance(){if(Cn.tokenBalances.length===0)return;const t=r4.mapBalancesToSwapTokens(Cn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===z.getActiveNetworkTokenAddress());e&&(Cn.networkBalanceInUSD=e?m1e.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Dt.pushTransactionStack({});const e=t.receiverAddress,n=Ye.state.address,r=pt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await pt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),or.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ye.state.preferredAccountTypes)==null?void 0:i.eip155)===Ts.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=pn.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=pt._getClient())==null||c.updateBalance("eip155"),pn.resetSend()},async sendERC20Token(t){Dt.pushTransactionStack({onSuccess(){Dt.replace("Account")}});const e=pt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ye.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=it.getPlainAddress(t.tokenAddress);await pt.writeContract({fromAddress:Ye.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:v1e.getERC20Abi(n),chainNamespace:"eip155"}),pn.resetSend()}},async sendSolanaToken(){var t;if(!pn.state.sendTokenAmount||!pn.state.receiverAddress)throw new Error("An amount and receiver address are required");Dt.pushTransactionStack({onSuccess(){Dt.replace("Account")}}),await pt.sendTransaction({chainNamespace:"solana",to:pn.state.receiverAddress,value:pn.state.sendTokenAmount}),(t=pt._getClient())==null||t.updateBalance("solana"),pn.resetSend()},resetSend(){Cn.token=void 0,Cn.sendTokenAmount=void 0,Cn.receiverAddress=void 0,Cn.receiverProfileImageUrl=void 0,Cn.receiverProfileName=void 0,Cn.loading=!1,Cn.tokenBalances=[]}},pn=Ko(V1e),IP={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},sA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Me=er({chains:a1e(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),K1e={state:Me,subscribe(t){return Js(Me,()=>{t(Me)})},subscribeKey(t,e){return Xs(Me,t,e)},subscribeChainProp(t,e,n){let r;return Js(Me.chains,()=>{var i;const s=n||Me.activeChain;if(s){const o=(i=Me.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Qe.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=_e.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Me.noAdapters=!0),Me.noAdapters||(Me.activeChain=a==null?void 0:a.namespace,Me.activeCaipNetwork=i,z.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Me.activeChain&&Nl.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);z.state.chains.set(u,{namespace:u,networkState:er({...sA,caipNetwork:d==null?void 0:d[0]}),accountState:er(IP),caipNetworks:d??[],...n}),z.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Me.activeChain===t){const r=Array.from(Me.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&z.setActiveCaipNetwork(s)}}Me.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Me.chains.set(t.namespace,{namespace:t.namespace,networkState:{...sA,caipNetwork:r[0]},accountState:IP,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),z.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Me.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Me.chains.set(t.chainNamespace,{...e,caipNetworks:r}),z.setRequestedCaipNetworks(r,t.chainNamespace),Fe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Me.chains.get(t);if(n){const o=((r=Me.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&z.setActiveCaipNetwork(n.caipNetworks[0]),Me.chains.set(t,{...n,caipNetworks:a}),z.setRequestedCaipNetworks(a||[],t),a.length===0&&Fe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Me.chains.get(t);n&&(n.networkState={...n.networkState||sA,...e},Me.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Me.chains.get(t);if(r){const s={...r.accountState||IP,...e};Me.chains.set(t,{...r,accountState:s}),(Me.chains.size===1||Me.activeChain===t)&&(e.caipAddress&&(Me.activeCaipAddress=e.caipAddress),Ye.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Me.chains.get(t);if(n){const r={...n.networkState||sA,...e};Me.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){z.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Fe.removeConnectorId(n)},setActiveNamespace(t){var r,s;Me.activeChain=t;const e=t?Me.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Me.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Me.activeCaipNetwork=n,z.setChainNetworkData(t,{caipNetwork:n}),Qe.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Nl.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Me.activeChain!==t.chainNamespace&&z.setIsSwitchingNamespace(!0);const e=Me.chains.get(t.chainNamespace);Me.activeChain=t.chainNamespace,Me.activeCaipNetwork=t,z.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Me.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Me.activeCaipAddress=void 0,z.setAccountProp("caipAddress",Me.activeCaipAddress,t.chainNamespace),e&&Ye.replaceState(e.accountState),pn.resetSend(),Nl.set({activeChain:Me.activeChain,selectedNetworkId:(i=Me.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Qe.setActiveCaipNetworkId(t.caipNetworkId),!z.checkIfSupportedNetwork(t.chainNamespace)&&_e.state.enableNetworkSwitch&&!_e.state.allowUnsupportedChain&&!pt.state.wcBasic&&z.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Me.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==z.state.activeChain,n=(s=z.getNetworkData(t))==null?void 0:s.caipNetwork,r=z.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await z.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=z.state.chains.get(z.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Me.activeCaipNetwork)==null?void 0:o.id)})),r=z.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&ls.close()}catch{Dt.goBack()}or.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Me.activeChain,n=Me.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Me.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Me.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Me.activeChain;if(e&&(n=e),!n)return;const r=(s=Me.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Me.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Me.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return it.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Me.chains.forEach(e=>{const n=z.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){z.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=z.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Fe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Me.chains.forEach(e=>{const n=z.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Me.activeCaipNetwork},getActiveCaipAddress(){return Me.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Me.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=z.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());z.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Me.activeCaipNetwork,r=z.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Me.activeChain)return!0;const e=z.getRequestedCaipNetworks(Me.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){z.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=AQ.caipNetworkIdToNumber((r=Me.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Me.activeChain;if(!e||!t)return!1;const n=z.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=Me.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Me.activeCaipNetwork)==null?void 0:s.id)||1,n=On.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){ls.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Me.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&On.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){z.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Me.activeCaipAddress=void 0,z.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Fe.removeConnectorId(e)},setIsSwitchingNamespace(t){Me.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Me.chains.forEach(s=>{je.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Me.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=z.state.chains.get(t))==null?void 0:e.accountState:Ye.state},getNetworkData(t){var n;const e=t||Me.activeChain;if(e)return(n=z.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=z.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Fe.state.filterByNamespace;return(t?[Me.chains.get(t)]:Array.from(Me.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?z.getRequestedCaipNetworks(t):z.getAllRequestedCaipNetworks()}},z=Ko(K1e),Y1e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},RQ=it.getBlockchainApiUrl(),xi=er({clientId:null,api:new FC({baseUrl:RQ,clientId:null}),supportedChains:{http:[],ws:[]}}),ft={state:xi,async get(t){const{st:e,sv:n}=ft.getSdkProperties(),r=_e.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return xi.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=_e.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{xi.supportedChains.http.length||await ft.getSupportedNetworks()}catch{return!1}return xi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await ft.get({path:"v1/supported-chains"});return xi.supportedChains=t,t}catch{return xi.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await ft.isNetworkSupported(e))return{avatar:"",name:""};const r=Qe.getIdentityFromCacheForAddress(t);if(r)return r;const s=await ft.get({path:`/v1/identity/${t}`,params:{sender:z.state.activeCaipAddress?it.getPlainAddress(z.state.activeCaipAddress):void 0}});return Qe.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await ft.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?ft.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await ft.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?ft.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await ft.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ft.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await ft.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:_e.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await ft.isNetworkSupported((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?ft.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=ft.getSdkProperties();if(!await ft.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return ft.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await ft.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return xi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:On.CONVERT_SLIPPAGE_TOLERANCE},projectId:_e.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=ft.getSdkProperties();if(!await ft.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return ft.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=ft.getSdkProperties();if(!await ft.isNetworkSupported((l=z.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return fc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Qe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await ft.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Qe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await ft.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ft.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await ft.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ft.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ye.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await ft.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ft.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await ft.isNetworkSupported((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?xi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await ft.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await xi.api.post({path:"/v1/generators/onrampurl",params:{projectId:_e.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await ft.isNetworkSupported((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await ft.get({path:"/v1/onramp/options"})}catch{return Y1e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await ft.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await xi.api.post({path:"/v1/onramp/quote",params:{projectId:_e.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await ft.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ft.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await ft.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?xi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:_e.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){xi.clientId=t,xi.api=new FC({baseUrl:RQ,clientId:t})}},Jo=er({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),Q1e={state:Jo,replaceState(t){t&&Object.assign(Jo,xg(t))},subscribe(t){return z.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return z.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){z.setAccountProp("status",t,e)},getCaipAddress(t){return z.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?it.getPlainAddress(t):void 0;e===z.state.activeChain&&(z.state.activeCaipAddress=t),z.setAccountProp("caipAddress",t,e),z.setAccountProp("address",n,e)},setBalance(t,e,n){z.setAccountProp("balance",t,n),z.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){z.setAccountProp("profileName",t,e)},setProfileImage(t,e){z.setAccountProp("profileImage",t,e)},setUser(t,e){z.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){z.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){z.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){z.setAccountProp("currentTab",t,z.state.activeChain)},setTokenBalance(t,e){t&&z.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){z.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){z.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=z.getAccountProp("addressLabels",n)||new Map;r.set(t,e),z.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=z.getAccountProp("addressLabels",e)||new Map;n.delete(t),z.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){z.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){z.setAccountProp("preferredAccountTypes",{...Jo.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Jo.preferredAccountTypes=t},setSocialProvider(t,e){t&&z.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){z.setAccountProp("socialWindow",t?xg(t):void 0,e)},setFarcasterUrl(t,e){z.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Jo.balanceLoading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?it.getPlainAddress(r):void 0;if(Jo.lastRetry&&!it.isAllowedRetry(Jo.lastRetry,30*On.ONE_SEC_MS))return Jo.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await ft.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Ye.setTokenBalance(c,n),Jo.lastRetry=void 0,Jo.balanceLoading=!1,c}}catch(a){Jo.lastRetry=Date.now(),t==null||t(a),fc.showError("Token Balance Unavailable")}finally{Jo.balanceLoading=!1}return[]},resetAccount(t){z.resetAccount(t)}},Ye=Ko(Q1e),J1e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=z.state.activeCaipNetwork,r=Dt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ye.getCaipAddress(z.state.activeChain),o=t.chainNamespace!==z.state.activeChain,a=Ye.getCaipAddress(t.chainNamespace),l=Fe.getConnectorId(z.state.activeChain)===je.CONNECTOR_ID.AUTH,u=je.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Dt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Dt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Dt.push("SwitchNetwork",{...r,network:t})}},Ni=er({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Z1e={state:Ni,subscribe(t){return Js(Ni,()=>t(Ni))},subscribeKey(t,e){return Xs(Ni,t,e)},async open(t){var o,a;const e=Ye.state.status==="connected",n=t==null?void 0:t.namespace,r=z.state.activeChain,s=n&&n!==r,i=(o=z.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(pt.state.wcBasic?ot.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ot.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Fe.setFilterByNamespace(t==null?void 0:t.namespace),ls.setLoading(!0,n),n&&s){const c=((a=z.getNetworkData(n))==null?void 0:a.caipNetwork)||z.getRequestedCaipNetworks(n)[0];c&&J1e.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=z.state.noAdapters;_e.state.manualWCControl||c&&!i?it.isMobile()?Dt.reset("AllWallets"):Dt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Dt.reset(t.view,t.data):i?Dt.reset("Account"):Dt.reset("Connect")}Ni.open=!0,Nl.set({open:!0}),or.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=_e.state.enableEmbedded,e=!!z.state.activeCaipAddress;Ni.open&&or.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ni.open=!1,Dt.reset("Connect"),ls.clearLoading(),t?e?Dt.replace("Account"):Dt.push("Connect"):Nl.set({open:!1}),pt.resetUri()},setLoading(t,e){e&&Ni.loadingNamespaceMap.set(e,t),Ni.loading=t,Nl.set({loading:t})},clearLoading(){Ni.loadingNamespaceMap.clear(),Ni.loading=!1},shake(){Ni.shake||(Ni.shake=!0,setTimeout(()=>{Ni.shake=!1},500))}},ls=Ko(Z1e),Yv={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},xD={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},X1e={providers:xQ,selectedProvider:null,error:null,purchaseCurrency:Yv,paymentCurrency:xD,purchaseCurrencies:[Yv],paymentCurrencies:[],quotesLoading:!1},en=er(X1e),eAe={state:en,subscribe(t){return Js(en,()=>t(en))},subscribeKey(t,e){return Xs(en,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=z.state.activeChain===je.CHAIN.SOLANA?"SOL":"USDC",n=Ye.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",E1e),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",_e.state.projectId),en.selectedProvider={...t,url:r.toString()}}else en.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=xQ.filter(r=>e.includes(r.name));en.providers=n}else en.providers=[]},setPurchaseCurrency(t){en.purchaseCurrency=t},setPaymentCurrency(t){en.paymentCurrency=t},setPurchaseAmount(t){ND.state.purchaseAmount=t},setPaymentAmount(t){ND.state.paymentAmount=t},async getAvailableCurrencies(){const t=await ft.getOnrampOptions();en.purchaseCurrencies=t.purchaseCurrencies,en.paymentCurrencies=t.paymentCurrencies,en.paymentCurrency=t.paymentCurrencies[0]||xD,en.purchaseCurrency=t.purchaseCurrencies[0]||Yv,await ot.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await ot.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;en.quotesLoading=!0;try{const n=await ft.getOnrampQuote({purchaseCurrency:en.purchaseCurrency,paymentCurrency:en.paymentCurrency,amount:((t=en.paymentAmount)==null?void 0:t.toString())||"0",network:(e=en.purchaseCurrency)==null?void 0:e.symbol});return en.quotesLoading=!1,en.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return en.error=n.message,en.quotesLoading=!1,null}finally{en.quotesLoading=!1}},resetState(){en.selectedProvider=null,en.error=null,en.purchaseCurrency=Yv,en.paymentCurrency=xD,en.purchaseCurrencies=[Yv],en.paymentCurrencies=[],en.paymentAmount=void 0,en.purchaseAmount=void 0,en.quotesLoading=!1}},ND=Ko(eAe),s4=2147483648,tAe={convertEVMChainIdToCoinType(t){if(t>=s4)throw new Error("Invalid chainId");return(s4|t)>>>0}},Zo=er({suggestions:[],loading:!1}),nAe={state:Zo,subscribe(t){return Js(Zo,()=>t(Zo))},subscribeKey(t,e){return Xs(Zo,t,e)},async resolveName(t){var e,n;try{return await ft.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await ft.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Zo.loading=!0,Zo.suggestions=[];const e=await ft.getEnsNameSuggestions(t);return Zo.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Zo.suggestions}catch(e){const n=Qv.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Zo.loading=!1}},async getNamesForAddress(t){try{if(!z.state.activeCaipNetwork)return[];const n=Qe.getEnsFromCacheForAddress(t);if(n)return n;const r=await ft.reverseLookupEnsName({address:t});return Qe.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=Qv.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=z.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ye.state.address,r=Fe.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Zo.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Dt.pushTransactionStack({onCancel(){Dt.replace("RegisterAccountName")}});const i=await pt.signMessage(s);Zo.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=tAe.convertEVMChainIdToCoinType(Number(o));await ft.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ye.setProfileName(t,e.chainNamespace),Dt.replace("RegisterAccountNameSuccess")}catch(s){const i=Qv.parseEnsApiError(s,`Error registering name ${t}`);throw Dt.replace("RegisterAccountName"),new Error(i)}finally{Zo.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},Qv=Ko(nAe);var qL={exports:{}},By=typeof Reflect=="object"?Reflect:null,i4=By&&typeof By.apply=="function"?By.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},oS;By&&typeof By.ownKeys=="function"?oS=By.ownKeys:Object.getOwnPropertySymbols?oS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:oS=function(e){return Object.getOwnPropertyNames(e)};function rAe(t){console&&console.warn&&console.warn(t)}var PQ=Number.isNaN||function(e){return e!==e};function Dn(){Dn.init.call(this)}qL.exports=Dn;qL.exports.once=aAe;Dn.EventEmitter=Dn;Dn.prototype._events=void 0;Dn.prototype._eventsCount=0;Dn.prototype._maxListeners=void 0;var o4=10;function zN(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Dn,"defaultMaxListeners",{enumerable:!0,get:function(){return o4},set:function(t){if(typeof t!="number"||t<0||PQ(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o4=t}});Dn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Dn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||PQ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function OQ(t){return t._maxListeners===void 0?Dn.defaultMaxListeners:t._maxListeners}Dn.prototype.getMaxListeners=function(){return OQ(this)};Dn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")i4(c,this,n);else for(var l=c.length,u=UQ(c,l),r=0;r<l;++r)i4(u[r],this,n);return!0};function kQ(t,e,n,r){var s,i,o;if(zN(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=OQ(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,rAe(a)}return t}Dn.prototype.addListener=function(e,n){return kQ(this,e,n,!1)};Dn.prototype.on=Dn.prototype.addListener;Dn.prototype.prependListener=function(e,n){return kQ(this,e,n,!0)};function sAe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function DQ(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=sAe.bind(r);return s.listener=n,r.wrapFn=s,s}Dn.prototype.once=function(e,n){return zN(n),this.on(e,DQ(this,e,n)),this};Dn.prototype.prependOnceListener=function(e,n){return zN(n),this.prependListener(e,DQ(this,e,n)),this};Dn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(zN(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():iAe(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Dn.prototype.off=Dn.prototype.removeListener;Dn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function MQ(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?oAe(s):UQ(s,s.length)}Dn.prototype.listeners=function(e){return MQ(this,e,!0)};Dn.prototype.rawListeners=function(e){return MQ(this,e,!1)};Dn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):LQ.call(t,e)};Dn.prototype.listenerCount=LQ;function LQ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Dn.prototype.eventNames=function(){return this._eventsCount>0?oS(this._events):[]};function UQ(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function iAe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function oAe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function aAe(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}$Q(t,e,i,{once:!0}),e!=="error"&&cAe(t,s,{once:!0})})}function cAe(t,e,n){typeof t.on=="function"&&$Q(t,"error",e,n)}function $Q(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Da=qL.exports;const VL=Gg(Da);var Te={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var TD=function(t,e){return TD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},TD(t,e)};function lAe(t,e){TD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var RD=function(){return RD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},RD.apply(this,arguments)};function uAe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function dAe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function hAe(t,e){return function(n,r){e(n,r,t)}}function fAe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function pAe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function gAe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function mAe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function yAe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function PD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function BQ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function wAe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(BQ(arguments[e]));return t}function bAe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function l_(t){return this instanceof l_?(this.v=t,this):new l_(t)}function vAe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof l_?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function EAe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:l_(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function _Ae(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof PD=="function"?PD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function CAe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function AAe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function SAe(t){return t&&t.__esModule?t:{default:t}}function IAe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function xAe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const NAe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return RD},__asyncDelegator:EAe,__asyncGenerator:vAe,__asyncValues:_Ae,__await:l_,__awaiter:pAe,__classPrivateFieldGet:IAe,__classPrivateFieldSet:xAe,__createBinding:mAe,__decorate:dAe,__exportStar:yAe,__extends:lAe,__generator:gAe,__importDefault:SAe,__importStar:AAe,__makeTemplateObject:CAe,__metadata:fAe,__param:hAe,__read:BQ,__rest:uAe,__spread:wAe,__spreadArrays:bAe,__values:PD},Symbol.toStringTag,{value:"Module"})),WN=wz(NAe);var xP={},Fb={},a4;function TAe(){if(a4)return Fb;a4=1,Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Fb.delay=t,Fb}var Of={},NP={},kf={},c4;function RAe(){return c4||(c4=1,Object.defineProperty(kf,"__esModule",{value:!0}),kf.ONE_THOUSAND=kf.ONE_HUNDRED=void 0,kf.ONE_HUNDRED=100,kf.ONE_THOUSAND=1e3),kf}var TP={},l4;function PAe(){return l4||(l4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(TP)),TP}var u4;function FQ(){return u4||(u4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=WN;e.__exportStar(RAe(),t),e.__exportStar(PAe(),t)}(NP)),NP}var d4;function OAe(){if(d4)return Of;d4=1,Object.defineProperty(Of,"__esModule",{value:!0}),Of.fromMiliseconds=Of.toMiliseconds=void 0;const t=FQ();function e(r){return r*t.ONE_THOUSAND}Of.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Of.fromMiliseconds=n,Of}var h4;function kAe(){return h4||(h4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=WN;e.__exportStar(TAe(),t),e.__exportStar(OAe(),t)}(xP)),xP}var Im={},f4;function DAe(){if(f4)return Im;f4=1,Object.defineProperty(Im,"__esModule",{value:!0}),Im.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Im.Watch=t,Im.default=t,Im}var RP={},jb={},p4;function MAe(){if(p4)return jb;p4=1,Object.defineProperty(jb,"__esModule",{value:!0}),jb.IWatch=void 0;class t{}return jb.IWatch=t,jb}var g4;function LAe(){return g4||(g4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),WN.__exportStar(MAe(),t)}(RP)),RP}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=WN;e.__exportStar(kAe(),t),e.__exportStar(DAe(),t),e.__exportStar(LAe(),t),e.__exportStar(FQ(),t)})(Te);class sm{}let UAe=class extends sm{constructor(e){super()}};const m4=Te.FIVE_SECONDS,im={pulse:"heartbeat_pulse"};let $Ae=class jQ extends UAe{constructor(e){super(e),this.events=new Da.EventEmitter,this.interval=m4,this.interval=(e==null?void 0:e.interval)||m4}static async init(e){const n=new jQ(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Te.toMiliseconds(this.interval))}pulse(){this.events.emit(im.pulse)}};const BAe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,FAe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,jAe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function zAe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){WAe(t);return}return e}function WAe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function iA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!jAe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(BAe.test(t)||FAe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,zAe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function om(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function zQ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=om(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let PP;function jC(){return PP||(PP=zQ("keyval-store","keyval")),PP}function y4(t,e=jC()){return e("readonly",n=>om(n.get(t)))}function HAe(t,e,n=jC()){return n("readwrite",r=>(r.put(e,t),om(r.transaction)))}function GAe(t,e=jC()){return e("readwrite",n=>(n.delete(t),om(n.transaction)))}function qAe(t=jC()){return t("readwrite",e=>(e.clear(),om(e.transaction)))}function VAe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},om(t.transaction)}function KAe(t=jC()){return t("readonly",e=>{if(e.getAllKeys)return om(e.getAllKeys());const n=[];return VAe(e,r=>n.push(r.key)).then(()=>n)})}const YAe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),QAe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Tg(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return QAe(t)}catch{return t}}function ed(t){return typeof t=="string"?t:YAe(t)||""}function JAe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var ZAe=XAe;function XAe(t,e,n){var r=n&&n.stringify||JAe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const w4=ZAe;var Jm=Tl;const u_=lSe().console||{},eSe={mapHttpRequest:oA,mapHttpResponse:oA,wrapRequestSerializer:OP,wrapResponseSerializer:OP,wrapErrorSerializer:OP,req:oA,res:oA,err:iSe};function tSe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Tl(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||u_;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=tSe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=d_),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:oSe(t)};c.levels=Tl.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=d_,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=OD());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,xm(l,c,"error","log"),xm(l,c,"fatal","error"),xm(l,c,"warn","error"),xm(l,c,"info","log"),xm(l,c,"debug","log"),xm(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const y=g.serializers;if(s&&y){var m=Object.assign({},r,y),b=t.browser.serialize===!0?Object.keys(m):s;delete p.serializers,HN([p],b,m,this._stdErrSerialize)}function v(A){this._childLevel=(A._childLevel|0)+1,this.error=Nm(A,p,"error"),this.fatal=Nm(A,p,"fatal"),this.warn=Nm(A,p,"warn"),this.info=Nm(A,p,"info"),this.debug=Nm(A,p,"debug"),this.trace=Nm(A,p,"trace"),m&&(this.serializers=m,this._serialize=b),e&&(this._logEvent=OD([].concat(A._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Tl.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Tl.stdSerializers=eSe;Tl.stdTimeFunctions=Object.assign({},{nullTime:WQ,epochTime:HQ,unixTime:aSe,isoTime:cSe});function xm(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?d_:s[n]?s[n]:u_[n]||u_[r]||d_,nSe(t,e,n)}function nSe(t,e,n){!t.transmit&&e[n]===d_||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===u_?u_:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&HN(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,rSe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Tl.levels.values[l],d=Tl.levels.values[n];if(d<u)return;sSe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Tl.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function rSe(t,e,n,r){t._serialize&&HN(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Tl.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?w4(s.shift(),s):void 0}else typeof i=="string"&&(i=w4(s.shift(),s));return i!==void 0&&(o.msg=i),o}function HN(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Tl.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Nm(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function sSe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;HN(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=OD(c)}function OD(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function iSe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function oSe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?WQ:HQ}function oA(){return{}}function OP(t){return t}function d_(){}function WQ(){return!1}function HQ(){return Date.now()}function aSe(){return Math.round(Date.now()/1e3)}function cSe(){return new Date(Date.now()).toISOString()}function lSe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const zC=Gg(Jm),uSe={level:"info"},WC="custom_context",KL=1e3*1024;let dSe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},b4=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new dSe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},GQ=class{constructor(e,n=KL){this.level=e??"error",this.levelValue=Jm.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new b4(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Jm.levels.values.error?console.error(e):n===Jm.levels.values.warn?console.warn(e):n===Jm.levels.values.debug?console.debug(e):n===Jm.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(ed({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new b4(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(ed({extraMetadata:e})),new Blob(n,{type:"application/json"})}},hSe=class{constructor(e,n=KL){this.baseChunkLogger=new GQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},fSe=class{constructor(e,n=KL){this.baseChunkLogger=new GQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var pSe=Object.defineProperty,gSe=Object.defineProperties,mSe=Object.getOwnPropertyDescriptors,v4=Object.getOwnPropertySymbols,ySe=Object.prototype.hasOwnProperty,wSe=Object.prototype.propertyIsEnumerable,E4=(t,e,n)=>e in t?pSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,LI=(t,e)=>{for(var n in e||(e={}))ySe.call(e,n)&&E4(t,n,e[n]);if(v4)for(var n of v4(e))wSe.call(e,n)&&E4(t,n,e[n]);return t},UI=(t,e)=>gSe(t,mSe(e));function am(t){return UI(LI({},t),{level:(t==null?void 0:t.level)||uSe.level})}function bSe(t,e=WC){return t[e]||""}function vSe(t,e,n=WC){return t[n]=e,t}function lo(t,e=WC){let n="";return typeof t.bindings>"u"?n=bSe(t,e):n=t.bindings().context||"",n}function ESe(t,e,n=WC){const r=lo(t,n);return r.trim()?`${r}/${e}`:e}function ks(t,e,n=WC){const r=ESe(t,e,n),s=t.child({context:r});return vSe(s,r,n)}function _Se(t){var e,n;const r=new hSe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:zC(UI(LI({},t.opts),{level:"trace",browser:UI(LI({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function CSe(t){var e;const n=new fSe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:zC(UI(LI({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function GN(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?_Se(t):CSe(t)}function ASe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function qQ(t,...e){if(!ASe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function _4(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function SSe(t,e){qQ(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Tm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kP=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function ISe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function VQ(t){return typeof t=="string"&&(t=ISe(t)),qQ(t),t}let xSe=class{clone(){return this._cloneInto()}};function NSe(t){const e=r=>t().update(VQ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function KQ(t=32){if(Tm&&typeof Tm.getRandomValues=="function")return Tm.getRandomValues(new Uint8Array(t));if(Tm&&typeof Tm.randomBytes=="function")return Tm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function TSe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let RSe=class extends xSe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=kP(this.buffer)}update(e){_4(this);const{view:n,buffer:r,blockLen:s}=this;e=VQ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=kP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){_4(this),SSe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;TSe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=kP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const aA=BigInt(2**32-1),kD=BigInt(32);function YQ(t,e=!1){return e?{h:Number(t&aA),l:Number(t>>kD&aA)}:{h:Number(t>>kD&aA)|0,l:Number(t&aA)|0}}function PSe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=YQ(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const OSe=(t,e)=>BigInt(t>>>0)<<kD|BigInt(e>>>0),kSe=(t,e,n)=>t>>>n,DSe=(t,e,n)=>t<<32-n|e>>>n,MSe=(t,e,n)=>t>>>n|e<<32-n,LSe=(t,e,n)=>t<<32-n|e>>>n,USe=(t,e,n)=>t<<64-n|e>>>n-32,$Se=(t,e,n)=>t>>>n-32|e<<64-n,BSe=(t,e)=>e,FSe=(t,e)=>t,jSe=(t,e,n)=>t<<n|e>>>32-n,zSe=(t,e,n)=>e<<n|t>>>32-n,WSe=(t,e,n)=>e<<n-32|t>>>64-n,HSe=(t,e,n)=>t<<n-32|e>>>64-n;function GSe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const qSe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),VSe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,KSe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),YSe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,QSe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),JSe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ot={fromBig:YQ,split:PSe,toBig:OSe,shrSH:kSe,shrSL:DSe,rotrSH:MSe,rotrSL:LSe,rotrBH:USe,rotrBL:$Se,rotr32H:BSe,rotr32L:FSe,rotlSH:jSe,rotlSL:zSe,rotlBH:WSe,rotlBL:HSe,add:GSe,add3L:qSe,add3H:VSe,add4L:KSe,add4H:YSe,add5H:JSe,add5L:QSe},[ZSe,XSe]=Ot.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ad=new Uint32Array(80),Sd=new Uint32Array(80);let eIe=class extends RSe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)Ad[v]=e.getUint32(n),Sd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Ad[v-15]|0,C=Sd[v-15]|0,S=Ot.rotrSH(A,C,1)^Ot.rotrSH(A,C,8)^Ot.shrSH(A,C,7),x=Ot.rotrSL(A,C,1)^Ot.rotrSL(A,C,8)^Ot.shrSL(A,C,7),T=Ad[v-2]|0,I=Sd[v-2]|0,k=Ot.rotrSH(T,I,19)^Ot.rotrBH(T,I,61)^Ot.shrSH(T,I,6),O=Ot.rotrSL(T,I,19)^Ot.rotrBL(T,I,61)^Ot.shrSL(T,I,6),B=Ot.add4L(x,O,Sd[v-7],Sd[v-16]),G=Ot.add4H(B,S,k,Ad[v-7],Ad[v-16]);Ad[v]=G|0,Sd[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:m,Hl:b}=this;for(let v=0;v<80;v++){const A=Ot.rotrSH(d,h,14)^Ot.rotrSH(d,h,18)^Ot.rotrBH(d,h,41),C=Ot.rotrSL(d,h,14)^Ot.rotrSL(d,h,18)^Ot.rotrBL(d,h,41),S=d&f^~d&g,x=h&p^~h&y,T=Ot.add5L(b,C,x,XSe[v],Sd[v]),I=Ot.add5H(T,m,A,S,ZSe[v],Ad[v]),k=T|0,O=Ot.rotrSH(r,s,28)^Ot.rotrBH(r,s,34)^Ot.rotrBH(r,s,39),B=Ot.rotrSL(r,s,28)^Ot.rotrBL(r,s,34)^Ot.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,b=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=Ot.add(l|0,u|0,I|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const R=Ot.add3L(k,B,W);r=Ot.add3H(R,I,O,G),s=R|0}({h:r,l:s}=Ot.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ot.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ot.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ot.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ot.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ot.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=Ot.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:m,l:b}=Ot.add(this.Hh|0,this.Hl|0,m|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,m,b)}roundClean(){Ad.fill(0),Sd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const tIe=NSe(()=>new eIe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const YL=BigInt(0),QQ=BigInt(1),nIe=BigInt(2);function QL(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function JL(t){if(!QL(t))throw new Error("Uint8Array expected")}function DP(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const rIe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ZL(t){JL(t);let e="";for(let n=0;n<t.length;n++)e+=rIe[t[n]];return e}function JQ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?YL:BigInt("0x"+t)}const Jl={_0:48,_9:57,A:65,F:70,a:97,f:102};function C4(t){if(t>=Jl._0&&t<=Jl._9)return t-Jl._0;if(t>=Jl.A&&t<=Jl.F)return t-(Jl.A-10);if(t>=Jl.a&&t<=Jl.f)return t-(Jl.a-10)}function ZQ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=C4(t.charCodeAt(i)),a=C4(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function sIe(t){return JQ(ZL(t))}function aS(t){return JL(t),JQ(ZL(Uint8Array.from(t).reverse()))}function XQ(t,e){return ZQ(t.toString(16).padStart(e*2,"0"))}function DD(t,e){return XQ(t,e).reverse()}function Zl(t,e,n){let r;if(typeof e=="string")try{r=ZQ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(QL(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function A4(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];JL(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const MP=t=>typeof t=="bigint"&&YL<=t;function iIe(t,e,n){return MP(t)&&MP(e)&&MP(n)&&e<=t&&t<n}function zb(t,e,n,r){if(!iIe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function oIe(t){let e;for(e=0;t>YL;t>>=QQ,e+=1);return e}const aIe=t=>(nIe<<BigInt(t-1))-QQ,cIe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||QL(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function XL(t,e,n={}){const r=(s,i,o)=>{const a=cIe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function S4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const us=BigInt(0),Nr=BigInt(1),Jf=BigInt(2),lIe=BigInt(3),MD=BigInt(4),I4=BigInt(5),x4=BigInt(8);function zr(t,e){const n=t%e;return n>=us?n:e+n}function uIe(t,e,n){if(e<us)throw new Error("invalid exponent, negatives unsupported");if(n<=us)throw new Error("invalid modulus");if(n===Nr)return us;let r=Nr;for(;e>us;)e&Nr&&(r=r*t%n),t=t*t%n,e>>=Nr;return r}function Bc(t,e,n){let r=t;for(;e-- >us;)r*=r,r%=n;return r}function N4(t,e){if(t===us)throw new Error("invert: expected non-zero number");if(e<=us)throw new Error("invert: expected positive modulus, got "+e);let n=zr(t,e),r=e,s=us,i=Nr;for(;n!==us;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Nr)throw new Error("invert: does not exist");return zr(s,e)}function dIe(t){const e=(t-Nr)/Jf;let n,r,s;for(n=t-Nr,r=0;n%Jf===us;n/=Jf,r++);for(s=Jf;s<t&&uIe(s,e,t)!==t-Nr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Nr)/MD;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Nr)/Jf;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Nr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function hIe(t){if(t%MD===lIe){const e=(t+Nr)/MD;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%x4===I4){const e=(t-I4)/x4;return function(n,r){const s=n.mul(r,Jf),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Jf),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return dIe(t)}const fIe=(t,e)=>(zr(t,e)&Nr)===Nr,pIe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gIe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=pIe.reduce((r,s)=>(r[s]="function",r),e);return XL(t,n)}function mIe(t,e,n){if(n<us)throw new Error("invalid exponent, negatives unsupported");if(n===us)return t.ONE;if(n===Nr)return e;let r=t.ONE,s=e;for(;n>us;)n&Nr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Nr;return r}function yIe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function eJ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function tJ(t,e,n=!1,r={}){if(t<=us)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=eJ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:aIe(s),ZERO:us,ONE:Nr,create:c=>zr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return us<=c&&c<t},is0:c=>c===us,isOdd:c=>(c&Nr)===Nr,neg:c=>zr(-c,t),eql:(c,l)=>c===l,sqr:c=>zr(c*c,t),add:(c,l)=>zr(c+l,t),sub:(c,l)=>zr(c-l,t),mul:(c,l)=>zr(c*l,t),pow:(c,l)=>mIe(a,c,l),div:(c,l)=>zr(c*N4(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>N4(c,t),sqrt:r.sqrt||(c=>(o||(o=hIe(t)),o(a,c))),invertBatch:c=>yIe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?DD(c,i):XQ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?aS(c):sIe(c)}});return Object.freeze(a)}const T4=BigInt(0),cA=BigInt(1);function LP(t,e){const n=e.negate();return t?n:e}function nJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function UP(t,e){nJ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function wIe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function bIe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const $P=new WeakMap,rJ=new WeakMap;function BP(t){return rJ.get(t)||1}function vIe(t,e){return{constTimeNegate:LP,hasPrecomputes(n){return BP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>T4;)r&cA&&(s=s.add(i)),i=i.double(),r>>=cA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=UP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=UP(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=cA);const g=f,y=f+Math.abs(p)-1,m=h%2!==0,b=p<0;p===0?c=c.add(LP(m,r[g])):a=a.add(LP(b,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=UP(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===T4)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=cA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=$P.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&$P.set(r,s(i))),i},wNAFCached(n,r,s){const i=BP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=BP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){nJ(r,e),rJ.set(n,r),$P.delete(n)}}}function EIe(t,e,n,r){if(wIe(n,t),bIe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=oIe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function _Ie(t){return gIe(t.Fp),XL(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...eJ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const za=BigInt(0),Ti=BigInt(1),lA=BigInt(2),CIe=BigInt(8),AIe={zip215:!0};function SIe(t){const e=_Ie(t);return XL(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function IIe(t){const e=SIe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=lA<<BigInt(a*8)-Ti,u=n.create,d=tJ(e.n,e.nBitLength),h=e.uvRatio||((R,N)=>{try{return{isValid:!0,value:n.sqrt(R*n.inv(N))}}catch{return{isValid:!1,value:za}}}),f=e.adjustScalarBytes||(R=>R),p=e.domain||((R,N,M)=>{if(DP("phflag",M),N.length||M)throw new Error("Contexts/pre-hash are not supported");return R});function g(R,N){zb("coordinate "+R,N,za,l)}function y(R){if(!(R instanceof v))throw new Error("ExtendedPoint expected")}const m=S4((R,N)=>{const{ex:M,ey:P,ez:D}=R,F=R.is0();N==null&&(N=F?CIe:n.inv(D));const H=u(M*N),te=u(P*N),re=u(D*N);if(F)return{x:za,y:Ti};if(re!==Ti)throw new Error("invZ was invalid");return{x:H,y:te}}),b=S4(R=>{const{a:N,d:M}=e;if(R.is0())throw new Error("bad point: ZERO");const{ex:P,ey:D,ez:F,et:H}=R,te=u(P*P),re=u(D*D),ie=u(F*F),le=u(ie*ie),Ce=u(te*N),X=u(ie*u(Ce+re)),ce=u(le+u(M*u(te*re)));if(X!==ce)throw new Error("bad point: equation left != right (1)");const fe=u(P*D),de=u(F*H);if(fe!==de)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(N,M,P,D){this.ex=N,this.ey=M,this.ez=P,this.et=D,g("x",N),g("y",M),g("z",P),g("t",D),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof v)throw new Error("extended point not allowed");const{x:M,y:P}=N||{};return g("x",M),g("y",P),new v(M,P,Ti,u(M*P))}static normalizeZ(N){const M=n.invertBatch(N.map(P=>P.ez));return N.map((P,D)=>P.toAffine(M[D])).map(v.fromAffine)}static msm(N,M){return EIe(v,d,N,M)}_setWindowSize(N){S.setWindowSize(this,N)}assertValidity(){b(this)}equals(N){y(N);const{ex:M,ey:P,ez:D}=this,{ex:F,ey:H,ez:te}=N,re=u(M*te),ie=u(F*D),le=u(P*te),Ce=u(H*D);return re===ie&&le===Ce}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:N}=e,{ex:M,ey:P,ez:D}=this,F=u(M*M),H=u(P*P),te=u(lA*u(D*D)),re=u(N*F),ie=M+P,le=u(u(ie*ie)-F-H),Ce=re+H,X=Ce-te,ce=re-H,fe=u(le*X),de=u(Ce*ce),ve=u(le*ce),ye=u(X*Ce);return new v(fe,de,ye,ve)}add(N){y(N);const{a:M,d:P}=e,{ex:D,ey:F,ez:H,et:te}=this,{ex:re,ey:ie,ez:le,et:Ce}=N;if(M===BigInt(-1)){const fn=u((F-D)*(ie+re)),Ht=u((F+D)*(ie-re)),nr=u(Ht-fn);if(nr===za)return this.double();const uo=u(H*lA*Ce),$a=u(te*lA*le),ei=$a+uo,En=Ht+fn,Lr=$a-uo,_n=u(ei*nr),ho=u(En*Lr),Wl=u(ei*Lr),u1=u(nr*En);return new v(_n,ho,u1,Wl)}const X=u(D*re),ce=u(F*ie),fe=u(te*P*Ce),de=u(H*le),ve=u((D+F)*(re+ie)-X-ce),ye=de-fe,Ae=de+fe,we=u(ce-M*X),me=u(ve*ye),Xe=u(Ae*we),Zt=u(ve*we),jt=u(ye*Ae);return new v(me,Xe,jt,Zt)}subtract(N){return this.add(N.negate())}wNAF(N){return S.wNAFCached(this,N,v.normalizeZ)}multiply(N){const M=N;zb("scalar",M,Ti,r);const{p:P,f:D}=this.wNAF(M);return v.normalizeZ([P,D])[0]}multiplyUnsafe(N,M=v.ZERO){const P=N;return zb("scalar",P,za,r),P===za?C:this.is0()||P===Ti?this:S.wNAFCachedUnsafe(this,P,v.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,r).is0()}toAffine(N){return m(this,N)}clearCofactor(){const{h:N}=e;return N===Ti?this:this.multiplyUnsafe(N)}static fromHex(N,M=!1){const{d:P,a:D}=e,F=n.BYTES;N=Zl("pointHex",N,F),DP("zip215",M);const H=N.slice(),te=N[F-1];H[F-1]=te&-129;const re=aS(H),ie=M?l:n.ORDER;zb("pointHex.y",re,za,ie);const le=u(re*re),Ce=u(le-Ti),X=u(P*le-D);let{isValid:ce,value:fe}=h(Ce,X);if(!ce)throw new Error("Point.fromHex: invalid y coordinate");const de=(fe&Ti)===Ti,ve=(te&128)!==0;if(!M&&fe===za&&ve)throw new Error("Point.fromHex: x=0 and x_0=1");return ve!==de&&(fe=u(-fe)),v.fromAffine({x:fe,y:re})}static fromPrivateKey(N){return I(N).point}toRawBytes(){const{x:N,y:M}=this.toAffine(),P=DD(M,n.BYTES);return P[P.length-1]|=N&Ti?128:0,P}toHex(){return ZL(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Ti,u(e.Gx*e.Gy)),v.ZERO=new v(za,Ti,Ti,za);const{BASE:A,ZERO:C}=v,S=vIe(v,a*8);function x(R){return zr(R,r)}function T(R){return x(aS(R))}function I(R){const N=n.BYTES;R=Zl("private key",R,N);const M=Zl("hashed private key",i(R),2*N),P=f(M.slice(0,N)),D=M.slice(N,2*N),F=T(P),H=A.multiply(F),te=H.toRawBytes();return{head:P,prefix:D,scalar:F,point:H,pointBytes:te}}function k(R){return I(R).pointBytes}function O(R=new Uint8Array,...N){const M=A4(...N);return T(i(p(M,Zl("context",R),!!s)))}function B(R,N,M={}){R=Zl("message",R),s&&(R=s(R));const{prefix:P,scalar:D,pointBytes:F}=I(N),H=O(M.context,P,R),te=A.multiply(H).toRawBytes(),re=O(M.context,te,F,R),ie=x(H+re*D);zb("signature.s",ie,za,r);const le=A4(te,DD(ie,n.BYTES));return Zl("result",le,n.BYTES*2)}const G=AIe;function W(R,N,M,P=G){const{context:D,zip215:F}=P,H=n.BYTES;R=Zl("signature",R,2*H),N=Zl("message",N),M=Zl("publicKey",M,H),F!==void 0&&DP("zip215",F),s&&(N=s(N));const te=aS(R.slice(H,2*H));let re,ie,le;try{re=v.fromHex(M,F),ie=v.fromHex(R.slice(0,H),F),le=A.multiplyUnsafe(te)}catch{return!1}if(!F&&re.isSmallOrder())return!1;const Ce=O(D,ie.toRawBytes(),re.toRawBytes(),N);return ie.add(re.multiplyUnsafe(Ce)).subtract(le).clearCofactor().equals(v.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:k,sign:B,verify:W,ExtendedPoint:v,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(n.BYTES),precompute(R=8,N=v.BASE){return N._setWindowSize(R),N.multiply(BigInt(3)),N}}}}BigInt(0),BigInt(1);const eU=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),R4=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const xIe=BigInt(1),P4=BigInt(2);BigInt(3);const NIe=BigInt(5),TIe=BigInt(8);function RIe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=eU,o=t*t%i*t%i,a=Bc(o,P4,i)*o%i,c=Bc(a,xIe,i)*t%i,l=Bc(c,NIe,i)*c%i,u=Bc(l,e,i)*l%i,d=Bc(u,n,i)*u%i,h=Bc(d,r,i)*d%i,f=Bc(h,s,i)*h%i,p=Bc(f,s,i)*h%i,g=Bc(p,e,i)*l%i;return{pow_p_5_8:Bc(g,P4,i)*t%i,b2:o}}function PIe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function OIe(t,e){const n=eU,r=zr(e*e*e,n),s=zr(r*r*e,n),i=RIe(t*s).pow_p_5_8;let o=zr(t*r*i,n);const a=zr(e*o*o,n),c=o,l=zr(o*R4,n),u=a===t,d=a===zr(-t,n),h=a===zr(-t*R4,n);return u&&(o=c),(d||h)&&(o=l),fIe(o,n)&&(o=zr(-o,n)),{isValid:u||d,value:o}}const kIe=tJ(eU,void 0,!0),DIe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:kIe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:TIe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:tIe,randomBytes:KQ,adjustScalarBytes:PIe,uvRatio:OIe},sJ=IIe(DIe),MIe="EdDSA",LIe="JWT",$I=".",qN="base64url",iJ="utf8",oJ="utf8",UIe=":",$Ie="did",BIe="key",O4="base58btc",FIe="z",jIe="K36",zIe=32;function tU(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function aJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?tU(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function cJ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=aJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return tU(n)}function WIe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,A=new Uint8Array(v);m!==b;){for(var C=p[m],S=0,x=v-1;(C!==0||S<y)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,m++}for(var T=v-y;T!==v&&A[T]===0;)T++;for(var I=c.repeat(g);T<v;++T)I+=t.charAt(A[T]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=b-1;(A!==0||C<m)&&S!==-1;S--,C++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var T=new Uint8Array(y+(b-x)),I=y;x!==b;)T[I++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var HIe=WIe,GIe=HIe;const lJ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},qIe=t=>new TextEncoder().encode(t),VIe=t=>new TextDecoder().decode(t);let KIe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},YIe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return uJ(this,e)}},QIe=class{constructor(e){this.decoders=e}or(e){return uJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const uJ=(t,e)=>new QIe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let JIe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new KIe(e,n,r),this.decoder=new YIe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const VN=({name:t,prefix:e,encode:n,decode:r})=>new JIe(t,e,n,r),HC=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=GIe(n,e);return VN({prefix:t,name:e,encode:r,decode:i=>lJ(s(i))})},ZIe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},XIe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ds=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>VN({prefix:e,name:t,encode(s){return XIe(s,r,n)},decode(s){return ZIe(s,r,n,t)}}),exe=VN({prefix:"\0",name:"identity",encode:t=>VIe(t),decode:t=>qIe(t)});var txe=Object.freeze({__proto__:null,identity:exe});const nxe=Ds({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var rxe=Object.freeze({__proto__:null,base2:nxe});const sxe=Ds({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ixe=Object.freeze({__proto__:null,base8:sxe});const oxe=HC({prefix:"9",name:"base10",alphabet:"0123456789"});var axe=Object.freeze({__proto__:null,base10:oxe});const cxe=Ds({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),lxe=Ds({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var uxe=Object.freeze({__proto__:null,base16:cxe,base16upper:lxe});const dxe=Ds({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),hxe=Ds({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),fxe=Ds({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),pxe=Ds({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),gxe=Ds({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),mxe=Ds({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),yxe=Ds({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),wxe=Ds({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),bxe=Ds({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var vxe=Object.freeze({__proto__:null,base32:dxe,base32upper:hxe,base32pad:fxe,base32padupper:pxe,base32hex:gxe,base32hexupper:mxe,base32hexpad:yxe,base32hexpadupper:wxe,base32z:bxe});const Exe=HC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_xe=HC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Cxe=Object.freeze({__proto__:null,base36:Exe,base36upper:_xe});const Axe=HC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Sxe=HC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ixe=Object.freeze({__proto__:null,base58btc:Axe,base58flickr:Sxe});const xxe=Ds({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Nxe=Ds({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Txe=Ds({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Rxe=Ds({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Pxe=Object.freeze({__proto__:null,base64:xxe,base64pad:Nxe,base64url:Txe,base64urlpad:Rxe});const dJ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Oxe=dJ.reduce((t,e,n)=>(t[n]=e,t),[]),kxe=dJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Dxe(t){return t.reduce((e,n)=>(e+=Oxe[n],e),"")}function Mxe(t){const e=[];for(const n of t){const r=kxe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Lxe=VN({prefix:"🚀",name:"base256emoji",encode:Dxe,decode:Mxe});var Uxe=Object.freeze({__proto__:null,base256emoji:Lxe}),$xe=hJ,k4=128,Bxe=-128,Fxe=Math.pow(2,31);function hJ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Fxe;)e[n++]=t&255|k4,t/=128;for(;t&Bxe;)e[n++]=t&255|k4,t>>>=7;return e[n]=t|0,hJ.bytes=n-r+1,e}var jxe=LD,zxe=128,D4=127;function LD(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw LD.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&D4)<<s:(o&D4)*Math.pow(2,s),s+=7}while(o>=zxe);return LD.bytes=i-r,n}var Wxe=Math.pow(2,7),Hxe=Math.pow(2,14),Gxe=Math.pow(2,21),qxe=Math.pow(2,28),Vxe=Math.pow(2,35),Kxe=Math.pow(2,42),Yxe=Math.pow(2,49),Qxe=Math.pow(2,56),Jxe=Math.pow(2,63),Zxe=function(t){return t<Wxe?1:t<Hxe?2:t<Gxe?3:t<qxe?4:t<Vxe?5:t<Kxe?6:t<Yxe?7:t<Qxe?8:t<Jxe?9:10},Xxe={encode:$xe,decode:jxe,encodingLength:Zxe},fJ=Xxe;const M4=(t,e,n=0)=>(fJ.encode(t,e,n),e),L4=t=>fJ.encodingLength(t),UD=(t,e)=>{const n=e.byteLength,r=L4(t),s=r+L4(n),i=new Uint8Array(s+n);return M4(t,i,0),M4(n,i,r),i.set(e,s),new eNe(t,n,e,i)};let eNe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const pJ=({name:t,code:e,encode:n})=>new tNe(t,e,n);let tNe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?UD(this.code,n):n.then(r=>UD(this.code,r))}else throw Error("Unknown type, must be binary type")}};const gJ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),nNe=pJ({name:"sha2-256",code:18,encode:gJ("SHA-256")}),rNe=pJ({name:"sha2-512",code:19,encode:gJ("SHA-512")});var sNe=Object.freeze({__proto__:null,sha256:nNe,sha512:rNe});const mJ=0,iNe="identity",yJ=lJ,oNe=t=>UD(mJ,yJ(t)),aNe={code:mJ,name:iNe,encode:yJ,digest:oNe};var cNe=Object.freeze({__proto__:null,identity:aNe});new TextEncoder,new TextDecoder;const U4={...txe,...rxe,...ixe,...axe,...uxe,...vxe,...Cxe,...Ixe,...Pxe,...Uxe};({...sNe,...cNe});function wJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const $4=wJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),FP=wJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=aJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),bJ={utf8:$4,"utf-8":$4,hex:U4.base16,latin1:FP,ascii:FP,binary:FP,...U4};function KN(t,e="utf8"){const n=bJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function nb(t,e="utf8"){const n=bJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?tU(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function B4(t){return Tg(KN(nb(t,qN),iJ))}function BI(t){return KN(nb(ed(t),iJ),qN)}function vJ(t){const e=nb(jIe,O4),n=FIe+KN(cJ([e,t]),O4);return[$Ie,BIe,n].join(UIe)}function lNe(t){return KN(t,qN)}function uNe(t){return nb(t,qN)}function dNe(t){return nb([BI(t.header),BI(t.payload)].join($I),oJ)}function hNe(t){return[BI(t.header),BI(t.payload),lNe(t.signature)].join($I)}function $D(t){const e=t.split($I),n=B4(e[0]),r=B4(e[1]),s=uNe(e[2]),i=nb(e.slice(0,2).join($I),oJ);return{header:n,payload:r,signature:s,data:i}}function F4(t=KQ(zIe)){const e=sJ.getPublicKey(t);return{secretKey:cJ([t,e]),publicKey:e}}async function fNe(t,e,n,r,s=Te.fromMiliseconds(Date.now())){const i={alg:MIe,typ:LIe},o=vJ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=dNe({header:i,payload:c}),u=sJ.sign(l,r.secretKey.slice(0,32));return hNe({header:i,payload:c,signature:u})}var j4=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},pNe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),gNe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),mNe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),yNe=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),wNe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),bNe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,vNe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,z4=3,ENe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",bNe]],W4=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function _Ne(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new wNe:typeof navigator<"u"?ANe(navigator.userAgent):INe()}function CNe(t){return t!==""&&ENe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function ANe(t){var e=CNe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new yNe;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<z4&&(s=j4(j4([],s,!0),xNe(z4-s.length),!0)):s=[];var i=s.join("."),o=SNe(t),a=vNe.exec(t);return a&&a[1]?new mNe(n,i,o,a[1]):new pNe(n,i,o)}function SNe(t){for(var e=0,n=W4.length;e<n;e++){var r=W4[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function INe(){var t=typeof process<"u"&&process.version;return t?new gNe(process.version.slice(1)):null}function xNe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.getLocalStorage=Wn.getLocalStorageOrThrow=Wn.getCrypto=Wn.getCryptoOrThrow=EJ=Wn.getLocation=Wn.getLocationOrThrow=nU=Wn.getNavigator=Wn.getNavigatorOrThrow=Rg=Wn.getDocument=Wn.getDocumentOrThrow=Wn.getFromWindowOrThrow=Wn.getFromWindow=void 0;function cm(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Wn.getFromWindow=cm;function rb(t){const e=cm(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Wn.getFromWindowOrThrow=rb;function NNe(){return rb("document")}Wn.getDocumentOrThrow=NNe;function TNe(){return cm("document")}var Rg=Wn.getDocument=TNe;function RNe(){return rb("navigator")}Wn.getNavigatorOrThrow=RNe;function PNe(){return cm("navigator")}var nU=Wn.getNavigator=PNe;function ONe(){return rb("location")}Wn.getLocationOrThrow=ONe;function kNe(){return cm("location")}var EJ=Wn.getLocation=kNe;function DNe(){return rb("crypto")}Wn.getCryptoOrThrow=DNe;function MNe(){return cm("crypto")}Wn.getCrypto=MNe;function LNe(){return rb("localStorage")}Wn.getLocalStorageOrThrow=LNe;function UNe(){return cm("localStorage")}Wn.getLocalStorage=UNe;var rU={};Object.defineProperty(rU,"__esModule",{value:!0});var _J=rU.getWindowMetadata=void 0;const H4=Wn;function $Ne(){let t,e;try{t=H4.getDocumentOrThrow(),e=H4.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const y=p.getAttribute("href");if(y)if(y.toLowerCase().indexOf("https:")===-1&&y.toLowerCase().indexOf("http:")===-1&&y.indexOf("//")!==0){let m=e.protocol+"//"+e.host;if(y.indexOf("/")===0)m+=y;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");m+=v+"/"+y}h.push(m)}else if(y.indexOf("//")===0){const m=e.protocol+y;h.push(m)}else h.push(y)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(y=>p.getAttribute(y)).filter(y=>y?d.includes(y):!1);if(g.length&&g){const y=p.getAttribute("content");if(y)return y}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}_J=rU.getWindowMetadata=$Ne;function BNe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let A=p-1;(b!==0||v<d)&&A!==-1;A--,v++)b+=256*g[A]>>>0,g[A]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let y=p-d;for(;y!==p&&g[y]===0;)y++;let m=r.repeat(u);for(;y<p;++y)m+=t.charAt(g[y]);return m}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let A=0;for(let C=f-1;(v!==0||A<h)&&C!==-1;C--,A++)v+=n*p[C]>>>0,p[C]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const y=new Uint8Array(d+(f-g));let m=d;for(;g!==f;)y[m++]=p[g++];return y}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var FNe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const CJ=BNe(FNe);function AJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function Jv(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=AJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function jNe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,A=new Uint8Array(v);m!==b;){for(var C=p[m],S=0,x=v-1;(C!==0||S<y)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,m++}for(var T=v-y;T!==v&&A[T]===0;)T++;for(var I=c.repeat(g);T<v;++T)I+=t.charAt(A[T]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=b-1;(A!==0||C<m)&&S!==-1;S--,C++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var T=new Uint8Array(y+(b-x)),I=y;x!==b;)T[I++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var zNe=jNe,WNe=zNe;const HNe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},GNe=t=>new TextEncoder().encode(t),qNe=t=>new TextDecoder().decode(t);class VNe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class KNe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return SJ(this,e)}}class YNe{constructor(e){this.decoders=e}or(e){return SJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const SJ=(t,e)=>new YNe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class QNe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new VNe(e,n,r),this.decoder=new KNe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const YN=({name:t,prefix:e,encode:n,decode:r})=>new QNe(t,e,n,r),GC=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=WNe(n,e);return YN({prefix:t,name:e,encode:r,decode:i=>HNe(s(i))})},JNe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},ZNe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ms=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>YN({prefix:e,name:t,encode(s){return ZNe(s,r,n)},decode(s){return JNe(s,r,n,t)}}),XNe=YN({prefix:"\0",name:"identity",encode:t=>qNe(t),decode:t=>GNe(t)}),eTe=Object.freeze(Object.defineProperty({__proto__:null,identity:XNe},Symbol.toStringTag,{value:"Module"})),tTe=Ms({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),nTe=Object.freeze(Object.defineProperty({__proto__:null,base2:tTe},Symbol.toStringTag,{value:"Module"})),rTe=Ms({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),sTe=Object.freeze(Object.defineProperty({__proto__:null,base8:rTe},Symbol.toStringTag,{value:"Module"})),iTe=GC({prefix:"9",name:"base10",alphabet:"0123456789"}),oTe=Object.freeze(Object.defineProperty({__proto__:null,base10:iTe},Symbol.toStringTag,{value:"Module"})),aTe=Ms({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cTe=Ms({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),lTe=Object.freeze(Object.defineProperty({__proto__:null,base16:aTe,base16upper:cTe},Symbol.toStringTag,{value:"Module"})),uTe=Ms({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),dTe=Ms({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hTe=Ms({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fTe=Ms({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pTe=Ms({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),gTe=Ms({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),mTe=Ms({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),yTe=Ms({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),wTe=Ms({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),bTe=Object.freeze(Object.defineProperty({__proto__:null,base32:uTe,base32hex:pTe,base32hexpad:mTe,base32hexpadupper:yTe,base32hexupper:gTe,base32pad:hTe,base32padupper:fTe,base32upper:dTe,base32z:wTe},Symbol.toStringTag,{value:"Module"})),vTe=GC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ETe=GC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),_Te=Object.freeze(Object.defineProperty({__proto__:null,base36:vTe,base36upper:ETe},Symbol.toStringTag,{value:"Module"})),CTe=GC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ATe=GC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),STe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:CTe,base58flickr:ATe},Symbol.toStringTag,{value:"Module"})),ITe=Ms({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),xTe=Ms({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),NTe=Ms({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),TTe=Ms({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),RTe=Object.freeze(Object.defineProperty({__proto__:null,base64:ITe,base64pad:xTe,base64url:NTe,base64urlpad:TTe},Symbol.toStringTag,{value:"Module"})),IJ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),PTe=IJ.reduce((t,e,n)=>(t[n]=e,t),[]),OTe=IJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function kTe(t){return t.reduce((e,n)=>(e+=PTe[n],e),"")}function DTe(t){const e=[];for(const n of t){const r=OTe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const MTe=YN({prefix:"🚀",name:"base256emoji",encode:kTe,decode:DTe}),LTe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:MTe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const G4={...eTe,...nTe,...sTe,...oTe,...lTe,...bTe,..._Te,...STe,...RTe,...LTe};function xJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const q4=xJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),jP=xJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=AJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),NJ={utf8:q4,"utf-8":q4,hex:G4.base16,latin1:jP,ascii:jP,binary:jP,...G4};function _a(t,e="utf8"){const n=NJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function ro(t,e="utf8"){const n=NJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const UTe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},$Te="PARSE_ERROR",BTe="INVALID_REQUEST",FTe="METHOD_NOT_FOUND",jTe="INVALID_PARAMS",TJ="INTERNAL_ERROR",sU="SERVER_ERROR",zTe=[-32700,-32600,-32601,-32602,-32603],Zv={[$Te]:{code:-32700,message:"Parse error"},[BTe]:{code:-32600,message:"Invalid Request"},[FTe]:{code:-32601,message:"Method not found"},[jTe]:{code:-32602,message:"Invalid params"},[TJ]:{code:-32603,message:"Internal error"},[sU]:{code:-32e3,message:"Server error"}},RJ=sU;function WTe(t){return zTe.includes(t)}function V4(t){return Object.keys(Zv).includes(t)?Zv[t]:Zv[RJ]}function HTe(t){const e=Object.values(Zv).find(n=>n.code===t);return e||Zv[RJ]}function PJ(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var OJ={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var BD=function(t,e){return BD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},BD(t,e)};function GTe(t,e){BD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var FD=function(){return FD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},FD.apply(this,arguments)};function qTe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function VTe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function KTe(t,e){return function(n,r){e(n,r,t)}}function YTe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function QTe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function JTe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ZTe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function XTe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function jD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kJ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function eRe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(kJ(arguments[e]));return t}function tRe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function h_(t){return this instanceof h_?(this.v=t,this):new h_(t)}function nRe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof h_?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function rRe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:h_(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function sRe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jD=="function"?jD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function iRe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function oRe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function aRe(t){return t&&t.__esModule?t:{default:t}}function cRe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function lRe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const uRe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return FD},__asyncDelegator:rRe,__asyncGenerator:nRe,__asyncValues:sRe,__await:h_,__awaiter:QTe,__classPrivateFieldGet:cRe,__classPrivateFieldSet:lRe,__createBinding:ZTe,__decorate:VTe,__exportStar:XTe,__extends:GTe,__generator:JTe,__importDefault:aRe,__importStar:oRe,__makeTemplateObject:iRe,__metadata:YTe,__param:KTe,__read:kJ,__rest:qTe,__spread:eRe,__spreadArrays:tRe,__values:jD},Symbol.toStringTag,{value:"Module"})),dRe=wz(uRe);var Xl={},K4;function hRe(){if(K4)return Xl;K4=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.isBrowserCryptoAvailable=Xl.getSubtleCrypto=Xl.getBrowerCrypto=void 0;function t(){return(ul==null?void 0:ul.crypto)||(ul==null?void 0:ul.msCrypto)||{}}Xl.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}Xl.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return Xl.isBrowserCryptoAvailable=n,Xl}var eu={},Y4;function fRe(){if(Y4)return eu;Y4=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.isBrowser=eu.isNode=eu.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}eu.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}eu.isNode=e;function n(){return!t()&&!e()}return eu.isBrowser=n,eu}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=dRe;e.__exportStar(hRe(),t),e.__exportStar(fRe(),t)})(OJ);function Yc(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function yp(t=6){return BigInt(Yc(t))}function Nh(t,e,n){return{id:n||Yc(),jsonrpc:"2.0",method:t,params:e}}function QN(t,e){return{id:t,jsonrpc:"2.0",result:e}}function JN(t,e,n){return{id:t,jsonrpc:"2.0",error:pRe(e)}}function pRe(t,e){return typeof t>"u"?V4(TJ):(typeof t=="string"&&(t=Object.assign(Object.assign({},V4(sU)),{message:t})),WTe(t.code)&&(t=HTe(t.code)),t)}let gRe=class{},mRe=class extends gRe{constructor(){super()}},yRe=class extends mRe{constructor(e){super()}};const wRe="^https?:",bRe="^wss?:";function vRe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function DJ(t,e){const n=vRe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function Q4(t){return DJ(t,wRe)}function J4(t){return DJ(t,bRe)}function ERe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function MJ(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function iU(t){return MJ(t)&&"method"in t}function ZN(t){return MJ(t)&&(Qc(t)||ga(t))}function Qc(t){return"result"in t}function ga(t){return"error"in t}let Ma=class extends yRe{constructor(e){super(e),this.events=new Da.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Nh(e.method,e.params||[],e.id||yp().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{ga(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ZN(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const _Re=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),CRe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Z4=t=>t.split("?")[0],X4=10,ARe=_Re();let SRe=class{constructor(e){if(this.url=e,this.events=new Da.EventEmitter,this.registering=!1,!J4(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ed(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!J4(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=OJ.isReactNative()?void 0:{rejectUnauthorized:!ERe(e)},i=new ARe(e,[],s);CRe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Tg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=JN(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return PJ(e,Z4(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>X4&&this.events.setMaxListeners(X4)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Z4(this.url)}`));return this.events.emit("register_error",n),n}};var zD={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof ul<"u"&&ul,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof ul<"u"&&ul||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(R){return R&&DataView.prototype.isPrototypeOf(R)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(R){return R&&u.indexOf(Object.prototype.toString.call(R))>-1};function h(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(R)||R==="")throw new TypeError('Invalid character in header field name: "'+R+'"');return R.toLowerCase()}function f(R){return typeof R!="string"&&(R=String(R)),R}function p(R){var N={next:function(){var M=R.shift();return{done:M===void 0,value:M}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function g(R){this.map={},R instanceof g?R.forEach(function(N,M){this.append(M,N)},this):Array.isArray(R)?R.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(N){this.append(N,R[N])},this)}g.prototype.append=function(R,N){R=h(R),N=f(N);var M=this.map[R];this.map[R]=M?M+", "+N:N},g.prototype.delete=function(R){delete this.map[h(R)]},g.prototype.get=function(R){return R=h(R),this.has(R)?this.map[R]:null},g.prototype.has=function(R){return this.map.hasOwnProperty(h(R))},g.prototype.set=function(R,N){this.map[h(R)]=f(N)},g.prototype.forEach=function(R,N){for(var M in this.map)this.map.hasOwnProperty(M)&&R.call(N,this.map[M],M,this)},g.prototype.keys=function(){var R=[];return this.forEach(function(N,M){R.push(M)}),p(R)},g.prototype.values=function(){var R=[];return this.forEach(function(N){R.push(N)}),p(R)},g.prototype.entries=function(){var R=[];return this.forEach(function(N,M){R.push([M,N])}),p(R)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function y(R){if(!R._noBody){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}}function m(R){return new Promise(function(N,M){R.onload=function(){N(R.result)},R.onerror=function(){M(R.error)}})}function b(R){var N=new FileReader,M=m(N);return N.readAsArrayBuffer(R),M}function v(R){var N=new FileReader,M=m(N),P=/charset=([A-Za-z0-9_-]+)/.exec(R.type),D=P?P[1]:"utf-8";return N.readAsText(R,D),M}function A(R){for(var N=new Uint8Array(R),M=new Array(N.length),P=0;P<N.length;P++)M[P]=String.fromCharCode(N[P]);return M.join("")}function C(R){if(R.slice)return R.slice(0);var N=new Uint8Array(R.byteLength);return N.set(new Uint8Array(R)),N.buffer}function S(){return this.bodyUsed=!1,this._initBody=function(R){this.bodyUsed=this.bodyUsed,this._bodyInit=R,R?typeof R=="string"?this._bodyText=R:c.blob&&Blob.prototype.isPrototypeOf(R)?this._bodyBlob=R:c.formData&&FormData.prototype.isPrototypeOf(R)?this._bodyFormData=R:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)?this._bodyText=R.toString():c.arrayBuffer&&c.blob&&l(R)?(this._bodyArrayBuffer=C(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(R)||d(R))?this._bodyArrayBuffer=C(R):this._bodyText=R=Object.prototype.toString.call(R):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var R=y(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var R=y(this);return R||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var R=y(this);if(R)return R;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(R){var N=R.toUpperCase();return x.indexOf(N)>-1?N:R}function I(R,N){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var M=N.body;if(R instanceof I){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,N.headers||(this.headers=new g(R.headers)),this.method=R.method,this.mode=R.mode,this.signal=R.signal,!M&&R._bodyInit!=null&&(M=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new g(N.headers)),this.method=T(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in a){var F=new AbortController;return F.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var P=/([?&])_=[^&]*/;if(P.test(this.url))this.url=this.url.replace(P,"$1_="+new Date().getTime());else{var D=/\?/;this.url+=(D.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})};function k(R){var N=new FormData;return R.trim().split("&").forEach(function(M){if(M){var P=M.split("="),D=P.shift().replace(/\+/g," "),F=P.join("=").replace(/\+/g," ");N.append(decodeURIComponent(D),decodeURIComponent(F))}}),N}function O(R){var N=new g,M=R.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(P){return P.indexOf(`
`)===0?P.substr(1,P.length):P}).forEach(function(P){var D=P.split(":"),F=D.shift().trim();if(F){var H=D.join(":").trim();try{N.append(F,H)}catch(te){console.warn("Response "+te.message)}}}),N}S.call(I.prototype);function B(R,N){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new g(N.headers),this.url=N.url||"",this._initBody(R)}S.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},B.error=function(){var R=new B(null,{status:200,statusText:""});return R.ok=!1,R.status=0,R.type="error",R};var G=[301,302,303,307,308];B.redirect=function(R,N){if(G.indexOf(N)===-1)throw new RangeError("Invalid status code");return new B(null,{status:N,headers:{location:R}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(N,M){this.message=N,this.name=M;var P=Error(N);this.stack=P.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function W(R,N){return new Promise(function(M,P){var D=new I(R,N);if(D.signal&&D.signal.aborted)return P(new o.DOMException("Aborted","AbortError"));var F=new XMLHttpRequest;function H(){F.abort()}F.onload=function(){var ie={statusText:F.statusText,headers:O(F.getAllResponseHeaders()||"")};D.url.indexOf("file://")===0&&(F.status<200||F.status>599)?ie.status=200:ie.status=F.status,ie.url="responseURL"in F?F.responseURL:ie.headers.get("X-Request-URL");var le="response"in F?F.response:F.responseText;setTimeout(function(){M(new B(le,ie))},0)},F.onerror=function(){setTimeout(function(){P(new TypeError("Network request failed"))},0)},F.ontimeout=function(){setTimeout(function(){P(new TypeError("Network request timed out"))},0)},F.onabort=function(){setTimeout(function(){P(new o.DOMException("Aborted","AbortError"))},0)};function te(ie){try{return ie===""&&a.location.href?a.location.href:ie}catch{return ie}}if(F.open(D.method,te(D.url),!0),D.credentials==="include"?F.withCredentials=!0:D.credentials==="omit"&&(F.withCredentials=!1),"responseType"in F&&(c.blob?F.responseType="blob":c.arrayBuffer&&(F.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof g||a.Headers&&N.headers instanceof a.Headers)){var re=[];Object.getOwnPropertyNames(N.headers).forEach(function(ie){re.push(h(ie)),F.setRequestHeader(ie,f(N.headers[ie]))}),D.headers.forEach(function(ie,le){re.indexOf(le)===-1&&F.setRequestHeader(le,ie)})}else D.headers.forEach(function(ie,le){F.setRequestHeader(le,ie)});D.signal&&(D.signal.addEventListener("abort",H),F.onreadystatechange=function(){F.readyState===4&&D.signal.removeEventListener("abort",H)}),F.send(typeof D._bodyInit>"u"?null:D._bodyInit)})}return W.polyfill=!0,a.fetch||(a.fetch=W,a.Headers=g,a.Request=I,a.Response=B),o.Headers=g,o.Request=I,o.Response=B,o.fetch=W,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(zD,zD.exports);var IRe=zD.exports;const eF=Gg(IRe);var xRe=Object.defineProperty,NRe=Object.defineProperties,TRe=Object.getOwnPropertyDescriptors,tF=Object.getOwnPropertySymbols,RRe=Object.prototype.hasOwnProperty,PRe=Object.prototype.propertyIsEnumerable,nF=(t,e,n)=>e in t?xRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rF=(t,e)=>{for(var n in e||(e={}))RRe.call(e,n)&&nF(t,n,e[n]);if(tF)for(var n of tF(e))PRe.call(e,n)&&nF(t,n,e[n]);return t},sF=(t,e)=>NRe(t,TRe(e));const ORe={Accept:"application/json","Content-Type":"application/json"},kRe="POST",iF={headers:ORe,method:kRe},oF=10;let Pc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Da.EventEmitter,this.isAvailable=!1,this.registering=!1,!Q4(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=ed(e),r=await(await eF(this.url,sF(rF({},iF),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!Q4(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=ed({id:1,jsonrpc:"2.0",method:"test",params:[]});await eF(e,sF(rF({},iF),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Tg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=JN(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return PJ(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>oF&&this.events.setMaxListeners(oF)}};const Xv={getSIWX(){return _e.state.siwx},async initializeIfEnabled(){var i;const t=_e.state.siwx,e=z.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(z.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await ls.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=pt._getClient())==null?void 0:i.disconnect().catch(console.error)),Dt.reset("Connect"),fc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=_e.state.siwx,e=it.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork(),r=pt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Fe.getConnectorId(n.chainNamespace)===je.CONNECTOR_ID.AUTH&&Dt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),ls.close(),or.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!ls.state.open||Dt.state.view==="ApproveTransaction")&&await ls.open({view:"SIWXSignMessage"}),i.isSmartAccount?fc.showError("This application might not support Smart Accounts"):fc.showError("Signature declined"),or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await pt.disconnect():ls.close(),Dt.reset("Connect"),or.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=_e.state.siwx,e=it.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Dt.state.view==="ApproveTransaction",r=Dt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Xv.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=z.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(fc.showLoading("Authenticating...",{autoClose:!1}),Ye.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),or.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Xv.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),or.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Xv.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{fc.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=z.state.activeChain;return{network:((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ye.state.preferredAccountTypes)==null?void 0:n[t])===Ts.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function uA(t,e){return Fe.getConnectorId(t)===e}function DRe(t){const e=Array.from(z.state.chains.keys());let n=[];return t?(n.push([t,z.state.chains.get(t)]),uA(t,je.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&uA(r,je.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,z.state.chains.get(r)])}):uA(t,je.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&uA(r,je.CONNECTOR_ID.AUTH)&&n.push([r,z.state.chains.get(r)])})):n=Array.from(z.state.chains.entries()),n}const Wi={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},FI={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[je.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[je.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[je.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[je.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[je.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[je.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[je.CONNECTOR_ID.INJECTED]:"Browser Wallet",[je.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[je.CONNECTOR_ID.COINBASE]:"Coinbase",[je.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[je.CONNECTOR_ID.LEDGER]:"Ledger",[je.CONNECTOR_ID.SAFE]:"Safe"}},XN={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Wi.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},MRe=new AbortController,hl={EmbeddedWalletAbortController:MRe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${LRe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function LRe(){return typeof window<"u"}const URe={createLogger(t,e="error"){const n=am({level:e}),{logger:r}=GN({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},$Re="rpc.walletconnect.org";function aF(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const zP=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Zm={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===$Re}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:je.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${je.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return zP.includes(e)?aF(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:FI.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Zm.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ih(a.url,a.config))}),zP.includes(t.caipNetworkId)&&r.push(Ih(aF(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ih(a))}),RI(r)},extendWagmiTransports(t,e,n){if(zP.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return RI([n,Ih(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:je.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Qe.getActiveCaipNetworkId(),n=z.getAllRequestedCaipNetworks(),r=Array.from(((c=z.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},jI={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ri=er({providers:{...jI},providerIds:{...jI}}),Rn={state:Ri,subscribeKey(t,e){return Xs(Ri,t,e)},subscribe(t){return Js(Ri,()=>{t(Ri)})},subscribeProviders(t){return Js(Ri.providers,()=>t(Ri.providers))},setProvider(t,e){e&&(Ri.providers[t]=xg(e))},getProvider(t){return Ri.providers[t]},setProviderId(t,e){e&&(Ri.providerIds[t]=e)},getProviderId(t){if(t)return Ri.providerIds[t]},reset(){Ri.providers={...jI},Ri.providerIds={...jI}},resetChain(t){Ri.providers[t]=void 0,Ri.providerIds[t]=void 0}},cF={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},vs={set(t,e){ko.isClient&&localStorage.setItem(`${Ve.STORAGE_KEY}${t}`,e)},get(t){return ko.isClient?localStorage.getItem(`${Ve.STORAGE_KEY}${t}`):null},delete(t,e){ko.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ve.STORAGE_KEY}${t}`))}},dA=30*1e3,ko={checkIfAllowedToTriggerEmail(){const t=vs.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<dA){const n=Math.ceil((dA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=vs.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<dA)return Math.ceil((dA-e)/1e3)}return 0},checkIfRequestExists(t){return Ts.NOT_SAFE_RPC_METHODS.includes(t.method)||Ts.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(cF.transactionHash))||(t==null?void 0:t.match(cF.signedMessage)))?Ve.RPC_RESPONSE_TYPE_TX:Ve.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ts.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var un;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(un||(un={}));var WD;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(WD||(WD={}));const Ue=un.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Kd=t=>{switch(typeof t){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return isNaN(t)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(t)?Ue.array:t===null?Ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ue.promise:typeof Map<"u"&&t instanceof Map?Ue.map:typeof Set<"u"&&t instanceof Set?Ue.set:typeof Date<"u"&&t instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},xe=un.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),BRe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class _c extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,un.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}_c.create=t=>new _c(t);const f_=(t,e)=>{let n;switch(t.code){case xe.invalid_type:t.received===Ue.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case xe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,un.jsonStringifyReplacer)}`;break;case xe.unrecognized_keys:n=`Unrecognized key(s) in object: ${un.joinValues(t.keys,", ")}`;break;case xe.invalid_union:n="Invalid input";break;case xe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${un.joinValues(t.options)}`;break;case xe.invalid_enum_value:n=`Invalid enum value. Expected ${un.joinValues(t.options)}, received '${t.received}'`;break;case xe.invalid_arguments:n="Invalid function arguments";break;case xe.invalid_return_type:n="Invalid function return type";break;case xe.invalid_date:n="Invalid date";break;case xe.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:un.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case xe.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case xe.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case xe.custom:n="Invalid input";break;case xe.invalid_intersection_types:n="Intersection results could not be merged";break;case xe.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case xe.not_finite:n="Number must be finite";break;default:n=e.defaultError,un.assertNever(t)}return{message:n}};let LJ=f_;function FRe(t){LJ=t}function zI(){return LJ}const WI=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},jRe=[];function He(t,e){const n=WI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,zI(),f_].filter(r=>!!r)});t.common.issues.push(n)}class Zs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return St;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return Zs.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return St;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const St=Object.freeze({status:"aborted"}),UJ=t=>({status:"dirty",value:t}),Ei=t=>({status:"valid",value:t}),HD=t=>t.status==="aborted",GD=t=>t.status==="dirty",p_=t=>t.status==="valid",HI=t=>typeof Promise<"u"&&t instanceof Promise;var at;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(at||(at={}));class Ul{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const lF=(t,e)=>{if(p_(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new _c(t.common.issues);return this._error=n,this._error}}};function Rt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Mt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Kd(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Kd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Zs,ctx:{common:e.parent.common,data:e.data,parsedType:Kd(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(HI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Kd(e)},i=this._parseSync({data:e,path:s.path,parent:s});return lF(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Kd(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(HI(s)?s:Promise.resolve(s));return lF(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:xe.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Nc({schema:this,typeName:bt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Bu.create(this,this._def)}nullable(){return kg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Cc.create(this,this._def)}promise(){return m0.create(this,this._def)}or(e){return w_.create([this,e],this._def)}and(e){return b_.create(this,e,this._def)}transform(e){return new Nc({...Rt(this._def),schema:this,typeName:bt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new A_({...Rt(this._def),innerType:this,defaultValue:n,typeName:bt.ZodDefault})}brand(){return new BJ({typeName:bt.ZodBranded,type:this,...Rt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new KI({...Rt(this._def),innerType:this,catchValue:n,typeName:bt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return qC.create(this,e)}readonly(){return QI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const zRe=/^c[^\s-]{8,}$/i,WRe=/^[a-z][a-z0-9]*$/,HRe=/^[0-9A-HJKMNP-TV-Z]{26}$/,GRe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,qRe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,VRe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let WP;const KRe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,YRe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,QRe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function JRe(t,e){return!!((e==="v4"||!e)&&KRe.test(t)||(e==="v6"||!e)&&YRe.test(t))}class yc extends Mt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ue.string){const i=this._getOrReturnCtx(e);return He(i,{code:xe.invalid_type,expected:Ue.string,received:i.parsedType}),St}const r=new Zs;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:xe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:xe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?He(s,{code:xe.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&He(s,{code:xe.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")qRe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"email",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")WP||(WP=new RegExp(VRe,"u")),WP.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"emoji",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")GRe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"uuid",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")zRe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"cuid",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")WRe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"cuid2",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")HRe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"ulid",code:xe.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),He(s,{validation:"url",code:xe.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"regex",code:xe.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),He(s,{code:xe.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),He(s,{code:xe.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),He(s,{code:xe.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?QRe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{code:xe.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?JRe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"ip",code:xe.invalid_string,message:i.message}),r.dirty()):un.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:xe.invalid_string,...at.errToObj(r)})}_addCheck(e){return new yc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...at.errToObj(e)})}url(e){return this._addCheck({kind:"url",...at.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...at.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...at.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...at.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...at.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...at.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...at.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...at.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...at.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...at.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...at.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...at.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...at.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...at.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...at.errToObj(n)})}nonempty(e){return this.min(1,at.errToObj(e))}trim(){return new yc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new yc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new yc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}yc.create=t=>{var e;return new yc({checks:[],typeName:bt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Rt(t)})};function ZRe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class hf extends Mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ue.number){const i=this._getOrReturnCtx(e);return He(i,{code:xe.invalid_type,expected:Ue.number,received:i.parsedType}),St}let r;const s=new Zs;for(const i of this._def.checks)i.kind==="int"?un.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:xe.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:xe.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:xe.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?ZRe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),He(r,{code:xe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:xe.not_finite,message:i.message}),s.dirty()):un.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,at.toString(n))}gt(e,n){return this.setLimit("min",e,!1,at.toString(n))}lte(e,n){return this.setLimit("max",e,!0,at.toString(n))}lt(e,n){return this.setLimit("max",e,!1,at.toString(n))}setLimit(e,n,r,s){return new hf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:at.toString(s)}]})}_addCheck(e){return new hf({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:at.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:at.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:at.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:at.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:at.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:at.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:at.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:at.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:at.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&un.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}hf.create=t=>new hf({checks:[],typeName:bt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Rt(t)});class ff extends Mt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ue.bigint){const i=this._getOrReturnCtx(e);return He(i,{code:xe.invalid_type,expected:Ue.bigint,received:i.parsedType}),St}let r;const s=new Zs;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:xe.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:xe.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),He(r,{code:xe.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):un.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,at.toString(n))}gt(e,n){return this.setLimit("min",e,!1,at.toString(n))}lte(e,n){return this.setLimit("max",e,!0,at.toString(n))}lt(e,n){return this.setLimit("max",e,!1,at.toString(n))}setLimit(e,n,r,s){return new ff({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:at.toString(s)}]})}_addCheck(e){return new ff({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:at.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:at.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:at.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:at.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:at.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ff.create=t=>{var e;return new ff({checks:[],typeName:bt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Rt(t)})};class g_ extends Mt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ue.boolean){const r=this._getOrReturnCtx(e);return He(r,{code:xe.invalid_type,expected:Ue.boolean,received:r.parsedType}),St}return Ei(e.data)}}g_.create=t=>new g_({typeName:bt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Rt(t)});class Pg extends Mt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ue.date){const i=this._getOrReturnCtx(e);return He(i,{code:xe.invalid_type,expected:Ue.date,received:i.parsedType}),St}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return He(i,{code:xe.invalid_date}),St}const r=new Zs;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:xe.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:xe.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):un.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Pg({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:at.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:at.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Pg.create=t=>new Pg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:bt.ZodDate,...Rt(t)});class GI extends Mt{_parse(e){if(this._getType(e)!==Ue.symbol){const r=this._getOrReturnCtx(e);return He(r,{code:xe.invalid_type,expected:Ue.symbol,received:r.parsedType}),St}return Ei(e.data)}}GI.create=t=>new GI({typeName:bt.ZodSymbol,...Rt(t)});class m_ extends Mt{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return He(r,{code:xe.invalid_type,expected:Ue.undefined,received:r.parsedType}),St}return Ei(e.data)}}m_.create=t=>new m_({typeName:bt.ZodUndefined,...Rt(t)});class y_ extends Mt{_parse(e){if(this._getType(e)!==Ue.null){const r=this._getOrReturnCtx(e);return He(r,{code:xe.invalid_type,expected:Ue.null,received:r.parsedType}),St}return Ei(e.data)}}y_.create=t=>new y_({typeName:bt.ZodNull,...Rt(t)});class g0 extends Mt{constructor(){super(...arguments),this._any=!0}_parse(e){return Ei(e.data)}}g0.create=t=>new g0({typeName:bt.ZodAny,...Rt(t)});class ng extends Mt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ei(e.data)}}ng.create=t=>new ng({typeName:bt.ZodUnknown,...Rt(t)});class td extends Mt{_parse(e){const n=this._getOrReturnCtx(e);return He(n,{code:xe.invalid_type,expected:Ue.never,received:n.parsedType}),St}}td.create=t=>new td({typeName:bt.ZodNever,...Rt(t)});class qI extends Mt{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return He(r,{code:xe.invalid_type,expected:Ue.void,received:r.parsedType}),St}return Ei(e.data)}}qI.create=t=>new qI({typeName:bt.ZodVoid,...Rt(t)});class Cc extends Mt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ue.array)return He(n,{code:xe.invalid_type,expected:Ue.array,received:n.parsedType}),St;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(He(n,{code:o?xe.too_big:xe.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(He(n,{code:xe.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(He(n,{code:xe.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Ul(n,o,n.path,a)))).then(o=>Zs.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Ul(n,o,n.path,a)));return Zs.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Cc({...this._def,minLength:{value:e,message:at.toString(n)}})}max(e,n){return new Cc({...this._def,maxLength:{value:e,message:at.toString(n)}})}length(e,n){return new Cc({...this._def,exactLength:{value:e,message:at.toString(n)}})}nonempty(e){return this.min(1,e)}}Cc.create=(t,e)=>new Cc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:bt.ZodArray,...Rt(e)});function Xm(t){if(t instanceof ar){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Bu.create(Xm(r))}return new ar({...t._def,shape:()=>e})}else return t instanceof Cc?new Cc({...t._def,type:Xm(t.element)}):t instanceof Bu?Bu.create(Xm(t.unwrap())):t instanceof kg?kg.create(Xm(t.unwrap())):t instanceof $l?$l.create(t.items.map(e=>Xm(e))):t}class ar extends Mt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=un.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ue.object){const l=this._getOrReturnCtx(e);return He(l,{code:xe.invalid_type,expected:Ue.object,received:l.parsedType}),St}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof td&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ul(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof td){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(He(s,{code:xe.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ul(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>Zs.mergeObjectSync(r,l)):Zs.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return at.errToObj,new ar({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=at.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new ar({...this._def,unknownKeys:"strip"})}passthrough(){return new ar({...this._def,unknownKeys:"passthrough"})}extend(e){return new ar({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ar({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:bt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new ar({...this._def,catchall:e})}pick(e){const n={};return un.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new ar({...this._def,shape:()=>n})}omit(e){const n={};return un.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new ar({...this._def,shape:()=>n})}deepPartial(){return Xm(this)}partial(e){const n={};return un.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new ar({...this._def,shape:()=>n})}required(e){const n={};return un.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Bu;)i=i._def.innerType;n[r]=i}}),new ar({...this._def,shape:()=>n})}keyof(){return $J(un.objectKeys(this.shape))}}ar.create=(t,e)=>new ar({shape:()=>t,unknownKeys:"strip",catchall:td.create(),typeName:bt.ZodObject,...Rt(e)});ar.strictCreate=(t,e)=>new ar({shape:()=>t,unknownKeys:"strict",catchall:td.create(),typeName:bt.ZodObject,...Rt(e)});ar.lazycreate=(t,e)=>new ar({shape:t,unknownKeys:"strip",catchall:td.create(),typeName:bt.ZodObject,...Rt(e)});class w_ extends Mt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new _c(a.ctx.common.issues));return He(n,{code:xe.invalid_union,unionErrors:o}),St}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new _c(c));return He(n,{code:xe.invalid_union,unionErrors:a}),St}}get options(){return this._def.options}}w_.create=(t,e)=>new w_({options:t,typeName:bt.ZodUnion,...Rt(e)});const cS=t=>t instanceof E_?cS(t.schema):t instanceof Nc?cS(t.innerType()):t instanceof __?[t.value]:t instanceof pf?t.options:t instanceof C_?Object.keys(t.enum):t instanceof A_?cS(t._def.innerType):t instanceof m_?[void 0]:t instanceof y_?[null]:null;class eT extends Mt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.object)return He(n,{code:xe.invalid_type,expected:Ue.object,received:n.parsedType}),St;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(He(n,{code:xe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),St)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=cS(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new eT({typeName:bt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Rt(r)})}}function qD(t,e){const n=Kd(t),r=Kd(e);if(t===e)return{valid:!0,data:t};if(n===Ue.object&&r===Ue.object){const s=un.objectKeys(e),i=un.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=qD(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Ue.array&&r===Ue.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=qD(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Ue.date&&r===Ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class b_ extends Mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(HD(i)||HD(o))return St;const a=qD(i.value,o.value);return a.valid?((GD(i)||GD(o))&&n.dirty(),{status:n.value,value:a.data}):(He(r,{code:xe.invalid_intersection_types}),St)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}b_.create=(t,e,n)=>new b_({left:t,right:e,typeName:bt.ZodIntersection,...Rt(n)});class $l extends Mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.array)return He(r,{code:xe.invalid_type,expected:Ue.array,received:r.parsedType}),St;if(r.data.length<this._def.items.length)return He(r,{code:xe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),St;!this._def.rest&&r.data.length>this._def.items.length&&(He(r,{code:xe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Ul(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Zs.mergeArray(n,o)):Zs.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new $l({...this._def,rest:e})}}$l.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $l({items:t,typeName:bt.ZodTuple,rest:null,...Rt(e)})};class v_ extends Mt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.object)return He(r,{code:xe.invalid_type,expected:Ue.object,received:r.parsedType}),St;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Ul(r,a,r.path,a)),value:o._parse(new Ul(r,r.data[a],r.path,a))});return r.common.async?Zs.mergeObjectAsync(n,s):Zs.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Mt?new v_({keyType:e,valueType:n,typeName:bt.ZodRecord,...Rt(r)}):new v_({keyType:yc.create(),valueType:e,typeName:bt.ZodRecord,...Rt(n)})}}class VI extends Mt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.map)return He(r,{code:xe.invalid_type,expected:Ue.map,received:r.parsedType}),St;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Ul(r,a,r.path,[l,"key"])),value:i._parse(new Ul(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return St;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return St;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}VI.create=(t,e,n)=>new VI({valueType:e,keyType:t,typeName:bt.ZodMap,...Rt(n)});class Og extends Mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.set)return He(r,{code:xe.invalid_type,expected:Ue.set,received:r.parsedType}),St;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(He(r,{code:xe.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(He(r,{code:xe.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return St;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Ul(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Og({...this._def,minSize:{value:e,message:at.toString(n)}})}max(e,n){return new Og({...this._def,maxSize:{value:e,message:at.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Og.create=(t,e)=>new Og({valueType:t,minSize:null,maxSize:null,typeName:bt.ZodSet,...Rt(e)});class Fy extends Mt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.function)return He(n,{code:xe.invalid_type,expected:Ue.function,received:n.parsedType}),St;function r(a,c){return WI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,zI(),f_].filter(l=>!!l),issueData:{code:xe.invalid_arguments,argumentsError:c}})}function s(a,c){return WI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,zI(),f_].filter(l=>!!l),issueData:{code:xe.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof m0){const a=this;return Ei(async function(...c){const l=new _c([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Ei(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new _c([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new _c([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Fy({...this._def,args:$l.create(e).rest(ng.create())})}returns(e){return new Fy({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Fy({args:e||$l.create([]).rest(ng.create()),returns:n||ng.create(),typeName:bt.ZodFunction,...Rt(r)})}}class E_ extends Mt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}E_.create=(t,e)=>new E_({getter:t,typeName:bt.ZodLazy,...Rt(e)});class __ extends Mt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return He(n,{received:n.data,code:xe.invalid_literal,expected:this._def.value}),St}return{status:"valid",value:e.data}}get value(){return this._def.value}}__.create=(t,e)=>new __({value:t,typeName:bt.ZodLiteral,...Rt(e)});function $J(t,e){return new pf({values:t,typeName:bt.ZodEnum,...Rt(e)})}class pf extends Mt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return He(n,{expected:un.joinValues(r),received:n.parsedType,code:xe.invalid_type}),St}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return He(n,{received:n.data,code:xe.invalid_enum_value,options:r}),St}return Ei(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return pf.create(e)}exclude(e){return pf.create(this.options.filter(n=>!e.includes(n)))}}pf.create=$J;class C_ extends Mt{_parse(e){const n=un.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ue.string&&r.parsedType!==Ue.number){const s=un.objectValues(n);return He(r,{expected:un.joinValues(s),received:r.parsedType,code:xe.invalid_type}),St}if(n.indexOf(e.data)===-1){const s=un.objectValues(n);return He(r,{received:r.data,code:xe.invalid_enum_value,options:s}),St}return Ei(e.data)}get enum(){return this._def.values}}C_.create=(t,e)=>new C_({values:t,typeName:bt.ZodNativeEnum,...Rt(e)});class m0 extends Mt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.promise&&n.common.async===!1)return He(n,{code:xe.invalid_type,expected:Ue.promise,received:n.parsedType}),St;const r=n.parsedType===Ue.promise?n.data:Promise.resolve(n.data);return Ei(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}m0.create=(t,e)=>new m0({type:t,typeName:bt.ZodPromise,...Rt(e)});class Nc extends Mt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===bt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{He(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?St:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?St:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!p_(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>p_(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);un.assertNever(s)}}Nc.create=(t,e,n)=>new Nc({schema:t,typeName:bt.ZodEffects,effect:e,...Rt(n)});Nc.createWithPreprocess=(t,e,n)=>new Nc({schema:e,effect:{type:"preprocess",transform:t},typeName:bt.ZodEffects,...Rt(n)});class Bu extends Mt{_parse(e){return this._getType(e)===Ue.undefined?Ei(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Bu.create=(t,e)=>new Bu({innerType:t,typeName:bt.ZodOptional,...Rt(e)});class kg extends Mt{_parse(e){return this._getType(e)===Ue.null?Ei(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}kg.create=(t,e)=>new kg({innerType:t,typeName:bt.ZodNullable,...Rt(e)});class A_ extends Mt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ue.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}A_.create=(t,e)=>new A_({innerType:t,typeName:bt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Rt(e)});class KI extends Mt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return HI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new _c(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new _c(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}KI.create=(t,e)=>new KI({innerType:t,typeName:bt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Rt(e)});class YI extends Mt{_parse(e){if(this._getType(e)!==Ue.nan){const r=this._getOrReturnCtx(e);return He(r,{code:xe.invalid_type,expected:Ue.nan,received:r.parsedType}),St}return{status:"valid",value:e.data}}}YI.create=t=>new YI({typeName:bt.ZodNaN,...Rt(t)});const XRe=Symbol("zod_brand");class BJ extends Mt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class qC extends Mt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?St:i.status==="dirty"?(n.dirty(),UJ(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?St:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new qC({in:e,out:n,typeName:bt.ZodPipeline})}}class QI extends Mt{_parse(e){const n=this._def.innerType._parse(e);return p_(n)&&(n.value=Object.freeze(n.value)),n}}QI.create=(t,e)=>new QI({innerType:t,typeName:bt.ZodReadonly,...Rt(e)});const FJ=(t,e={},n)=>t?g0.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):g0.create(),ePe={object:ar.lazycreate};var bt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(bt||(bt={}));const tPe=(t,e={message:`Input not instance of ${t.name}`})=>FJ(n=>n instanceof t,e),jJ=yc.create,zJ=hf.create,nPe=YI.create,rPe=ff.create,WJ=g_.create,sPe=Pg.create,iPe=GI.create,oPe=m_.create,aPe=y_.create,cPe=g0.create,lPe=ng.create,uPe=td.create,dPe=qI.create,hPe=Cc.create,fPe=ar.create,pPe=ar.strictCreate,gPe=w_.create,mPe=eT.create,yPe=b_.create,wPe=$l.create,bPe=v_.create,vPe=VI.create,EPe=Og.create,_Pe=Fy.create,CPe=E_.create,APe=__.create,SPe=pf.create,IPe=C_.create,xPe=m0.create,uF=Nc.create,NPe=Bu.create,TPe=kg.create,RPe=Nc.createWithPreprocess,PPe=qC.create,OPe=()=>jJ().optional(),kPe=()=>zJ().optional(),DPe=()=>WJ().optional(),MPe={string:t=>yc.create({...t,coerce:!0}),number:t=>hf.create({...t,coerce:!0}),boolean:t=>g_.create({...t,coerce:!0}),bigint:t=>ff.create({...t,coerce:!0}),date:t=>Pg.create({...t,coerce:!0})},LPe=St;var E=Object.freeze({__proto__:null,defaultErrorMap:f_,setErrorMap:FRe,getErrorMap:zI,makeIssue:WI,EMPTY_PATH:jRe,addIssueToContext:He,ParseStatus:Zs,INVALID:St,DIRTY:UJ,OK:Ei,isAborted:HD,isDirty:GD,isValid:p_,isAsync:HI,get util(){return un},get objectUtil(){return WD},ZodParsedType:Ue,getParsedType:Kd,ZodType:Mt,ZodString:yc,ZodNumber:hf,ZodBigInt:ff,ZodBoolean:g_,ZodDate:Pg,ZodSymbol:GI,ZodUndefined:m_,ZodNull:y_,ZodAny:g0,ZodUnknown:ng,ZodNever:td,ZodVoid:qI,ZodArray:Cc,ZodObject:ar,ZodUnion:w_,ZodDiscriminatedUnion:eT,ZodIntersection:b_,ZodTuple:$l,ZodRecord:v_,ZodMap:VI,ZodSet:Og,ZodFunction:Fy,ZodLazy:E_,ZodLiteral:__,ZodEnum:pf,ZodNativeEnum:C_,ZodPromise:m0,ZodEffects:Nc,ZodTransformer:Nc,ZodOptional:Bu,ZodNullable:kg,ZodDefault:A_,ZodCatch:KI,ZodNaN:YI,BRAND:XRe,ZodBranded:BJ,ZodPipeline:qC,ZodReadonly:QI,custom:FJ,Schema:Mt,ZodSchema:Mt,late:ePe,get ZodFirstPartyTypeKind(){return bt},coerce:MPe,any:cPe,array:hPe,bigint:rPe,boolean:WJ,date:sPe,discriminatedUnion:mPe,effect:uF,enum:SPe,function:_Pe,instanceof:tPe,intersection:yPe,lazy:CPe,literal:APe,map:vPe,nan:nPe,nativeEnum:IPe,never:uPe,null:aPe,nullable:TPe,number:zJ,object:fPe,oboolean:DPe,onumber:kPe,optional:NPe,ostring:OPe,pipeline:PPe,preprocess:RPe,promise:xPe,record:bPe,set:EPe,strictObject:pPe,string:jJ,symbol:iPe,transformer:uF,tuple:wPe,undefined:oPe,union:gPe,unknown:lPe,void:dPe,NEVER:LPe,ZodIssueCode:xe,quotelessJson:BRe,ZodError:_c});const gr=E.object({message:E.string()});function ze(t){return E.literal(Ve[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const UPe=E.object({chainId:E.string().or(E.number())}),$Pe=E.object({email:E.string().email()}),BPe=E.object({otp:E.string()}),FPe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),jPe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),zPe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),WPe=E.object({email:E.string().email()}),HPe=E.object({otp:E.string()}),GPe=E.object({otp:E.string()}),qPe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),VPe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),KPe=E.object({type:E.string()}),YPe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),QPe=E.object({url:E.string()}),JPe=E.object({userName:E.string()}),ZPe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ts.ACCOUNT_TYPES.EOA,Ts.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),XPe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),eOe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ts.ACCOUNT_TYPES.EOA,Ts.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),tOe=E.object({uri:E.string()}),nOe=E.object({isConnected:E.boolean()}),rOe=E.object({chainId:E.string().or(E.number())}),sOe=E.object({chainId:E.string().or(E.number())}),iOe=E.object({newEmail:E.string().email()}),oOe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const aOe=E.object({version:E.string().optional()}),cOe=E.object({type:E.string(),address:E.string()}),lOe=E.any(),uOe=E.object({method:E.literal("eth_accounts")}),dOe=E.object({method:E.literal("eth_blockNumber")}),hOe=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),fOe=E.object({method:E.literal("eth_chainId")}),pOe=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),gOe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),mOe=E.object({method:E.literal("eth_gasPrice")}),yOe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),wOe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),bOe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),vOe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),EOe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),_Oe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),COe=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),AOe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),SOe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),IOe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),xOe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),NOe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),TOe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),ROe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),POe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),OOe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),kOe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),DOe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),MOe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),LOe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),UOe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),$Oe=E.object({method:E.literal("eth_newBlockFilter")}),BOe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),FOe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),jOe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),zOe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),WOe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),dF=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),HOe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),GOe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),qOe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),VOe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),KOe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),YOe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),QOe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),JOe=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),ZOe=E.object({method:E.literal("wallet_getCapabilities")}),XOe=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),e2e=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),t2e=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),hF=E.object({token:E.string()}),We=E.object({id:E.string().optional()}),Wb={appEvent:We.extend({type:ze("APP_SWITCH_NETWORK"),payload:UPe}).or(We.extend({type:ze("APP_CONNECT_EMAIL"),payload:$Pe})).or(We.extend({type:ze("APP_CONNECT_DEVICE")})).or(We.extend({type:ze("APP_CONNECT_OTP"),payload:BPe})).or(We.extend({type:ze("APP_CONNECT_SOCIAL"),payload:FPe})).or(We.extend({type:ze("APP_GET_FARCASTER_URI")})).or(We.extend({type:ze("APP_CONNECT_FARCASTER")})).or(We.extend({type:ze("APP_GET_USER"),payload:E.optional(jPe)})).or(We.extend({type:ze("APP_GET_SOCIAL_REDIRECT_URI"),payload:zPe})).or(We.extend({type:ze("APP_SIGN_OUT")})).or(We.extend({type:ze("APP_IS_CONNECTED"),payload:E.optional(hF)})).or(We.extend({type:ze("APP_GET_CHAIN_ID")})).or(We.extend({type:ze("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(We.extend({type:ze("APP_INIT_SMART_ACCOUNT")})).or(We.extend({type:ze("APP_SET_PREFERRED_ACCOUNT"),payload:KPe})).or(We.extend({type:ze("APP_RPC_REQUEST"),payload:dF.or(t2e).or(uOe).or(dOe).or(hOe).or(fOe).or(pOe).or(gOe).or(mOe).or(yOe).or(wOe).or(bOe).or(vOe).or(EOe).or(_Oe).or(COe).or(AOe).or(SOe).or(IOe).or(xOe).or(NOe).or(TOe).or(ROe).or(POe).or(OOe).or(kOe).or(DOe).or(MOe).or(LOe).or(UOe).or($Oe).or(BOe).or(FOe).or(jOe).or(zOe).or(WOe).or(dF).or(HOe).or(GOe).or(qOe).or(VOe).or(KOe).or(YOe).or(JOe).or(QOe).or(ZOe).or(XOe).or(e2e)})).or(We.extend({type:ze("APP_UPDATE_EMAIL"),payload:WPe})).or(We.extend({type:ze("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:HPe})).or(We.extend({type:ze("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:GPe})).or(We.extend({type:ze("APP_SYNC_THEME"),payload:qPe})).or(We.extend({type:ze("APP_SYNC_DAPP_DATA"),payload:VPe})).or(We.extend({type:ze("APP_RELOAD")})),frameEvent:We.extend({type:ze("FRAME_SWITCH_NETWORK_ERROR"),payload:gr}).or(We.extend({type:ze("FRAME_SWITCH_NETWORK_SUCCESS"),payload:sOe})).or(We.extend({type:ze("FRAME_CONNECT_EMAIL_SUCCESS"),payload:YPe})).or(We.extend({type:ze("FRAME_CONNECT_EMAIL_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:QPe})).or(We.extend({type:ze("FRAME_GET_FARCASTER_URI_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:JPe})).or(We.extend({type:ze("FRAME_CONNECT_FARCASTER_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_CONNECT_OTP_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_CONNECT_OTP_SUCCESS")})).or(We.extend({type:ze("FRAME_CONNECT_DEVICE_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_CONNECT_DEVICE_SUCCESS")})).or(We.extend({type:ze("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:ZPe})).or(We.extend({type:ze("FRAME_CONNECT_SOCIAL_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_GET_USER_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_GET_USER_SUCCESS"),payload:eOe})).or(We.extend({type:ze("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:tOe})).or(We.extend({type:ze("FRAME_SIGN_OUT_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_SIGN_OUT_SUCCESS")})).or(We.extend({type:ze("FRAME_IS_CONNECTED_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_IS_CONNECTED_SUCCESS"),payload:nOe})).or(We.extend({type:ze("FRAME_GET_CHAIN_ID_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_GET_CHAIN_ID_SUCCESS"),payload:rOe})).or(We.extend({type:ze("FRAME_RPC_REQUEST_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_RPC_REQUEST_SUCCESS"),payload:lOe})).or(We.extend({type:ze("FRAME_SESSION_UPDATE"),payload:hF})).or(We.extend({type:ze("FRAME_UPDATE_EMAIL_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_UPDATE_EMAIL_SUCCESS"),payload:XPe})).or(We.extend({type:ze("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(We.extend({type:ze("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:iOe})).or(We.extend({type:ze("FRAME_SYNC_THEME_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_SYNC_THEME_SUCCESS")})).or(We.extend({type:ze("FRAME_SYNC_DAPP_DATA_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(We.extend({type:ze("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:oOe})).or(We.extend({type:ze("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:cOe})).or(We.extend({type:ze("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_READY"),payload:aOe})).or(We.extend({type:ze("FRAME_RELOAD_ERROR"),payload:gr})).or(We.extend({type:ze("FRAME_RELOAD_SUCCESS")}))};function HP(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let n2e=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=je.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!HP(Ve.FRAME_EVENT_KEY,l))return;const u=Wb.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}ko.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{ko.isClient&&window.addEventListener("message",({data:o})=>{if(!HP(Ve.FRAME_EVENT_KEY,o))return;const a=Wb.frameEvent.parse(o);i(a)})},onAppEvent:i=>{ko.isClient&&window.addEventListener("message",({data:o})=>{if(!HP(Ve.APP_EVENT_KEY,o))return;const a=Wb.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(ko.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Wb.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(ko.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Wb.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),ko.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${j1e}?projectId=${e}&chainId=${r}&version=${W1e}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},r2e=class{constructor(e){var i;const n=am({level:z1e}),{logger:r,chunkLoggerController:s}=GN({opts:n});this.logger=ks(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},s2e=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new r2e(e)),this.abortController=i,this.w3mFrame=new n2e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!vs.get(Ve.EMAIL_LOGIN_USED_KEY)}getEmail(){return vs.get(Ve.EMAIL)}getUsername(){return vs.get(Ve.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ve.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{ko.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ve.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ve.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ve.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ve.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ve.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ve.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ve.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ve.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ve.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ve.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ve.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ve.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Ts.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ve.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ts.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ve.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Ts.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ve.APP_SYNC_DAPP_DATA,Ve.APP_SYNC_THEME,Ve.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ve.APP_CONNECT_EMAIL,Ve.APP_CONNECT_DEVICE,Ve.APP_CONNECT_OTP,Ve.APP_CONNECT_SOCIAL,Ve.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,m){var b,v,A;y.id===u&&((v=m==null?void 0:(b=m.logger).info)==null||v.call(b,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((A=y.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){vs.set(Ve.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){vs.set(Ve.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&vs.set(Ve.EMAIL,e),vs.set(Ve.EMAIL_LOGIN_USED_KEY,"true"),vs.delete(Ve.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){vs.delete(Ve.EMAIL_LOGIN_USED_KEY),vs.delete(Ve.EMAIL),vs.delete(Ve.LAST_USED_CHAIN_KEY),vs.delete(Ve.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&vs.set(Ve.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=vs.get(Ve.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){vs.set(Ve.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},i2e=class lS{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return lS.instance||(lS.instance=new s2e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),lS.instance}};function o2e(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Xr(t,...e){try{return o2e(t(...e))}catch(n){return Promise.reject(n)}}function a2e(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function c2e(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function uS(t){if(a2e(t))return String(t);if(c2e(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return uS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const VD="base64:";function l2e(t){return typeof t=="string"?t:VD+h2e(t)}function u2e(t){return typeof t!="string"||!t.startsWith(VD)?t:d2e(t.slice(VD.length))}function d2e(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function h2e(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Mi(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function f2e(...t){return Mi(t.join(":"))}function hA(t){return t=Mi(t),t?t+":":""}function p2e(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function g2e(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const m2e="memory",y2e=()=>{const t=new Map;return{name:m2e,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function w2e(t={}){const e={mounts:{"":t.driver||y2e()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Mi(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await fF(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",y=Mi(g?p:p.key),m=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(y);f(v).items.push({key:y,value:m,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Mi(l);const{relativeKey:d,driver:h}=n(l);return Xr(h.hasItem,d,u)},getItem(l,u={}){l=Mi(l);const{relativeKey:d,driver:h}=n(l);return Xr(h.getItem,d,u).then(f=>iA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Xr(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:f2e(d.base,f.key),value:iA(f.value)}))):Promise.all(d.items.map(h=>Xr(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:iA(f)})))))},getItemRaw(l,u={}){l=Mi(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Xr(h.getItemRaw,d,u):Xr(h.getItem,d,u).then(f=>u2e(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Mi(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Xr(f.setItem,h,uS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Xr(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:uS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Xr(d.driver.setItem,h.relativeKey,uS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Mi(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Xr(f.setItemRaw,h,u,d);else if(f.setItem)await Xr(f.setItem,h,l2e(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Mi(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Xr(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Xr(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Mi(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Xr(h.getMeta,d,u)),!u.nativeOnly){const p=await Xr(h.getItem,d+"$",u).then(g=>iA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var y;l=hA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const m of d){(y=m.driver.flags)!=null&&y.maxDepth||(p=!1);const b=await Xr(m.driver.getKeys,m.relativeBase,u);for(const v of b){const A=m.mountpoint+Mi(v);h.some(C=>A.startsWith(C))||f.push(A)}h=[m.mountpoint,...h.filter(v=>!v.startsWith(m.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(m=>(!g||p2e(m,u.maxDepth))&&g2e(m,l))},async clear(l,u={}){l=hA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Xr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>pF(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=hA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(fF(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=hA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await pF(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Mi(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Mi(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function fF(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function pF(t){typeof t.dispose=="function"&&await Xr(t.dispose)}const b2e="idb-keyval";var v2e=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=zQ(t.dbName,t.storeName)),{name:b2e,options:t,async hasItem(s){return!(typeof await y4(n(s),r)>"u")},async getItem(s){return await y4(n(s),r)??null},setItem(s,i){return HAe(n(s),i,r)},removeItem(s){return GAe(n(s),r)},getKeys(){return KAe(r)},clear(){return qAe(r)}}};const E2e="WALLET_CONNECT_V2_INDEXED_DB",_2e="keyvaluestorage";let C2e=class{constructor(){this.indexedDb=w2e({driver:v2e({dbName:E2e,storeName:_2e})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,ed(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var GP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof GP<"u"&&GP.localStorage?dS.exports=GP.localStorage:typeof window<"u"&&window.localStorage?dS.exports=window.localStorage:dS.exports=new e})();function A2e(t){var e;return[t[0],Tg((e=t[1])!=null?e:"")]}let S2e=class{constructor(){this.localStorage=dS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(A2e)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Tg(n)}async setItem(e,n){this.localStorage.setItem(e,ed(n))}async removeItem(e){this.localStorage.removeItem(e)}};const I2e="wc_storage_version",gF=1,x2e=async(t,e,n)=>{const r=I2e,s=await e.getItem(r);if(s&&s>=gF){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,gF),n(e),N2e(t,o)},N2e=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let T2e=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new S2e;this.storage=e;try{const n=new C2e;x2e(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var R2e=Object.defineProperty,P2e=(t,e,n)=>e in t?R2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mF=(t,e,n)=>P2e(t,typeof e!="symbol"?e+"":e,n);let O2e=class extends sm{constructor(e){super(),this.opts=e,mF(this,"protocol","wc"),mF(this,"version",2)}};var k2e=Object.defineProperty,D2e=(t,e,n)=>e in t?k2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M2e=(t,e,n)=>D2e(t,e+"",n);let L2e=class extends sm{constructor(e,n){super(),this.core=e,this.logger=n,M2e(this,"records",new Map)}},U2e=class{constructor(e,n){this.logger=e,this.core=n}},$2e=class extends sm{constructor(e,n){super(),this.relayer=e,this.logger=n}},B2e=class extends sm{constructor(e){super()}},F2e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},j2e=class extends sm{constructor(e,n){super(),this.relayer=e,this.logger=n}},z2e=class extends sm{constructor(e,n){super(),this.core=e,this.logger=n}},W2e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},H2e=class{constructor(e,n){this.projectId=e,this.logger=n}},G2e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var q2e=Object.defineProperty,V2e=(t,e,n)=>e in t?q2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yF=(t,e,n)=>V2e(t,typeof e!="symbol"?e+"":e,n);let K2e=class{constructor(e){this.opts=e,yF(this,"protocol","wc"),yF(this,"version",2)}},Y2e=class{constructor(e){this.client=e}};function S_(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function wF(t){return S_(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const HJ="2.23.2";let Hb={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${HJ}`};class Dg extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Dg?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Dg&&n.cause.docsPath||n.docsPath,i=(a=Hb.getDocsUrl)==null?void 0:a.call(Hb,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Hb.version?[`Version: ${Hb.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=HJ}walk(e){return GJ(this,e)}}function GJ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?GJ(t.cause,e):e?null:t}class qJ extends Dg{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function sb(t,{dir:e,size:n=32}={}){return typeof t=="string"?Q2e(t,{dir:e,size:n}):J2e(t,{dir:e,size:n})}function Q2e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new qJ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function J2e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new qJ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class Z2e extends Dg{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class X2e extends Dg{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function ib(t,{size:e}){if(wF(t)>e)throw new X2e({givenSize:wF(t),maxSize:e})}function KD(t,e={}){const{signed:n}=e;e.size&&ib(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function eke(t,e={}){return Number(KD(t,e))}const tke=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function YD(t,e={}){return typeof t=="number"||typeof t=="bigint"?KJ(t,e):typeof t=="string"?ske(t,e):typeof t=="boolean"?nke(t,e):VJ(t,e)}function nke(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ib(n,{size:e.size}),sb(n,{size:e.size})):n}function VJ(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=tke[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ib(r,{size:e.size}),sb(r,{dir:"right",size:e.size})):r}function KJ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new Z2e({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?sb(a,{size:r}):a}const rke=new TextEncoder;function ske(t,e={}){const n=rke.encode(t);return VJ(n,e)}const ike=new TextEncoder;function oke(t,e={}){return typeof t=="number"||typeof t=="bigint"?cke(t,e):typeof t=="boolean"?ake(t,e):S_(t)?YJ(t,e):QJ(t,e)}function ake(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(ib(n,{size:e.size}),sb(n,{size:e.size})):n}const tu={zero:48,nine:57,A:65,F:70,a:97,f:102};function bF(t){if(t>=tu.zero&&t<=tu.nine)return t-tu.zero;if(t>=tu.A&&t<=tu.F)return t-(tu.A-10);if(t>=tu.a&&t<=tu.f)return t-(tu.a-10)}function YJ(t,e={}){let n=t;e.size&&(ib(n,{size:e.size}),n=sb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=bF(r.charCodeAt(a++)),l=bF(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Dg(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function cke(t,e){const n=KJ(t,e);return YJ(n)}function QJ(t,e={}){const n=ike.encode(t);return typeof e.size=="number"?(ib(n,{size:e.size}),sb(n,{dir:"right",size:e.size})):n}function JI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function lke(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function tT(t,...e){if(!lke(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function zqe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");JI(t.outputLen),JI(t.blockLen)}function vF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function uke(t,e){tT(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const fA=BigInt(2**32-1),EF=BigInt(32);function dke(t,e=!1){return e?{h:Number(t&fA),l:Number(t>>EF&fA)}:{h:Number(t>>EF&fA)|0,l:Number(t&fA)|0}}function hke(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=dke(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const fke=(t,e,n)=>t<<n|e>>>32-n,pke=(t,e,n)=>e<<n|t>>>32-n,gke=(t,e,n)=>e<<n-32|t>>>64-n,mke=(t,e,n)=>t<<n-32|e>>>64-n,Rm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yke(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Wqe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Hqe(t,e){return t<<32-e|t>>>e}const _F=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function wke(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function CF(t){for(let e=0;e<t.length;e++)t[e]=wke(t[e])}function bke(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function JJ(t){return typeof t=="string"&&(t=bke(t)),tT(t),t}function Gqe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];tT(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let vke=class{clone(){return this._cloneInto()}};function Eke(t){const e=r=>t().update(JJ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Vqe(t=32){if(Rm&&typeof Rm.getRandomValues=="function")return Rm.getRandomValues(new Uint8Array(t));if(Rm&&typeof Rm.randomBytes=="function")return Rm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const ZJ=[],XJ=[],eZ=[],_ke=BigInt(0),Gb=BigInt(1),Cke=BigInt(2),Ake=BigInt(7),Ske=BigInt(256),Ike=BigInt(113);for(let t=0,e=Gb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],ZJ.push(2*(5*r+n)),XJ.push((t+1)*(t+2)/2%64);let s=_ke;for(let i=0;i<7;i++)e=(e<<Gb^(e>>Ake)*Ike)%Ske,e&Cke&&(s^=Gb<<(Gb<<BigInt(i))-Gb);eZ.push(s)}const[xke,Nke]=hke(eZ,!0),AF=(t,e,n)=>n>32?gke(t,e,n):fke(t,e,n),SF=(t,e,n)=>n>32?mke(t,e,n):pke(t,e,n);function Tke(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=AF(l,u,1)^n[a],h=SF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=XJ[o],c=AF(s,i,a),l=SF(s,i,a),u=ZJ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=xke[r],t[1]^=Nke[r]}n.fill(0)}let Rke=class tZ extends vke{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,JI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=yke(this.state)}keccak(){_F||CF(this.state32),Tke(this.state32,this.rounds),_F||CF(this.state32),this.posOut=0,this.pos=0}update(e){vF(this);const{blockLen:n,state:r}=this;e=JJ(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){vF(this,!1),tT(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return JI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(uke(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new tZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Pke=(t,e,n)=>Eke(()=>new Rke(e,t,n)),Oke=Pke(1,136,256/8);function nZ(t,e){const n=e||"hex",r=Oke(S_(t,{strict:!1})?oke(t):t);return n==="bytes"?r:YD(r)}class kke extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const qP=new kke(8192);function Dke(t,e){if(qP.has(`${t}.${e}`))return qP.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=nZ(QJ(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return qP.set(`${t}.${e}`,i),i}function Mke(t){const e=nZ(`0x${t.substring(4)}`).substring(26);return Dke(`0x${e}`)}async function Lke({hash:t,signature:e}){const n=S_(t)?t:YD(t),{secp256k1:r}=await qs(async()=>{const{secp256k1:o}=await import("./secp256k1-BgYx1o2h.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=IF(f);return new r.Signature(KD(l),KD(u)).addRecoveryBit(p)}const o=S_(e)?e:YD(e),a=eke(`0x${o.slice(130)}`),c=IF(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function IF(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Uke({hash:t,signature:e}){return Mke(await Lke({hash:t,signature:e}))}var $ke={};const Bke=":";function jy(t){const[e,n]=t.split(Bke);return{namespace:e,reference:n}}function rZ(t,e){return t.includes(":")?[t]:e.chains||[]}var Fke=Object.defineProperty,jke=Object.defineProperties,zke=Object.getOwnPropertyDescriptors,xF=Object.getOwnPropertySymbols,Wke=Object.prototype.hasOwnProperty,Hke=Object.prototype.propertyIsEnumerable,NF=(t,e,n)=>e in t?Fke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,TF=(t,e)=>{for(var n in e||(e={}))Wke.call(e,n)&&NF(t,n,e[n]);if(xF)for(var n of xF(e))Hke.call(e,n)&&NF(t,n,e[n]);return t},Gke=(t,e)=>jke(t,zke(e));const qke="ReactNative",Mo={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Vke="js";function ZI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Sf(){return!Rg()&&!!nU()&&navigator.product===qke}function Kke(){return Sf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Yke(){return Sf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function ob(){return!ZI()&&!!nU()&&!!Rg()}function VC(){return Sf()?Mo.reactNative:ZI()?Mo.node:ob()?Mo.browser:Mo.unknown}function RF(){var t;try{return Sf()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Qke(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function Jke(t){var e,n;const r=sZ();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),Gke(TF(TF({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function sZ(){return _J()||{name:"",description:"",url:"",icons:[""]}}function Zke(){if(VC()===Mo.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=_Ne();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Xke(){var t;const e=VC();return e===Mo.browser?[e,((t=EJ())==null?void 0:t.host)||"unknown"].join(":"):e}function iZ(t,e,n){const r=Zke(),s=Xke();return[[t,e].join("-"),[Vke,n].join("-"),r,s].join("/")}function eDe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=iZ(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=Qke(l[1]||"",d);return l[0]+"?"+h}function wp(t,e){return t.filter(n=>e.includes(n)).length===t.length}function QD(t){return Object.fromEntries(t.entries())}function JD(t){return new Map(Object.entries(t))}function Gf(t=Te.FIVE_MINUTES,e){const n=Te.toMiliseconds(t||Te.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Th(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function oZ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function tDe(t){return oZ("topic",t)}function nDe(t){return oZ("id",t)}function aZ(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Br(t,e){return Te.fromMiliseconds(Date.now()+Te.toMiliseconds(t))}function Hd(t){return Date.now()>=Te.toMiliseconds(t)}function wn(t,e){return`${t}${e?`:${e}`:""}`}function Rl(t=[],e=[]){return[...new Set([...t,...e])]}async function rDe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=sDe(i,t,e),a=VC();if(a===Mo.browser){if(!((r=Rg())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}iDe(o)}else a===Mo.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function sDe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${lDe(r,!0)}`}else s=`${s}/wc?${r}`;return s}function iDe(t){let e="_self";cDe()?e="_top":(aDe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function oDe(t,e){let n="";try{if(ob()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function PF(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function OF(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function oU(){return typeof process<"u"&&$ke.IS_VITEST==="true"}function aDe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function cDe(){try{return window.self!==window.top}catch{return!1}}function lDe(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function cZ(t){return Buffer.from(t,"base64").toString("utf-8")}function uDe(t){return new Promise(e=>setTimeout(e,t))}function I_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function dDe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function KC(t,...e){if(!dDe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function aU(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");I_(t.outputLen),I_(t.blockLen)}function y0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function lZ(t,e){KC(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const pA=BigInt(2**32-1),kF=BigInt(32);function hDe(t,e=!1){return e?{h:Number(t&pA),l:Number(t>>kF&pA)}:{h:Number(t>>kF&pA)|0,l:Number(t&pA)|0}}function fDe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=hDe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const pDe=(t,e,n)=>t<<n|e>>>32-n,gDe=(t,e,n)=>e<<n|t>>>32-n,mDe=(t,e,n)=>e<<n-32|t>>>64-n,yDe=(t,e,n)=>t<<n-32|e>>>64-n,Pm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function wDe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function VP(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Fc(t,e){return t<<32-e|t>>>e}const DF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function bDe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function MF(t){for(let e=0;e<t.length;e++)t[e]=bDe(t[e])}function vDe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function w0(t){return typeof t=="string"&&(t=vDe(t)),KC(t),t}function EDe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];KC(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let cU=class{clone(){return this._cloneInto()}};function uZ(t){const e=r=>t().update(w0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ab(t=32){if(Pm&&typeof Pm.getRandomValues=="function")return Pm.getRandomValues(new Uint8Array(t));if(Pm&&typeof Pm.randomBytes=="function")return Pm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const dZ=[],hZ=[],fZ=[],_De=BigInt(0),qb=BigInt(1),CDe=BigInt(2),ADe=BigInt(7),SDe=BigInt(256),IDe=BigInt(113);for(let t=0,e=qb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],dZ.push(2*(5*r+n)),hZ.push((t+1)*(t+2)/2%64);let s=_De;for(let i=0;i<7;i++)e=(e<<qb^(e>>ADe)*IDe)%SDe,e&CDe&&(s^=qb<<(qb<<BigInt(i))-qb);fZ.push(s)}const[xDe,NDe]=fDe(fZ,!0),LF=(t,e,n)=>n>32?mDe(t,e,n):pDe(t,e,n),UF=(t,e,n)=>n>32?yDe(t,e,n):gDe(t,e,n);function TDe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=LF(l,u,1)^n[a],h=UF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=hZ[o],c=LF(s,i,a),l=UF(s,i,a),u=dZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=xDe[r],t[1]^=NDe[r]}n.fill(0)}let RDe=class pZ extends cU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,I_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=wDe(this.state)}keccak(){DF||MF(this.state32),TDe(this.state32,this.rounds),DF||MF(this.state32),this.posOut=0,this.pos=0}update(e){y0(this);const{blockLen:n,state:r}=this;e=w0(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){y0(this,!1),KC(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return I_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(lZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new pZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const PDe=(t,e,n)=>uZ(()=>new RDe(e,t,n)),ODe=PDe(1,136,256/8),kDe="https://rpc.walletconnect.org/v1";function gZ(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(ODe(n)).toString("hex")}async function DDe(t,e,n,r,s,i){switch(n.t){case"eip191":return await MDe(t,e,n.s);case"eip1271":return await LDe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function MDe(t,e,n){return(await Uke({hash:gZ(e),signature:n})).toLowerCase()===t.toLowerCase()}async function LDe(t,e,n,r,s,i){const o=jy(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=gZ(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||kDe}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:UDe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function UDe(){return Date.now()+Math.floor(Math.random()*1e3)}function $De(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return CJ.encode(i)}var BDe=Object.defineProperty,FDe=Object.defineProperties,jDe=Object.getOwnPropertyDescriptors,$F=Object.getOwnPropertySymbols,zDe=Object.prototype.hasOwnProperty,WDe=Object.prototype.propertyIsEnumerable,BF=(t,e,n)=>e in t?BDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,HDe=(t,e)=>{for(var n in e||(e={}))zDe.call(e,n)&&BF(t,n,e[n]);if($F)for(var n of $F(e))WDe.call(e,n)&&BF(t,n,e[n]);return t},GDe=(t,e)=>FDe(t,jDe(e));const qDe="did:pkh:",lU=t=>t==null?void 0:t.split(":"),VDe=t=>{const e=t&&lU(t);if(e)return t.includes(qDe)?e[3]:e[1]},ZD=t=>{const e=t&&lU(t);if(e)return e[2]+":"+e[3]},XI=t=>{const e=t&&lU(t);if(e)return e.pop()};async function FF(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=mZ(s,s.iss),o=XI(s.iss);return await DDe(o,i,r,ZD(s.iss),n)}const mZ=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=XI(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${VDe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=hS(t.resources);if(p){const g=x_(p);s=n3e(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function KDe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function YDe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Mg(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function QDe(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:JDe(e,n,r)}}}function JDe(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function yZ(t){return Mg(t),`urn:recap:${KDe(t).replace(/=/g,"")}`}function x_(t){const e=YDe(t.replace("urn:recap:",""));return Mg(e),e}function ZDe(t,e,n){const r=QDe(t,e,n);return yZ(r)}function XDe(t){return t&&t.includes("urn:recap:")}function e3e(t,e){const n=x_(t),r=x_(e),s=t3e(n,r);return yZ(s)}function t3e(t,e){Mg(t),Mg(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=GDe(HDe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function n3e(t="",e){Mg(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function jF(t){var e;const n=x_(t);Mg(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function zF(t){const e=x_(t);Mg(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function hS(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return XDe(e)?e:void 0}function KP(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function wZ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Oo(t,...e){if(!wZ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function WF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function r3e(t,e){Oo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function HF(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const Qh=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),s3e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),i3e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!i3e)throw new Error("Non little-endian hardware is not supported");function o3e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function XD(t){if(typeof t=="string")t=o3e(t);else if(wZ(t))t=e3(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function a3e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function c3e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const l3e=(t,e)=>{function n(r,...s){if(Oo(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Oo(l):Oo(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Oo(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Oo(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Oo(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Oo(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function GF(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!u3e(e))throw new Error("invalid output, must be aligned");return e}function qF(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function u3e(t){return t.byteOffset%4===0}function e3(t){return Uint8Array.from(t)}function b0(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const bZ=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),d3e=bZ("expand 16-byte k"),h3e=bZ("expand 32-byte k"),f3e=Qh(d3e),p3e=Qh(h3e);function on(t,e){return t<<e|t>>>32-e}function t3(t){return t.byteOffset%4===0}const gA=64,g3e=16,vZ=2**32-1,VF=new Uint32Array;function m3e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(gA),u=Qh(l),d=t3(s)&&t3(i),h=d?Qh(s):VF,f=d?Qh(i):VF;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=vZ)throw new Error("arx: counter overflow");const g=Math.min(gA,c-p);if(d&&g===gA){const y=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let m=0,b;m<g3e;m++)b=y+m,f[b]=h[b]^u[m];p+=gA;continue}for(let y=0,m;y<g;y++)m=p+y,i[m]=s[m]^l[y];p+=g}}function y3e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=a3e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return KP(s),KP(o),HF(i),HF(n),(a,c,l,u,d=0)=>{Oo(a),Oo(c),Oo(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Oo(u),KP(d),d<0||d>=vZ)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,y;if(p===32)f.push(g=e3(a)),y=p3e;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),y=f3e,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);t3(c)||f.push(c=e3(c));const m=Qh(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(y,m,Qh(c.subarray(0,16)),m),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const v=Qh(c);return m3e(t,y,m,v,l,u,d,o),b0(...f),u}}const ms=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class w3e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=XD(e),Oo(e,32);const n=ms(e,0),r=ms(e,2),s=ms(e,4),i=ms(e,6),o=ms(e,8),a=ms(e,10),c=ms(e,12),l=ms(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=ms(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],y=o[9],m=ms(e,n+0),b=ms(e,n+2),v=ms(e,n+4),A=ms(e,n+6),C=ms(e,n+8),S=ms(e,n+10),x=ms(e,n+12),T=ms(e,n+14);let I=i[0]+(m&8191),k=i[1]+((m>>>13|b<<3)&8191),O=i[2]+((b>>>10|v<<6)&8191),B=i[3]+((v>>>7|A<<9)&8191),G=i[4]+((A>>>4|C<<12)&8191),W=i[5]+(C>>>1&8191),R=i[6]+((C>>>14|S<<2)&8191),N=i[7]+((S>>>11|x<<5)&8191),M=i[8]+((x>>>8|T<<8)&8191),P=i[9]+(T>>>5|s),D=0,F=D+I*a+k*(5*y)+O*(5*g)+B*(5*p)+G*(5*f);D=F>>>13,F&=8191,F+=W*(5*h)+R*(5*d)+N*(5*u)+M*(5*l)+P*(5*c),D+=F>>>13,F&=8191;let H=D+I*c+k*a+O*(5*y)+B*(5*g)+G*(5*p);D=H>>>13,H&=8191,H+=W*(5*f)+R*(5*h)+N*(5*d)+M*(5*u)+P*(5*l),D+=H>>>13,H&=8191;let te=D+I*l+k*c+O*a+B*(5*y)+G*(5*g);D=te>>>13,te&=8191,te+=W*(5*p)+R*(5*f)+N*(5*h)+M*(5*d)+P*(5*u),D+=te>>>13,te&=8191;let re=D+I*u+k*l+O*c+B*a+G*(5*y);D=re>>>13,re&=8191,re+=W*(5*g)+R*(5*p)+N*(5*f)+M*(5*h)+P*(5*d),D+=re>>>13,re&=8191;let ie=D+I*d+k*u+O*l+B*c+G*a;D=ie>>>13,ie&=8191,ie+=W*(5*y)+R*(5*g)+N*(5*p)+M*(5*f)+P*(5*h),D+=ie>>>13,ie&=8191;let le=D+I*h+k*d+O*u+B*l+G*c;D=le>>>13,le&=8191,le+=W*a+R*(5*y)+N*(5*g)+M*(5*p)+P*(5*f),D+=le>>>13,le&=8191;let Ce=D+I*f+k*h+O*d+B*u+G*l;D=Ce>>>13,Ce&=8191,Ce+=W*c+R*a+N*(5*y)+M*(5*g)+P*(5*p),D+=Ce>>>13,Ce&=8191;let X=D+I*p+k*f+O*h+B*d+G*u;D=X>>>13,X&=8191,X+=W*l+R*c+N*a+M*(5*y)+P*(5*g),D+=X>>>13,X&=8191;let ce=D+I*g+k*p+O*f+B*h+G*d;D=ce>>>13,ce&=8191,ce+=W*u+R*l+N*c+M*a+P*(5*y),D+=ce>>>13,ce&=8191;let fe=D+I*y+k*g+O*p+B*f+G*h;D=fe>>>13,fe&=8191,fe+=W*d+R*u+N*l+M*c+P*a,D+=fe>>>13,fe&=8191,D=(D<<2)+D|0,D=D+F|0,F=D&8191,D=D>>>13,H+=D,i[0]=F,i[1]=H,i[2]=te,i[3]=re,i[4]=ie,i[5]=le,i[6]=Ce,i[7]=X,i[8]=ce,i[9]=fe}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;b0(r)}update(e){WF(this);const{buffer:n,blockLen:r}=this;e=XD(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){b0(this.h,this.r,this.buffer,this.pad)}digestInto(e){WF(this),r3e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function b3e(t){const e=(r,s)=>t(s).update(XD(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const v3e=b3e(t=>new w3e(t));function E3e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],y=e[6],m=e[7],b=s,v=n[0],A=n[1],C=n[2],S=o,x=a,T=c,I=l,k=u,O=d,B=h,G=f,W=p,R=g,N=y,M=m,P=b,D=v,F=A,H=C;for(let re=0;re<i;re+=2)S=S+k|0,P=on(P^S,16),W=W+P|0,k=on(k^W,12),S=S+k|0,P=on(P^S,8),W=W+P|0,k=on(k^W,7),x=x+O|0,D=on(D^x,16),R=R+D|0,O=on(O^R,12),x=x+O|0,D=on(D^x,8),R=R+D|0,O=on(O^R,7),T=T+B|0,F=on(F^T,16),N=N+F|0,B=on(B^N,12),T=T+B|0,F=on(F^T,8),N=N+F|0,B=on(B^N,7),I=I+G|0,H=on(H^I,16),M=M+H|0,G=on(G^M,12),I=I+G|0,H=on(H^I,8),M=M+H|0,G=on(G^M,7),S=S+O|0,H=on(H^S,16),N=N+H|0,O=on(O^N,12),S=S+O|0,H=on(H^S,8),N=N+H|0,O=on(O^N,7),x=x+B|0,P=on(P^x,16),M=M+P|0,B=on(B^M,12),x=x+B|0,P=on(P^x,8),M=M+P|0,B=on(B^M,7),T=T+G|0,D=on(D^T,16),W=W+D|0,G=on(G^W,12),T=T+G|0,D=on(D^T,8),W=W+D|0,G=on(G^W,7),I=I+k|0,F=on(F^I,16),R=R+F|0,k=on(k^R,12),I=I+k|0,F=on(F^I,8),R=R+F|0,k=on(k^R,7);let te=0;r[te++]=o+S|0,r[te++]=a+x|0,r[te++]=c+T|0,r[te++]=l+I|0,r[te++]=u+k|0,r[te++]=d+O|0,r[te++]=h+B|0,r[te++]=f+G|0,r[te++]=p+W|0,r[te++]=g+R|0,r[te++]=y+N|0,r[te++]=m+M|0,r[te++]=b+P|0,r[te++]=v+D|0,r[te++]=A+F|0,r[te++]=C+H|0}const _3e=y3e(E3e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),C3e=new Uint8Array(16),KF=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(C3e.subarray(n))},A3e=new Uint8Array(32);function YF(t,e,n,r,s){const i=t(e,n,A3e),o=v3e.create(i);s&&KF(o,s),KF(o,r);const a=new Uint8Array(16),c=s3e(a);qF(c,0,BigInt(s?s.length:0),!0),qF(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return b0(i,a),l}const S3e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=GF(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=YF(t,e,n,a,r);return i.set(c,o),b0(c),i},decrypt(s,i){i=GF(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=YF(t,e,n,o,r);if(!c3e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),b0(c),i}}),EZ=l3e({blockSize:64,nonceLength:12,tagLength:16},S3e(_3e));let _Z=class extends cU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,aU(e);const r=w0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return y0(this),this.iHash.update(e),this}digestInto(e){y0(this),KC(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const nT=(t,e,n)=>new _Z(t,e).update(n).digest();nT.create=(t,e)=>new _Z(t,e);function I3e(t,e,n){return aU(t),n===void 0&&(n=new Uint8Array(t.outputLen)),nT(t,w0(n),w0(e))}const YP=new Uint8Array([0]),QF=new Uint8Array;function x3e(t,e,n,r=32){if(aU(t),I_(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=QF);const i=new Uint8Array(s*t.outputLen),o=nT.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)YP[0]=l+1,a.update(l===0?QF:c).update(n).update(YP).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),YP.fill(0),i.slice(0,r)}const N3e=(t,e,n,r,s)=>x3e(t,I3e(t,e,n),r,s);function T3e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function R3e(t,e,n){return t&e^~t&n}function P3e(t,e,n){return t&e^t&n^e&n}let O3e=class extends cU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=VP(this.buffer)}update(e){y0(this);const{view:n,buffer:r,blockLen:s}=this;e=w0(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=VP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){y0(this),lZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;T3e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=VP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const k3e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Id=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),xd=new Uint32Array(64);class D3e extends O3e{constructor(){super(64,32,8,!1),this.A=Id[0]|0,this.B=Id[1]|0,this.C=Id[2]|0,this.D=Id[3]|0,this.E=Id[4]|0,this.F=Id[5]|0,this.G=Id[6]|0,this.H=Id[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)xd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=xd[d-15],f=xd[d-2],p=Fc(h,7)^Fc(h,18)^h>>>3,g=Fc(f,17)^Fc(f,19)^f>>>10;xd[d]=g+xd[d-7]+p+xd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Fc(a,6)^Fc(a,11)^Fc(a,25),f=u+h+R3e(a,c,l)+k3e[d]+xd[d]|0,p=(Fc(r,2)^Fc(r,13)^Fc(r,22))+P3e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){xd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const YC=uZ(()=>new D3e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rT=BigInt(0),sT=BigInt(1),M3e=BigInt(2);function Lg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function QC(t){if(!Lg(t))throw new Error("Uint8Array expected")}function v0(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const L3e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function E0(t){QC(t);let e="";for(let n=0;n<t.length;n++)e+=L3e[t[n]];return e}function vy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function uU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?rT:BigInt("0x"+t)}const nu={_0:48,_9:57,A:65,F:70,a:97,f:102};function JF(t){if(t>=nu._0&&t<=nu._9)return t-nu._0;if(t>=nu.A&&t<=nu.F)return t-(nu.A-10);if(t>=nu.a&&t<=nu.f)return t-(nu.a-10)}function _0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=JF(t.charCodeAt(i)),a=JF(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function rg(t){return uU(E0(t))}function N_(t){return QC(t),uU(E0(Uint8Array.from(t).reverse()))}function C0(t,e){return _0(t.toString(16).padStart(e*2,"0"))}function iT(t,e){return C0(t,e).reverse()}function U3e(t){return _0(vy(t))}function Ro(t,e,n){let r;if(typeof e=="string")try{r=_0(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Lg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function T_(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];QC(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function $3e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function B3e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const QP=t=>typeof t=="bigint"&&rT<=t;function oT(t,e,n){return QP(t)&&QP(e)&&QP(n)&&e<=t&&t<n}function Fu(t,e,n,r){if(!oT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function CZ(t){let e;for(e=0;t>rT;t>>=sT,e+=1);return e}function F3e(t,e){return t>>BigInt(e)&sT}function j3e(t,e,n){return t|(n?sT:rT)<<BigInt(e)}const dU=t=>(M3e<<BigInt(t-1))-sT,JP=t=>new Uint8Array(t),ZF=t=>Uint8Array.from(t);function AZ(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=JP(t),s=JP(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=JP())=>{s=a(ZF([0]),u),r=a(),u.length!==0&&(s=a(ZF([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return T_(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const z3e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Lg(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function cb(t,e,n={}){const r=(s,i,o)=>{const a=z3e[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const W3e=()=>{throw new Error("not implemented")};function n3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var H3e=Object.freeze({__proto__:null,isBytes:Lg,abytes:QC,abool:v0,bytesToHex:E0,numberToHexUnpadded:vy,hexToNumber:uU,hexToBytes:_0,bytesToNumberBE:rg,bytesToNumberLE:N_,numberToBytesBE:C0,numberToBytesLE:iT,numberToVarBytesBE:U3e,ensureBytes:Ro,concatBytes:T_,equalBytes:$3e,utf8ToBytes:B3e,inRange:oT,aInRange:Fu,bitLen:CZ,bitGet:F3e,bitSet:j3e,bitMask:dU,createHmacDrbg:AZ,validateObject:cb,notImplemented:W3e,memoized:n3});const ds=BigInt(0),Tr=BigInt(1),Zf=BigInt(2),G3e=BigInt(3),r3=BigInt(4),XF=BigInt(5),ej=BigInt(8);function Hi(t,e){const n=t%e;return n>=ds?n:e+n}function SZ(t,e,n){if(e<ds)throw new Error("invalid exponent, negatives unsupported");if(n<=ds)throw new Error("invalid modulus");if(n===Tr)return ds;let r=Tr;for(;e>ds;)e&Tr&&(r=r*t%n),t=t*t%n,e>>=Tr;return r}function Va(t,e,n){let r=t;for(;e-- >ds;)r*=r,r%=n;return r}function s3(t,e){if(t===ds)throw new Error("invert: expected non-zero number");if(e<=ds)throw new Error("invert: expected positive modulus, got "+e);let n=Hi(t,e),r=e,s=ds,i=Tr;for(;n!==ds;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Tr)throw new Error("invert: does not exist");return Hi(s,e)}function q3e(t){const e=(t-Tr)/Zf;let n,r,s;for(n=t-Tr,r=0;n%Zf===ds;n/=Zf,r++);for(s=Zf;s<t&&SZ(s,e,t)!==t-Tr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Tr)/r3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Tr)/Zf;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Tr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function V3e(t){if(t%r3===G3e){const e=(t+Tr)/r3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%ej===XF){const e=(t-XF)/ej;return function(n,r){const s=n.mul(r,Zf),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Zf),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return q3e(t)}const K3e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Y3e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=K3e.reduce((r,s)=>(r[s]="function",r),e);return cb(t,n)}function Q3e(t,e,n){if(n<ds)throw new Error("invalid exponent, negatives unsupported");if(n===ds)return t.ONE;if(n===Tr)return e;let r=t.ONE,s=e;for(;n>ds;)n&Tr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Tr;return r}function J3e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function IZ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function xZ(t,e,n=!1,r={}){if(t<=ds)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=IZ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:dU(s),ZERO:ds,ONE:Tr,create:c=>Hi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ds<=c&&c<t},is0:c=>c===ds,isOdd:c=>(c&Tr)===Tr,neg:c=>Hi(-c,t),eql:(c,l)=>c===l,sqr:c=>Hi(c*c,t),add:(c,l)=>Hi(c+l,t),sub:(c,l)=>Hi(c-l,t),mul:(c,l)=>Hi(c*l,t),pow:(c,l)=>Q3e(a,c,l),div:(c,l)=>Hi(c*s3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>s3(c,t),sqrt:r.sqrt||(c=>(o||(o=V3e(t)),o(a,c))),invertBatch:c=>J3e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?iT(c,i):C0(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?N_(c):rg(c)}});return Object.freeze(a)}function NZ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function TZ(t){const e=NZ(t);return e+Math.ceil(e/2)}function Z3e(t,e,n=!1){const r=t.length,s=NZ(e),i=TZ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?N_(t):rg(t),a=Hi(o,e-Tr)+Tr;return n?iT(a,s):C0(a,s)}const tj=BigInt(0),mA=BigInt(1);function ZP(t,e){const n=e.negate();return t?n:e}function RZ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function XP(t,e){RZ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function X3e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function e5e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const eO=new WeakMap,PZ=new WeakMap;function tO(t){return PZ.get(t)||1}function t5e(t,e){return{constTimeNegate:ZP,hasPrecomputes(n){return tO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>tj;)r&mA&&(s=s.add(i)),i=i.double(),r>>=mA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=XP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=XP(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=mA);const g=f,y=f+Math.abs(p)-1,m=h%2!==0,b=p<0;p===0?c=c.add(ZP(m,r[g])):a=a.add(ZP(b,r[y]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=XP(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===tj)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=mA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=eO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&eO.set(r,s(i))),i},wNAFCached(n,r,s){const i=tO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=tO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){RZ(r,e),PZ.set(n,r),eO.delete(n)}}}function n5e(t,e,n,r){if(X3e(n,t),e5e(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=CZ(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function OZ(t){return Y3e(t.Fp),cb(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...IZ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Om=BigInt(0),nO=BigInt(1);function r5e(t){return cb(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function s5e(t){const e=r5e(t),{P:n}=e,r=b=>Hi(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>SZ(b,n-BigInt(2),n));function l(b,v,A){const C=r(b*(v-A));return v=r(v-C),A=r(A+C),[v,A]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,v){Fu("u",b,Om,n),Fu("scalar",v,Om,n);const A=v,C=b;let S=nO,x=Om,T=b,I=nO,k=Om,O;for(let G=BigInt(s-1);G>=Om;G--){const W=A>>G&nO;k^=W,O=l(k,S,T),S=O[0],T=O[1],O=l(k,x,I),x=O[0],I=O[1],k=W;const R=S+x,N=r(R*R),M=S-x,P=r(M*M),D=N-P,F=T+I,H=T-I,te=r(H*R),re=r(F*M),ie=te+re,le=te-re;T=r(ie*ie),I=r(C*r(le*le)),S=r(N*P),x=r(D*(N+r(u*D)))}O=l(k,S,T),S=O[0],T=O[1],O=l(k,x,I),x=O[0],I=O[1];const B=c(x);return r(S*B)}function h(b){return iT(r(b),i)}function f(b){const v=Ro("u coordinate",b,i);return o===32&&(v[31]&=127),N_(v)}function p(b){const v=Ro("scalar",b),A=v.length;if(A!==i&&A!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+A)}return N_(a(v))}function g(b,v){const A=f(v),C=p(b),S=d(A,C);if(S===Om)throw new Error("invalid private or public key received");return h(S)}const y=h(e.Gu);function m(b){return g(b,y)}return{scalarMult:g,scalarMultBase:m,getSharedSecret:(b,v)=>g(b,v),getPublicKey:b=>m(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:y}}const i3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const i5e=BigInt(1),nj=BigInt(2),o5e=BigInt(3),a5e=BigInt(5);BigInt(8);function c5e(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=i3,o=t*t%i*t%i,a=Va(o,nj,i)*o%i,c=Va(a,i5e,i)*t%i,l=Va(c,a5e,i)*c%i,u=Va(l,e,i)*l%i,d=Va(u,n,i)*u%i,h=Va(d,r,i)*d%i,f=Va(h,s,i)*h%i,p=Va(f,s,i)*h%i,g=Va(p,e,i)*l%i;return{pow_p_5_8:Va(g,nj,i)*t%i,b2:o}}function l5e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const o3=s5e({P:i3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=i3,{pow_p_5_8:n,b2:r}=c5e(t);return Hi(Va(n,o5e,e)*r,e)},adjustScalarBytes:l5e,randomBytes:ab});function rj(t){t.lowS!==void 0&&v0("lowS",t.lowS),t.prehash!==void 0&&v0("prehash",t.prehash)}function u5e(t){const e=OZ(t);cb(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:d5e,hexToBytes:h5e}=H3e;class f5e extends Error{constructor(e=""){super(e)}}const hu={Err:f5e,_tlv:{encode:(t,e)=>{const{Err:n}=hu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=vy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?vy(s.length/2|128):"";return vy(t)+i+s+e},decode(t,e){const{Err:n}=hu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=hu;if(t<Nu)throw new e("integer: negative integers are not allowed");let n=vy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=hu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return d5e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=hu,s=typeof t=="string"?h5e(t):t;QC(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=hu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Nu=BigInt(0),ts=BigInt(1);BigInt(2);const sj=BigInt(3);BigInt(4);function p5e(t){const e=u5e(t),{Fp:n}=e,r=xZ(e.n,e.nBitLength),s=e.toBytes||((g,y,m)=>{const b=y.toAffine();return T_(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const y=g.subarray(1),m=n.fromBytes(y.subarray(0,n.BYTES)),b=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:m,y:b}});function o(g){const{a:y,b:m}=e,b=n.sqr(g),v=n.mul(b,g);return n.add(n.add(v,n.mul(g,y)),m)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return oT(g,ts,e.n)}function c(g){const{allowedPrivateKeyLengths:y,nByteLength:m,wrapPrivateKey:b,n:v}=e;if(y&&typeof g!="bigint"){if(Lg(g)&&(g=E0(g)),typeof g!="string"||!y.includes(g.length))throw new Error("invalid private key");g=g.padStart(m*2,"0")}let A;try{A=typeof g=="bigint"?g:rg(Ro("private key",g,m))}catch{throw new Error("invalid private key, expected hex or "+m+" bytes, got "+typeof g)}return b&&(A=Hi(A,v)),Fu("private key",A,ts,v),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=n3((g,y)=>{const{px:m,py:b,pz:v}=g;if(n.eql(v,n.ONE))return{x:m,y:b};const A=g.is0();y==null&&(y=A?n.ONE:n.inv(v));const C=n.mul(m,y),S=n.mul(b,y),x=n.mul(v,y);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:C,y:S}}),d=n3(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:y,y:m}=g.toAffine();if(!n.isValid(y)||!n.isValid(m))throw new Error("bad point: x or y not FE");const b=n.sqr(m),v=o(y);if(!n.eql(b,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(y,m,b){if(this.px=y,this.py=m,this.pz=b,y==null||!n.isValid(y))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(y){const{x:m,y:b}=y||{};if(!y||!n.isValid(m)||!n.isValid(b))throw new Error("invalid affine point");if(y instanceof h)throw new Error("projective point not allowed");const v=A=>n.eql(A,n.ZERO);return v(m)&&v(b)?h.ZERO:new h(m,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const m=n.invertBatch(y.map(b=>b.pz));return y.map((b,v)=>b.toAffine(m[v])).map(h.fromAffine)}static fromHex(y){const m=h.fromAffine(i(Ro("pointHex",y)));return m.assertValidity(),m}static fromPrivateKey(y){return h.BASE.multiply(c(y))}static msm(y,m){return n5e(h,r,y,m)}_setWindowSize(y){p.setWindowSize(this,y)}assertValidity(){d(this)}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){l(y);const{px:m,py:b,pz:v}=this,{px:A,py:C,pz:S}=y,x=n.eql(n.mul(m,S),n.mul(A,v)),T=n.eql(n.mul(b,S),n.mul(C,v));return x&&T}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b:m}=e,b=n.mul(m,sj),{px:v,py:A,pz:C}=this;let S=n.ZERO,x=n.ZERO,T=n.ZERO,I=n.mul(v,v),k=n.mul(A,A),O=n.mul(C,C),B=n.mul(v,A);return B=n.add(B,B),T=n.mul(v,C),T=n.add(T,T),S=n.mul(y,T),x=n.mul(b,O),x=n.add(S,x),S=n.sub(k,x),x=n.add(k,x),x=n.mul(S,x),S=n.mul(B,S),T=n.mul(b,T),O=n.mul(y,O),B=n.sub(I,O),B=n.mul(y,B),B=n.add(B,T),T=n.add(I,I),I=n.add(T,I),I=n.add(I,O),I=n.mul(I,B),x=n.add(x,I),O=n.mul(A,C),O=n.add(O,O),I=n.mul(O,B),S=n.sub(S,I),T=n.mul(O,k),T=n.add(T,T),T=n.add(T,T),new h(S,x,T)}add(y){l(y);const{px:m,py:b,pz:v}=this,{px:A,py:C,pz:S}=y;let x=n.ZERO,T=n.ZERO,I=n.ZERO;const k=e.a,O=n.mul(e.b,sj);let B=n.mul(m,A),G=n.mul(b,C),W=n.mul(v,S),R=n.add(m,b),N=n.add(A,C);R=n.mul(R,N),N=n.add(B,G),R=n.sub(R,N),N=n.add(m,v);let M=n.add(A,S);return N=n.mul(N,M),M=n.add(B,W),N=n.sub(N,M),M=n.add(b,v),x=n.add(C,S),M=n.mul(M,x),x=n.add(G,W),M=n.sub(M,x),I=n.mul(k,N),x=n.mul(O,W),I=n.add(x,I),x=n.sub(G,I),I=n.add(G,I),T=n.mul(x,I),G=n.add(B,B),G=n.add(G,B),W=n.mul(k,W),N=n.mul(O,N),G=n.add(G,W),W=n.sub(B,W),W=n.mul(k,W),N=n.add(N,W),B=n.mul(G,N),T=n.add(T,B),B=n.mul(M,N),x=n.mul(R,x),x=n.sub(x,B),B=n.mul(R,G),I=n.mul(M,I),I=n.add(I,B),new h(x,T,I)}subtract(y){return this.add(y.negate())}is0(){return this.equals(h.ZERO)}wNAF(y){return p.wNAFCached(this,y,h.normalizeZ)}multiplyUnsafe(y){const{endo:m,n:b}=e;Fu("scalar",y,Nu,b);const v=h.ZERO;if(y===Nu)return v;if(this.is0()||y===ts)return this;if(!m||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,y,h.normalizeZ);let{k1neg:A,k1:C,k2neg:S,k2:x}=m.splitScalar(y),T=v,I=v,k=this;for(;C>Nu||x>Nu;)C&ts&&(T=T.add(k)),x&ts&&(I=I.add(k)),k=k.double(),C>>=ts,x>>=ts;return A&&(T=T.negate()),S&&(I=I.negate()),I=new h(n.mul(I.px,m.beta),I.py,I.pz),T.add(I)}multiply(y){const{endo:m,n:b}=e;Fu("scalar",y,ts,b);let v,A;if(m){const{k1neg:C,k1:S,k2neg:x,k2:T}=m.splitScalar(y);let{p:I,f:k}=this.wNAF(S),{p:O,f:B}=this.wNAF(T);I=p.constTimeNegate(C,I),O=p.constTimeNegate(x,O),O=new h(n.mul(O.px,m.beta),O.py,O.pz),v=I.add(O),A=k.add(B)}else{const{p:C,f:S}=this.wNAF(y);v=C,A=S}return h.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(y,m,b){const v=h.BASE,A=(S,x)=>x===Nu||x===ts||!S.equals(v)?S.multiplyUnsafe(x):S.multiply(x),C=A(this,m).add(A(y,b));return C.is0()?void 0:C}toAffine(y){return u(this,y)}isTorsionFree(){const{h:y,isTorsionFree:m}=e;if(y===ts)return!0;if(m)return m(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:m}=e;return y===ts?this:m?m(h,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return v0("isCompressed",y),this.assertValidity(),s(h,this,y)}toHex(y=!0){return v0("isCompressed",y),E0(this.toRawBytes(y))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=t5e(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function g5e(t){const e=OZ(t);return cb(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function m5e(t){const e=g5e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(W){return Hi(W,r)}function a(W){return s3(W,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=p5e({...e,toBytes(W,R,N){const M=R.toAffine(),P=n.toBytes(M.x),D=T_;return v0("isCompressed",N),N?D(Uint8Array.from([R.hasEvenY()?2:3]),P):D(Uint8Array.from([4]),P,n.toBytes(M.y))},fromBytes(W){const R=W.length,N=W[0],M=W.subarray(1);if(R===s&&(N===2||N===3)){const P=rg(M);if(!oT(P,ts,n.ORDER))throw new Error("Point is not on curve");const D=u(P);let F;try{F=n.sqrt(D)}catch(te){const re=te instanceof Error?": "+te.message:"";throw new Error("Point is not on curve"+re)}const H=(F&ts)===ts;return(N&1)===1!==H&&(F=n.neg(F)),{x:P,y:F}}else if(R===i&&N===4){const P=n.fromBytes(M.subarray(0,n.BYTES)),D=n.fromBytes(M.subarray(n.BYTES,2*n.BYTES));return{x:P,y:D}}else{const P=s,D=i;throw new Error("invalid Point, expected length of "+P+", or uncompressed "+D+", got "+R)}}}),h=W=>E0(C0(W,e.nByteLength));function f(W){const R=r>>ts;return W>R}function p(W){return f(W)?o(-W):W}const g=(W,R,N)=>rg(W.slice(R,N));class y{constructor(R,N,M){this.r=R,this.s=N,this.recovery=M,this.assertValidity()}static fromCompact(R){const N=e.nByteLength;return R=Ro("compactSignature",R,N*2),new y(g(R,0,N),g(R,N,2*N))}static fromDER(R){const{r:N,s:M}=hu.toSig(Ro("DER",R));return new y(N,M)}assertValidity(){Fu("r",this.r,ts,r),Fu("s",this.s,ts,r)}addRecoveryBit(R){return new y(this.r,this.s,R)}recoverPublicKey(R){const{r:N,s:M,recovery:P}=this,D=S(Ro("msgHash",R));if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");const F=P===2||P===3?N+e.n:N;if(F>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=P&1?"03":"02",te=c.fromHex(H+h(F)),re=a(F),ie=o(-D*re),le=o(M*re),Ce=c.BASE.multiplyAndAddUnsafe(te,ie,le);if(!Ce)throw new Error("point at infinify");return Ce.assertValidity(),Ce}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return _0(this.toDERHex())}toDERHex(){return hu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return _0(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const m={isValidPrivateKey(W){try{return l(W),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const W=TZ(e.n);return Z3e(e.randomBytes(W),e.n)},precompute(W=8,R=c.BASE){return R._setWindowSize(W),R.multiply(BigInt(3)),R}};function b(W,R=!0){return c.fromPrivateKey(W).toRawBytes(R)}function v(W){const R=Lg(W),N=typeof W=="string",M=(R||N)&&W.length;return R?M===s||M===i:N?M===2*s||M===2*i:W instanceof c}function A(W,R,N=!0){if(v(W))throw new Error("first arg must be private key");if(!v(R))throw new Error("second arg must be public key");return c.fromHex(R).multiply(l(W)).toRawBytes(N)}const C=e.bits2int||function(W){if(W.length>8192)throw new Error("input is too large");const R=rg(W),N=W.length*8-e.nBitLength;return N>0?R>>BigInt(N):R},S=e.bits2int_modN||function(W){return o(C(W))},x=dU(e.nBitLength);function T(W){return Fu("num < 2^"+e.nBitLength,W,Nu,x),C0(W,e.nByteLength)}function I(W,R,N=k){if(["recovered","canonical"].some(ce=>ce in N))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:P}=e;let{lowS:D,prehash:F,extraEntropy:H}=N;D==null&&(D=!0),W=Ro("msgHash",W),rj(N),F&&(W=Ro("prehashed msgHash",M(W)));const te=S(W),re=l(R),ie=[T(re),T(te)];if(H!=null&&H!==!1){const ce=H===!0?P(n.BYTES):H;ie.push(Ro("extraEntropy",ce))}const le=T_(...ie),Ce=te;function X(ce){const fe=C(ce);if(!d(fe))return;const de=a(fe),ve=c.BASE.multiply(fe).toAffine(),ye=o(ve.x);if(ye===Nu)return;const Ae=o(de*o(Ce+ye*re));if(Ae===Nu)return;let we=(ve.x===ye?0:2)|Number(ve.y&ts),me=Ae;return D&&f(Ae)&&(me=p(Ae),we^=1),new y(ye,me,we)}return{seed:le,k2sig:X}}const k={lowS:e.lowS,prehash:!1},O={lowS:e.lowS,prehash:!1};function B(W,R,N=k){const{seed:M,k2sig:P}=I(W,R,N),D=e;return AZ(D.hash.outputLen,D.nByteLength,D.hmac)(M,P)}c.BASE._setWindowSize(8);function G(W,R,N,M=O){var Ae;const P=W;R=Ro("msgHash",R),N=Ro("publicKey",N);const{lowS:D,prehash:F,format:H}=M;if(rj(M),"strict"in M)throw new Error("options.strict was renamed to lowS");if(H!==void 0&&H!=="compact"&&H!=="der")throw new Error("format must be compact or der");const te=typeof P=="string"||Lg(P),re=!te&&!H&&typeof P=="object"&&P!==null&&typeof P.r=="bigint"&&typeof P.s=="bigint";if(!te&&!re)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ie,le;try{if(re&&(ie=new y(P.r,P.s)),te){try{H!=="compact"&&(ie=y.fromDER(P))}catch(we){if(!(we instanceof hu.Err))throw we}!ie&&H!=="der"&&(ie=y.fromCompact(P))}le=c.fromHex(N)}catch{return!1}if(!ie||D&&ie.hasHighS())return!1;F&&(R=e.hash(R));const{r:Ce,s:X}=ie,ce=S(R),fe=a(X),de=o(ce*fe),ve=o(Ce*fe),ye=(Ae=c.BASE.multiplyAndAddUnsafe(le,de,ve))==null?void 0:Ae.toAffine();return ye?o(ye.x)===Ce:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:A,sign:B,verify:G,ProjectivePoint:c,Signature:y,utils:m}}function y5e(t){return{hash:t,hmac:(e,...n)=>nT(t,e,EDe(...n)),randomBytes:ab}}function w5e(t,e){const n=r=>m5e({...t,...y5e(r)});return{...n(e),create:n}}const kZ=xZ(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),b5e=kZ.create(BigInt("-3")),v5e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),E5e=w5e({a:b5e,b:v5e,Fp:kZ,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},YC),DZ="base10",vi="base16",wc="base64pad",Yd="base64url",JC="utf8",MZ=0,ju=1,ZC=2,_5e=0,ij=1,eE=12,hU=32;function C5e(){const t=o3.utils.randomPrivateKey(),e=o3.getPublicKey(t);return{privateKey:ro(t,vi),publicKey:ro(e,vi)}}function a3(){const t=ab(hU);return ro(t,vi)}function A5e(t,e){const n=o3.getSharedSecret(_a(t,vi),_a(e,vi)),r=N3e(YC,n,void 0,void 0,hU);return ro(r,vi)}function fS(t){const e=YC(_a(t,vi));return ro(e,vi)}function fl(t){const e=YC(_a(t,JC));return ro(e,vi)}function LZ(t){return _a(`${t}`,DZ)}function Ug(t){return Number(ro(t,DZ))}function UZ(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function $Z(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function S5e(t){const e=LZ(typeof t.type<"u"?t.type:MZ);if(Ug(e)===ju&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?_a(t.senderPublicKey,vi):void 0,r=typeof t.iv<"u"?_a(t.iv,vi):ab(eE),s=_a(t.symKey,vi),i=EZ(s,r).encrypt(_a(t.message,JC)),o=BZ({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Yd?UZ(o):o}function I5e(t){const e=_a(t.symKey,vi),{sealed:n,iv:r}=R_({encoded:t.encoded,encoding:t.encoding}),s=EZ(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return ro(s,JC)}function x5e(t,e){const n=LZ(ZC),r=ab(eE),s=_a(t,JC),i=BZ({type:n,sealed:s,iv:r});return e===Yd?UZ(i):i}function N5e(t,e){const{sealed:n}=R_({encoded:t,encoding:e});return ro(n,JC)}function BZ(t){if(Ug(t.type)===ZC)return ro(Jv([t.type,t.sealed]),wc);if(Ug(t.type)===ju){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ro(Jv([t.type,t.senderPublicKey,t.iv,t.sealed]),wc)}return ro(Jv([t.type,t.iv,t.sealed]),wc)}function R_(t){const e=(t.encoding||wc)===Yd?$Z(t.encoded):t.encoded,n=_a(e,wc),r=n.slice(_5e,ij),s=ij;if(Ug(r)===ju){const c=s+hU,l=c+eE,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Ug(r)===ZC){const c=n.slice(s),l=ab(eE);return{type:r,sealed:c,iv:l}}const i=s+eE,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function T5e(t,e){const n=R_({encoded:t,encoding:e==null?void 0:e.encoding});return FZ({type:Ug(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ro(n.senderPublicKey,vi):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function FZ(t){const e=(t==null?void 0:t.type)||MZ;if(e===ju){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function oj(t){return t.type===ju&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function aj(t){return t.type===ZC}function R5e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return Jv([new Uint8Array([4]),e,n])}function P5e(t,e){const[n,r,s]=t.split("."),i=Buffer.from($Z(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=YC(c),u=R5e(e);if(!E5e.verify(Jv([o,a]),l,u))throw new Error("Invalid signature");return $D(t).payload}const O5e="irn";function ex(t){return(t==null?void 0:t.relay)||{protocol:O5e}}function gv(t){const e=UTe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function k5e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function cj(t){if(!t.includes("wc:")){const l=cZ(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:D5e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:k5e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function D5e(t){return t.startsWith("//")?t.substring(2):t}function M5e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function lj(t){const e=new URLSearchParams,n=M5e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function yA(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var L5e=Object.defineProperty,U5e=Object.defineProperties,$5e=Object.getOwnPropertyDescriptors,uj=Object.getOwnPropertySymbols,B5e=Object.prototype.hasOwnProperty,F5e=Object.prototype.propertyIsEnumerable,dj=(t,e,n)=>e in t?L5e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j5e=(t,e)=>{for(var n in e||(e={}))B5e.call(e,n)&&dj(t,n,e[n]);if(uj)for(var n of uj(e))F5e.call(e,n)&&dj(t,n,e[n]);return t},z5e=(t,e)=>U5e(t,$5e(e));function lb(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function W5e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...lb(n.accounts))}),e}function H5e(t,e){const n=[];return Object.values(t).forEach(r=>{lb(r.accounts).includes(e)&&n.push(...r.methods)}),n}function G5e(t,e){const n=[];return Object.values(t).forEach(r=>{lb(r.accounts).includes(e)&&n.push(...r.events)}),n}function aT(t){return t.includes(":")}function Ey(t){return aT(t)?t.split(":")[0]:t}function hj(t){var e,n,r;const s={};if(!Zh(t))return s;for(const[i,o]of Object.entries(t)){const a=aT(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Ey(i);s[u]=z5e(j5e({},s[u]),{chains:Rl(a,(e=s[u])==null?void 0:e.chains),methods:Rl(c,(n=s[u])==null?void 0:n.methods),events:Rl(l,(r=s[u])==null?void 0:r.events)})}return s}function q5e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function fj(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=q5e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Rl(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function V5e(t,e){var n,r,s,i,o,a;const c=hj(t),l=hj(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Rl((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Rl((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Rl((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const K5e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Y5e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Pe(t,e){const{message:n,code:r}=Y5e[t];return{message:e?`${n} ${e}`:n,code:r}}function Pn(t,e){const{message:n,code:r}=K5e[t];return{message:e?`${n} ${e}`:n,code:r}}function Jh(t,e){return!!Array.isArray(t)}function Zh(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function As(t){return typeof t>"u"}function kr(t,e){return e&&As(t)?!0:typeof t=="string"&&!!t.trim().length}function fU(t,e){return e&&As(t)?!0:typeof t=="number"&&!isNaN(t)}function Q5e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return wp(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=lb(a),d=n[o];(!wp(rZ(o,d),u)||!wp(d.methods,c)||!wp(d.events,l))&&(i=!1)}),i):!1}function tx(t){return kr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function J5e(t){if(kr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&tx(n)}}return!1}function Z5e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(kr(t,!1)){if(e(t))return!0;const n=cZ(t);return e(n)}}catch{}return!1}function X5e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function eMe(t){return t==null?void 0:t.topic}function tMe(t,e){let n=null;return kr(t==null?void 0:t.publicKey,!1)||(n=Pe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function pj(t){let e=!0;return Jh(t)?t.length&&(e=t.every(n=>kr(n,!1))):e=!1,e}function nMe(t,e,n){let r=null;return Jh(e)&&e.length?e.forEach(s=>{r||tx(s)||(r=Pn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):tx(t)||(r=Pn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function rMe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=nMe(s,rZ(s,i),`${e} ${n}`);o&&(r=o)}),r}function sMe(t,e){let n=null;return Jh(t)?t.forEach(r=>{n||J5e(r)||(n=Pn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Pn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function iMe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=sMe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function oMe(t,e){let n=null;return pj(t==null?void 0:t.methods)?pj(t==null?void 0:t.events)||(n=Pn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Pn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function jZ(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=oMe(r,`${e}, namespace`);s&&(n=s)}),n}function aMe(t,e,n){let r=null;if(t&&Zh(t)){const s=jZ(t,e);s&&(r=s);const i=rMe(t,e,n);i&&(r=i)}else r=Pe("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function rO(t,e){let n=null;if(t&&Zh(t)){const r=jZ(t,e);r&&(n=r);const s=iMe(t,e);s&&(n=s)}else n=Pe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function zZ(t){return kr(t.protocol,!0)}function cMe(t,e){let n=!1;return t?t&&Jh(t)&&t.length&&t.forEach(r=>{n=zZ(r)}):n=!0,n}function lMe(t){return typeof t=="number"}function Li(t){return typeof t<"u"&&typeof t!==null}function uMe(t){return!(!t||typeof t!="object"||!t.code||!fU(t.code,!1)||!t.message||!kr(t.message,!1))}function dMe(t){return!(As(t)||!kr(t.method,!1))}function hMe(t){return!(As(t)||As(t.result)&&As(t.error)||!fU(t.id,!1)||!kr(t.jsonrpc,!1))}function fMe(t){return!(As(t)||!kr(t.name,!1))}function gj(t,e){return!(!tx(e)||!W5e(t).includes(e))}function pMe(t,e,n){return kr(n,!1)?H5e(t,e).includes(n):!1}function gMe(t,e,n){return kr(n,!1)?G5e(t,e).includes(n):!1}function mj(t,e,n){let r=null;const s=mMe(t),i=yMe(e),o=Object.keys(s),a=Object.keys(i),c=yj(Object.keys(t)),l=yj(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Pe("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),wp(o,a)||(r=Pe("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=lb(e[d].accounts);h.includes(d)||(r=Pe("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(wp(s[d].methods,i[d].methods)?wp(s[d].events,i[d].events)||(r=Pe("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Pe("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function mMe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function yj(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function yMe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=lb(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function wMe(t,e){return fU(t,!1)&&t<=e.max&&t>=e.min}function wj(){const t=VC();return new Promise(e=>{switch(t){case Mo.browser:e(bMe());break;case Mo.reactNative:e(vMe());break;case Mo.node:e(EMe());break;default:e(!0)}})}function bMe(){return ob()&&(navigator==null?void 0:navigator.onLine)}async function vMe(){if(Sf()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function EMe(){return!0}function _Me(t){switch(VC()){case Mo.browser:CMe(t);break;case Mo.reactNative:AMe(t);break}}function CMe(t){!Sf()&&ob()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function AMe(t){Sf()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function SMe(){var t;return ob()&&Rg()?((t=Rg())==null?void 0:t.visibilityState)==="visible":!0}const sO={};class Vb{static get(e){return sO[e]}static set(e,n){sO[e]=n}static delete(e){delete sO[e]}}var IMe={};const WZ="wc",HZ=2,c3="core",Bl=`${WZ}@2:${c3}:`,xMe={logger:"error"},NMe={database:":memory:"},TMe="crypto",bj="client_ed25519_seed",RMe=Te.ONE_DAY,PMe="keychain",OMe="0.3",kMe="messages",DMe="0.3",vj=Te.SIX_HOURS,MMe="publisher",GZ="irn",LMe="error",qZ="wss://relay.walletconnect.org",UMe="relayer",as={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},$Me="_subscription",Xo={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},BMe=.1,l3="2.21.0",Jn={link_mode:"link_mode",relay:"relay"},pS={inbound:"inbound",outbound:"outbound"},FMe="0.3",jMe="WALLETCONNECT_CLIENT_ID",Ej="WALLETCONNECT_LINK_MODE_APPS",Co={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},zMe="subscription",WMe="0.3",HMe="pairing",GMe="0.3",Kb={wc_pairingDelete:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Te.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Te.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:0},res:{ttl:Te.ONE_DAY,prompt:!1,tag:0}}},Xf={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Wa={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},qMe="history",VMe="0.3",KMe="expirer",oa={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},YMe="0.3",QMe="verify-api",JMe="https://verify.walletconnect.com",VZ="https://verify.walletconnect.org",tE=VZ,ZMe=`${tE}/v3`,XMe=[JMe,VZ],eLe="echo",tLe="https://echo.walletconnect.com",Vc={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ou={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ha={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Df={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Mf={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Yb={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},nLe=.1,rLe="event-client",sLe=86400,iLe="https://pulse.walletconnect.org/batch";function oLe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,y=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,A=new Uint8Array(v);m!==b;){for(var C=p[m],S=0,x=v-1;(C!==0||S<y)&&x!==-1;x--,S++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");y=S,m++}for(var T=v-y;T!==v&&A[T]===0;)T++;for(var I=c.repeat(g);T<v;++T)I+=t.charAt(A[T]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var y=0,m=0;p[g]===c;)y++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,S=b-1;(A!==0||C<m)&&S!==-1;S--,C++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var T=new Uint8Array(y+(b-x)),I=y;x!==b;)T[I++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var aLe=oLe,cLe=aLe;const KZ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},lLe=t=>new TextEncoder().encode(t),uLe=t=>new TextDecoder().decode(t);class dLe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class hLe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return YZ(this,e)}}class fLe{constructor(e){this.decoders=e}or(e){return YZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const YZ=(t,e)=>new fLe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class pLe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new dLe(e,n,r),this.decoder=new hLe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const cT=({name:t,prefix:e,encode:n,decode:r})=>new pLe(t,e,n,r),XC=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=cLe(n,e);return cT({prefix:t,name:e,encode:r,decode:i=>KZ(s(i))})},gLe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},mLe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ls=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>cT({prefix:e,name:t,encode(s){return mLe(s,r,n)},decode(s){return gLe(s,r,n,t)}}),yLe=cT({prefix:"\0",name:"identity",encode:t=>uLe(t),decode:t=>lLe(t)});var wLe=Object.freeze({__proto__:null,identity:yLe});const bLe=Ls({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var vLe=Object.freeze({__proto__:null,base2:bLe});const ELe=Ls({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var _Le=Object.freeze({__proto__:null,base8:ELe});const CLe=XC({prefix:"9",name:"base10",alphabet:"0123456789"});var ALe=Object.freeze({__proto__:null,base10:CLe});const SLe=Ls({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ILe=Ls({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var xLe=Object.freeze({__proto__:null,base16:SLe,base16upper:ILe});const NLe=Ls({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),TLe=Ls({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),RLe=Ls({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),PLe=Ls({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),OLe=Ls({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),kLe=Ls({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),DLe=Ls({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),MLe=Ls({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),LLe=Ls({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ULe=Object.freeze({__proto__:null,base32:NLe,base32upper:TLe,base32pad:RLe,base32padupper:PLe,base32hex:OLe,base32hexupper:kLe,base32hexpad:DLe,base32hexpadupper:MLe,base32z:LLe});const $Le=XC({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),BLe=XC({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var FLe=Object.freeze({__proto__:null,base36:$Le,base36upper:BLe});const jLe=XC({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zLe=XC({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var WLe=Object.freeze({__proto__:null,base58btc:jLe,base58flickr:zLe});const HLe=Ls({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),GLe=Ls({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qLe=Ls({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),VLe=Ls({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var KLe=Object.freeze({__proto__:null,base64:HLe,base64pad:GLe,base64url:qLe,base64urlpad:VLe});const QZ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),YLe=QZ.reduce((t,e,n)=>(t[n]=e,t),[]),QLe=QZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function JLe(t){return t.reduce((e,n)=>(e+=YLe[n],e),"")}function ZLe(t){const e=[];for(const n of t){const r=QLe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const XLe=cT({prefix:"🚀",name:"base256emoji",encode:JLe,decode:ZLe});var eUe=Object.freeze({__proto__:null,base256emoji:XLe}),tUe=JZ,_j=128,nUe=-128,rUe=Math.pow(2,31);function JZ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=rUe;)e[n++]=t&255|_j,t/=128;for(;t&nUe;)e[n++]=t&255|_j,t>>>=7;return e[n]=t|0,JZ.bytes=n-r+1,e}var sUe=u3,iUe=128,Cj=127;function u3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw u3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Cj)<<s:(o&Cj)*Math.pow(2,s),s+=7}while(o>=iUe);return u3.bytes=i-r,n}var oUe=Math.pow(2,7),aUe=Math.pow(2,14),cUe=Math.pow(2,21),lUe=Math.pow(2,28),uUe=Math.pow(2,35),dUe=Math.pow(2,42),hUe=Math.pow(2,49),fUe=Math.pow(2,56),pUe=Math.pow(2,63),gUe=function(t){return t<oUe?1:t<aUe?2:t<cUe?3:t<lUe?4:t<uUe?5:t<dUe?6:t<hUe?7:t<fUe?8:t<pUe?9:10},mUe={encode:tUe,decode:sUe,encodingLength:gUe},ZZ=mUe;const Aj=(t,e,n=0)=>(ZZ.encode(t,e,n),e),Sj=t=>ZZ.encodingLength(t),d3=(t,e)=>{const n=e.byteLength,r=Sj(t),s=r+Sj(n),i=new Uint8Array(s+n);return Aj(t,i,0),Aj(n,i,r),i.set(e,s),new yUe(t,n,e,i)};class yUe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const XZ=({name:t,code:e,encode:n})=>new wUe(t,e,n);class wUe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?d3(this.code,n):n.then(r=>d3(this.code,r))}else throw Error("Unknown type, must be binary type")}}const eX=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),bUe=XZ({name:"sha2-256",code:18,encode:eX("SHA-256")}),vUe=XZ({name:"sha2-512",code:19,encode:eX("SHA-512")});var EUe=Object.freeze({__proto__:null,sha256:bUe,sha512:vUe});const tX=0,_Ue="identity",nX=KZ,CUe=t=>d3(tX,nX(t)),AUe={code:tX,name:_Ue,encode:nX,digest:CUe};var SUe=Object.freeze({__proto__:null,identity:AUe});new TextEncoder,new TextDecoder;const Ij={...wLe,...vLe,..._Le,...ALe,...xLe,...ULe,...FLe,...WLe,...KLe,...eUe};({...EUe,...SUe});function IUe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function rX(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const xj=rX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),iO=rX("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=IUe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),xUe={utf8:xj,"utf-8":xj,hex:Ij.base16,latin1:iO,ascii:iO,binary:iO,...Ij};function NUe(t,e="utf8"){const n=xUe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var TUe=Object.defineProperty,RUe=(t,e,n)=>e in t?TUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jc=(t,e,n)=>RUe(t,typeof e!="symbol"?e+"":e,n);class PUe{constructor(e,n){this.core=e,this.logger=n,jc(this,"keychain",new Map),jc(this,"name",PMe),jc(this,"version",OMe),jc(this,"initialized",!1),jc(this,"storagePrefix",Bl),jc(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),jc(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),jc(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),jc(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Pe("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),jc(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=ks(n,this.name)}get context(){return lo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,QD(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?JD(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var OUe=Object.defineProperty,kUe=(t,e,n)=>e in t?OUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ys=(t,e,n)=>kUe(t,typeof e!="symbol"?e+"":e,n);class DUe{constructor(e,n,r){this.core=e,this.logger=n,ys(this,"name",TMe),ys(this,"keychain"),ys(this,"randomSessionIdentifier",a3()),ys(this,"initialized",!1),ys(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),ys(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),ys(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=F4(s);return vJ(i.publicKey)}),ys(this,"generateKeyPair",()=>{this.isInitialized();const s=C5e();return this.setPrivateKey(s.publicKey,s.privateKey)}),ys(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=F4(i),a=this.randomSessionIdentifier;return await fNe(a,s,RMe,o)}),ys(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=A5e(a,i);return this.setSymKey(c,o)}),ys(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||fS(s);return await this.keychain.set(o,s),o}),ys(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),ys(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),ys(this,"encode",async(s,i,o)=>{this.isInitialized();const a=FZ(o),c=ed(i);if(aj(a))return x5e(c,o==null?void 0:o.encoding);if(oj(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return S5e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),ys(this,"decode",async(s,i,o)=>{this.isInitialized();const a=T5e(i,o);if(aj(a)){const c=N5e(i,o==null?void 0:o.encoding);return Tg(c)}if(oj(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=I5e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Tg(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),ys(this,"getPayloadType",(s,i=wc)=>{const o=R_({encoded:s,encoding:i});return Ug(o.type)}),ys(this,"getPayloadSenderPublicKey",(s,i=wc)=>{const o=R_({encoded:s,encoding:i});return o.senderPublicKey?ro(o.senderPublicKey,vi):void 0}),this.core=e,this.logger=ks(n,this.name),this.keychain=r||new PUe(this.core,this.logger)}get context(){return lo(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(bj)}catch{e=a3(),await this.keychain.set(bj,e)}return NUe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var MUe=Object.defineProperty,LUe=Object.defineProperties,UUe=Object.getOwnPropertyDescriptors,Nj=Object.getOwnPropertySymbols,$Ue=Object.prototype.hasOwnProperty,BUe=Object.prototype.propertyIsEnumerable,h3=(t,e,n)=>e in t?MUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,FUe=(t,e)=>{for(var n in e||(e={}))$Ue.call(e,n)&&h3(t,n,e[n]);if(Nj)for(var n of Nj(e))BUe.call(e,n)&&h3(t,n,e[n]);return t},jUe=(t,e)=>LUe(t,UUe(e)),go=(t,e,n)=>h3(t,typeof e!="symbol"?e+"":e,n);class zUe extends U2e{constructor(e,n){super(e,n),this.logger=e,this.core=n,go(this,"messages",new Map),go(this,"messagesWithoutClientAck",new Map),go(this,"name",kMe),go(this,"version",DMe),go(this,"initialized",!1),go(this,"storagePrefix",Bl),go(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),go(this,"set",async(r,s,i)=>{this.isInitialized();const o=fl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===pS.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,jUe(FUe({},c),{[o]:s}))}return await this.persist(),o}),go(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),go(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),go(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=fl(s);return typeof i[o]<"u"}),go(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=fl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),go(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=ks(e,this.name),this.core=n}get context(){return lo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,QD(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,QD(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?JD(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?JD(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var WUe=Object.defineProperty,HUe=Object.defineProperties,GUe=Object.getOwnPropertyDescriptors,Tj=Object.getOwnPropertySymbols,qUe=Object.prototype.hasOwnProperty,VUe=Object.prototype.propertyIsEnumerable,f3=(t,e,n)=>e in t?WUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wA=(t,e)=>{for(var n in e||(e={}))qUe.call(e,n)&&f3(t,n,e[n]);if(Tj)for(var n of Tj(e))VUe.call(e,n)&&f3(t,n,e[n]);return t},oO=(t,e)=>HUe(t,GUe(e)),Ga=(t,e,n)=>f3(t,typeof e!="symbol"?e+"":e,n);class KUe extends $2e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ga(this,"events",new Da.EventEmitter),Ga(this,"name",MMe),Ga(this,"queue",new Map),Ga(this,"publishTimeout",Te.toMiliseconds(Te.ONE_MINUTE)),Ga(this,"initialPublishTimeout",Te.toMiliseconds(Te.ONE_SECOND*15)),Ga(this,"needsTransportRestart",!1),Ga(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||vj,c=ex(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||yp().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const y=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(as.publish,y),g(h))};this.relayer.events.on(as.publish,y);const m=Th(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),v(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await m,this.events.removeListener(as.publish,y)}catch(b){this.queue.set(d,oO(wA({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Th(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Ga(this,"on",(r,s)=>{this.events.on(r,s)}),Ga(this,"once",(r,s)=>{this.events.once(r,s)}),Ga(this,"off",(r,s)=>{this.events.off(r,s)}),Ga(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=ks(n,this.name),this.registerEventListeners()}get context(){return lo(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=vj,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:gv(ex().protocol).publish,params:wA({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};As((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),As((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(as.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,oO(wA({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(oO(wA({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(im.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(as.connection_stalled);return}this.checkQueue()}),this.relayer.on(as.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var YUe=Object.defineProperty,QUe=(t,e,n)=>e in t?YUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,km=(t,e,n)=>QUe(t,typeof e!="symbol"?e+"":e,n);class JUe{constructor(){km(this,"map",new Map),km(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),km(this,"get",e=>this.map.get(e)||[]),km(this,"exists",(e,n)=>this.get(e).includes(n)),km(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),km(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var ZUe=Object.defineProperty,XUe=Object.defineProperties,e$e=Object.getOwnPropertyDescriptors,Rj=Object.getOwnPropertySymbols,t$e=Object.prototype.hasOwnProperty,n$e=Object.prototype.propertyIsEnumerable,p3=(t,e,n)=>e in t?ZUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qb=(t,e)=>{for(var n in e||(e={}))t$e.call(e,n)&&p3(t,n,e[n]);if(Rj)for(var n of Rj(e))n$e.call(e,n)&&p3(t,n,e[n]);return t},aO=(t,e)=>XUe(t,e$e(e)),Un=(t,e,n)=>p3(t,typeof e!="symbol"?e+"":e,n);class r$e extends j2e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Un(this,"subscriptions",new Map),Un(this,"topicMap",new JUe),Un(this,"events",new Da.EventEmitter),Un(this,"name",zMe),Un(this,"version",WMe),Un(this,"pending",new Map),Un(this,"cached",[]),Un(this,"initialized",!1),Un(this,"storagePrefix",Bl),Un(this,"subscribeTimeout",Te.toMiliseconds(Te.ONE_MINUTE)),Un(this,"initialSubscribeTimeout",Te.toMiliseconds(Te.ONE_SECOND*15)),Un(this,"clientId"),Un(this,"batchSubscribeTopicsLimit",500),Un(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Un(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=ex(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Un(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Un(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Un(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Un(this,"on",(r,s)=>{this.events.on(r,s)}),Un(this,"once",(r,s)=>{this.events.once(r,s)}),Un(this,"off",(r,s)=>{this.events.off(r,s)}),Un(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Un(this,"start",async()=>{await this.onConnect()}),Un(this,"stop",async()=>{await this.onDisconnect()}),Un(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Un(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Un(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(im.pulse,async()=>{await this.checkPending()}),this.events.on(Co.created,async r=>{const s=Co.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Co.deleted,async r=>{const s=Co.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=ks(n,this.name),this.clientId=""}get context(){return lo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=ex(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Pn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Jn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:gv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Jn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},Te.toMiliseconds(Te.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Co.created,d),u(h.id))};this.events.on(Co.created,d);try{const h=await Th(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Co.created,d),u(h)}catch{}}),l=await Th(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(as.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:gv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Th(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(as.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:gv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Th(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(as.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:gv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,aO(Qb({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Qb({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Qb({},n)),this.topicMap.set(n.topic,e),this.events.emit(Co.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Co.deleted,aO(Qb({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Co.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Co.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>aO(Qb({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await uDe(Te.toMiliseconds(Te.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return fl(e+await this.getClientId())}}var s$e=Object.defineProperty,Pj=Object.getOwnPropertySymbols,i$e=Object.prototype.hasOwnProperty,o$e=Object.prototype.propertyIsEnumerable,g3=(t,e,n)=>e in t?s$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oj=(t,e)=>{for(var n in e||(e={}))i$e.call(e,n)&&g3(t,n,e[n]);if(Pj)for(var n of Pj(e))o$e.call(e,n)&&g3(t,n,e[n]);return t},an=(t,e,n)=>g3(t,typeof e!="symbol"?e+"":e,n);class a$e extends B2e{constructor(e){super(e),an(this,"protocol","wc"),an(this,"version",2),an(this,"core"),an(this,"logger"),an(this,"events",new Da.EventEmitter),an(this,"provider"),an(this,"messages"),an(this,"subscriber"),an(this,"publisher"),an(this,"name",UMe),an(this,"transportExplicitlyClosed",!1),an(this,"initialized",!1),an(this,"connectionAttemptInProgress",!1),an(this,"relayUrl"),an(this,"projectId"),an(this,"packageName"),an(this,"bundleId"),an(this,"hasExperiencedNetworkDisruption",!1),an(this,"pingTimeout"),an(this,"heartBeatTimeout",Te.toMiliseconds(Te.THIRTY_SECONDS+Te.FIVE_SECONDS)),an(this,"reconnectTimeout"),an(this,"connectPromise"),an(this,"reconnectInProgress",!1),an(this,"requestsInFlight",[]),an(this,"connectTimeout",Te.toMiliseconds(Te.ONE_SECOND*15)),an(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||yp().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),an(this,"resetPingTimeout",()=>{ZI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),an(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),an(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(as.connect)}),an(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),an(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(as.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),an(this,"registerProviderListeners",()=>{this.provider.on(Xo.payload,this.onPayloadHandler),this.provider.on(Xo.connect,this.onConnectHandler),this.provider.on(Xo.disconnect,this.onDisconnectHandler),this.provider.on(Xo.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?ks(e.logger,this.name):zC(am({level:e.logger||LMe})),this.messages=new zUe(this.logger,e.core),this.subscriber=new r$e(this,this.logger),this.publisher=new KUe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||qZ,this.projectId=e.projectId,Kke()?this.packageName=RF():Yke()&&(this.bundleId=RF()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return lo(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Jn.relay},pS.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Co.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Co.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Oj({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Th(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await wj())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Br(Te.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(as.message,e),await this.recordMessageEvent(e,pS.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Xo.disconnect,i),await Th(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Xo.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Xo.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Xo.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Te.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(ZI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ma(new SRe(eDe({sdkVersion:l3,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),iU(e)){if(!e.method.endsWith($Me))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Jn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Oj({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else ZN(e)&&this.events.emit(as.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,pS.inbound),this.events.emit(as.message,e))}async acknowledgePayload(e){const n=QN(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Xo.payload,this.onPayloadHandler),this.provider.off(Xo.connect,this.onConnectHandler),this.provider.off(Xo.disconnect,this.onDisconnectHandler),this.provider.off(Xo.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await wj();_Me(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(im.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&SMe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(as.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Te.toMiliseconds(BMe)))))}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function c$e(){}function kj(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Dj(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Mj(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const l$e="[object RegExp]",u$e="[object String]",d$e="[object Number]",h$e="[object Boolean]",Lj="[object Arguments]",f$e="[object Symbol]",p$e="[object Date]",g$e="[object Map]",m$e="[object Set]",y$e="[object Array]",w$e="[object Function]",b$e="[object ArrayBuffer]",cO="[object Object]",v$e="[object Error]",E$e="[object DataView]",_$e="[object Uint8Array]",C$e="[object Uint8ClampedArray]",A$e="[object Uint16Array]",S$e="[object Uint32Array]",I$e="[object BigUint64Array]",x$e="[object Int8Array]",N$e="[object Int16Array]",T$e="[object Int32Array]",R$e="[object BigInt64Array]",P$e="[object Float32Array]",O$e="[object Float64Array]";function k$e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function D$e(t,e,n){return mv(t,e,void 0,void 0,void 0,void 0,n)}function mv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return nE(t,e,i,o)}return nE(t,e,i,o)}function nE(t,e,n,r){if(Object.is(t,e))return!0;let s=Mj(t),i=Mj(e);if(s===Lj&&(s=cO),i===Lj&&(i=cO),s!==i)return!1;switch(s){case u$e:return t.toString()===e.toString();case d$e:{const c=t.valueOf(),l=e.valueOf();return k$e(c,l)}case h$e:case p$e:case f$e:return Object.is(t.valueOf(),e.valueOf());case l$e:return t.source===e.source&&t.flags===e.flags;case w$e:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case g$e:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!mv(l,e.get(c),c,t,e,n,r))return!1;return!0}case m$e:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>mv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case y$e:case _$e:case C$e:case A$e:case S$e:case I$e:case x$e:case N$e:case T$e:case R$e:case P$e:case O$e:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!mv(t[c],e[c],c,t,e,n,r))return!1;return!0}case b$e:return t.byteLength!==e.byteLength?!1:nE(new Uint8Array(t),new Uint8Array(e),n,r);case E$e:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:nE(new Uint8Array(t),new Uint8Array(e),n,r);case v$e:return t.name===e.name&&t.message===e.message;case cO:{if(!(nE(t.constructor,e.constructor,n,r)||kj(t)&&kj(e)))return!1;const c=[...Object.keys(t),...Dj(t)],l=[...Object.keys(e),...Dj(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!mv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function M$e(t,e){return D$e(t,e,c$e)}var L$e=Object.defineProperty,Uj=Object.getOwnPropertySymbols,U$e=Object.prototype.hasOwnProperty,$$e=Object.prototype.propertyIsEnumerable,m3=(t,e,n)=>e in t?L$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$j=(t,e)=>{for(var n in e||(e={}))U$e.call(e,n)&&m3(t,n,e[n]);if(Uj)for(var n of Uj(e))$$e.call(e,n)&&m3(t,n,e[n]);return t},Pi=(t,e,n)=>m3(t,typeof e!="symbol"?e+"":e,n);class lm extends F2e{constructor(e,n,r,s=Bl,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Pi(this,"map",new Map),Pi(this,"version",FMe),Pi(this,"cached",[]),Pi(this,"initialized",!1),Pi(this,"getKey"),Pi(this,"storagePrefix",Bl),Pi(this,"recentlyDeleted",[]),Pi(this,"recentlyDeletedLimit",200),Pi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!As(o)?this.map.set(this.getKey(o),o):X5e(o)?this.map.set(o.id,o):eMe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Pi(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Pi(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Pi(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>M$e(a[c],o[c]))):this.values)),Pi(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=$j($j({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Pi(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=ks(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return lo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Pe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var B$e=Object.defineProperty,F$e=(t,e,n)=>e in t?B$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qt=(t,e,n)=>F$e(t,typeof e!="symbol"?e+"":e,n);class j$e{constructor(e,n){this.core=e,this.logger=n,qt(this,"name",HMe),qt(this,"version",GMe),qt(this,"events",new VL),qt(this,"pairings"),qt(this,"initialized",!1),qt(this,"storagePrefix",Bl),qt(this,"ignoredPayloadTypes",[ju]),qt(this,"registeredMethods",[]),qt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),qt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),qt(this,"create",async r=>{this.isInitialized();const s=a3(),i=await this.core.crypto.setSymKey(s),o=Br(Te.FIVE_MINUTES),a={protocol:GZ},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=lj({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Xf.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),qt(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Vc.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=cj(r.uri);s.props.properties.topic=i,s.addTrace(Vc.pairing_uri_validation_success),s.addTrace(Vc.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Vc.existing_pairing),u.active)throw s.setError(ou.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Vc.pairing_not_expired)}const d=c||Br(Te.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Vc.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Xf.create,h),s.addTrace(Vc.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Vc.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(ou.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(ou.subscribe_pairing_topic_failure),f}return s.addTrace(Vc.subscribe_pairing_topic_success),h}),qt(this,"activate",async({topic:r})=>{this.isInitialized();const s=Br(Te.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),qt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=Gf();this.events.once(wn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),qt(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),qt(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),qt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),qt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Pn("USER_DISCONNECTED")),await this.deletePairing(s))}),qt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return lj({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),qt(this,"sendRequest",async(r,s,i)=>{const o=Nh(s,i),a=await this.core.crypto.encode(r,o),c=Kb[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),qt(this,"sendResult",async(r,s,i)=>{const o=QN(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Kb[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),qt(this,"sendError",async(r,s,i)=>{const o=JN(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Kb[c]?Kb[c].res:Kb.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),qt(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Pn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),qt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Hd(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),qt(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),qt(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),qt(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Xf.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),qt(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Qc(s)?this.events.emit(wn("pairing_ping",i),{}):ga(s)&&this.events.emit(wn("pairing_ping",i),{error:s.error})},500)}),qt(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Xf.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),qt(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Pn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),qt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Pn("WC_METHOD_UNSUPPORTED",r))}),qt(this,"isValidPair",(r,s)=>{var i;if(!Li(r)){const{message:a}=Pe("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(ou.malformed_pairing_uri),new Error(a)}if(!Z5e(r.uri)){const{message:a}=Pe("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(ou.malformed_pairing_uri),new Error(a)}const o=cj(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Pe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(ou.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Pe("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(ou.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Te.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(ou.pairing_expired);const{message:a}=Pe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),qt(this,"isValidPing",async r=>{if(!Li(r)){const{message:i}=Pe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),qt(this,"isValidDisconnect",async r=>{if(!Li(r)){const{message:i}=Pe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),qt(this,"isValidPairingTopic",async r=>{if(!kr(r,!1)){const{message:s}=Pe("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Pe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Hd(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Pe("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=ks(n,this.name),this.pairings=new lm(this.core,this.logger,this.name,this.storagePrefix)}get context(){return lo(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(as.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Jn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);iU(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):ZN(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(oa.expired,async e=>{const{topic:n}=aZ(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Xf.expire,{topic:n}))})}}var z$e=Object.defineProperty,W$e=(t,e,n)=>e in t?z$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ws=(t,e,n)=>W$e(t,typeof e!="symbol"?e+"":e,n);class H$e extends L2e{constructor(e,n){super(e,n),this.core=e,this.logger=n,ws(this,"records",new Map),ws(this,"events",new Da.EventEmitter),ws(this,"name",qMe),ws(this,"version",VMe),ws(this,"cached",[]),ws(this,"initialized",!1),ws(this,"storagePrefix",Bl),ws(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ws(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Br(Te.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Wa.created,o)}),ws(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=ga(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Wa.updated,s))}),ws(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),ws(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Wa.deleted,i)}}),this.persist()}),ws(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),ws(this,"on",(r,s)=>{this.events.on(r,s)}),ws(this,"once",(r,s)=>{this.events.once(r,s)}),ws(this,"off",(r,s)=>{this.events.off(r,s)}),ws(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=ks(n,this.name)}get context(){return lo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Nh(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Wa.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Wa.created,e=>{const n=Wa.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Wa.updated,e=>{const n=Wa.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Wa.deleted,e=>{const n=Wa.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(im.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{Te.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Wa.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var G$e=Object.defineProperty,q$e=(t,e,n)=>e in t?G$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,js=(t,e,n)=>q$e(t,typeof e!="symbol"?e+"":e,n);class V$e extends z2e{constructor(e,n){super(e,n),this.core=e,this.logger=n,js(this,"expirations",new Map),js(this,"events",new Da.EventEmitter),js(this,"name",KMe),js(this,"version",YMe),js(this,"cached",[]),js(this,"initialized",!1),js(this,"storagePrefix",Bl),js(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),js(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),js(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(oa.created,{target:i,expiration:o})}),js(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),js(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(oa.deleted,{target:s,expiration:i})}}),js(this,"on",(r,s)=>{this.events.on(r,s)}),js(this,"once",(r,s)=>{this.events.once(r,s)}),js(this,"off",(r,s)=>{this.events.off(r,s)}),js(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=ks(n,this.name)}get context(){return lo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return tDe(e);if(typeof e=="number")return nDe(e);const{message:n}=Pe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(oa.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Pe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Pe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;Te.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(oa.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(im.pulse,()=>this.checkExpirations()),this.events.on(oa.created,e=>{const n=oa.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(oa.expired,e=>{const n=oa.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(oa.deleted,e=>{const n=oa.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var K$e=Object.defineProperty,Y$e=(t,e,n)=>e in t?K$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Or=(t,e,n)=>Y$e(t,typeof e!="symbol"?e+"":e,n);class Q$e extends W2e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Or(this,"name",QMe),Or(this,"abortController"),Or(this,"isDevEnv"),Or(this,"verifyUrlV3",ZMe),Or(this,"storagePrefix",Bl),Or(this,"version",HZ),Or(this,"publicKey"),Or(this,"fetchPromise"),Or(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Te.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Or(this,"register",async s=>{if(!ob()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Rg(),u=this.startAbortTimer(Te.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",y),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const y=m=>{if(m.data&&typeof m.data=="string")try{const b=JSON.parse(m.data);if(b.type==="verify_attestation"){if($D(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",y),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",y,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Or(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if($D(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Or(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Te.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Or(this,"getVerifyUrl",s=>{let i=s||tE;return XMe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${tE}`),i=tE),i}),Or(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Te.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Or(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Or(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Or(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Or(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Or(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Or(this,"validateAttestation",(s,i)=>{const o=P5e(s,i.publicKey),a={hasExpired:Te.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=ks(n,this.name),this.abortController=new AbortController,this.isDevEnv=oU(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return lo(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Te.toMiliseconds(e))}}var J$e=Object.defineProperty,Z$e=(t,e,n)=>e in t?J$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bj=(t,e,n)=>Z$e(t,typeof e!="symbol"?e+"":e,n);class X$e extends H2e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,Bj(this,"context",eLe),Bj(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${tLe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=ks(n,this.context)}}var eBe=Object.defineProperty,Fj=Object.getOwnPropertySymbols,tBe=Object.prototype.hasOwnProperty,nBe=Object.prototype.propertyIsEnumerable,y3=(t,e,n)=>e in t?eBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jb=(t,e)=>{for(var n in e||(e={}))tBe.call(e,n)&&y3(t,n,e[n]);if(Fj)for(var n of Fj(e))nBe.call(e,n)&&y3(t,n,e[n]);return t},Jr=(t,e,n)=>y3(t,typeof e!="symbol"?e+"":e,n);class rBe extends G2e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Jr(this,"context",rLe),Jr(this,"storagePrefix",Bl),Jr(this,"storageVersion",nLe),Jr(this,"events",new Map),Jr(this,"shouldPersist",!1),Jr(this,"init",async()=>{if(!oU())try{const s={eventId:OF(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:iZ(this.core.relayer.protocol,this.core.relayer.version,l3)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Jr(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=OF(),u=this.core.projectId||"",d=Date.now(),h=Jb({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Jr(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Jb(Jb({},a),this.setMethods(a.eventId))}),Jr(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Jr(this,"setEventListeners",()=>{this.core.heartbeat.on(im.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Te.fromMiliseconds(Date.now())-Te.fromMiliseconds(s.timestamp)>sLe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Jr(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Jr(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Jr(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Jr(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Jr(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Jb(Jb({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Jr(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Jr(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${iLe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${l3}${i}`,{method:"POST",body:JSON.stringify(s)})}),Jr(this,"getAppDomain",()=>sZ().url),this.logger=ks(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var sBe=Object.defineProperty,jj=Object.getOwnPropertySymbols,iBe=Object.prototype.hasOwnProperty,oBe=Object.prototype.propertyIsEnumerable,w3=(t,e,n)=>e in t?sBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zj=(t,e)=>{for(var n in e||(e={}))iBe.call(e,n)&&w3(t,n,e[n]);if(jj)for(var n of jj(e))oBe.call(e,n)&&w3(t,n,e[n]);return t},jn=(t,e,n)=>w3(t,typeof e!="symbol"?e+"":e,n);let aBe=class sX extends O2e{constructor(e){var n;super(e),jn(this,"protocol",WZ),jn(this,"version",HZ),jn(this,"name",c3),jn(this,"relayUrl"),jn(this,"projectId"),jn(this,"customStoragePrefix"),jn(this,"events",new Da.EventEmitter),jn(this,"logger"),jn(this,"heartbeat"),jn(this,"relayer"),jn(this,"crypto"),jn(this,"storage"),jn(this,"history"),jn(this,"expirer"),jn(this,"pairing"),jn(this,"verify"),jn(this,"echoClient"),jn(this,"linkModeSupportedApps"),jn(this,"eventClient"),jn(this,"initialized",!1),jn(this,"logChunkController"),jn(this,"on",(a,c)=>this.events.on(a,c)),jn(this,"once",(a,c)=>this.events.once(a,c)),jn(this,"off",(a,c)=>this.events.off(a,c)),jn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),jn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Jn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||qZ,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=am({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:xMe.logger,name:c3}),{logger:i,chunkLoggerController:o}=GN({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=ks(i,this.name),this.heartbeat=new $Ae,this.crypto=new DUe(this,this.logger,e==null?void 0:e.keychain),this.history=new H$e(this,this.logger),this.expirer=new V$e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new T2e(zj(zj({},NMe),e==null?void 0:e.storageOptions)),this.relayer=new a$e({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new j$e(this,this.logger),this.verify=new Q$e(this,this.logger,this.storage),this.echoClient=new X$e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new rBe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new sX(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(jMe,r),n}get context(){return lo(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Ej,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Ej)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&IMe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const cBe=aBe,iX="wc",oX=2,aX="client",pU=`${iX}@${oX}:${aX}:`,lO={name:aX,logger:"error"},Wj="WALLETCONNECT_DEEPLINK_CHOICE",lBe="proposal",Hj="Proposal expired",uBe="session",Dm=Te.SEVEN_DAYS,dBe="engine",Zr={wc_sessionPropose:{req:{ttl:Te.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Te.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Te.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Te.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Te.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1119}}},uO={min:Te.FIVE_MINUTES,max:Te.SEVEN_DAYS},zc={idle:"IDLE",active:"ACTIVE"},Gj={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},hBe="request",fBe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],pBe="wc",gBe="auth",mBe="authKeys",yBe="pairingTopics",wBe="requests",lT=`${pBe}@${1.5}:${gBe}:`,gS=`${lT}:PUB_KEY`;var bBe=Object.defineProperty,vBe=Object.defineProperties,EBe=Object.getOwnPropertyDescriptors,qj=Object.getOwnPropertySymbols,_Be=Object.prototype.hasOwnProperty,CBe=Object.prototype.propertyIsEnumerable,b3=(t,e,n)=>e in t?bBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$n=(t,e)=>{for(var n in e||(e={}))_Be.call(e,n)&&b3(t,n,e[n]);if(qj)for(var n of qj(e))CBe.call(e,n)&&b3(t,n,e[n]);return t},ni=(t,e)=>vBe(t,EBe(e)),Ee=(t,e,n)=>b3(t,typeof e!="symbol"?e+"":e,n);class ABe extends Y2e{constructor(e){super(e),Ee(this,"name",dBe),Ee(this,"events",new VL),Ee(this,"initialized",!1),Ee(this,"requestQueue",{state:zc.idle,queue:[]}),Ee(this,"sessionRequestQueue",{state:zc.idle,queue:[]}),Ee(this,"requestQueueDelay",Te.ONE_SECOND),Ee(this,"expectedPairingMethodMap",new Map),Ee(this,"recentlyDeletedMap",new Map),Ee(this,"recentlyDeletedLimit",200),Ee(this,"relayMessageCache",[]),Ee(this,"pendingSessions",new Map),Ee(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Zr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Te.toMiliseconds(this.requestQueueDelay)))}),Ee(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ni($n({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=V5e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const S=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=S.active}}catch(S){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),S}if(!u||!h){const{topic:S,uri:x}=await this.client.core.pairing.create();u=S,d=x}if(!u){const{message:S}=Pe("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(S)}const f=await this.client.core.crypto.generateKeyPair(),p=Zr.wc_sessionPropose.req.ttl||Te.FIVE_MINUTES,g=Br(p),y=ni($n($n({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:GZ}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Yc()}),m=wn("session_connect",y.id),{reject:b,resolve:v,done:A}=Gf(p,Hj),C=({id:S})=>{S===y.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(y.id),this.events.emit(m,{error:{message:Hj,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(m,({error:S,session:x})=>{this.client.events.off("proposal_expire",C),S?b(S):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:y,throwOnFailedPublish:!0,clientRpcId:y.id}),await this.setProposal(y.id,y),{uri:d,approval:A}}),Ee(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),Ee(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Ha.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(I){throw o.setError(Df.no_internet_connection),I}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(I){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Df.proposal_not_found),I}try{await this.isValidApprove(n)}catch(I){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Df.session_approve_namespace_validation_failure),I}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:y,optionalNamespaces:m}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Ha.session_approve_started,properties:{topic:p,trace:[Ha.session_approve_started,Ha.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,C=await this.client.core.crypto.generateSharedKey(v,A),S=$n($n($n({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:Br(Dm)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=Jn.relay;b.addTrace(Ha.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:x})}catch(I){throw b.setError(Df.subscribe_session_topic_failure),I}b.addTrace(Ha.subscribe_session_topic_success);const T=ni($n({},S),{topic:C,requiredNamespaces:y,optionalNamespaces:m,pairingTopic:p,acknowledged:!1,self:S.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:Jn.relay});await this.client.session.set(C,T),b.addTrace(Ha.store_session);try{b.addTrace(Ha.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:S,throwOnFailedPublish:!0}).catch(I=>{throw b==null||b.setError(Df.session_settle_publish_failure),I}),b.addTrace(Ha.session_settle_publish_success),b.addTrace(Ha.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(I=>{throw b==null||b.setError(Df.session_approve_publish_failure),I}),b.addTrace(Ha.session_approve_publish_success)}catch(I){throw this.client.logger.error(I),this.client.session.delete(C,Pn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),I}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,Pn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,Br(Dm)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),Ee(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:Zr.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Pn("USER_DISCONNECTED")))}),Ee(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=Gf(),c=Yc(),l=yp().toString(),u=this.client.session.get(r).namespaces;return this.events.once(wn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),Ee(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Yc(),{done:i,resolve:o,reject:a}=Gf();return this.events.once(wn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Br(Dm)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),Ee(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=Zr.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Jn.relay&&await this.confirmOnlineStateOrThrow();const c=Yc(),l=yp().toString(),{done:u,resolve:d,reject:h}=Gf(o,"Request expired. Please try again.");this.events.once(wn("session_request",c),({error:m,result:b})=>{m?h(m):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:ni($n({},s),{expiryTimestamp:Br(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:ni($n({},s),{expiryTimestamp:Br(o)}),chainId:r},y=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async m=>{await this.sendRequest($n({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},y&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const v=await oDe(this.client.core.storage,Wj);await rDe({id:c,topic:i,wcDeepLink:v})}m()}),u()]).then(m=>m[2])}),Ee(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Qc(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):ga(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),Ee(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Yc(),i=yp().toString(),{done:o,resolve:a,reject:c}=Gf();this.events.once(wn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),Ee(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=yp().toString(),a=Yc();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),Ee(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Pn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Pe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),Ee(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>Q5e(r,n)))),Ee(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Ee(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Jn.link_mode:Jn.relay;o===Jn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:y}=n,m=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const A=await this.client.core.crypto.generateKeyPair(),C=fS(A);if(await Promise.all([this.client.auth.authKeys.set(gS,{responseTopic:C,publicKey:A}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:b})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:D}=jy(a[0]);let F=ZDe(D,"request",g);hS(m)&&(F=e3e(F,m.pop())),m.push(F)}const S=y&&y>Zr.wc_sessionAuthenticate.req.ttl?y:Zr.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:m},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Br(S)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},I={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Br(Zr.wc_sessionPropose.req.ttl),id:Yc()},{done:k,resolve:O,reject:B}=Gf(S,"Request expired"),G=Yc(),W=wn("session_connect",I.id),R=wn("session_request",G),N=async({error:D,session:F})=>{this.events.off(R,M),D?B(D):F&&O({session:F})},M=async D=>{var F,H,te;if(await this.deletePendingAuthRequest(G,{message:"fulfilled",code:0}),D.error){const fe=Pn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return D.error.code===fe.code?void 0:(this.events.off(W,N),B(D.error.message))}await this.deleteProposal(I.id),this.events.off(W,N);const{cacaos:re,responder:ie}=D.result,le=[],Ce=[];for(const fe of re){await FF({cacao:fe,projectId:this.client.core.projectId})||(this.client.logger.error(fe,"Signature verification failed"),B(Pn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:de}=fe,ve=hS(de.resources),ye=[ZD(de.iss)],Ae=XI(de.iss);if(ve){const we=jF(ve),me=zF(ve);le.push(...we),ye.push(...me)}for(const we of ye)Ce.push(`${we}:${Ae}`)}const X=await this.client.core.crypto.generateSharedKey(A,ie.publicKey);let ce;le.length>0&&(ce={topic:X,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:ie,controller:ie.publicKey,expiry:Br(Dm),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:fj([...new Set(le)],[...new Set(Ce)]),transportType:o},await this.client.core.relayer.subscribe(X,{transportType:o}),await this.client.session.set(X,ce),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:ie.metadata}),ce=this.client.session.get(X)),(F=this.client.metadata.redirect)!=null&&F.linkMode&&(H=ie.metadata.redirect)!=null&&H.linkMode&&(te=ie.metadata.redirect)!=null&&te.universal&&r&&(this.client.core.addLinkModeSupportedApp(ie.metadata.redirect.universal),this.client.session.update(X,{transportType:Jn.link_mode})),O({auths:re,session:ce})};this.events.once(W,N),this.events.once(R,M);let P;try{if(i){const D=Nh("wc_sessionAuthenticate",x,G);this.client.core.history.set(b,D);const F=await this.client.core.crypto.encode("",D,{type:ZC,encoding:Yd});P=yA(r,b,F)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:G}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:I,expiry:Zr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:I.id})])}catch(D){throw this.events.off(W,N),this.events.off(R,M),D}return await this.setProposal(I.id,I),await this.setAuthRequest(G,{request:ni($n({},x),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:P??v,response:k}}),Ee(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Mf.authenticated_session_approve_started]}});try{this.isInitialized()}catch(y){throw i.setError(Yb.no_internet_connection),y}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Yb.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Jn.relay;a===Jn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=fS(c),d={type:ju,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const y of s){if(!await FF({cacao:y,projectId:this.client.core.projectId})){i.setError(Yb.invalid_cacao);const C=Pn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(Mf.cacaos_verified);const{p:m}=y,b=hS(m.resources),v=[ZD(m.iss)],A=XI(m.iss);if(b){const C=jF(b),S=zF(b);h.push(...C),v.push(...S)}for(const C of v)f.push(`${C}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Mf.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Br(Dm),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:fj([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Mf.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(y){throw i.setError(Yb.subscribe_authenticated_session_topic_failure),y}i.addTrace(Mf.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Mf.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Mf.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(y){throw i.setError(Yb.authenticated_session_approve_publish_failure),y}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),Ee(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Jn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=fS(o),l={type:ju,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Zr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Pn("USER_DISCONNECTED"))}),Ee(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return mZ(r,s)}),Ee(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),Ee(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),Ee(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Pn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Wj).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Pn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=zc.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),Ee(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Df.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Pn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),Ee(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=zc.idle,this.client.events.emit("session_request_expire",{id:n}))}),Ee(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),Ee(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),Ee(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Br(Zr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),Ee(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Jn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),Ee(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Br(Zr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),Ee(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Nh(s,i,c);let f;const p=!!u;try{const m=p?Yd:wc;f=await this.client.core.crypto.encode(r,h,{encoding:m})}catch(m){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),m}let g;if(fBe.includes(s)){const m=fl(JSON.stringify(h)),b=fl(f);g=await this.client.core.verify.register({id:b,decryptedId:m})}const y=Zr[s].req;if(y.attestation=g,o&&(y.ttl=o),a&&(y.id=a),this.client.core.history.set(r,h),p){const m=yA(u,r,f);await global.Linking.openURL(m,this.client.name)}else{const m=Zr[s].req;o&&(m.ttl=o),a&&(m.id=a),m.tvf=ni($n({},d),{correlationId:h.id}),l?(m.internal=ni($n({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,m)):this.client.core.relayer.publish(r,f,m).catch(b=>this.client.logger.error(b))}return h.id}),Ee(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=QN(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Yd:wc;u=await this.client.core.crypto.encode(s,l,ni($n({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=yA(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=Zr[p].res;g.tvf=ni($n({},f),{correlationId:r}),o?(g.internal=ni($n({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(y=>this.client.logger.error(y))}await this.client.core.history.resolve(l)}),Ee(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=JN(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Yd:wc;u=await this.client.core.crypto.encode(s,l,ni($n({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=yA(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Zr[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),Ee(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Hd(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Hd(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),Ee(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),Ee(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),Ee(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===zc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=zc.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=zc.idle}),Ee(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Ee(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Ee(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Pe("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),Ee(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Ee(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(ou.proposal_listener_not_found)),this.isValidConnect($n({},s.params));const u=a.expiryTimestamp||Br(Zr.wc_sessionPropose.req.ttl),d=$n({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:fl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Vc.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Zr.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),Ee(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Qc(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(ga(r)){await this.client.proposal.delete(i,Pn("USER_DISCONNECTED"));const o=wn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),Ee(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(y=>y.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=ni($n($n($n({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Jn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(wn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Ee(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Qc(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(wn("session_approve",s),{})):ga(r)&&(await this.client.session.delete(n,Pn("USER_DISCONNECTED")),this.events.emit(wn("session_approve",s),{error:r.error}))}),Ee(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Vb.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Pn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate($n({topic:n},s));try{Vb.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw Vb.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),Ee(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),Ee(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=wn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Qc(r)?this.events.emit(wn("session_update",s),{}):ga(r)&&this.events.emit(wn("session_update",s),{error:r.error})}),Ee(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Br(Dm)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),Ee(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=wn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Qc(r)?this.events.emit(wn("session_extend",s),{}):ga(r)&&this.events.emit(wn("session_extend",s),{error:r.error})}),Ee(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),Ee(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=wn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Qc(r)?this.events.emit(wn("session_ping",s),{}):ga(r)&&this.events.emit(wn("session_ping",s),{error:r.error})},500)}),Ee(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(as.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Pn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),Ee(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest($n({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:fl(JSON.stringify(Nh("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Jn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),Ee(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=wn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Qc(r)?this.events.emit(wn("session_request",s),{result:r.result}):ga(r)&&this.events.emit(wn("session_request",s),{error:r.error})}),Ee(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Vb.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit($n({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Vb.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),Ee(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Qc(r)?this.events.emit(wn("session_request",s),{result:r.result}):ga(r)&&this.events.emit(wn("session_request",s),{error:r.error})}),Ee(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:fl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Jn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:ju,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Zr.wc_sessionAuthenticate.autoReject,appLink:h})}}),Ee(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),Ee(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=zc.idle,this.processSessionRequestQueue()},Te.toMiliseconds(this.requestQueueDelay))}),Ee(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=wn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(wn("session_request",i.request.id),{error:r})})}),Ee(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===zc.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=zc.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),Ee(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),Ee(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Nh("wc_sessionPropose",ni($n({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),Ee(this,"isValidConnect",async n=>{if(!Li(n)){const{message:l}=Pe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(As(r)||await this.isValidPairingTopic(r),!cMe(c)){const{message:l}=Pe("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!As(s)&&Zh(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!As(i)&&Zh(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),As(o)||this.validateSessionProps(o,"sessionProperties"),!As(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),Ee(this,"validateNamespaces",(n,r)=>{const s=aMe(n,"connect()",r);if(s)throw new Error(s.message)}),Ee(this,"isValidApprove",async n=>{if(!Li(n))throw new Error(Pe("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=rO(s,"approve()");if(l)throw new Error(l.message);const u=mj(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!kr(i,!0)){const{message:d}=Pe("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(As(o)||this.validateSessionProps(o,"sessionProperties"),!As(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),Ee(this,"isValidReject",async n=>{if(!Li(n)){const{message:i}=Pe("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!uMe(s)){const{message:i}=Pe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),Ee(this,"isValidSessionSettleRequest",n=>{if(!Li(n)){const{message:l}=Pe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!zZ(r)){const{message:l}=Pe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=tMe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=rO(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Hd(o)){const{message:l}=Pe("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),Ee(this,"isValidUpdate",async n=>{if(!Li(n)){const{message:c}=Pe("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=rO(s,"update()");if(o)throw new Error(o.message);const a=mj(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),Ee(this,"isValidExtend",async n=>{if(!Li(n)){const{message:s}=Pe("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),Ee(this,"isValidRequest",async n=>{if(!Li(n)){const{message:c}=Pe("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!gj(a,i)){const{message:c}=Pe("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!dMe(s)){const{message:c}=Pe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!pMe(a,i,s.method)){const{message:c}=Pe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!wMe(o,uO)){const{message:c}=Pe("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${uO.min} and ${uO.max}`);throw new Error(c)}}),Ee(this,"isValidRespond",async n=>{var r;if(!Li(n)){const{message:o}=Pe("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!hMe(i)){const{message:o}=Pe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),Ee(this,"isValidPing",async n=>{if(!Li(n)){const{message:s}=Pe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Ee(this,"isValidEmit",async n=>{if(!Li(n)){const{message:a}=Pe("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!gj(o,i)){const{message:a}=Pe("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!fMe(s)){const{message:a}=Pe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!gMe(o,i,s.name)){const{message:a}=Pe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),Ee(this,"isValidDisconnect",async n=>{if(!Li(n)){const{message:s}=Pe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Ee(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!kr(s,!1))throw new Error("uri is required parameter");if(!kr(i,!1))throw new Error("domain is required parameter");if(!kr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>jy(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=jy(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Ee(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||tE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Jn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Ee(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Pe("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),Ee(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),Ee(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),Ee(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Pe("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),Ee(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Jn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Ee(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),Ee(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=PF(n,"topic")||"",s=decodeURIComponent(PF(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Jn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),Ee(this,"registerLinkModeListeners",async()=>{var n;if(oU()||Sf()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),Ee(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(Gj).includes(s.method)}),Ee(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return ni($n({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),Ee(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Ee(this,"extractTxHashesFromResult",(n,r)=>{try{const s=Gj[n];if(typeof r=="string")return[r];const i=r[s.key];if(Jh(i))return n==="solana_signAllTransactions"?i.map(o=>$De(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Pe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(as.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(gS)?this.client.auth.authKeys.get(gS):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Jn.link_mode?Yd:wc});iU(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:fl(r)})):ZN(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(oa.expired,async e=>{const{topic:n,id:r}=aZ(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Pe("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Pe("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Xf.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Xf.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!kr(e,!1)){const{message:n}=Pe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Pe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Hd(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Pe("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!kr(e,!1)){const{message:n}=Pe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Pe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Hd(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Pe("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Pe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(kr(e,!1)){const{message:n}=Pe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Pe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!lMe(e)){const{message:n}=Pe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Pe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Hd(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Pe("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class SBe extends lm{constructor(e,n){super(e,n,lBe,pU),this.core=e,this.logger=n}}let IBe=class extends lm{constructor(e,n){super(e,n,uBe,pU),this.core=e,this.logger=n}};class xBe extends lm{constructor(e,n){super(e,n,hBe,pU,r=>r.id),this.core=e,this.logger=n}}class NBe extends lm{constructor(e,n){super(e,n,mBe,lT,()=>gS),this.core=e,this.logger=n}}class TBe extends lm{constructor(e,n){super(e,n,yBe,lT),this.core=e,this.logger=n}}class RBe extends lm{constructor(e,n){super(e,n,wBe,lT,r=>r.id),this.core=e,this.logger=n}}var PBe=Object.defineProperty,OBe=(t,e,n)=>e in t?PBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dO=(t,e,n)=>OBe(t,typeof e!="symbol"?e+"":e,n);class kBe{constructor(e,n){this.core=e,this.logger=n,dO(this,"authKeys"),dO(this,"pairingTopics"),dO(this,"requests"),this.authKeys=new NBe(this.core,this.logger),this.pairingTopics=new TBe(this.core,this.logger),this.requests=new RBe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var DBe=Object.defineProperty,MBe=(t,e,n)=>e in t?DBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vt=(t,e,n)=>MBe(t,typeof e!="symbol"?e+"":e,n);let LBe=class cX extends K2e{constructor(e){super(e),Vt(this,"protocol",iX),Vt(this,"version",oX),Vt(this,"name",lO.name),Vt(this,"metadata"),Vt(this,"core"),Vt(this,"logger"),Vt(this,"events",new Da.EventEmitter),Vt(this,"engine"),Vt(this,"session"),Vt(this,"proposal"),Vt(this,"pendingRequest"),Vt(this,"auth"),Vt(this,"signConfig"),Vt(this,"on",(r,s)=>this.events.on(r,s)),Vt(this,"once",(r,s)=>this.events.once(r,s)),Vt(this,"off",(r,s)=>this.events.off(r,s)),Vt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),Vt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Vt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Vt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),Vt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),Vt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||lO.name,this.metadata=Jke(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:zC(am({level:(e==null?void 0:e.logger)||lO.logger}));this.core=(e==null?void 0:e.core)||new cBe(e),this.logger=ks(n,this.name),this.session=new IBe(this.core,this.logger),this.proposal=new SBe(this.core,this.logger),this.pendingRequest=new xBe(this.core,this.logger),this.engine=new ABe(this),this.auth=new kBe(this.core,this.logger)}static async init(e){const n=new cX(e);return await n.initialize(),n}get context(){return lo(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},Te.toMiliseconds(Te.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const Vj="error",UBe="wss://relay.walletconnect.org",$Be="wc",BBe="universal_provider",bA=`${$Be}@2:${BBe}:`,lX="https://rpc.walletconnect.org/v1/",ey="generic",FBe=`${lX}bundler`,La={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function jBe(){}function gU(t){return t==null||typeof t!="object"&&typeof t!="function"}function mU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zBe(t){if(gU(t))return t;if(Array.isArray(t)||mU(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function Kj(t){return typeof t=="object"&&t!==null}function uX(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function dX(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const WBe="[object RegExp]",hX="[object String]",fX="[object Number]",pX="[object Boolean]",gX="[object Arguments]",HBe="[object Symbol]",GBe="[object Date]",qBe="[object Map]",VBe="[object Set]",KBe="[object Array]",YBe="[object ArrayBuffer]",QBe="[object Object]",JBe="[object DataView]",ZBe="[object Uint8Array]",XBe="[object Uint8ClampedArray]",e6e="[object Uint16Array]",t6e="[object Uint32Array]",n6e="[object Int8Array]",r6e="[object Int16Array]",s6e="[object Int32Array]",i6e="[object Float32Array]",o6e="[object Float64Array]";function a6e(t,e){return _y(t,void 0,t,new Map,e)}function _y(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(gU(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=_y(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,_y(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(_y(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(mU(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=_y(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),ep(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),ep(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),ep(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,ep(o,t,n,r,s),o}if(typeof t=="object"&&c6e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),ep(o,t,n,r,s),o}return t}function ep(t,e,n=t,r,s){const i=[...Object.keys(e),...uX(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=_y(e[a],a,n,r,s))}}function c6e(t){switch(dX(t)){case gX:case KBe:case YBe:case JBe:case pX:case GBe:case i6e:case o6e:case n6e:case r6e:case s6e:case qBe:case fX:case QBe:case WBe:case VBe:case hX:case HBe:case ZBe:case XBe:case e6e:case t6e:return!0;default:return!1}}function l6e(t,e){return a6e(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case fX:case hX:case pX:{const o=new t.constructor(t==null?void 0:t.valueOf());return ep(o,t),o}case gX:{const o={};return ep(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function Yj(t){return l6e(t)}function Qj(t){return t!==null&&typeof t=="object"&&dX(t)==="[object Arguments]"}function u6e(t){return mU(t)}function d6e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function h6e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=v3(s,o,r,new Map)}return s}function v3(t,e,n,r){if(gU(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return zBe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...uX(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(Qj(a)&&(a={...a}),Qj(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=Yj(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||Kj(c)&&Kj(a)?t[o]=v3(c,a,n,r):c==null&&d6e(a)?t[o]=v3({},a,n,r):c==null&&u6e(a)?t[o]=Yj(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function f6e(t,...e){return h6e(t,...e,jBe)}var p6e=Object.defineProperty,g6e=Object.defineProperties,m6e=Object.getOwnPropertyDescriptors,Jj=Object.getOwnPropertySymbols,y6e=Object.prototype.hasOwnProperty,w6e=Object.prototype.propertyIsEnumerable,Zj=(t,e,n)=>e in t?p6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vA=(t,e)=>{for(var n in e||(e={}))y6e.call(e,n)&&Zj(t,n,e[n]);if(Jj)for(var n of Jj(e))w6e.call(e,n)&&Zj(t,n,e[n]);return t},b6e=(t,e)=>g6e(t,m6e(e));function zo(t,e,n){var r;const s=jy(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${lX}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function um(t){return t.includes(":")?t.split(":")[1]:t}function mX(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function v6e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function EA(t={},e={}){const n=Xj(t),r=Xj(e);return f6e(n,r)}function Xj(t){var e,n,r,s,i;const o={};if(!Zh(t))return o;for(const[a,c]of Object.entries(t)){const l=aT(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Ey(a);o[f]=b6e(vA(vA({},o[f]),c),{chains:Rl(l,(e=o[f])==null?void 0:e.chains),methods:Rl(u,(n=o[f])==null?void 0:n.methods),events:Rl(d,(r=o[f])==null?void 0:r.events)}),(Zh(h)||Zh(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=vA(vA({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function e9(t){return t.includes(":")?t.split(":")[2]:t}function t9(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=aT(n)?[n]:r.chains?r.chains:mX(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function hO(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const yX={},hn=t=>yX[t],fO=(t,e)=>{yX[t]=e};var E6e=Object.defineProperty,_6e=(t,e,n)=>e in t?E6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mm=(t,e,n)=>_6e(t,typeof e!="symbol"?e+"":e,n);class C6e{constructor(e){Mm(this,"name","polkadot"),Mm(this,"client"),Mm(this,"httpProviders"),Mm(this,"events"),Mm(this,"namespace"),Mm(this,"chainId"),this.namespace=e.namespace,this.events=hn("events"),this.client=hn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=um(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,hn("disableProviderPing")))}}var A6e=Object.defineProperty,S6e=Object.defineProperties,I6e=Object.getOwnPropertyDescriptors,n9=Object.getOwnPropertySymbols,x6e=Object.prototype.hasOwnProperty,N6e=Object.prototype.propertyIsEnumerable,E3=(t,e,n)=>e in t?A6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,r9=(t,e)=>{for(var n in e||(e={}))x6e.call(e,n)&&E3(t,n,e[n]);if(n9)for(var n of n9(e))N6e.call(e,n)&&E3(t,n,e[n]);return t},s9=(t,e)=>S6e(t,I6e(e)),Lm=(t,e,n)=>E3(t,typeof e!="symbol"?e+"":e,n);class T6e{constructor(e){Lm(this,"name","eip155"),Lm(this,"client"),Lm(this,"chainId"),Lm(this,"namespace"),Lm(this,"httpProviders"),Lm(this,"events"),this.namespace=e.namespace,this.events=hn("events"),this.client=hn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||zo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,hn("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(um(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:s9(r9({},u.sessionProperties||{}),{capabilities:s9(r9({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Nh("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${FBe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var R6e=Object.defineProperty,P6e=(t,e,n)=>e in t?R6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Um=(t,e,n)=>P6e(t,typeof e!="symbol"?e+"":e,n);class O6e{constructor(e){Um(this,"name","solana"),Um(this,"client"),Um(this,"httpProviders"),Um(this,"events"),Um(this,"namespace"),Um(this,"chainId"),this.namespace=e.namespace,this.events=hn("events"),this.client=hn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=um(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,hn("disableProviderPing")))}}var k6e=Object.defineProperty,D6e=(t,e,n)=>e in t?k6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$m=(t,e,n)=>D6e(t,typeof e!="symbol"?e+"":e,n);class M6e{constructor(e){$m(this,"name","cosmos"),$m(this,"client"),$m(this,"httpProviders"),$m(this,"events"),$m(this,"namespace"),$m(this,"chainId"),this.namespace=e.namespace,this.events=hn("events"),this.client=hn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=um(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,hn("disableProviderPing")))}}var L6e=Object.defineProperty,U6e=(t,e,n)=>e in t?L6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bm=(t,e,n)=>U6e(t,typeof e!="symbol"?e+"":e,n);class $6e{constructor(e){Bm(this,"name","algorand"),Bm(this,"client"),Bm(this,"httpProviders"),Bm(this,"events"),Bm(this,"namespace"),Bm(this,"chainId"),this.namespace=e.namespace,this.events=hn("events"),this.client=hn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||zo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Ma(new Pc(r,hn("disableProviderPing")))}}var B6e=Object.defineProperty,F6e=(t,e,n)=>e in t?B6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fm=(t,e,n)=>F6e(t,typeof e!="symbol"?e+"":e,n);class j6e{constructor(e){Fm(this,"name","cip34"),Fm(this,"client"),Fm(this,"httpProviders"),Fm(this,"events"),Fm(this,"namespace"),Fm(this,"chainId"),this.namespace=e.namespace,this.events=hn("events"),this.client=hn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=um(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,hn("disableProviderPing")))}}var z6e=Object.defineProperty,W6e=(t,e,n)=>e in t?z6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jm=(t,e,n)=>W6e(t,typeof e!="symbol"?e+"":e,n);class H6e{constructor(e){jm(this,"name","elrond"),jm(this,"client"),jm(this,"httpProviders"),jm(this,"events"),jm(this,"namespace"),jm(this,"chainId"),this.namespace=e.namespace,this.events=hn("events"),this.client=hn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=um(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,hn("disableProviderPing")))}}var G6e=Object.defineProperty,q6e=(t,e,n)=>e in t?G6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zm=(t,e,n)=>q6e(t,typeof e!="symbol"?e+"":e,n);class V6e{constructor(e){zm(this,"name","multiversx"),zm(this,"client"),zm(this,"httpProviders"),zm(this,"events"),zm(this,"namespace"),zm(this,"chainId"),this.namespace=e.namespace,this.events=hn("events"),this.client=hn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=um(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,hn("disableProviderPing")))}}var K6e=Object.defineProperty,Y6e=(t,e,n)=>e in t?K6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wm=(t,e,n)=>Y6e(t,typeof e!="symbol"?e+"":e,n);class Q6e{constructor(e){Wm(this,"name","near"),Wm(this,"client"),Wm(this,"httpProviders"),Wm(this,"events"),Wm(this,"namespace"),Wm(this,"chainId"),this.namespace=e.namespace,this.events=hn("events"),this.client=hn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||zo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace);return typeof r>"u"?void 0:new Ma(new Pc(r,hn("disableProviderPing")))}}var J6e=Object.defineProperty,Z6e=(t,e,n)=>e in t?J6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hm=(t,e,n)=>Z6e(t,typeof e!="symbol"?e+"":e,n);class X6e{constructor(e){Hm(this,"name","tezos"),Hm(this,"client"),Hm(this,"httpProviders"),Hm(this,"events"),Hm(this,"namespace"),Hm(this,"chainId"),this.namespace=e.namespace,this.events=hn("events"),this.client=hn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||zo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace);return typeof r>"u"?void 0:new Ma(new Pc(r))}}var e8e=Object.defineProperty,t8e=(t,e,n)=>e in t?e8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gm=(t,e,n)=>t8e(t,typeof e!="symbol"?e+"":e,n);class n8e{constructor(e){Gm(this,"name",ey),Gm(this,"client"),Gm(this,"httpProviders"),Gm(this,"events"),Gm(this,"namespace"),Gm(this,"chainId"),this.namespace=e.namespace,this.events=hn("events"),this.client=hn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(La.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=jy(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||zo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ma(new Pc(r,hn("disableProviderPing")))}}var r8e=Object.defineProperty,s8e=Object.defineProperties,i8e=Object.getOwnPropertyDescriptors,i9=Object.getOwnPropertySymbols,o8e=Object.prototype.hasOwnProperty,a8e=Object.prototype.propertyIsEnumerable,_3=(t,e,n)=>e in t?r8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_A=(t,e)=>{for(var n in e||(e={}))o8e.call(e,n)&&_3(t,n,e[n]);if(i9)for(var n of i9(e))a8e.call(e,n)&&_3(t,n,e[n]);return t},pO=(t,e)=>s8e(t,i8e(e)),ea=(t,e,n)=>_3(t,typeof e!="symbol"?e+"":e,n);let c8e=class wX{constructor(e){ea(this,"client"),ea(this,"namespaces"),ea(this,"optionalNamespaces"),ea(this,"sessionProperties"),ea(this,"scopedProperties"),ea(this,"events",new VL),ea(this,"rpcProviders",{}),ea(this,"session"),ea(this,"providerOpts"),ea(this,"logger"),ea(this,"uri"),ea(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:zC(am({level:(e==null?void 0:e.logger)||Vj})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new wX(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:_A({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,QN(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Pn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=t9(this.session.namespaces);this.namespaces=EA(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=t9(s.namespaces);return this.namespaces=EA(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===ey?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Jh(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await LBe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Vj,relayUrl:this.providerOpts.relayUrl||UBe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Ey(n)))];fO("client",this.client),fO("events",this.events),fO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=v6e(n,this.session),s=mX(r),i=EA(this.namespaces,this.optionalNamespaces),o=pO(_A({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new T6e({namespace:o});break;case"algorand":this.rpcProviders[n]=new $6e({namespace:o});break;case"solana":this.rpcProviders[n]=new O6e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new M6e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new C6e({namespace:o});break;case"cip34":this.rpcProviders[n]=new j6e({namespace:o});break;case"elrond":this.rpcProviders[n]=new H6e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new V6e({namespace:o});break;case"near":this.rpcProviders[n]=new Q6e({namespace:o});break;case"tezos":this.rpcProviders[n]=new X6e({namespace:o});break;default:this.rpcProviders[ey]?this.rpcProviders[ey].updateNamespace(o):this.rpcProviders[ey]=new n8e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Jh(o)&&this.events.emit("accountsChanged",o.map(e9))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Ey(o),l=hO(o)!==hO(a)?`${c}:${hO(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=pO(_A({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",pO(_A({},Pn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(La.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[ey]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=EA(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Ey(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Ey(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(e9);if(!Jh(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${bA}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${bA}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${bA}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(bA)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var o9={};const l8e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof o9<"u"?o9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},C3={filterOutDuplicatesByRDNS(t){const e=_e.state.enableEIP6963?Fe.state.connectors:[],n=Qe.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&it.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Fe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Qe.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Fe.state,{featuredWalletIds:n}=_e.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=_e.state.features)==null?void 0:c.connectMethodsOrder),r=e||Fe.state.connectors;if(n)return n;const{injected:s,announced:i}=mS.getConnectorsByType(r,ot.state.recommended,ot.state.featured),o=s.filter(mS.showConnector),a=i.filter(mS.showConnector);return o.length||a.length?["wallet","email","social"]:l8e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ot.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&ot.state.excludedWallets.some(r=>XN.isLowerCaseMatch(r.name,t.name));return e||n}},mS={getConnectorsByType(t,e,n){const{customWallets:r}=_e.state,s=Qe.getRecentWallets(),i=C3.filterOutDuplicateWallets(e),o=C3.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&ot.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&ot.state.excludedWallets.some(i=>XN.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!it.isMobile()||it.isMobile()&&!e&&!pt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(z.state.chains.values()).some(n=>Fe.getConnectorId(n.namespace)===je.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=_e.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=mS.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:_e.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),p=new Set(f.map(m=>m.type)),g=c.filter(m=>p.has(m)).map(m=>({type:m,isEnabled:!0})),y=f.filter(({type:m})=>!g.some(({type:v})=>v===m));return Array.from(new Set([...g,...y].map(({type:m})=>m)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yS=globalThis,yU=yS.ShadowRoot&&(yS.ShadyCSS===void 0||yS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,wU=Symbol(),a9=new WeakMap;let bX=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==wU)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(yU&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=a9.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&a9.set(n,e))}return e}toString(){return this.cssText}};const ra=t=>new bX(typeof t=="string"?t:t+"",void 0,wU),zu=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new bX(n,t,wU)},u8e=(t,e)=>{if(yU)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=yS.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},c9=yU?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return ra(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:d8e,defineProperty:h8e,getOwnPropertyDescriptor:f8e,getOwnPropertyNames:p8e,getOwnPropertySymbols:g8e,getPrototypeOf:m8e}=Object,Xh=globalThis,l9=Xh.trustedTypes,y8e=l9?l9.emptyScript:"",gO=Xh.reactiveElementPolyfillSupport,rE=(t,e)=>t,A3={toAttribute(t,e){switch(e){case Boolean:t=t?y8e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},vX=(t,e)=>!d8e(t,e),u9={attribute:!0,type:String,converter:A3,reflect:!1,useDefault:!1,hasChanged:vX};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Xh.litPropertyMetadata??(Xh.litPropertyMetadata=new WeakMap);let ty=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=u9){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&h8e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=f8e(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??u9}static _$Ei(){if(this.hasOwnProperty(rE("elementProperties")))return;const e=m8e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(rE("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(rE("properties"))){const n=this.properties,r=[...p8e(n),...g8e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(c9(s))}else e!==void 0&&n.push(c9(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return u8e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:A3).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:A3;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??vX)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};ty.elementStyles=[],ty.shadowRootOptions={mode:"open"},ty[rE("elementProperties")]=new Map,ty[rE("finalized")]=new Map,gO==null||gO({ReactiveElement:ty}),(Xh.reactiveElementVersions??(Xh.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sE=globalThis,nx=sE.trustedTypes,d9=nx?nx.createPolicy("lit-html",{createHTML:t=>t}):void 0,EX="$lit$",Qd=`lit$${Math.random().toFixed(9).slice(2)}$`,_X="?"+Qd,w8e=`<${_X}>`,$g=document,P_=()=>$g.createComment(""),O_=t=>t===null||typeof t!="object"&&typeof t!="function",bU=Array.isArray,b8e=t=>bU(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",mO=`[ 	
\f\r]`,Zb=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,h9=/-->/g,f9=/>/g,Lf=RegExp(`>|${mO}(?:([^\\s"'>=/]+)(${mO}*=${mO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),p9=/'/g,g9=/"/g,CX=/^(?:script|style|textarea|title)$/i,AX=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),eVe=AX(1),tVe=AX(2),A0=Symbol.for("lit-noChange"),cs=Symbol.for("lit-nothing"),m9=new WeakMap,bp=$g.createTreeWalker($g,129);function SX(t,e){if(!bU(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return d9!==void 0?d9.createHTML(e):e}const v8e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Zb;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Zb?u[1]==="!--"?o=h9:u[1]!==void 0?o=f9:u[2]!==void 0?(CX.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Lf):u[3]!==void 0&&(o=Lf):o===Lf?u[0]===">"?(o=s??Zb,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Lf:u[3]==='"'?g9:p9):o===g9||o===p9?o=Lf:o===h9||o===f9?o=Zb:(o=Lf,s=void 0);const f=o===Lf&&t[a+1].startsWith("/>")?" ":"";i+=o===Zb?c+w8e:d>=0?(r.push(l),c.slice(0,d)+EX+c.slice(d)+Qd+f):c+Qd+(d===-2?a:f)}return[SX(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class k_{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=v8e(e,n);if(this.el=k_.createElement(l,r),bp.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=bp.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(EX)){const h=u[o++],f=s.getAttribute(d).split(Qd),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?_8e:p[1]==="?"?C8e:p[1]==="@"?A8e:uT}),s.removeAttribute(d)}else d.startsWith(Qd)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(CX.test(s.tagName)){const d=s.textContent.split(Qd),h=d.length-1;if(h>0){s.textContent=nx?nx.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],P_()),bp.nextNode(),c.push({type:2,index:++i});s.append(d[h],P_())}}}else if(s.nodeType===8)if(s.data===_X)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Qd,d+1))!==-1;)c.push({type:7,index:i}),d+=Qd.length-1}i++}}static createElement(e,n){const r=$g.createElement("template");return r.innerHTML=e,r}}function S0(t,e,n=t,r){var o,a;if(e===A0)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=O_(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=S0(t,s._$AS(t,e.values),s,r)),e}class E8e{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??$g).importNode(n,!0);bp.currentNode=s;let i=bp.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new e1(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new S8e(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=bp.nextNode(),o++)}return bp.currentNode=$g,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class e1{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=cs,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=S0(this,e,n),O_(e)?e===cs||e==null||e===""?(this._$AH!==cs&&this._$AR(),this._$AH=cs):e!==this._$AH&&e!==A0&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):b8e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==cs&&O_(this._$AH)?this._$AA.nextSibling.data=e:this.T($g.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=k_.createElement(SX(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new E8e(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=m9.get(e.strings);return n===void 0&&m9.set(e.strings,n=new k_(e)),n}k(e){bU(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new e1(this.O(P_()),this.O(P_()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class uT{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=cs,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=cs}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=S0(this,e,n,0),o=!O_(e)||e!==this._$AH&&e!==A0,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=S0(this,a[r+c],n,c),l===A0&&(l=this._$AH[c]),o||(o=!O_(l)||l!==this._$AH[c]),l===cs?e=cs:e!==cs&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===cs?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class _8e extends uT{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===cs?void 0:e}}class C8e extends uT{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==cs)}}class A8e extends uT{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=S0(this,e,n,0)??cs)===A0)return;const r=this._$AH,s=e===cs&&r!==cs||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==cs&&(r===cs||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class S8e{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){S0(this,e)}}const yO=sE.litHtmlPolyfillSupport;yO==null||yO(k_,e1),(sE.litHtmlVersions??(sE.litHtmlVersions=[])).push("3.3.1");const I8e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new e1(e.insertBefore(P_(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sg=globalThis;let wS=class extends ty{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=I8e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return A0}};var mz;wS._$litElement$=!0,wS.finalized=!0,(mz=sg.litElementHydrateSupport)==null||mz.call(sg,{LitElement:wS});const wO=sg.litElementPolyfillSupport;wO==null||wO({LitElement:wS});(sg.litElementVersions??(sg.litElementVersions=[])).push("4.2.1");let iE,ef,tf;function rVe(t,e){iE=document.createElement("style"),ef=document.createElement("style"),tf=document.createElement("style"),iE.textContent=zy(t).core.cssText,ef.textContent=zy(t).dark.cssText,tf.textContent=zy(t).light.cssText,document.head.appendChild(iE),document.head.appendChild(ef),document.head.appendChild(tf),IX(e)}function IX(t){ef&&tf&&(t==="light"?(ef.removeAttribute("media"),tf.media="enabled"):(tf.removeAttribute("media"),ef.media="enabled"))}function x8e(t){iE&&ef&&tf&&(iE.textContent=zy(t).core.cssText,ef.textContent=zy(t).dark.cssText,tf.textContent=zy(t).light.cssText)}function zy(t){return{core:zu`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${ra(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${ra((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${ra((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${ra((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${ra((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:zu`
      :root {
        --w3m-color-mix: ${ra((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${ra(Du(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${ra(Du(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:zu`
      :root {
        --w3m-color-mix: ${ra((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${ra(Du(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${ra(Du(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const sVe=zu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,iVe=zu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,oVe=zu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,yv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},xX=Gpe({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function t1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const y9=t1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),w9=t1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});t1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});t1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});t1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const N8e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},bS={getMethodsByChainNamespace(t){return N8e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case y9.caipNetworkId:u.chains.push(y9.deprecatedCaipNetworkId);break;case w9.caipNetworkId:u.chains.push(w9.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await Qv.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let NX=class{constructor({provider:e,namespace:n}){this.id=je.CONNECTOR_ID.WALLET_CONNECT,this.name=FI.ConnectorNamesMap[je.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=FI.ConnectorImageIds[je.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=z.getCaipNetworks.bind(z),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=_e.state.universalProviderConfigOverride,s=bS.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Xv.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:T8e})}};const T8e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let R8e=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>z.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:je.CONNECTOR_ID.AUTH,type:"AUTH",name:je.CONNECTOR_NAMES.AUTH,provider:e,imageId:FI.ConnectorImageIds[je.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ye.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ye.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof NX);if(!e)throw new Error("WalletConnectConnector not found");return e}};class P8e extends R8e{setUniversalProvider(e){this.addConnector(new NX({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>it.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&On.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ye.state.balanceLoading&&e.chainId===((c=z.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ye.state.balance||"0.00",symbol:Ye.state.balanceSymbol||""};const s=(await Ye.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===je.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:CJ.encode(new TextEncoder().encode(r)),pubkey:s}},(a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=z.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===je.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:xa(n.id)}]}))}catch(u){if(u.code===yv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===yv.ERROR_INVALID_CHAIN_ID||u.code===yv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===yv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:xa(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const O8e=["email","socials","swaps","onramp","activity","reownBranding"],CA={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?On.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?On.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?On.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?On.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?On.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?On.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?On.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?On.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?On.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},k8e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=CA[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=CA[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return CA[t].processApi(e)},processFallbackFeature(t,e){return CA[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await ot.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?On.DEFAULT_REMOTE_FEATURES:On.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of O8e){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),On.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;bl.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class D8e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=z.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=z.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=z.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return z.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>z.getCaipNetworks(n),this.getActiveChainNamespace=()=>z.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{z.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>z.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>z.state.activeChain===n||!n?z.state.activeCaipAddress:z.getAccountProp("caipAddress",n),this.setClientId=n=>{ft.setClientId(n)},this.getProvider=n=>Rn.getProvider(n),this.getProviderType=n=>Rn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ye.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ye.setCaipAddress(n,r),n&&_e.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ye.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ye.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ye.setProfileImage(n,r)},this.setUser=(n,r)=>{Ye.setUser(n,r)},this.resetAccount=n=>{Ye.resetAccount(n)},this.setCaipNetwork=n=>{z.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{z.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ye.setAllAccounts(n,r),_e.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ye.setStatus(n,r),Fe.isConnected()?Qe.setConnectionStatus("connected"):Qe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>z.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Fe.state.allConnectors,...n];Fe.setConnectors(r)},this.setConnections=(n,r)=>{pt.setConnections(n,r)},this.fetchIdentity=n=>ft.fetchIdentity(n),this.getReownName=n=>Qv.getNamesForAddress(n),this.getConnectors=()=>Fe.getConnectors(),this.getConnectorImage=n=>NQ.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Rn.getProviderId(r),i=n?{...n,type:s}:void 0;Ye.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!z.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ye.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ye.removeAddressLabel(n,r)},this.getAddress=n=>z.state.activeChain===n||!n?Ye.state.address:z.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>z.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{z.resetNetwork(n)},this.addConnector=n=>{Fe.addConnector(n)},this.resetWcConnection=()=>{pt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ye.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ye.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{z.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ye.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{_e.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await k8e.fetchRemoteFeatures(e),_e.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&ND.setOnrampProviders(this.remoteFeatures.onramp),((n=_e.state.remoteFeatures)!=null&&n.email||Array.isArray((r=_e.state.remoteFeatures)==null?void 0:r.socials)&&((s=_e.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await ot.fetchAllowedOrigins();if(e&&it.isClient()){const n=window.location.origin;bS.isOriginAllowed(n,e,yv.DEFAULT_ALLOWED_ANCESTORS)||bl.open(hl.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else bl.open(hl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,or.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&zi.setThemeMode(e.themeMode),e.themeVariables&&zi.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");z.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&z.setActiveCaipNetwork(n)}initializeConnectionController(e){pt.setWcBasic(e.basic??!1)}initializeConnectorController(){Fe.initialize(this.chainNamespaces)}initializeProjectSettings(e){_e.setProjectId(e.projectId),_e.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;_e.setDebug(e.debug!==!1),_e.setEnableWalletConnect(e.enableWalletConnect!==!1),_e.setEnableWalletGuide(e.enableWalletGuide!==!1),_e.setEnableWallets(e.enableWallets!==!1),_e.setEIP6963Enabled(e.enableEIP6963!==!1),_e.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),_e.setEnableAuthLogger(e.enableAuthLogger!==!1),_e.setCustomRpcUrls(e.customRpcUrls),_e.setEnableEmbedded(e.enableEmbedded),_e.setAllWallets(e.allWallets),_e.setIncludeWalletIds(e.includeWalletIds),_e.setExcludeWalletIds(e.excludeWalletIds),_e.setFeaturedWalletIds(e.featuredWalletIds),_e.setTokens(e.tokens),_e.setTermsConditionsUrl(e.termsConditionsUrl),_e.setPrivacyPolicyUrl(e.privacyPolicyUrl),_e.setCustomWallets(e.customWallets),_e.setFeatures(e.features),_e.setAllowUnsupportedChain(e.allowUnsupportedChain),_e.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),_e.setPreferUniversalLinks(e.experimental_preferUniversalLinks),_e.setDefaultAccountTypes(e.defaultAccountTypes);const n=Qe.getPreferredAccountTypes()||{},r={..._e.state.defaultAccountTypes,...n};Ye.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),_e.setMetadata(e.metadata),_e.setDisableAppend(e.disableAppend),_e.setEnableEmbedded(e.enableEmbedded),_e.setSIWX(e.siwx),!e.projectId){bl.open(hl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===je.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");_e.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return it.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Zm.getUnsupportedNetwork(`${n}:${e}`);z.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Zm.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Zm.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Zm.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Zm.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Rn.getProvider(e),s=Rn.getProviderId(e),{caipAddress:i}=z.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Qe.removeConnectedNamespace(e),Rn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Fe.removeConnectorId(e),z.resetAccount(e),z.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=z.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Qe.setConnectedNamespaces([...z.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Fe.setConnectorId(Wi.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,y,m,b,v,A;const c=z.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(S=>S.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((m=(y=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:y.http)==null?void 0:m[0])||((A=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:A[0])});if(!h)return;Qe.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ye.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=z.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Qe.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=DRe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));pn.resetSend(),pt.resetWcConnection(),await Xv.clearSessions(),Fe.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Qe.deleteConnectedSocialProvider(),or.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(z.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ye.state.address,provider:Rn.getProvider(z.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(On.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(z.state.activeChain),s=Rn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===je.CHAIN.EVM){const n=this.getAdapter(z.state.activeChain),r=Rn.getProvider(z.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ye.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:z.state.activeChain}),Ye.state.profileImage||!1},getEnsAddress:async e=>await bS.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(z.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Rn.getProvider(z.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ye.state.address||this.updateNativeBalance(Ye.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},pt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Rn.getProviderId(z.state.activeChain)===Wi.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Rn.getProvider(n),i=Rn.getProviderId(n);if(e.chainNamespace===z.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Wi.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Ed.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new P8e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Qe.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Qe.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=z.state.activeChain===e,c=z.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ye.state.address,i=z.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=z.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=z.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=z.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===je.CHAIN.EVM&&it.isSafeApp()&&Fe.setConnectorId(je.CONNECTOR_ID.SAFE,e);const n=Fe.getConnectorId(e);switch(this.setStatus("connecting",e),n){case je.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case je.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Fe.getConnectorId(e),s=this.getCaipNetwork(e),o=Fe.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([it.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=z.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=Ed.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=Ed.validateCaipAddress(o),{chainId:f,address:p}=Ed.parseCaipAddress(h);if(Rn.setProviderId(n,Wi.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&z.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==je.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:z.state.activeCaipNetwork});Rn.setProvider(n,g)}else Rn.setProvider(n,this.universalProvider);Fe.setConnectorId(je.CONNECTOR_ID.WALLET_CONNECT,n),Qe.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await z.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Ed.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>it.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Rn.setProviderId(s,e),Rn.setProvider(s,n),Fe.setConnectorId(r,s)}async syncAllAccounts(e){const n=Fe.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===z.state.activeChain,r=z.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Qe.getActiveNetworkProps(),c=i||a,l=((d=z.state.activeCaipNetwork)==null?void 0:d.name)===je.UNSUPPORTED_NETWORK_NAME,u=z.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(y=>y.id.toString()===c.toString()),p=this.getCaipNetworks().find(y=>y.chainNamespace===o);if(!u&&!f&&!p){const y=this.getApprovedCaipNetworkIds()||[],m=y.find(v=>{var A;return((A=Ed.parseCaipNetworkId(v))==null?void 0:A.chainId)===c.toString()}),b=y.find(v=>{var A;return((A=Ed.parseCaipNetworkId(v))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===m),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===z.state.activeChain?_e.state.enableNetworkSwitch&&!_e.state.allowUnsupportedChain&&((h=z.state.activeCaipNetwork)==null?void 0:h.name)===je.UNSUPPORTED_NETWORK_NAME?z.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),XN.isLowerCaseMatch(s,Ye.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Fe.getConnectorId(e),r=Rn.getProviderId(e);if(r===Wi.CONNECTOR_TYPE_ANNOUNCED||r===Wi.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Wi.CONNECTOR_TYPE_WALLET_CONNECT){const i=Rn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===je.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===je.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!AQ.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=z.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=URe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};_e.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await c8e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{pt.setUri(e)}),this.universalProvider.on("connect",pt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),pt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(bS.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&it.isCaipAddress(r[0])&&this.syncAccount(Ed.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&it.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){or.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(hl.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=hl.ALERT_ERRORS[o];a&&(bl.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&pt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return ls.open({...e,data:{swap:e.arguments}})}return ls.open(e)}async close(){await this.injectModalUi(),ls.close()}setLoading(e,n){ls.setLoading(e,n)}async disconnect(e){await pt.disconnect(e)}getSIWX(){return _e.state.siwx}getError(){return""}getChainId(){var e;return(e=z.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){bl.open(hl.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await z.switchActiveNetwork(n)}getWalletProvider(){return z.state.activeChain?Rn.state.providers[z.state.activeChain]:null}getWalletProviderType(){return Rn.getProviderId(z.state.activeChain)}subscribeProviders(e){return Rn.subscribeProviders(e)}getThemeMode(){return zi.state.themeMode}getThemeVariables(){return zi.state.themeVariables}setThemeMode(e){zi.setThemeMode(e),IX(zi.state.themeMode)}setTermsConditionsUrl(e){_e.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){_e.setPrivacyPolicyUrl(e)}setThemeVariables(e){zi.setThemeVariables(e),x8e(zi.state.themeVariables)}subscribeTheme(e){return zi.subscribe(e)}getWalletInfo(){return Ye.state.connectedWalletInfo}getAccount(e){var o;const n=Fe.getAuthConnector(e),r=z.getAccountData(e),s=z.state.activeChain,i=Qe.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:it.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===je.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Qe.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?z.subscribeChainProp("accountState",r,n):z.subscribe(r),Fe.subscribe(r)}subscribeNetwork(e){return z.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Ye.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ye.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){z.subscribeKey("activeCaipNetwork",e)}getState(){return Nl.state}subscribeState(e){return Nl.subscribe(e)}showErrorMessage(e){fc.showError(e)}showSuccessMessage(e){fc.showSuccess(e)}getEvent(){return{...or.state}}subscribeEvents(e){return or.subscribe(e)}replace(e){Dt.replace(e)}redirect(e){Dt.push(e)}popTransactionStack(e){Dt.popTransactionStack(e)}isOpen(){return ls.state.open}isTransactionStackEmpty(){return Dt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){_e.setFeatures(e)}updateRemoteFeatures(e){_e.setRemoteFeatures(e)}updateOptions(e){const r={..._e.state||{},...e};_e.setOptions(r)}setConnectMethodsOrder(e){_e.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){_e.setWalletFeaturesOrder(e)}setCollapseWallets(e){_e.setCollapseWallets(e)}setSocialsOrder(e){_e.setSocialsOrder(e)}getConnectMethodsOrder(){return C3.getConnectOrderMethod(_e.state.features,Fe.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||z.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&z.removeNetwork(e,n)}}let b9=!1;class M8e extends D8e{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{ko.checkIfRequestExists(n)?ko.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ts.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Ts.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=ko.checkIfRequestIsSafe(r),i=Ye.state.address,o=z.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=z.state.activeChain;Fe.getConnectorId(n)===je.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=z.state.activeChain,s=r===je.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=_e.state.defaultAccountTypes[r],o=(l=Ye.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;XN.isLowerCaseMatch(n.address,Ye.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ye.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>it.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[it.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ye.state.user||{},username:n},z.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,z.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,z.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=je.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Ye.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=zi.getSnapshot(),l=_e.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Du(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:je.CONNECTOR_ID.AUTH,info:{name:je.CONNECTOR_ID.AUTH},type:Wi.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=z.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):Fe.getConnectorId(n)===je.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Qe.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!it.isTelegram())return;const r=Qe.getTelegramSocialProvider();if(!r||!it.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ye.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Fe.getAuthConnector();r&&o&&(this.setLoading(!0,e),await pt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Qe.setConnectedSocialProvider(r),Qe.removeTelegramSocialProvider(),or.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!je.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=i2e.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:hl.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?bl.open(hl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?bl.open(hl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&bl.open(hl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Nl.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&ot.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=z.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Rn.getProvider(r),u=Rn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Rn.getProviderId(n)===Wi.CONNECTOR_TYPE_AUTH,u=Rn.getProviderId(r),d=u===Wi.CONNECTOR_TYPE_AUTH,h=je.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(z.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:je.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Wi.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Wi.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Nl.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==je.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Rn.getProviderId(e);if(n===Wi.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Qe.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(it.isClient()&&!b9)try{const e={...On.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),it.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!_e.state.disableAppend&&!_e.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}b9=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!it.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(qs(()=>import("./embedded-wallet-DXErgpsE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(qs(()=>import("./email-BoVpWVE7.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(qs(()=>import("./socials-BfTV5nQ0.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(qs(()=>import("./swaps-ZsRIMIVH.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(qs(()=>import("./send-Dm8I1JQS.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(qs(()=>import("./receive-BtlLktUN.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(qs(()=>import("./onramp-Bm-ojRyo.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(qs(()=>import("./transactions-DKDATpP4.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(qs(()=>import("./index-BWQd-4ZD.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,qs(()=>import("./index-Ch2XPuwa.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),qs(()=>import("./w3m-modal-ByfQrccX.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Ud;function L8e(t){t&&(Ud=t)}function dT(){if(!Ud)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Ud==null?void 0:Ud.open(n))}async function e(){await(Ud==null?void 0:Ud.close())}return{open:t,close:e}}const U8e="1.7.8";let AA;function $8e(t){return AA||(AA=new M8e({...t,sdkVersion:it.generateSdkVersion(t.adapters??[],"react",U8e)}),L8e(AA)),AA}const B8e=Rc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),v9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],F8e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=B8e({isOpen:t}),{open:i}=dT(),o=L.useRef(null),[a,c]=L.useState([]),[l,u]=L.useState(!0),[d,h]=L.useState(null),[f,p]=L.useState("all"),[g,y]=L.useState(1),[m,b]=L.useState(1),[v,A]=L.useState(0),[C,S]=L.useState(null),[x,T]=L.useState(v9[0]),[I,k]=L.useState(!1),[O,B]=L.useState(null),G=L.useCallback(async()=>{var D,F;try{if((D=window.solana)!=null&&D.isPhantom){const H=await window.solana.connect();B(H.publicKey.toString());return}if((F=window.solflare)!=null&&F.isSolflare){const H=await window.solflare.connect();B(H.publicKey.toString());return}i()}catch(H){console.error("Failed to connect Solana wallet:",H),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}k(!1)},[i]);L.useEffect(()=>{var D,F;(D=window.solana)!=null&&D.publicKey?B(window.solana.publicKey.toString()):(F=window.solflare)!=null&&F.publicKey&&B(window.solflare.publicKey.toString())},[]),L.useEffect(()=>{t&&(async()=>{var F;u(!0),h(null);try{let H,te=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!O){k(!0),u(!1);return}te=O||void 0,H=await CQ(x.slug,50),console.log("Fetched Solana NFTs from collection:",H.data.length),f==="owned"&&O&&(console.log("Filtering for owner:",O),console.log("Sample NFT owner data:",(F=H.data[0])==null?void 0:F.owners),console.log("All NFTs owner data:",H.data.map(ie=>({name:ie.name,owners:ie.owners,owner_of:ie.owner_of}))),H.data.some(ie=>ie.owners&&ie.owners.length>0)?(H.data=H.data.filter(ie=>{const le=ie.owners.some(Ce=>Ce.owner_of&&Ce.owner_of.toLowerCase()===O.toLowerCase());return le&&console.log("Found owned NFT:",ie.name),le}),console.log("NFTs after filtering:",H.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?H=await GL(x.slug,50,te):H=await HL(x.slug,g,50,te);c(H.data),b(H.totalPages),A(H.totalCount)}catch(H){H instanceof Error?h(H.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,O]),L.useEffect(()=>{I&&G()},[I,G]);const W=D=>new Date(D).toLocaleDateString(),R=D=>x.api==="opensea-solana"&&(!D.owners||D.owners.length===0)?"Owner data unavailable":D.owners.length>0?`${D.owners[0].owner_of.substring(0,6)}...`:"N/A",N=()=>{n&&n()},M=async D=>{if(x.api==="opensea"&&x.chain)try{const F=await _Q(x.chain,D.address,D.token_id.toString()),H={...D,attributes:JSON.stringify(F.traits||[])};S(H)}catch(F){console.error("Failed to fetch full NFT details",F),S(D)}else S(D)},P=D=>{T(D),y(1)};return t?w.jsxs(w.Fragment,{children:[w.jsx($C,{nodeRef:o,handle:`.${s.header}`,children:w.jsxs("div",{ref:o,className:s.popup,children:[w.jsxs("div",{className:s.header,children:[w.jsx("span",{children:"LAWB NFT GALLERY"}),w.jsxs("div",{className:s.titleBarButtons,children:[w.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),w.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),w.jsx("div",{className:s.collectionSelector,children:v9.map(D=>w.jsx("button",{className:`${s.collectionButton} ${x.slug===D.slug?"active":""}`,onClick:()=>P(D),children:D.name},D.slug))}),w.jsxs("div",{className:s.content,children:[w.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[w.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),w.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),w.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!O,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||O?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||O?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&w.jsx("button",{onClick:()=>{G()},style:{background:O?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:O?"white":"black",marginLeft:"auto"},children:O?`Solana: ${O.slice(0,4)}...${O.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!O&&w.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&w.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?w.jsx("div",{children:"Loading NFTs..."}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?w.jsx("div",{children:"No NFTs found."}):w.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(D=>w.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{M(D)},children:[w.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${D.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),w.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:w.jsxs("strong",{children:["#",D.token_id]})}),w.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",R(D)]}),w.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",W(D.created_at)]})]},D.id))}),f!=="recent"&&m>1&&w.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[w.jsx("button",{onClick:()=>y(D=>Math.max(1,D-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),w.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",m]}),w.jsx("button",{onClick:()=>y(D=>Math.min(m,D+1)),disabled:g===m,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===m?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&w.jsx(t1e,{nft:C,onClose:()=>S(null)})]}):null};var SA,j8e=new Uint8Array(16);function z8e(){if(!SA&&(SA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!SA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return SA(j8e)}const W8e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function H8e(t){return typeof t=="string"&&W8e.test(t)}var bs=[];for(var bO=0;bO<256;++bO)bs.push((bO+256).toString(16).substr(1));function G8e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(bs[t[e+0]]+bs[t[e+1]]+bs[t[e+2]]+bs[t[e+3]]+"-"+bs[t[e+4]]+bs[t[e+5]]+"-"+bs[t[e+6]]+bs[t[e+7]]+"-"+bs[t[e+8]]+bs[t[e+9]]+"-"+bs[t[e+10]]+bs[t[e+11]]+bs[t[e+12]]+bs[t[e+13]]+bs[t[e+14]]+bs[t[e+15]]).toLowerCase();if(!H8e(n))throw TypeError("Stringified UUID is invalid");return n}function q8e(t,e,n){t=t||{};var r=t.random||(t.rng||z8e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,G8e(r)}const V8e=Rc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),K8e=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],Y8e=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],mo=500;function TX(){const t=V8e(),e=L.useRef(null),[n,r]=L.useState(null),[s,i]=L.useState(""),[o,a]=L.useState(""),[c,l]=L.useState(36),[u,d]=L.useState(36),[h,f]=L.useState(!1),[p,g]=L.useState(!1),[y,m]=L.useState(!1),[b,v]=L.useState(!1),[A,C]=L.useState(!1),[S,x]=L.useState([]),[T,I]=L.useState(null),k=L.useRef(null),[O,B]=L.useState(null),G=async X=>{const ce=X.getContext("2d");if(!ce)return;ce.clearRect(0,0,X.width,X.height),n?await new Promise(de=>{const ve=new window.Image;ve.crossOrigin="anonymous",ve.onload=()=>{const ye=Math.min(X.width/ve.width,X.height/ve.height),Ae=(X.width-ve.width*ye)/2,we=(X.height-ve.height*ye)/2;ce.drawImage(ve,Ae,we,ve.width*ye,ve.height*ye),de()},ve.onerror=()=>de(),ve.src=n}):(ce.fillStyle="#333",ce.fillRect(0,0,X.width,X.height)),(de=>{de.textAlign="center",de.strokeStyle="black",de.lineWidth=3,de.fillStyle="white";const ve=(ye,Ae)=>{const we=ye.toUpperCase().split(" "),me=[];let Xe=we[0];for(let Zt=1;Zt<we.length;Zt++){const jt=we[Zt];de.measureText(Xe+" "+jt).width<Ae?Xe+=" "+jt:(me.push(Xe),Xe=jt)}return me.push(Xe),me};s&&(de.font=`${c}px Impact`,ve(s,mo-20).forEach((Ae,we)=>{const me=c+we*c*1.2;de.strokeText(Ae,mo/2,me),de.fillText(Ae,mo/2,me)})),o&&(de.font=`${u}px Impact`,ve(o,mo-20).reverse().forEach((Ae,we)=>{const me=mo-u*1.2*(we+1);de.strokeText(Ae,mo/2,me),de.fillText(Ae,mo/2,me)}))})(ce),await Promise.all(S.map(de=>new Promise(ve=>{const ye=new window.Image;ye.src=de.src,ye.onload=()=>{ce.save(),ce.translate(de.x,de.y),ce.rotate(de.rotation*Math.PI/180),ce.scale(de.scale,de.scale),ce.drawImage(ye,-40,-40,80,80),ce.restore(),ve()},ye.onerror=()=>ve()})));try{h&&W(X),p&&R(X),y&&N(X)}catch(de){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",de),f(!1),g(!1),m(!1)}},W=X=>{const ce=X.getContext("2d");if(!ce)return;const fe=ce.getImageData(0,0,X.width,X.height),de=fe.data;for(let ve=0;ve<de.length;ve+=4){const ye=de[ve],Ae=de[ve+1],we=de[ve+2],me=(ye+Ae+we)/3,Xe=1.8;de[ve]=Math.min(255,me+(ye-me)*Xe),de[ve+1]=Math.min(255,me+(Ae-me)*Xe*.7),de[ve+2]=Math.min(255,me+(we-me)*Xe*.4);const Zt=1.3;de[ve]=Math.min(255,Math.max(0,de[ve]*Zt)),de[ve+1]=Math.min(255,Math.max(0,de[ve+1]*Zt)),de[ve+2]=Math.min(255,Math.max(0,de[ve+2]*Zt))}ce.putImageData(fe,0,0)},R=X=>{const ce=X.getContext("2d");if(!ce)return;const fe=4,ve=ce.getImageData(0,0,X.width,X.height).data,ye=new Uint8ClampedArray(ve);for(let Ae=0;Ae<X.height;Ae+=fe)for(let we=0;we<X.width;we+=fe){const me=(Ae*X.width+we)*4,Xe=ve[me],Zt=ve[me+1],jt=ve[me+2],fn=ve[me+3];for(let Ht=0;Ht<fe&&Ae+Ht<X.height;Ht++)for(let nr=0;nr<fe&&we+nr<X.width;nr++){const uo=((Ae+Ht)*X.width+(we+nr))*4;ye[uo]=Xe,ye[uo+1]=Zt,ye[uo+2]=jt,ye[uo+3]=fn}}ce.putImageData(new ImageData(ye,X.width,X.height),0,0)},N=X=>{const ce=X.getContext("2d");if(!ce)return;const fe=ce.getImageData(0,0,X.width,X.height),de=fe.data;for(let ve=0;ve<de.length;ve+=4){const ye=(Math.random()-.5)*50;de[ve]=Math.max(0,Math.min(255,de[ve]+ye)),de[ve+1]=Math.max(0,Math.min(255,de[ve+1]+ye)),de[ve+2]=Math.max(0,Math.min(255,de[ve+2]+ye))}ce.putImageData(fe,0,0)};L.useEffect(()=>{e.current&&G(e.current)},[G]);const M=X=>{var fe;const ce=(fe=X.target.files)==null?void 0:fe[0];ce&&r(URL.createObjectURL(ce))},P=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),m(!1)},D=async()=>{const X=e.current;if(!X)return;await G(X);const ce=document.createElement("a");ce.download="meme.png",ce.href=X.toDataURL("image/png"),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},F=async X=>{C(!0),v(!1);try{console.log("Fetching NFTs for collection:",X);let ce;if(X.api==="opensea"){console.log("Using OpenSea API for:",X.slug);const fe=await GL(X.slug,50);ce=fe.data,console.log("OpenSea response:",fe)}else if(X.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",X.slug);const fe=await CQ(X.slug,50);ce=fe.data,console.log("OpenSea Solana response:",fe)}else{console.log("Using Scatter API for:",X.slug);const fe=await HL(X.slug,1,50);ce=fe.data,console.log("Scatter response:",fe)}if(ce&&ce.length>0){const fe=ce[Math.floor(Math.random()*ce.length)],de=fe.image||fe.image_url||fe.image_url_shrunk;console.log("Selected NFT:",fe),console.log("Image URL:",de),r(de)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ce){console.error("Error fetching NFTs:",ce),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},H=X=>{const ce={id:q8e(),src:X,x:80,y:80,scale:1,rotation:0};x(fe=>fe.length>=2||fe.some(de=>de.src===X&&!de.id.startsWith("upload-"))?fe:[...fe,ce]),B(ce.id)},te=X=>{var fe;const ce=(fe=X.target.files)==null?void 0:fe[0];if(ce){const de=URL.createObjectURL(ce);H(de)}},re=(X,ce,fe)=>{x(de=>de.map(ve=>{if(ve.id!==X)return ve;let ye=ve.x+ce/1.2,Ae=ve.y+fe/1.2;const we=40*ve.scale,me=40*ve.scale;return ye=Math.max(we,Math.min(mo-we,ye)),Ae=Math.max(me,Math.min(mo-me,Ae)),{...ve,x:ye,y:Ae}}))},ie=(X,ce,fe,de,ve)=>{x(ye=>ye.map(Ae=>{if(Ae.id!==X)return Ae;const we=Ae.x,me=Ae.y,Xe=Math.atan2(ve-me,de-we)*180/Math.PI;return{...Ae,rotation:fe+(Xe-ce)*.5}}))},le=X=>{x(ce=>ce.filter(fe=>fe.id!==X))},Ce=(X,ce)=>{x(fe=>fe.map(de=>de.id===X?{...de,scale:Math.max(.2,de.scale*(1+(ce-1)*.2))}:de))};return w.jsxs("div",{className:t.container,children:[w.jsxs("div",{className:t.header,children:[w.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),w.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",w.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),w.jsxs("div",{className:t.content,children:[w.jsxs("div",{className:t.section,children:[w.jsx("div",{className:t.sectionTitle,children:"Collections"}),w.jsxs("div",{className:t.row,children:[w.jsxs("div",{className:t.dropdown,children:[w.jsx("button",{className:t.button,onClick:()=>v(X=>!X),children:"Collections"}),b&&w.jsx("div",{className:t.dropdownContent,children:K8e.map(X=>w.jsx("div",{className:t.dropdownItem,onClick:()=>{F(X)},children:X.name},X.id))})]}),w.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",w.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:M})]}),A&&w.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),w.jsxs("div",{className:t.section,children:[w.jsx("div",{className:t.sectionTitle,children:"Text"}),w.jsxs("div",{className:t.row,children:[w.jsx("span",{className:t.label,children:"Top Text:"}),w.jsx("input",{className:t.input,type:"text",value:s,onChange:X=>i(X.target.value),placeholder:"Enter top text..."}),w.jsx("span",{className:t.label,children:"Size:"}),w.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:X=>l(Number(X.target.value)),style:{width:60,textAlign:"center"}})]}),w.jsxs("div",{className:t.row,children:[w.jsx("span",{className:t.label,children:"Bottom Text:"}),w.jsx("input",{className:t.input,type:"text",value:o,onChange:X=>a(X.target.value),placeholder:"Enter bottom text..."}),w.jsx("span",{className:t.label,children:"Size:"}),w.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:X=>d(Number(X.target.value)),style:{width:60,textAlign:"center"}})]})]}),w.jsxs("div",{className:t.section,children:[w.jsx("div",{className:t.sectionTitle,children:"Effects"}),w.jsxs("div",{className:t.row,children:[w.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(X=>!X),children:"Deep Fry"}),w.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(X=>!X),children:"Pixelate"}),w.jsx("button",{className:t.effectButton,style:{background:y?"#00ffff":void 0},onClick:()=>m(X=>!X),children:"Grain"})]})]}),w.jsxs("div",{className:t.section,children:[w.jsx("div",{className:t.sectionTitle,children:"Stickers"}),w.jsxs("div",{className:t.row,children:[Y8e.map((X,ce)=>w.jsx("img",{src:X,alt:`sticker${ce+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>H(X)},X)),w.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",w.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:k,onChange:te})]})]})]}),w.jsxs("div",{className:t.actions,children:[w.jsx("button",{className:t.button,onClick:D,children:"Save Image"}),w.jsx("button",{className:t.button,onClick:P,children:"Restart"})]})]}),w.jsx("div",{className:t.memeArea,children:w.jsx("canvas",{ref:e,width:mo,height:mo,className:t.canvas})}),w.jsx("div",{style:{position:"absolute",left:0,top:0,width:mo,height:mo,pointerEvents:"none"},children:S.map(X=>O===X.id?w.jsxs("div",{style:{position:"absolute",left:X.x,top:X.y,width:80*X.scale,height:80*X.scale,transform:`rotate(${X.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ce=>{I(X.id),ce.stopPropagation()},onMouseUp:()=>I(null),onMouseMove:ce=>{T===X.id&&ce.buttons===1&&re(X.id,ce.movementX,ce.movementY)},children:[w.jsx("img",{src:X.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),w.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ce=>{var Xe;ce.stopPropagation();const fe=(Xe=ce.currentTarget.parentElement)==null?void 0:Xe.getBoundingClientRect(),de=fe?fe.left+fe.width/2:0,ve=fe?fe.top+fe.height/2:0,ye=Math.atan2(ce.clientY-ve,ce.clientX-de)*180/Math.PI,Ae=X.rotation,we=Zt=>{ie(X.id,ye,Ae,Zt.clientX,Zt.clientY)},me=()=>{window.removeEventListener("mousemove",we),window.removeEventListener("mouseup",me)};window.addEventListener("mousemove",we),window.addEventListener("mouseup",me)}}),w.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ce=>{ce.stopPropagation();const fe=ce.clientX,de=ye=>{const Ae=(ye.clientX-fe)/80;Ce(X.id,1+Ae)},ve=()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",ve)};window.addEventListener("mousemove",de),window.addEventListener("mouseup",ve)}}),w.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>le(X.id),children:"×"}),w.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>B(null),children:"Place"})]},X.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function D_(){return D_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D_.apply(this,arguments)}var Rh;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rh||(Rh={}));const E9="popstate";function Q8e(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return S3("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:PX(s)}return Z8e(e,n,null,t)}function Yr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function RX(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function J8e(){return Math.random().toString(36).substr(2,8)}function _9(t,e){return{usr:t.state,key:t.key,idx:e}}function S3(t,e,n,r){return n===void 0&&(n=null),D_({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ub(e):e,{state:n,key:e&&e.key||r||J8e()})}function PX(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ub(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Z8e(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Rh.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(D_({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Rh.Pop;let y=u(),m=y==null?null:y-l;l=y,c&&c({action:a,location:g.location,delta:m})}function h(y,m){a=Rh.Push;let b=S3(g.location,y,m);l=u()+1;let v=_9(b,l),A=g.createHref(b);try{o.pushState(v,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(y,m){a=Rh.Replace;let b=S3(g.location,y,m);l=u();let v=_9(b,l),A=g.createHref(b);o.replaceState(v,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(y){let m=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof y=="string"?y:PX(y);return b=b.replace(/ $/,"%20"),Yr(m,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,m)}let g={get action(){return a},get location(){return t(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(E9,d),c=y,()=>{s.removeEventListener(E9,d),c=null}},createHref(y){return e(s,y)},createURL:p,encodeLocation(y){let m=p(y);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(y){return o.go(y)}};return g}var C9;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(C9||(C9={}));function X8e(t,e,n){return n===void 0&&(n="/"),e4e(t,e,n)}function e4e(t,e,n,r){let s=typeof e=="string"?ub(e):e,i=DX(s.pathname||"/",n);if(i==null)return null;let o=OX(t);t4e(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=f4e(i);a=u4e(o[c],l)}return a}function OX(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Yr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=ig([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Yr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),OX(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:c4e(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of kX(i.path))s(i,o,c)}),e}function kX(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=kX(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function t4e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:l4e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const n4e=/^:[\w-]+$/,r4e=3,s4e=2,i4e=1,o4e=10,a4e=-2,A9=t=>t==="*";function c4e(t,e){let n=t.split("/"),r=n.length;return n.some(A9)&&(r+=a4e),e&&(r+=s4e),n.filter(s=>!A9(s)).reduce((s,i)=>s+(n4e.test(i)?r4e:i===""?i4e:o4e),r)}function l4e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function u4e(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=d4e({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:ig([i,d.pathname]),pathnameBase:b4e(ig([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=ig([i,d.pathnameBase]))}return o}function d4e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=h4e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function h4e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),RX(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function f4e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return RX(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function DX(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function p4e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ub(t):t;return{pathname:n?n.startsWith("/")?n:g4e(n,e):e,search:v4e(r),hash:E4e(s)}}function g4e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function vO(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function m4e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function y4e(t,e){let n=m4e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function w4e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ub(t):(s=D_({},t),Yr(!s.pathname||!s.pathname.includes("?"),vO("?","pathname","search",s)),Yr(!s.pathname||!s.pathname.includes("#"),vO("#","pathname","hash",s)),Yr(!s.search||!s.search.includes("#"),vO("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=p4e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const ig=t=>t.join("/").replace(/\/\/+/g,"/"),b4e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),v4e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,E4e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _4e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const MX=["post","put","patch","delete"];new Set(MX);const C4e=["get",...MX];new Set(C4e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function M_(){return M_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},M_.apply(this,arguments)}const vU=L.createContext(null),A4e=L.createContext(null),hT=L.createContext(null),fT=L.createContext(null),db=L.createContext({outlet:null,matches:[],isDataRoute:!1}),LX=L.createContext(null);function pT(){return L.useContext(fT)!=null}function UX(){return pT()||Yr(!1),L.useContext(fT).location}function $X(t){L.useContext(hT).static||L.useLayoutEffect(t)}function S4e(){let{isDataRoute:t}=L.useContext(db);return t?$4e():I4e()}function I4e(){pT()||Yr(!1);let t=L.useContext(vU),{basename:e,future:n,navigator:r}=L.useContext(hT),{matches:s}=L.useContext(db),{pathname:i}=UX(),o=JSON.stringify(y4e(s,n.v7_relativeSplatPath)),a=L.useRef(!1);return $X(()=>{a.current=!0}),L.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=w4e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ig([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function x4e(t,e){return N4e(t,e)}function N4e(t,e,n,r){pT()||Yr(!1);let{navigator:s}=L.useContext(hT),{matches:i}=L.useContext(db),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=UX(),u;if(e){var d;let y=typeof e=="string"?ub(e):e;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||Yr(!1),u=y}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=X8e(t,{pathname:f}),g=k4e(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:ig([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:ig([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,n,r);return e&&g?L.createElement(fT.Provider,{value:{location:M_({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Rh.Pop}},g):g}function T4e(){let t=U4e(),e=_4e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,null)}const R4e=L.createElement(T4e,null);class P4e extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(db.Provider,{value:this.props.routeContext},L.createElement(LX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function O4e(t){let{routeContext:e,match:n,children:r}=t,s=L.useContext(vU);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(db.Provider,{value:e},r)}function k4e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Yr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,y=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||R4e,c&&(l<0&&h===0?(B4e("route-fallback"),p=!0,y=null):l===h&&(p=!0,y=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=y:d.route.Component?v=L.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,L.createElement(O4e,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?L.createElement(P4e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):b()},null)}var BX=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(BX||{}),FX=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(FX||{});function D4e(t){let e=L.useContext(vU);return e||Yr(!1),e}function M4e(t){let e=L.useContext(A4e);return e||Yr(!1),e}function L4e(t){let e=L.useContext(db);return e||Yr(!1),e}function jX(t){let e=L4e(),n=e.matches[e.matches.length-1];return n.route.id||Yr(!1),n.route.id}function U4e(){var t;let e=L.useContext(LX),n=M4e(),r=jX();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function $4e(){let{router:t}=D4e(BX.UseNavigateStable),e=jX(FX.UseNavigateStable),n=L.useRef(!1);return $X(()=>{n.current=!0}),L.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,M_({fromRouteId:e},i)))},[t,e])}const S9={};function B4e(t,e,n){S9[t]||(S9[t]=!0)}function F4e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function vS(t){Yr(!1)}function j4e(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Rh.Pop,navigator:i,static:o=!1,future:a}=t;pT()&&Yr(!1);let c=e.replace(/^\/*/,"/"),l=L.useMemo(()=>({basename:c,navigator:i,static:o,future:M_({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=ub(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=L.useMemo(()=>{let y=DX(u,c);return y==null?null:{location:{pathname:y,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:L.createElement(hT.Provider,{value:l},L.createElement(fT.Provider,{children:n,value:g}))}function z4e(t){let{children:e,location:n}=t;return x4e(I3(e),n)}new Promise(()=>{});function I3(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let i=[...e,s];if(r.type===L.Fragment){n.push.apply(n,I3(r.props.children,i));return}r.type!==vS&&Yr(!1),!r.props.index||!r.props.children||Yr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=I3(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const W4e="6";try{window.__reactRouterVersion=W4e}catch{}const H4e="startTransition",I9=Ane[H4e];function G4e(t){let{basename:e,children:n,future:r,window:s}=t,i=L.useRef();i.current==null&&(i.current=Q8e({window:s,v5Compat:!0}));let o=i.current,[a,c]=L.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=L.useCallback(d=>{l&&I9?I9(()=>c(d)):c(d)},[c,l]);return L.useLayoutEffect(()=>o.listen(u),[o,u]),L.useEffect(()=>F4e(r),[r]),L.createElement(j4e,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var x9;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(x9||(x9={}));var N9;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(N9||(N9={}));const q4e=Rc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function V4e(){const t=q4e(),{open:e}=dT(),{address:n,isConnected:r}=LC(),{isPending:s}=mY(),{disconnect:i}=yY(),{data:o}=wY({address:n}),[a,c]=L.useState("pixelawbs-popup"),[l,u]=L.useState(new Set),[d,h]=L.useState(!1),[f,p]=L.useState(!1),[g,y]=L.useState(!1),[m,b]=L.useState(!1),v=S4e(),A=L.useRef(null);L.useEffect(()=>{if(a==="halloween-popup"&&A.current){const N=A.current.querySelector("script[data-tiktok-embed]");N&&N.remove();const M=document.createElement("script");M.src="https://www.tiktok.com/embed.js",M.async=!0,M.setAttribute("data-tiktok-embed","true"),A.current.appendChild(M)}},[a]);const C=(N,M,P)=>{if(N==="url"&&P)window.open(P,"_blank");else if(N==="popup"&&M)c(M),u(D=>{const F=new Set(D);return F.delete(M),F}),document.body.offsetWidth;else if(N==="wallet")r?i():e();else if(N==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else N==="nft-gallery"?p(!0):N==="meme-generator"?y(!0):N==="chess"&&(r?(b(!0),setTimeout(()=>{b(!1),v("/chess")},1500)):e().then(()=>{const D=()=>{window.ethereum&&window.ethereum.selectedAddress?(b(!0),setTimeout(()=>{b(!1),v("/chess")},1500)):setTimeout(D,200)};D()}))},S=()=>c(null),x=N=>{u(M=>new Set(M).add(N)),c(null)},T=N=>{N==="mint-popup"?h(!0):N==="nft-gallery-popup"?p(!0):N==="meme-generator-popup"?y(!0):c(N),u(M=>{const P=new Set(M);return P.delete(N),P})},I=()=>h(!1),k=()=>p(!1),O=()=>y(!1),B=()=>{h(!1),u(N=>new Set(N).add("mint-popup"))},G=()=>{p(!1),u(N=>new Set(N).add("nft-gallery-popup"))},W=()=>{y(!1),u(N=>new Set(N).add("meme-generator-popup"))},R=w.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[w.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return w.jsxs("div",{className:t.body,children:[m&&w.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[w.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),w.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),w.jsx(VCe,{onIconClick:C}),w.jsx(YCe,{minimizedWindows:Array.from(l),onRestoreWindow:T,walletButton:R,connectionStatus:{connected:r,address:n,ens:o||void 0}}),w.jsxs(ia,{id:"chat-popup",isOpen:a==="chat-popup",onClose:S,onMinimize:x,children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",w.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),w.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),w.jsxs(ia,{id:"purity-popup",isOpen:a==="purity-popup",onClose:S,onMinimize:x,children:[w.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),w.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),w.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),w.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),w.jsxs(ia,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:S,onMinimize:x,children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",w.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",w.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",w.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",w.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),w.jsx("p",{children:"Chain: Ethereum"}),w.jsxs("p",{children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),w.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[w.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",w.jsx("br",{}),w.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",w.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",w.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),w.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),w.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),w.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),w.jsxs(ia,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:S,onMinimize:x,children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",w.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),w.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),w.jsx("p",{style:{marginBottom:"10px"},children:w.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),w.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),w.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),w.jsxs(ia,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:S,onMinimize:x,children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",w.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),w.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),w.jsxs(ia,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:S,onMinimize:x,children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",w.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),w.jsx("p",{children:"Chain: Ethereum"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",w.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),w.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:w.jsx(mve,{id:"1620879129850834944"})}),w.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),w.jsx(ia,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:S,onMinimize:x,children:(()=>{const N=M=>{M.preventDefault(),c(null),h(!0)};return w.jsxs(w.Fragment,{children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",w.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:N,children:"COLLECT HERE"})," OR VISIT ",w.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),w.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",w.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),w.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),w.jsxs(ia,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:S,onMinimize:x,children:[w.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),w.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),w.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),w.jsx("div",{ref:A,style:{maxWidth:"400px",margin:"0 auto"},children:w.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:w.jsxs("section",{children:[w.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",w.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),w.jsxs(ia,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:S,onMinimize:x,children:[w.jsx("h1",{style:{marginBottom:"10px"},children:w.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),w.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",w.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),w.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),w.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),w.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),w.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),w.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",w.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),w.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",w.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),w.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),w.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:w.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),w.jsx(ZCe,{isOpen:d,onClose:I,onMinimize:B,walletAddress:n||""}),w.jsx(F8e,{isOpen:f,onClose:k,onMinimize:G,walletAddress:n}),w.jsx(ia,{id:"meme-generator-popup",isOpen:g,onClose:O,onMinimize:W,children:w.jsx(TX,{})})]})}const K4e=Rc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),T9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Y4e=({onBack:t,walletAddress:e})=>{const n=K4e(),{open:r}=dT(),[s,i]=L.useState([]),[o,a]=L.useState(!0),[c,l]=L.useState(null),[u,d]=L.useState(T9[0]),[h,f]=L.useState(!1),[p,g]=L.useState(null),[y,m]=L.useState("all"),[b,v]=L.useState(null),A=L.useCallback(async()=>{var T,I;try{if((T=window.solana)!=null&&T.isPhantom){const k=await window.solana.connect();g(k.publicKey.toString());return}if((I=window.solflare)!=null&&I.isSolflare){const k=await window.solflare.connect();g(k.publicKey.toString());return}r()}catch(k){console.error("Failed to connect Solana wallet:",k),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);L.useEffect(()=>{var T,I;(T=window.solana)!=null&&T.publicKey?g(window.solana.publicKey.toString()):(I=window.solflare)!=null&&I.publicKey&&g(window.solflare.publicKey.toString())},[]),L.useEffect(()=>{(async()=>{a(!0);try{let I,k=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}k=p,I=await QCe(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",I.data.length)}else u.api==="opensea"?I=await GL(u.slug,100,k):I=await HL(u.slug,1,100,k);y==="owned"&&p&&(console.log("Filtering for owner:",p),I.data.some(B=>B.owners&&B.owners.length>0)?I.data=I.data.filter(B=>B.owners.some(W=>W.owner_of&&W.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(I.data)}catch(I){console.error(I)}finally{a(!1)}})()},[e,u,p,y]),L.useEffect(()=>{h&&A()},[h,A]);const C=async T=>{if(a(!0),u.api==="opensea"&&u.chain)try{const I=await _Q(u.chain,T.address,T.token_id.toString()),k={...T,attributes:JSON.stringify(I.traits||[])};l(k)}catch(I){console.error("Failed to fetch full NFT details",I),l(T)}else l(T);a(!1)},S=()=>{if(!c)return null;let T=[];try{T=JSON.parse(c.attributes||"[]")}catch(I){console.error("Failed to parse NFT attributes:",I)}return w.jsxs("div",{className:n.detailView,children:[w.jsx("img",{src:c.image,alt:c.name}),w.jsx("h2",{children:c.name}),w.jsx("h4",{children:"Traits:"}),w.jsx("ul",{children:T.map((I,k)=>w.jsxs("li",{children:[w.jsxs("strong",{children:[I.trait_type,":"]})," ",I.value]},k))})]})},x=()=>w.jsxs(w.Fragment,{children:[w.jsx("div",{className:n.collectionSelector,children:T9.map(T=>w.jsx("button",{className:`${n.collectionButton} ${u.slug===T.slug?"active":""}`,onClick:()=>d(T),children:T.name},T.slug))}),w.jsxs("div",{className:n.content,children:[w.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[w.jsx("button",{onClick:()=>m("all"),style:{background:y==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:y==="all"?"white":"black"},children:"All NFTs"}),w.jsx("button",{onClick:()=>m("owned"),disabled:!e&&!p,style:{background:y==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:y==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&w.jsx("button",{onClick:()=>{A()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&w.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&w.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?w.jsx("div",{className:n.loading,children:"Loading NFTs..."}):w.jsx("div",{className:n.grid,children:s.map(T=>{let I=T.image||T.image_url||T.image_url_shrunk||"/assets/pixelawb.png";return w.jsxs("div",{className:n.gridItem,onClick:()=>void C(T),children:[w.jsx("img",{src:I,alt:T.name,onError:k=>{k.currentTarget.src!==T.image_url&&T.image_url?k.currentTarget.src=T.image_url:k.currentTarget.src!==T.image_url_shrunk&&T.image_url_shrunk?k.currentTarget.src=T.image_url_shrunk:k.currentTarget.src="/assets/pixelawb.png"}}),w.jsx("span",{children:T.name})]},T.id)})})]})]});return w.jsxs("div",{className:n.galleryContainer,children:[w.jsxs("header",{className:n.header,children:[w.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),w.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),w.jsx("div",{className:n.content,children:o?w.jsx("p",{className:n.loading,children:"Loading..."}):c?S():x()})]})},Q4e=Rc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),Ka=({isOpen:t,onClose:e,title:n,children:r})=>{const s=Q4e();return t?w.jsx("div",{className:s.overlay,children:w.jsxs("div",{className:s.popup,children:[w.jsxs("div",{className:s.titleBar,children:[w.jsx("span",{children:n}),w.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),w.jsx("div",{className:s.content,children:r})]})}):null},J4e=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=L.useState([]),[i,o]=L.useState(!1),[a,c]=L.useState(!1),[l,u]=L.useState({}),[d,h]=L.useState(null),{data:f}=bY();L.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const A=await vQ(n);s(A);const C={};A.forEach(S=>{C[S.id]=0}),u(C)}catch(A){h(A.message)}finally{o(!1)}},g=(A,C)=>{u(S=>({...S,[A]:Math.max(0,C)}))},y=async()=>{const A=Object.entries(l).filter(([,C])=>C>0).map(([C,S])=>({id:C,quantity:S}));if(A.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await EQ(n,A);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const S=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${S}`),e()}catch(S){h("Transaction failed: "+S.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},m=(A,C)=>`${parseFloat(A)} ${C}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return w.jsxs(Ka,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&w.jsx("div",{style:v,children:d}),i?w.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?w.jsx("div",{children:"No eligible invite lists found for your wallet."}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{style:{marginBottom:"20px"},children:[w.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(A=>w.jsxs("div",{style:b,children:[w.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:A.name}),w.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",m(A.token_price,A.currency_symbol)]}),w.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",A.wallet_limit===4294967295?"Unlimited":A.wallet_limit," per wallet"]}),w.jsx("input",{type:"number",min:0,max:A.wallet_limit===4294967295?void 0:A.wallet_limit,value:l[A.id]||"",onChange:C=>g(A.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),w.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},A.id))]}),w.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:y,disabled:a,children:a?"Minting...":"Mint"})]})]})},Z4e=Rc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),X4e=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],eFe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],tFe=()=>{const t=Z4e(),{open:e}=dT(),{address:n,isConnected:r}=LC(),{isPending:s}=mY(),{disconnect:i}=yY(),{data:o}=wY({address:n}),[a,c]=L.useState("main"),[l,u]=L.useState(!1),[d,h]=L.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=L.useState(!1),[g,y]=L.useState(!1),[m,b]=L.useState(!1),[v,A]=L.useState(!1),[C,S]=L.useState(!1),[x,T]=L.useState(!1),[I,k]=L.useState(!1),[O,B]=L.useState(!1),[G,W]=L.useState(!1),[R,N]=L.useState(!1),[M,P]=L.useState(!1),[D,F]=L.useState(!1),H=[{label:"Mint",icon:"/assets/mint.gif",action:()=>y(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>A(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>S(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],te=le=>{le.disabled||le.action()};if(L.useEffect(()=>{const le=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(le)},[]),L.useEffect(()=>{u(!0)},[]),a==="gallery")return w.jsx(Y4e,{onBack:()=>c("main"),walletAddress:n||void 0});function re({open:le,onClose:Ce,title:X,nfts:ce}){const fe=de=>{switch(de){case"lawbsters":T(!0);break;case"lawbstarz":k(!0);break;case"pixelawbs":B(!0);break;case"halloween":W(!0);break;case"lawbstation":N(!0);break;case"nexus":P(!0);break}};return w.jsx(Ka,{isOpen:le,onClose:Ce,title:X,children:w.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:ce.map(de=>w.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>fe(de.id),children:[w.jsx("img",{src:de.image,alt:de.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),w.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:de.name}),w.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:de.description})]},de.id))})})}function ie({open:le,onClose:Ce}){return le?w.jsxs(Ka,{isOpen:le,onClose:Ce,title:"$LAWB",children:[w.jsx("h1",{style:{marginBottom:"10px"},children:w.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),w.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",w.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),w.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),w.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),w.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),w.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),w.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",w.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),w.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",w.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),w.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),w.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),w.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:w.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return w.jsxs("div",{className:t.mobileContainer,children:[w.jsx("header",{className:t.header,children:w.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),w.jsx("div",{className:t.iconGrid,children:H.map(le=>w.jsxs("div",{className:t.icon,onClick:()=>te(le),children:[w.jsx("img",{src:le.icon,alt:le.label}),w.jsx("span",{children:le.label})]},le.label))}),l&&w.jsxs(Ka,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",w.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",w.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),w.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",w.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),w.jsx("p",{style:{marginBottom:"10px"},children:w.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&w.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:w.jsxs("div",{className:t.menuModal,onClick:le=>le.stopPropagation(),children:[w.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),w.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),w.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),w.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),w.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),w.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),w.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),w.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),w.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),w.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),F(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),w.jsx(J4e,{isOpen:g,onClose:()=>y(!1),walletAddress:n||""}),w.jsx(re,{open:m,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:X4e}),w.jsx(re,{open:v,onClose:()=>A(!1),title:"SOL NFTS FOLDER",nfts:eFe}),w.jsx(ie,{open:C,onClose:()=>S(!1)}),w.jsxs(Ka,{isOpen:x,onClose:()=>T(!1),title:"Lawbsters",children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",w.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),w.jsx("p",{children:"Chain: Ethereum"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",w.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),w.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),w.jsxs(Ka,{isOpen:I,onClose:()=>k(!1),title:"Lawbstarz",children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",w.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",w.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",w.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",w.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),w.jsx("p",{children:"Chain: Ethereum"}),w.jsxs("p",{children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),w.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),w.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),w.jsxs(Ka,{isOpen:O,onClose:()=>B(!1),title:"Pixelawbs",children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",w.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{B(!1),y(!0)},children:"COLLECT HERE"})," OR VISIT ",w.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),w.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",w.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),w.jsxs(Ka,{isOpen:G,onClose:()=>W(!1),title:"A Lawbster Halloween",children:[w.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),w.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),w.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),w.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",w.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),w.jsxs(Ka,{isOpen:R,onClose:()=>N(!1),title:"Lawbstation",children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",w.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),w.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),w.jsx("p",{style:{marginBottom:"10px"},children:w.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),w.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),w.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),w.jsxs(Ka,{isOpen:M,onClose:()=>P(!1),title:"Nexus",children:[w.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",w.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),w.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),w.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),w.jsx(Ka,{isOpen:D,onClose:()=>F(!1),title:"Meme Generator",children:w.jsx(TX,{})}),w.jsxs("div",{className:t.taskbar,children:[w.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),w.jsxs("div",{className:t.walletStatus,children:[w.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),w.jsx("span",{className:t.clock,children:d})]})]})};function nFe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=L.useState(e(t));function s(){r(e(t))}return L.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const rFe=Symbol(),R9=Object.getPrototypeOf,x3=new WeakMap,sFe=t=>t&&(x3.has(t)?x3.get(t):R9(t)===Object.prototype||R9(t)===Array.prototype),iFe=t=>sFe(t)&&t[rFe]||null,P9=(t,e=!0)=>{x3.set(t,e)},rx={},EU=t=>typeof t=="object"&&t!==null,oFe=t=>EU(t)&&!n1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),zX=(t,e)=>{const n=N3.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return P9(r,!0),N3.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(n1.has(i))P9(i,!1);else if(gf.has(i)){const[c,l]=gf.get(i);a.value=zX(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},aFe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(O9(l,o)||L_.has(o)&&O9(l,L_.get(o))))return!0;n(i),EU(o)&&(o=iFe(o)||o);const u=!gf.has(o)&&lFe(o)?tr(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),gf=new WeakMap,n1=new WeakSet,N3=new WeakMap,wv=[1,1],L_=new WeakMap;let O9=Object.is,cFe=(t,e)=>new Proxy(t,e),lFe=oFe,uFe=zX,dFe=aFe;function tr(t={}){if(!EU(t))throw new Error("object required");const e=L_.get(t);if(e)return e;let n=wv[0];const r=new Set,s=(y,m=++wv[0])=>{n!==m&&(n=m,r.forEach(b=>b(y,m)))};let i=wv[1];const o=(y=++wv[1])=>(i!==y&&!r.size&&(i=y,c.forEach(([m])=>{const b=m[1](y);b>n&&(n=b)})),n),a=y=>(m,b)=>{const v=[...m];v[1]=[y,...v[1]],s(v,b)},c=new Map,l=(y,m)=>{const b=!n1.has(m)&&gf.get(m);if(b){if((rx?"production":void 0)!=="production"&&c.has(y))throw new Error("prop listener already exists");if(r.size){const v=b[2](a(y));c.set(y,[b,v])}else c.set(y,[b])}},u=y=>{var m;const b=c.get(y);b&&(c.delete(y),(m=b[1])==null||m.call(b))},d=y=>(r.add(y),r.size===1&&c.forEach(([b,v],A)=>{if((rx?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const C=b[2](a(A));c.set(A,[b,C])}),()=>{r.delete(y),r.size===0&&c.forEach(([b,v],A)=>{v&&(v(),c.set(A,[b]))})});let h=!0;const f=dFe(()=>h,l,u,s),p=cFe(t,f);L_.set(t,p);const g=[t,o,d];return gf.set(p,g),Reflect.ownKeys(t).forEach(y=>{const m=Object.getOwnPropertyDescriptor(t,y);"value"in m&&m.writable&&(p[y]=t[y])}),h=!1,p}function oo(t,e,n){const r=gf.get(t);(rx?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function U_(t){const e=gf.get(t);(rx?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return uFe(n,r())}function I0(t){return n1.add(t),t}function hFe(){return{proxyStateMap:gf,refSet:n1,snapCache:N3,versionHolder:wv,proxyCache:L_}}function Ai(t,e,n,r){let s=t[e];return oo(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:fFe,snapCache:pFe}=hFe(),IA=t=>fFe.has(t);function gFe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=pFe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return IA(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!IA(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!IA(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!IA(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=tr(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var k9={};const pe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof k9<"u"?k9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},sx={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=pe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},mFe={bigNumber(t){return t?new wl(t):new wl(0)},multiply(t,e){if(t===void 0||e===void 0)return new wl(0);const n=new wl(t),r=new wl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},yFe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],wFe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],bFe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],vFe={getERC20Abi:t=>pe.USDT_CONTRACT_ADDRESSES.includes(t)?bFe:yFe,getSwapAbi:()=>wFe},Ph={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Et={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function EO(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const mt={setItem(t,e){bv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(bv())return localStorage.getItem(t)||void 0},removeItem(t){bv()&&localStorage.removeItem(t)},clear(){bv()&&localStorage.clear()}};function bv(){return typeof window<"u"&&typeof localStorage<"u"}function ix(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const pi={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[pe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},et={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=et.getActiveNamespace(),e=et.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{mt.setItem(Et.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=mt.getItem(Et.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{mt.removeItem(Et.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{mt.setItem(Et.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{mt.setItem(Et.ACTIVE_CAIP_NETWORK_ID,t),et.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return mt.getItem(Et.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{mt.removeItem(Et.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=EO(t);mt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=et.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),mt.setItem(Et.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=mt.getItem(Et.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=EO(t);mt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return mt.getItem(Et.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=EO(t);return mt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{mt.setItem(Et.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return mt.getItem(Et.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{mt.removeItem(Et.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return mt.getItem(Et.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=mt.getItem(Et.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{mt.setItem(Et.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return mt.getItem(Et.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=mt.getItem(Et.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));mt.setItem(Et.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=et.getConnectedNamespaces();e.includes(t)||(e.push(t),et.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=et.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),et.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return mt.getItem(Et.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{mt.setItem(Et.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{mt.removeItem(Et.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=mt.getItem(Et.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=et.getBalanceCache();mt.setItem(Et.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=et.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=et.getBalanceCache();e[t.caipAddress]=t,mt.setItem(Et.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=mt.getItem(Et.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=et.getBalanceCache();mt.setItem(Et.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=et.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=et.getNativeBalanceCache();e[t.caipAddress]=t,mt.setItem(Et.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=mt.getItem(Et.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=et.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;et.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=et.getEnsCache();e[t.address]=t,mt.setItem(Et.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=et.getEnsCache();mt.setItem(Et.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=mt.getItem(Et.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=et.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;et.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=et.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},mt.setItem(Et.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=et.getIdentityCache();mt.setItem(Et.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{mt.removeItem(Et.PORTFOLIO_CACHE),mt.removeItem(Et.NATIVE_BALANCE_CACHE),mt.removeItem(Et.ENS_CACHE),mt.removeItem(Et.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{mt.setItem(Et.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=mt.getItem(Et.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=et.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===pe.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};mt.setItem(Et.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=mt.getItem(Et.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=et.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),mt.setItem(Et.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=mt.getItem(Et.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),mt.setItem(Et.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),mt.setItem(Et.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(et.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},lt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return lt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=pi.TEN_SEC_MS:!0},isAllowedRetry(t,e=pi.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(lt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+pi.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(lt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!lt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?et.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,lt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return pe.W3M_API_URL},getBlockchainApiUrl(){return pe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return pe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?pi.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in pe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Xb(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class r1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Xb(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Xb(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Xb(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Xb(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Xb(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const EFe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?pi.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(lt.isTelegram()){if(lt.isIos())return t.filter(e=>e!=="google");if(lt.isMac())return t.filter(e=>e!=="x");if(lt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},dt=tr({features:pi.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:pi.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),At={state:dt,subscribeKey(t,e){return Ai(dt,t,e)},setOptions(t){Object.assign(dt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...dt.remoteFeatures,...t};dt.remoteFeatures=e,(n=dt.remoteFeatures)!=null&&n.socials&&(dt.remoteFeatures.socials=EFe.filterSocialsByPlatform(dt.remoteFeatures.socials))},setFeatures(t){if(!t)return;dt.features||(dt.features=pi.DEFAULT_FEATURES);const e={...dt.features,...t};dt.features=e},setProjectId(t){dt.projectId=t},setCustomRpcUrls(t){dt.customRpcUrls=t},setAllWallets(t){dt.allWallets=t},setIncludeWalletIds(t){dt.includeWalletIds=t},setExcludeWalletIds(t){dt.excludeWalletIds=t},setFeaturedWalletIds(t){dt.featuredWalletIds=t},setTokens(t){dt.tokens=t},setTermsConditionsUrl(t){dt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){dt.privacyPolicyUrl=t},setCustomWallets(t){dt.customWallets=t},setIsSiweEnabled(t){dt.isSiweEnabled=t},setIsUniversalProvider(t){dt.isUniversalProvider=t},setSdkVersion(t){dt.sdkVersion=t},setMetadata(t){dt.metadata=t},setDisableAppend(t){dt.disableAppend=t},setEIP6963Enabled(t){dt.enableEIP6963=t},setDebug(t){dt.debug=t},setEnableWalletConnect(t){dt.enableWalletConnect=t},setEnableWalletGuide(t){dt.enableWalletGuide=t},setEnableAuthLogger(t){dt.enableAuthLogger=t},setEnableWallets(t){dt.enableWallets=t},setPreferUniversalLinks(t){dt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(pi.SIWX_DEFAULTS))t[e]??(t[e]=n);dt.siwx=t},setConnectMethodsOrder(t){dt.features={...dt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){dt.features={...dt.features,walletFeaturesOrder:t}},setSocialsOrder(t){dt.remoteFeatures={...dt.remoteFeatures,socials:t}},setCollapseWallets(t){dt.features={...dt.features,collapseWallets:t}},setEnableEmbedded(t){dt.enableEmbedded=t},setAllowUnsupportedChain(t){dt.allowUnsupportedChain=t},setManualWCControl(t){dt.manualWCControl=t},setEnableNetworkSwitch(t){dt.enableNetworkSwitch=t},setEnableReconnect(t){dt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(dt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){dt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return dt.universalProviderConfigOverride},getSnapshot(){return U_(dt)}},_Fe=Object.freeze({enabled:!0,events:[]}),CFe=new r1({baseUrl:lt.getAnalyticsUrl(),clientId:null}),AFe=5,SFe=60*1e3,Nd=tr({..._Fe}),IFe={state:Nd,subscribeKey(t,e){return Ai(Nd,t,e)},async sendError(t,e){if(!Nd.enabled)return;const n=Date.now();if(Nd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<SFe}).length>=AFe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Nd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=At.state;await CFe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:lt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Nd.enabled=!0},disable(){Nd.enabled=!1},clearEvents(){Nd.events=[]}};class x0 extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,x0.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,x0):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function D9(t,e){const n=t instanceof x0?t:new x0(t instanceof Error?t.message:String(t),e,t);throw IFe.sendError(n,n.category),n}function Ua(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return D9(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return D9(a,e)}},n[r]=i}else n[r]=s}),n}var N0={};const xFe="https://secure.walletconnect.org/sdk",NFe=(typeof process<"u"&&typeof N0<"u"?N0.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||xFe,TFe=(typeof process<"u"&&typeof N0<"u"?N0.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",RFe=(typeof process<"u"&&typeof N0<"u"?N0.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Je={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Rs={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},pl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},PFe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===pl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${pl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===pl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${pl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===pe.CHAIN.SOLANA&&t===pl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${pl.COINBASE.url}/dapp?cb_url=${r}`)}},yo=tr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),OFe={state:yo,subscribeNetworkImages(t){return oo(yo.networkImages,()=>t(yo.networkImages))},subscribeKey(t,e){return Ai(yo,t,e)},subscribe(t){return oo(yo,()=>t(yo))},setWalletImage(t,e){yo.walletImages[t]=e},setNetworkImage(t,e){yo.networkImages[t]=e},setChainImage(t,e){yo.chainImages[t]=e},setConnectorImage(t,e){yo.connectorImages={...yo.connectorImages,[t]:e}},setTokenImage(t,e){yo.tokenImages[t]=e},setCurrencyImage(t,e){yo.currencyImages[t]=e}},lc=Ua(OFe),kFe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},_O=tr({networkImagePromises:{}}),DFe={async fetchWalletImage(t){if(t)return await yt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(_O.networkImagePromises[t]||(_O.networkImagePromises[t]=yt._fetchNetworkImage(t)),await _O.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return lc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return lc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return lc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return lc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return lc.state.connectorImages[t.imageId]},getChainImage(t){return lc.state.networkImages[kFe[t]]}},Td=tr({message:"",variant:"info",open:!1}),MFe={state:Td,subscribeKey(t,e){return Ai(Td,t,e)},open(t,e){const{debug:n}=At.state,{shortMessage:r,longMessage:s}=t;n&&(Td.message=r,Td.variant=e,Td.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Td.open=!1,Td.message="",Td.variant="info"}},qf=Ua(MFe),LFe=lt.getAnalyticsUrl(),UFe=new r1({baseUrl:LFe,clientId:null}),$Fe=["MODAL_CREATED"],ru=tr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),lr={state:ru,subscribe(t){return oo(ru,()=>t(ru))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=At.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=gn.state.address;if($Fe.includes(t.data.event)||typeof window>"u")return;await UFe.post({path:"/e",params:lr.getSdkProperties(),body:{eventId:lt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),ru.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===pe.HTTP_STATUS_CODES.FORBIDDEN&&!ru.reportedErrors.FORBIDDEN&&(qf.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${bv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),ru.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;ru.timestamp=Date.now(),ru.data=t,(e=At.state.features)!=null&&e.analytics&&lr._sendAnalyticsEvent(ru)}},BFe=lt.getApiUrl(),Oi=new r1({baseUrl:BFe,clientId:null}),FFe=40,M9=4,jFe=20,Nt=tr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),yt={state:Nt,subscribeKey(t,e){return Ai(Nt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=At.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return At.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Oi.baseUrl}/getWalletImage/${t}`,n=await Oi.getBlob({path:e,params:yt._getSdkProperties()});lc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Oi.baseUrl}/public/getAssetImage/${t}`,n=await Oi.getBlob({path:e,params:yt._getSdkProperties()});lc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Oi.baseUrl}/public/getAssetImage/${t}`,n=await Oi.getBlob({path:e,params:yt._getSdkProperties()});lc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Oi.baseUrl}/public/getCurrencyImage/${t}`,n=await Oi.getBlob({path:e,params:yt._getSdkProperties()});lc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Oi.baseUrl}/public/getTokenImage/${t}`,n=await Oi.getBlob({path:e,params:yt._getSdkProperties()});lc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return lt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===pl.COINBASE.id?!0:Y.state.activeChain==="solana"&&(n.id===pl.SOLFLARE.id||n.id===pl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Oi.get({path:"/appkit/v1/config",params:yt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Oi.get({path:"/projects/v1/origins",params:yt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===pe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=pe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=Y.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!DFe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>yt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=st.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>yt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>yt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>yt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];yt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(pl).map(o=>o.id));const r=await Oi.get({path:"/getWallets",params:{...yt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:yt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=At.state;if(t!=null&&t.length){const e={...yt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??M9,include:t},{data:n}=await yt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>yt._fetchWalletImage(i))),Nt.featured=r,Nt.allFeatured=r}},async fetchRecommendedWallets(){try{Nt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=At.state,r=[...e??[],...n??[]].filter(Boolean),s=Y.getRequestedCaipNetworkIds().join(","),i={page:1,entries:M9,include:t,exclude:r,chains:s},{data:o,count:a}=await yt.fetchWallets(i),c=et.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>yt._fetchWalletImage(d))),Nt.recommended=o,Nt.allRecommended=o,Nt.count=a??0}catch{}finally{Nt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=At.state,s=Y.getRequestedCaipNetworkIds().join(","),i=[...Nt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:FFe,include:e,exclude:i,chains:s},{data:a,count:c}=await yt.fetchWallets(o),l=a.slice(0,jFe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>yt._fetchWalletImage(u))),Nt.wallets=lt.uniqueBy([...Nt.wallets,...yt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Nt.count=c>Nt.count?c:Nt.count,Nt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await yt.fetchWallets(e);n&&n.forEach(r=>{Nt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=At.state,s=Y.getRequestedCaipNetworkIds().join(",");Nt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await yt.fetchWallets(i);lr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>yt._fetchWalletImage(c)),lt.wait(300)]),Nt.search=yt._filterOutExtensions(o)},initPromise(t,e){const n=Nt.promises[t];return n||(Nt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&yt.initPromise("connectorImages",yt.fetchConnectorImages),e&&yt.initPromise("featuredWallets",yt.fetchFeaturedWallets),n&&yt.initPromise("recommendedWallets",yt.fetchRecommendedWallets),r&&yt.initPromise("networkImages",yt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=At.state.features)!=null&&t.analytics&&yt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Oi.get({path:"/getAnalyticsConfig",params:yt._getSdkProperties()});At.setFeatures({analytics:t})}catch{At.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Nt.featured=Nt.allFeatured,Nt.recommended=Nt.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");Nt.featured=Nt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Nt.recommended=Nt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Nt.filteredWallets=Nt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Nt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Nt.featured=Nt.allFeatured,Nt.recommended=Nt.allRecommended;return}const e=Y.getRequestedCaipNetworkIds().join(",");Nt.featured=Nt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Nt.recommended=Nt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Nt.filteredWallets=Nt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Tn=tr({view:"Connect",history:["Connect"],transactionStack:[]}),zFe={state:Tn,subscribeKey(t,e){return Ai(Tn,t,e)},pushTransactionStack(t){Tn.transactionStack.push(t)},popTransactionStack(t){const e=Tn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Ct.goBack();break;case"cancel":s==null||s(),Ct.goBack();break}},push(t,e){t!==Tn.view&&(Tn.view=t,Tn.history.push(t),Tn.data=e)},reset(t,e){Tn.view=t,Tn.history=[t],Tn.data=e},replace(t,e){Tn.history.at(-1)===t||(Tn.view=t,Tn.history[Tn.history.length-1]=t,Tn.data=e)},goBack(){var r;const t=Y.state.activeCaipAddress,e=Ct.state.view==="ConnectingFarcaster",n=!t&&e;if(Tn.history.length>1){Tn.history.pop();const[s]=Tn.history.slice(-1);s&&(t&&s==="Connect"?Tn.view="Account":Tn.view=s)}else Gn.close();(r=Tn.data)!=null&&r.wallet&&(Tn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){gn.setFarcasterUrl(void 0,Y.state.activeChain);const a=st.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=U_(At.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Tn.history.length>1){Tn.history=Tn.history.slice(0,t+1);const[e]=Tn.history.slice(-1);e&&(Tn.view=e)}},goBackOrCloseModal(){Ct.state.history.length>1?Ct.goBack():Gn.close()}},Ct=Ua(zFe),su=tr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),T3={state:su,subscribe(t){return oo(su,()=>t(su))},setThemeMode(t){su.themeMode=t;try{const e=st.getAuthConnector();if(e){const n=T3.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:ix(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){su.themeVariables={...su.themeVariables,...t};try{const e=st.getAuthConnector();if(e){const n=T3.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:ix(su.themeVariables,su.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return U_(su)}},xA=Ua(T3),WX={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},cn=tr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...WX},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),WFe={state:cn,subscribe(t){return oo(cn,()=>{t(cn)})},subscribeKey(t,e){return Ai(cn,t,e)},initialize(t){t.forEach(e=>{const n=et.getConnectedConnectorId(e);n&&st.setConnectorId(n,e)})},setActiveConnector(t){t&&(cn.activeConnector=I0(t))},setConnectors(t){t.filter(s=>!cn.allConnectors.some(i=>i.id===s.id&&st.getConnectorName(i.name)===st.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&cn.allConnectors.push(I0(s))});const n=st.getEnabledNamespaces(),r=st.getEnabledConnectors(n);cn.connectors=st.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(cn.filterByNamespaceMap).forEach(e=>{cn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{cn.filterByNamespaceMap[e]=!0}),st.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){cn.filterByNamespaceMap[t]=e,st.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=st.getEnabledNamespaces(),e=st.getEnabledConnectors(t),n=st.areAllNamespacesEnabled();cn.connectors=st.mergeMultiChainConnectors(e),n?yt.clearFilterByNamespaces():yt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(cn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return cn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(cn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=st.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===pe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=st.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===pe.CONNECTOR_ID.AUTH){const s=t,i=U_(At.state),o=xA.getSnapshot().themeMode,a=xA.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:ix(a,o)}),st.setConnectors([t])}else st.setConnectors([t])},getAuthConnector(t){var r;const e=t||Y.state.activeChain,n=cn.connectors.find(s=>s.id===pe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return cn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return cn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return cn.allConnectors.filter(r=>r.chain===Y.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=U_(At.state),r=xA.getSnapshot().themeMode,s=xA.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:ix(s,r)})},getConnectorsByNamespace(t){const e=cn.allConnectors.filter(n=>n.chain===t);return st.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return Y.checkIfSmartAccountEnabled()&&Fl(t)===Rs.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=st.getConnector(t.id,t.rdns);PFe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,Y.state.activeChain),e?Ct.push("ConnectingExternal",{connector:e}):Ct.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?st.getConnectorsByNamespace(t):st.mergeMultiChainConnectors(cn.allConnectors)},setFilterByNamespace(t){cn.filterByNamespace=t,cn.connectors=st.getConnectors(t),yt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(cn.activeConnectorIds={...cn.activeConnectorIds,[e]:t},et.setConnectedConnectorId(e,t))},removeConnectorId(t){cn.activeConnectorIds={...cn.activeConnectorIds,[t]:void 0},et.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return cn.activeConnectorIds[t]},isConnected(t){return t?!!cn.activeConnectorIds[t]:Object.values(cn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){cn.activeConnectorIds={...WX}}},st=Ua(WFe),HFe=1e3,ev={checkNamespaceConnectorId(t,e){return st.getConnectorId(t)===e},isSocialProvider(t){return pi.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&st.setActiveConnector(e),s==null||s(lt.isMobile()&&t),r){const l=Gn.subscribeKey("open",u=>{u||(Ct.state.view!==r&&Ct.replace(r),l(),a(new Error("Modal closed")))})}const c=Y.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Gn.close(),c(),o(Ph.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=Y.subscribeKey("activeCaipAddress",s=>{s&&(Gn.close(),r(),e(Ph.parseCaipAddress(s)))});rt.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=gn.state.socialWindow,i=gn.state.socialProvider,o=!1,a=null;const c=Y.subscribeKey("activeCaipAddress",l=>{l&&(e&&Gn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===pe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=st.getAuthConnector();if(g&&!o){s&&(s.close(),gn.setSocialWindow(void 0,Y.state.activeChain),s=gn.state.socialWindow),o=!0;const y=f.data.resultUri;i&&lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const m=Y.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:y,chainId:m==null?void 0:m.caipNetworkId}),i){et.setConnectedSocialProvider(i),await rt.connectExternal({id:g.id,type:g.type,socialUri:y},g.chain);const b=Y.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(Ph.parseCaipAddress(b)),lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(gn.setSocialProvider(t,Y.state.activeChain),i=gn.state.socialProvider,lr.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=Gn.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=st.getAuthConnector();if(p&&!gn.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();gn.setFarcasterUrl(g,Y.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=st.getAuthConnector();a=lt.returnOpenHref(`${pe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){gn.setSocialWindow(a,Y.state.activeChain),s=gn.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Gn.subscribeKey("open",c=>{c||(Ct.state.view!==e&&Ct.replace(e),a(),i(new Error("Modal closed")))})}const o=Y.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Gn.close(),o(),s(Ph.parseCaipAddress(a)))})})},async updateEmail(){const t=et.getConnectedConnectorId(Y.state.activeChain),e=st.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==pe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Ct.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Gn.close(),clearInterval(i),o(),r({email:a}))},HFe),o=Gn.subscribeKey("open",a=>{a||(Ct.state.view!=="Connect"&&Ct.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return Y.checkIfSmartAccountEnabled()&&Fl(t)===Rs.ACCOUNT_TYPES.EOA}};function HX(){var r,s;const t=((r=Y.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Y.state.activeCaipNetwork)==null?void 0:s.id)||1,n=pi.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Fl(t){var n;return(n=Y.getAccountData(t))==null?void 0:n.preferredAccountType}const GX={getConnectionStatus(t,e){const n=st.state.activeConnectorIds[e],r=rt.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=At.state.remoteFeatures)!=null&&a.multiWallet),n=st.state.activeConnectorIds[t],r=rt.getConnections(t),i=(rt.state.recentConnections.get(t)??[]).filter(c=>st.getConnectorById(c.connectorId)),o=GX.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},Vf=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),$r=tr({...Vf}),GFe={state:$r,subscribeKey(t,e){return Ai($r,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=lt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){$r.message=Vf.message,$r.variant=Vf.variant,$r.svg=Vf.svg,$r.open=Vf.open,$r.autoClose=Vf.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Vf.autoClose}){$r.open?($r.open=!1,setTimeout(()=>{$r.message=t,$r.variant=n,$r.svg=e,$r.open=!0,$r.autoClose=r},150)):($r.message=t,$r.variant=n,$r.svg=e,$r.open=!0,$r.autoClose=r)}},Oh=GFe,zn=tr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),qFe={state:zn,subscribe(t){return oo(zn,()=>t(zn))},setLastNetworkInView(t){zn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");zn.loading=!0;try{const r=await vt.fetchTransactions({account:t,cursor:zn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=vv.filterSpamTransactions(r.data),i=vv.filterByConnectedChain(s),o=[...zn.transactions,...i];zn.loading=!1,e==="coinbase"?zn.coinbaseTransactions=vv.groupTransactionsByYearAndMonth(zn.coinbaseTransactions,r.data):(zn.transactions=o,zn.transactionsByYear=vv.groupTransactionsByYearAndMonth(zn.transactionsByYear,i)),zn.empty=o.length===0,zn.next=r.next?r.next:void 0}catch{const s=Y.state.activeChain;lr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:At.state.projectId,cursor:zn.next,isSmartAccount:Fl(s)===Rs.ACCOUNT_TYPES.SMART_ACCOUNT}}),Oh.showError("Failed to fetch transactions"),zn.loading=!1,zn.empty=!0,zn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){zn.next=void 0},resetTransactions(){zn.transactions=[],zn.transactionsByYear={},zn.lastNetworkInView=void 0,zn.loading=!1,zn.empty=!1,zn.next=void 0}},vv=Ua(qFe,"API_ERROR"),Jt=tr({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Uf;const VFe={state:Jt,subscribe(t){return oo(Jt,()=>t(Jt))},subscribeKey(t,e){return Ai(Jt,t,e)},_getClient(){return Jt._client},setClient(t){Jt._client=I0(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);rt.syncStorageConnections(e)},syncStorageConnections(t){const e=et.getConnections(),n=t??Array.from(Y.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Jt.recentConnections);i.set(r,s),Jt.recentConnections=i}},getConnections(t){return t?Jt.connections.get(t)??[]:[]},hasAnyConnection(t){const e=rt.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(lt.isTelegram()||lt.isSafari()&&lt.isIos()){if(Uf){await Uf,Uf=void 0;return}if(!lt.isPairingExpired(Jt==null?void 0:Jt.wcPairingExpiry)){const s=Jt.wcUri;Jt.wcUri=s;return}Uf=(e=(t=rt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),rt.state.status="connecting",await Uf,Uf=void 0,Jt.wcPairingExpiry=void 0,rt.state.status="connected"}else await((r=(n=rt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=rt._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&Y.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=rt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||Y.state.activeChain;e&&st.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;Gn.setLoading(!0,Y.state.activeChain);const n=st.getAuthConnector();n&&(gn.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),et.setPreferredAccountTypes(Object.entries(Y.state.chains).reduce((s,[i,o])=>{const a=i,c=Fl(a);return c!==void 0&&(s[a]=c),s},{})),await rt.reconnectExternal(n),Gn.setLoading(!1,Y.state.activeChain),lr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=rt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=rt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=rt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=rt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=rt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=rt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=rt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=rt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=rt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=rt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=rt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=rt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Jt.wcUri=void 0,Jt.wcPairingExpiry=void 0,Jt.wcLinking=void 0,Jt.recentWallet=void 0,Jt.status="disconnected",vv.resetTransactions(),et.deleteWalletConnectDeepLink()},resetUri(){Jt.wcUri=void 0,Jt.wcPairingExpiry=void 0,Uf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=rt.state;t&&et.setWalletConnectDeepLink(t),e&&et.setAppKitRecent(e),lr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Ct.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Jt.wcBasic=t},setUri(t){Jt.wcUri=t,Jt.wcPairingExpiry=lt.getPairingExpiry()},setWcLinking(t){Jt.wcLinking=t},setWcError(t){Jt.wcError=t,Jt.buffering=!1},setRecentWallet(t){Jt.recentWallet=t},setBuffering(t){Jt.buffering=t},setStatus(t){Jt.status=t},setIsSwitchingConnection(t){Jt.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=rt._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new x0("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Jt.connections);n.set(e,t),Jt.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=gn.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&ev.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await rt.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=st.getConnectorById(t.connectorId),s=t.connectorId===pe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await rt.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await rt.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=st.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===pe.CONNECTOR_ID.AUTH,a=t.connectorId===pe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&ev.isSocialProvider(i)){const{address:d}=await ev.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Gn.open({view:"ConnectingFarcaster"})},onConnect(){Ct.replace("ProfileWallets")}});c=d}else{const{address:d}=await ev.connectEmail({closeModalOnConnect:r,onOpen(){Gn.open({view:"EmailLogin"})},onConnect(){Ct.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await ev.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Gn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Ct.replace("ProfileWallets")}});c=d}else{const d=await rt.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await rt.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=gn.getCaipAddress(n);if(o){const{address:c}=Ph.parseCaipAddress(o);i=c}const a=GX.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await rt.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await rt.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},rt=Ua(VFe),qm=tr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Wy={state:qm,subscribe(t){return oo(qm,()=>t(qm))},subscribeOpen(t){return Ai(qm,"open",t)},set(t){Object.assign(qm,{...qm,...t})}},KFe={async getTokenList(){var r;const t=Y.state.activeCaipNetwork,e=await vt.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=Y.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(rt==null?void 0:rt.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await vt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await vt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=rt.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await _U.getMyTokensWithBalance(t);return gn.setTokenBalance(e,Y.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:HX(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},An=tr({tokenBalances:[],loading:!1}),YFe={state:An,subscribe(t){return oo(An,()=>t(An))},subscribeKey(t,e){return Ai(An,t,e)},setToken(t){t&&(An.token=I0(t))},setTokenAmount(t){An.sendTokenAmount=t},setReceiverAddress(t){An.receiverAddress=t},setReceiverProfileImageUrl(t){An.receiverProfileImageUrl=t},setReceiverProfileName(t){An.receiverProfileName=t},setNetworkBalanceInUsd(t){An.networkBalanceInUSD=t},setLoading(t){An.loading=t},async sendToken(){var t;try{switch(yn.setLoading(!0),(t=Y.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await yn.sendEvmToken();return;case"solana":await yn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{yn.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=Y.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Fl(t);if(!yn.state.sendTokenAmount||!yn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!yn.state.token)throw new Error("A token is required");(n=yn.state.token)!=null&&n.address?(lr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Rs.ACCOUNT_TYPES.SMART_ACCOUNT,token:yn.state.token.address,amount:yn.state.sendTokenAmount,network:((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await yn.sendERC20Token({receiverAddress:yn.state.receiverAddress,tokenAddress:yn.state.token.address,sendTokenAmount:yn.state.sendTokenAmount,decimals:yn.state.token.quantity.decimals})):(lr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Rs.ACCOUNT_TYPES.SMART_ACCOUNT,token:yn.state.token.symbol||"",amount:yn.state.sendTokenAmount,network:((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await yn.sendNativeToken({receiverAddress:yn.state.receiverAddress,sendTokenAmount:yn.state.sendTokenAmount,decimals:yn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;An.loading=!0;const e=(i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Y.state.activeCaipAddress,s=r?lt.getPlainAddress(r):void 0;if(An.lastRetry&&!lt.isAllowedRetry(An.lastRetry,30*pi.ONE_SEC_MS))return An.loading=!1,[];try{if(s&&e&&n){const a=await _U.getMyTokensWithBalance();return An.tokenBalances=a,An.lastRetry=void 0,a}}catch(a){An.lastRetry=Date.now(),t==null||t(a),Oh.showError("Token Balance Unavailable")}finally{An.loading=!1}return[]},fetchNetworkBalance(){if(An.tokenBalances.length===0)return;const t=KFe.mapBalancesToSwapTokens(An.tokenBalances);if(!t)return;const e=t.find(n=>n.address===HX());e&&(An.networkBalanceInUSD=e?mFe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;Ct.pushTransactionStack({});const e=t.receiverAddress,n=gn.state.address,r=rt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await rt.sendTransaction({chainNamespace:pe.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),lr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Fl("eip155")===Rs.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=yn.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=rt._getClient())==null||a.updateBalance("eip155"),yn.resetSend()},async sendERC20Token(t){Ct.pushTransactionStack({onSuccess(){Ct.replace("Account")}});const e=rt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(gn.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=lt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await rt.writeContract({fromAddress:gn.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:vFe.getERC20Abi(n),chainNamespace:pe.CHAIN.EVM}),yn.resetSend()}},async sendSolanaToken(){var t;if(!yn.state.sendTokenAmount||!yn.state.receiverAddress)throw new Error("An amount and receiver address are required");Ct.pushTransactionStack({onSuccess(){Ct.replace("Account")}}),await rt.sendTransaction({chainNamespace:"solana",to:yn.state.receiverAddress,value:yn.state.sendTokenAmount}),(t=rt._getClient())==null||t.updateBalance("solana"),yn.resetSend()},resetSend(){An.token=void 0,An.sendTokenAmount=void 0,An.receiverAddress=void 0,An.receiverProfileImageUrl=void 0,An.receiverProfileName=void 0,An.loading=!1,An.tokenBalances=[]}},yn=Ua(YFe),CO={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},NA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ke=tr({chains:gFe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),QFe={state:ke,subscribe(t){return oo(ke,()=>{t(ke)})},subscribeKey(t,e){return Ai(ke,t,e)},subscribeChainProp(t,e,n){let r;return oo(ke.chains,()=>{var i;const s=n||ke.activeChain;if(s){const o=(i=ke.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=et.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=At.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(ke.noAdapters=!0),ke.noAdapters||(ke.activeChain=a==null?void 0:a.namespace,ke.activeCaipNetwork=i,Y.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),ke.activeChain&&Wy.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=et.getPreferredAccountTypes()||{},f={...At.state.defaultAccountTypes,...h};Y.state.chains.set(u,{namespace:u,networkState:tr({...NA,caipNetwork:d==null?void 0:d[0]}),accountState:tr({...CO,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),Y.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(ke.activeChain===t){const r=Array.from(ke.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&Y.setActiveCaipNetwork(s)}}ke.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");ke.chains.set(t.namespace,{namespace:t.namespace,networkState:{...NA,caipNetwork:r[0]},accountState:CO,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),Y.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=ke.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),ke.chains.set(t.chainNamespace,{...e,caipNetworks:r}),Y.setRequestedCaipNetworks(r,t.chainNamespace),st.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=ke.chains.get(t);if(n){const o=((r=ke.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&Y.setActiveCaipNetwork(n.caipNetworks[0]),ke.chains.set(t,{...n,caipNetworks:a}),Y.setRequestedCaipNetworks(a||[],t),a.length===0&&st.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=ke.chains.get(t);n&&(n.networkState={...n.networkState||NA,...e},ke.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=ke.chains.get(t);if(r){const s={...r.accountState||CO,...e};ke.chains.set(t,{...r,accountState:s}),(ke.chains.size===1||ke.activeChain===t)&&(e.caipAddress&&(ke.activeCaipAddress=e.caipAddress),gn.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=ke.chains.get(t);if(n){const r={...n.networkState||NA,...e};ke.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){Y.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;ke.activeChain=t;const e=t?ke.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(ke.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,ke.activeCaipNetwork=n,Y.setChainNetworkData(t,{caipNetwork:n}),et.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Wy.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;ke.activeChain!==t.chainNamespace&&Y.setIsSwitchingNamespace(!0);const e=ke.chains.get(t.chainNamespace);ke.activeChain=t.chainNamespace,ke.activeCaipNetwork=t,Y.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?ke.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:ke.activeCaipAddress=void 0,Y.setAccountProp("caipAddress",ke.activeCaipAddress,t.chainNamespace),e&&gn.replaceState(e.accountState),yn.resetSend(),Wy.set({activeChain:ke.activeChain,selectedNetworkId:(i=ke.activeCaipNetwork)==null?void 0:i.caipNetworkId}),et.setActiveCaipNetworkId(t.caipNetworkId),!Y.checkIfSupportedNetwork(t.chainNamespace)&&At.state.enableNetworkSwitch&&!At.state.allowUnsupportedChain&&!rt.state.wcBasic&&Y.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=ke.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==Y.state.activeChain,n=(s=Y.getNetworkData(t))==null?void 0:s.caipNetwork,r=Y.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await Y.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=Y.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=Y.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=ke.activeCaipNetwork)==null?void 0:a.id)})),s=Y.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&Gn.close()}catch{Ct.goBack()}lr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||ke.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=ke.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||ke.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=ke.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=ke.activeChain;if(e&&(n=e),!n)return;const r=(s=ke.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=ke.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=ke.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return lt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return ke.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=Y.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){Y.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=Y.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));st.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return ke.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=Y.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=ke.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:ke.activeCaipNetwork},getActiveCaipAddress(){return ke.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=ke.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=Y.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());Y.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||ke.activeCaipNetwork,r=Y.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!ke.activeChain)return!0;const e=Y.getRequestedCaipNetworks(ke.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){Y.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=sx.caipNetworkIdToNumber((r=ke.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=ke.activeChain;if(!e||!t)return!1;const n=Y.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Gn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ke.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&pi.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){Y.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=Y.getAccountProp("preferredAccountType",e);ke.activeCaipAddress=void 0,Y.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),st.removeConnectorId(e)},setIsSwitchingNamespace(t){ke.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(ke.chains.forEach(s=>{pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=ke.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=Y.state.chains.get(t))==null?void 0:e.accountState:gn.state},getNetworkData(t){var n;const e=t||ke.activeChain;if(e)return(n=Y.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=Y.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=st.state.filterByNamespace;return(t?[ke.chains.get(t)]:Array.from(ke.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?Y.getRequestedCaipNetworks(t):Y.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){ke.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return ke.lastConnectedSIWECaipNetwork}},Y=Ua(QFe),JFe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},qX=lt.getBlockchainApiUrl(),ki=tr({clientId:null,api:new r1({baseUrl:qX,clientId:null}),supportedChains:{http:[],ws:[]}}),vt={state:ki,async get(t){const{st:e,sv:n}=vt.getSdkProperties(),r=At.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return ki.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=At.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{ki.supportedChains.http.length||await vt.getSupportedNetworks()}catch{return!1}return ki.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await vt.get({path:"v1/supported-chains"});return ki.supportedChains=t,t}catch{return ki.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await vt.isNetworkSupported(e))return{avatar:"",name:""};const r=et.getIdentityFromCacheForAddress(t);if(r)return r;const s=await vt.get({path:`/v1/identity/${t}`,params:{sender:Y.state.activeCaipAddress?lt.getPlainAddress(Y.state.activeCaipAddress):void 0}});return et.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await vt.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?vt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await vt.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?vt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await vt.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?vt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await vt.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?ki.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:At.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await vt.isNetworkSupported((r=Y.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?vt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=vt.getSdkProperties();if(!await vt.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return vt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await vt.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return ki.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:pi.CONVERT_SLIPPAGE_TOLERANCE},projectId:At.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=vt.getSdkProperties();if(!await vt.isNetworkSupported((o=Y.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return vt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=vt.getSdkProperties();if(!await vt.isNetworkSupported((l=Y.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Oh.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=et.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await vt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return et.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await vt.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?vt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await vt.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?vt.get({path:`/v1/profile/reverse/${t}`,params:{sender:gn.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await vt.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?vt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await vt.isNetworkSupported((i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?ki.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await vt.isNetworkSupported((a=Y.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await ki.api.post({path:"/v1/generators/onrampurl",params:{projectId:At.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await vt.isNetworkSupported((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await vt.get({path:"/v1/onramp/options"})}catch{return JFe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await vt.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await ki.api.post({path:"/v1/onramp/quote",params:{projectId:At.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await vt.isNetworkSupported((n=Y.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?vt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await vt.isNetworkSupported((s=Y.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?ki.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:At.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){ki.clientId=t,ki.api=new r1({baseUrl:qX,clientId:t})}},AO={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Qg(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},_U={async getMyTokensWithBalance(t){const e=gn.state.address,n=Y.state.activeCaipNetwork,r=st.getConnectorId("eip155")===pe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=et.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===pe.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await vt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=AO.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await rt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await rt.walletGetAssets({account:t,chainFilter:[s]});if(!AO.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>AO.createBalance(l,e.caipNetworkId));return et.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Wc=tr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),ZFe={state:Wc,replaceState(t){t&&Object.assign(Wc,I0(t))},subscribe(t){return Y.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return Y.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){Y.setAccountProp("status",t,e)},getCaipAddress(t){return Y.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?lt.getPlainAddress(t):void 0;e===Y.state.activeChain&&(Y.state.activeCaipAddress=t),Y.setAccountProp("caipAddress",t,e),Y.setAccountProp("address",n,e)},setBalance(t,e,n){Y.setAccountProp("balance",t,n),Y.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){Y.setAccountProp("profileName",t,e)},setProfileImage(t,e){Y.setAccountProp("profileImage",t,e)},setUser(t,e){Y.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){Y.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){Y.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){Y.setAccountProp("currentTab",t,Y.state.activeChain)},setTokenBalance(t,e){t&&Y.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){Y.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=Y.getAccountProp("addressLabels",n)||new Map;r.set(t,e),Y.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=Y.getAccountProp("addressLabels",e)||new Map;n.delete(t),Y.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){Y.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){Y.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&Y.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){Y.setAccountProp("socialWindow",t?I0(t):void 0,e)},setFarcasterUrl(t,e){Y.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Wc.balanceLoading=!0;const e=(i=Y.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Y.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Y.state.activeCaipAddress,s=r?lt.getPlainAddress(r):void 0;if(Wc.lastRetry&&!lt.isAllowedRetry(Wc.lastRetry,30*pi.ONE_SEC_MS))return Wc.balanceLoading=!1,[];try{if(s&&e&&n){const a=await _U.getMyTokensWithBalance();return gn.setTokenBalance(a,n),Wc.lastRetry=void 0,Wc.balanceLoading=!1,a}}catch(a){Wc.lastRetry=Date.now(),t==null||t(a),Oh.showError("Token Balance Unavailable")}finally{Wc.balanceLoading=!1}return[]},resetAccount(t){Y.resetAccount(t)}},gn=Ua(ZFe),XFe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=Y.state.activeCaipNetwork,r=Ct.state.data;if(t.id===(n==null?void 0:n.id))return;const i=gn.getCaipAddress(Y.state.activeChain),o=t.chainNamespace!==Y.state.activeChain,a=gn.getCaipAddress(t.chainNamespace),l=st.getConnectorId(Y.state.activeChain)===pe.CONNECTOR_ID.AUTH,u=pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Ct.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Ct.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Ct.push("SwitchNetwork",{...r,network:t})}},Di=tr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),eje={state:Di,subscribe(t){return oo(Di,()=>t(Di))},subscribeKey(t,e){return Ai(Di,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=Y.state.activeChain,r=e&&e!==n,s=(i=Y.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(rt.state.wcBasic?yt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await yt.prefetch(),st.setFilterByNamespace(t==null?void 0:t.namespace),Gn.setLoading(!0,e),e&&r){const a=((o=Y.getNetworkData(e))==null?void 0:o.caipNetwork)||Y.getRequestedCaipNetworks(e)[0];a&&XFe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=Y.state.noAdapters;At.state.manualWCControl||a&&!s?lt.isMobile()?Ct.reset("AllWallets"):Ct.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Ct.reset(t.view,t.data):s?Ct.reset("Account"):Ct.reset("Connect")}Di.open=!0,Wy.set({open:!0}),lr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=At.state.enableEmbedded,e=!!Y.state.activeCaipAddress;Di.open&&lr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Di.open=!1,Ct.reset("Connect"),Gn.clearLoading(),t?e?Ct.replace("Account"):Ct.push("Connect"):Wy.set({open:!1}),rt.resetUri()},setLoading(t,e){e&&Di.loadingNamespaceMap.set(e,t),Di.loading=t,Wy.set({loading:t})},clearLoading(){Di.loadingNamespaceMap.clear(),Di.loading=!1},shake(){Di.shake||(Di.shake=!0,setTimeout(()=>{Di.shake=!1},500))}},Gn=Ua(eje),L9=2147483648,tje={convertEVMChainIdToCoinType(t){if(t>=L9)throw new Error("Invalid chainId");return(L9|t)>>>0}},ta=tr({suggestions:[],loading:!1}),nje={state:ta,subscribe(t){return oo(ta,()=>t(ta))},subscribeKey(t,e){return Ai(ta,t,e)},async resolveName(t){var e,n;try{return await vt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await vt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ta.loading=!0,ta.suggestions=[];const e=await vt.getEnsNameSuggestions(t);return ta.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ta.suggestions}catch(e){const n=ES.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ta.loading=!1}},async getNamesForAddress(t){try{if(!Y.state.activeCaipNetwork)return[];const n=et.getEnsFromCacheForAddress(t);if(n)return n;const r=await vt.reverseLookupEnsName({address:t});return et.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=ES.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=Y.state.activeCaipNetwork,n=gn.state.address,r=st.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");ta.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Ct.pushTransactionStack({onCancel(){Ct.replace("RegisterAccountName")}});const i=await rt.signMessage(s);ta.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=tje.convertEVMChainIdToCoinType(Number(o));await vt.registerEnsName({coinType:a,address:n,signature:i,message:s}),gn.setProfileName(t,e.chainNamespace),Ct.replace("RegisterAccountNameSuccess")}catch(s){const i=ES.parseEnsApiError(s,`Error registering name ${t}`);throw Ct.replace("RegisterAccountName"),new Error(i)}finally{ta.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},ES=Ua(nje);let $f=null;const Gd={getSIWX(){return At.state.siwx},async initializeIfEnabled(){var i;const t=At.state.siwx,e=Y.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(Y.checkIfSupportedNetwork(n))try{if($f&&await $f,(await t.getSessions(`${n}:${r}`,s)).length)return;await Gn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),lr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=rt._getClient())==null?void 0:i.disconnect().catch(console.error)),Ct.reset("Connect"),Oh.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=At.state.siwx,e=lt.getPlainAddress(Y.getActiveCaipAddress()),n=Y.getActiveCaipNetwork(),r=rt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();st.getConnectorId(n.chainNamespace)===pe.CONNECTOR_ID.AUTH&&Ct.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Y.setLastConnectedSIWECaipNetwork(n),Gn.close(),lr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Gn.state.open||Ct.state.view==="ApproveTransaction")&&await Gn.open({view:"SIWXSignMessage"}),Oh.showError("Error signing message"),lr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=Y.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,lt.getPlainAddress(Y.getActiveCaipAddress())||""));s&&s.length>0?await Y.switchActiveNetwork(r):await rt.disconnect()}else await rt.disconnect()}else Gn.close();Gn.close(),lr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=Y.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,lt.getPlainAddress(Y.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=At.state.siwx,e=lt.getPlainAddress(Y.getActiveCaipAddress()),n=Y.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Ct.state.view==="ApproveTransaction",r=Ct.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Gd.getSIWX();if(!i||!s.includes(pe.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=Y.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Gd.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if($f)return $f;const r=Gd.getSIWX();return r?($f=r.addSession({data:t,message:e,signature:n}).finally(()=>{$f=null}),$f):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Gd.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=Y.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Oh.showLoading("Authenticating...",{autoClose:!1}),gn.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),lr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Gd.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),lr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Gd.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Oh.hide()}}return!0},getSIWXEventProperties(){var e;const t=Y.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=Y.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Fl(t)===Rs.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},vo={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:pe.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Po={ConnectorExplorerIds:{[pe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[pe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[pe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[pe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[pe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[vo.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[vo.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[vo.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[vo.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[vo.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[vo.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[vo.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[vo.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[vo.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[vo.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[vo.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[pe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[pe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[pe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[pe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[pe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[pe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[pe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[pe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[pe.CONNECTOR_ID.COINBASE]:"Coinbase",[pe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[pe.CONNECTOR_ID.LEDGER]:"Ledger",[pe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[pe.CONNECTOR_ID.INJECTED]:"INJECTED",[pe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[pe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[pe.CONNECTOR_ID.AUTH]:"AUTH",[vo.CONNECTOR_TYPE_AUTH]:"AUTH"}},Ki={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${vo.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=Y.state.activeChain;return pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>st.getConnectorId(e)===pe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},rje=new AbortController,Rd={EmbeddedWalletAbortController:rje,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},sje="rpc.walletconnect.org";function U9(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const SO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ev={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===sje}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:pe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${pe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return SO.includes(e)?U9(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,y;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((y=r==null?void 0:r[i])==null?void 0:y.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Po.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Ev.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ih(a.url,a.config))}),SO.includes(t.caipNetworkId)&&r.push(Ih(U9(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ih(a))}),RI(r)},extendWagmiTransports(t,e,n){if(SO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return RI([n,Ih(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:pe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=et.getActiveCaipNetworkId(),n=Y.getAllRequestedCaipNetworks(),r=Array.from(((c=Y.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},$9={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Es={set(t,e){gl.isClient&&localStorage.setItem(`${Je.STORAGE_KEY}${t}`,e)},get(t){return gl.isClient?localStorage.getItem(`${Je.STORAGE_KEY}${t}`):null},delete(t,e){gl.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Je.STORAGE_KEY}${t}`))}},TA=30*1e3,gl={checkIfAllowedToTriggerEmail(){const t=Es.get(Je.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<TA){const n=Math.ceil((TA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Es.get(Je.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<TA)return Math.ceil((TA-e)/1e3)}return 0},checkIfRequestExists(t){return Rs.NOT_SAFE_RPC_METHODS.includes(t.method)||Rs.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match($9.transactionHash))||(t==null?void 0:t.match($9.signedMessage)))?Je.RPC_RESPONSE_TYPE_TX:Je.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Rs.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},mr=E.object({message:E.string()});function $e(t){return E.literal(Je[t])}const gT=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const ije=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),oje=E.object({email:E.string().email()}),aje=E.object({otp:E.string()}),cje=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(gT),rpcUrl:E.optional(E.string())}),lje=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(gT),rpcUrl:E.optional(E.string())}),uje=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),dje=E.object({email:E.string().email()}),hje=E.object({otp:E.string()}),fje=E.object({otp:E.string()}),pje=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),gje=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),mje=E.object({type:E.string()}),yje=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),wje=E.object({url:E.string()}),bje=E.object({userName:E.string()}),vje=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Rs.ACCOUNT_TYPES.EOA,Rs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(gT)}),Eje=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),_je=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Rs.ACCOUNT_TYPES.EOA,Rs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(gT)}),Cje=E.object({uri:E.string()}),Aje=E.object({isConnected:E.boolean()}),Sje=E.object({chainId:E.string().or(E.number())}),Ije=E.object({chainId:E.string().or(E.number())}),xje=E.object({newEmail:E.string().email()}),Nje=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const Tje=E.object({version:E.string().optional()}),Rje=E.object({type:E.string(),address:E.string()}),Pje=E.any(),Oje=E.object({method:E.literal("eth_accounts")}),kje=E.object({method:E.literal("eth_blockNumber")}),Dje=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),Mje=E.object({method:E.literal("eth_chainId")}),Lje=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),Uje=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),$je=E.object({method:E.literal("eth_gasPrice")}),Bje=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),Fje=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),jje=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),zje=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),Wje=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),Hje=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),Gje=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),qje=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),Vje=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),Kje=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),Yje=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),Qje=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),Jje=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),Zje=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),Xje=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),e9e=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),t9e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),n9e=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),r9e=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),s9e=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),i9e=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),o9e=E.object({method:E.literal("eth_newBlockFilter")}),a9e=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),c9e=E.object({method:E.literal("eth_newPendingTransactionFilter")}),l9e=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),u9e=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),d9e=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),B9=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),h9e=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),f9e=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),p9e=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),g9e=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),m9e=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),y9e=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),w9e=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),b9e=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),v9e=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),E9e=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),_9e=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),C9e=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),F9=E.object({token:E.string()}),Be=E.object({id:E.string().optional()}),tv={appEvent:Be.extend({type:$e("APP_SWITCH_NETWORK"),payload:ije}).or(Be.extend({type:$e("APP_CONNECT_EMAIL"),payload:oje})).or(Be.extend({type:$e("APP_CONNECT_DEVICE")})).or(Be.extend({type:$e("APP_CONNECT_OTP"),payload:aje})).or(Be.extend({type:$e("APP_CONNECT_SOCIAL"),payload:cje})).or(Be.extend({type:$e("APP_GET_FARCASTER_URI")})).or(Be.extend({type:$e("APP_CONNECT_FARCASTER")})).or(Be.extend({type:$e("APP_GET_USER"),payload:E.optional(lje)})).or(Be.extend({type:$e("APP_GET_SOCIAL_REDIRECT_URI"),payload:uje})).or(Be.extend({type:$e("APP_SIGN_OUT")})).or(Be.extend({type:$e("APP_IS_CONNECTED"),payload:E.optional(F9)})).or(Be.extend({type:$e("APP_GET_CHAIN_ID")})).or(Be.extend({type:$e("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Be.extend({type:$e("APP_INIT_SMART_ACCOUNT")})).or(Be.extend({type:$e("APP_SET_PREFERRED_ACCOUNT"),payload:mje})).or(Be.extend({type:$e("APP_RPC_REQUEST"),payload:B9.or(C9e).or(Oje).or(kje).or(Dje).or(Mje).or(Lje).or(Uje).or($je).or(Bje).or(Fje).or(jje).or(zje).or(Wje).or(Hje).or(Gje).or(qje).or(Vje).or(Kje).or(Yje).or(Qje).or(Jje).or(Zje).or(Xje).or(e9e).or(t9e).or(n9e).or(r9e).or(s9e).or(i9e).or(o9e).or(a9e).or(c9e).or(l9e).or(u9e).or(d9e).or(B9).or(h9e).or(f9e).or(p9e).or(g9e).or(m9e).or(y9e).or(b9e).or(w9e).or(v9e).or(E9e).or(_9e).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(Be.extend({type:$e("APP_UPDATE_EMAIL"),payload:dje})).or(Be.extend({type:$e("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:hje})).or(Be.extend({type:$e("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:fje})).or(Be.extend({type:$e("APP_SYNC_THEME"),payload:pje})).or(Be.extend({type:$e("APP_SYNC_DAPP_DATA"),payload:gje})).or(Be.extend({type:$e("APP_RELOAD")})).or(Be.extend({type:$e("APP_RPC_ABORT")})),frameEvent:Be.extend({type:$e("FRAME_SWITCH_NETWORK_ERROR"),payload:mr}).or(Be.extend({type:$e("FRAME_SWITCH_NETWORK_SUCCESS"),payload:Ije})).or(Be.extend({type:$e("FRAME_CONNECT_EMAIL_SUCCESS"),payload:yje})).or(Be.extend({type:$e("FRAME_CONNECT_EMAIL_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:wje})).or(Be.extend({type:$e("FRAME_GET_FARCASTER_URI_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:bje})).or(Be.extend({type:$e("FRAME_CONNECT_FARCASTER_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_CONNECT_OTP_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_CONNECT_OTP_SUCCESS")})).or(Be.extend({type:$e("FRAME_CONNECT_DEVICE_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Be.extend({type:$e("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:vje})).or(Be.extend({type:$e("FRAME_CONNECT_SOCIAL_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_GET_USER_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_GET_USER_SUCCESS"),payload:_je})).or(Be.extend({type:$e("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:Cje})).or(Be.extend({type:$e("FRAME_SIGN_OUT_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_SIGN_OUT_SUCCESS")})).or(Be.extend({type:$e("FRAME_IS_CONNECTED_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_IS_CONNECTED_SUCCESS"),payload:Aje})).or(Be.extend({type:$e("FRAME_GET_CHAIN_ID_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Sje})).or(Be.extend({type:$e("FRAME_RPC_REQUEST_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_RPC_REQUEST_SUCCESS"),payload:Pje})).or(Be.extend({type:$e("FRAME_SESSION_UPDATE"),payload:F9})).or(Be.extend({type:$e("FRAME_UPDATE_EMAIL_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_UPDATE_EMAIL_SUCCESS"),payload:Eje})).or(Be.extend({type:$e("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Be.extend({type:$e("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:xje})).or(Be.extend({type:$e("FRAME_SYNC_THEME_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_SYNC_THEME_SUCCESS")})).or(Be.extend({type:$e("FRAME_SYNC_DAPP_DATA_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Be.extend({type:$e("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:Nje})).or(Be.extend({type:$e("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:Rje})).or(Be.extend({type:$e("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_READY"),payload:Tje})).or(Be.extend({type:$e("FRAME_RELOAD_ERROR"),payload:mr})).or(Be.extend({type:$e("FRAME_RELOAD_SUCCESS")}))};function IO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function A9e({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=pe.BLOCKCHAIN_API_RPC_URL}){const i=new URL(NFe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class S9e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=pe.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!IO(Je.FRAME_EVENT_KEY,u))return;const d=tv.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}gl.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{gl.isClient&&window.addEventListener("message",({data:a})=>{if(!IO(Je.FRAME_EVENT_KEY,a))return;const c=tv.frameEvent.parse(a);o(c)})},onAppEvent:o=>{gl.isClient&&window.addEventListener("message",({data:a})=>{if(!IO(Je.APP_EVENT_KEY,a))return;const c=tv.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(gl.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");tv.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(gl.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");tv.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),gl.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=A9e({projectId:e,chainId:r,version:RFe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class I9e{constructor(e){var i;const n=am({level:TFe}),{logger:r,chunkLoggerController:s}=GN({opts:n});this.logger=ks(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class x9e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new I9e(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new S9e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Es.get(Je.EMAIL_LOGIN_USED_KEY)}getEmail(){return Es.get(Je.EMAIL)}getUsername(){return Es.get(Je.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Je.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{gl.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Je.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Je.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Je.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Je.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Je.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Je.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Je.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Je.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Je.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Je.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Je.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Je.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Je.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Je.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Je.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Je.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Je.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Je.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Je.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Je.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Rs.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Je.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Je.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Je.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Rs.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Rs.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Je.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Je.APP_SYNC_DAPP_DATA,Je.APP_SYNC_THEME,Je.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Je.APP_CONNECT_EMAIL,Je.APP_CONNECT_DEVICE,Je.APP_CONNECT_OTP,Je.APP_CONNECT_SOCIAL,Je.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const y=e;this.openRpcRequests=[...this.openRpcRequests,{...y.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(y,m){var b,v,A;y.id===u&&((v=m==null?void 0:(b=m.logger).info)==null||v.call(b,{framEvent:y,id:u},"Received frame response"),y.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&c(y.payload),c(void 0)):y.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in y&&l(new Error(((A=y.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,y=>h(y,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Es.set(Je.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Es.set(Je.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Es.set(Je.EMAIL,e),Es.set(Je.EMAIL_LOGIN_USED_KEY,"true"),Es.delete(Je.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Es.delete(Je.EMAIL_LOGIN_USED_KEY),Es.delete(Je.EMAIL),Es.delete(Je.LAST_USED_CHAIN_KEY),Es.delete(Je.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Es.set(Je.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Es.get(Je.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Es.set(Je.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Ph.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class Hy{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return Hy.instance||(Hy.instance=new x9e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),Hy.instance}}const N9e={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},j9={filterOutDuplicatesByRDNS(t){const e=At.state.enableEIP6963?st.state.connectors:[],n=et.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&lt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=st.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=et.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=st.state,{featuredWalletIds:n}=At.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=At.state.features)==null?void 0:c.connectMethodsOrder),r=e||st.state.connectors;if(n)return n;const{injected:s,announced:i}=_S.getConnectorsByType(r,yt.state.recommended,yt.state.featured),o=s.filter(_S.showConnector),a=i.filter(_S.showConnector);return o.length||a.length?["wallet","email","social"]:N9e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&yt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&yt.state.excludedWallets.some(r=>Ki.isLowerCaseMatch(r.name,t.name));return e||n}},_S={getConnectorsByType(t,e,n){const{customWallets:r}=At.state,s=et.getRecentWallets(),i=j9.filterOutDuplicateWallets(e),o=j9.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&yt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&yt.state.excludedWallets.some(i=>Ki.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!lt.isMobile()||lt.isMobile()&&!e&&!rt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(Y.state.chains.values()).some(n=>st.getConnectorId(n.namespace)===pe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=At.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:At.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),f=new Set(h.map(y=>y.type)),p=c.filter(y=>f.has(y)).map(y=>({type:y,isEnabled:!0})),g=h.filter(({type:y})=>!p.some(({type:b})=>b===y));return Array.from(new Set([...p,...g].map(({type:y})=>y)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!lt.isMobile())return{accounts:[],chainId:void 0};if(t.id===pe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};zu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;zu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;zu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const CS={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([CS.getAddresses(t),CS.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:CS.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Po.NetworkImageIds[e.id]]}]})}},Vm={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function s1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const z9=s1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),W9=s1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});s1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});s1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});s1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const T9e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},og={getMethodsByChainNamespace(t){return T9e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case z9.caipNetworkId:u.chains.push(z9.deprecatedCaipNetworkId);break;case W9.caipNetworkId:u.chains.push(W9.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await ES.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=og.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(og.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>lt.isCaipAddress(d)).map(d=>Ph.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Ph.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class R9e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case pe.CHAIN.EVM:await this.syncEVMConnections(e);break;case pe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case pe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const c=og.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await _S.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==pe.CONNECTOR_ID.AUTH&&a.id!==pe.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const c=og.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,y,m;if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const b=og.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>lt.createAccount(pe.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:pe.CHAIN.BITCOIN,publicKey:((h=u[Vm.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[Vm.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[Vm.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:pe.CHAIN.BITCOIN,publicKey:((g=u[Vm.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((y=u[Vm.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.path)??"",address:((m=u[Vm.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>Ki.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>Ki.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>Ki.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>Ki.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>Ki.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class VX{constructor({provider:e,namespace:n}){this.id=pe.CONNECTOR_ID.WALLET_CONNECT,this.name=Po.ConnectorNamesMap[pe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Po.ConnectorImageIds[pe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=Y.getCaipNetworks.bind(Y),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=At.state.universalProviderConfigOverride,s=og.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Gd.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:P9e})}}const P9e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],O9e=[pe.CONNECTOR_ID.AUTH,pe.CONNECTOR_ID.WALLET_CONNECT];class k9e{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>Y.getCaipNetworks(n),this.getConnectorId=n=>st.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new R9e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:pe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:pe.CONNECTOR_ID.AUTH,type:"AUTH",name:pe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Po.ConnectorImageIds[pe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!Ki.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){gn.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Fl(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof VX);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=lt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=lt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=lt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&Ki.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=lt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),Ki.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?CS.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),Ki.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(O9e.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function D9e(t){let e=[],n,r;function s(a){return sx.parseEvmChainId(a)||1}function i(){var a;return n||(n=Hy.getInstance({projectId:t.options.projectId,chainId:(a=Y.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?qf.open(Rd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?qf.open(Rd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&qf.open(Rd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Rd.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>Y.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const y=sx.parseEvmChainId(c.getLastUsedChainId()||""),m=(g=t.chains)==null?void 0:g[0].id;if(l=y||m,!l)throw new Error("ChainId not found in provider")}const u=Fl("eip155"),{address:d,chainId:h,accounts:f}=await Gd.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:pe.CHAIN.EVM});e=(f==null?void 0:f.map(y=>y.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:pe.CONNECTOR_ID.AUTH,name:pe.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:pe.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Hy.getInstance({projectId:t.options.projectId,chainId:(c=Y.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Rd.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?qf.open(Rd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?qf.open(Rd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&qf.open(Rd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>Y.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=Y.state.activeChain===pe.CHAIN.EVM;if(pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>st.getConnectorId(h)===pe.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Dl(new Error("chain not found on connector."));const d=await this.getProvider(),h=Fl("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Dl(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(ku)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}CU.type="walletConnect";function CU(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:CU.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=Y.getCaipNetworks(),y=await this.getProvider();if(!y)throw new zd;a||(a=this.onDisplayUri,y.on("display_uri",a));const m=await this.isChainsStale();y.session&&m&&await y.disconnect();const b=At.state.universalProviderConfigOverride;if(!y.session||m){const I=og.createNamespaces(g,b);await y.connect({optionalNamespaces:I,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(k=>Number(k.id)))}const v=await this.getAccounts(),A=await this.getChainId(),C=(p=(f=(h=y.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,S=C==null?void 0:C.some(I=>Number(I.split(":")[1])===A);let x=1;S?x=A:C!=null&&C[0]&&(x=Number(C[0].split(":")[1])),a&&(y.removeListener("display_uri",a),a=void 0),o&&(y.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),y.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),y.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),y.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),y.on("session_delete",c));const T=b==null?void 0:b.defaultChain;return y.setDefaultChain(T??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Fr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var y,m,b;const d=await this.getProvider();if(!((y=d==null?void 0:d.session)!=null&&y.namespaces))return[];const h=(b=(m=d==null?void 0:d.session)==null?void 0:m.namespaces[pe.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const A=v==null?void 0:v.toLowerCase();return p.has(A)?!1:(p.add(A),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=et.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const y=et.getStoredActiveCaipNetworkId(),m=h?e.getCaipNetworks(h):[],b=m==null?void 0:m.find(v=>v.id===y);b&&b.chainNamespace===pe.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,y,m,b;const d=(g=e.getCaipNetwork(pe.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(m=(y=(await this.getProvider()).session)==null?void 0:y.namespaces[pe.CHAIN.EVM])==null?void 0:m.chains)==null?void 0:b[0],p=Y.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,y,m,b;const f=await this.getProvider();if(!f)throw new zd;const p=Y.getCaipNetworks().find(v=>v.id===h);if(!p)throw new Dl(new n_);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:tt(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const A=v;if(/(?:user rejected)/iu.test(A.message))throw new Fr(A);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(g=p.blockExplorers)!=null&&g.default.url?[(y=p.blockExplorers)==null?void 0:y.default.url]:[];const S=((b=(m=p.rpcUrls)==null?void 0:m.chainDefault)==null?void 0:b.http)||[],x={blockExplorerUrls:C,chainId:tt(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:S};await f.request({method:"wallet_addEthereumChain",params:[x]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,h]),{...p,id:p.id}}catch(C){throw new Fr(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>ku(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(Y.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[pe.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(y=>Number.parseInt(y.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const nv=tr({pendingTransactions:0}),H9={state:nv,subscribeKey(t,e){return Ai(nv,t,e)},increase(t){nv[t]+=1},decrease(t){nv[t]-=1},reset(t){nv[t]=0}};function M9e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function L9e(t){if(lt.isSafeApp()){const{safe:e}=await qs(async()=>{const{safe:n}=await import("./index-hEaO5InU.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function U9e(t){try{const{coinbaseWallet:e}=await qs(async()=>{const{coinbaseWallet:n}=await import("./index-hEaO5InU.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const $9e={enable:!1,pollingInterval:3e4};class B9e extends k9e{constructor(e){const n=Ev.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=pe.CHAIN.EVM,this.adapterType=pe.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...$9e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===pe.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>lt.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=$y(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>lt.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=$y(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===pe.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Ev.getCaipNetworkId(s);i?n[s.id]=Ev.extendWagmiTransports(s,e.projectId,i):n[s.id]=Ev.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=aye({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=jme(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),H9.increase("pendingTransactions")}});const e=H9.subscribeKey("pendingTransactions",n=>{var r;n>=pe.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){HK(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),GK(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===pe.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:et.getConnectedSocialProvider(),username:et.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await U9e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await L9e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(CU(e,n)),e.enableEIP6963!==!1&&r.push(vN({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(D9e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Po.ConnectorNamesMap[r.id]??r.name,imageId:Po.ConnectorImageIds[r.id],type:Po.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===pe.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await $me(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=$y(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Lme(this.wagmiConfig,s);const i=await Ume(this.wagmiConfig,s);return await VK(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(sx.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await KK(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await Tme(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return cge(e.value,e.decimals)}formatUnits(e){return Qg(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===pe.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===pe.CONNECTOR_ID.AUTH||e.id===pe.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Po.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Po.ConnectorNamesMap[e.id]??e.name,imageId:Po.ConnectorImageIds[e.id],type:Po.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===pe.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){qK(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Ja(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(lt.isSafeApp()&&n===pe.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await nS(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await nS(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await Z6(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,y;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===pe.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const m=[...u.accounts].sort((b,v)=>Ki.isLowerCaseMatch(b,r)?-1:Ki.isLowerCaseMatch(v,r)?1:0);return(y=this.wagmiConfig)==null||y.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:m,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:m[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await nS(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await Bk(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=et.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await Ome(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});et.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=Ja(this.wagmiConfig).find(i=>Ki.isLowerCaseMatch(i.connector.id,e.id));return await Uk(this.wagmiConfig,{connector:n}),At.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=Ja(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await Uk(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await Z6(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Ja(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=M9e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Ja(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Ja(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Ja(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:pe.CONNECTOR_ID.AUTH,type:"AUTH",name:pe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Po.ConnectorImageIds[pe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=Ja(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(Y.state.activeChain==="eip155")return;Bk(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new VX({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const KX={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},YX="7c65f27254d6ddd24cf7eedf2685c4fb",F9e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},QX=new B9e({networks:[xX,KX],projectId:YX,ssr:!1});$8e({adapters:[QX],networks:[xX,KX],projectId:YX,metadata:F9e,features:{analytics:!1}});const JX=()=>{if(!QS)throw new Error("[FIREBASE] Database not initialized");return QS},Bg=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,ox=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;const n=new Date().toISOString(),r=JX(),s=sa(r,`leaderboard/${t}`),i=await Yf(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await kv(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Bg(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},j9e=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Bg(e),redPlayer:Bg(n)}),await ox(e,t==="blue"?"win":t==="red"?"loss":"draw"),await ox(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},ZX=async(t=20)=>{try{const e=JX(),n=sa(e,"leaderboard"),r=await Yf(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Hc=()=>{if(!QS)throw new Error("[FIREBASE] Database not initialized");return QS},yr={async getGame(t){try{const e=Hc(),n=sa(e,`chess_games/${t}`),r=await Yf(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=Hc(),r=sa(n,`chess_games/${t}`);await kv(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=Hc(),r=sa(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=Y$(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=Hc(),r=sa(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await kv(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await Yf(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=Hc(),e=sa(t,"chess_games"),n=await Yf(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=Hc(),e=sa(t,"chess_games"),n=await Yf(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=Hc(),n=sa(e,`chess_games/${t}`);await uae(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=Hc(),n=sa(e,`leaderboard/${t.username}`);await kv(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=Hc(),e=sa(t,"leaderboard"),n=await Yf(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=Hc(),n=sa(e,"leaderboard");return Y$(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},z9e="6.15.0";function W9e(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function ci(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function gt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&W9e(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Cy(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Cy(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Cy(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Cy(r,e)}: ${Cy(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Is(t,e){return t&&t.code===e}function AU(t){return Is(t,"CALL_EXCEPTION")}function sr(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Cy(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Cy(a))}}i.push(`code=${e}`),i.push(`version=${z9e}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return gt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&gt(s,{shortMessage:r}),s}function be(t,e,n,r){if(!t)throw sr(e,n,r)}function Q(t,e,n,r){be(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function XX(t,e,n){n==null&&(n=""),n&&(n=": "+n),be(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),be(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function mT(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),be(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function eee(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}Q(!1,"invalid BytesLike value",e||"value",t)}function Bt(t,e){return eee(t,e,!1)}function hi(t,e){return eee(t,e,!0)}function Kn(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function SU(t){return Kn(t,!0)||t instanceof Uint8Array}const G9="0123456789abcdef";function Le(t){const e=Bt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=G9[(s&240)>>4]+G9[s&15]}return n}function Cr(t){return"0x"+t.map(e=>Le(e).substring(2)).join("")}function Gy(t){return Kn(t,!0)?(t.length-2)/2:Bt(t).length}function br(t,e,n){const r=Bt(t);return n!=null&&n>r.length&&be(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Le(r.slice(e??0,n??r.length))}function tee(t,e,n){const r=Bt(t);be(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Le(s)}function nd(t,e){return tee(t,e,!0)}function H9e(t,e){return tee(t,e,!1)}const yT=BigInt(0),pc=BigInt(1),Ay=9007199254740991;function G9e(t,e){const n=wT(t,"value"),r=BigInt(Ft(e,"width"));if(be(n>>r===yT,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-pc){const s=(pc<<r)-pc;return-((~n&s)+pc)}return n}function nee(t,e){let n=Ze(t,"value");const r=BigInt(Ft(e,"width")),s=pc<<r-pc;if(n<yT){n=-n,be(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(pc<<r)-pc;return(~n&i)+pc}else be(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function _v(t,e){const n=wT(t,"value"),r=BigInt(Ft(e,"bits"));return n&(pc<<r)-pc}function Ze(t,e){switch(typeof t){case"bigint":return t;case"number":return Q(Number.isInteger(t),"underflow",e||"value",t),Q(t>=-Ay&&t<=Ay,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Q(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Q(!1,"invalid BigNumberish value",e||"value",t)}function wT(t,e){const n=Ze(t,e);return be(n>=yT,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const q9="0123456789abcdef";function IU(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=q9[n>>4],e+=q9[n&15];return BigInt(e)}return Ze(t)}function Ft(t,e){switch(typeof t){case"bigint":return Q(t>=-Ay&&t<=Ay,"overflow",e||"value",t),Number(t);case"number":return Q(Number.isInteger(t),"underflow",e||"value",t),Q(t>=-Ay&&t<=Ay,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Ft(BigInt(t),e)}catch(n){Q(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Q(!1,"invalid numeric value",e||"value",t)}function q9e(t){return Ft(IU(t))}function mf(t,e){let r=wT(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Ft(e,"width");for(be(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function Vr(t){const e=wT(t,"value");if(e===yT)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function uc(t){let e=Le(SU(t)?t:Vr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const V9="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const K9=BigInt(58);function V9e(t){const e=Bt(t);let n=IU(e),r="";for(;n;)r=V9[Number(n%K9)]+r,n/=K9;for(let s=0;s<e.length&&!e[s];s++)r=V9[0]+r;return r}function K9e(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Bt(e)}function Y9e(t){const e=Bt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var ow;class ree{constructor(e,n,r){ee(this,"filter");ee(this,"emitter");K(this,ow);U(this,ow,n),gt(this,{emitter:e,filter:r})}async removeListener(){_(this,ow)!=null&&await this.emitter.off(this.filter,_(this,ow))}}ow=new WeakMap;function Q9e(t,e,n,r,s){Q(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function see(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function J9e(t,e,n,r,s){return t==="OVERLONG"?(Q(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),see(t,e,n))}const Z9e=Object.freeze({error:Q9e,ignore:see,replace:J9e});function X9e(t,e){e==null&&(e=Z9e.error);const n=Bt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function Wu(t,e){Q(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);Q(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function e7e(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function ax(t,e){return e7e(X9e(t,e))}function iee(t){async function e(n,r){be(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();be(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),be(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=sr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=sr("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const t7e=12,n7e=250;let Y9=iee();const r7e=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),s7e=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let xO=!1;async function oee(t,e){try{const n=t.match(r7e);if(!n)throw new Error("invalid data");return new nf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?K9e(n[3]):o7e(n[3]))}catch{return new nf(599,"BAD REQUEST (invalid data: URI)",{},null,new yf(t))}}function aee(t){async function e(n,r){try{const s=n.match(s7e);if(!s)throw new Error("invalid link");return new yf(`${t}${s[2]}`)}catch{return new nf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new yf(n))}}return e}const RA={data:oee,ipfs:aee("https://gateway.ipfs.io/ipfs/")},cee=new WeakMap;var Op,ah;class i7e{constructor(e){K(this,Op);K(this,ah);U(this,Op,[]),U(this,ah,!1),cee.set(e,()=>{if(!_(this,ah)){U(this,ah,!0);for(const n of _(this,Op))setTimeout(()=>{n()},0);U(this,Op,[])}})}addListener(e){be(!_(this,ah),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),_(this,Op).push(e)}get cancelled(){return _(this,ah)}checkSignal(){be(!this.cancelled,"cancelled","CANCELLED",{})}}Op=new WeakMap,ah=new WeakMap;function PA(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var aw,cw,tc,mu,lw,uw,es,So,yu,kp,Dp,Mp,tl,nc,ch,Lp,Cv;const vx=class vx{constructor(e){K(this,Lp);K(this,aw);K(this,cw);K(this,tc);K(this,mu);K(this,lw);K(this,uw);K(this,es);K(this,So);K(this,yu);K(this,kp);K(this,Dp);K(this,Mp);K(this,tl);K(this,nc);K(this,ch);U(this,uw,String(e)),U(this,aw,!1),U(this,cw,!0),U(this,tc,{}),U(this,mu,""),U(this,lw,3e5),U(this,nc,{slotInterval:n7e,maxAttempts:t7e}),U(this,ch,null)}get url(){return _(this,uw)}set url(e){U(this,uw,String(e))}get body(){return _(this,es)==null?null:new Uint8Array(_(this,es))}set body(e){if(e==null)U(this,es,void 0),U(this,So,void 0);else if(typeof e=="string")U(this,es,Wu(e)),U(this,So,"text/plain");else if(e instanceof Uint8Array)U(this,es,e),U(this,So,"application/octet-stream");else if(typeof e=="object")U(this,es,Wu(JSON.stringify(e))),U(this,So,"application/json");else throw new Error("invalid body")}hasBody(){return _(this,es)!=null}get method(){return _(this,mu)?_(this,mu):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),U(this,mu,String(e).toUpperCase())}get headers(){const e=Object.assign({},_(this,tc));return _(this,yu)&&(e.authorization=`Basic ${Y9e(Wu(_(this,yu)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&_(this,So)&&(e["content-type"]=_(this,So)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){_(this,tc)[String(e).toLowerCase()]=String(n)}clearHeaders(){U(this,tc,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return _(this,yu)||null}setCredentials(e,n){Q(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),U(this,yu,`${e}:${n}`)}get allowGzip(){return _(this,cw)}set allowGzip(e){U(this,cw,!!e)}get allowInsecureAuthentication(){return!!_(this,aw)}set allowInsecureAuthentication(e){U(this,aw,!!e)}get timeout(){return _(this,lw)}set timeout(e){Q(e>=0,"timeout must be non-zero","timeout",e),U(this,lw,e)}get preflightFunc(){return _(this,kp)||null}set preflightFunc(e){U(this,kp,e)}get processFunc(){return _(this,Dp)||null}set processFunc(e){U(this,Dp,e)}get retryFunc(){return _(this,Mp)||null}set retryFunc(e){U(this,Mp,e)}get getUrlFunc(){return _(this,ch)||Y9}set getUrlFunc(e){U(this,ch,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${_(this,es)?Le(_(this,es)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(_(this,nc).slotInterval=e.slotInterval),e.maxAttempts!=null&&(_(this,nc).maxAttempts=e.maxAttempts)}send(){return be(_(this,tl)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),U(this,tl,new i7e(this)),he(this,Lp,Cv).call(this,0,Q9()+this.timeout,0,this,new nf(0,"",{},null,this))}cancel(){be(_(this,tl)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=cee.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();be(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new vx(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,U(s,tc,Object.assign({},_(this,tc))),_(this,es)&&U(s,es,new Uint8Array(_(this,es))),U(s,So,_(this,So)),s}clone(){const e=new vx(this.url);return U(e,mu,_(this,mu)),_(this,es)&&U(e,es,_(this,es)),U(e,So,_(this,So)),U(e,tc,Object.assign({},_(this,tc))),U(e,yu,_(this,yu)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),U(e,kp,_(this,kp)),U(e,Dp,_(this,Dp)),U(e,Mp,_(this,Mp)),U(e,nc,Object.assign({},_(this,nc))),U(e,ch,_(this,ch)),e}static lockConfig(){xO=!0}static getGateway(e){return RA[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(xO)throw new Error("gateways locked");RA[e]=n}static registerGetUrl(e){if(xO)throw new Error("gateways locked");Y9=e}static createGetUrlFunc(e){return iee(e)}static createDataGateway(){return oee}static createIpfsGatewayFunc(e){return aee(e)}};aw=new WeakMap,cw=new WeakMap,tc=new WeakMap,mu=new WeakMap,lw=new WeakMap,uw=new WeakMap,es=new WeakMap,So=new WeakMap,yu=new WeakMap,kp=new WeakMap,Dp=new WeakMap,Mp=new WeakMap,tl=new WeakMap,nc=new WeakMap,ch=new WeakMap,Lp=new WeakSet,Cv=async function(e,n,r,s,i){var u,d,h;if(e>=_(this,nc).maxAttempts)return i.makeServerError("exceeded maximum retry limit");be(Q9()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await a7e(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in RA){const f=await RA[a](o.url,PA(_(s,tl)));if(f instanceof nf){let p=f;if(this.processFunc){PA(_(s,tl));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,PA(_(s,tl)));let l=new nf(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return he(u=o.redirect(f),Lp,Cv).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=_(this,nc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),he(d=o.clone(),Lp,Cv).call(d,e+1,n,p,s,l)}if(this.processFunc){PA(_(s,tl));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=_(this,nc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),he(h=o.clone(),Lp,Cv).call(h,e+1,n,p,s,l)}}return l};let yf=vx;var X_,eC,tC,Io,dw,Up;const HU=class HU{constructor(e,n,r,s,i){K(this,X_);K(this,eC);K(this,tC);K(this,Io);K(this,dw);K(this,Up);U(this,X_,e),U(this,eC,n),U(this,tC,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),U(this,Io,s==null?null:new Uint8Array(s)),U(this,dw,i||null),U(this,Up,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${_(this,Io)?Le(_(this,Io)):"null"}>`}get statusCode(){return _(this,X_)}get statusMessage(){return _(this,eC)}get headers(){return Object.assign({},_(this,tC))}get body(){return _(this,Io)==null?null:new Uint8Array(_(this,Io))}get bodyText(){try{return _(this,Io)==null?"":ax(_(this,Io))}catch{be(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{be(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new HU(599,r,this.headers,this.body,_(this,dw)||void 0);return U(s,Up,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:Q(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw gt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return _(this,Io)!=null}get request(){return _(this,dw)}ok(){return _(this,Up).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=_(this,Up);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{_(this,Io)&&(s=ax(_(this,Io)))}catch{}be(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};X_=new WeakMap,eC=new WeakMap,tC=new WeakMap,Io=new WeakMap,dw=new WeakMap,Up=new WeakMap;let nf=HU;function Q9(){return new Date().getTime()}function o7e(t){return Wu(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function a7e(t){return new Promise(e=>setTimeout(e,t))}function c7e(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function J9(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function Z9(t,e,n,r){const s=[];for(;n<e+1+r;){const i=lee(t,n);s.push(i.result),n+=i.consumed,be(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function lee(t,e){be(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{be(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=J9(t,e+1,r);return n(e+1+r+s),Z9(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),Z9(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=J9(t,e+1,r);n(e+1+r+s);const i=Le(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Le(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:c7e(t[e])}}function i1(t){const e=Bt(t,"data"),n=lee(e,0);return Q(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function X9(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function uee(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(uee(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=X9(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Bt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=X9(e.length);return n.unshift(183+n.length),n.concat(e)}const e7="0123456789abcdef";function wf(t){let e="0x";for(const n of uee(t))e+=e7[n>>4],e+=e7[n&15];return e}const gi=32,R3=new Uint8Array(gi),l7e=["then"],OA={},dee=new WeakMap;function tp(t){return dee.get(t)}function t7(t,e){dee.set(t,e)}function rv(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function P3(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof T0?P3(tp(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof T0&&(o=P3(tp(o),o,n)),r[s]=o),r},{})}var hw;const Sy=class Sy extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==OA&&(s=n,i=[],o=!1);super(s.length);K(this,hw);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(t7(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),U(this,hw,[]),_(this,hw)==null&&_(this,hw),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Ft(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&rv(`index ${f}`,p),p}if(l7e.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return t7(c,tp(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&rv(`index ${i}`,s),n&&s instanceof Sy&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=tp(this);return r.reduce((s,i,o)=>(be(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),P3(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=tp(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Sy(OA,i,o)}filter(n,r){const s=tp(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&rv(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Sy(OA,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&rv(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=tp(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&rv(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Sy(OA,n,r)}};hw=new WeakMap;let T0=Sy;function n7(t){let e=Vr(t);return be(e.length<=gi,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:gi,offset:e.length}),e.length!==gi&&(e=hi(Cr([R3.slice(e.length%gi),e]))),e}class ld{constructor(e,n,r,s){ee(this,"name");ee(this,"type");ee(this,"localName");ee(this,"dynamic");gt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){Q(!1,e,this.localName,n)}}var wu,$p,fw,AS;class O3{constructor(){K(this,fw);K(this,wu);K(this,$p);U(this,wu,[]),U(this,$p,0)}get data(){return Cr(_(this,wu))}get length(){return _(this,$p)}appendWriter(e){return he(this,fw,AS).call(this,hi(e.data))}writeBytes(e){let n=hi(e);const r=n.length%gi;return r&&(n=hi(Cr([n,R3.slice(r)]))),he(this,fw,AS).call(this,n)}writeValue(e){return he(this,fw,AS).call(this,n7(e))}writeUpdatableValue(){const e=_(this,wu).length;return _(this,wu).push(R3),U(this,$p,_(this,$p)+gi),n=>{_(this,wu)[e]=n7(n)}}}wu=new WeakMap,$p=new WeakMap,fw=new WeakSet,AS=function(e){return _(this,wu).push(e),U(this,$p,_(this,$p)+e.length),e.length};var Bi,xo,Bp,Fp,lh,Hg,D3,hee;const GU=class GU{constructor(e,n,r){K(this,Hg);ee(this,"allowLoose");K(this,Bi);K(this,xo);K(this,Bp);K(this,Fp);K(this,lh);gt(this,{allowLoose:!!n}),U(this,Bi,hi(e)),U(this,Bp,0),U(this,Fp,null),U(this,lh,r??1024),U(this,xo,0)}get data(){return Le(_(this,Bi))}get dataLength(){return _(this,Bi).length}get consumed(){return _(this,xo)}get bytes(){return new Uint8Array(_(this,Bi))}subReader(e){const n=new GU(_(this,Bi).slice(_(this,xo)+e),this.allowLoose,_(this,lh));return U(n,Fp,this),n}readBytes(e,n){let r=he(this,Hg,hee).call(this,0,e,!!n);return he(this,Hg,D3).call(this,e),U(this,xo,_(this,xo)+r.length),r.slice(0,e)}readValue(){return IU(this.readBytes(gi))}readIndex(){return q9e(this.readBytes(gi))}};Bi=new WeakMap,xo=new WeakMap,Bp=new WeakMap,Fp=new WeakMap,lh=new WeakMap,Hg=new WeakSet,D3=function(e){var n;if(_(this,Fp))return he(n=_(this,Fp),Hg,D3).call(n,e);U(this,Bp,_(this,Bp)+e),be(_(this,lh)<1||_(this,Bp)<=_(this,lh)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${_(this,lh)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:hi(_(this,Bi)),offset:_(this,xo),length:e,info:{bytesRead:_(this,Bp),dataLength:this.dataLength}})},hee=function(e,n,r){let s=Math.ceil(n/gi)*gi;return _(this,xo)+s>_(this,Bi).length&&(this.allowLoose&&r&&_(this,xo)+n<=_(this,Bi).length?s=n:be(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:hi(_(this,Bi)),length:_(this,Bi).length,offset:_(this,xo)+s})),_(this,Bi).slice(_(this,xo),_(this,xo)+s)};let k3=GU;function cx(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function xU(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function u7e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cx(t.outputLen),cx(t.blockLen)}function R0(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function fee(t,e){xU(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const NO=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pee=t=>t instanceof Uint8Array,d7e=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),TO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Gc=(t,e)=>t<<32-e|t>>>e,h7e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!h7e)throw new Error("Non little-endian hardware is not supported");function f7e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function bT(t){if(typeof t=="string"&&(t=f7e(t)),!pee(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function p7e(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!pee(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class NU{clone(){return this._cloneInto()}}function TU(t){const e=r=>t().update(bT(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function g7e(t=32){if(NO&&typeof NO.getRandomValues=="function")return NO.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class gee extends NU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,u7e(e);const r=bT(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return R0(this),this.iHash.update(e),this}digestInto(e){R0(this),xU(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const mee=(t,e,n)=>new gee(t,e).update(n).digest();mee.create=(t,e)=>new gee(t,e);function m7e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class yee extends NU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=TO(this.buffer)}update(e){R0(this);const{view:n,buffer:r,blockLen:s}=this;e=bT(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=TO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){R0(this),fee(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;m7e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=TO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const y7e=(t,e,n)=>t&e^~t&n,w7e=(t,e,n)=>t&e^t&n^e&n,b7e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Od=new Uint32Array(64);class v7e extends yee{constructor(){super(64,32,8,!1),this.A=Pd[0]|0,this.B=Pd[1]|0,this.C=Pd[2]|0,this.D=Pd[3]|0,this.E=Pd[4]|0,this.F=Pd[5]|0,this.G=Pd[6]|0,this.H=Pd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Od[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Od[d-15],f=Od[d-2],p=Gc(h,7)^Gc(h,18)^h>>>3,g=Gc(f,17)^Gc(f,19)^f>>>10;Od[d]=g+Od[d-7]+p+Od[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Gc(a,6)^Gc(a,11)^Gc(a,25),f=u+h+y7e(a,c,l)+b7e[d]+Od[d]|0,g=(Gc(r,2)^Gc(r,13)^Gc(r,22))+w7e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Od.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const wee=TU(()=>new v7e),kA=BigInt(2**32-1),M3=BigInt(32);function bee(t,e=!1){return e?{h:Number(t&kA),l:Number(t>>M3&kA)}:{h:Number(t>>M3&kA)|0,l:Number(t&kA)|0}}function vee(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=bee(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const E7e=(t,e)=>BigInt(t>>>0)<<M3|BigInt(e>>>0),_7e=(t,e,n)=>t>>>n,C7e=(t,e,n)=>t<<32-n|e>>>n,A7e=(t,e,n)=>t>>>n|e<<32-n,S7e=(t,e,n)=>t<<32-n|e>>>n,I7e=(t,e,n)=>t<<64-n|e>>>n-32,x7e=(t,e,n)=>t>>>n-32|e<<64-n,N7e=(t,e)=>e,T7e=(t,e)=>t,Eee=(t,e,n)=>t<<n|e>>>32-n,_ee=(t,e,n)=>e<<n|t>>>32-n,Cee=(t,e,n)=>e<<n-32|t>>>64-n,Aee=(t,e,n)=>t<<n-32|e>>>64-n;function R7e(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const P7e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),O7e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,k7e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),D7e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,M7e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),L7e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,kt={fromBig:bee,split:vee,toBig:E7e,shrSH:_7e,shrSL:C7e,rotrSH:A7e,rotrSL:S7e,rotrBH:I7e,rotrBL:x7e,rotr32H:N7e,rotr32L:T7e,rotlSH:Eee,rotlSL:_ee,rotlBH:Cee,rotlBL:Aee,add:R7e,add3L:P7e,add3H:O7e,add4L:k7e,add4H:D7e,add5H:L7e,add5L:M7e},[U7e,$7e]=kt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),kd=new Uint32Array(80),Dd=new Uint32Array(80);class B7e extends yee{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:y}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,y){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=y|0}process(e,n){for(let v=0;v<16;v++,n+=4)kd[v]=e.getUint32(n),Dd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=kd[v-15]|0,C=Dd[v-15]|0,S=kt.rotrSH(A,C,1)^kt.rotrSH(A,C,8)^kt.shrSH(A,C,7),x=kt.rotrSL(A,C,1)^kt.rotrSL(A,C,8)^kt.shrSL(A,C,7),T=kd[v-2]|0,I=Dd[v-2]|0,k=kt.rotrSH(T,I,19)^kt.rotrBH(T,I,61)^kt.shrSH(T,I,6),O=kt.rotrSL(T,I,19)^kt.rotrBL(T,I,61)^kt.shrSL(T,I,6),B=kt.add4L(x,O,Dd[v-7],Dd[v-16]),G=kt.add4H(B,S,k,kd[v-7],kd[v-16]);kd[v]=G|0,Dd[v]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:y,Hh:m,Hl:b}=this;for(let v=0;v<80;v++){const A=kt.rotrSH(d,h,14)^kt.rotrSH(d,h,18)^kt.rotrBH(d,h,41),C=kt.rotrSL(d,h,14)^kt.rotrSL(d,h,18)^kt.rotrBL(d,h,41),S=d&f^~d&g,x=h&p^~h&y,T=kt.add5L(b,C,x,$7e[v],Dd[v]),I=kt.add5H(T,m,A,S,U7e[v],kd[v]),k=T|0,O=kt.rotrSH(r,s,28)^kt.rotrBH(r,s,34)^kt.rotrBH(r,s,39),B=kt.rotrSL(r,s,28)^kt.rotrBL(r,s,34)^kt.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,b=y|0,g=f|0,y=p|0,f=d|0,p=h|0,{h:d,l:h}=kt.add(l|0,u|0,I|0,k|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const R=kt.add3L(k,B,W);r=kt.add3H(R,I,O,G),s=R|0}({h:r,l:s}=kt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=kt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=kt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=kt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=kt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=kt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:y}=kt.add(this.Gh|0,this.Gl|0,g|0,y|0),{h:m,l:b}=kt.add(this.Hh|0,this.Hl|0,m|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,y,m,b)}roundClean(){kd.fill(0),Dd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const F7e=TU(()=>new B7e);function j7e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const r7=j7e();r7.crypto||r7.msCrypto;function z7e(t){switch(t){case"sha256":return wee.create();case"sha512":return F7e.create()}Q(!1,"invalid hashing algorithm name","algorithm",t)}const[See,Iee,xee]=[[],[],[]],W7e=BigInt(0),sv=BigInt(1),H7e=BigInt(2),G7e=BigInt(7),q7e=BigInt(256),V7e=BigInt(113);for(let t=0,e=sv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],See.push(2*(5*r+n)),Iee.push((t+1)*(t+2)/2%64);let s=W7e;for(let i=0;i<7;i++)e=(e<<sv^(e>>G7e)*V7e)%q7e,e&H7e&&(s^=sv<<(sv<<BigInt(i))-sv);xee.push(s)}const[K7e,Y7e]=vee(xee,!0),s7=(t,e,n)=>n>32?Cee(t,e,n):Eee(t,e,n),i7=(t,e,n)=>n>32?Aee(t,e,n):_ee(t,e,n);function Q7e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=s7(l,u,1)^n[a],h=i7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Iee[o],c=s7(s,i,a),l=i7(s,i,a),u=See[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=K7e[r],t[1]^=Y7e[r]}n.fill(0)}class RU extends NU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,cx(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=d7e(this.state)}keccak(){Q7e(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){R0(this);const{blockLen:n,state:r}=this;e=bT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){R0(this,!1),xU(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return cx(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(fee(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new RU(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const J7e=(t,e,n)=>TU(()=>new RU(e,t,n)),Z7e=J7e(1,136,256/8);let Nee=!1;const Tee=function(t){return Z7e(t)};let Ree=Tee;function Mr(t){const e=Bt(t,"data");return Le(Ree(e))}Mr._=Tee;Mr.lock=function(){Nee=!0};Mr.register=function(t){if(Nee)throw new TypeError("keccak256 is locked");Ree=t};Object.freeze(Mr);const Pee=function(t){return z7e("sha256").update(t).digest()};let Oee=Pee,kee=!1;function hb(t){const e=Bt(t,"data");return Le(Oee(e))}hb._=Pee;hb.lock=function(){kee=!0};hb.register=function(t){if(kee)throw new Error("sha256 is locked");Oee=t};Object.freeze(hb);Object.freeze(hb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dee=BigInt(0),vT=BigInt(1),X7e=BigInt(2),ET=t=>t instanceof Uint8Array,eze=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function P0(t){if(!ET(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=eze[t[n]];return e}function Mee(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function PU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function O0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function ag(t){return PU(P0(t))}function OU(t){if(!ET(t))throw new Error("Uint8Array expected");return PU(P0(Uint8Array.from(t).reverse()))}function k0(t,e){return O0(t.toString(16).padStart(e*2,"0"))}function kU(t,e){return k0(t,e).reverse()}function tze(t){return O0(Mee(t))}function Za(t,e,n){let r;if(typeof e=="string")try{r=O0(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(ET(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function $_(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!ET(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function nze(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function rze(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function sze(t){let e;for(e=0;t>Dee;t>>=vT,e+=1);return e}function ize(t,e){return t>>BigInt(e)&vT}const oze=(t,e,n)=>t|(n?vT:Dee)<<BigInt(e),DU=t=>(X7e<<BigInt(t-1))-vT,RO=t=>new Uint8Array(t),o7=t=>Uint8Array.from(t);function Lee(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=RO(t),s=RO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=RO())=>{s=a(o7([0]),d),r=a(),d.length!==0&&(s=a(o7([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return $_(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const aze={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function o1(t,e,n={}){const r=(s,i,o)=>{const a=aze[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const cze=Object.freeze(Object.defineProperty({__proto__:null,bitGet:ize,bitLen:sze,bitMask:DU,bitSet:oze,bytesToHex:P0,bytesToNumberBE:ag,bytesToNumberLE:OU,concatBytes:$_,createHmacDrbg:Lee,ensureBytes:Za,equalBytes:nze,hexToBytes:O0,hexToNumber:PU,numberToBytesBE:k0,numberToBytesLE:kU,numberToHexUnpadded:Mee,numberToVarBytesBE:tze,utf8ToBytes:rze,validateObject:o1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hs=BigInt(0),Rr=BigInt(1),np=BigInt(2),lze=BigInt(3),L3=BigInt(4),a7=BigInt(5),c7=BigInt(8);BigInt(9);BigInt(16);function Gi(t,e){const n=t%e;return n>=hs?n:e+n}function uze(t,e,n){if(n<=hs||e<hs)throw new Error("Expected power/modulo > 0");if(n===Rr)return hs;let r=Rr;for(;e>hs;)e&Rr&&(r=r*t%n),t=t*t%n,e>>=Rr;return r}function na(t,e,n){let r=t;for(;e-- >hs;)r*=r,r%=n;return r}function U3(t,e){if(t===hs||e<=hs)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Gi(t,e),r=e,s=hs,i=Rr;for(;n!==hs;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Rr)throw new Error("invert: does not exist");return Gi(s,e)}function dze(t){const e=(t-Rr)/np;let n,r,s;for(n=t-Rr,r=0;n%np===hs;n/=np,r++);for(s=np;s<t&&uze(s,e,t)!==t-Rr;s++);if(r===1){const o=(t+Rr)/L3;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Rr)/np;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Rr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function hze(t){if(t%L3===lze){const e=(t+Rr)/L3;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%c7===a7){const e=(t-a7)/c7;return function(r,s){const i=r.mul(s,np),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,np),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return dze(t)}const fze=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function pze(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=fze.reduce((r,s)=>(r[s]="function",r),e);return o1(t,n)}function gze(t,e,n){if(n<hs)throw new Error("Expected power > 0");if(n===hs)return t.ONE;if(n===Rr)return e;let r=t.ONE,s=e;for(;n>hs;)n&Rr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Rr;return r}function mze(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Uee(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function yze(t,e,n=!1,r={}){if(t<=hs)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=Uee(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=hze(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:DU(s),ZERO:hs,ONE:Rr,create:c=>Gi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return hs<=c&&c<t},is0:c=>c===hs,isOdd:c=>(c&Rr)===Rr,neg:c=>Gi(-c,t),eql:(c,l)=>c===l,sqr:c=>Gi(c*c,t),add:(c,l)=>Gi(c+l,t),sub:(c,l)=>Gi(c-l,t),mul:(c,l)=>Gi(c*l,t),pow:(c,l)=>gze(a,c,l),div:(c,l)=>Gi(c*U3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>U3(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>mze(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?kU(c,i):k0(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?OU(c):ag(c)}});return Object.freeze(a)}function $ee(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Bee(t){const e=$ee(t);return e+Math.ceil(e/2)}function wze(t,e,n=!1){const r=t.length,s=$ee(e),i=Bee(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?ag(t):OU(t),a=Gi(o,e-Rr)+Rr;return n?kU(a,s):k0(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bze=BigInt(0),PO=BigInt(1);function vze(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>bze;)i&PO&&(o=o.add(a)),a=a.double(),i>>=PO;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let y=Number(o&d);o>>=f,y>c&&(y-=h,o+=PO);const m=g,b=g+Math.abs(y)-1,v=p%2!==0,A=y<0;y===0?u=u.add(n(v,i[m])):l=l.add(n(A,i[b]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function Fee(t){return pze(t.Fp),o1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Uee(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Eze(t){const e=Fee(t);o1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:_ze,hexToBytes:Cze}=cze,vp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=vp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:_ze(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=vp,n=typeof t=="string"?Cze(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=vp._parseInt(n.subarray(2)),{d:o,l:a}=vp._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Tu=BigInt(0),ma=BigInt(1);BigInt(2);const l7=BigInt(3);BigInt(4);function Aze(t){const e=Eze(t),{Fp:n}=e,r=e.toBytes||((p,g,y)=>{const m=g.toAffine();return $_(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),y=n.fromBytes(g.subarray(0,n.BYTES)),m=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:y,y:m}});function i(p){const{a:g,b:y}=e,m=n.sqr(p),b=n.mul(m,p);return n.add(n.add(b,n.mul(p,g)),y)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Tu<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:y,wrapPrivateKey:m,n:b}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=P0(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(y*2,"0")}let v;try{v=typeof p=="bigint"?p:ag(Za("private key",p,y))}catch{throw new Error(`private key must be ${y} bytes, hex or bigint, not ${typeof p}`)}return m&&(v=Gi(v,b)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,y,m){if(this.px=g,this.py=y,this.pz=m,g==null||!n.isValid(g))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(g){const{x:y,y:m}=g||{};if(!g||!n.isValid(y)||!n.isValid(m))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(y)&&b(m)?d.ZERO:new d(y,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const y=n.invertBatch(g.map(m=>m.pz));return g.map((m,b)=>m.toAffine(y[b])).map(d.fromAffine)}static fromHex(g){const y=d.fromAffine(s(Za("pointHex",g)));return y.assertValidity(),y}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y}=this.toAffine();if(!n.isValid(g)||!n.isValid(y))throw new Error("bad point: x or y not FE");const m=n.sqr(y),b=i(g);if(!n.eql(m,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:y,py:m,pz:b}=this,{px:v,py:A,pz:C}=g,S=n.eql(n.mul(y,C),n.mul(v,b)),x=n.eql(n.mul(m,C),n.mul(A,b));return S&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:y}=e,m=n.mul(y,l7),{px:b,py:v,pz:A}=this;let C=n.ZERO,S=n.ZERO,x=n.ZERO,T=n.mul(b,b),I=n.mul(v,v),k=n.mul(A,A),O=n.mul(b,v);return O=n.add(O,O),x=n.mul(b,A),x=n.add(x,x),C=n.mul(g,x),S=n.mul(m,k),S=n.add(C,S),C=n.sub(I,S),S=n.add(I,S),S=n.mul(C,S),C=n.mul(O,C),x=n.mul(m,x),k=n.mul(g,k),O=n.sub(T,k),O=n.mul(g,O),O=n.add(O,x),x=n.add(T,T),T=n.add(x,T),T=n.add(T,k),T=n.mul(T,O),S=n.add(S,T),k=n.mul(v,A),k=n.add(k,k),T=n.mul(k,O),C=n.sub(C,T),x=n.mul(k,I),x=n.add(x,x),x=n.add(x,x),new d(C,S,x)}add(g){u(g);const{px:y,py:m,pz:b}=this,{px:v,py:A,pz:C}=g;let S=n.ZERO,x=n.ZERO,T=n.ZERO;const I=e.a,k=n.mul(e.b,l7);let O=n.mul(y,v),B=n.mul(m,A),G=n.mul(b,C),W=n.add(y,m),R=n.add(v,A);W=n.mul(W,R),R=n.add(O,B),W=n.sub(W,R),R=n.add(y,b);let N=n.add(v,C);return R=n.mul(R,N),N=n.add(O,G),R=n.sub(R,N),N=n.add(m,b),S=n.add(A,C),N=n.mul(N,S),S=n.add(B,G),N=n.sub(N,S),T=n.mul(I,R),S=n.mul(k,G),T=n.add(S,T),S=n.sub(B,T),T=n.add(B,T),x=n.mul(S,T),B=n.add(O,O),B=n.add(B,O),G=n.mul(I,G),R=n.mul(k,R),B=n.add(B,G),G=n.sub(O,G),G=n.mul(I,G),R=n.add(R,G),O=n.mul(B,R),x=n.add(x,O),O=n.mul(N,R),S=n.mul(W,S),S=n.sub(S,O),O=n.mul(W,B),T=n.mul(N,T),T=n.add(T,O),new d(S,x,T)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,y=>{const m=n.invertBatch(y.map(b=>b.pz));return y.map((b,v)=>b.toAffine(m[v])).map(d.fromAffine)})}multiplyUnsafe(g){const y=d.ZERO;if(g===Tu)return y;if(a(g),g===ma)return this;const{endo:m}=e;if(!m)return f.unsafeLadder(this,g);let{k1neg:b,k1:v,k2neg:A,k2:C}=m.splitScalar(g),S=y,x=y,T=this;for(;v>Tu||C>Tu;)v&ma&&(S=S.add(T)),C&ma&&(x=x.add(T)),T=T.double(),v>>=ma,C>>=ma;return b&&(S=S.negate()),A&&(x=x.negate()),x=new d(n.mul(x.px,m.beta),x.py,x.pz),S.add(x)}multiply(g){a(g);let y=g,m,b;const{endo:v}=e;if(v){const{k1neg:A,k1:C,k2neg:S,k2:x}=v.splitScalar(y);let{p:T,f:I}=this.wNAF(C),{p:k,f:O}=this.wNAF(x);T=f.constTimeNegate(A,T),k=f.constTimeNegate(S,k),k=new d(n.mul(k.px,v.beta),k.py,k.pz),m=T.add(k),b=I.add(O)}else{const{p:A,f:C}=this.wNAF(y);m=A,b=C}return d.normalizeZ([m,b])[0]}multiplyAndAddUnsafe(g,y,m){const b=d.BASE,v=(C,S)=>S===Tu||S===ma||!C.equals(b)?C.multiplyUnsafe(S):C.multiply(S),A=v(this,y).add(v(g,m));return A.is0()?void 0:A}toAffine(g){const{px:y,py:m,pz:b}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(b));const A=n.mul(y,g),C=n.mul(m,g),S=n.mul(b,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(S,n.ONE))throw new Error("invZ was invalid");return{x:A,y:C}}isTorsionFree(){const{h:g,isTorsionFree:y}=e;if(g===ma)return!0;if(y)return y(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:y}=e;return g===ma?this:y?y(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return P0(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=vze(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Sze(t){const e=Fee(t);return o1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Ize(t){const e=Sze(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(R){return Tu<R&&R<n.ORDER}function a(R){return Gi(R,r)}function c(R){return U3(R,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=Aze({...e,toBytes(R,N,M){const P=N.toAffine(),D=n.toBytes(P.x),F=$_;return M?F(Uint8Array.from([N.hasEvenY()?2:3]),D):F(Uint8Array.from([4]),D,n.toBytes(P.y))},fromBytes(R){const N=R.length,M=R[0],P=R.subarray(1);if(N===s&&(M===2||M===3)){const D=ag(P);if(!o(D))throw new Error("Point is not on curve");const F=d(D);let H=n.sqrt(F);const te=(H&ma)===ma;return(M&1)===1!==te&&(H=n.neg(H)),{x:D,y:H}}else if(N===i&&M===4){const D=n.fromBytes(P.subarray(0,n.BYTES)),F=n.fromBytes(P.subarray(n.BYTES,2*n.BYTES));return{x:D,y:F}}else throw new Error(`Point of length ${N} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=R=>P0(k0(R,e.nByteLength));function p(R){const N=r>>ma;return R>N}function g(R){return p(R)?a(-R):R}const y=(R,N,M)=>ag(R.slice(N,M));class m{constructor(N,M,P){this.r=N,this.s=M,this.recovery=P,this.assertValidity()}static fromCompact(N){const M=e.nByteLength;return N=Za("compactSignature",N,M*2),new m(y(N,0,M),y(N,M,2*M))}static fromDER(N){const{r:M,s:P}=vp.toSig(Za("DER",N));return new m(M,P)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(N){return new m(this.r,this.s,N)}recoverPublicKey(N){const{r:M,s:P,recovery:D}=this,F=x(Za("msgHash",N));if(D==null||![0,1,2,3].includes(D))throw new Error("recovery id invalid");const H=D===2||D===3?M+e.n:M;if(H>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const te=D&1?"03":"02",re=l.fromHex(te+f(H)),ie=c(H),le=a(-F*ie),Ce=a(P*ie),X=l.BASE.multiplyAndAddUnsafe(re,le,Ce);if(!X)throw new Error("point at infinify");return X.assertValidity(),X}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return O0(this.toDERHex())}toDERHex(){return vp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return O0(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const b={isValidPrivateKey(R){try{return u(R),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const R=Bee(e.n);return wze(e.randomBytes(R),e.n)},precompute(R=8,N=l.BASE){return N._setWindowSize(R),N.multiply(BigInt(3)),N}};function v(R,N=!0){return l.fromPrivateKey(R).toRawBytes(N)}function A(R){const N=R instanceof Uint8Array,M=typeof R=="string",P=(N||M)&&R.length;return N?P===s||P===i:M?P===2*s||P===2*i:R instanceof l}function C(R,N,M=!0){if(A(R))throw new Error("first arg must be private key");if(!A(N))throw new Error("second arg must be public key");return l.fromHex(N).multiply(u(R)).toRawBytes(M)}const S=e.bits2int||function(R){const N=ag(R),M=R.length*8-e.nBitLength;return M>0?N>>BigInt(M):N},x=e.bits2int_modN||function(R){return a(S(R))},T=DU(e.nBitLength);function I(R){if(typeof R!="bigint")throw new Error("bigint expected");if(!(Tu<=R&&R<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return k0(R,e.nByteLength)}function k(R,N,M=O){if(["recovered","canonical"].some(fe=>fe in M))throw new Error("sign() legacy options not supported");const{hash:P,randomBytes:D}=e;let{lowS:F,prehash:H,extraEntropy:te}=M;F==null&&(F=!0),R=Za("msgHash",R),H&&(R=Za("prehashed msgHash",P(R)));const re=x(R),ie=u(N),le=[I(ie),I(re)];if(te!=null){const fe=te===!0?D(n.BYTES):te;le.push(Za("extraEntropy",fe))}const Ce=$_(...le),X=re;function ce(fe){const de=S(fe);if(!h(de))return;const ve=c(de),ye=l.BASE.multiply(de).toAffine(),Ae=a(ye.x);if(Ae===Tu)return;const we=a(ve*a(X+Ae*ie));if(we===Tu)return;let me=(ye.x===Ae?0:2)|Number(ye.y&ma),Xe=we;return F&&p(we)&&(Xe=g(we),me^=1),new m(Ae,Xe,me)}return{seed:Ce,k2sig:ce}}const O={lowS:e.lowS,prehash:!1},B={lowS:e.lowS,prehash:!1};function G(R,N,M=O){const{seed:P,k2sig:D}=k(R,N,M),F=e;return Lee(F.hash.outputLen,F.nByteLength,F.hmac)(P,D)}l.BASE._setWindowSize(8);function W(R,N,M,P=B){var ye;const D=R;if(N=Za("msgHash",N),M=Za("publicKey",M),"strict"in P)throw new Error("options.strict was renamed to lowS");const{lowS:F,prehash:H}=P;let te,re;try{if(typeof D=="string"||D instanceof Uint8Array)try{te=m.fromDER(D)}catch(Ae){if(!(Ae instanceof vp.Err))throw Ae;te=m.fromCompact(D)}else if(typeof D=="object"&&typeof D.r=="bigint"&&typeof D.s=="bigint"){const{r:Ae,s:we}=D;te=new m(Ae,we)}else throw new Error("PARSE");re=l.fromHex(M)}catch(Ae){if(Ae.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(F&&te.hasHighS())return!1;H&&(N=e.hash(N));const{r:ie,s:le}=te,Ce=x(N),X=c(le),ce=a(Ce*X),fe=a(ie*X),de=(ye=l.BASE.multiplyAndAddUnsafe(re,ce,fe))==null?void 0:ye.toAffine();return de?a(de.x)===ie:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:C,sign:G,verify:W,ProjectivePoint:l,Signature:m,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xze(t){return{hash:t,hmac:(e,...n)=>mee(t,e,p7e(...n)),randomBytes:g7e}}function Nze(t,e){const n=r=>Ize({...t,...xze(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jee=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),u7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Tze=BigInt(1),$3=BigInt(2),d7=(t,e)=>(t+e/$3)/e;function Rze(t){const e=jee,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=na(u,n,e)*u%e,h=na(d,n,e)*u%e,f=na(h,$3,e)*l%e,p=na(f,s,e)*f%e,g=na(p,i,e)*p%e,y=na(g,a,e)*g%e,m=na(y,c,e)*y%e,b=na(m,a,e)*g%e,v=na(b,n,e)*u%e,A=na(v,o,e)*p%e,C=na(A,r,e)*l%e,S=na(C,$3,e);if(!B3.eql(B3.sqr(S),t))throw new Error("Cannot find square root");return S}const B3=yze(jee,void 0,void 0,{sqrt:Rze}),$d=Nze({a:BigInt(0),b:BigInt(7),Fp:B3,n:u7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=u7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Tze*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=d7(i*t,e),c=d7(-r*t,e);let l=Gi(t-a*n-c*s,e),u=Gi(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},wee);BigInt(0);$d.ProjectivePoint;const B_="0x0000000000000000000000000000000000000000",h7="0x0000000000000000000000000000000000000000000000000000000000000000",f7=BigInt(0),p7=BigInt(1),g7=BigInt(2),m7=BigInt(27),y7=BigInt(28),DA=BigInt(35),Km={};function w7(t){return nd(Vr(t),32)}var pw,nl,gw,jp;const Ya=class Ya{constructor(e,n,r,s){K(this,pw);K(this,nl);K(this,gw);K(this,jp);mT(e,Km,"Signature"),U(this,pw,n),U(this,nl,r),U(this,gw,s),U(this,jp,null)}get r(){return _(this,pw)}set r(e){Q(Gy(e)===32,"invalid r","value",e),U(this,pw,Le(e))}get s(){return Q(parseInt(_(this,nl).substring(0,3))<8,"non-canonical s; use ._s","s",_(this,nl)),_(this,nl)}set s(e){Q(Gy(e)===32,"invalid s","value",e),U(this,nl,Le(e))}get _s(){return _(this,nl)}isValid(){return parseInt(_(this,nl).substring(0,3))<8}get v(){return _(this,gw)}set v(e){const n=Ft(e,"value");Q(n===27||n===28,"invalid v","v",e),U(this,gw,n)}get networkV(){return _(this,jp)}get legacyChainId(){const e=this.networkV;return e==null?null:Ya.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Bt(this.s);return this.yParity&&(e[0]|=128),Le(e)}get compactSerialized(){return Cr([this.r,this.yParityAndS])}get serialized(){return Cr([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Ya(Km,this.r,this._s,this.v);return this.networkV&&U(e,jp,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Ze(e,"v");return n==m7||n==y7?f7:(Q(n>=DA,"invalid EIP-155 v","v",e),(n-DA)/g7)}static getChainIdV(e,n){return Ze(e)*g7+BigInt(35+n-27)}static getNormalizedV(e){const n=Ze(e);return n===f7||n===m7?27:n===p7||n===y7?28:(Q(n>=DA,"invalid v","v",e),n&p7?27:28)}static from(e){function n(l,u){Q(l,u,"signature",e)}if(e==null)return new Ya(Km,h7,h7,27);if(typeof e=="string"){const l=Bt(e,"signature");if(l.length===64){const u=Le(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new Ya(Km,u,Le(d),h)}if(l.length===65){const u=Le(l.slice(0,32)),d=Le(l.slice(32,64)),h=Ya.getNormalizedV(l[64]);return new Ya(Km,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof Ya)return e.clone();const r=e.r;n(r!=null,"missing r");const s=w7(r),i=function(l,u){if(l!=null)return w7(l);if(u!=null){n(Kn(u,32),"invalid yParityAndS");const d=Bt(u);return d[0]&=127,Le(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Ze(l);return{networkV:h>=DA?h:void 0,v:Ya.getNormalizedV(h)}}if(u!=null)return n(Kn(u,32),"invalid yParityAndS"),{v:Bt(u)[0]&128?28:27};if(d!=null){switch(Ft(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Ya(Km,s,i,a);return o&&U(c,jp,o),n(e.yParity==null||Ft(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};pw=new WeakMap,nl=new WeakMap,gw=new WeakMap,jp=new WeakMap;let so=Ya;var bu;const rp=class rp{constructor(e){K(this,bu);Q(Gy(e)===32,"invalid private key","privateKey","[REDACTED]"),U(this,bu,Le(e))}get privateKey(){return _(this,bu)}get publicKey(){return rp.computePublicKey(_(this,bu))}get compressedPublicKey(){return rp.computePublicKey(_(this,bu),!0)}sign(e){Q(Gy(e)===32,"invalid digest length","digest",e);const n=$d.sign(hi(e),hi(_(this,bu)),{lowS:!0});return so.from({r:mf(n.r,32),s:mf(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=rp.computePublicKey(e);return Le($d.getSharedSecret(hi(_(this,bu)),Bt(n),!1))}static computePublicKey(e,n){let r=Bt(e,"key");if(r.length===32){const i=$d.getPublicKey(r,!!n);return Le(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=$d.ProjectivePoint.fromHex(r);return Le(s.toRawBytes(n))}static recoverPublicKey(e,n){Q(Gy(e)===32,"invalid digest length","digest",e);const r=so.from(n);let s=$d.Signature.fromCompact(hi(Cr([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(hi(e));return Q(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=$d.ProjectivePoint.fromHex(rp.computePublicKey(e).substring(2)),i=$d.ProjectivePoint.fromHex(rp.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};bu=new WeakMap;let F_=rp;const Pze=BigInt(0),Oze=BigInt(36);function b7(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Bt(Mr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const MU={};for(let t=0;t<10;t++)MU[String(t)]=String(t);for(let t=0;t<26;t++)MU[String.fromCharCode(65+t)]=String(10+t);const v7=15;function kze(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>MU[r]).join("");for(;e.length>=v7;){let r=e.substring(0,v7);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const Dze=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function Mze(t){t=t.toLowerCase();let e=Pze;for(let n=0;n<t.length;n++)e=e*Oze+Dze[t[n]];return e}function bn(t){if(Q(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=b7(t);return Q(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Q(t.substring(2,4)===kze(t),"bad icap checksum","address",t);let e=Mze(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return b7("0x"+e)}Q(!1,"invalid address","address",t)}function Lze(t){const e=bn(t.from);let r=Ze(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,bn(br(Mr(wf([e,r])),12))}function zee(t){return t&&typeof t.getAddress=="function"}async function OO(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(be(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Q(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),bn(n)}function mi(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?bn(t):(be(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),OO(t,e.resolveName(t)));if(zee(t))return OO(t,t.getAddress());if(t&&typeof t.then=="function")return OO(t,t);Q(!1,"unsupported addressable value","target",t)}const cu={};function qe(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new Ys(cu,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function ln(t,e){return new Ys(cu,`bytes${e||""}`,t,{size:e})}const E7=Symbol.for("_ethers_typed");var zp;const lu=class lu{constructor(e,n,r,s){ee(this,"type");ee(this,"value");K(this,zp);ee(this,"_typedSymbol");s==null&&(s=null),mT(cu,e,"Typed"),gt(this,{_typedSymbol:E7,type:n,value:r}),U(this,zp,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return _(this,zp)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return _(this,zp)===!0?-1:_(this,zp)===!1?this.value.length:null}static from(e,n){return new lu(cu,e,n)}static uint8(e){return qe(e,8)}static uint16(e){return qe(e,16)}static uint24(e){return qe(e,24)}static uint32(e){return qe(e,32)}static uint40(e){return qe(e,40)}static uint48(e){return qe(e,48)}static uint56(e){return qe(e,56)}static uint64(e){return qe(e,64)}static uint72(e){return qe(e,72)}static uint80(e){return qe(e,80)}static uint88(e){return qe(e,88)}static uint96(e){return qe(e,96)}static uint104(e){return qe(e,104)}static uint112(e){return qe(e,112)}static uint120(e){return qe(e,120)}static uint128(e){return qe(e,128)}static uint136(e){return qe(e,136)}static uint144(e){return qe(e,144)}static uint152(e){return qe(e,152)}static uint160(e){return qe(e,160)}static uint168(e){return qe(e,168)}static uint176(e){return qe(e,176)}static uint184(e){return qe(e,184)}static uint192(e){return qe(e,192)}static uint200(e){return qe(e,200)}static uint208(e){return qe(e,208)}static uint216(e){return qe(e,216)}static uint224(e){return qe(e,224)}static uint232(e){return qe(e,232)}static uint240(e){return qe(e,240)}static uint248(e){return qe(e,248)}static uint256(e){return qe(e,256)}static uint(e){return qe(e,256)}static int8(e){return qe(e,-8)}static int16(e){return qe(e,-16)}static int24(e){return qe(e,-24)}static int32(e){return qe(e,-32)}static int40(e){return qe(e,-40)}static int48(e){return qe(e,-48)}static int56(e){return qe(e,-56)}static int64(e){return qe(e,-64)}static int72(e){return qe(e,-72)}static int80(e){return qe(e,-80)}static int88(e){return qe(e,-88)}static int96(e){return qe(e,-96)}static int104(e){return qe(e,-104)}static int112(e){return qe(e,-112)}static int120(e){return qe(e,-120)}static int128(e){return qe(e,-128)}static int136(e){return qe(e,-136)}static int144(e){return qe(e,-144)}static int152(e){return qe(e,-152)}static int160(e){return qe(e,-160)}static int168(e){return qe(e,-168)}static int176(e){return qe(e,-176)}static int184(e){return qe(e,-184)}static int192(e){return qe(e,-192)}static int200(e){return qe(e,-200)}static int208(e){return qe(e,-208)}static int216(e){return qe(e,-216)}static int224(e){return qe(e,-224)}static int232(e){return qe(e,-232)}static int240(e){return qe(e,-240)}static int248(e){return qe(e,-248)}static int256(e){return qe(e,-256)}static int(e){return qe(e,-256)}static bytes1(e){return ln(e,1)}static bytes2(e){return ln(e,2)}static bytes3(e){return ln(e,3)}static bytes4(e){return ln(e,4)}static bytes5(e){return ln(e,5)}static bytes6(e){return ln(e,6)}static bytes7(e){return ln(e,7)}static bytes8(e){return ln(e,8)}static bytes9(e){return ln(e,9)}static bytes10(e){return ln(e,10)}static bytes11(e){return ln(e,11)}static bytes12(e){return ln(e,12)}static bytes13(e){return ln(e,13)}static bytes14(e){return ln(e,14)}static bytes15(e){return ln(e,15)}static bytes16(e){return ln(e,16)}static bytes17(e){return ln(e,17)}static bytes18(e){return ln(e,18)}static bytes19(e){return ln(e,19)}static bytes20(e){return ln(e,20)}static bytes21(e){return ln(e,21)}static bytes22(e){return ln(e,22)}static bytes23(e){return ln(e,23)}static bytes24(e){return ln(e,24)}static bytes25(e){return ln(e,25)}static bytes26(e){return ln(e,26)}static bytes27(e){return ln(e,27)}static bytes28(e){return ln(e,28)}static bytes29(e){return ln(e,29)}static bytes30(e){return ln(e,30)}static bytes31(e){return ln(e,31)}static bytes32(e){return ln(e,32)}static address(e){return new lu(cu,"address",e)}static bool(e){return new lu(cu,"bool",!!e)}static bytes(e){return new lu(cu,"bytes",e)}static string(e){return new lu(cu,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new lu(cu,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===E7}static dereference(e,n){if(lu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};zp=new WeakMap;let Ys=lu;class Uze extends ld{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=Ys.dereference(n,"string");try{r=bn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return bn(mf(e.readValue(),20))}}class $ze extends ld{constructor(n){super(n.name,n.type,"_",n.dynamic);ee(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function Wee(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return be(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),be(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else Q(!1,"invalid tuple value","tuple",n);Q(e.length===r.length,"types/value length mismatch","tuple",n);let s=new O3,i=new O3,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Hee(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(Is(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Is(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),T0.fromItems(n,r)}class Bze extends ld{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);ee(this,"coder");ee(this,"length");gt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=Ys.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),XX(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return Wee(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),be(r*gi<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*gi,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new $ze(this.coder));return Hee(n,s)}}class Fze extends ld{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=Ys.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Gee extends ld{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=hi(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class jze extends Gee{constructor(e){super("bytes",e)}decode(e){return Le(super.decode(e))}}class zze extends ld{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);ee(this,"size");gt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=hi(Ys.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Le(n.readBytes(this.size))}}const Wze=new Uint8Array([]);class Hze extends ld{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(Wze)}decode(e){return e.readBytes(0),null}}const Gze=BigInt(0),qze=BigInt(1),Vze=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Kze extends ld{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);ee(this,"size");ee(this,"signed");gt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Ze(Ys.dereference(r,this.type)),i=_v(Vze,gi*8);if(this.signed){let o=_v(i,this.size*8-1);(s>o||s<-(o+qze))&&this._throwError("value out-of-bounds",r),s=nee(s,8*gi)}else(s<Gze||s>_v(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=_v(n.readValue(),this.size*8);return this.signed&&(r=G9e(r,this.size*8)),r}}class Yze extends Gee{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,Wu(Ys.dereference(n,"string")))}decode(e){return ax(super.decode(e))}}class MA extends ld{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);ee(this,"coders");gt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=Ys.dereference(r,"tuple");return Wee(n,this.coders,s)}decode(n){return Hee(n,this.coders)}}function kO(t,e){return{address:bn(t),storageKeys:e.map((n,r)=>(Q(Kn(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function dm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(Q(n.length===2,"invalid slot set",`value[${r}]`,n),kO(n[0],n[1])):(Q(n!=null&&typeof n=="object","invalid address-slot set","value",t),kO(n.address,n.storageKeys)));Q(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return kO(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function qee(t){return{address:bn(t.address),nonce:Ze(t.nonce!=null?t.nonce:0),chainId:Ze(t.chainId!=null?t.chainId:0),signature:so.from(t.signature)}}function Qze(t){let e;return typeof t=="string"?e=F_.computePublicKey(t,!1):e=t.publicKey,bn(Mr("0x"+e.substring(4)).substring(26))}function Jze(t,e){return Qze(F_.recoverPublicKey(t,e))}const is=BigInt(0),Zze=BigInt(2),Xze=BigInt(27),eWe=BigInt(28),tWe=BigInt(35),nWe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),DO=4096*32;function rWe(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Bt(t.blobToKzgCommitment(Le(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Bt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Bt(t.blobToKZGCommitment(Le(r)));Q(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Bt(t.computeBlobProof(Le(r),Le(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Bt(t.computeBlobKZGProof(Le(r),Le(s)));Q(!1,"unsupported KZG library","kzg",t)}}}function _7(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=hb(e).substring(4),"0x"+n}function fb(t){return t==="0x"?null:bn(t)}function _T(t,e){try{return dm(t)}catch(n){Q(!1,n.message,e,t)}}function sWe(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:fb(s[1]),nonce:kn(s[2],"nonce"),chainId:kn(s[0],"chainId"),signature:so.from({yParity:hm(s[3],"yParity"),r:nd(s[4],32),s:nd(s[5],32)})})}return n}catch(n){Q(!1,n.message,e,t)}}function hm(t,e){return t==="0x"?0:Ft(t,e)}function kn(t,e){if(t==="0x")return is;const n=Ze(t,e);return Q(n<=nWe,"value exceeds uint size",e,n),n}function Qt(t,e){const n=Ze(t,"value"),r=Vr(n);return Q(r.length<=32,"value too large",`tx.${e}`,n),r}function CT(t){return dm(t).map(e=>[e.address,e.storageKeys])}function iWe(t){return t.map(e=>[Qt(e.chainId,"chainId"),e.address,Qt(e.nonce,"nonce"),Qt(e.signature.yParity,"yParity"),Vr(e.signature.r),Vr(e.signature.s)])}function oWe(t,e){Q(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Q(Kn(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function aWe(t){const e=i1(t);Q(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:hm(e[0],"nonce"),gasPrice:kn(e[1],"gasPrice"),gasLimit:kn(e[2],"gasLimit"),to:fb(e[3]),value:kn(e[4],"value"),data:Le(e[5]),chainId:is};if(e.length===6)return n;const r=kn(e[6],"v"),s=kn(e[7],"r"),i=kn(e[8],"s");if(s===is&&i===is)n.chainId=r;else{let o=(r-tWe)/Zze;o<is&&(o=is),n.chainId=o,Q(o!==is||r===Xze||r===eWe,"non-canonical legacy v","v",e[6]),n.signature=so.from({r:nd(e[7],32),s:nd(e[8],32),v:r})}return n}function cWe(t,e){const n=[Qt(t.nonce,"nonce"),Qt(t.gasPrice||0,"gasPrice"),Qt(t.gasLimit,"gasLimit"),t.to||"0x",Qt(t.value,"value"),t.data];let r=is;if(t.chainId!=is)r=Ze(t.chainId,"tx.chainId"),Q(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==is&&(n.push(Vr(r)),n.push("0x"),n.push("0x")),wf(n);let s=BigInt(27+e.yParity);return r!==is?s=so.getChainIdV(r,e.v):BigInt(e.v)!==s&&Q(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Vr(s)),n.push(Vr(e.r)),n.push(Vr(e.s)),wf(n)}function AT(t,e){let n;try{if(n=hm(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Q(!1,"invalid yParity","yParity",e[0])}const r=nd(e[1],32),s=nd(e[2],32),i=so.from({r,s,yParity:n});t.signature=i}function lWe(t){const e=i1(Bt(t).slice(1));Q(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Le(t));const n={type:2,chainId:kn(e[0],"chainId"),nonce:hm(e[1],"nonce"),maxPriorityFeePerGas:kn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:kn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:kn(e[4],"gasLimit"),to:fb(e[5]),value:kn(e[6],"value"),data:Le(e[7]),accessList:_T(e[8],"accessList")};return e.length===9||AT(n,e.slice(9)),n}function uWe(t,e){const n=[Qt(t.chainId,"chainId"),Qt(t.nonce,"nonce"),Qt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qt(t.maxFeePerGas||0,"maxFeePerGas"),Qt(t.gasLimit,"gasLimit"),t.to||"0x",Qt(t.value,"value"),t.data,CT(t.accessList||[])];return e&&(n.push(Qt(e.yParity,"yParity")),n.push(Vr(e.r)),n.push(Vr(e.s))),Cr(["0x02",wf(n)])}function dWe(t){const e=i1(Bt(t).slice(1));Q(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Le(t));const n={type:1,chainId:kn(e[0],"chainId"),nonce:hm(e[1],"nonce"),gasPrice:kn(e[2],"gasPrice"),gasLimit:kn(e[3],"gasLimit"),to:fb(e[4]),value:kn(e[5],"value"),data:Le(e[6]),accessList:_T(e[7],"accessList")};return e.length===8||AT(n,e.slice(8)),n}function hWe(t,e){const n=[Qt(t.chainId,"chainId"),Qt(t.nonce,"nonce"),Qt(t.gasPrice||0,"gasPrice"),Qt(t.gasLimit,"gasLimit"),t.to||"0x",Qt(t.value,"value"),t.data,CT(t.accessList||[])];return e&&(n.push(Qt(e.yParity,"recoveryParam")),n.push(Vr(e.r)),n.push(Vr(e.s))),Cr(["0x01",wf(n)])}function fWe(t){let e=i1(Bt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];Q(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Q(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Q(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),Q(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Q(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}Q(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Le(t));const s={type:3,chainId:kn(e[0],"chainId"),nonce:hm(e[1],"nonce"),maxPriorityFeePerGas:kn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:kn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:kn(e[4],"gasLimit"),to:fb(e[5]),value:kn(e[6],"value"),data:Le(e[7]),accessList:_T(e[8],"accessList"),maxFeePerBlobGas:kn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Q(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),Q(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)Q(Kn(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||AT(s,e.slice(11)),s}function pWe(t,e,n){const r=[Qt(t.chainId,"chainId"),Qt(t.nonce,"nonce"),Qt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qt(t.maxFeePerGas||0,"maxFeePerGas"),Qt(t.gasLimit,"gasLimit"),t.to||B_,Qt(t.value,"value"),t.data,CT(t.accessList||[]),Qt(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),oWe(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(Qt(e.yParity,"yParity")),r.push(Vr(e.r)),r.push(Vr(e.s)),n)?Cr(["0x03",wf([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Cr(["0x03",wf(r)])}function gWe(t){const e=i1(Bt(t).slice(1));Q(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Le(t));const n={type:4,chainId:kn(e[0],"chainId"),nonce:hm(e[1],"nonce"),maxPriorityFeePerGas:kn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:kn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:kn(e[4],"gasLimit"),to:fb(e[5]),value:kn(e[6],"value"),data:Le(e[7]),accessList:_T(e[8],"accessList"),authorizationList:sWe(e[9],"authorizationList")};return e.length===10||AT(n,e.slice(10)),n}function mWe(t,e){const n=[Qt(t.chainId,"chainId"),Qt(t.nonce,"nonce"),Qt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Qt(t.maxFeePerGas||0,"maxFeePerGas"),Qt(t.gasLimit,"gasLimit"),t.to||"0x",Qt(t.value,"value"),t.data,CT(t.accessList||[]),iWe(t.authorizationList||[])];return e&&(n.push(Qt(e.yParity,"yParity")),n.push(Vr(e.r)),n.push(Vr(e.s))),Cr(["0x04",wf(n)])}var rc,mw,yw,ww,bw,vw,Ew,_w,Cw,Aw,Sw,Iw,Wp,uh,rl,dh,xw,Nw,SS;const Jc=class Jc{constructor(){K(this,Nw);K(this,rc);K(this,mw);K(this,yw);K(this,ww);K(this,bw);K(this,vw);K(this,Ew);K(this,_w);K(this,Cw);K(this,Aw);K(this,Sw);K(this,Iw);K(this,Wp);K(this,uh);K(this,rl);K(this,dh);K(this,xw);U(this,rc,null),U(this,mw,null),U(this,ww,0),U(this,bw,is),U(this,vw,null),U(this,Ew,null),U(this,_w,null),U(this,yw,"0x"),U(this,Cw,is),U(this,Aw,is),U(this,Sw,null),U(this,Iw,null),U(this,Wp,null),U(this,uh,null),U(this,rl,null),U(this,dh,null),U(this,xw,null)}get type(){return _(this,rc)}set type(e){switch(e){case null:U(this,rc,null);break;case 0:case"legacy":U(this,rc,0);break;case 1:case"berlin":case"eip-2930":U(this,rc,1);break;case 2:case"london":case"eip-1559":U(this,rc,2);break;case 3:case"cancun":case"eip-4844":U(this,rc,3);break;case 4:case"pectra":case"eip-7702":U(this,rc,4);break;default:Q(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=_(this,mw);return e==null&&this.type===3?B_:e}set to(e){U(this,mw,e==null?null:bn(e))}get nonce(){return _(this,ww)}set nonce(e){U(this,ww,Ft(e,"value"))}get gasLimit(){return _(this,bw)}set gasLimit(e){U(this,bw,Ze(e))}get gasPrice(){const e=_(this,vw);return e==null&&(this.type===0||this.type===1)?is:e}set gasPrice(e){U(this,vw,e==null?null:Ze(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=_(this,Ew);return e??(this.type===2||this.type===3?is:null)}set maxPriorityFeePerGas(e){U(this,Ew,e==null?null:Ze(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=_(this,_w);return e??(this.type===2||this.type===3?is:null)}set maxFeePerGas(e){U(this,_w,e==null?null:Ze(e,"maxFeePerGas"))}get data(){return _(this,yw)}set data(e){U(this,yw,Le(e))}get value(){return _(this,Cw)}set value(e){U(this,Cw,Ze(e,"value"))}get chainId(){return _(this,Aw)}set chainId(e){U(this,Aw,Ze(e))}get signature(){return _(this,Sw)||null}set signature(e){U(this,Sw,e==null?null:so.from(e))}get accessList(){const e=_(this,Iw)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){U(this,Iw,e==null?null:dm(e))}get authorizationList(){const e=_(this,xw)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){U(this,xw,e==null?null:e.map(n=>qee(n)))}get maxFeePerBlobGas(){const e=_(this,Wp);return e==null&&this.type===3?is:e}set maxFeePerBlobGas(e){U(this,Wp,e==null?null:Ze(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=_(this,uh);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Q(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Q(Kn(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}U(this,uh,e)}get blobs(){return _(this,dh)==null?null:_(this,dh).map(e=>Object.assign({},e))}set blobs(e){if(e==null){U(this,dh,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(SU(i)){be(_(this,rl),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Bt(i);if(Q(o.length<=DO,"blob is too large",`blobs[${s}]`,i),o.length!==DO){const l=new Uint8Array(DO);l.set(o),o=l}const a=_(this,rl).blobToKzgCommitment(o),c=Le(_(this,rl).computeBlobKzgProof(o,a));n.push({data:Le(o),commitment:Le(a),proof:c}),r.push(_7(1,a))}else{const o=Le(i.commitment);n.push({data:Le(i.data),commitment:o,proof:Le(i.proof)}),r.push(_7(1,o))}}U(this,dh,n),U(this,uh,r)}get kzg(){return _(this,rl)}set kzg(e){e==null?U(this,rl,null):U(this,rl,rWe(e))}get hash(){return this.signature==null?null:Mr(he(this,Nw,SS).call(this,!0,!1))}get unsignedHash(){return Mr(this.unsignedSerialized)}get from(){return this.signature==null?null:Jze(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:F_.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return he(this,Nw,SS).call(this,!0,!0)}get unsignedSerialized(){return he(this,Nw,SS).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=_(this,Wp)!=null||_(this,uh);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&be(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),be(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),be(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Jc.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Jc;if(typeof e=="string"){const r=Bt(e);if(r[0]>=127)return Jc.from(aWe(r));switch(r[0]){case 1:return Jc.from(dWe(r));case 2:return Jc.from(lWe(r));case 3:return Jc.from(fWe(r));case 4:return Jc.from(gWe(r))}be(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new Jc;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=so.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Q(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Q(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Q(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Q(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};rc=new WeakMap,mw=new WeakMap,yw=new WeakMap,ww=new WeakMap,bw=new WeakMap,vw=new WeakMap,Ew=new WeakMap,_w=new WeakMap,Cw=new WeakMap,Aw=new WeakMap,Sw=new WeakMap,Iw=new WeakMap,Wp=new WeakMap,uh=new WeakMap,rl=new WeakMap,dh=new WeakMap,xw=new WeakMap,Nw=new WeakSet,SS=function(e,n){be(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return cWe(this,r);case 1:return hWe(this,r);case 2:return uWe(this,r);case 3:return pWe(this,r,n?this.blobs:null);case 4:return mWe(this,r)}be(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let lx=Jc;function Fg(t){return Mr(Wu(t))}var yWe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const C7=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),A7=4;function wWe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let C=1;C<r;C++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let y=0;for(let C=0;C<d;C++)y=y<<1|u();let m=[],b=0,v=h;for(;;){let C=Math.floor(((y-b+1)*s-1)/v),S=0,x=r;for(;x-S>1;){let k=S+x>>>1;C<i[k]?x=k:S=k}if(S==0)break;m.push(S);let T=b+Math.floor(v*i[S]/s),I=b+Math.floor(v*i[S+1]/s)-1;for(;!((T^I)&f);)y=y<<1&g|u(),T=T<<1&g,I=I<<1&g|1;for(;T&~I&p;)y=y&f|y<<1&g>>>1|u(),T=T<<1^f,I=(I^f)<<1|f|1;b=T,v=1+I-T}let A=r-4;return m.map(C=>{switch(C-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return C-1}})}function bWe(t){let e=0;return()=>t[e++]}function Vee(t){return bWe(wWe(vWe(t)))}function vWe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function EWe(t){return t&1?~t>>1:t>>1}function _We(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=EWe(e());return n}function j_(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Kee(t){return z_(()=>{let e=j_(t);if(e.length)return e})}function Yee(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(CWe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(AWe(n,t))}return e.flat()}function z_(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Qee(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)_We(t,n).forEach((i,o)=>r[o].push(i));return r}function CWe(t,e){let n=1+e(),r=e(),s=z_(e);return Qee(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function AWe(t,e){let n=1+e();return Qee(n,1+t,e).map(s=>[s[0],s.slice(1)])}function SWe(t){let e=[],n=j_(t);return s(r([]),[]),e;function r(i){let o=t(),a=z_(()=>{let c=j_(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function IWe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Jee(t){return`{${IWe(t)}}`}function xWe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function D0(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function NWe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var TWe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const W_=44032,ux=4352,dx=4449,hx=4519,Zee=19,Xee=21,M0=28,fx=Xee*M0,RWe=Zee*fx,PWe=W_+RWe,OWe=ux+Zee,kWe=dx+Xee,DWe=hx+M0;function Av(t){return t>>24&255}function ete(t){return t&16777215}let F3,S7,j3,IS;function MWe(){let t=Vee(TWe);F3=new Map(Kee(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),S7=new Set(j_(t)),j3=new Map,IS=new Map;for(let[e,n]of Yee(t)){if(!S7.has(e)&&n.length==2){let[r,s]=n,i=IS.get(r);i||(i=new Map,IS.set(r,i)),i.set(s,e)}j3.set(e,n.reverse())}}function tte(t){return t>=W_&&t<PWe}function LWe(t,e){if(t>=ux&&t<OWe&&e>=dx&&e<kWe)return W_+(t-ux)*fx+(e-dx)*M0;if(tte(t)&&e>hx&&e<DWe&&(t-W_)%M0==0)return t+(e-hx);{let n=IS.get(t);return n&&(n=n.get(e),n)?n:-1}}function nte(t){F3||MWe();let e=[],n=[],r=!1;function s(i){let o=F3.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(tte(i)){let o=i-W_,a=o/fx|0,c=o%fx/M0|0,l=o%M0;s(ux+a),s(dx+c),l>0&&s(hx+l)}else{let o=j3.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=Av(e[0]);for(let o=1;o<e.length;o++){let a=Av(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=Av(e[--c]),i<=a))break}i=Av(e[o])}}return e}function UWe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=Av(i),a=ete(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=LWe(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function rte(t){return nte(t).map(ete)}function $We(t){return UWe(nte(t))}const I7=45,ste=".",ite=65039,ote=1,px=t=>Array.from(t);function H_(t,e){return t.P.has(e)||t.Q.has(e)}class BWe extends Array{get is_emoji(){return!0}}let z3,ate,Ep,W3,cte,qy,MO,ny,Kf,x7,H3;function LU(){if(z3)return;let t=Vee(yWe);const e=()=>j_(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));z3=new Map(Yee(t)),ate=n(),Ep=e(),W3=new Set(e().map(u=>Ep[u])),Ep=new Set(Ep),cte=n(),n();let s=Kee(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};qy=z_(u=>{let d=z_(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=D0(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),MO=n(),ny=new Map;let a=e().concat(px(MO)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),MO.has(u)||ny.set(u,f)});for(let{V:u,M:d}of new Set(ny.values())){let h=[];for(let p of u){let g=qy.filter(m=>H_(m,p)),y=h.find(({G:m})=>g.some(b=>m.has(b)));y||(y={G:new Set,V:[]},h.push(y)),y.V.push(p),r(y.G,g)}let f=h.flatMap(p=>px(p.G));for(let{G:p,V:g}of h){let y=new Set(f.filter(m=>!p.has(m)));for(let m of g)d.set(m,y)}}Kf=new Set;let c=new Set;const l=u=>Kf.has(u)?c.add(u):Kf.add(u);for(let u of qy){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of Kf)!ny.has(u)&&!c.has(u)&&ny.set(u,ote);r(Kf,rte(Kf)),x7=SWe(t).map(u=>BWe.from(u)).sort(NWe),H3=new Map;for(let u of x7){let d=[H3];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===ite?d.push(...f):d=f}for(let h of d)h.V=u}}function UU(t){return(lte(t)?"":`${$U(ST([t]))} `)+Jee(t)}function $U(t){return`"${t}"‎`}function FWe(t){if(t.length>=4&&t[2]==I7&&t[3]==I7)throw new Error(`invalid label extension: "${D0(t.slice(0,4))}"`)}function jWe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function zWe(t){let e=t[0],n=C7.get(e);if(n)throw oE(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=C7.get(e);if(o){if(s==i)throw oE(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw oE(`trailing ${n}`)}function ST(t,e=1/0,n=Jee){let r=[];WWe(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];lte(a)&&(r.push(D0(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(D0(t.slice(s,i))),r.join("")}function WWe(t){return LU(),Ep.has(t)}function lte(t){return LU(),cte.has(t)}function HWe(t){return KWe(GWe(t,$We,JWe))}function GWe(t,e,n){if(!t)return[];LU();let r=0;return t.split(ste).map(s=>{let i=xWe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=QWe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(jWe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))FWe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Ep.has(u[0]))throw oE("leading combining mark");for(let g=1;g<c;g++){let y=a[g];if(!y.is_emoji&&Ep.has(y[0]))throw oE(`emoji + combining mark: "${D0(a[g-1])} + ${ST([y[0]])}"`)}zWe(u);let f=px(new Set(h)),[p]=VWe(f);YWe(p,h),qWe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function qWe(t,e){let n,r=[];for(let s of e){let i=ny.get(s);if(i===ote)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):px(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>H_(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function VWe(t){let e=qy;for(let n of t){let r=e.filter(s=>H_(s,n));if(!r.length)throw qy.some(s=>H_(s,n))?dte(e[0],n):ute(n);if(e=r,r.length==1)break}return e}function KWe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${$U(ST(e,63))}: ${s}`)}return D0(r)}).join(ste)}function ute(t){return new Error(`disallowed character: ${UU(t)}`)}function dte(t,e){let n=UU(e),r=qy.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function oE(t){return new Error(`illegal placement: ${t}`)}function YWe(t,e){for(let n of e)if(!H_(t,n))throw dte(t,n);if(t.M){let n=rte(e);for(let r=1,s=n.length;r<s;r++)if(W3.has(n[r])){let i=r+1;for(let o;i<s&&W3.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${UU(o)}`);if(i-r>A7)throw new Error(`excessive non-spacing marks: ${$U(ST(n.slice(r-1,i)))} (${i-r}/${A7})`);r=i}}}function QWe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=ZWe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(Kf.has(o))s.push(o);else{let a=z3.get(o);if(a)s.push(...a);else if(!ate.has(o))throw ute(o)}}}return s.length&&r.push(e(s)),r}function JWe(t){return t.filter(e=>e!=ite)}function ZWe(t,e){let n=H3,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const hte=new Uint8Array(32);hte.fill(0);function N7(t){return Q(t.length!==0,"invalid ENS name; empty component","comp",t),t}function fte(t){const e=Wu(XWe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(N7(e.slice(r,s))),r=s+1);return Q(r<e.length,"invalid ENS name; empty component","name",t),n.push(N7(e.slice(r))),n}function XWe(t){try{if(t.length===0)throw new Error("empty label");return HWe(t)}catch(e){Q(!1,`invalid ENS name (${e.message})`,"name",t)}}function G3(t){Q(typeof t=="string","invalid ENS name; not a string","name",t),Q(t.length,"invalid ENS name (empty label)","name",t);let e=hte;const n=fte(t);for(;n.length;)e=Mr(Cr([e,Mr(n.pop())]));return Le(e)}function eHe(t,e){const n=e;return Q(n<=255,"DNS encoded label cannot exceed 255","length",n),Le(Cr(fte(t).map(r=>{Q(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const pte=new Uint8Array(32);pte.fill(0);const tHe=BigInt(-1),gte=BigInt(0),mte=BigInt(1),nHe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function rHe(t){const e=Bt(t),n=e.length%32;return n?Cr([e,pte.slice(n)]):Le(e)}const sHe=mf(mte,32),iHe=mf(gte,32),T7={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},LO=["name","version","chainId","verifyingContract","salt"];function R7(t){return function(e){return Q(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const oHe={name:R7("name"),version:R7("version"),chainId:function(t){const e=Ze(t,"domain.chainId");return Q(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):uc(e)},verifyingContract:function(t){try{return bn(t).toLowerCase()}catch{}Q(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Bt(t,"domain.salt");return Q(e.length===32,'invalid domain value "salt"',"domain.salt",t),Le(e)}};function UO(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);Q(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=_v(nHe,n?r-1:r),i=n?(s+mte)*tHe:gte;return function(o){const a=Ze(o,"value");return Q(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),mf(n?nee(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Q(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Bt(r);return Q(s.length===n,`invalid length for ${t}`,"value",r),rHe(r)}}}switch(t){case"address":return function(e){return nd(bn(e),32)};case"bool":return function(e){return e?sHe:iHe};case"bytes":return function(e){return Mr(e)};case"string":return function(e){return Fg(e)}}return null}function P7(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function LA(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var nC,vu,Tw,Ex,yte;const aa=class aa{constructor(e){K(this,Ex);ee(this,"primaryType");K(this,nC);K(this,vu);K(this,Tw);U(this,vu,new Map),U(this,Tw,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=LA(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),U(this,nC,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){Q(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=LA(u.type).base;Q(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!UO(d)&&(Q(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);Q(o.length!==0,"missing primary type","types",e),Q(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),gt(this,{primaryType:o[0]});function a(c,l){Q(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),_(this,vu).set(c,P7(c,i[c])+u.map(d=>P7(d,i[d])).join(""))}}get types(){return JSON.parse(_(this,nC))}getEncoder(e){let n=_(this,Tw).get(e);return n||(n=he(this,Ex,yte).call(this,e),_(this,Tw).set(e,n)),n}encodeType(e){const n=_(this,vu).get(e);return Q(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Mr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(UO(e))return r(e,n);const s=LA(e).array;if(s)return Q(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});Q(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new aa(e)}static getPrimaryType(e){return aa.from(e).primaryType}static hashStruct(e,n,r){return aa.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=T7[r];Q(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>LO.indexOf(r.name)-LO.indexOf(s.name)),aa.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Cr(["0x1901",aa.hashDomain(e),aa.from(n).hash(r)])}static hash(e,n,r){return Mr(aa.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!Kn(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=aa.from(n);o.visit(r,(a,c)=>(a==="address"&&!Kn(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){aa.hashDomain(e);const s={},i=[];LO.forEach(c=>{const l=e[c];l!=null&&(s[c]=oHe[c](l),i.push({name:c,type:T7[c]}))});const o=aa.from(n);n=o.types;const a=Object.assign({},n);return Q(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Le(Bt(l));if(c.match(/^u?int/))return Ze(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return Q(typeof l=="string","invalid string","value",l),l}Q(!1,"unsupported type","type",c)})}}};nC=new WeakMap,vu=new WeakMap,Tw=new WeakMap,Ex=new WeakSet,yte=function(e){{const s=UO(e);if(s)return s}const n=LA(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{Q(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return _(this,vu).has(s)&&(a=a.map(Mr)),Mr(Cr(a))}}const r=this.types[e];if(r){const s=Fg(_(this,vu).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return _(this,vu).has(c)?Mr(l):l});return o.unshift(s),Cr(o)}}Q(!1,`unknown type: ${e}`,"type",e)};let gx=aa;function yi(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const aHe="external public payable override",cHe=yi(aHe.split(" ")),wte="constant external internal payable private public pure view override",lHe=yi(wte.split(" ")),bte="constructor error event fallback function receive struct",vte=yi(bte.split(" ")),Ete="calldata memory storage payable indexed",uHe=yi(Ete.split(" ")),dHe="tuple returns",hHe=[bte,Ete,dHe,wte].join(" "),fHe=yi(hHe.split(" ")),pHe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},gHe=new RegExp("^(\\s*)"),mHe=new RegExp("^([0-9]+)"),yHe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),_te=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Cte=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var _s,sc,rC,q3;const _x=class _x{constructor(e){K(this,rC);K(this,_s);K(this,sc);U(this,_s,0),U(this,sc,e.slice())}get offset(){return _(this,_s)}get length(){return _(this,sc).length-_(this,_s)}clone(){return new _x(_(this,sc))}reset(){U(this,_s,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=he(this,rC,q3).call(this,_(this,_s)+1,e.match+1);return U(this,_s,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;_(this,_s)<e.match-1;){const r=this.peek().linkNext;n.push(he(this,rC,q3).call(this,_(this,_s)+1,r)),U(this,_s,r)}return U(this,_s,e.match+1),n}peek(){if(_(this,_s)>=_(this,sc).length)throw new Error("out-of-bounds");return _(this,sc)[_(this,_s)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return pd(this,_s)._++,e}toString(){const e=[];for(let n=_(this,_s);n<_(this,sc).length;n++){const r=_(this,sc)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};_s=new WeakMap,sc=new WeakMap,rC=new WeakSet,q3=function(e=0,n=0){return new _x(_(this,sc).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Tc=_x;function If(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(gHe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=pHe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Ft(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(yHe),a){if(c.text=a[1],i+=c.text.length,fHe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Cte)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(mHe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Tc(e.map(o=>Object.freeze(o)))}function O7(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function IT(t,e){if(e.peekKeyword(vte)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function rd(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function Ate(t){let e=rd(t,lHe);return O7(e,yi("constant payable nonpayable".split(" "))),O7(e,yi("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Hu(t,e){return t.popParams().map(n=>Ps.from(n,e))}function Ste(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ze(t.pop().text);throw new Error("invalid gas")}return null}function jg(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const wHe=new RegExp(/^(.*)\[([0-9]*)\]$/);function k7(t){const e=t.match(Cte);if(Q(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);Q(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);Q(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const ur={},ao=Symbol.for("_ethers_internal"),D7="_ParamTypeInternal",M7="_ErrorInternal",L7="_EventInternal",U7="_ConstructorInternal",$7="_FallbackInternal",B7="_FunctionInternal",F7="_StructInternal";var Rw,xS;const ca=class ca{constructor(e,n,r,s,i,o,a,c){K(this,Rw);ee(this,"name");ee(this,"type");ee(this,"baseType");ee(this,"indexed");ee(this,"components");ee(this,"arrayLength");ee(this,"arrayChildren");if(mT(e,ur,"ParamType"),Object.defineProperty(this,ao,{value:D7}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");gt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return he(this,Rw,xS).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(ca.isParamType(e))return e;if(typeof e=="string")try{return ca.from(If(e),n)}catch{Q(!1,"invalid param type","obj",e)}else if(e instanceof Tc){let a="",c="",l=null;rd(e,yi(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>ca.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=k7(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new ca(ur,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(rd(e,uHe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new ca(ur,p,a,c,h,l,d,u)}const r=e.name;Q(!r||typeof r=="string"&&r.match(_te),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Q(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(wHe);if(o){const a=parseInt(o[2]||"-1"),c=ca.from({type:o[1],components:e.components});return new ca(ur,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>ca.from(l)):null;return new ca(ur,r||"",i,"tuple",s,a,null,null)}return i=k7(e.type),new ca(ur,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[ao]===D7}};Rw=new WeakSet,xS=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;he(u=o,Rw,xS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;he(u=o[l],Rw,xS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Ps=ca;class zg{constructor(e,n,r){ee(this,"type");ee(this,"inputs");mT(e,ur,"Fragment"),r=Object.freeze(r.slice()),gt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{zg.from(JSON.parse(e))}catch{}return zg.from(If(e))}if(e instanceof Tc)switch(e.peekKeyword(vte)){case"constructor":return Mu.from(e);case"error":return Vi.from(e);case"event":return vl.from(e);case"fallback":case"receive":return fu.from(e);case"function":return El.from(e);case"struct":return cg.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Mu.from(e);case"error":return Vi.from(e);case"event":return vl.from(e);case"fallback":case"receive":return fu.from(e);case"function":return El.from(e);case"struct":return cg.from(e)}be(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Q(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Mu.isFragment(e)}static isError(e){return Vi.isFragment(e)}static isEvent(e){return vl.isFragment(e)}static isFunction(e){return El.isFragment(e)}static isStruct(e){return cg.isFragment(e)}}class xT extends zg{constructor(n,r,s,i){super(n,r,i);ee(this,"name");Q(typeof s=="string"&&s.match(_te),"invalid identifier","name",s),i=Object.freeze(i.slice()),gt(this,{name:s})}}function G_(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class Vi extends xT{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,ao,{value:M7})}get selector(){return Fg(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+G_(e,this.inputs)),n.join(" ")}static from(e){if(Vi.isFragment(e))return e;if(typeof e=="string")return Vi.from(If(e));if(e instanceof Tc){const n=IT("error",e),r=Hu(e);return jg(e),new Vi(ur,n,r)}return new Vi(ur,e.name,e.inputs?e.inputs.map(Ps.from):[])}static isFragment(e){return e&&e[ao]===M7}}class vl extends xT{constructor(n,r,s,i){super(n,"event",r,s);ee(this,"anonymous");Object.defineProperty(this,ao,{value:L7}),gt(this,{anonymous:i})}get topicHash(){return Fg(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+G_(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Ps.from(i)),new vl(ur,n,r,!1).topicHash}static from(n){if(vl.isFragment(n))return n;if(typeof n=="string")try{return vl.from(If(n))}catch{Q(!1,"invalid event fragment","obj",n)}else if(n instanceof Tc){const r=IT("event",n),s=Hu(n,!0),i=!!rd(n,yi(["anonymous"])).has("anonymous");return jg(n),new vl(ur,r,s,i)}return new vl(ur,n.name,n.inputs?n.inputs.map(r=>Ps.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[ao]===L7}}class Mu extends zg{constructor(n,r,s,i,o){super(n,r,s);ee(this,"payable");ee(this,"gas");Object.defineProperty(this,ao,{value:U7}),gt(this,{payable:i,gas:o})}format(n){if(be(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${G_(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Mu.isFragment(n))return n;if(typeof n=="string")try{return Mu.from(If(n))}catch{Q(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Tc){rd(n,yi(["constructor"]));const r=Hu(n),s=!!rd(n,cHe).has("payable"),i=Ste(n);return jg(n),new Mu(ur,"constructor",r,s,i)}return new Mu(ur,"constructor",n.inputs?n.inputs.map(Ps.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[ao]===U7}}class fu extends zg{constructor(n,r,s){super(n,"fallback",r);ee(this,"payable");Object.defineProperty(this,ao,{value:$7}),gt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(fu.isFragment(n))return n;if(typeof n=="string")try{return fu.from(If(n))}catch{Q(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Tc){const r=n.toString(),s=n.peekKeyword(yi(["fallback","receive"]));if(Q(s,"type must be fallback or receive","obj",r),n.popKeyword(yi(["fallback","receive"]))==="receive"){const c=Hu(n);return Q(c.length===0,"receive cannot have arguments","obj.inputs",c),rd(n,yi(["payable"])),jg(n),new fu(ur,[],!0)}let o=Hu(n);o.length?Q(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Ps.from("bytes")];const a=Ate(n);if(Q(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),rd(n,yi(["returns"])).has("returns")){const c=Hu(n);Q(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return jg(n),new fu(ur,o,a==="payable")}if(n.type==="receive")return new fu(ur,[],!0);if(n.type==="fallback"){const r=[Ps.from("bytes")],s=n.stateMutability==="payable";return new fu(ur,r,s)}Q(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[ao]===$7}}class El extends xT{constructor(n,r,s,i,o,a){super(n,"function",r,i);ee(this,"constant");ee(this,"outputs");ee(this,"stateMutability");ee(this,"payable");ee(this,"gas");Object.defineProperty(this,ao,{value:B7}),o=Object.freeze(o.slice()),gt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Fg(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+G_(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(G_(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Ps.from(i)),new El(ur,n,"view",r,[],null).selector}static from(n){if(El.isFragment(n))return n;if(typeof n=="string")try{return El.from(If(n))}catch{Q(!1,"invalid function fragment","obj",n)}else if(n instanceof Tc){const s=IT("function",n),i=Hu(n),o=Ate(n);let a=[];rd(n,yi(["returns"])).has("returns")&&(a=Hu(n));const c=Ste(n);return jg(n),new El(ur,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new El(ur,n.name,r,n.inputs?n.inputs.map(Ps.from):[],n.outputs?n.outputs.map(Ps.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[ao]===B7}}class cg extends xT{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,ao,{value:F7})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return cg.from(If(e))}catch{Q(!1,"invalid struct fragment","obj",e)}else if(e instanceof Tc){const n=IT("struct",e),r=Hu(e);return jg(e),new cg(ur,n,r)}return new cg(ur,e.name,e.inputs?e.inputs.map(Ps.from):[])}static isFragment(e){return e&&e[ao]===F7}}const Oc=new Map;Oc.set(0,"GENERIC_PANIC");Oc.set(1,"ASSERT_FALSE");Oc.set(17,"OVERFLOW");Oc.set(18,"DIVIDE_BY_ZERO");Oc.set(33,"ENUM_RANGE_ERROR");Oc.set(34,"BAD_STORAGE_DATA");Oc.set(49,"STACK_UNDERFLOW");Oc.set(50,"ARRAY_RANGE_ERROR");Oc.set(65,"OUT_OF_MEMORY");Oc.set(81,"UNINITIALIZED_FUNCTION_CALL");const bHe=new RegExp(/^bytes([0-9]*)$/),vHe=new RegExp(/^(u?int)([0-9]*)$/);let $O=null,j7=1024;function EHe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Bt(n);if(n=Le(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Le(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Le(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Oc.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?bn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=bn(e.from)),sr(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var hh,ry;const Cx=class Cx{constructor(){K(this,hh)}getDefaultValue(e){const n=e.map(s=>he(this,hh,ry).call(this,Ps.from(s)));return new MA(n,"_").defaultValue()}encode(e,n){XX(n.length,e.length,"types/values length mismatch");const r=e.map(o=>he(this,hh,ry).call(this,Ps.from(o))),s=new MA(r,"_"),i=new O3;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>he(this,hh,ry).call(this,Ps.from(o)));return new MA(s,"_").decode(new k3(n,r,j7))}static _setDefaultMaxInflation(e){Q(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),j7=e}static defaultAbiCoder(){return $O==null&&($O=new Cx),$O}static getBuiltinCallException(e,n,r){return EHe(e,n,r,Cx.defaultAbiCoder())}};hh=new WeakSet,ry=function(e){if(e.isArray())return new Bze(he(this,hh,ry).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new MA(e.components.map(r=>he(this,hh,ry).call(this,r)),e.name);switch(e.baseType){case"address":return new Uze(e.name);case"bool":return new Fze(e.name);case"string":return new Yze(e.name);case"bytes":return new jze(e.name);case"":return new Hze(e.name)}let n=e.type.match(vHe);if(n){let r=parseInt(n[2]||"256");return Q(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new Kze(r/8,n[1]==="int",e.name)}if(n=e.type.match(bHe),n){let r=parseInt(n[1]);return Q(r!==0&&r<=32,"invalid bytes length","param",e),new zze(r,e.name)}Q(!1,"invalid type","type",e.type)};let q_=Cx;class _He{constructor(e,n,r){ee(this,"fragment");ee(this,"name");ee(this,"signature");ee(this,"topic");ee(this,"args");const s=e.name,i=e.format();gt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class CHe{constructor(e,n,r,s){ee(this,"fragment");ee(this,"name");ee(this,"args");ee(this,"signature");ee(this,"selector");ee(this,"value");const i=e.name,o=e.format();gt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class AHe{constructor(e,n,r){ee(this,"fragment");ee(this,"name");ee(this,"args");ee(this,"signature");ee(this,"selector");const s=e.name,i=e.format();gt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class z7{constructor(e){ee(this,"hash");ee(this,"_isIndexed");gt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const W7={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},H7={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&W7[t.toString()]&&(e=W7[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var sl,il,ol,Ws,Pl,NS,TS;const sp=class sp{constructor(e){K(this,Pl);ee(this,"fragments");ee(this,"deploy");ee(this,"fallback");ee(this,"receive");K(this,sl);K(this,il);K(this,ol);K(this,Ws);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,U(this,ol,new Map),U(this,sl,new Map),U(this,il,new Map);const r=[];for(const o of n)try{r.push(zg.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}gt(this,{fragments:Object.freeze(r)});let s=null,i=!1;U(this,Ws,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}gt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Q(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=_(this,ol);break;case"event":c=_(this,il);break;case"error":c=_(this,sl);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||gt(this,{deploy:Mu.from("constructor()")}),gt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return q_.defaultAbiCoder()}getFunctionName(e){const n=he(this,Pl,NS).call(this,e,null,!1);return Q(n,"no matching function","key",e),n.name}hasFunction(e){return!!he(this,Pl,NS).call(this,e,null,!1)}getFunction(e,n){return he(this,Pl,NS).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(_(this,ol).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,ol).get(s),r)}}getEventName(e){const n=he(this,Pl,TS).call(this,e,null,!1);return Q(n,"no matching event","key",e),n.name}hasEvent(e){return!!he(this,Pl,TS).call(this,e,null,!1)}getEvent(e,n){return he(this,Pl,TS).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(_(this,il).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,il).get(s),r)}}getError(e,n){if(Kn(e)){const s=e.toLowerCase();if(H7[s])return Vi.from(H7[s].signature);for(const i of _(this,sl).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of _(this,sl))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?Vi.from("error Error(string)"):e==="Panic"?Vi.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Q(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=Vi.from(e).format(),e==="Error(string)")return Vi.from("error Error(string)");if(e==="Panic(uint256)")return Vi.from("error Panic(uint256)");const r=_(this,sl).get(e);return r||null}forEachError(e){const n=Array.from(_(this,sl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,sl).get(s),r)}}_decodeParams(e,n){return _(this,Ws).decode(e,n)}_encodeParams(e,n){return _(this,Ws).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Q(br(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,br(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Q(r,"unknown error","fragment",e),e=r}return Cr([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Q(br(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,br(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Cr([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);Q(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=hi(n);if(s.length%32===0)try{return _(this,Ws).decode(e.outputs,s)}catch{r="could not decode result data"}be(!1,r,"BAD_DATA",{value:Le(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Bt(e,"data"),s=q_.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Le(r.slice(0,4)),c=this.getError(a);if(c)try{const l=_(this,Ws).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);Q(r,"unknown function","fragment",e),e=r}return Le(_(this,Ws).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);Q(i,"unknown event","eventFragment",e),e=i}be(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Fg(o):i.type==="bytes"?Mr(Le(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=mf(o):i.type.match(/^bytes/)?o=H9e(o,32):i.type==="address"&&_(this,Ws).encode(["address"],[o]),nd(Le(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){Q(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Q(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);Q(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Q(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Fg(c));else if(o.type==="bytes")r.push(Mr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(_(this,Ws).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:_(this,Ws).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);Q(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;Q(Kn(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Ps.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?_(this,Ws).decode(s,Cr(r)):null,c=_(this,Ws).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new z7(null);else if(o[p])g=new z7(a[h++]);else try{g=a[h++]}catch(y){g=y}else try{g=c[d++]}catch(y){g=y}l.push(g),u.push(f.name||null)}),T0.fromItems(l,u)}parseTransaction(e){const n=Bt(e.data,"tx.data"),r=Ze(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Le(n.slice(0,4)));if(!s)return null;const i=_(this,Ws).decode(s.inputs,n.slice(4));return new CHe(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new _He(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Le(e),r=this.getError(br(n,0,4));if(!r)return null;const s=_(this,Ws).decode(r.inputs,br(n,4));return new AHe(r,r.selector,s)}static from(e){return e instanceof sp?e:typeof e=="string"?new sp(JSON.parse(e)):typeof e.formatJson=="function"?new sp(e.formatJson()):typeof e.format=="function"?new sp(e.format("json")):new sp(e)}};sl=new WeakMap,il=new WeakMap,ol=new WeakMap,Ws=new WeakMap,Pl=new WeakSet,NS=function(e,n,r){if(Kn(e)){const i=e.toLowerCase();for(const o of _(this,ol).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,ol))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;Ys.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(Ys.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Q(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,ol).get(El.from(e).format());return s||null},TS=function(e,n,r){if(Kn(e)){const i=e.toLowerCase();for(const o of _(this,il).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,il))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(Ys.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Q(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,il).get(vl.from(e).format());return s||null};let V3=sp;const Ite=BigInt(0);function Vy(t){return t??null}function Ir(t){return t==null?null:t.toString()}class G7{constructor(e,n,r){ee(this,"gasPrice");ee(this,"maxFeePerGas");ee(this,"maxPriorityFeePerGas");gt(this,{gasPrice:Vy(e),maxFeePerGas:Vy(n),maxPriorityFeePerGas:Vy(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Ir(e),maxFeePerGas:Ir(n),maxPriorityFeePerGas:Ir(r)}}}function mx(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Le(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Ze(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Ft(t[s],`request.${s}`));return t.accessList&&(e.accessList=dm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>SU(s)?Le(s):Object.assign({},s))),e}var Eu;class SHe{constructor(e,n){ee(this,"provider");ee(this,"number");ee(this,"hash");ee(this,"timestamp");ee(this,"parentHash");ee(this,"parentBeaconBlockRoot");ee(this,"nonce");ee(this,"difficulty");ee(this,"gasLimit");ee(this,"gasUsed");ee(this,"stateRoot");ee(this,"receiptsRoot");ee(this,"blobGasUsed");ee(this,"excessBlobGas");ee(this,"miner");ee(this,"prevRandao");ee(this,"extraData");ee(this,"baseFeePerGas");K(this,Eu);U(this,Eu,e.transactions.map(r=>typeof r!="string"?new V_(r,n):r)),gt(this,{provider:n,hash:Vy(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Vy(e.prevRandao),extraData:e.extraData,baseFeePerGas:Vy(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return _(this,Eu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=_(this,Eu).slice();return e.length===0?[]:(be(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:y}=this;return{_type:"Block",baseFeePerGas:Ir(e),difficulty:Ir(n),extraData:r,gasLimit:Ir(s),gasUsed:Ir(i),blobGasUsed:Ir(this.blobGasUsed),excessBlobGas:Ir(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:y}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return _(this,Eu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=_(this,Eu)[e];else{const r=e.toLowerCase();for(const s of _(this,Eu))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;Q(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return IHe(this)}}Eu=new WeakMap;class a1{constructor(e,n){ee(this,"provider");ee(this,"transactionHash");ee(this,"blockHash");ee(this,"blockNumber");ee(this,"removed");ee(this,"address");ee(this,"data");ee(this,"topics");ee(this,"index");ee(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());gt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return be(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return be(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return be(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return xHe(this)}}var sC;class xte{constructor(e,n){ee(this,"provider");ee(this,"to");ee(this,"from");ee(this,"contractAddress");ee(this,"hash");ee(this,"index");ee(this,"blockHash");ee(this,"blockNumber");ee(this,"logsBloom");ee(this,"gasUsed");ee(this,"blobGasUsed");ee(this,"cumulativeGasUsed");ee(this,"gasPrice");ee(this,"blobGasPrice");ee(this,"type");ee(this,"status");ee(this,"root");K(this,sC);U(this,sC,Object.freeze(e.logs.map(s=>new a1(s,n))));let r=Ite;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),gt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return _(this,sC)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Ir(this.cumulativeGasUsed),from:n,gasPrice:Ir(this.gasPrice),blobGasUsed:Ir(this.blobGasUsed),blobGasPrice:Ir(this.blobGasPrice),gasUsed:Ir(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Tte(this)}reorderedEvent(e){return be(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Nte(this,e)}}sC=new WeakMap;var fh;const qU=class qU{constructor(e,n){ee(this,"provider");ee(this,"blockNumber");ee(this,"blockHash");ee(this,"index");ee(this,"hash");ee(this,"type");ee(this,"to");ee(this,"from");ee(this,"nonce");ee(this,"gasLimit");ee(this,"gasPrice");ee(this,"maxPriorityFeePerGas");ee(this,"maxFeePerGas");ee(this,"maxFeePerBlobGas");ee(this,"data");ee(this,"value");ee(this,"chainId");ee(this,"signature");ee(this,"accessList");ee(this,"blobVersionedHashes");ee(this,"authorizationList");K(this,fh);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,U(this,fh,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Ir(this.chainId),data:l,from:a,gasLimit:Ir(this.gasLimit),gasPrice:Ir(this.gasPrice),hash:s,maxFeePerGas:Ir(this.maxFeePerGas),maxPriorityFeePerGas:Ir(this.maxPriorityFeePerGas),maxFeePerBlobGas:Ir(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Ir(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await ci({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=_(this,fh),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await ci({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<_(this,fh)&&(o=_(this,fh)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const y of g)if(y===this.hash)return;for(let y=0;y<g.length;y++){const m=await g.getTransaction(y);if(m.from===this.from&&m.nonce===this.nonce){if(a)return null;const b=await this.provider.getTransactionReceipt(m.hash);if(b==null||h-b.blockNumber+1<r)return;let v="replaced";m.data===this.data&&m.to===this.to&&m.value===this.value?v="repriced":m.data==="0x"&&m.from===m.to&&m.value===Ite&&(v="cancelled"),be(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:m.replaceableTransaction(i),hash:m.hash,receipt:b})}}o++}},l=h=>{if(h==null||h.status!==0)return h;be(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(m=>m())};if(p.push(()=>{a=!0}),s>0){const m=setTimeout(()=>{g(),f(sr("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(m)})}const y=async m=>{if(await m.confirmations()>=r){g();try{h(l(m))}catch(b){f(b)}}};if(p.push(()=>{this.provider.off(this.hash,y)}),this.provider.on(this.hash,y),i>=0){const m=async()=>{try{await c()}catch(b){if(Is(b,"TRANSACTION_REPLACED")){g(),f(b);return}}a||this.provider.once("block",m)};p.push(()=>{this.provider.off("block",m)}),this.provider.once("block",m)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return be(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Tte(this)}reorderedEvent(e){return be(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),be(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Nte(this,e)}replaceableTransaction(e){Q(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new qU(this,this.provider);return U(n,fh,e),n}};fh=new WeakMap;let V_=qU;function IHe(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function Nte(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function Tte(t){return{orphan:"drop-transaction",tx:t}}function xHe(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class BU extends a1{constructor(n,r,s){super(n,n.provider);ee(this,"interface");ee(this,"fragment");ee(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);gt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Rte extends a1{constructor(n,r){super(n,n.provider);ee(this,"error");gt(this,{error:r})}}var Pw;class NHe extends xte{constructor(n,r,s){super(s,r);K(this,Pw);U(this,Pw,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?_(this,Pw).getEvent(n.topics[0]):null;if(r)try{return new BU(n,_(this,Pw),r)}catch(s){return new Rte(n,s)}return n})}}Pw=new WeakMap;var iC;class FU extends V_{constructor(n,r,s){super(s,r);K(this,iC);U(this,iC,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new NHe(_(this,iC),this.provider,s)}}iC=new WeakMap;class Pte extends ree{constructor(n,r,s,i){super(n,r,s);ee(this,"log");gt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class THe extends Pte{constructor(e,n,r,s,i){super(e,n,r,new BU(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);gt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const q7=BigInt(0);function Ote(t){return t&&typeof t.call=="function"}function kte(t){return t&&typeof t.estimateGas=="function"}function NT(t){return t&&typeof t.resolveName=="function"}function Dte(t){return t&&typeof t.sendTransaction=="function"}function Mte(t){if(t!=null){if(NT(t))return t;if(t.provider)return t.provider}}var oC;class RHe{constructor(e,n,r){K(this,oC);ee(this,"fragment");if(gt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=Wg(e.runner,"resolveName"),i=NT(s)?s:null;U(this,oC,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>mi(h,i))):mi(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return _(this,oC)}}oC=new WeakMap;function Wg(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function _p(t){return t==null?null:t.provider||null}async function Lte(t,e){const n=Ys.dereference(t,"overrides");Q(typeof n=="object","invalid overrides parameter","overrides",t);const r=mx(n);return Q(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Q(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function PHe(t,e,n){const r=Wg(t,"resolveName"),s=NT(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=Ys.dereference(c,a),a==="address"?mi(c,s):c))))}function OHe(t){const e=async function(o){const a=await Lte(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await mi(a.from,Mte(t.runner)));const c=t.interface,l=Ze(a.value||q7,"overrides.value")===q7,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&Q(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Q(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return Q(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),Q(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Wg(t.runner,"call");be(Ote(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw AU(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;be(Dte(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=_p(t.runner);return new FU(t.interface,l,c)},s=async function(o){const a=Wg(t.runner,"estimateGas");return be(kte(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return gt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function kHe(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return be(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await Lte(l.pop()),d.from&&(d.from=await mi(d.from,Mte(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await PHe(t.runner,u.inputs,l);return Object.assign({},d,await ci({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;be(Dte(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=_p(t.runner);return new FU(t.interface,h,d)},o=async function(...l){const u=Wg(t.runner,"estimateGas");return be(kte(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=Wg(t.runner,"call");be(Ote(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw AU(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return gt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return be(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function DHe(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return be(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new RHe(t,n(...s),s)};return gt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return be(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const yx=Symbol.for("_ethersInternal_contract"),Ute=new WeakMap;function MHe(t,e){Ute.set(t[yx],e)}function Ao(t){return Ute.get(t[yx])}function LHe(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function jU(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(Kn(o,32))return o;const a=t.interface.getEvent(o);return Q(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?Kn(e,32)?n=[e]:(r=t.interface.getEvent(e),Q(r,"unknown fragment","event",e),n=[r.topicHash]):LHe(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):Q(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function Sv(t,e){const{subs:n}=Ao(t);return n.get((await jU(t,e)).tag)||null}async function V7(t,e,n){const r=_p(t.runner);be(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await jU(t,n),{addr:a,subs:c}=Ao(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=y=>{let m=s;if(m==null)try{m=t.interface.getEvent(y.topics[0])}catch{}if(m){const b=m,v=s?t.interface.decodeEventLog(s,y.data,y.topics):[];Y3(t,n,v,A=>new THe(t,A,n,b,y))}else Y3(t,n,[],b=>new Pte(t,b,n,y))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let y=f;f=[],await Promise.all(y),r.off(d,h)}},c.set(i,l)}return l}let K3=Promise.resolve();async function UHe(t,e,n,r){await K3;const s=await Sv(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Ao(t).subs.delete(s.tag)),i>0}async function Y3(t,e,n,r){try{await K3}catch{}const s=UHe(t,e,n,r);return K3=s,await s}const UA=["then"];var yz;yz=yx;const aE=class aE{constructor(e,n,r,s){ee(this,"target");ee(this,"interface");ee(this,"runner");ee(this,"filters");ee(this,yz);ee(this,"fallback");Q(typeof e=="string"||zee(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=V3.from(n);gt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,yx,{value:{}});let o,a=null,c=null;if(s){const d=_p(r);c=new FU(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(Kn(e))a=e,o=Promise.resolve(e);else{const d=Wg(r,"resolveName");if(!NT(d))throw sr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw sr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Ao(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Ao(this).addr=d,d});MHe(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||UA.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!Is(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>UA.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return gt(this,{filters:u}),gt(this,{fallback:i.receive||i.fallback?OHe(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||UA.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!Is(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||UA.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new aE(this.target,this.interface,e)}attach(e){return new aE(e,this.interface,this.runner)}async getAddress(){return await Ao(this).addrPromise}async getDeployedCode(){const e=_p(this.runner);be(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=_p(this.runner);return be(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Ao(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),kHe(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),DHe(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Ao(this),o=s||await i,{fragment:a,topics:c}=await jU(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=_p(this.runner);return be(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new BU(d,this.interface,h)}catch(f){return new Rte(d,f)}return new a1(d,u)})}async on(e,n){const r=await V7(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await V7(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await Y3(this,e,n,null)}async listenerCount(e){if(e){const s=await Sv(this,e);return s?s.listeners.length:0}const{subs:n}=Ao(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await Sv(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Ao(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await Sv(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Ao(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Sv(this,e);if(!n)return this;n.stop(),Ao(this).subs.delete(n.tag)}else{const{subs:n}=Ao(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends aE{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let Q3=aE;function $He(){return Q3}class lg extends $He(){}function BO(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Q(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class BHe{constructor(e){ee(this,"name");gt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const $te=new RegExp("^(ipfs)://(.*)$","i"),K7=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),$te,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var ph,Hp,gh,sy,Ax,Bte;const Iy=class Iy{constructor(e,n,r){K(this,gh);ee(this,"provider");ee(this,"address");ee(this,"name");K(this,ph);K(this,Hp);gt(this,{provider:e,address:n,name:r}),U(this,ph,null),U(this,Hp,new lg(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return _(this,ph)==null&&U(this,ph,(async()=>{try{return await _(this,Hp).supportsInterface("0x9061b923")}catch(e){if(Is(e,"CALL_EXCEPTION"))return!1;throw U(this,ph,null),e}})()),await _(this,ph)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await he(this,gh,sy).call(this,"addr(bytes32)");return i==null||i===B_?null:i}catch(i){if(Is(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await he(this,gh,sy).call(this,"addr(bytes32,uint)",[i]);if(Kn(o,20))return bn(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof BHe&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await he(this,gh,sy).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;be(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await he(this,gh,sy).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await he(this,gh,sy).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${V9e("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;be(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<K7.length;r++){const s=n.match(K7[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=BO(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new lg(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",mf(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=BO(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new yf(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const m=f.body;return m&&e.push({type:"!metadata",value:Le(m)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match($te)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=BO(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return be(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await he(s=Iy,Ax,Bte).call(s,e,r);if(i!=null){const o=new Iy(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};ph=new WeakMap,Hp=new WeakMap,gh=new WeakSet,sy=async function(e,n){n=(n||[]).slice();const r=_(this,Hp).interface;n.unshift(G3(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),be(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[eHe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await _(this,Hp)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Is(i,"CALL_EXCEPTION"))throw i}return null},Ax=new WeakSet,Bte=async function(e,n){const r=await Iy.getEnsAddress(e);try{const i=await new lg(r,["function resolver(bytes32) view returns (address)"],e).resolver(G3(n),{enableCcipRead:!0});return i===B_?null:i}catch(s){throw s}return null},K(Iy,Ax);let wx=Iy;const Y7=BigInt(0);function Yt(t,e){return function(n){return n==null?e:t(n)}}function K_(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function c1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";be(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function FHe(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}Q(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function L0(t){return Q(Kn(t,!0),"invalid data","value",t),t}function Ss(t){return Q(Kn(t,32),"invalid hash","value",t),t}const jHe=c1({address:bn,blockHash:Ss,blockNumber:Ft,data:L0,index:Ft,removed:Yt(FHe,!1),topics:K_(Ss),transactionHash:Ss,transactionIndex:Ft},{index:["logIndex"]});function zHe(t){return jHe(t)}const WHe=c1({hash:Yt(Ss),parentHash:Ss,parentBeaconBlockRoot:Yt(Ss,null),number:Ft,timestamp:Ft,nonce:Yt(L0),difficulty:Ze,gasLimit:Ze,gasUsed:Ze,stateRoot:Yt(Ss,null),receiptsRoot:Yt(Ss,null),blobGasUsed:Yt(Ze,null),excessBlobGas:Yt(Ze,null),miner:Yt(bn),prevRandao:Yt(Ss,null),extraData:L0,baseFeePerGas:Yt(Ze)},{prevRandao:["mixHash"]});function HHe(t){const e=WHe(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:Fte(n)),e}const GHe=c1({transactionIndex:Ft,blockNumber:Ft,transactionHash:Ss,address:bn,topics:K_(Ss),data:L0,index:Ft,blockHash:Ss},{index:["logIndex"]});function qHe(t){return GHe(t)}const VHe=c1({to:Yt(bn,null),from:Yt(bn,null),contractAddress:Yt(bn,null),index:Ft,root:Yt(Le),gasUsed:Ze,blobGasUsed:Yt(Ze,null),logsBloom:Yt(L0),blockHash:Ss,hash:Ss,logs:K_(qHe),blockNumber:Ft,cumulativeGasUsed:Ze,effectiveGasPrice:Yt(Ze),blobGasPrice:Yt(Ze,null),status:Yt(Ft),type:Yt(Ft,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function KHe(t){return VHe(t)}function Fte(t){t.to&&Ze(t.to)===Y7&&(t.to="0x0000000000000000000000000000000000000000");const e=c1({hash:Ss,index:Yt(Ft,void 0),type:n=>n==="0x"||n==null?0:Ft(n),accessList:Yt(dm,null),blobVersionedHashes:Yt(K_(Ss,!0),null),authorizationList:Yt(K_(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:bn(n.address),chainId:Ze(n.chainId),nonce:Ze(n.nonce),signature:so.from(r)}},!1),null),blockHash:Yt(Ss,null),blockNumber:Yt(Ft,null),transactionIndex:Yt(Ft,null),from:bn,gasPrice:Yt(Ze),maxPriorityFeePerGas:Yt(Ze),maxFeePerGas:Yt(Ze),maxFeePerBlobGas:Yt(Ze,null),gasLimit:Ze,to:Yt(bn,null),value:Ze,nonce:Ft,data:L0,creates:Yt(bn,null),chainId:Yt(Ze,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=Lze(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=so.from(t.signature):e.signature=so.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Ze(e.blockHash)===Y7&&(e.blockHash=null),e}const YHe="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class l1{constructor(e){ee(this,"name");gt(this,{name:e})}clone(){return new l1(this.name)}}class TT extends l1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);ee(this,"effectiveBlock");ee(this,"txBase");ee(this,"txCreate");ee(this,"txDataZero");ee(this,"txDataNonzero");ee(this,"txAccessListStorageKey");ee(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),Q(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),gt(this,s)}clone(){return new TT(this.effectiveBlock,this)}}class RT extends l1{constructor(n,r){super("org.ethers.plugins.network.Ens");ee(this,"address");ee(this,"targetNetwork");gt(this,{address:n||YHe,targetNetwork:r??1})}clone(){return new RT(this.address,this.targetNetwork)}}var aC,cC;class QHe extends l1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");K(this,aC);K(this,cC);U(this,aC,n),U(this,cC,r)}get url(){return _(this,aC)}get processFunc(){return _(this,cC)}clone(){return this}}aC=new WeakMap,cC=new WeakMap;const FO=new Map;var Ow,kw,mh;const xy=class xy{constructor(e,n){K(this,Ow);K(this,kw);K(this,mh);U(this,Ow,e),U(this,kw,Ze(n)),U(this,mh,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return _(this,Ow)}set name(e){U(this,Ow,e)}get chainId(){return _(this,kw)}set chainId(e){U(this,kw,Ze(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ze(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ze(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ze(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(_(this,mh).values())}attachPlugin(e){if(_(this,mh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,mh).set(e.name,e.clone()),this}getPlugin(e){return _(this,mh).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new xy(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new TT;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=dm(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(JHe(),e==null)return xy.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=FO.get(e);if(n)return n();if(typeof e=="bigint")return new xy("unknown",e);Q(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Q(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new xy(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new RT(e.ensAddress,e.ensNetwork)),n}Q(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=FO.get(e);r&&Q(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),FO.set(e,n)}};Ow=new WeakMap,kw=new WeakMap,mh=new WeakMap;let Cl=xy;function Q7(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function J7(t){return new QHe(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:Q7(a.maxFee,9),maxPriorityFeePerGas:Q7(a.maxPriorityFee,9)}}catch(i){be(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let Z7=!1;function JHe(){if(Z7)return;Z7=!0;function t(e,n,r){const s=function(){const i=new Cl(e,n);return r.ensNetwork!=null&&i.attachPlugin(new RT(null,r.ensNetwork)),i.attachPlugin(new TT),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Cl.register(e,s),Cl.register(n,s),r.altNames&&r.altNames.forEach(i=>{Cl.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[J7("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[J7("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function J3(t){return JSON.parse(JSON.stringify(t))}var _u,da,yh,al,Dw,RS;class ZHe{constructor(e){K(this,Dw);K(this,_u);K(this,da);K(this,yh);K(this,al);U(this,_u,e),U(this,da,null),U(this,yh,4e3),U(this,al,-2)}get pollingInterval(){return _(this,yh)}set pollingInterval(e){U(this,yh,e)}start(){_(this,da)||(U(this,da,_(this,_u)._setTimeout(he(this,Dw,RS).bind(this),_(this,yh))),he(this,Dw,RS).call(this))}stop(){_(this,da)&&(_(this,_u)._clearTimeout(_(this,da)),U(this,da,null))}pause(e){this.stop(),e&&U(this,al,-2)}resume(){this.start()}}_u=new WeakMap,da=new WeakMap,yh=new WeakMap,al=new WeakMap,Dw=new WeakSet,RS=async function(){try{const e=await _(this,_u).getBlockNumber();if(_(this,al)===-2){U(this,al,e);return}if(e!==_(this,al)){for(let n=_(this,al)+1;n<=e;n++){if(_(this,da)==null)return;await _(this,_u).emit("block",n)}U(this,al,e)}}catch{}_(this,da)!=null&&U(this,da,_(this,_u)._setTimeout(he(this,Dw,RS).bind(this),_(this,yh)))};var Gp,qp,wh;class zU{constructor(e){K(this,Gp);K(this,qp);K(this,wh);U(this,Gp,e),U(this,wh,!1),U(this,qp,n=>{this._poll(n,_(this,Gp))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){_(this,wh)||(U(this,wh,!0),_(this,qp).call(this,-2),_(this,Gp).on("block",_(this,qp)))}stop(){_(this,wh)&&(U(this,wh,!1),_(this,Gp).off("block",_(this,qp)))}pause(e){this.stop()}resume(){this.start()}}Gp=new WeakMap,qp=new WeakMap,wh=new WeakMap;var Mw,Cu;class XHe extends zU{constructor(n,r){super(n);K(this,Mw);K(this,Cu);U(this,Mw,r),U(this,Cu,-2)}pause(n){n&&U(this,Cu,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(_(this,Mw));s!=null&&(_(this,Cu)===-2?U(this,Cu,s.number):s.number>_(this,Cu)&&(r.emit(_(this,Mw),s.number),U(this,Cu,s.number)))}}Mw=new WeakMap,Cu=new WeakMap;var Sx;class eGe extends zU{constructor(n,r){super(n);K(this,Sx);U(this,Sx,J3(r))}async _poll(n,r){throw new Error("@TODO")}}Sx=new WeakMap;var Lw;class tGe extends zU{constructor(n,r){super(n);K(this,Lw);U(this,Lw,r)}async _poll(n,r){const s=await r.getTransactionReceipt(_(this,Lw));s&&r.emit(_(this,Lw),s)}}Lw=new WeakMap;var Au,Uw,$w,bh,ha,Ix,jte;class WU{constructor(e,n){K(this,Ix);K(this,Au);K(this,Uw);K(this,$w);K(this,bh);K(this,ha);U(this,Au,e),U(this,Uw,J3(n)),U(this,$w,he(this,Ix,jte).bind(this)),U(this,bh,!1),U(this,ha,-2)}start(){_(this,bh)||(U(this,bh,!0),_(this,ha)===-2&&_(this,Au).getBlockNumber().then(e=>{U(this,ha,e)}),_(this,Au).on("block",_(this,$w)))}stop(){_(this,bh)&&(U(this,bh,!1),_(this,Au).off("block",_(this,$w)))}pause(e){this.stop(),e&&U(this,ha,-2)}resume(){this.start()}}Au=new WeakMap,Uw=new WeakMap,$w=new WeakMap,bh=new WeakMap,ha=new WeakMap,Ix=new WeakSet,jte=async function(e){if(_(this,ha)===-2)return;const n=J3(_(this,Uw));n.fromBlock=_(this,ha)+1,n.toBlock=e;const r=await _(this,Au).getLogs(n);if(r.length===0){_(this,ha)<e-60&&U(this,ha,e-60);return}for(const s of r)_(this,Au).emit(_(this,Uw),s),U(this,ha,s.blockNumber)};const nGe=BigInt(2),rGe=10;function $A(t){return t&&typeof t.then=="function"}function PS(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class zte{constructor(e){ee(this,"name");gt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function sGe(t){return JSON.parse(JSON.stringify(t))}function Z3(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function jO(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(Kn(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:PS("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:PS("orphan",n),filter:sGe(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?Z3(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{Kn(a)?s.push(a):i.push((async()=>{s.push(await mi(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=Z3(s.map(a=>a.toLowerCase()))}return{filter:r,tag:PS("event",r),type:"event"}}Q(!1,"unknown ProviderEvent","event",t)}function zO(){return new Date().getTime()}const iGe={cacheTimeout:250,pollingInterval:4e3};var Hs,vh,Gs,Bw,No,Vp,Eh,Su,lC,fa,Fw,jw,Lt,Eo,X3,e5,Iv,t5,xv,OS;class oGe{constructor(e,n){K(this,Lt);K(this,Hs);K(this,vh);K(this,Gs);K(this,Bw);K(this,No);K(this,Vp);K(this,Eh);K(this,Su);K(this,lC);K(this,fa);K(this,Fw);K(this,jw);if(U(this,jw,Object.assign({},iGe,n||{})),e==="any")U(this,Vp,!0),U(this,No,null);else if(e){const r=Cl.from(e);U(this,Vp,!1),U(this,No,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else U(this,Vp,!1),U(this,No,null);U(this,Su,-1),U(this,Eh,new Map),U(this,Hs,new Map),U(this,vh,new Map),U(this,Gs,null),U(this,Bw,!1),U(this,lC,1),U(this,fa,new Map),U(this,Fw,!1)}get pollingInterval(){return _(this,jw).pollingInterval}get provider(){return this}get plugins(){return Array.from(_(this,vh).values())}attachPlugin(e){if(_(this,vh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,vh).set(e.name,e.connect(this)),this}getPlugin(e){return _(this,vh).get(e)||null}get disableCcipRead(){return _(this,Fw)}set disableCcipRead(e){U(this,Fw,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new yf(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}be(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}be(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new SHe(HHe(e),this)}_wrapLog(e,n){return new a1(zHe(e),this)}_wrapTransactionReceipt(e,n){return new xte(KHe(e),this)}_wrapTransactionResponse(e,n){return new V_(Fte(e),this)}_detectNetwork(){be(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){be(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Ft(await he(this,Lt,Eo).call(this,{method:"getBlockNumber"}),"%response");return _(this,Su)>=0&&U(this,Su,e),e}_getAddress(e){return mi(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(Kn(e))return Kn(e,32)?e:uc(e);if(typeof e=="bigint"&&(e=Ft(e,"blockTag")),typeof e=="number")return e>=0?uc(e):_(this,Su)>=0?uc(_(this,Su)+e):this.getBlockNumber().then(n=>uc(n+e));Q(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?Z3(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=mx(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=mi(n[s],this);$A(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);$A(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(_(this,No)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw _(this,No)===s&&U(this,No,null),i}})();return U(this,No,s),(await s).clone()}const e=_(this,No),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(_(this,Vp)?(this.emit("network",r,n),_(this,No)===e&&U(this,No,Promise.resolve(r))):be(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await ci({_block:he(this,Lt,t5).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await he(this,Lt,Eo).call(this,{method:"getGasPrice"});return Ze(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await he(this,Lt,Eo).call(this,{method:"getPriorityFee"});return Ze(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*nGe+c),new G7(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new yf(r.url),i=await r.processFunc(n,this,s);return new G7(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return $A(n)&&(n=await n),Ze(await he(this,Lt,Eo).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await ci({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await he(this,Lt,e5).call(this,he(this,Lt,X3).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Ze(await he(this,Lt,Iv).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Ft(await he(this,Lt,Iv).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Le(await he(this,Lt,Iv).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Ze(n,"position");return Le(await he(this,Lt,Iv).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await ci({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=lx.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await ci({network:this.getNetwork(),params:he(this,Lt,t5).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await ci({network:this.getNetwork(),params:he(this,Lt,Eo).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await ci({network:this.getNetwork(),params:he(this,Lt,Eo).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await he(this,Lt,Eo).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await ci({network:this.getNetwork(),result:he(this,Lt,Eo).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Le(n)}async getLogs(e){let n=this._getFilter(e);$A(n)&&(n=await n);const{network:r,params:s}=await ci({network:this.getNetwork(),params:he(this,Lt,Eo).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){be(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await wx.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=bn(e);const n=G3(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await wx.getEnsAddress(this),i=await new lg(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===B_)return null;const a=await new lg(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Is(r,"BAD_DATA")&&r.value==="0x"||Is(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(sr("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){be(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=_(this,fa).get(e);n&&(n.timer&&clearTimeout(n.timer),_(this,fa).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=pd(this,lC)._++,s=()=>{_(this,fa).delete(r),e()};if(this.paused)_(this,fa).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);_(this,fa).set(r,{timer:i,func:s,time:zO()})}return r}_forEachSubscriber(e){for(const n of _(this,Hs).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new zte(e.type);case"block":{const n=new ZHe(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new XHe(this,e.type);case"event":return new WU(this,e.filter);case"transaction":return new tGe(this,e.hash);case"orphan":return new eGe(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of _(this,Hs).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),_(this,Gs)!=null&&n.pause(_(this,Gs));break}}async on(e,n){const r=await he(this,Lt,OS).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,_(this,Gs)!=null&&r.subscriber.pause(_(this,Gs))),this}async once(e,n){const r=await he(this,Lt,OS).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,_(this,Gs)!=null&&r.subscriber.pause(_(this,Gs))),this}async emit(e,...n){const r=await he(this,Lt,xv).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new ree(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),_(this,Hs).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await he(this,Lt,xv).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of _(this,Hs).values())n+=r.length;return n}async listeners(e){if(e){const r=await he(this,Lt,xv).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of _(this,Hs).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await he(this,Lt,xv).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),_(this,Hs).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await he(this,Lt,OS).call(this,e);r&&s.stop(),_(this,Hs).delete(n)}else for(const[n,{started:r,subscriber:s}]of _(this,Hs))r&&s.stop(),_(this,Hs).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return _(this,Bw)}destroy(){this.removeAllListeners();for(const e of _(this,fa).keys())this._clearTimeout(e);U(this,Bw,!0)}get paused(){return _(this,Gs)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(U(this,Su,-1),_(this,Gs)!=null){if(_(this,Gs)==!!e)return;be(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),U(this,Gs,!!e);for(const n of _(this,fa).values())n.timer&&clearTimeout(n.timer),n.time=zO()-n.time}resume(){if(_(this,Gs)!=null){this._forEachSubscriber(e=>e.resume()),U(this,Gs,null);for(const e of _(this,fa).values()){let n=e.time;n<0&&(n=0),e.time=zO(),setTimeout(e.func,n)}}}}Hs=new WeakMap,vh=new WeakMap,Gs=new WeakMap,Bw=new WeakMap,No=new WeakMap,Vp=new WeakMap,Eh=new WeakMap,Su=new WeakMap,lC=new WeakMap,fa=new WeakMap,Fw=new WeakMap,jw=new WeakMap,Lt=new WeakSet,Eo=async function(e){const n=_(this,jw).cacheTimeout;if(n<0)return await this._perform(e);const r=PS(e.method,e);let s=_(this,Eh).get(r);return s||(s=this._perform(e),_(this,Eh).set(r,s),setTimeout(()=>{_(this,Eh).get(r)===s&&_(this,Eh).delete(r)},n)),await s},X3=async function(e,n,r){be(r<rGe,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=mx(e);try{return Le(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&AU(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&br(i.data,0,4)==="0x556f1830"){const o=i.data,a=await mi(s.to,this);let c;try{c=dGe(br(i.data,4))}catch(d){be(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}be(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);be(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Cr([c.selector,uGe([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await he(this,Lt,X3).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},e5=async function(e){const{value:n}=await ci({network:this.getNetwork(),value:e});return n},Iv=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await he(this,Lt,e5).call(this,he(this,Lt,Eo).call(this,Object.assign(e,{address:s,blockTag:i})))},t5=async function(e,n){if(Kn(e,32))return await he(this,Lt,Eo).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await he(this,Lt,Eo).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},xv=async function(e,n){let r=await jO(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await jO({orphan:"drop-log",log:n[0]},this)),_(this,Hs).get(r.tag)||null},OS=async function(e){const n=await jO(e,this),r=n.tag;let s=_(this,Hs).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},_(this,Hs).set(r,s)),s};function aGe(t,e){try{const n=n5(t,e);if(n)return ax(n)}catch{}return null}function n5(t,e){if(t==="0x")return null;try{const n=Ft(br(t,e,e+32)),r=Ft(br(t,n,n+32));return br(t,n+32,n+32+r)}catch{}return null}function X7(t){const e=Vr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function cGe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const lGe=new Uint8Array([]);function uGe(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(lGe),n+=32;for(let r=0;r<t.length;r++){const s=Bt(t[r]);e[r]=X7(n),e.push(X7(s.length)),e.push(cGe(s)),n+=32+Math.ceil(s.length/32)*32}return Cr(e)}const ez="0x0000000000000000000000000000000000000000000000000000000000000000";function dGe(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};be(Gy(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=br(t,0,32);be(br(n,0,12)===br(ez,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=br(n,12);try{const r=[],s=Ft(br(t,32,64)),i=Ft(br(t,s,s+32)),o=br(t,s+32);for(let a=0;a<i;a++){const c=aGe(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{be(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=n5(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{be(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}be(br(t,100,128)===br(ez,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=br(t,96,100);try{const r=n5(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{be(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Bf(t,e){if(t.provider)return t.provider;be(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function tz(t,e){let n=mx(e);if(n.to!=null&&(n.to=mi(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),mi(r,t)]).then(([s,i])=>(Q(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await ci(n)}class hGe{constructor(e){ee(this,"provider");gt(this,{provider:e||null})}async getNonce(e){return Bf(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await tz(this,e)}async populateTransaction(e){const n=Bf(this,"populateTransaction"),r=await tz(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Ze(r.chainId);Q(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Q(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Q(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();be(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(be(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):be(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await ci(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Bf(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Bf(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Bf(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Bf(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Bf(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=lx.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){be(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function fGe(t){return JSON.parse(JSON.stringify(t))}var oi,cl,Kp,_h,Yp,zw,bf,r5,s5;class Wte{constructor(e){K(this,bf);K(this,oi);K(this,cl);K(this,Kp);K(this,_h);K(this,Yp);K(this,zw);U(this,oi,e),U(this,cl,null),U(this,Kp,he(this,bf,r5).bind(this)),U(this,_h,!1),U(this,Yp,null),U(this,zw,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){_(this,_h)||(U(this,_h,!0),he(this,bf,r5).call(this,-2))}stop(){_(this,_h)&&(U(this,_h,!1),U(this,zw,!0),he(this,bf,s5).call(this),_(this,oi).off("block",_(this,Kp)))}pause(e){e&&he(this,bf,s5).call(this),_(this,oi).off("block",_(this,Kp))}resume(){this.start()}}oi=new WeakMap,cl=new WeakMap,Kp=new WeakMap,_h=new WeakMap,Yp=new WeakMap,zw=new WeakMap,bf=new WeakSet,r5=async function(e){try{_(this,cl)==null&&U(this,cl,this._subscribe(_(this,oi)));let n=null;try{n=await _(this,cl)}catch(i){if(!Is(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){U(this,cl,null),_(this,oi)._recoverSubscriber(this,this._recover(_(this,oi)));return}const r=await _(this,oi).getNetwork();if(_(this,Yp)||U(this,Yp,r),_(this,Yp).chainId!==r.chainId)throw new Error("chaid changed");if(_(this,zw))return;const s=await _(this,oi).send("eth_getFilterChanges",[n]);await this._emitResults(_(this,oi),s)}catch(n){console.log("@TODO",n)}_(this,oi).once("block",_(this,Kp))},s5=function(){const e=_(this,cl);e&&(U(this,cl,null),e.then(n=>{_(this,oi).destroyed||_(this,oi).send("eth_uninstallFilter",[n])}))};var Qp;class pGe extends Wte{constructor(n,r){super(n);K(this,Qp);U(this,Qp,fGe(r))}_recover(n){return new WU(n,_(this,Qp))}async _subscribe(n){return await n.send("eth_newFilter",[_(this,Qp)])}async _emitResults(n,r){for(const s of r)n.emit(_(this,Qp),n._wrapLog(s,n._network))}}Qp=new WeakMap;class gGe extends Wte{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const mGe="bigint,boolean,function,number,string,symbol".split(/,/g);function kS(t){if(t==null||mGe.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(kS);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function yGe(t){return new Promise(e=>{setTimeout(e,t)})}function Ym(t){return t&&t.toLowerCase()}function nz(t){return t&&typeof t.pollingInterval=="number"}const Hte={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class WO extends hGe{constructor(n,r){super(n);ee(this,"address");r=bn(r),gt(this,{address:r})}connect(n){be(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=kS(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await mi(o,this.provider);Q(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await mi(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(Is(u,"CANCELLED")||Is(u,"BAD_DATA")||Is(u,"NETWORK_ERROR")||Is(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(Is(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",sr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=kS(n);if(r.from){const i=await mi(r.from,this.provider);Q(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?Wu(n):n;return await this.provider.send("personal_sign",[Le(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=kS(s),o=await gx.resolveNames(n,r,i,async a=>{const c=await mi(a);return Q(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(gx.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?Wu(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Le(r)])}}var Jp,Ww,Iu,ll,ic,pa,Fi,uC,i5;class wGe extends oGe{constructor(n,r){super(n,r);K(this,uC);K(this,Jp);K(this,Ww);K(this,Iu);K(this,ll);K(this,ic);K(this,pa);K(this,Fi);U(this,Ww,1),U(this,Jp,Object.assign({},Hte,r||{})),U(this,Iu,[]),U(this,ll,null),U(this,pa,null),U(this,Fi,null);{let i=null;const o=new Promise(a=>{i=a});U(this,ic,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Q(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&U(this,pa,Cl.from(n))):s&&(Q(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),U(this,pa,s))}_getOption(n){return _(this,Jp)[n]}get _network(){return be(_(this,pa),"network is not available yet","NETWORK_ERROR"),_(this,pa)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Ze(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(_(this,pa))return _(this,pa)}else return n;return _(this,Fi)?await _(this,Fi):this.ready?(U(this,Fi,(async()=>{try{const r=Cl.from(Ze(await this.send("eth_chainId",[])));return U(this,Fi,null),r}catch(r){throw U(this,Fi,null),r}})()),await _(this,Fi)):(U(this,Fi,(async()=>{const r={id:pd(this,Ww)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],U(this,Fi,null)}catch(i){throw U(this,Fi,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Cl.from(Ze(s.result));throw this.getRpcError(r,s)})()),await _(this,Fi))}_start(){_(this,ic)==null||_(this,ic).resolve==null||(_(this,ic).resolve(),U(this,ic,null),(async()=>{for(;_(this,pa)==null&&!this.destroyed;)try{U(this,pa,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",sr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await yGe(1e3)}he(this,uC,i5).call(this)})())}async _waitUntilReady(){if(_(this,ic)!=null)return await _(this,ic).promise}_getSubscriber(n){return n.type==="pending"?new gGe(this):n.type==="event"?this._getOption("polling")?new WU(this,n.filter):new pGe(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new zte("orphan"):super._getSubscriber(n)}get ready(){return _(this,ic)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=uc(Ze(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Le(n[s]))}),n.accessList&&(r.accessList=dm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=qee(s);return{address:i.address,nonce:uc(i.nonce),chainId:uc(i.chainId),yParity:uc(i.signature.yParity),r:uc(i.signature.r),s:uc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Ym(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Ym(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[Ym(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Ym(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(Ym):n.filter.address=Ym(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return sr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return sr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=o5(i),l=q_.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(vGe(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return sr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return sr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return sr("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return sr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return sr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?sr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):sr("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(sr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=pd(this,Ww)._++,i=new Promise((o,a)=>{_(this,Iu).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return he(this,uC,i5).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new WO(this,i[n])}const{accounts:s}=await ci({network:this.getNetwork(),accounts:r});n=bn(n);for(const i of s)if(bn(i)===n)return new WO(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new WO(this,r))}destroy(){_(this,ll)&&(clearTimeout(_(this,ll)),U(this,ll,null));for(const{payload:n,reject:r}of _(this,Iu))r(sr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));U(this,Iu,[]),super.destroy()}}Jp=new WeakMap,Ww=new WeakMap,Iu=new WeakMap,ll=new WeakMap,ic=new WeakMap,pa=new WeakMap,Fi=new WeakMap,uC=new WeakSet,i5=function(){if(_(this,ll))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");U(this,ll,setTimeout(()=>{U(this,ll,null);const r=_(this,Iu);for(U(this,Iu,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==_(this,Jp).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>_(this,Jp).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(sr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=sr("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Ch;class bGe extends wGe{constructor(n,r){super(n,r);K(this,Ch);let s=this._getOption("pollingInterval");s==null&&(s=Hte.pollingInterval),U(this,Ch,s)}_getSubscriber(n){const r=super._getSubscriber(n);return nz(r)&&(r.pollingInterval=_(this,Ch)),r}get pollingInterval(){return _(this,Ch)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");U(this,Ch,n),this._forEachSubscriber(r=>{nz(r)&&(r.pollingInterval=_(this,Ch))})}}Ch=new WeakMap;function o5(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&Kn(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=o5(t[e]);if(n)return n}return null}if(typeof t=="string")try{return o5(JSON.parse(t))}catch{}return null}function a5(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)a5(t[n],e);if(typeof t=="string")try{return a5(JSON.parse(t),e)}catch{}}}function vGe(t){const e=[];return a5(t,e),e}var Hw,Gw;const ip=class ip extends bGe{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Q(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);K(this,Hw);K(this,Gw);U(this,Gw,null),s&&s.providerInfo&&U(this,Gw,s.providerInfo),U(this,Hw,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return _(this,Gw)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){Q(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await _(this,Hw).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await _(this,Hw).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new ip(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new ip(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof ip)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new ip(p,void 0,{providerInfo:g}))}else a(sr("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new ip(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};Hw=new WeakMap,Gw=new WeakMap;let bx=ip;const Bd=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"}],_o="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",Yn={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},HO={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},qc=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],EGe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function _Ge(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function CGe(t){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const e=new bx(window.ethereum);return await new lg(_o,Bd,e).playerToGame(t)}catch(e){return console.error("Error fetching invite code from contract:",e),null}}const Gte=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=LC(),[i,o]=L.useState(""),[a,c]=L.useState(""),[l,u]=L.useState(!1),[d,h]=L.useState(!1),[f,p]=L.useState(!1),[g,y]=L.useState(!1),{writeContract:m,isPending:b,data:v}=VR(),{writeContract:A,isPending:C,data:S,error:x}=VR(),{writeContract:T,isPending:I,data:k}=VR(),O=Nwe(),{isLoading:B}=qR({hash:v}),{isLoading:G,data:W}=qR({hash:S}),{isLoading:R}=qR({hash:k}),{data:N}=h8({address:_o,abi:Bd,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:M}=h8({address:_o,abi:Bd,functionName:"games",args:N?[N]:void 0,query:{enabled:!!N&&N!=="0x000000000000"}}),[P,D]=L.useState(""),F=async()=>{if(!r||!P||!me){console.error("[CLAIM] Missing required data for claiming winnings");return}try{p(!0),console.log("[CLAIM] Claiming winnings for game:",P,"Player:",me,"Address:",r);const $=await yr.getGame(P);if(!$){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",$);let q=null;if($.winner&&($.blue_player||$.red_player)&&(q=$.winner==="blue"?$.blue_player:$.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:$.winner,winnerAddress:q})),!q&&M)if($.winner&&($.winner==="blue"||$.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let Z,oe,De,Ie,Ge,ht;if(Array.isArray(M))[Z,oe,De,Ie,Ge,ht]=M;else{console.error("[CLAIM] Unexpected contract data format:",M),alert("Failed to verify winner. Please try again.");return}q=$.winner==="blue"?Z:oe,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:$.winner,winnerAddress:q,player1:Z,player2:oe})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",M);let Z,oe,De,Ie,Ge,ht;if(Array.isArray(M))[Z,oe,De,Ie,Ge,ht]=M;else{console.error("[CLAIM] Unexpected contract data format:",M),alert("Failed to verify winner. Please try again.");return}const Gt=String(Ie);if(Gt.startsWith("0x"))q=Gt;else if(Gt==="blue"||Gt==="red")q=Gt==="blue"?Z:oe;else if(Gt==="1"||Gt==="2")q=Gt==="1"?Z:oe;else{console.error("[CLAIM] Unknown winner format:",Ie,"as string:",Gt),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:Ie,winnerAddress:q,player1:Z,player2:oe,winnerType:typeof Ie,winnerValue:Ie,address:r,addressType:typeof r})}if(!q){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:q,address:r,playerColor:me,winnerAddressType:typeof q,addressType:typeof r,addressesMatch:q===r,winnerAddressLength:q==null?void 0:q.length,addressLength:r==null?void 0:r.length}),q!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:q,address:r,playerColor:me}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM] ✅ Winner verification passed! Proceeding with contract call...");let j=$.invite_code;if(!j&&M){console.log("[CLAIM] Using invite code from contract data");let Z,oe,De,Ie,Ge,ht;if(Array.isArray(M))[Z,oe,De,Ie,Ge,ht]=M,j=Ge;else{console.error("[CLAIM] Unexpected contract data format for invite code:",M),alert("Failed to get invite code. Please try again.");return}}if(!j||typeof j!="string"||!j.startsWith("0x")||j.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",j),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:j,winner:q,functionName:"endGame",inviteCodeSource:$.invite_code?"Firebase":"Contract"}),T({address:_o,abi:Bd,functionName:"endGame",args:[j,q]}),console.log("[CLAIM] Contract call initiated successfully"),I?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:I,endGameHash:k})}catch($){console.error("[CLAIM] Error claiming winnings:",$),alert("Failed to claim winnings. Please try again.")}finally{p(!1)}},[H,te]=L.useState(qc),[re,ie]=L.useState("blue"),[le,Ce]=L.useState(null),[X,ce]=L.useState([]),[fe,de]=L.useState([]),[ve,ye]=L.useState("Waiting for opponent..."),[Ae,we]=L.useState(Yn.LOBBY),[me,Xe]=L.useState(null),[Zt,jt]=L.useState(null),[fn,Ht]=L.useState(0),[nr,uo]=L.useState([]),[$a,ei]=L.useState(!1),[En,Lr]=L.useState(null),[_n,ho]=L.useState(null),[Wl,u1]=L.useState(""),[kc,d1]=L.useState(0),[h1,f1]=L.useState(!1),[fm,xf]=L.useState(!1),[Mn,pm]=L.useState(!1),[ud,Yo]=L.useState(null),[p1,pb]=L.useState(!1),[g1,m1]=L.useState(!0),[gm,gb]=L.useState(null),[Si,PT]=L.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[y1,Dc]=L.useState([]),[Mc,OT]=L.useState(null),Ba=L.useRef(null),Hl=L.useRef(null),Fa=L.useRef(r);L.useEffect(()=>{Fa.current=r},[r]),L.useEffect(()=>{console.log("[JOIN RECEIPT DEBUG] - joinGameHash:",S),console.log("[JOIN RECEIPT DEBUG] - isWaitingForJoinReceipt:",G),console.log("[JOIN RECEIPT DEBUG] - pendingJoinGameData:",_n),console.log("[JOIN RECEIPT DEBUG] - condition:",S&&!G&&_n),S&&!G&&_n&&(console.log("[CONTRACT] Join transaction confirmed:",S),r===_n.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),Xe("red"),jt(_n.gameData.blue_player)),yr.updateGame(_n.inviteCode,{..._n.gameData,red_player:_n.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),we(Yn.ACTIVE),ye("Game started!"),fo(_n.inviteCode),console.log("[CONTRACT] Clearing pending join data"),ho(null)}).catch($=>{console.error("Error updating game in database:",$),ye("Joined game on contract but failed to update database"),ho(null)}))},[S,G,_n,r]),L.useEffect(()=>{k&&!R&&(console.log("[CLAIM] End game transaction confirmed:",k),ye("Winnings claimed successfully! Transaction hash: "+k.slice(0,10)+"..."),p(!1))},[k,R]),L.useEffect(()=>{I===!1&&f&&!k&&(console.log("[CLAIM] End game transaction rejected or failed"),ye("Claim transaction was rejected. Please try again."),p(!1))},[I,f,k]),L.useEffect(()=>{console.log("[CREATE DEBUG] Transaction receipt handler - createGameHash:",v),console.log("[CREATE DEBUG] Transaction receipt handler - isWaitingForCreateReceipt:",B),console.log("[CREATE DEBUG] Transaction receipt handler - pendingGameData:",En),console.log("[CREATE DEBUG] Transaction receipt handler - inviteCode:",P),console.log("[CREATE DEBUG] Transaction receipt handler - condition:",v&&!B&&En&&!P),v&&!B&&En&&!P&&(console.log("[CONTRACT] Create game transaction confirmed:",v),yr.createGame(En).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),D(En.invite_code),Xe("blue"),Ht(kc),we(Yn.WAITING),ye("Waiting for opponent to join..."),fo(En.invite_code),setTimeout(()=>{Nf()},1e3),Lr(null),ei(!1)}).catch($=>{console.error("[FIREBASE] Error creating game after transaction:",$),ye("Transaction confirmed but failed to create game in database"),Lr(null),ei(!1)}))},[v,B,En,kc]),L.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",b),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",En),console.log("[CREATE REJECTION DEBUG] - createGameHash:",v),console.log("[CREATE REJECTION DEBUG] - condition:",b===!1&&En&&!v),b===!1&&En&&!v&&(console.log("[CONTRACT] Create game transaction rejected or failed"),ye("Transaction was rejected. Please try again."),Lr(null),ei(!1))},[b,En,v]),L.useEffect(()=>{C===!1&&_n&&!S&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",C),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",_n),console.log("[CONTRACT] Rejection details - joinGameHash:",S),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",N),ye("Transaction was rejected. Please try again."),D(""),Xe(null),Ht(0),jt(null),we(Yn.LOBBY),ye(""),ho(null))},[C,_n,S,r,N]),L.useEffect(()=>{r&&N!==void 0&&(g||(N!=="0x000000000000"&&M||N==="0x000000000000")&&w1())},[r,N,M,g]),L.useEffect(()=>{y(!1)},[r]),L.useEffect(()=>()=>{E1(),Ba.current&&Ba.current(),Hl.current&&clearTimeout(Hl.current)},[]);const w1=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),N&&N!=="0x000000000000"&&!M){console.log("[GAME_STATE] Waiting for contract data...");return}if(N&&N!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",N),M)){let j,Z,oe,De,Ie,Ge;if(Array.isArray(M))[j,Z,oe,De,Ie,Ge]=M;else{console.error("[GAME_STATE] Unexpected contract data format:",M);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:j,player2:Z,isActive:oe,winner:De,inviteCode:Ie,wagerAmount:Ge}),!Ie){console.error("[GAME_STATE] Invalid invite code:",Ie);return}const ht=j===r?"blue":"red",Gt=j===r?Z:j;console.log("[GAME_STATE] Player is",ht,"opponent is",Gt),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",j),console.log("[DEBUG] - player2 (red):",Z),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",j===r),console.log("[DEBUG] - player2 === address:",Z===r);const Pt=await yr.getGame(Ie);if(Pt){if(console.log("[GAME_STATE] Found game in Firebase:",Pt),D(Ie),Xe(ht),Ht(parseFloat(Pt.bet_amount)/1e18),jt(Gt),Pt.game_state==="waiting")we(Yn.WAITING),ye("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(Pt.game_state==="active"||Pt.game_state==="test_update"){if(we(Yn.ACTIVE),ye("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",Pt.game_state,")"),Pt.board){const pr=Pt.board;te(hd(pr)),ie(Pt.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",Pt.game_state,"- treating as active"),we(Yn.ACTIVE),ye("Game in progress"),Pt.board){const pr=Pt.board;te(hd(pr)),ie(Pt.current_player||"blue")}fo(Ie),y(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",Ae),console.log("[GAME_STATE] Game state from Firebase:",Pt.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const pr={invite_code:Ie,game_title:`Game ${Ie.slice(-6)}`,bet_amount:Ge?Ge.toString():"0",blue_player:j,red_player:Z,game_state:oe?"active":"waiting",board:{positions:dd(qc),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:_o,is_public:!0};if(await yr.createGame(pr),console.log("[GAME_STATE] Successfully synced game to Firebase:",pr),D(Ie),Xe(ht),Ht(parseFloat(pr.bet_amount)/1e18),jt(Gt),oe?(we(Yn.ACTIVE),ye("Game in progress")):(we(Yn.WAITING),ye("Waiting for opponent to join...")),pr.board){const ine=pr.board;te(hd(ine)),ie(pr.current_player||"blue")}fo(Ie),y(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const q=(await yr.getActiveGames()).filter(j=>j.chain==="sanko"&&(j.blue_player===r||j.red_player===r)&&["waiting","active"].includes(j.game_state));if(q&&q.length>0){const j=q[0];if(console.log("[GAME_STATE] Found active game in Firebase:",j),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",j.blue_player),console.log("[DEBUG] - red_player:",j.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",j.blue_player===r),console.log("[DEBUG] - red_player === address:",j.red_player===r),D(j.invite_code),Xe(j.blue_player===r?"blue":"red"),Ht(parseFloat(j.bet_amount)/1e18),jt(j.blue_player===r?j.red_player:j.blue_player),j.game_state==="waiting")we(Yn.WAITING),ye("Waiting for opponent to join...");else if(j.game_state==="active"||j.game_state==="test_update"){if(we(Yn.ACTIVE),ye("Game in progress"),j.board){const Z=j.board;te(hd(Z)),ie(j.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",j.game_state,"- treating as active"),we(Yn.ACTIVE),ye("Game in progress"),j.board){const Z=j.board;te(hd(Z)),ie(j.current_player||"blue")}fo(j.invite_code),y(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),we(Yn.LOBBY),ei(!1),y(!0)}catch($){console.error("[GAME_STATE] Error in checkPlayerGameState:",$)}},b1=()=>{f1(!h1),h1?(document.documentElement.classList.remove("chess-dark-mode"),document.body.classList.remove("chess-dark-mode")):(document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode"))},Gl=async()=>{try{const $=await ZX(20);Dc($)}catch($){console.error("Error loading leaderboard:",$)}},v1=async $=>{if(console.log("[SCORE] updateScore called with:",$,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Bg(r)),await ox(r,$)?console.log("[SCORE] Successfully updated score for:",Bg(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(q){console.error("[SCORE] Error updating score:",q)}},kT=async($,q,j)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:$,bluePlayer:q,redPlayer:j}),!q||!j){console.error("[SCORE] Missing player addresses from contract");return}await j9e($,q,j)?(console.log("[SCORE] Successfully updated both players scores"),await Gl()):console.error("[SCORE] Failed to update both players scores")}catch(Z){console.error("[SCORE] Error updating both players scores:",Z)}},Nf=async()=>{try{const $=await yr.getOpenGames();console.log("[FIREBASE] Loaded open games:",$),await DT($),uo($)}catch($){console.error("Error loading open games:",$)}},DT=async $=>{if(console.log("[CLEANUP] Checking for ghost games..."),!O){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const q of $)try{const j=q.invite_code;if(!j||typeof j!="string"||!j.startsWith("0x")||j.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",q.invite_code,j);continue}const Z=await O.readContract({address:_o,abi:Bd,functionName:"games",args:[j]});(!Z||Array.isArray(Z)&&Z[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",q.invite_code,"- removing from Firebase"),await yr.deleteGame(q.invite_code),console.log("[CLEANUP] Ghost game removed:",q.invite_code))}catch(j){console.error("[CLEANUP] Error checking game:",q.invite_code,j)}},MT=async()=>{if(!(!r||kc<=0)){console.log("[CREATE] Starting game creation - address:",r,"wager:",kc),ei(!0);try{const $=_Ge();console.log("[CREATE] Generated invite code:",$),D($);const q={invite_code:$,game_title:`Chess Game ${$.slice(-6)}`,bet_amount:(kc*1e18).toString(),blue_player:r,game_state:"waiting",board:{positions:dd(qc),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:_o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",q),console.log("[CREATE] Calling contract with args:",[$,BigInt(Math.floor(kc*1e18))]),m({address:_o,abi:Bd,functionName:"createGame",args:[$],value:BigInt(Math.floor(kc*1e18))}),console.log("[CREATE] Contract call initiated, setting pending data"),Lr(q),ye("Creating game... Please confirm transaction in your wallet.")}catch($){console.error("[CREATE] Error creating game:",$),ye("Failed to create game. Please try again.")}finally{ei(!1)}}},LT=async $=>{if(r)try{const q=await yr.getGame($);if(!q||q.game_state!=="waiting"){ye("Game not found or already full");return}const j=parseFloat(q.bet_amount),Z=j/1e18;if(D($),Xe("red"),Ht(Z),jt(q.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:$,playerColor:"red",wagerAmountTDMT:Z,opponent:q.blue_player,address:r}),r===q.blue_player){console.error("[JOIN] Player cannot join their own game"),ye("You cannot join your own game");return}if(N&&N!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",N),ye("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const De=await window.ethereum.request({method:"eth_chainId"}),Ie=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",De),console.log("[JOIN] Wallet state check - connectedAccounts:",Ie),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(De){console.error("[JOIN] Error checking wallet state:",De)}console.log("[JOIN] Contract call parameters - contractAddress:",_o),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[$]);const oe=BigInt(j);console.log("[JOIN] Contract call parameters - wagerAmount from Firebase (wei):",j),console.log("[JOIN] Contract call parameters - wagerValue (wei):",oe),console.log("[JOIN] Contract call parameters - value as hex:","0x"+oe.toString(16)),console.log("[JOIN] Contract call parameters - value in wei:",oe.toString()),ye("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),console.log("[JOIN] Final contract call parameters:"),console.log("[JOIN] - address:",_o),console.log("[JOIN] - functionName: joinGame"),console.log("[JOIN] - args:",[$]),console.log("[JOIN] - value:",oe),console.log("[JOIN] - value as BigInt:",oe.toString()),A({address:_o,abi:Bd,functionName:"joinGame",args:[$],value:oe}),console.log("[JOIN] writeJoinGame called, setting pending data..."),ho({inviteCode:$,gameData:q,address:r}),console.log("[JOIN] Pending data set"),console.log("[JOIN] Transaction initiated - waiting for user confirmation in MetaMask...")},500)}catch(q){console.error("[JOIN] Error joining game:",q),ye("Failed to join game. Please try again."),D(""),Xe(null),Ht(0),jt(null)}},[VU,UT]=L.useState(null),[KU,YU]=L.useState(""),[QU,JU]=L.useState(!0),E1=()=>{console.log("[FIREBASE] No fallback to stop")},fo=$=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",$),Ba.current&&(console.log("[FIREBASE] Removing existing subscription"),Ba.current());const q=yr.subscribeToGame($,j=>{const Z=Fa.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",Z),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",j),console.log("[DEBUG] Blue player from Firebase:",j==null?void 0:j.blue_player),console.log("[DEBUG] Red player from Firebase:",j==null?void 0:j.red_player),console.log("[DEBUG] Blue player type:",typeof(j==null?void 0:j.blue_player)),console.log("[DEBUG] Red player type:",typeof(j==null?void 0:j.red_player)),console.log("[DEBUG] Current address type:",typeof Z),console.log("[DEBUG] Current playerColor state:",me),console.log("[DEBUG] Pending join game data:",!!_n),!j){console.log("[DEBUG] No game data received");return}if(_n&&Z===_n.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",me),j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"&&jt(j.blue_player===Z?j.red_player:j.blue_player);else if(Z&&j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const De=Z.toLowerCase()===j.blue_player.toLowerCase(),Ie=Z.toLowerCase()===j.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",De),console.log("[DEBUG] Red player match:",Ie),console.log("[DEBUG] Blue comparison:",`${Z.toLowerCase()} === ${j.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${Z.toLowerCase()} === ${j.red_player.toLowerCase()}`),De&&me!=="blue"?(console.log("[DEBUG] Setting player color to BLUE"),Xe("blue"),jt(j.red_player)):Ie&&me!=="red"?(console.log("[DEBUG] Setting player color to RED"),Xe("red"),jt(j.blue_player)):!De&&!Ie&&me!==null?(console.log("[DEBUG] No address match found - setting playerColor to null"),Xe(null),jt(null)):console.log("[DEBUG] Player color already correctly set to:",me)}else{if(console.log("[DEBUG] Missing player data or red player is zero address - using contract data as fallback"),console.log("[DEBUG] - currentAddress:",!!Z),console.log("[DEBUG] - blue_player:",!!j.blue_player),console.log("[DEBUG] - red_player:",j==null?void 0:j.red_player),console.log("[DEBUG] - Current playerColor state:",me),console.log("[DEBUG] - Contract game data available:",!!M),me&&(me==="blue"||me==="red")){console.log("[DEBUG] Preserving existing valid playerColor:",me);return}else if(M&&Array.isArray(M)&&Z){const[De,Ie]=M;if(De&&Ie){const Ge=De.toLowerCase()===Z.toLowerCase()?"blue":"red",ht=De.toLowerCase()===Z.toLowerCase()?Ie:De;console.log("[DEBUG] Setting playerColor from contract fallback:",Ge),Xe(Ge),jt(ht)}}else console.log("[DEBUG] No valid data available, but preserving existing playerColor if valid"),(!me||me!=="blue"&&me!=="red")&&(console.log("[DEBUG] Setting playerColor to null"),Xe(null));j.blue_player&&j.red_player&&j.red_player!=="0x0000000000000000000000000000000000000000"&&jt(j.blue_player===Z?j.red_player:j.blue_player)}console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[WAGER DEBUG] bet_amount from Firebase:",j.bet_amount),console.log("[WAGER DEBUG] bet_amount type:",typeof j.bet_amount),console.log("[WAGER DEBUG] Full gameData:",j),console.log("[WAGER DEBUG] parsed value:",j.bet_amount?parseFloat(j.bet_amount):"null"),console.log("[WAGER DEBUG] converted to TDMT:",j.bet_amount?parseFloat(j.bet_amount)/1e18:"null");let oe=0;j.bet_amount&&!isNaN(parseFloat(j.bet_amount))?(oe=parseFloat(j.bet_amount)/1e18,console.log("[WAGER DEBUG] Setting wager from Firebase:",oe)):M&&Array.isArray(M)&&M[5]?(oe=parseFloat(M[5].toString())/1e18,console.log("[WAGER DEBUG] Setting wager from contract data:",oe)):console.log("[WAGER DEBUG] Setting wager to 0 (no valid bet_amount found)"),Ht(oe),j.board&&te(hd(j.board)),j.current_player&&ie(j.current_player),j.game_state==="active"?(we(Yn.ACTIVE),ye("Game in progress")):j.game_state==="finished"?(we(Yn.FINISHED),ye("Game finished")):j.game_state==="waiting"&&(we(Yn.WAITING),ye("Waiting for opponent to join..."))});Ba.current=q,console.log("[FIREBASE] Firebase subscription setup complete for game:",$)};L.useEffect(()=>(P&&fo(P),()=>{Ba.current&&Ba.current()}),[P,r]),L.useEffect(()=>{if(M&&!me&&r){console.log("[FALLBACK] Setting playerColor from contract data");let $,q,j,Z,oe,De;if(Array.isArray(M))[$,q,j,Z,oe,De]=M;else{console.error("[FALLBACK] Unexpected contract data format:",M);return}const Ie=$===r?"blue":"red",Ge=$===r?q:$;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",$),console.log("[FALLBACK] - player2 (red):",q),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Ie),console.log("[FALLBACK] - opponent:",Ge),console.log("[FALLBACK] - inviteCode from contract:",oe),Xe(Ie),jt(Ge),!P&&oe&&(console.log("[FALLBACK] Setting missing inviteCode:",oe),D(oe)),P&&yr.getGame(P).then(ht=>{ht&&(!ht.blue_player||!ht.red_player)&&(console.log("[AUTO-FIX] Detected missing player data, attempting to fix..."),BT())}).catch(ht=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",ht)})}},[M,me,r,P]),L.useEffect(()=>{if(W&&_n){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",W.transactionHash),console.log("[RECEIPT] Pending data:",_n);const{inviteCode:$,gameData:q,address:j}=_n;yr.updateGame($,{red_player:j,blue_player:q.blue_player,bet_amount:q.bet_amount,game_state:"active",last_move:null,board:{positions:dd(qc),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),ye("Game started! You are the red player."),we(Yn.ACTIVE),ho(null)}).catch(Z=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",Z),ye("Game joined but failed to update game state. Please refresh.")})}},[W,_n]),L.useEffect(()=>{x&&(console.error("[ERROR] Join transaction failed:",x),ye(`Failed to join game: ${x.message||"Transaction rejected"}`),D(""),Xe(null),Ht(0),jt(null),ho(null))},[x]);const dd=$=>{const q={};return $.forEach((j,Z)=>{j.forEach((oe,De)=>{q[`${Z}_${De}`]=oe})}),q},hd=$=>{if(!$||!$.positions)return console.warn("[BOARD] No board data available, using initial board"),qc;if(console.log("[BOARD] Attempting to reconstruct board from:",$),console.log("[BOARD] Positions type:",typeof $.positions),console.log("[BOARD] Positions is array:",Array.isArray($.positions)),console.log("[BOARD] Positions value:",$.positions),typeof $.positions=="object"&&!Array.isArray($.positions)){const q=$.positions,j=$.rows||8,Z=$.cols||8,oe=Array(j).fill(null).map(()=>Array(Z).fill(null));for(let De=0;De<j;De++)for(let Ie=0;Ie<Z;Ie++){const Ge=`${De}_${Ie}`;oe[De][Ie]=q[Ge]||null}return console.log("[BOARD] Reconstructed from flat structure:",oe),oe}return Array.isArray($.positions)?(console.log("[BOARD] Found array structure, length:",$.positions.length),$.positions.length===8?$.positions.every((j,Z)=>{const oe=Array.isArray(j)&&j.length===8;return oe||console.warn(`[BOARD] Row ${Z} is invalid:`,j,"Type:",typeof j,"Length:",j==null?void 0:j.length),oe})?(console.log("[BOARD] Using legacy array structure"),$.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),qc):(console.warn("[BOARD] Array has wrong length:",$.positions.length,"expected 8"),qc)):(console.warn("[BOARD] Unknown board structure, using initial board:",$),qc)},mm=$=>`${$.slice(0,6)}...${$.slice(-4)}`,Us=$=>$&&$===$.toUpperCase()?"red":"blue",mb=($,q)=>$>=0&&$<8&&q>=0&&q<8,fd=($,q)=>{const j=q==="red"?"K":"k";let Z=-1,oe=-1;for(let Ie=0;Ie<8;Ie++){for(let Ge=0;Ge<8;Ge++)if($[Ie][Ge]===j){Z=Ie,oe=Ge;break}if(Z!==-1)break}return Z===-1?!1:yb(Z,oe,q==="red"?"blue":"red",$)},yb=($,q,j,Z)=>{if(!Z||!Array.isArray(Z)||Z.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",Z),!1;for(let oe=0;oe<8;oe++){if(!Z[oe]||!Array.isArray(Z[oe])||Z[oe].length!==8)return console.warn("[SAFETY] Invalid board row structure:",Z[oe]),!1;for(let De=0;De<8;De++){const Ie=Z[oe][De];if(Ie&&Us(Ie)===j&&Ne(Ie,oe,De,$,q,!1,j,Z,!0))return!0}}return!1},wb=($,q,j,Z,oe,De=H)=>{const Ie=De[$][q];if(!Ie)return!1;const Ge=De.map(ht=>[...ht]);return Ge[j][Z]=Ie,Ge[$][q]=null,fd(Ge,oe)},$T=($,q,j,Z,oe,De)=>{const Ie=$==="blue"?-1:1,Ge=$==="blue"?6:1;if(!mb(Z,oe)||$==="blue"&&Z>=q||$==="red"&&Z<=q)return!1;if(j===oe&&Z===q+Ie)return De[Z][oe]===null;if(j===oe&&q===Ge&&Z===q+2*Ie)return De[q+Ie][j]===null&&De[Z][oe]===null;if(Math.abs(j-oe)===1&&Z===q+Ie){const ht=De[Z][oe];if(ht!==null&&Us(ht)!==$)return!0;if(ht===null&&Si.lastPawnDoubleMove){const{row:Gt,col:Pt}=Si.lastPawnDoubleMove;if(Gt===q&&Pt===oe){const pr=De[q][oe];if(pr&&pr.toLowerCase()==="p"&&Us(pr)!==$)return!0}}}return!1},Tf=($,q,j,Z,oe)=>$===j||q===Z,V=($,q,j,Z)=>{const oe=Math.abs($-j),De=Math.abs(q-Z);return oe===2&&De===1||oe===1&&De===2},J=($,q,j,Z,oe)=>Math.abs($-j)===Math.abs(q-Z),ae=($,q,j,Z,oe)=>Tf($,q,j,Z)||J($,q,j,Z),se=($,q,j,Z,oe)=>{const De=Math.abs(q-Z),Ie=Math.abs(j-oe);if(De<=1&&Ie<=1)return!0;if(De===0&&Ie===2){if($==="blue"&&!Si.blueKingMoved){if(oe===6&&!Si.blueRooksMove.right||oe===2&&!Si.blueRooksMove.left)return!0}else if($==="red"&&!Si.redKingMoved&&(oe===6&&!Si.redRooksMove.right||oe===2&&!Si.redRooksMove.left))return!0}return!1},ne=($,q,j,Z,oe)=>{const De=$===j?0:(j-$)/Math.abs(j-$),Ie=q===Z?0:(Z-q)/Math.abs(Z-q);let Ge=$+De,ht=q+Ie;for(;Ge!==j||ht!==Z;){if(oe[Ge][ht]!==null)return!1;Ge+=De,ht+=Ie}return!0},Ne=($,q,j,Z,oe,De=!0,Ie=Us($),Ge=H,ht=!1)=>{if(!$||!mb(Z,oe))return!1;const Gt=Ge[Z][oe];if(Gt&&Us(Gt)===Ie)return!1;let Pt=!1;switch($.toUpperCase()){case"P":Pt=$T(Ie,q,j,Z,oe,Ge);break;case"R":Pt=Tf(q,j,Z,oe)&&ne(q,j,Z,oe,Ge);break;case"N":Pt=V(q,j,Z,oe);break;case"B":Pt=J(q,j,Z,oe)&&ne(q,j,Z,oe,Ge);break;case"Q":Pt=ae(q,j,Z,oe)&&ne(q,j,Z,oe,Ge);break;case"K":Pt=se(Ie,q,j,Z,oe);break}return!(!Pt||De&&wb(q,j,Z,oe,Ie,Ge))},Oe=($,q=H,j=re)=>{const Z=[],oe=q[$.row][$.col];if(!oe||Us(oe)!==j)return Z;const De=oe.toLowerCase();if(De==="p"){const Ie=j==="blue"?-1:1,Ge=j==="blue"?6:1,ht=$.row+Ie;if(ht>=0&&ht<8&&Ne(oe,$.row,$.col,ht,$.col,!0,j,q,!0)&&Z.push({row:ht,col:$.col}),$.row===Ge){const Gt=$.row+2*Ie;Gt>=0&&Gt<8&&Ne(oe,$.row,$.col,Gt,$.col,!0,j,q,!0)&&Z.push({row:Gt,col:$.col})}for(const Gt of[-1,1]){const Pt=$.col+Gt,pr=$.row+Ie;Pt>=0&&Pt<8&&pr>=0&&pr<8&&Ne(oe,$.row,$.col,pr,Pt,!0,j,q,!0)&&Z.push({row:pr,col:Pt})}}else if(De==="n"){const Ie=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Ge,ht]of Ie){const Gt=$.row+Ge,Pt=$.col+ht;Gt>=0&&Gt<8&&Pt>=0&&Pt<8&&Ne(oe,$.row,$.col,Gt,Pt,!0,j,q,!0)&&Z.push({row:Gt,col:Pt})}}else for(let Ie=0;Ie<8;Ie++)for(let Ge=0;Ge<8;Ge++)Ne(oe,$.row,$.col,Ie,Ge,!0,j,q,!0)&&Z.push({row:Ie,col:Ge});return Z},nt=($,q=H)=>{if(!fd(q,$))return!1;for(let j=0;j<8;j++)for(let Z=0;Z<8;Z++){const oe=q[j][Z];if(oe&&Us(oe)===$&&Oe({row:j,col:Z},q,$).length>0)return!1}return!0},Xt=($,q=H)=>{if(fd(q,$))return!1;for(let j=0;j<8;j++)for(let Z=0;Z<8;Z++){const oe=q[j][Z];if(oe&&Us(oe)===$&&Oe({row:j,col:Z},q,$).length>0)return!1}return!0},mn=($,q)=>{if(console.log("[CLICK] Square clicked:",{row:$,col:q}),console.log("[CLICK] Game mode:",Ae,"Player color:",me),console.log("[CLICK] Current player:",re,"Player color:",me),Ae!==Yn.ACTIVE||!me){console.log("[CLICK] Game not active or no player color");return}const j=H[$][q],Z=j?Us(j):null;if(console.log("[CLICK] Piece at square:",j,"Piece color:",Z),re!==me){console.log("[CLICK] Not player's turn. Current:",re,"Player:",me);return}if(j&&Z===me){Ce({row:$,col:q});const oe=Oe({row:$,col:q});ce(oe);return}if(le&&X.some(oe=>oe.row===$&&oe.col===q)){rr(le,{row:$,col:q}),Ce(null),ce([]);return}Ce(null),ce([])},rr=async($,q)=>{if(console.log("[PROMOTION DEBUG] makeMove called with:",{from:$,to:q,playerColor:me,currentPlayer:re}),!me||re!==me){console.log("[PROMOTION DEBUG] Early return - playerColor:",me,"currentPlayer:",re);return}const j=H[$.row][$.col];if(!j){console.log("[PROMOTION DEBUG] No piece at position:",$);return}if(console.log("[PROMOTION DEBUG] Piece:",j,"isPawn:",j.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] Current player:",re,"to.row:",q.row),console.log("[PROMOTION DEBUG] Player color:",me),console.log("[PROMOTION DEBUG] Promotion condition check:"),console.log("[PROMOTION DEBUG] - piece.toUpperCase() === P:",j.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - currentPlayer === red && to.row === 7:",re==="red"&&q.row===7),console.log("[PROMOTION DEBUG] - currentPlayer === blue && to.row === 0:",re==="blue"&&q.row===0),console.log("[PROMOTION DEBUG] - Full condition:",j.toUpperCase()==="P"&&(re==="red"&&q.row===7||re==="blue"&&q.row===0)),j.toUpperCase()==="P"&&(re==="red"&&q.row===7||re==="blue"&&q.row===0)){console.log("[PROMOTION] Showing promotion dialog for piece:",j,"at position:",q),Yo({from:$,to:q}),pm(!0);return}await rn($,q)},rn=async($,q,j="q")=>{if(!me||re!==me||!H[$.row][$.col])return;const De=H[q.row][q.col]!==null;if(bb(De?"capture":"move"),De){gb({row:q.row,col:q.col,show:!0}),setTimeout(()=>{ym($,q,j),gb(null)},500);return}ym($,q,j)},ym=async($,q,j="q")=>{if(!me||re!==me)return;const Z=H[$.row][$.col];if(!Z)return;const oe=H.map(Gt=>[...Gt]);let De=Z;console.log("[PROMOTION DEBUG] executeMoveAfterAnimation - checking promotion:"),console.log("[PROMOTION DEBUG] - piece:",Z,"isPawn:",Z.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - playerColor:",me,"to.row:",q.row),console.log("[PROMOTION DEBUG] - promotion condition:",Z.toUpperCase()==="P"&&(me==="red"&&q.row===7||me==="blue"&&q.row===0)),console.log("[PROMOTION DEBUG] - promotionPiece:",j),Z.toUpperCase()==="P"&&(me==="red"&&q.row===7||me==="blue"&&q.row===0)&&(De=me==="red"?j.toUpperCase():j.toLowerCase(),console.log("[PROMOTION DEBUG] - Promoting pawn to:",De)),Vte(oe,$,q,Z),oe[q.row][q.col]=De,oe[$.row][$.col]=null,Kte($,q,Z);const Ie=re==="blue"?"red":"blue";fd(oe,Ie)&&bb("check");let Ge="active",ht=null;nt(Ie,oe)?(Ge="finished",ht=re,ye(`${re==="red"?"Red":"Blue"} wins by checkmate!`),bb("checkmate"),qte(),console.log("[SCORE] Updating scores - Winner:",re,"Loser:",Ie),console.log("[SCORE] Contract game data:",M),console.log("[SCORE] Player game invite code:",N),M&&M.length>=2?(console.log("[SCORE] Using contract data for both players update"),await kT(re,M[0],M[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await v1(re===me?"win":"loss"),await Gl()),ht===me&&(console.log("[CONTRACT] Triggering automatic payout for winner:",ht),setTimeout(()=>{F()},2e3))):Xt(Ie,oe)&&(Ge="finished",ye("Game ended in stalemate"),console.log("[SCORE] Updating scores for draw"),await v1("draw"));try{if(!P){console.error("[BUG] inviteCode is missing when trying to update game!"),ye("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",P,"gameData:",{board:{positions:oe},current_player:Ie,game_state:Ge,winner:ht,last_move:{from:$,to:q}});const Pt={...await yr.getGame(P),board:{positions:dd(oe),rows:8,cols:8},current_player:Ie,game_state:Ge,winner:ht,last_move:{from:$,to:q}};console.log("[FIREBASE] Storing data in Firebase:",Pt),await yr.updateGame(P,Pt),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(Gt){console.error("[DATABASE] Error updating game:",Gt)}te(oe),ie(Ie),OT({from:$,to:q}),pm(!1),Yo(null)},qte=()=>{pb(!0),bb("victory"),Hl.current&&clearTimeout(Hl.current),Hl.current=setTimeout(()=>{pb(!1)},5e3)},Vte=($,q,j,Z)=>{Z.toLowerCase()==="k"&&Math.abs(q.col-j.col)===2&&(j.col===6?($[q.row][7]=null,$[q.row][5]=Us(Z)==="blue"?"r":"R"):j.col===2&&($[q.row][0]=null,$[q.row][3]=Us(Z)==="blue"?"r":"R")),Z.toLowerCase()==="p"&&Math.abs(q.col-j.col)===1&&$[j.row][j.col]===null&&Si.lastPawnDoubleMove&&Si.lastPawnDoubleMove.row===q.row&&Si.lastPawnDoubleMove.col===j.col&&($[q.row][j.col]=null)},Kte=($,q,j)=>{const Z={...Si};j.toLowerCase()==="k"?Us(j)==="blue"?Z.blueKingMoved=!0:Z.redKingMoved=!0:j.toLowerCase()==="r"&&(Us(j)==="blue"?($.col===0&&(Z.blueRooksMove.left=!0),$.col===7&&(Z.blueRooksMove.right=!0)):($.col===0&&(Z.redRooksMove.left=!0),$.col===7&&(Z.redRooksMove.right=!0))),j.toLowerCase()==="p"&&Math.abs($.row-q.row)===2?Z.lastPawnDoubleMove={row:q.row,col:q.col}:Z.lastPawnDoubleMove=null,PT(Z)},bb=$=>{if(g1)try{const q=new Audio(`/images/${$}.mp3`);q.volume=.3,q.play().catch(j=>console.warn("Audio play failed:",j))}catch(q){console.warn("Sound play failed:",q)}},Yte=async()=>{if(P)try{console.log("[RESET] Resetting corrupted game data for:",P);const $={board:{positions:dd(qc),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await yr.updateGame(P,$),console.log("[RESET] Successfully reset game data"),ye("Game reset successfully. You can now make moves.")}catch($){console.error("[RESET] Error resetting game data:",$),ye("Failed to reset game. Please try again.")}},ZU=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch($){console.error("Error checking stuck games:",$)}},Qte=async()=>{if(P)try{console.log("[INCONSISTENCY] Handling game state inconsistency for:",P);const $=await yr.getGame(P);if(!$){console.log("[INCONSISTENCY] Game not found in Firebase, resetting state"),we(Yn.LOBBY),D(""),Xe(null),Ht(0),jt(null),ye("");return}$.game_state==="active"&&$.red_player&&$.red_player!=="0x0000000000000000000000000000000000000000"&&r===$.red_player&&(console.log("[INCONSISTENCY] Player 2 found in Firebase but transaction not confirmed"),ye("Game state inconsistent. Please try joining again or contact support."),await yr.updateGame(P,{red_player:"0x0000000000000000000000000000000000000000",game_state:"waiting"}),we(Yn.LOBBY),D(""),Xe(null),Ht(0),jt(null),ye("Game reset. You can now try joining again."))}catch($){console.error("[INCONSISTENCY] Error handling game state inconsistency:",$),ye("Error handling game state. Please reload the page.")}},BT=async()=>{if(console.log("[FIX] Attempting to fix missing player data..."),!P||!r){console.log("[FIX] Missing inviteCode or address");return}try{const $=await yr.getGame(P);if(!$){console.log("[FIX] No game data found");return}if(console.log("[FIX] Current game data:",$),M&&Array.isArray(M)){const[q,j,Z,oe,De,Ie]=M;console.log("[FIX] Contract data for fixing:"),console.log("[FIX] - Contract player1 (blue):",q),console.log("[FIX] - Contract player2 (red):",j),console.log("[FIX] - Contract isActive:",Z),console.log("[FIX] - Firebase blue_player:",$.blue_player),console.log("[FIX] - Firebase red_player:",$.red_player),console.log("[FIX] - Firebase game_state:",$.game_state);let Ge=!1;const ht={};j&&j!=="0x0000000000000000000000000000000000000000"&&(!$.red_player||$.red_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing red player address in Firebase"),ht.red_player=j,Ge=!0),q&&q!=="0x0000000000000000000000000000000000000000"&&(!$.blue_player||$.blue_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing blue player address in Firebase"),ht.blue_player=q,Ge=!0),q&&j&&q!=="0x0000000000000000000000000000000000000000"&&j!=="0x0000000000000000000000000000000000000000"&&($.game_state==="waiting"||!$.game_state)&&(console.log("[FIX] Activating game in Firebase"),ht.game_state="active",ht.current_player="blue",Ge=!0),Z&&$.game_state!=="active"&&(console.log("[FIX] Syncing game state to active"),ht.game_state="active",Ge=!0),Ge?(console.log("[FIX] Updating Firebase with:",ht),await yr.updateGame(P,ht),console.log("[FIX] Firebase updated successfully")):console.log("[FIX] No missing player data to fix")}else console.log("[FIX] No contract data available for fixing")}catch($){console.error("[FIX] Error fixing missing player data:",$)}},Jte=async()=>{if(r)try{console.log("[SYNC] Checking for missing games for player:",r);const $=await CGe(r);if(console.log("[SYNC] Player game invite code from contract:",$),$&&$!=="0x000000000000"){if(await yr.getGame($))console.log("[SYNC] Game already exists in Firebase");else if(console.log("[SYNC] Game exists in contract but not in Firebase, syncing..."),typeof window<"u"&&window.ethereum){const j=new bx(window.ethereum),oe=await new lg(_o,Bd,j).games($);console.log("[SYNC] Contract game data:",oe);const[De,Ie,Ge,ht,Gt,Pt]=oe,pr={invite_code:$,game_title:`Game ${$.slice(-6)}`,bet_amount:Pt?Pt.toString():"0",blue_player:De,red_player:Ie,game_state:Ge?"active":"waiting",board:{positions:dd(qc),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:_o,is_public:!0,created_at:new Date().toISOString()};console.log("[SYNC] Creating Firebase game data:",pr),await yr.createGame(pr),console.log("[SYNC] Successfully synced game to Firebase"),setTimeout(()=>{Nf()},1e3)}}else console.log("[SYNC] No active game found in contract")}catch($){console.error("[SYNC] Error syncing missing games:",$)}},Zte=($,q)=>{if(!H||!Array.isArray(H)||H.length!==8||!H[$]||!Array.isArray(H[$])||H[$].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:$,col:q,board:H}),w.jsx("div",{className:"square error",children:w.jsx("div",{className:"error-indicator",children:"!"})},`${$}-${q}`);const j=H[$][q],Z=(le==null?void 0:le.row)===$&&(le==null?void 0:le.col)===q,oe=X.some(Ge=>Ge.row===$&&Ge.col===q),De=Mc&&(Mc.from.row===$&&Mc.from.col===q||Mc.to.row===$&&Mc.to.col===q),Ie=j&&j.toUpperCase()==="K"&&fd(H,Us(j));return w.jsxs("div",{className:`square ${Z?"selected":""} ${oe?"legal-move":""} ${De?"last-move":""} ${Ie?"square-in-check":""}`,onClick:()=>mn($,q),children:[j&&w.jsx("div",{className:"piece",style:{backgroundImage:HO[j]?`url(${HO[j]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),oe&&w.jsx("div",{className:"legal-move-indicator"})]},`${$}-${q}`)},Xte=()=>{if(console.log("[PROMOTION DEBUG] renderPromotionDialog called - showPromotion:",Mn,"promotionMove:",ud),!Mn||!ud)return console.log("[PROMOTION DEBUG] Not rendering dialog - showPromotion:",Mn,"promotionMove:",ud),null;const $=re==="blue"?["q","r","b","n"]:["Q","R","B","N"];return w.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:w.jsxs("div",{className:"promotion-content",children:[w.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),w.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:$.map(q=>w.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",q),rn(ud.from,ud.to,q),pm(!1),Yo(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:w.jsx("img",{src:HO[q],alt:q,style:{width:"40px",height:"40px"}})},q))})]})})},ene=()=>w.jsxs("div",{className:"piece-gallery",children:[w.jsx("h3",{children:"Chess Pieces"}),w.jsx("div",{className:"piece-gallery-grid",children:EGe.map($=>w.jsxs("div",{className:"piece-gallery-item",children:[w.jsx("img",{src:$.img,alt:$.name,className:"piece-gallery-img"}),w.jsx("div",{className:"piece-gallery-name",children:$.name}),w.jsx("div",{className:"piece-gallery-desc",children:$.desc})]},$.key))})]}),XU=()=>w.jsxs("div",{className:"chess-multiplayer-lobby",children:[w.jsx("h2",{children:"Multiplayer Chess Lobby"}),s?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"status-bar",children:["Connected: ",mm(r)]}),w.jsxs("div",{className:"lobby-content",children:[w.jsxs("div",{className:"open-games",children:[w.jsx("h3",{children:"Open Games"}),w.jsxs("div",{className:"games-list",children:[nr.map($=>w.jsxs("div",{className:"game-item",children:[w.jsxs("div",{className:"game-info",children:[w.jsx("div",{className:"game-id",children:$.game_title||"Untitled Game"}),w.jsxs("div",{className:"wager",children:["Wager: ",parseFloat($.bet_amount)," tDMT"]}),w.jsxs("div",{className:"title",children:["Created by: ",mm($.blue_player)]})]}),w.jsx("button",{className:"join-btn",onClick:()=>LT($.invite_code),children:"Join Game"})]},$.invite_code)),nr.length===0&&w.jsx("div",{className:"no-games",children:"No open games available"})]})]}),w.jsxs("div",{className:"actions",children:[w.jsx("button",{className:"create-btn",onClick:()=>ei(!0),disabled:$a,children:"Create New Game"}),w.jsx("button",{className:"resume-btn",onClick:ZU,style:{marginTop:"10px",background:"rgba(0, 255, 0, 0.1)",border:"2px solid #00ff00",color:"#00ff00",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"Check for Active Games"}),w.jsx("button",{onClick:Nf,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🔄 Refresh Lobby"})]}),$a&&w.jsxs("div",{className:"create-form",children:[w.jsx("h3",{children:"Create New Game"}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Wager (tDMT):"}),w.jsx("input",{type:"number",value:kc,onChange:$=>d1(Number($.target.value)),placeholder:"0.1",min:"0",step:"0.1"})]}),w.jsxs("div",{className:"form-actions",children:[w.jsx("button",{className:"create-confirm-btn",onClick:MT,disabled:kc<=0,children:"Create Game"}),w.jsx("button",{className:"cancel-btn",onClick:()=>ei(!1),children:"Cancel"})]})]})]})]}):w.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),tne=()=>w.jsxs("div",{className:"chess-multiplayer-waiting",children:[w.jsx("h2",{children:"Waiting for Opponent"}),w.jsxs("div",{className:"game-code",children:["Invite Code: ",w.jsx("strong",{children:P})]}),w.jsxs("div",{className:"game-info",children:[w.jsxs("p",{children:["Wager: ",fn," tDMT"]}),w.jsx("p",{children:"Share this invite code with your opponent"})]})]}),nne=()=>w.jsxs("div",{className:"chess-game",children:[w.jsxs("div",{className:"chess-header",children:[w.jsx("h2",{children:"♔ Multiplayer Chess"}),w.jsxs("div",{className:"chess-controls",children:[w.jsx("button",{onClick:b1,className:"theme-toggle-btn",title:"Toggle Dark Mode",children:"🌙"}),e&&w.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),w.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:"×"})]})]}),w.jsxs("div",{className:"game-info",children:[w.jsxs("div",{className:"game-status-section",children:[w.jsx("span",{className:`status ${ve.includes("Check")?"check-status":""}`,children:ve}),w.jsxs("span",{className:`current-player ${re==="red"?"red-turn":"blue-turn"}`,children:["Current: ",re==="red"?"♔ Red":"♔ Blue"]})]}),w.jsxs("div",{className:"game-details-section",children:[w.jsxs("span",{className:"wager-display",children:["💰 ",fn," tDMT"]}),Zt&&w.jsxs("span",{className:"opponent-info",children:["vs ",mm(Zt)]})]}),Ae===Yn.FINISHED&&w.jsx("button",{onClick:F,disabled:f,className:"claim-winnings-btn",children:f?"⏳ Claiming...":"🏆 Claim Winnings"})]}),w.jsxs("div",{className:"game-stable-layout",children:[w.jsx("div",{className:"left-sidebar",children:w.jsxs("div",{className:"move-history",children:[w.jsx("h4",{children:"Move History"}),w.jsx("div",{className:"moves",children:fe.slice().reverse().map(($,q)=>w.jsx("div",{className:"move",children:$},fe.length-1-q))})]})}),w.jsxs("div",{className:"center-area",children:[w.jsxs("div",{className:"chessboard-container",children:[w.jsx("div",{className:"chessboard",children:Array.from({length:8},($,q)=>w.jsx("div",{className:"board-row",children:Array.from({length:8},(j,Z)=>Zte(q,Z))},q))}),gm&&gm.show&&w.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${gm.row*12.5}%`,left:`${gm.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:w.jsx("div",{className:"explosion-effect",children:"💥"})})]}),w.jsxs("div",{className:"game-controls",children:[w.jsxs("div",{className:"control-section",children:[w.jsx("button",{onClick:()=>xf(!fm),className:"gallery-toggle-btn",children:fm?"📚 Hide Gallery":"📚 Show Gallery"}),ve.includes("corrupted")&&w.jsx("button",{className:"reset-game-btn",onClick:Yte,children:"🔄 Reset Game"})]}),w.jsx("div",{className:"settings-section",children:w.jsxs("div",{className:"sound-controls",children:[w.jsxs("label",{className:"control-label",children:[w.jsx("input",{type:"checkbox",id:"sound-toggle",checked:g1,onChange:$=>m1($.target.checked),className:"control-checkbox"}),w.jsx("span",{className:"control-text",children:"🎵 Sound Effects"})]}),w.jsxs("label",{className:"control-label",children:[w.jsx("input",{type:"checkbox",id:"victory-toggle",checked:p1,onChange:$=>pb($.target.checked),className:"control-checkbox"}),w.jsx("span",{className:"control-text",children:"🎉 Victory Celebration"})]})]})}),d&&w.jsx("button",{className:"claim-winnings-btn",onClick:F,disabled:f||I||R,children:f||I||R?"⏳ Claiming...":"🏆 Claim Winnings"})]})]}),w.jsx("div",{className:"right-sidebar",children:w.jsxs("div",{className:"leaderboard",children:[w.jsx("h3",{children:"Leaderboard"}),w.jsx("div",{className:"leaderboard-table",children:w.jsxs("table",{children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"#"}),w.jsx("th",{children:"Player"}),w.jsx("th",{children:"W"}),w.jsx("th",{children:"L"}),w.jsx("th",{children:"D"}),w.jsx("th",{children:"Pts"})]})}),w.jsx("tbody",{children:y1.map(($,q)=>w.jsxs("tr",{children:[w.jsx("td",{children:q+1}),w.jsx("td",{children:$.username}),w.jsx("td",{children:$.wins}),w.jsx("td",{children:$.losses}),w.jsx("td",{children:$.draws}),w.jsx("td",{children:$.points})]},$.username))})]})})]})})]}),fm&&w.jsx("div",{className:"piece-gallery-panel",children:ene()}),Xte(),p1&&w.jsx("div",{className:"victory-celebration",children:w.jsxs("div",{className:"victory-content",children:[w.jsx("h2",{children:"🎉 Victory! 🎉"}),w.jsx("p",{children:"Congratulations on your win!"})]})})]}),rne=()=>w.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",background:"rgba(0,0,0,0.8)",color:"white",padding:"10px",borderRadius:"5px",fontSize:"12px",maxWidth:"300px",zIndex:9999,fontFamily:"monospace"},children:[w.jsx("h4",{style:{margin:"0 0 10px 0"},children:"🔧 Debug Panel"}),w.jsxs("div",{children:[w.jsx("strong",{children:"Wallet Address:"})," ",r||"Not connected"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Player Color:"})," ",me||"null"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Game Mode:"})," ",Ae]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Invite Code:"})," ",P||"none"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Wager:"})," ",fn]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Opponent:"})," ",Zt||"none"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Current Player:"})," ",re]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Contract Invite Code:"})," ",N||"none"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Contract Game Data:"})," ",M?"Available":"None"]}),w.jsxs("div",{children:[w.jsx("strong",{children:"Has Loaded Game:"})," ",g?"Yes":"No"]}),w.jsx("button",{onClick:()=>{console.log("=== MANUAL DEBUG TRIGGER ==="),console.log("Current state:",{address:r,playerColor:me,gameMode:Ae,inviteCode:P,wager:fn,opponent:Zt,currentPlayer:re,playerGameInviteCode:N,contractGameData:M,hasLoadedGame:g}),P&&yr.getGame(P).then($=>{console.log("Current Firebase game data:",$)})},style:{marginTop:"10px",padding:"5px 10px",background:"#007bff",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Log State"}),w.jsx("button",{onClick:Qte,style:{marginTop:"5px",padding:"5px 10px",background:"#dc3545",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Fix Game State"}),w.jsx("button",{onClick:BT,style:{marginTop:"5px",padding:"5px 10px",background:"#28a745",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Fix Player Data"}),w.jsx("button",{onClick:()=>{console.log("[MANUAL FIX] Manually triggering fix for current game..."),P?BT():console.log("[MANUAL FIX] No inviteCode available")},style:{marginTop:"5px",padding:"5px 10px",background:"#ffc107",color:"black",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Manual Fix Current Game"}),w.jsx("button",{onClick:Jte,style:{marginTop:"5px",padding:"5px 10px",background:"#17a2b8",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Sync Missing Games"}),w.jsx("button",{onClick:()=>{console.log("[MANUAL CLEAR] Clearing pending join data manually"),ho(null),console.log("[MANUAL CLEAR] Pending join data cleared")},style:{marginTop:"5px",padding:"5px 10px",background:"#6f42c1",color:"white",border:"none",borderRadius:"3px",cursor:"pointer"},children:"Clear Pending Join Data"})]});L.useEffect(()=>{Gl(),Nf(),ZU();const $=setInterval(Nf,3e4);return()=>{clearInterval($),Ba.current&&Ba.current(),Hl.current&&clearTimeout(Hl.current)}},[]),console.log("[RENDER] Current game mode:",Ae,"Game ID:",P);const sne=(()=>{switch(Ae){case Yn.LOBBY:return XU();case Yn.WAITING:return tne();case Yn.ACTIVE:case Yn.FINISHED:return nne();default:return XU()}})();return w.jsxs(w.Fragment,{children:[sne,rne()]})},GO={AI:"ai"},BA={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},rz=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],AGe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],SGe=()=>{const[t,e]=L.useState(!1),n=L.useRef(null),r=L.useRef(!1);L.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=L.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=L.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},IGe=()=>{const[t,e]=L.useState(null),[n,r]=L.useState(!1),s=L.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=L.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},xGe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=LC(),[s,i]=L.useState(GO.AI),[o,a]=L.useState(()=>JSON.parse(JSON.stringify(rz))),[c,l]=L.useState("blue"),[u,d]=L.useState(null),[h,f]=L.useState("active"),[p,g]=L.useState("hard"),[y,m]=L.useState("Connect wallet to play"),[b,v]=L.useState([]),[A,C]=L.useState([]),[S,x]=L.useState([]),[T,I]=L.useState(null),[k,O]=L.useState(!1),[B,G]=L.useState(!1),[W,R]=L.useState(null),[N,M]=L.useState(null),[P]=L.useState(""),[D]=L.useState(.1),[F,H]=L.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),te=L.useRef(null),re=L.useRef(!1),ie=L.useRef(o),le=L.useRef(null),Ce=L.useRef(null),X=L.useRef(!1),ce=L.useRef(!1),[fe,de]=L.useState(!1),[ve,ye]=L.useState(!1),[Ae,we]=L.useState(!1),[me,Xe]=L.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),Zt=()=>{Xe(V=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!V)),!V))},{stockfishReady:jt}=SGe(),{getOpeningData:fn}=IGe(),[Ht,nr]=L.useState("loading"),[uo,$a]=L.useState(!1),[ei,En]=L.useState([]),[Lr,_n]=L.useState(!1),[ho,Wl]=L.useState("/images/chessboard1.png"),[u1,kc]=L.useState(!0),[d1,h1]=L.useState(!1),f1=()=>{const V=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],J=Math.floor(Math.random()*V.length),ae=V[J];return console.log("[DEBUG] Random chessboard selected:",ae,"(index:",J,")"),ae};L.useEffect(()=>{if(jt)nr("ready");else{const V=window.setTimeout(()=>{jt||(nr("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(V)}},[jt]),L.useEffect(()=>{ie.current=o},[o]),L.useEffect(()=>{r?m("Select game mode"):(m("Connect wallet to play"),O(!1))},[r]),L.useEffect(()=>(!te.current&&typeof Worker<"u"&&(te.current=new Worker("/aiWorker.js"),te.current.onmessage=V=>{console.log("[DEBUG] AI worker response received:",V.data);const{move:J,nodes:ae}=V.data;J&&re.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",J),console.log("[DEBUG] AI searched",ae,"nodes"),re.current=!1,Ce.current&&(window.clearTimeout(Ce.current),Ce.current=null),le.current&&le.current(J.from,J.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},te.current.onerror=V=>{console.error("[DEBUG] AI worker error:",V),m("AI worker error - using fallback mode"),re.current=!1}),()=>{te.current&&(te.current.terminate(),te.current=null),Ce.current&&(window.clearTimeout(Ce.current),Ce.current=null)}),[]),L.useEffect(()=>{fm()},[]);const fm=async()=>{try{const V=await ZX(20);C(V),console.log("Leaderboard data loaded:",V)}catch(V){m("Failed to load leaderboard"),console.error("Leaderboard error:",V)}},xf=async V=>{if(console.log("[DEBUG] updateScore called with:",V),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Bg(r)),await ox(r,V)?(console.log("[DEBUG] Successfully updated score for:",Bg(r)),await fm()):console.error("[DEBUG] Failed to update score")}catch(J){console.error("[DEBUG] Error in updateScore:",J)}},Mn=V=>V&&V===V.toUpperCase()?"red":"blue",pm=(V,J)=>V>=0&&V<8&&J>=0&&J<8,ud=(V,J)=>`${String.fromCharCode(97+J)}${8-V}`,Yo=(V,J)=>{const ae=J==="blue"?"k":"K";let se=null;for(let Oe=0;Oe<8;Oe++){for(let nt=0;nt<8;nt++)if(V[Oe][nt]===ae){se={row:Oe,col:nt};break}if(se)break}if(!se)return console.log(`King not found for ${J}`),!1;const ne=J==="blue"?"red":"blue",Ne=p1(se.row,se.col,ne,V);return console.log(`${J} king at ${se.row},${se.col} under attack: ${Ne}`),Ne},p1=(V,J,ae,se)=>{for(let ne=0;ne<8;ne++)for(let Ne=0;Ne<8;Ne++){const Oe=se[ne][Ne];if(Oe&&Mn(Oe)===ae&&Dc(Oe,ne,Ne,V,J,!1,ae,se,!0))return!0}return!1},pb=(V,J,ae,se,ne,Ne=o)=>{const Oe=Ne.map(Xt=>[...Xt]),nt=Oe[V][J];return Oe[ae][se]=nt,Oe[V][J]=null,Yo(Oe,ne)},g1=(V,J,ae,se,ne,Ne)=>{const Oe=V==="blue"?-1:1,nt=V==="blue"?6:1;if(!pm(se,ne)||V==="blue"&&se>=J||V==="red"&&se<=J)return!1;const Xt=Math.abs(se-J),mn=Math.abs(ne-ae);if((Xt===1&&mn===0||Xt===2&&mn===0&&J===nt||Xt===1&&mn===1)&&Xt<=2&&mn<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:V,from:`${J},${ae}`,to:`${se},${ne}`}),ae===ne&&se===J+Oe)return Ne[se][ne]===null;if(ae===ne&&J===nt&&se===J+2*Oe)return Ne[J+Oe][ae]===null&&Ne[se][ne]===null;if(Math.abs(ae-ne)===1&&se===J+Oe){const rn=Ne[se][ne];return rn!==null&&Mn(rn)!==V}if(Math.abs(ae-ne)===1&&se===J+Oe){const rn=Ne[J][ne];if(rn&&Mn(rn)!==V&&rn.toLowerCase()==="p"&&F.lastPawnDoubleMove&&F.lastPawnDoubleMove.row===J&&F.lastPawnDoubleMove.col===ne)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},m1=(V,J,ae,se,ne)=>V!==ae&&J!==se?!1:y1(V,J,ae,se,ne),gm=(V,J,ae,se)=>{const ne=Math.abs(V-ae),Ne=Math.abs(J-se);return ne===2&&Ne===1||ne===1&&Ne===2},gb=(V,J,ae,se,ne)=>Math.abs(V-ae)!==Math.abs(J-se)?!1:y1(V,J,ae,se,ne),Si=(V,J,ae,se,ne)=>m1(V,J,ae,se,ne)||gb(V,J,ae,se,ne),PT=(V,J,ae,se,ne)=>{const Ne=Math.abs(J-se),Oe=Math.abs(ae-ne);if(Ne<=1&&Oe<=1)return!0;if(Ne===0&&Oe===2){if(V==="blue"&&!F.blueKingMoved){if(ne===6&&!F.blueRooksMove.right||ne===2&&!F.blueRooksMove.left)return!0}else if(V==="red"&&!F.redKingMoved&&(ne===6&&!F.redRooksMove.right||ne===2&&!F.redRooksMove.left))return!0}return!1},y1=(V,J,ae,se,ne)=>{const Ne=V===ae?0:(ae-V)/Math.abs(ae-V),Oe=J===se?0:(se-J)/Math.abs(se-J);let nt=V+Ne,Xt=J+Oe;for(;nt!==ae||Xt!==se;){if(ne[nt][Xt]!==null)return!1;nt+=Ne,Xt+=Oe}return!0},Dc=(V,J,ae,se,ne,Ne=!0,Oe=Mn(V),nt=o,Xt=!1)=>{if(!pm(se,ne))return Xt||console.log("[ILLEGAL MOVE] Out of board:",{piece:V,startRow:J,startCol:ae,endRow:se,endCol:ne}),!1;const mn=nt[se][ne];if(mn&&Mn(mn)===Oe)return Xt||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:V,startRow:J,startCol:ae,endRow:se,endCol:ne}),!1;const rr=V.toLowerCase();let rn=!1;switch(rr){case"p":rn=g1(Oe,J,ae,se,ne,nt);break;case"r":rn=m1(J,ae,se,ne,nt);break;case"n":rn=gm(J,ae,se,ne);break;case"b":rn=gb(J,ae,se,ne,nt);break;case"q":rn=Si(J,ae,se,ne,nt);break;case"k":rn=PT(Oe,J,ae,se,ne);break}return rn?rn&&Ne&&pb(J,ae,se,ne,Oe,nt)?(Xt||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:V,startRow:J,startCol:ae,endRow:se,endCol:ne}),!1):rn:(Xt||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:V,startRow:J,startCol:ae,endRow:se,endCol:ne,playerColor:Oe,pieceType:rr,targetPiece:nt[se][ne],targetPieceColor:nt[se][ne]?Mn(nt[se][ne]):null}),!1)},Mc=(V,J=o,ae=c)=>{const se=[],ne=J[V.row][V.col];if(!ne||Mn(ne)!==ae)return se;const Ne=ne.toLowerCase();if(Ne==="p"){const Oe=ae==="blue"?-1:1,nt=ae==="blue"?6:1,Xt=V.row+Oe;if(Xt>=0&&Xt<8&&Dc(ne,V.row,V.col,Xt,V.col,!0,ae,J,!0)&&se.push({row:Xt,col:V.col}),V.row===nt){const mn=V.row+2*Oe;mn>=0&&mn<8&&Dc(ne,V.row,V.col,mn,V.col,!0,ae,J,!0)&&se.push({row:mn,col:V.col})}for(const mn of[-1,1]){const rr=V.col+mn,rn=V.row+Oe;rr>=0&&rr<8&&rn>=0&&rn<8&&Dc(ne,V.row,V.col,rn,rr,!0,ae,J,!0)&&se.push({row:rn,col:rr})}}else if(Ne==="n"){const Oe=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[nt,Xt]of Oe){const mn=V.row+nt,rr=V.col+Xt;mn>=0&&mn<8&&rr>=0&&rr<8&&Dc(ne,V.row,V.col,mn,rr,!0,ae,J,!0)&&se.push({row:mn,col:rr})}}else for(let Oe=0;Oe<8;Oe++)for(let nt=0;nt<8;nt++)Dc(ne,V.row,V.col,Oe,nt,!0,ae,J,!0)&&se.push({row:Oe,col:nt});return se},OT=(V,J=o)=>{if(!Yo(J,V))return!1;for(let ae=0;ae<8;ae++)for(let se=0;se<8;se++){const ne=J[ae][se];if(ne&&Mn(ne)===V&&Mc({row:ae,col:se},J,V).length>0)return!1}return!0},Ba=(V,J=o)=>{if(Yo(J,V))return!1;for(let ae=0;ae<8;ae++)for(let se=0;se<8;se++){const ne=J[ae][se];if(ne&&Mn(ne)===V&&Mc({row:ae,col:se},J,V).length>0)return!1}return!0},Hl=(V,J)=>{if(h!=="active"||re.current)return;const ae=o[V][J],se=ae?Mn(ae):null;if(u&&S.some(ne=>ne.row===V&&ne.col===J)){Fa(u,{row:V,col:J});return}if(ae&&se===c){const ne=Mc({row:V,col:J});d({row:V,col:J}),x(ne);return}d(null),x([])},Fa=(V,J,ae=!1)=>{const se=o[V.row][V.col];if(console.log("[MOVE ATTEMPT]",{from:V,to:J,piece:se,isAIMove:ae,board:JSON.parse(JSON.stringify(o)),moveHistory:b}),!!se){if(se.toLowerCase()==="p"&&(Mn(se)==="blue"&&J.row===0||Mn(se)==="red"&&J.row===7)){R({from:V,to:J}),G(!0);return}E1(V,J,"q",ae)}};le.current=Fa;const w1=L.useCallback((V,J,ae=!1)=>{_n(!0);const se=o.map(Oe=>[...Oe]),ne=se[V.row][V.col];if(!ne)return;se[J.row][J.col]=ne,se[V.row][V.col]=null,YU(se,V,J,ne);const Ne=QU(V,J);if(v(Oe=>{const nt=[...Oe,Ne];return console.log("[MOVE HISTORY UPDATED]",nt),nt}),I({from:V,to:J}),d(null),x([]),b.length<10&&!ae){const Oe=sz(se,c==="blue"?"red":"blue");fn(Oe).then(nt=>{nt&&nt.moves&&nt.moves.length>0&&(En(nt.moves.slice(0,3)),$a(!0),setTimeout(()=>$a(!1),5e3))})}JU(V,J,ne),l(Oe=>{const nt=Oe==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",nt),b1(se,nt),nt}),b1(se,c==="blue"?"red":"blue"),a(se),re.current=!1,X.current=!1,ce.current=!1,_n(!1)},[o,c,b,fn]);L.useEffect(()=>{if(!re.current&&s==="ai"&&c==="red"&&!X.current&&!Lr)if(re.current=!0,p==="easy")setTimeout(()=>{const V=Gl(o);V?Fa(V.from,V.to,!0):re.current=!1},600);else{m("AI is calculating...");const V=sz(o,c);if(ce.current)return;ce.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:V,difficulty:p,movetime:3e3})}).then(ae=>{if(ae.ok)return ae.json();throw new Error("API call failed")}).then(ae=>{console.log("[DEBUG] Stockfish API response:",ae);const se=ae.bestmove||ae.move;if(se&&se!=="(none)"&&se.length===4){const ne=se.charCodeAt(0)-97,Ne=parseInt(se[1]),Oe=se.charCodeAt(2)-97,nt=parseInt(se[3]),Xt=8-Ne,mn=8-nt;if(console.log("[DEBUG] Parsed move:",{fromCol:ne,fromRowStockfish:Ne,toCol:Oe,toRowStockfish:nt,fromRow:Xt,toRow:mn}),ne>=0&&ne<8&&Xt>=0&&Xt<8&&Oe>=0&&Oe<8&&mn>=0&&mn<8){const rr={from:{row:Xt,col:ne},to:{row:mn,col:Oe}},rn=o[Xt][ne];if(console.log("[DEBUG] Move validation:",{piece:rn,moveObj:rr,isValid:rn&&Mn(rn)==="red"&&Dc(rn,Xt,ne,mn,Oe,!0,"red",o)}),rn&&Mn(rn)==="red"&&Dc(rn,Xt,ne,mn,Oe,!0,"red",o))console.log("[DEBUG] Executing Stockfish move:",rr),Fa(rr.from,rr.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const ym=Gl(o);ym&&Fa(ym.from,ym.to,!0),re.current=!1,ce.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const rr=Gl(o);rr&&Fa(rr.from,rr.to,!0),re.current=!1,ce.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const ne=Gl(o);ne&&Fa(ne.from,ne.to,!0),re.current=!1,ce.current=!1}}).catch(ae=>{console.error("[DEBUG] Stockfish API error:",ae),m("AI error. Falling back to random moves.");const se=Gl(o);se&&Fa(se.from,se.to,!0),re.current=!1,ce.current=!1})}},[c,s,p,o,F,jt]);const b1=(V,J)=>{console.log("Checking game end for player:",J);const ae=V.some(ne=>ne.some(Ne=>Ne==="k")),se=V.some(ne=>ne.some(Ne=>Ne==="K"));if(!ae)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),m("King captured! Red wins!"),xf("loss"),we(!0),setTimeout(()=>we(!1),3e3),"checkmate";if(!se)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),m("King captured! You win!"),xf("win"),we(!0),setTimeout(()=>we(!1),3e3),"checkmate";if(console.log("Is king in check:",Yo(V,J)),OT(J,V)){console.log("[GAME END] CHECKMATE",{winner:J==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(V)),moveHistory:b}),f("checkmate");const ne=J==="blue"?"red":"blue";return ne==="blue"?(m("Checkmate! You win!"),fo("checkmate"),mm(!0),dd(),xf("win"),we(!0),setTimeout(()=>we(!1),3e3)):(m(`Checkmate! ${ne==="red"?"AI":"Opponent"} wins!`),fo("checkmate"),mb(!0),xf("loss"),we(!0),setTimeout(()=>we(!1),3e3)),"checkmate"}return Ba(J,V)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(V)),moveHistory:b}),f("stalemate"),m("Stalemate! Game is a draw."),xf("draw"),we(!0),setTimeout(()=>we(!1),3e3),"stalemate"):(Yo(V,J)?(console.log("CHECK detected!"),fo("check"),m(`${J==="blue"?"Blue":"Red"} is in check!`)):m("Your turn"),null)},Gl=V=>{const J=[];for(let ne=0;ne<8;ne++)for(let Ne=0;Ne<8;Ne++){const Oe=V[ne][Ne];Oe&&Mn(Oe)==="red"&&J.push({row:ne,col:Ne})}for(let ne=J.length-1;ne>0;ne--){const Ne=Math.floor(Math.random()*(ne+1));[J[ne],J[Ne]]=[J[Ne],J[ne]]}const ae=[],se=[];for(const ne of J){const Ne=Mc(ne,V,"red");for(const Oe of Ne){const nt=V[Oe.row][Oe.col];if(nt&&Mn(nt)==="blue"){const mn={p:100,n:320,b:330,r:500,q:900,k:2e4}[nt.toLowerCase()]||0;ae.push({from:ne,to:Oe,value:mn})}else se.push({from:ne,to:Oe})}}if(ae.length>0&&Math.random()<.3){ae.sort((ne,Ne)=>ne.value-Ne.value);for(const ne of ae){const Ne=V.map(nt=>[...nt]),Oe=Ne[ne.from.row][ne.from.col];if(Ne[ne.to.row][ne.to.col]=Oe,Ne[ne.from.row][ne.from.col]=null,!Yo(Ne,"red"))return{from:ne.from,to:ne.to}}}for(const ne of se){const Ne=V.map(nt=>[...nt]),Oe=Ne[ne.from.row][ne.from.col];if(Ne[ne.to.row][ne.to.col]=Oe,Ne[ne.from.row][ne.from.col]=null,!Yo(Ne,"red"))return ne}ae.sort((ne,Ne)=>ne.value-Ne.value);for(const ne of ae){const Ne=V.map(nt=>[...nt]),Oe=Ne[ne.from.row][ne.from.col];if(Ne[ne.to.row][ne.to.col]=Oe,Ne[ne.from.row][ne.from.col]=null,!Yo(Ne,"red"))return{from:ne.from,to:ne.to}}return null},v1=()=>{a(JSON.parse(JSON.stringify(rz))),l("blue"),d(null),f("active"),v([]),x([]),I(null),O(!1),m("Select game mode"),H({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),Wl(f1()),re.current&&(re.current=!1)},kT=()=>{if($T(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){O(!1),de(!1);return}O(!0),de(!1),m("Game started! Your turn");const V=f1();Wl(V),console.log("[DEBUG] Game started with chessboard:",V)},Nf=V=>`${V.slice(0,6)}...${V.slice(-4)}`,DT=(V,J)=>{const ae=o[V][J],se=(u==null?void 0:u.row)===V&&(u==null?void 0:u.col)===J,ne=S.some(Oe=>Oe.row===V&&Oe.col===J),Ne=T&&(T.from.row===V&&T.from.col===J||T.to.row===V&&T.to.col===J);return w.jsxs("div",{className:`square ${se?"selected":""} ${ne?"legal-move":""} ${Ne?"last-move":""}`,onClick:()=>Hl(V,J),children:[ae&&w.jsx("div",{className:"piece",style:{backgroundImage:BA[ae]?`url(${BA[ae]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ne&&w.jsx("div",{className:"legal-move-indicator"})]},`${V}-${J}`)},MT=()=>{if(!B||!W)return null;const V=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return w.jsx("div",{className:"promotion-dialog",children:w.jsxs("div",{className:"promotion-content",children:[w.jsx("h3",{children:"Choose promotion piece:"}),w.jsx("div",{className:"promotion-pieces",children:V.map(J=>w.jsx("div",{className:"promotion-piece",onClick:()=>{E1(W.from,W.to,J),G(!1),R(null)},style:{backgroundImage:BA[J]?`url(${BA[J]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},J))})]})})},[LT,VU]=L.useState(null),UT=(V=!1,J="Click a piece to learn more about it.")=>w.jsxs("div",{className:`piece-gallery${V?" piece-gallery-sm":""}`,children:[w.jsx("h3",{children:"Lawbstation Chess Pieces"}),w.jsx("div",{className:"piece-gallery-grid",children:AGe.map(ae=>w.jsxs("div",{className:"piece-gallery-item",onClick:()=>VU(ae.key),children:[w.jsx("img",{src:ae.img,alt:ae.name,className:"piece-gallery-img"}),w.jsx("div",{className:"piece-gallery-name",children:ae.name}),LT===ae.key&&w.jsx("div",{className:"piece-gallery-desc",children:ae.desc})]},ae.key))}),w.jsx("div",{className:"piece-gallery-tip",children:J})]}),KU=()=>w.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:w.jsx("div",{className:"difficulty-controls-col",children:w.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[w.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),w.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",w.jsx("br",{}),"Good luck, have fun!"]}),w.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[w.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),w.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),w.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{kT()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[w.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),YU=(V,J,ae,se)=>{if(se.toLowerCase()==="p"&&(Mn(se)==="blue"&&ae.row===0||Mn(se)==="red"&&ae.row===7)){const ne=Mn(se)==="blue"?"q":"Q";V[ae.row][ae.col]=ne}se.toLowerCase()==="k"&&Math.abs(J.col-ae.col)===2&&(ae.col===6?(V[J.row][7]=null,V[J.row][5]=Mn(se)==="blue"?"r":"R"):ae.col===2&&(V[J.row][0]=null,V[J.row][3]=Mn(se)==="blue"?"r":"R"))},QU=(V,J,ae,se)=>{const ne=ud(V.row,V.col),Ne=ud(J.row,J.col);return`${ne}-${Ne}`},JU=(V,J,ae)=>{const se={...F};ae.toLowerCase()==="k"?Mn(ae)==="blue"?se.blueKingMoved=!0:se.redKingMoved=!0:ae.toLowerCase()==="r"&&(Mn(ae)==="blue"?(V.col===0&&(se.blueRooksMove.left=!0),V.col===7&&(se.blueRooksMove.right=!0)):(V.col===0&&(se.redRooksMove.left=!0),V.col===7&&(se.redRooksMove.right=!0))),ae.toLowerCase()==="p"&&Math.abs(V.row-J.row)===2?se.lastPawnDoubleMove={row:J.row,col:J.col}:se.lastPawnDoubleMove=null,H(se)},E1=(V,J,ae="q",se=!1)=>{o[V.row][V.col];const Ne=o[J.row][J.col]!==null;if(fo(Ne?"capture":"move"),Ne){M({row:J.row,col:J.col,show:!0}),setTimeout(()=>{w1(V,J,se),M(null)},500);return}w1(V,J,se)},fo=V=>{if(!u1)return;let J="";switch(V){case"move":J="/images/move.mp3";break;case"capture":J="/images/capture.mp3";break;case"check":J="/images/play.mp3";break;case"checkmate":J="/images/victory.mp3";break;case"victory":J="/images/victory.mp3";break;default:J="/images/move.mp3"}new Audio(J).play().catch(()=>{})},dd=()=>{if(d1){fo("victory");for(let V=0;V<50;V++)setTimeout(()=>{const J=document.createElement("div");J.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(J),setTimeout(()=>J.remove(),3e3)},V*100);setTimeout(()=>h1(!1),5e3)}},[hd,mm]=L.useState(!1),[Us,mb]=L.useState(!1),fd=()=>{mm(!1),mb(!1)},yb=()=>{fd(),v1()},wb=()=>{fd(),O(!1)},$T=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Tf=s==="online";return w.jsxs("div",{className:`chess-game${n?" fullscreen":""}${me?" chess-dark-mode":""}`,children:[!n&&w.jsxs("div",{className:"chess-header",children:[w.jsx("h2",{children:"Lawb Chess"}),w.jsxs("div",{className:"chess-controls",children:[w.jsx("button",{className:"dark-mode-toggle",onClick:Zt,title:me?"Switch to light mode":"Switch to dark mode","aria-label":me?"Switch to light mode":"Switch to dark mode",children:me?"☀️":"🌙"}),e&&w.jsx("button",{onClick:e,children:"_"}),w.jsx("button",{onClick:t,children:"×"})]})]}),w.jsxs("div",{className:"game-stable-layout",children:[w.jsxs("div",{className:"left-sidebar",children:[w.jsxs("div",{className:"leaderboard-compact",children:[w.jsx("h3",{children:"Leaderboard"}),w.jsx("div",{className:"leaderboard-table-compact",children:w.jsxs("table",{children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{children:"Rank"}),w.jsx("th",{children:"Player"}),w.jsx("th",{children:"Pts"})]})}),w.jsx("tbody",{children:Array.isArray(A)&&A.slice(0,8).map((V,J)=>{if(typeof V=="object"&&V!==null&&"username"in V&&"wins"in V&&"losses"in V&&"draws"in V&&"points"in V){const ae=V;return w.jsxs("tr",{children:[w.jsx("td",{children:J+1}),w.jsx("td",{children:Nf(ae.username)}),w.jsx("td",{children:ae.points})]},ae.username)}return null})})]})})]}),k&&w.jsxs("div",{className:"move-history-compact",children:[w.jsx("div",{className:"move-history-title",children:"Moves"}),w.jsx("ul",{className:"move-history-list-compact",children:b.slice().reverse().map((V,J)=>w.jsx("li",{children:V},b.length-1-J))})]})]}),w.jsxs("div",{className:"center-area",children:[k&&w.jsxs("div",{className:"game-info-compact",children:[w.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:[c==="blue"?"Blue":"Red"," to move"]}),s===GO.AI&&w.jsxs("span",{className:"mode-play",children:[p==="easy"?"Easy":"Hard"," AI"]}),Tf&&w.jsxs("span",{className:"wager-display",children:["Wager: ",D," ETH"]})]}),k?w.jsxs("div",{className:"chess-main-area",children:[w.jsx("div",{className:"chessboard-container",children:w.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${ho})`},children:[Array.from({length:8},(V,J)=>w.jsx("div",{className:"board-row",children:Array.from({length:8},(ae,se)=>DT(J,se))},J)),N&&N.show&&w.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${N.row*12.5}%`,left:`${N.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:w.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),w.jsxs("div",{className:"game-controls-compact",children:[w.jsx("button",{onClick:yb,children:"New Game"}),w.jsx("button",{onClick:wb,children:"Menu"}),w.jsx("button",{onClick:()=>ye(!0),children:"Pieces"})]})]}):fe?KU():Tf?w.jsx(Gte,{onClose:t,onMinimize:e,fullscreen:n}):w.jsxs("div",{className:"game-mode-panel-streamlined",children:[w.jsxs("div",{className:"mode-selection-compact",children:[w.jsx("button",{className:`mode-btn-compact ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS AI"}),w.jsx("button",{className:`mode-btn-compact ${Tf?"selected":""}`,onClick:()=>i("online"),children:"PvP"})]}),s===GO.AI&&w.jsx("button",{className:"start-btn-compact",onClick:()=>de(!0),children:"Start Game"}),Tf&&w.jsxs("div",{className:"pvp-info",children:[w.jsx("p",{children:"Challenge other players with ETH wagers"}),w.jsx("p",{children:"Create or join games instantly"})]}),w.jsxs("div",{className:"help-section-compact",children:[w.jsx("h4",{children:"How to Play"}),w.jsxs("div",{className:"help-content",children:[w.jsxs("p",{children:[w.jsx("strong",{children:"Chess:"})," Capture your opponent's king. Each piece moves uniquely - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Multiplayer:"})," Connect your wallet to play PvP games with ETH wagers. Win games to claim your opponent's wager and climb the leaderboard."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"AI Mode:"})," Practice against our LawbBot AI. Choose Easy or Hard difficulty. Wins earn points on the leaderboard."]})]})]})]})]}),w.jsx("div",{className:"right-sidebar",children:w.jsx("div",{className:"piece-gallery-panel",children:UT(!0)})})]}),ve&&w.jsx("div",{className:"gallery-modal-overlay",onClick:()=>ye(!1),children:w.jsxs("div",{className:"gallery-modal",onClick:V=>V.stopPropagation(),children:[w.jsx("button",{className:"close-modal-btn",onClick:()=>ye(!1),children:"×"}),UT(!1)]})}),MT(),Ae&&w.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),hd&&d1&&w.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[w.jsx("div",{className:"balloons-container"}),w.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),w.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[w.jsx("button",{onClick:yb,children:"New Game"}),w.jsx("button",{onClick:wb,children:"Back to Menu"})]})]}),Us&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(V=>w.jsx("div",{className:"blood-drip",style:{left:`${10+V*14}%`,animationDelay:`${.5+V*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},V))}),w.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[w.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),w.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[w.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:yb,children:"New Game"}),w.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:wb,children:"Back to Menu"})]})]})]})]})};function sz(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const iz=()=>{const[t,e]=L.useState("singleplayer");return w.jsx("div",{className:"chess-page",children:w.jsx("div",{className:"chess-content",children:t==="singleplayer"?w.jsx(xGe,{onClose:()=>{}}):w.jsx(Gte,{onClose:()=>{},onMinimize:()=>{},fullscreen:!1})})})},NGe=new Kye,TGe=typeof window<"u"&&window.location.hostname.startsWith("chess."),RGe=()=>nFe("(max-width: 768px)")?w.jsx(tFe,{}):w.jsx(V4e,{});d2.createRoot(document.getElementById("root")).render(w.jsx(Lo.StrictMode,{children:w.jsx(uye,{config:QX.wagmiConfig,children:w.jsx(fwe,{client:NGe,children:w.jsx(G4e,{children:w.jsx(z4e,{children:TGe?w.jsx(vS,{path:"/*",element:w.jsx(iz,{})}):w.jsxs(w.Fragment,{children:[w.jsx(vS,{path:"/",element:w.jsx(RGe,{})}),w.jsx(vS,{path:"/chess",element:w.jsx(iz,{})})]})})})})})}));export{rVe as $,Ye as A,ft as B,Fe as C,ot as D,Qv as E,ND as F,pv as G,cc as H,v1e as I,Rn as J,oVe as K,C3 as L,ls as M,m1e as N,_e as O,Ed as P,mS as Q,Dt as R,fc as S,zi as T,J1e as U,Xv as V,Ts as W,tVe as X,cs as Y,Gg as Z,ul as _,wS as a,vX as a0,A3 as a1,A0 as a2,qs as a3,JGe as a4,ku as a5,Dl as a6,n_ as a7,tt as a8,Fr as a9,wz as aA,zGe as aB,BE as aC,Nde as aD,Zme as aE,Da as aF,Oa as aG,fK as aH,Jpe as aI,zd as aa,oK as ab,vN as ac,ge as ad,qM as ae,Kr as af,jhe as ag,pN as ah,rL as ai,qhe as aj,OC as ak,Na as al,Af as am,Wv as an,kl as ao,vke as ap,Wqe as aq,vF as ar,JJ as as,uke as at,Eke as au,Hqe as av,zqe as aw,tT as ax,Vqe as ay,Gqe as az,On as b,je as c,it as d,z as e,or as f,Du as g,iVe as h,zu as i,ko as j,pt as k,Wi as l,s2e as m,bl as n,l8e as o,Qe as p,hl as q,sVe as r,pn as s,NQ as t,er as u,r4 as v,Ko as w,eVe as x,Xs as y,Js as z};
