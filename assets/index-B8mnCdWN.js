const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-Bon5jVSD.js","assets/if-defined-9Ncgd390.js","assets/index-D2unlcGd.js","assets/index-940dBy7U.js","assets/ref-DSxvHi7F.js","assets/index-CPRCdesv.js","assets/index-B2ssWjYt.js","assets/index-BuRdadHF.js","assets/index-BOC3Fcgt.js","assets/index-Lvri0FzR.js","assets/index-XzdPQeJP.js","assets/index-DjsH4SFD.js","assets/email-VlMd8wxj.js","assets/index-C4oSe479.js","assets/socials-IiIqdVlg.js","assets/index-CZB9eTOL.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-uM16FQ4w.js","assets/index-Db8bZIoe.js","assets/index-DIuDU8_x.js","assets/index-Big6prgJ.js","assets/swaps-5ni-Oeeh.js","assets/index-xEz2FJPk.js","assets/index-M7drrO6i.js","assets/index-Dbn1x9E6.js","assets/send-Gy_FKuC0.js","assets/index-DU7YHrTe.js","assets/index--cKHPml0.js","assets/receive-DWeezdwN.js","assets/index-BEBfgzy-.js","assets/onramp-B0tkhEFQ.js","assets/index-BiDgzXUS.js","assets/index-M5klHwn1.js","assets/index-l1CVXJCP.js","assets/transactions-C21YOPLF.js","assets/index-BR-yh6la.js","assets/index-DAqXqQBw.js","assets/index-BQYnF1xt.js","assets/index-C0nF1-9h.js","assets/index-D3Ctiqmu.js","assets/w3m-modal-C-DUacEb.js"])))=>i.map(i=>d[i]);
var Nk=t=>{throw TypeError(t)};var R1=(t,e,n)=>e.has(t)||Nk("Cannot "+n);var W=(t,e,n)=>(R1(t,e,"read from private field"),n?n.call(t):e.get(t)),Je=(t,e,n)=>e.has(t)?Nk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),xe=(t,e,n,r)=>(R1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),_t=(t,e,n)=>(R1(t,e,"access private method"),n);var ub=(t,e,n,r)=>({set _(s){xe(t,e,s,n)},get _(){return W(t,e,r)}});function _q(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function OU(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var kU={exports:{}},P_={},DU={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0=Symbol.for("react.element"),Cq=Symbol.for("react.portal"),Sq=Symbol.for("react.fragment"),Aq=Symbol.for("react.strict_mode"),Iq=Symbol.for("react.profiler"),Nq=Symbol.for("react.provider"),xq=Symbol.for("react.context"),Tq=Symbol.for("react.forward_ref"),Rq=Symbol.for("react.suspense"),Pq=Symbol.for("react.memo"),Oq=Symbol.for("react.lazy"),xk=Symbol.iterator;function kq(t){return t===null||typeof t!="object"?null:(t=xk&&t[xk]||t["@@iterator"],typeof t=="function"?t:null)}var $U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MU=Object.assign,LU={};function pg(t,e,n){this.props=t,this.context=e,this.refs=LU,this.updater=n||$U}pg.prototype.isReactComponent={};pg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function UU(){}UU.prototype=pg.prototype;function rR(t,e,n){this.props=t,this.context=e,this.refs=LU,this.updater=n||$U}var sR=rR.prototype=new UU;sR.constructor=rR;MU(sR,pg.prototype);sR.isPureReactComponent=!0;var Tk=Array.isArray,BU=Object.prototype.hasOwnProperty,iR={current:null},jU={key:!0,ref:!0,__self:!0,__source:!0};function FU(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)BU.call(e,r)&&!jU.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:o0,type:t,key:i,ref:o,props:s,_owner:iR.current}}function Dq(t,e){return{$$typeof:o0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function oR(t){return typeof t=="object"&&t!==null&&t.$$typeof===o0}function $q(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rk=/\/+/g;function P1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$q(""+t.key):e.toString(36)}function vv(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case o0:case Cq:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+P1(o,0):r,Tk(s)?(n="",t!=null&&(n=t.replace(Rk,"$&/")+"/"),vv(s,e,n,"",function(l){return l})):s!=null&&(oR(s)&&(s=Dq(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Rk,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Tk(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+P1(i,a);o+=vv(i,e,n,c,s)}else if(c=kq(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+P1(i,a++),o+=vv(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function db(t,e,n){if(t==null)return t;var r=[],s=0;return vv(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Mq(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $s={current:null},Ev={transition:null},Lq={ReactCurrentDispatcher:$s,ReactCurrentBatchConfig:Ev,ReactCurrentOwner:iR};function WU(){throw Error("act(...) is not supported in production builds of React.")}Rt.Children={map:db,forEach:function(t,e,n){db(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return db(t,function(){e++}),e},toArray:function(t){return db(t,function(e){return e})||[]},only:function(t){if(!oR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Rt.Component=pg;Rt.Fragment=Sq;Rt.Profiler=Iq;Rt.PureComponent=rR;Rt.StrictMode=Aq;Rt.Suspense=Rq;Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lq;Rt.act=WU;Rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=MU({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=iR.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)BU.call(e,c)&&!jU.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:o0,type:t.type,key:s,ref:i,props:r,_owner:o}};Rt.createContext=function(t){return t={$$typeof:xq,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Nq,_context:t},t.Consumer=t};Rt.createElement=FU;Rt.createFactory=function(t){var e=FU.bind(null,t);return e.type=t,e};Rt.createRef=function(){return{current:null}};Rt.forwardRef=function(t){return{$$typeof:Tq,render:t}};Rt.isValidElement=oR;Rt.lazy=function(t){return{$$typeof:Oq,_payload:{_status:-1,_result:t},_init:Mq}};Rt.memo=function(t,e){return{$$typeof:Pq,type:t,compare:e===void 0?null:e}};Rt.startTransition=function(t){var e=Ev.transition;Ev.transition={};try{t()}finally{Ev.transition=e}};Rt.unstable_act=WU;Rt.useCallback=function(t,e){return $s.current.useCallback(t,e)};Rt.useContext=function(t){return $s.current.useContext(t)};Rt.useDebugValue=function(){};Rt.useDeferredValue=function(t){return $s.current.useDeferredValue(t)};Rt.useEffect=function(t,e){return $s.current.useEffect(t,e)};Rt.useId=function(){return $s.current.useId()};Rt.useImperativeHandle=function(t,e,n){return $s.current.useImperativeHandle(t,e,n)};Rt.useInsertionEffect=function(t,e){return $s.current.useInsertionEffect(t,e)};Rt.useLayoutEffect=function(t,e){return $s.current.useLayoutEffect(t,e)};Rt.useMemo=function(t,e){return $s.current.useMemo(t,e)};Rt.useReducer=function(t,e,n){return $s.current.useReducer(t,e,n)};Rt.useRef=function(t){return $s.current.useRef(t)};Rt.useState=function(t){return $s.current.useState(t)};Rt.useSyncExternalStore=function(t,e,n){return $s.current.useSyncExternalStore(t,e,n)};Rt.useTransition=function(){return $s.current.useTransition()};Rt.version="18.3.1";DU.exports=Rt;var O=DU.exports;const ki=Nh(O),Uq=_q({__proto__:null,default:ki},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bq=O,jq=Symbol.for("react.element"),Fq=Symbol.for("react.fragment"),Wq=Object.prototype.hasOwnProperty,zq=Bq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hq={key:!0,ref:!0,__self:!0,__source:!0};function zU(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Wq.call(e,r)&&!Hq.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:jq,type:t,key:i,ref:o,props:s,_owner:zq.current}}P_.Fragment=Fq;P_.jsx=zU;P_.jsxs=zU;kU.exports=P_;var m=kU.exports,Pk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve=function(t,e){if(!t)throw gg(e)},gg=function(t){return new Error("Firebase Database ("+HU.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},qq=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},aR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new Vq;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Vq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VU=function(t){const e=qU(t);return aR.encodeByteArray(e,!0)},sE=function(t){return VU(t).replace(/\./g,"")},bI=function(t){try{return aR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gq(t){return GU(void 0,t)}function GU(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Kq(n)||(t[n]=GU(t[n],e[n]));return t}function Kq(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq=()=>Yq().__FIREBASE_DEFAULTS__,Zq=()=>{if(typeof process>"u"||typeof Pk>"u")return;const t=Pk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Xq=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bI(t[1]);return e&&JSON.parse(e)},KU=()=>{try{return Qq()||Zq()||Xq()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jq=t=>{var e,n;return(n=(e=KU())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},eV=t=>{const e=Jq(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},YU=()=>{var t;return(t=KU())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sE(JSON.stringify(n)),sE(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nV())}function rV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sV(){return HU.NODE_ADMIN===!0}function iV(){try{return typeof indexedDB=="object"}catch{return!1}}function oV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV="FirebaseError";class a0 extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aV,Object.setPrototypeOf(this,a0.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ZU.prototype.create)}}class ZU{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?cV(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new a0(s,a,r)}}function cV(t,e){return t.replace(lV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const lV=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t){return JSON.parse(t)}function wr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Iy(bI(i[0])||""),n=Iy(bI(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},uV=function(t){const e=XU(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},dV=function(t){const e=XU(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Pp(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ok(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function iE(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function vI(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(kk(i)&&kk(o)){if(!vI(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function kk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function cR(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,ve(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},k_=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){return t&&t._delegate?t._delegate:t}class Ny{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new O_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yV(e))try{this.getOrInitializeService({instanceIdentifier:id})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=id){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=id){return this.instances.has(e)}getOptions(e=id){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=id){return this.component?this.component.multipleInstances?e:id:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mV(t){return t===id?void 0:t}function yV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var In;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(In||(In={}));const bV={debug:In.DEBUG,verbose:In.VERBOSE,info:In.INFO,warn:In.WARN,error:In.ERROR,silent:In.SILENT},vV=In.INFO,EV={[In.DEBUG]:"log",[In.VERBOSE]:"log",[In.INFO]:"info",[In.WARN]:"warn",[In.ERROR]:"error"},_V=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=EV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class JU{constructor(e){this.name=e,this._logLevel=vV,this._logHandler=_V,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in In))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,In.DEBUG,...e),this._logHandler(this,In.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,In.VERBOSE,...e),this._logHandler(this,In.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,In.INFO,...e),this._logHandler(this,In.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,In.WARN,...e),this._logHandler(this,In.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,In.ERROR,...e),this._logHandler(this,In.ERROR,...e)}}const CV=(t,e)=>e.some(n=>t instanceof n);let Dk,$k;function SV(){return Dk||(Dk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AV(){return $k||($k=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const e6=new WeakMap,EI=new WeakMap,t6=new WeakMap,O1=new WeakMap,lR=new WeakMap;function IV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(nu(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&e6.set(n,t)}).catch(()=>{}),lR.set(e,t),e}function NV(t){if(EI.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});EI.set(t,e)}let _I={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return EI.get(t);if(e==="objectStoreNames")return t.objectStoreNames||t6.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xV(t){_I=t(_I)}function TV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(k1(this),e,...n);return t6.set(r,e.sort?e.sort():[e]),nu(r)}:AV().includes(t)?function(...e){return t.apply(k1(this),e),nu(e6.get(this))}:function(...e){return nu(t.apply(k1(this),e))}}function RV(t){return typeof t=="function"?TV(t):(t instanceof IDBTransaction&&NV(t),CV(t,SV())?new Proxy(t,_I):t)}function nu(t){if(t instanceof IDBRequest)return IV(t);if(O1.has(t))return O1.get(t);const e=RV(t);return e!==t&&(O1.set(t,e),lR.set(e,t)),e}const k1=t=>lR.get(t);function PV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=nu(o);return r&&o.addEventListener("upgradeneeded",c=>{r(nu(o.result),c.oldVersion,c.newVersion,nu(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const OV=["get","getKey","getAll","getAllKeys","count"],kV=["put","add","delete","clear"],D1=new Map;function Mk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(D1.get(e))return D1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=kV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||OV.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return D1.set(e,i),i}xV(t=>({...t,get:(e,n,r)=>Mk(e,n)||t.get(e,n,r),has:(e,n)=>!!Mk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($V(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $V(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const CI="@firebase/app",Lk="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=new JU("@firebase/app"),MV="@firebase/app-compat",LV="@firebase/analytics-compat",UV="@firebase/analytics",BV="@firebase/app-check-compat",jV="@firebase/app-check",FV="@firebase/auth",WV="@firebase/auth-compat",zV="@firebase/database",HV="@firebase/data-connect",qV="@firebase/database-compat",VV="@firebase/functions",GV="@firebase/functions-compat",KV="@firebase/installations",YV="@firebase/installations-compat",QV="@firebase/messaging",ZV="@firebase/messaging-compat",XV="@firebase/performance",JV="@firebase/performance-compat",eG="@firebase/remote-config",tG="@firebase/remote-config-compat",nG="@firebase/storage",rG="@firebase/storage-compat",sG="@firebase/firestore",iG="@firebase/vertexai-preview",oG="@firebase/firestore-compat",aG="firebase",cG="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="[DEFAULT]",lG={[CI]:"fire-core",[MV]:"fire-core-compat",[UV]:"fire-analytics",[LV]:"fire-analytics-compat",[jV]:"fire-app-check",[BV]:"fire-app-check-compat",[FV]:"fire-auth",[WV]:"fire-auth-compat",[zV]:"fire-rtdb",[HV]:"fire-data-connect",[qV]:"fire-rtdb-compat",[VV]:"fire-fn",[GV]:"fire-fn-compat",[KV]:"fire-iid",[YV]:"fire-iid-compat",[QV]:"fire-fcm",[ZV]:"fire-fcm-compat",[XV]:"fire-perf",[JV]:"fire-perf-compat",[eG]:"fire-rc",[tG]:"fire-rc-compat",[nG]:"fire-gcs",[rG]:"fire-gcs-compat",[sG]:"fire-fst",[oG]:"fire-fst-compat",[iG]:"fire-vertex","fire-js":"fire-js",[aG]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=new Map,uG=new Map,AI=new Map;function Uk(t,e){try{t.container.addComponent(e)}catch(n){Wc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function oE(t){const e=t.name;if(AI.has(e))return Wc.debug(`There were multiple attempts to register component ${e}.`),!1;AI.set(e,t);for(const n of xy.values())Uk(n,t);for(const n of uG.values())Uk(n,t);return!0}function dG(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ru=new ZU("app","Firebase",hG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ny("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ru.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG=cG;function n6(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:SI,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ru.create("bad-app-name",{appName:String(s)});if(n||(n=YU()),!n)throw ru.create("no-options");const i=xy.get(s);if(i){if(vI(n,i.options)&&vI(r,i.config))return i;throw ru.create("duplicate-app",{appName:s})}const o=new wV(s);for(const c of AI.values())o.addComponent(c);const a=new fG(n,r,o);return xy.set(s,a),a}function r6(t=SI){const e=xy.get(t);if(!e&&t===SI&&YU())return n6();if(!e)throw ru.create("no-app",{appName:t});return e}function gG(){return Array.from(xy.values())}function np(t,e,n){var r;let s=(r=lG[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wc.warn(a.join(" "));return}oE(new Ny(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mG="firebase-heartbeat-database",yG=1,Ty="firebase-heartbeat-store";let $1=null;function s6(){return $1||($1=PV(mG,yG,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ty)}catch(n){console.warn(n)}}}}).catch(t=>{throw ru.create("idb-open",{originalErrorMessage:t.message})})),$1}async function wG(t){try{const n=(await s6()).transaction(Ty),r=await n.objectStore(Ty).get(i6(t));return await n.done,r}catch(e){if(e instanceof a0)Wc.warn(e.message);else{const n=ru.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wc.warn(n.message)}}}async function Bk(t,e){try{const r=(await s6()).transaction(Ty,"readwrite");await r.objectStore(Ty).put(e,i6(t)),await r.done}catch(n){if(n instanceof a0)Wc.warn(n.message);else{const r=ru.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wc.warn(r.message)}}}function i6(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bG=1024,vG=30*24*60*60*1e3;class EG{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CG(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=jk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=vG}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Wc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jk(),{heartbeatsToSend:r,unsentEntries:s}=_G(this._heartbeatsCache.heartbeats),i=sE(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Wc.warn(n),""}}}function jk(){return new Date().toISOString().substring(0,10)}function _G(t,e=bG){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Fk(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Fk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class CG{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iV()?oV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wG(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Bk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Bk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Fk(t){return sE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SG(t){oE(new Ny("platform-logger",e=>new DV(e),"PRIVATE")),oE(new Ny("heartbeat",e=>new EG(e),"PRIVATE")),np(CI,Lk,t),np(CI,Lk,"esm2017"),np("fire-js","")}SG("");var AG="firebase",IG="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */np(AG,IG,"app");var Wk={};const zk="@firebase/database",Hk="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o6="";function NG(t){o6=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Iy(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TG{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Xc(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new xG(e)}}catch{}return new TG},bd=a6("localStorage"),RG=a6("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=new JU("@firebase/database"),PG=function(){let t=1;return function(){return t++}}(),c6=function(t){const e=pV(t),n=new fV;n.update(e);const r=n.digest();return aR.encodeByteArray(r)},c0=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=c0.apply(null,r):typeof r=="object"?e+=wr(r):e+=r,e+=" "}return e};let Km=null,qk=!0;const OG=function(t,e){ve(!0,"Can't turn on custom loggers persistently."),rp.logLevel=In.VERBOSE,Km=rp.log.bind(rp)},fs=function(...t){if(qk===!0&&(qk=!1,Km===null&&RG.get("logging_enabled")===!0&&OG()),Km){const e=c0.apply(null,t);Km(e)}},l0=function(t){return function(...e){fs(t,...e)}},II=function(...t){const e="FIREBASE INTERNAL ERROR: "+c0(...t);rp.error(e)},zc=function(...t){const e=`FIREBASE FATAL ERROR: ${c0(...t)}`;throw rp.error(e),new Error(e)},ci=function(...t){const e="FIREBASE WARNING: "+c0(...t);rp.warn(e)},kG=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ci("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},l6=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},DG=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Op="[MIN_NAME]",Zd="[MAX_NAME]",yg=function(t,e){if(t===e)return 0;if(t===Op||e===Zd)return-1;if(e===Op||t===Zd)return 1;{const n=Vk(t),r=Vk(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},$G=function(t,e){return t===e?0:t<e?-1:1},Kg=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+wr(e))},uR=function(t){if(typeof t!="object"||t===null)return wr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=wr(e[r]),n+=":",n+=uR(t[e[r]]);return n+="}",n},u6=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function pi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const d6=function(t){ve(!l6(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},MG=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},LG=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function UG(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const BG=new RegExp("^-?(0*)\\d{1,10}$"),jG=-2147483648,FG=2147483647,Vk=function(t){if(BG.test(t)){const e=Number(t);if(e>=jG&&e<=FG)return e}return null},wg=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ci("Exception was thrown by user callback.",n),e},Math.floor(0))}},WG=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ym=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zG{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ci(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(fs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ci(e)}}class _v{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}_v.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="5",h6="v",f6="s",p6="r",g6="f",m6=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,y6="ls",w6="p",NI="ac",b6="websocket",v6="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bd.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function qG(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function _6(t,e,n){ve(typeof e=="string","typeof type must == string"),ve(typeof n=="object","typeof params must == object");let r;if(e===b6)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===v6)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);qG(t)&&(n.ns=t.namespace);const s=[];return pi(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(){this.counters_={}}incrementCounter(e,n=1){Xc(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Gq(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1={},L1={};function hR(t){const e=t.toString();return M1[e]||(M1[e]=new VG),M1[e]}function GG(t,e){const n=t.toString();return L1[n]||(L1[n]=e()),L1[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KG{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&wg(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="start",YG="close",QG="pLPCommand",ZG="pRTLPCB",C6="id",S6="pw",A6="ser",XG="cb",JG="seg",eK="ts",tK="d",nK="dframe",I6=1870,N6=30,rK=I6-N6,sK=25e3,iK=3e4;class Uf{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=l0(e),this.stats_=hR(n),this.urlFn=c=>(this.appCheckToken&&(c[NI]=this.appCheckToken),_6(n,v6,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new KG(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(iK)),DG(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fR((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Gk)this.id=a,this.password=c;else if(o===YG)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Gk]="t",r[A6]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[XG]=this.scriptTagHolder.uniqueCallbackIdentifier),r[h6]=dR,this.transportSessionId&&(r[f6]=this.transportSessionId),this.lastSessionId&&(r[y6]=this.lastSessionId),this.applicationId&&(r[w6]=this.applicationId),this.appCheckToken&&(r[NI]=this.appCheckToken),typeof location<"u"&&location.hostname&&m6.test(location.hostname)&&(r[p6]=g6);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Uf.forceAllow_=!0}static forceDisallow(){Uf.forceDisallow_=!0}static isAvailable(){return Uf.forceAllow_?!0:!Uf.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!MG()&&!LG()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=wr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=VU(n),s=u6(r,rK);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[nK]="t",r[C6]=e,r[S6]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=wr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class fR{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=PG(),window[QG+this.uniqueCallbackIdentifier]=e,window[ZG+this.uniqueCallbackIdentifier]=n,this.myIFrame=fR.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){fs("frame writing exception"),a.stack&&fs(a.stack),fs(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||fs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[C6]=this.myID,e[S6]=this.myPW,e[A6]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+N6+r.length<=I6;){const o=this.pendingSegs.shift();r=r+"&"+JG+s+"="+o.seg+"&"+eK+s+"="+o.ts+"&"+tK+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(sK)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{fs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oK=16384,aK=45e3;let aE=null;typeof MozWebSocket<"u"?aE=MozWebSocket:typeof WebSocket<"u"&&(aE=WebSocket);class Go{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=l0(this.connId),this.stats_=hR(n),this.connURL=Go.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[h6]=dR,typeof location<"u"&&location.hostname&&m6.test(location.hostname)&&(o[p6]=g6),n&&(o[f6]=n),r&&(o[y6]=r),s&&(o[NI]=s),i&&(o[w6]=i),_6(e,b6,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bd.set("previous_websocket_failure",!0);try{let r;sV(),this.mySock=new aE(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Go.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&aE!==null&&!Go.forceDisallow_}static previouslyFailed(){return bd.isInMemoryStorage||bd.get("previous_websocket_failure")===!0}markConnectionHealthy(){bd.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Iy(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ve(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=wr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=u6(n,oK);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(aK))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Go.responsesRequiredToBeHealthy=2;Go.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Uf,Go]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Go&&Go.isAvailable();let r=n&&!Go.previouslyFailed();if(e.webSocketOnly&&(n||ci("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Go];else{const s=this.transports_=[];for(const i of Ry.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);Ry.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ry.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK=6e4,lK=5e3,uK=10*1024,dK=100*1024,U1="t",Kk="d",hK="s",Yk="r",fK="e",Qk="o",Zk="a",Xk="n",Jk="p",pK="h";class gK{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=l0("c:"+this.id+":"),this.transportManager_=new Ry(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Ym(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>dK?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>uK?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(U1 in e){const n=e[U1];n===Zk?this.upgradeIfSecondaryHealthy_():n===Yk?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Qk&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Kg("t",e),r=Kg("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Jk,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Zk,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Xk,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Kg("t",e),r=Kg("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Kg(U1,e);if(Kk in e){const r=e[Kk];if(n===pK){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Xk){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===hK?this.onConnectionShutdown_(r):n===Yk?this.onReset_(r):n===fK?II("Server Error: "+r):n===Qk?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):II("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),dR!==r&&ci("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Ym(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(cK))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ym(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(lK))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Jk,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T6=class{constructor(e){this.allowedEvents_=e,this.listeners_={},ve(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){ve(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE extends T6{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!QU()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new cE}getInitialEvent(e){return ve(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=32,t2=768;class bn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Vt(){return new bn("")}function Nt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Au(t){return t.pieces_.length-t.pieceNum_}function xn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new bn(t.pieces_,e)}function R6(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mK(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function P6(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function O6(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new bn(e,0)}function br(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof bn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new bn(n,0)}function Tt(t){return t.pieceNum_>=t.pieces_.length}function Ts(t,e){const n=Nt(t),r=Nt(e);if(n===null)return e;if(n===r)return Ts(xn(t),xn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pR(t,e){if(Au(t)!==Au(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Qo(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Au(t)>Au(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class yK{constructor(e,n){this.errorPrefix_=n,this.parts_=P6(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=k_(this.parts_[r]);k6(this)}}function wK(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=k_(e),k6(t)}function bK(t){const e=t.parts_.pop();t.byteLength_-=k_(e),t.parts_.length>0&&(t.byteLength_-=1)}function k6(t){if(t.byteLength_>t2)throw new Error(t.errorPrefix_+"has a key path longer than "+t2+" bytes ("+t.byteLength_+").");if(t.parts_.length>e2)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e2+") or object contains a cycle "+od(t))}function od(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR extends T6{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new gR}getInitialEvent(e){return ve(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg=1e3,vK=60*5*1e3,n2=30*1e3,EK=1.3,_K=3e4,CK="server_kill",r2=3;class Dc extends x6{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Dc.nextPersistentConnectionId_++,this.log_=l0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Yg,this.maxReconnectDelay_=vK,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gR.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&cE.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(wr(i)),ve(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new O_,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ve(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Dc.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Xc(e,"w")){const r=Pp(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();ci(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||dV(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=n2)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=uV(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+wr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):II("Unrecognized action received from server: "+wr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ve(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yg,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Yg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>_K&&(this.reconnectDelay_=Yg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*EK)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Dc.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){ve(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?fs("getToken() completed but was canceled"):(fs("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new gK(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{ci(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(CK)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ci(d),c())}}}interrupt(e){fs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){fs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ok(this.interruptReasons_)&&(this.reconnectDelay_=Yg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>uR(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new bn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){fs("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=r2&&(this.reconnectDelay_=n2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){fs("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=r2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+o6.replace(/\./g,"-")]=1,QU()?e["framework.cordova"]=1:rV()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=cE.getInstance().currentlyOnline();return Ok(this.interruptReasons_)&&e}}Dc.nextPersistentConnectionId_=0;Dc.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new xt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new xt(Op,e),s=new xt(Op,n);return this.compare(r,s)!==0}minPost(){return xt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hb;class D6 extends D_{static get __EMPTY_NODE(){return hb}static set __EMPTY_NODE(e){hb=e}compare(e,n){return yg(e.name,n.name)}isDefinedOn(e){throw gg("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return xt.MIN}maxPost(){return new xt(Zd,hb)}makePost(e,n){return ve(typeof e=="string","KeyIndex indexValue must always be a string."),new xt(e,hb)}toString(){return".key"}}const sp=new D6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Rr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Rr.RED,this.left=s??ii.EMPTY_NODE,this.right=i??ii.EMPTY_NODE}copy(e,n,r,s,i){return new Rr(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ii.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ii.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Rr.RED=!0;Rr.BLACK=!1;class SK{copy(e,n,r,s,i){return this}insert(e,n,r){return new Rr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ii{constructor(e,n=ii.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new ii(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rr.BLACK,null,null))}remove(e){return new ii(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new fb(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new fb(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new fb(this.root_,null,this.comparator_,!0,e)}}ii.EMPTY_NODE=new SK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AK(t,e){return yg(t.name,e.name)}function mR(t,e){return yg(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xI;function IK(t){xI=t}const $6=function(t){return typeof t=="number"?"number:"+d6(t):"string:"+t},M6=function(t){if(t.isLeafNode()){const e=t.val();ve(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Xc(e,".sv"),"Priority must be a string or number.")}else ve(t===xI||t.isEmpty(),"priority of unexpected type.");ve(t===xI||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s2;class Tr{constructor(e,n=Tr.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ve(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),M6(this.priorityNode_)}static set __childrenNodeConstructor(e){s2=e}static get __childrenNodeConstructor(){return s2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Tr(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Tr.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Tt(e)?this:Nt(e)===".priority"?this.priorityNode_:Tr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Tr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Nt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ve(r!==".priority"||Au(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Tr.__childrenNodeConstructor.EMPTY_NODE.updateChild(xn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$6(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=d6(this.value_):e+=this.value_,this.lazyHash_=c6(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Tr.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Tr.__childrenNodeConstructor?-1:(ve(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Tr.VALUE_TYPE_ORDER.indexOf(n),i=Tr.VALUE_TYPE_ORDER.indexOf(r);return ve(s>=0,"Unknown leaf type: "+n),ve(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Tr.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L6,U6;function NK(t){L6=t}function xK(t){U6=t}class TK extends D_{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?yg(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return xt.MIN}maxPost(){return new xt(Zd,new Tr("[PRIORITY-POST]",U6))}makePost(e,n){const r=L6(e);return new xt(n,new Tr("[PRIORITY-POST]",r))}toString(){return".priority"}}const Zn=new TK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK=Math.log(2);class PK{constructor(e){const n=i=>parseInt(Math.log(i)/RK,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const lE=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new Rr(h,d.node,Rr.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new Rr(h,d.node,Rr.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const w=d-p,y=d;d-=p;const b=s(w+1,y),E=t[w],_=n?n(E):E;f(new Rr(_,E.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));g?h(w,Rr.BLACK):(h(w,Rr.BLACK),h(w,Rr.RED))}return u},o=new PK(t.length),a=i(o);return new ii(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B1;const ef={};class Tc{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ve(ef&&Zn,"ChildrenNode.ts has not been loaded"),B1=B1||new Tc({".priority":ef},{".priority":Zn}),B1}get(e){const n=Pp(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ii?n:null}hasIndex(e){return Xc(this.indexSet_,e.toString())}addIndex(e,n){ve(e!==sp,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(xt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=lE(r,e.getCompare()):a=ef;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new Tc(u,l)}addToIndexes(e,n){const r=iE(this.indexes_,(s,i)=>{const o=Pp(this.indexSet_,i);if(ve(o,"Missing index implementation for "+i),s===ef)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(xt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),lE(a,o.getCompare())}else return ef;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new xt(e.name,a))),c.insert(e,e.node)}});return new Tc(r,this.indexSet_)}removeFromIndexes(e,n){const r=iE(this.indexes_,s=>{if(s===ef)return s;{const i=n.get(e.name);return i?s.remove(new xt(e.name,i)):s}});return new Tc(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qg;class lt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&M6(this.priorityNode_),this.children_.isEmpty()&&ve(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Qg||(Qg=new lt(new ii(mR),null,Tc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qg}updatePriority(e){return this.children_.isEmpty()?this:new lt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Qg:n}}getChild(e){const n=Nt(e);return n===null?this:this.getImmediateChild(n).getChild(xn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ve(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new xt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Qg:this.priorityNode_;return new lt(s,o,i)}}updateChild(e,n){const r=Nt(e);if(r===null)return n;{ve(Nt(e)!==".priority"||Au(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(xn(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Zn,(o,a)=>{n[o]=a.val(e),r++,i&&lt.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+$6(this.getPriority().val())+":"),this.forEachChild(Zn,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":c6(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new xt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new xt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new xt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,xt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,xt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===u0?-1:0}withIndex(e){if(e===sp||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new lt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===sp||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Zn),s=n.getIterator(Zn);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===sp?null:this.indexMap_.get(e.toString())}}lt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class OK extends lt{constructor(){super(new ii(mR),lt.EMPTY_NODE,Tc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return lt.EMPTY_NODE}isEmpty(){return!1}}const u0=new OK;Object.defineProperties(xt,{MIN:{value:new xt(Op,lt.EMPTY_NODE)},MAX:{value:new xt(Zd,u0)}});D6.__EMPTY_NODE=lt.EMPTY_NODE;Tr.__childrenNodeConstructor=lt;IK(u0);xK(u0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kK=!0;function Or(t,e=null){if(t===null)return lt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ve(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Tr(n,Or(e))}if(!(t instanceof Array)&&kK){const n=[];let r=!1;if(pi(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Or(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new xt(o,c)))}}),n.length===0)return lt.EMPTY_NODE;const i=lE(n,AK,o=>o.name,mR);if(r){const o=lE(n,Zn.getCompare());return new lt(i,Or(e),new Tc({".priority":o},{".priority":Zn}))}else return new lt(i,Or(e),Tc.Default)}else{let n=lt.EMPTY_NODE;return pi(t,(r,s)=>{if(Xc(t,r)&&r.substring(0,1)!=="."){const i=Or(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Or(e))}}NK(Or);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DK extends D_{constructor(e){super(),this.indexPath_=e,ve(!Tt(e)&&Nt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?yg(e.name,n.name):i}makePost(e,n){const r=Or(e),s=lt.EMPTY_NODE.updateChild(this.indexPath_,r);return new xt(n,s)}maxPost(){const e=lt.EMPTY_NODE.updateChild(this.indexPath_,u0);return new xt(Zd,e)}toString(){return P6(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $K extends D_{compare(e,n){const r=e.node.compareTo(n.node);return r===0?yg(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return xt.MIN}maxPost(){return xt.MAX}makePost(e,n){const r=Or(e);return new xt(n,r)}toString(){return".value"}}const MK=new $K;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(t){return{type:"value",snapshotNode:t}}function kp(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Py(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Oy(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function LK(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){ve(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Py(n,a)):ve(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(kp(n,r)):o.trackChildChange(Oy(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Zn,(s,i)=>{n.hasChild(s)||r.trackChildChange(Py(s,i))}),n.isLeafNode()||n.forEachChild(Zn,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(Oy(s,i,o))}else r.trackChildChange(kp(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?lt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e){this.indexedFilter_=new yR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ky.getStartPost_(e),this.endPost_=ky.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new xt(n,r))||(r=lt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=lt.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(lt.EMPTY_NODE);const i=this;return n.forEachChild(Zn,(o,a)=>{i.matches(new xt(o,a))||(s=s.updateImmediateChild(o,lt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ky(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new xt(n,r))||(r=lt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=lt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=lt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(lt.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,lt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;ve(a.numChildren()===this.limit_,"");const c=new xt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(Oy(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Py(n,d));const g=a.updateImmediateChild(n,lt.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(kp(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(Py(l.name,l.node)),i.trackChildChange(kp(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,lt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ve(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ve(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Op}hasEnd(){return this.endSet_}getIndexEndValue(){return ve(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ve(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Zd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ve(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zn}copy(){const e=new wR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function BK(t){return t.loadsAllData()?new yR(t.getIndex()):t.hasLimit()?new UK(t):new ky(t)}function i2(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Zn?n="$priority":t.index_===MK?n="$value":t.index_===sp?n="$key":(ve(t.index_ instanceof DK,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=wr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=wr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+wr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=wr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+wr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function o2(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Zn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE extends x6{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=l0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ve(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=uE.getListenId_(e,r),a={};this.listens_[o]=a;const c=i2(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),Pp(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=uE.getListenId_(e,n);delete this.listens_[r]}get(e){const n=i2(e._queryParams),r=e._path.toString(),s=new O_;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+hV(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Iy(a.responseText)}catch{ci("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&ci("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(){this.rootNode_=lt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){return{value:null,children:new Map}}function j6(t,e,n){if(Tt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Nt(e);t.children.has(r)||t.children.set(r,dE());const s=t.children.get(r);e=xn(e),j6(s,e,n)}}function TI(t,e,n){t.value!==null?n(e,t.value):FK(t,(r,s)=>{const i=new bn(e.toString()+"/"+r);TI(s,i,n)})}function FK(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&pi(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=10*1e3,zK=30*1e3,HK=5*60*1e3;class qK{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new WK(e);const r=a2+(zK-a2)*Math.random();Ym(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;pi(e,(s,i)=>{i>0&&Xc(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Ym(this.reportStats_.bind(this),Math.floor(Math.random()*2*HK))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zo;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Zo||(Zo={}));function F6(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function vR(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Zo.ACK_USER_WRITE,this.source=F6()}operationForChild(e){if(Tt(this.path)){if(this.affectedTree.value!=null)return ve(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new bn(e));return new hE(Vt(),n,this.revert)}}else return ve(Nt(this.path)===e,"operationForChild called for unrelated child."),new hE(xn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n){this.source=e,this.path=n,this.type=Zo.LISTEN_COMPLETE}operationForChild(e){return Tt(this.path)?new Dy(this.source,Vt()):new Dy(this.source,xn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Zo.OVERWRITE}operationForChild(e){return Tt(this.path)?new Xd(this.source,Vt(),this.snap.getImmediateChild(e)):new Xd(this.source,xn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Zo.MERGE}operationForChild(e){if(Tt(this.path)){const n=this.children.subtree(new bn(e));return n.isEmpty()?null:n.value?new Xd(this.source,Vt(),n.value):new $y(this.source,Vt(),n)}else return ve(Nt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $y(this.source,xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Tt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Nt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VK{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function GK(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(LK(o.childName,o.snapshotNode))}),Zg(t,s,"child_removed",e,r,n),Zg(t,s,"child_added",e,r,n),Zg(t,s,"child_moved",i,r,n),Zg(t,s,"child_changed",e,r,n),Zg(t,s,"value",e,r,n),s}function Zg(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>YK(t,a,c)),o.forEach(a=>{const c=KK(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function KK(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function YK(t,e,n){if(e.childName==null||n.childName==null)throw gg("Should only compare child_ events.");const r=new xt(e.childName,e.snapshotNode),s=new xt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t,e){return{eventCache:t,serverCache:e}}function Qm(t,e,n,r){return $_(new Iu(e,n,r),t.serverCache)}function W6(t,e,n,r){return $_(t.eventCache,new Iu(e,n,r))}function fE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Jd(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j1;const QK=()=>(j1||(j1=new ii($G)),j1);class On{constructor(e,n=QK()){this.value=e,this.children=n}static fromObject(e){let n=new On(null);return pi(e,(r,s)=>{n=n.set(new bn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Vt(),value:this.value};if(Tt(e))return null;{const r=Nt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(xn(e),n);return i!=null?{path:br(new bn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Tt(e))return this;{const n=Nt(e),r=this.children.get(n);return r!==null?r.subtree(xn(e)):new On(null)}}set(e,n){if(Tt(e))return new On(n,this.children);{const r=Nt(e),i=(this.children.get(r)||new On(null)).set(xn(e),n),o=this.children.insert(r,i);return new On(this.value,o)}}remove(e){if(Tt(e))return this.children.isEmpty()?new On(null):new On(null,this.children);{const n=Nt(e),r=this.children.get(n);if(r){const s=r.remove(xn(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new On(null):new On(this.value,i)}else return this}}get(e){if(Tt(e))return this.value;{const n=Nt(e),r=this.children.get(n);return r?r.get(xn(e)):null}}setTree(e,n){if(Tt(e))return n;{const r=Nt(e),i=(this.children.get(r)||new On(null)).setTree(xn(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new On(this.value,o)}}fold(e){return this.fold_(Vt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(br(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Vt(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Tt(e))return null;{const i=Nt(e),o=this.children.get(i);return o?o.findOnPath_(xn(e),br(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Vt(),n)}foreachOnPath_(e,n,r){if(Tt(e))return this;{this.value&&r(n,this.value);const s=Nt(e),i=this.children.get(s);return i?i.foreachOnPath_(xn(e),br(n,s),r):new On(null)}}foreach(e){this.foreach_(Vt(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(br(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.writeTree_=e}static empty(){return new ea(new On(null))}}function Zm(t,e,n){if(Tt(e))return new ea(new On(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Ts(s,e);return i=i.updateChild(o,n),new ea(t.writeTree_.set(s,i))}else{const s=new On(n),i=t.writeTree_.setTree(e,s);return new ea(i)}}}function c2(t,e,n){let r=t;return pi(n,(s,i)=>{r=Zm(r,br(e,s),i)}),r}function l2(t,e){if(Tt(e))return ea.empty();{const n=t.writeTree_.setTree(e,new On(null));return new ea(n)}}function RI(t,e){return xh(t,e)!=null}function xh(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ts(n.path,e)):null}function u2(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Zn,(r,s)=>{e.push(new xt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new xt(r,s.value))}),e}function su(t,e){if(Tt(e))return t;{const n=xh(t,e);return n!=null?new ea(new On(n)):new ea(t.writeTree_.subtree(e))}}function PI(t){return t.writeTree_.isEmpty()}function Dp(t,e){return z6(Vt(),t.writeTree_,e)}function z6(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(ve(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=z6(br(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(br(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t,e){return G6(e,t)}function ZK(t,e,n,r,s){ve(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Zm(t.visibleWrites,e,n)),t.lastWriteId=r}function XK(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function JK(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ve(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&eY(a,r.path)?s=!1:Qo(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return tY(t),!0;if(r.snap)t.visibleWrites=l2(t.visibleWrites,r.path);else{const a=r.children;pi(a,c=>{t.visibleWrites=l2(t.visibleWrites,br(r.path,c))})}return!0}else return!1}function eY(t,e){if(t.snap)return Qo(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Qo(br(t.path,n),e))return!0;return!1}function tY(t){t.visibleWrites=H6(t.allWrites,nY,Vt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function nY(t){return t.visible}function H6(t,e,n){let r=ea.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Qo(n,o)?(a=Ts(n,o),r=Zm(r,a,i.snap)):Qo(o,n)&&(a=Ts(o,n),r=Zm(r,Vt(),i.snap.getChild(a)));else if(i.children){if(Qo(n,o))a=Ts(n,o),r=c2(r,a,i.children);else if(Qo(o,n))if(a=Ts(o,n),Tt(a))r=c2(r,Vt(),i.children);else{const c=Pp(i.children,Nt(a));if(c){const l=c.getChild(xn(a));r=Zm(r,Vt(),l)}}}else throw gg("WriteRecord should have .snap or .children")}}return r}function q6(t,e,n,r,s){if(!r&&!s){const i=xh(t.visibleWrites,e);if(i!=null)return i;{const o=su(t.visibleWrites,e);if(PI(o))return n;if(n==null&&!RI(o,Vt()))return null;{const a=n||lt.EMPTY_NODE;return Dp(o,a)}}}else{const i=su(t.visibleWrites,e);if(!s&&PI(i))return n;if(!s&&n==null&&!RI(i,Vt()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(Qo(l.path,e)||Qo(e,l.path))},a=H6(t.allWrites,o,e),c=n||lt.EMPTY_NODE;return Dp(a,c)}}}function rY(t,e,n){let r=lt.EMPTY_NODE;const s=xh(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Zn,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=su(t.visibleWrites,e);return n.forEachChild(Zn,(o,a)=>{const c=Dp(su(i,new bn(o)),a);r=r.updateImmediateChild(o,c)}),u2(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=su(t.visibleWrites,e);return u2(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function sY(t,e,n,r,s){ve(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=br(e,n);if(RI(t.visibleWrites,i))return null;{const o=su(t.visibleWrites,i);return PI(o)?s.getChild(n):Dp(o,s.getChild(n))}}function iY(t,e,n,r){const s=br(e,n),i=xh(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=su(t.visibleWrites,s);return Dp(o,r.getNode().getImmediateChild(n))}else return null}function oY(t,e){return xh(t.visibleWrites,e)}function aY(t,e,n,r,s,i,o){let a;const c=su(t.visibleWrites,e),l=xh(c,Vt());if(l!=null)a=l;else if(n!=null)a=Dp(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function cY(){return{visibleWrites:ea.empty(),allWrites:[],lastWriteId:-1}}function pE(t,e,n,r){return q6(t.writeTree,t.treePath,e,n,r)}function ER(t,e){return rY(t.writeTree,t.treePath,e)}function d2(t,e,n,r){return sY(t.writeTree,t.treePath,e,n,r)}function gE(t,e){return oY(t.writeTree,br(t.treePath,e))}function lY(t,e,n,r,s,i){return aY(t.writeTree,t.treePath,e,n,r,s,i)}function _R(t,e,n){return iY(t.writeTree,t.treePath,e,n)}function V6(t,e){return G6(br(t.treePath,e),t.writeTree)}function G6(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ve(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ve(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Oy(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Py(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,kp(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Oy(r,e.snapshotNode,s.oldSnap));else throw gg("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const K6=new dY;class CR{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Iu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _R(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Jd(this.viewCache_),i=lY(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hY(t){return{filter:t}}function fY(t,e){ve(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ve(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function pY(t,e,n,r,s){const i=new uY;let o,a;if(n.type===Zo.OVERWRITE){const l=n;l.source.fromUser?o=OI(t,e,l.path,l.snap,r,s,i):(ve(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Tt(l.path),o=mE(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===Zo.MERGE){const l=n;l.source.fromUser?o=mY(t,e,l.path,l.children,r,s,i):(ve(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=kI(t,e,l.path,l.children,r,s,a,i))}else if(n.type===Zo.ACK_USER_WRITE){const l=n;l.revert?o=bY(t,e,l.path,r,s,i):o=yY(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===Zo.LISTEN_COMPLETE)o=wY(t,e,n.path,r,i);else throw gg("Unknown operation type: "+n.type);const c=i.getChanges();return gY(e,o,c),{viewCache:o,changes:c}}function gY(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=fE(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(B6(fE(e)))}}function Y6(t,e,n,r,s,i){const o=e.eventCache;if(gE(r,n)!=null)return e;{let a,c;if(Tt(n))if(ve(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Jd(e),u=l instanceof lt?l:lt.EMPTY_NODE,d=ER(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=pE(r,Jd(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Nt(n);if(l===".priority"){ve(Au(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=d2(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=xn(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=d2(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=_R(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return Qm(e,a,o.isFullyInitialized()||Tt(n),t.filter.filtersNodes())}}function mE(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Tt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Nt(n);if(!c.isCompleteForPath(n)&&Au(n)>1)return e;const p=xn(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,K6,null)}const d=W6(e,l,c.isFullyInitialized()||Tt(n),u.filtersNodes()),h=new CR(s,d,i);return Y6(t,d,n,s,h,a)}function OI(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new CR(s,e,i);if(Tt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Qm(e,l,!0,t.filter.filtersNodes());else{const d=Nt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Qm(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=xn(n),f=a.getNode().getImmediateChild(d);let p;if(Tt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?R6(h)===".priority"&&g.getChild(O6(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=lt.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=Qm(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function h2(t,e){return t.eventCache.isCompleteForChild(e)}function mY(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=br(n,c);h2(e,Nt(u))&&(a=OI(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=br(n,c);h2(e,Nt(u))||(a=OI(t,a,u,l,s,i,o))}),a}function f2(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function kI(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Tt(n)?l=r:l=new On(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=f2(t,f,h);c=mE(t,c,new bn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=f2(t,p,h);c=mE(t,c,new bn(d),g,s,i,o,a)}}),c}function yY(t,e,n,r,s,i,o){if(gE(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Tt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return mE(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Tt(n)){let l=new On(null);return c.getNode().forEachChild(sp,(u,d)=>{l=l.set(new bn(u),d)}),kI(t,e,n,l,s,i,a,o)}else return e}else{let l=new On(null);return r.foreach((u,d)=>{const h=br(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),kI(t,e,n,l,s,i,a,o)}}function wY(t,e,n,r,s){const i=e.serverCache,o=W6(e,i.getNode(),i.isFullyInitialized()||Tt(n),i.isFiltered());return Y6(t,o,n,r,K6,s)}function bY(t,e,n,r,s,i){let o;if(gE(r,n)!=null)return e;{const a=new CR(r,e,s),c=e.eventCache.getNode();let l;if(Tt(n)||Nt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=pE(r,Jd(e));else{const d=e.serverCache.getNode();ve(d instanceof lt,"serverChildren would be complete if leaf node"),u=ER(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Nt(n);let d=_R(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,xn(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,lt.EMPTY_NODE,xn(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=pE(r,Jd(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||gE(r,Vt())!=null,Qm(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vY{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new yR(r.getIndex()),i=BK(r);this.processor_=hY(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(lt.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(lt.EMPTY_NODE,a.getNode(),null),u=new Iu(c,o.isFullyInitialized(),s.filtersNodes()),d=new Iu(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=$_(d,u),this.eventGenerator_=new VK(this.query_)}get query(){return this.query_}}function EY(t){return t.viewCache_.serverCache.getNode()}function _Y(t){return fE(t.viewCache_)}function CY(t,e){const n=Jd(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Tt(e)&&!n.getImmediateChild(Nt(e)).isEmpty())?n.getChild(e):null}function p2(t){return t.eventRegistrations_.length===0}function SY(t,e){t.eventRegistrations_.push(e)}function g2(t,e,n){const r=[];if(n){ve(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function m2(t,e,n,r){e.type===Zo.MERGE&&e.source.queryId!==null&&(ve(Jd(t.viewCache_),"We should always have a full cache before handling merges"),ve(fE(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=pY(t.processor_,s,e,n,r);return fY(t.processor_,i.viewCache),ve(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Q6(t,i.changes,i.viewCache.eventCache.getNode(),null)}function AY(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Zn,(i,o)=>{r.push(kp(i,o))}),n.isFullyInitialized()&&r.push(B6(n.getNode())),Q6(t,r,n.getNode(),e)}function Q6(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return GK(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yE;class Z6{constructor(){this.views=new Map}}function IY(t){ve(!yE,"__referenceConstructor has already been defined"),yE=t}function NY(){return ve(yE,"Reference.ts has not been loaded"),yE}function xY(t){return t.views.size===0}function SR(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return ve(i!=null,"SyncTree gave us an op for an invalid query."),m2(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(m2(o,e,n,r));return i}}function X6(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=pE(n,s?r:null),c=!1;a?c=!0:r instanceof lt?(a=ER(n,r),c=!1):(a=lt.EMPTY_NODE,c=!1);const l=$_(new Iu(a,c,!1),new Iu(r,s,!1));return new vY(e,l)}return o}function TY(t,e,n,r,s,i){const o=X6(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),SY(o,n),AY(o,n)}function RY(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Nu(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(g2(l,n,r)),p2(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(g2(c,n,r)),p2(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!Nu(t)&&i.push(new(NY())(e._repo,e._path)),{removed:i,events:o}}function J6(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function iu(t,e){let n=null;for(const r of t.views.values())n=n||CY(r,e);return n}function e8(t,e){if(e._queryParams.loadsAllData())return L_(t);{const r=e._queryIdentifier;return t.views.get(r)}}function t8(t,e){return e8(t,e)!=null}function Nu(t){return L_(t)!=null}function L_(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wE;function PY(t){ve(!wE,"__referenceConstructor has already been defined"),wE=t}function OY(){return ve(wE,"Reference.ts has not been loaded"),wE}let kY=1;class y2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new On(null),this.pendingWriteTree_=cY(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function n8(t,e,n,r,s){return ZK(t.pendingWriteTree_,e,n,r,s),s?h0(t,new Xd(F6(),e,n)):[]}function vd(t,e,n=!1){const r=XK(t.pendingWriteTree_,e);if(JK(t.pendingWriteTree_,e)){let i=new On(null);return r.snap!=null?i=i.set(Vt(),!0):pi(r.children,o=>{i=i.set(new bn(o),!0)}),h0(t,new hE(r.path,i,n))}else return[]}function d0(t,e,n){return h0(t,new Xd(bR(),e,n))}function DY(t,e,n){const r=On.fromObject(n);return h0(t,new $y(bR(),e,r))}function $Y(t,e){return h0(t,new Dy(bR(),e))}function MY(t,e,n){const r=IR(t,n);if(r){const s=NR(r),i=s.path,o=s.queryId,a=Ts(i,e),c=new Dy(vR(o),a);return xR(t,i,c)}else return[]}function bE(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||t8(o,e))){const c=RY(o,e,n,r);xY(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>Nu(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=BY(h);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,y=o8(t,g);t.listenProvider_.startListening(Xm(w),My(t,w),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Xm(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(U_(h));t.listenProvider_.stopListening(Xm(h),f)}))}jY(t,l)}return a}function r8(t,e,n,r){const s=IR(t,r);if(s!=null){const i=NR(s),o=i.path,a=i.queryId,c=Ts(o,e),l=new Xd(vR(a),c,n);return xR(t,o,l)}else return[]}function LY(t,e,n,r){const s=IR(t,r);if(s){const i=NR(s),o=i.path,a=i.queryId,c=Ts(o,e),l=On.fromObject(n),u=new $y(vR(a),c,l);return xR(t,o,u)}else return[]}function DI(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=Ts(h,s);i=i||iu(f,p),o=o||Nu(f)});let a=t.syncPointTree_.get(s);a?(o=o||Nu(a),i=i||iu(a,Vt())):(a=new Z6,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=lt.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=iu(p,Vt());g&&(i=i.updateImmediateChild(f,g))}));const l=t8(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=U_(e);ve(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=FY();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=M_(t.pendingWriteTree_,s);let d=TY(a,e,n,u,i,c);if(!l&&!o&&!r){const h=e8(a,e);d=d.concat(WY(t,e,h))}return d}function AR(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Ts(o,e),l=iu(a,c);if(l)return l});return q6(s,e,i,n,!0)}function UY(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=Ts(l,n);r=r||iu(u,d)});let s=t.syncPointTree_.get(n);s?r=r||iu(s,Vt()):(s=new Z6,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Iu(r,!0,!1):null,a=M_(t.pendingWriteTree_,e._path),c=X6(s,e,a,i?o.getNode():lt.EMPTY_NODE,i);return _Y(c)}function h0(t,e){return s8(e,t.syncPointTree_,null,M_(t.pendingWriteTree_,Vt()))}function s8(t,e,n,r){if(Tt(t.path))return i8(t,e,n,r);{const s=e.get(Vt());n==null&&s!=null&&(n=iu(s,Vt()));let i=[];const o=Nt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=V6(r,o);i=i.concat(s8(a,c,l,u))}return s&&(i=i.concat(SR(s,t,r,n))),i}}function i8(t,e,n,r){const s=e.get(Vt());n==null&&s!=null&&(n=iu(s,Vt()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=V6(r,o),u=t.operationForChild(o);u&&(i=i.concat(i8(u,a,c,l)))}),s&&(i=i.concat(SR(s,t,r,n))),i}function o8(t,e){const n=e.query,r=My(t,n);return{hashFn:()=>(EY(e)||lt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?MY(t,n._path,r):$Y(t,n._path);{const i=UG(s,n);return bE(t,n,null,i)}}}}function My(t,e){const n=U_(e);return t.queryToTagMap.get(n)}function U_(t){return t._path.toString()+"$"+t._queryIdentifier}function IR(t,e){return t.tagToQueryMap.get(e)}function NR(t){const e=t.indexOf("$");return ve(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new bn(t.substr(0,e))}}function xR(t,e,n){const r=t.syncPointTree_.get(e);ve(r,"Missing sync point for query tag that we're tracking");const s=M_(t.pendingWriteTree_,e);return SR(r,n,s,null)}function BY(t){return t.fold((e,n,r)=>{if(n&&Nu(n))return[L_(n)];{let s=[];return n&&(s=J6(n)),pi(r,(i,o)=>{s=s.concat(o)}),s}})}function Xm(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(OY())(t._repo,t._path):t}function jY(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=U_(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function FY(){return kY++}function WY(t,e,n){const r=e._path,s=My(t,e),i=o8(t,n),o=t.listenProvider_.startListening(Xm(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)ve(!Nu(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Tt(l)&&u&&Nu(u))return[L_(u).query];{let h=[];return u&&(h=h.concat(J6(u).map(f=>f.query))),pi(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(Xm(u),My(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new TR(n)}node(){return this.node_}}class RR{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=br(this.path_,e);return new RR(this.syncTree_,n)}node(){return AR(this.syncTree_,this.path_)}}const zY=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},w2=function(t,e,n){if(!t||typeof t!="object")return t;if(ve(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return HY(t[".sv"],e,n);if(typeof t[".sv"]=="object")return qY(t[".sv"],e);ve(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},HY=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ve(!1,"Unexpected server value: "+t)}},qY=function(t,e,n){t.hasOwnProperty("increment")||ve(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ve(!1,"Unexpected increment value: "+r);const s=e.node();if(ve(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},VY=function(t,e,n,r){return PR(e,new RR(n,t),r)},a8=function(t,e,n){return PR(t,new TR(e),n)};function PR(t,e,n){const r=t.getPriority().val(),s=w2(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=w2(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Tr(a,Or(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Tr(s))),o.forEachChild(Zn,(a,c)=>{const l=PR(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function kR(t,e){let n=e instanceof bn?e:new bn(e),r=t,s=Nt(n);for(;s!==null;){const i=Pp(r.node.children,s)||{children:{},childCount:0};r=new OR(s,r,i),n=xn(n),s=Nt(n)}return r}function bg(t){return t.node.value}function c8(t,e){t.node.value=e,$I(t)}function l8(t){return t.node.childCount>0}function GY(t){return bg(t)===void 0&&!l8(t)}function B_(t,e){pi(t.node.children,(n,r)=>{e(new OR(n,t,r))})}function u8(t,e,n,r){n&&e(t),B_(t,s=>{u8(s,e,!0)})}function KY(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function f0(t){return new bn(t.parent===null?t.name:f0(t.parent)+"/"+t.name)}function $I(t){t.parent!==null&&YY(t.parent,t.name,t)}function YY(t,e,n){const r=GY(n),s=Xc(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,$I(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,$I(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QY=/[\[\].#$\/\u0000-\u001F\u007F]/,ZY=/[\[\].#$\u0000-\u001F\u007F]/,F1=10*1024*1024,d8=function(t){return typeof t=="string"&&t.length!==0&&!QY.test(t)},h8=function(t){return typeof t=="string"&&t.length!==0&&!ZY.test(t)},XY=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),h8(t)},JY=function(t,e,n,r){DR(cR(t,"value"),e,n)},DR=function(t,e,n){const r=n instanceof bn?new yK(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+od(r));if(typeof e=="function")throw new Error(t+"contains a function "+od(r)+" with contents = "+e.toString());if(l6(e))throw new Error(t+"contains "+e.toString()+" "+od(r));if(typeof e=="string"&&e.length>F1/3&&k_(e)>F1)throw new Error(t+"contains a string greater than "+F1+" utf8 bytes "+od(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(pi(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!d8(o)))throw new Error(t+" contains an invalid key ("+o+") "+od(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);wK(r,o),DR(t,a,r),bK(r)}),s&&i)throw new Error(t+' contains ".value" child '+od(r)+" in addition to actual children.")}},f8=function(t,e,n,r){if(!h8(n))throw new Error(cR(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},eQ=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),f8(t,e,n)},p8=function(t,e){if(Nt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},tQ=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!d8(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!XY(n))throw new Error(cR(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nQ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $R(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!pR(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function g8(t,e,n){$R(t,n),m8(t,r=>pR(r,e))}function Ga(t,e,n){$R(t,n),m8(t,r=>Qo(r,e)||Qo(e,r))}function m8(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(rQ(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function rQ(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Km&&fs("event: "+n.toString()),wg(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sQ="repo_interrupt",iQ=25;class oQ{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new nQ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dE(),this.transactionQueueTree_=new OR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function aQ(t,e,n){if(t.stats_=hR(t.repoInfo_),t.forceRestClient_||WG())t.server_=new uE(t.repoInfo_,(r,s,i,o)=>{b2(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>v2(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Dc(t.repoInfo_,e,(r,s,i,o)=>{b2(t,r,s,i,o)},r=>{v2(t,r)},r=>{lQ(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=GG(t.repoInfo_,()=>new qK(t.stats_,t.server_)),t.infoData_=new jK,t.infoSyncTree_=new y2({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=d0(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),LR(t,"connected",!1),t.serverSyncTree_=new y2({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Ga(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function cQ(t){const n=t.infoData_.getNode(new bn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function MR(t){return zY({timestamp:cQ(t)})}function b2(t,e,n,r,s){t.dataUpdateCount++;const i=new bn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=iE(n,l=>Or(l));o=LY(t.serverSyncTree_,i,c,s)}else{const c=Or(n);o=r8(t.serverSyncTree_,i,c,s)}else if(r){const c=iE(n,l=>Or(l));o=DY(t.serverSyncTree_,i,c)}else{const c=Or(n);o=d0(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=F_(t,i)),Ga(t.eventQueue_,a,o)}function v2(t,e){LR(t,"connected",e),e===!1&&hQ(t)}function lQ(t,e){pi(e,(n,r)=>{LR(t,n,r)})}function LR(t,e,n){const r=new bn("/.info/"+e),s=Or(n);t.infoData_.updateSnapshot(r,s);const i=d0(t.infoSyncTree_,r,s);Ga(t.eventQueue_,r,i)}function y8(t){return t.nextWriteId_++}function uQ(t,e,n){const r=UY(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Or(s).withIndex(e._queryParams.getIndex());DI(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=d0(t.serverSyncTree_,e._path,i);else{const a=My(t.serverSyncTree_,e);o=r8(t.serverSyncTree_,e._path,i,a)}return Ga(t.eventQueue_,e._path,o),bE(t.serverSyncTree_,e,n,null,!0),i},s=>(j_(t,"get for query "+wr(e)+" failed: "+s),Promise.reject(new Error(s))))}function dQ(t,e,n,r,s){j_(t,"set",{path:e.toString(),value:n,priority:r});const i=MR(t),o=Or(n,r),a=AR(t.serverSyncTree_,e),c=a8(o,a,i),l=y8(t),u=n8(t.serverSyncTree_,e,c,l,!0);$R(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||ci("set at "+e+" failed: "+h);const g=vd(t.serverSyncTree_,l,!p);Ga(t.eventQueue_,e,g),mQ(t,s,h,f)});const d=_8(t,e);F_(t,d),Ga(t.eventQueue_,d,[])}function hQ(t){j_(t,"onDisconnectEvents");const e=MR(t),n=dE();TI(t.onDisconnect_,Vt(),(s,i)=>{const o=VY(s,i,t.serverSyncTree_,e);j6(n,s,o)});let r=[];TI(n,Vt(),(s,i)=>{r=r.concat(d0(t.serverSyncTree_,s,i));const o=_8(t,s);F_(t,o)}),t.onDisconnect_=dE(),Ga(t.eventQueue_,Vt(),r)}function fQ(t,e,n){let r;Nt(e._path)===".info"?r=DI(t.infoSyncTree_,e,n):r=DI(t.serverSyncTree_,e,n),g8(t.eventQueue_,e._path,r)}function pQ(t,e,n){let r;Nt(e._path)===".info"?r=bE(t.infoSyncTree_,e,n):r=bE(t.serverSyncTree_,e,n),g8(t.eventQueue_,e._path,r)}function gQ(t){t.persistentConnection_&&t.persistentConnection_.interrupt(sQ)}function j_(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),fs(n,...e)}function mQ(t,e,n,r){e&&wg(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function w8(t,e,n){return AR(t.serverSyncTree_,e,n)||lt.EMPTY_NODE}function UR(t,e=t.transactionQueueTree_){if(e||W_(t,e),bg(e)){const n=v8(t,e);ve(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&yQ(t,f0(e),n)}else l8(e)&&B_(e,n=>{UR(t,n)})}function yQ(t,e,n){const r=n.map(l=>l.currentWriteId),s=w8(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];ve(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Ts(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{j_(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(vd(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();W_(t,kR(t.transactionQueueTree_,e)),UR(t,t.transactionQueueTree_),Ga(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)wg(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ci("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}F_(t,e)}},o)}function F_(t,e){const n=b8(t,e),r=f0(n),s=v8(t,n);return wQ(t,s,r),r}function wQ(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=Ts(n,c.path);let u=!1,d;if(ve(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(vd(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=iQ)u=!0,d="maxretry",s=s.concat(vd(t.serverSyncTree_,c.currentWriteId,!0));else{const h=w8(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){DR("transaction failed: Data returned ",f,c.path);let p=Or(f);typeof f=="object"&&f!=null&&Xc(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,y=MR(t),b=a8(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=y8(t),o.splice(o.indexOf(w),1),s=s.concat(n8(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(vd(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat(vd(t.serverSyncTree_,c.currentWriteId,!0))}Ga(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}W_(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)wg(r[a]);UR(t,t.transactionQueueTree_)}function b8(t,e){let n,r=t.transactionQueueTree_;for(n=Nt(e);n!==null&&bg(r)===void 0;)r=kR(r,n),e=xn(e),n=Nt(e);return r}function v8(t,e){const n=[];return E8(t,e,n),n.sort((r,s)=>r.order-s.order),n}function E8(t,e,n){const r=bg(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);B_(e,s=>{E8(t,s,n)})}function W_(t,e){const n=bg(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,c8(e,n.length>0?n:void 0)}B_(e,r=>{W_(t,r)})}function _8(t,e){const n=f0(b8(t,e)),r=kR(t.transactionQueueTree_,e);return KY(r,s=>{W1(t,s)}),W1(t,r),u8(r,s=>{W1(t,s)}),n}function W1(t,e){const n=bg(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ve(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(ve(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(vd(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?c8(e,void 0):n.length=i+1,Ga(t.eventQueue_,f0(e),s);for(let o=0;o<r.length;o++)wg(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bQ(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function vQ(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ci(`Invalid query segment '${n}' in query '${t}'`)}return e}const E2=function(t,e){const n=EQ(t),r=n.namespace;n.domain==="firebase.com"&&zc(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&zc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||kG();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new E6(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new bn(n.pathString)}},EQ=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=bQ(t.substring(u,d)));const h=vQ(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Q{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+wr(this.snapshot.exportVal())}}class CQ{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ve(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Tt(this._path)?null:R6(this._path)}get ref(){return new Jc(this._repo,this._path)}get _queryIdentifier(){const e=o2(this._queryParams),n=uR(e);return n==="{}"?"default":n}get _queryObject(){return o2(this._queryParams)}isEqual(e){if(e=mg(e),!(e instanceof BR))return!1;const n=this._repo===e._repo,r=pR(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+mK(this._path)}}class Jc extends BR{constructor(e,n){super(e,n,new wR,!1)}get parent(){const e=O6(this._path);return e===null?null:new Jc(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ly{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new bn(e),r=MI(this.ref,e);return new Ly(this._node.getChild(n),r,Zn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new Ly(s,MI(this.ref,r),Zn)))}hasChild(e){const n=new bn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function eo(t,e){return t=mg(t),t._checkNotDeleted("ref"),e!==void 0?MI(t._root,e):t._root}function MI(t,e){return t=mg(t),Nt(t._path)===null?eQ("child","path",e):f8("child","path",e),new Jc(t._repo,br(t._path,e))}function SQ(t){return p8("remove",t._path),Jm(t,null)}function Jm(t,e){t=mg(t),p8("set",t._path),JY("set",e,t._path);const n=new O_;return dQ(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function fd(t){t=mg(t);const e=new C8(()=>{}),n=new z_(e);return uQ(t._repo,t,n).then(r=>new Ly(r,new Jc(t._repo,t._path),t._queryParams.getIndex()))}class z_{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new _Q("value",this,new Ly(e.snapshotNode,new Jc(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new CQ(this,e,n):null}matches(e){return e instanceof z_?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function AQ(t,e,n,r,s){const i=new C8(n,void 0),o=new z_(i);return fQ(t._repo,t,o),()=>pQ(t._repo,t,o)}function _2(t,e,n,r){return AQ(t,"value",e)}IY(Jc);PY(Jc);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IQ="FIREBASE_DATABASE_EMULATOR_HOST",LI={};let NQ=!1;function xQ(t,e,n,r){t.repoInfo_=new E6(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function TQ(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||zc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fs("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=E2(i,s),a=o.repoInfo,c;typeof process<"u"&&Wk&&(c=Wk[IQ]),c?(i=`http://${c}?ns=${a.namespace}`,o=E2(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new HG(t.name,t.options,e);tQ("Invalid Firebase Database URL",o),Tt(o.path)||zc("Database URL must point to the root of a Firebase Database (not including a child path).");const u=PQ(a,t,l,new zG(t.name,n));return new OQ(u,t)}function RQ(t,e){const n=LI[e];(!n||n[t.key]!==t)&&zc(`Database ${e}(${t.repoInfo_}) has already been deleted.`),gQ(t),delete n[t.key]}function PQ(t,e,n,r){let s=LI[e.name];s||(s={},LI[e.name]=s);let i=s[t.toURLString()];return i&&zc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new oQ(t,NQ,n,r),s[t.toURLString()]=i,i}class OQ{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(aQ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Jc(this._repo,Vt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(RQ(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&zc("Cannot call "+e+" on a deleted database.")}}function kQ(t=r6(),e){const n=dG(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=eV("database");r&&DQ(n,...r)}return n}function DQ(t,e,n,r={}){t=mg(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&zc("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&zc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new _v(_v.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:tV(r.mockUserToken,t.app.options.projectId);i=new _v(o)}xQ(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Q(t){NG(pG),oE(new Ny("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return TQ(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),np(zk,Hk,t),np(zk,Hk,"esm2017")}Dc.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Dc.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};$Q();const MQ={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},LQ=gG().length?r6():n6(MQ),vE=kQ(LQ);var UI={},S8={exports:{}},ji={},A8={exports:{}},I8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,k){var B=R.length;R.push(k);e:for(;0<B;){var H=B-1>>>1,X=R[H];if(0<s(X,k))R[H]=k,R[B]=X,B=H;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var k=R[0],B=R.pop();if(B!==k){R[0]=B;e:for(var H=0,X=R.length,se=X>>>1;H<se;){var ne=2*(H+1)-1,ae=R[ne],me=ne+1,Z=R[me];if(0>s(ae,B))me<X&&0>s(Z,ae)?(R[H]=Z,R[me]=B,H=me):(R[H]=ae,R[ne]=B,H=ne);else if(me<X&&0>s(Z,B))R[H]=Z,R[me]=B,H=me;else break e}}return k}function s(R,k){var B=R.sortIndex-k.sortIndex;return B!==0?B:R.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(R){for(var k=n(l);k!==null;){if(k.callback===null)r(l);else if(k.startTime<=R)r(l),k.sortIndex=k.expirationTime,e(c,k);else break;k=n(l)}}function _(R){if(g=!1,E(R),!p)if(n(c)!==null)p=!0,N(C);else{var k=n(l);k!==null&&$(_,k.startTime-R)}}function C(R,k){p=!1,g&&(g=!1,y(x),x=-1),f=!0;var B=h;try{for(E(k),d=n(c);d!==null&&(!(d.expirationTime>k)||R&&!P());){var H=d.callback;if(typeof H=="function"){d.callback=null,h=d.priorityLevel;var X=H(d.expirationTime<=k);k=t.unstable_now(),typeof X=="function"?d.callback=X:d===n(c)&&r(c),E(k)}else r(c);d=n(c)}if(d!==null)var se=!0;else{var ne=n(l);ne!==null&&$(_,ne.startTime-k),se=!1}return se}finally{d=null,h=B,f=!1}}var I=!1,A=null,x=-1,S=5,D=-1;function P(){return!(t.unstable_now()-D<S)}function U(){if(A!==null){var R=t.unstable_now();D=R;var k=!0;try{k=A(!0,R)}finally{k?q():(I=!1,A=null)}}else I=!1}var q;if(typeof b=="function")q=function(){b(U)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,T=j.port2;j.port1.onmessage=U,q=function(){T.postMessage(null)}}else q=function(){w(U,0)};function N(R){A=R,I||(I=!0,q())}function $(R,k){x=w(function(){R(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,N(C))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var k=3;break;default:k=h}var B=h;h=k;try{return R()}finally{h=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,k){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var B=h;h=R;try{return k()}finally{h=B}},t.unstable_scheduleCallback=function(R,k,B){var H=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?H+B:H):B=H,R){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=B+X,R={id:u++,callback:k,priorityLevel:R,startTime:B,expirationTime:X,sortIndex:-1},B>H?(R.sortIndex=B,e(l,R),n(c)===null&&R===n(l)&&(g?(y(x),x=-1):g=!0,$(_,B-H))):(R.sortIndex=X,e(c,R),p||f||(p=!0,N(C))),R},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(R){var k=h;return function(){var B=h;h=k;try{return R.apply(this,arguments)}finally{h=B}}}})(I8);A8.exports=I8;var UQ=A8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BQ=O,Li=UQ;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var N8=new Set,Uy={};function Th(t,e){$p(t,e),$p(t+"Capture",e)}function $p(t,e){for(Uy[t]=e,t=0;t<e.length;t++)N8.add(e[t])}var Hc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),BI=Object.prototype.hasOwnProperty,jQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C2={},S2={};function FQ(t){return BI.call(S2,t)?!0:BI.call(C2,t)?!1:jQ.test(t)?S2[t]=!0:(C2[t]=!0,!1)}function WQ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zQ(t,e,n,r){if(e===null||typeof e>"u"||WQ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ms(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jr[t]=new Ms(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jr[e]=new Ms(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jr[t]=new Ms(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jr[t]=new Ms(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jr[t]=new Ms(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jr[t]=new Ms(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jr[t]=new Ms(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jr[t]=new Ms(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jr[t]=new Ms(t,5,!1,t.toLowerCase(),null,!1,!1)});var jR=/[\-:]([a-z])/g;function FR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(jR,FR);Jr[e]=new Ms(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(jR,FR);Jr[e]=new Ms(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(jR,FR);Jr[e]=new Ms(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jr[t]=new Ms(t,1,!1,t.toLowerCase(),null,!1,!1)});Jr.xlinkHref=new Ms("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jr[t]=new Ms(t,1,!1,t.toLowerCase(),null,!0,!0)});function WR(t,e,n,r){var s=Jr.hasOwnProperty(e)?Jr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zQ(e,n,s,r)&&(n=null),r||s===null?FQ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var el=BQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pb=Symbol.for("react.element"),Bf=Symbol.for("react.portal"),jf=Symbol.for("react.fragment"),zR=Symbol.for("react.strict_mode"),jI=Symbol.for("react.profiler"),x8=Symbol.for("react.provider"),T8=Symbol.for("react.context"),HR=Symbol.for("react.forward_ref"),FI=Symbol.for("react.suspense"),WI=Symbol.for("react.suspense_list"),qR=Symbol.for("react.memo"),Il=Symbol.for("react.lazy"),R8=Symbol.for("react.offscreen"),A2=Symbol.iterator;function Xg(t){return t===null||typeof t!="object"?null:(t=A2&&t[A2]||t["@@iterator"],typeof t=="function"?t:null)}var Vn=Object.assign,z1;function Pm(t){if(z1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);z1=e&&e[1]||""}return`
`+z1+t}var H1=!1;function q1(t,e){if(!t||H1)return"";H1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{H1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pm(t):""}function HQ(t){switch(t.tag){case 5:return Pm(t.type);case 16:return Pm("Lazy");case 13:return Pm("Suspense");case 19:return Pm("SuspenseList");case 0:case 2:case 15:return t=q1(t.type,!1),t;case 11:return t=q1(t.type.render,!1),t;case 1:return t=q1(t.type,!0),t;default:return""}}function zI(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jf:return"Fragment";case Bf:return"Portal";case jI:return"Profiler";case zR:return"StrictMode";case FI:return"Suspense";case WI:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case T8:return(t.displayName||"Context")+".Consumer";case x8:return(t._context.displayName||"Context")+".Provider";case HR:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qR:return e=t.displayName||null,e!==null?e:zI(t.type)||"Memo";case Il:e=t._payload,t=t._init;try{return zI(t(e))}catch{}}return null}function qQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zI(e);case 8:return e===zR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function P8(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VQ(t){var e=P8(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gb(t){t._valueTracker||(t._valueTracker=VQ(t))}function O8(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=P8(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function EE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function HI(t,e){var n=e.checked;return Vn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function I2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xu(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function k8(t,e){e=e.checked,e!=null&&WR(t,"checked",e,!1)}function qI(t,e){k8(t,e);var n=xu(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?VI(t,e.type,n):e.hasOwnProperty("defaultValue")&&VI(t,e.type,xu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function N2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function VI(t,e,n){(e!=="number"||EE(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Om=Array.isArray;function ip(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xu(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function GI(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Vn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function x2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ge(92));if(Om(n)){if(1<n.length)throw Error(ge(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xu(n)}}function D8(t,e){var n=xu(e.value),r=xu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function T2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $8(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function KI(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$8(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mb,M8=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function By(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ey={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GQ=["Webkit","ms","Moz","O"];Object.keys(ey).forEach(function(t){GQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ey[e]=ey[t]})});function L8(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ey.hasOwnProperty(t)&&ey[t]?(""+e).trim():e+"px"}function U8(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=L8(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var KQ=Vn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function YI(t,e){if(e){if(KQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function QI(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ZI=null;function VR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var XI=null,op=null,ap=null;function R2(t){if(t=m0(t)){if(typeof XI!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=K_(e),XI(t.stateNode,t.type,e))}}function B8(t){op?ap?ap.push(t):ap=[t]:op=t}function j8(){if(op){var t=op,e=ap;if(ap=op=null,R2(t),e)for(t=0;t<e.length;t++)R2(e[t])}}function F8(t,e){return t(e)}function W8(){}var V1=!1;function z8(t,e,n){if(V1)return t(e,n);V1=!0;try{return F8(t,e,n)}finally{V1=!1,(op!==null||ap!==null)&&(W8(),j8())}}function jy(t,e){var n=t.stateNode;if(n===null)return null;var r=K_(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ge(231,e,typeof n));return n}var JI=!1;if(Hc)try{var Jg={};Object.defineProperty(Jg,"passive",{get:function(){JI=!0}}),window.addEventListener("test",Jg,Jg),window.removeEventListener("test",Jg,Jg)}catch{JI=!1}function YQ(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var ty=!1,_E=null,CE=!1,eN=null,QQ={onError:function(t){ty=!0,_E=t}};function ZQ(t,e,n,r,s,i,o,a,c){ty=!1,_E=null,YQ.apply(QQ,arguments)}function XQ(t,e,n,r,s,i,o,a,c){if(ZQ.apply(this,arguments),ty){if(ty){var l=_E;ty=!1,_E=null}else throw Error(ge(198));CE||(CE=!0,eN=l)}}function Rh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function H8(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function P2(t){if(Rh(t)!==t)throw Error(ge(188))}function JQ(t){var e=t.alternate;if(!e){if(e=Rh(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return P2(s),t;if(i===r)return P2(s),e;i=i.sibling}throw Error(ge(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ge(189))}}if(n.alternate!==r)throw Error(ge(190))}if(n.tag!==3)throw Error(ge(188));return n.stateNode.current===n?t:e}function q8(t){return t=JQ(t),t!==null?V8(t):null}function V8(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=V8(t);if(e!==null)return e;t=t.sibling}return null}var G8=Li.unstable_scheduleCallback,O2=Li.unstable_cancelCallback,eZ=Li.unstable_shouldYield,tZ=Li.unstable_requestPaint,nr=Li.unstable_now,nZ=Li.unstable_getCurrentPriorityLevel,GR=Li.unstable_ImmediatePriority,K8=Li.unstable_UserBlockingPriority,SE=Li.unstable_NormalPriority,rZ=Li.unstable_LowPriority,Y8=Li.unstable_IdlePriority,H_=null,ja=null;function sZ(t){if(ja&&typeof ja.onCommitFiberRoot=="function")try{ja.onCommitFiberRoot(H_,t,void 0,(t.current.flags&128)===128)}catch{}}var ta=Math.clz32?Math.clz32:aZ,iZ=Math.log,oZ=Math.LN2;function aZ(t){return t>>>=0,t===0?32:31-(iZ(t)/oZ|0)|0}var yb=64,wb=4194304;function km(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function AE(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=km(a):(i&=o,i!==0&&(r=km(i)))}else o=n&~s,o!==0?r=km(o):i!==0&&(r=km(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ta(e),s=1<<n,r|=t[n],e&=~s;return r}function cZ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lZ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ta(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=cZ(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function tN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Q8(){var t=yb;return yb<<=1,!(yb&4194240)&&(yb=64),t}function G1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function p0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ta(e),t[e]=n}function uZ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ta(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function KR(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ta(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var an=0;function Z8(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X8,YR,J8,eB,tB,nN=!1,bb=[],ou=null,au=null,cu=null,Fy=new Map,Wy=new Map,Ol=[],dZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function k2(t,e){switch(t){case"focusin":case"focusout":ou=null;break;case"dragenter":case"dragleave":au=null;break;case"mouseover":case"mouseout":cu=null;break;case"pointerover":case"pointerout":Fy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wy.delete(e.pointerId)}}function em(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=m0(e),e!==null&&YR(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function hZ(t,e,n,r,s){switch(e){case"focusin":return ou=em(ou,t,e,n,r,s),!0;case"dragenter":return au=em(au,t,e,n,r,s),!0;case"mouseover":return cu=em(cu,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Fy.set(i,em(Fy.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Wy.set(i,em(Wy.get(i)||null,t,e,n,r,s)),!0}return!1}function nB(t){var e=Ed(t.target);if(e!==null){var n=Rh(e);if(n!==null){if(e=n.tag,e===13){if(e=H8(n),e!==null){t.blockedOn=e,tB(t.priority,function(){J8(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rN(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ZI=r,n.target.dispatchEvent(r),ZI=null}else return e=m0(n),e!==null&&YR(e),t.blockedOn=n,!1;e.shift()}return!0}function D2(t,e,n){Cv(t)&&n.delete(e)}function fZ(){nN=!1,ou!==null&&Cv(ou)&&(ou=null),au!==null&&Cv(au)&&(au=null),cu!==null&&Cv(cu)&&(cu=null),Fy.forEach(D2),Wy.forEach(D2)}function tm(t,e){t.blockedOn===e&&(t.blockedOn=null,nN||(nN=!0,Li.unstable_scheduleCallback(Li.unstable_NormalPriority,fZ)))}function zy(t){function e(s){return tm(s,t)}if(0<bb.length){tm(bb[0],t);for(var n=1;n<bb.length;n++){var r=bb[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ou!==null&&tm(ou,t),au!==null&&tm(au,t),cu!==null&&tm(cu,t),Fy.forEach(e),Wy.forEach(e),n=0;n<Ol.length;n++)r=Ol[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ol.length&&(n=Ol[0],n.blockedOn===null);)nB(n),n.blockedOn===null&&Ol.shift()}var cp=el.ReactCurrentBatchConfig,IE=!0;function pZ(t,e,n,r){var s=an,i=cp.transition;cp.transition=null;try{an=1,QR(t,e,n,r)}finally{an=s,cp.transition=i}}function gZ(t,e,n,r){var s=an,i=cp.transition;cp.transition=null;try{an=4,QR(t,e,n,r)}finally{an=s,cp.transition=i}}function QR(t,e,n,r){if(IE){var s=rN(t,e,n,r);if(s===null)rS(t,e,r,NE,n),k2(t,r);else if(hZ(s,t,e,n,r))r.stopPropagation();else if(k2(t,r),e&4&&-1<dZ.indexOf(t)){for(;s!==null;){var i=m0(s);if(i!==null&&X8(i),i=rN(t,e,n,r),i===null&&rS(t,e,r,NE,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else rS(t,e,r,null,n)}}var NE=null;function rN(t,e,n,r){if(NE=null,t=VR(r),t=Ed(t),t!==null)if(e=Rh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=H8(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return NE=t,null}function rB(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nZ()){case GR:return 1;case K8:return 4;case SE:case rZ:return 16;case Y8:return 536870912;default:return 16}default:return 16}}var Gl=null,ZR=null,Sv=null;function sB(){if(Sv)return Sv;var t,e=ZR,n=e.length,r,s="value"in Gl?Gl.value:Gl.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Sv=s.slice(t,1<r?1-r:void 0)}function Av(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vb(){return!0}function $2(){return!1}function Fi(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?vb:$2,this.isPropagationStopped=$2,this}return Vn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vb)},persist:function(){},isPersistent:vb}),e}var vg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XR=Fi(vg),g0=Vn({},vg,{view:0,detail:0}),mZ=Fi(g0),K1,Y1,nm,q_=Vn({},g0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:JR,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nm&&(nm&&t.type==="mousemove"?(K1=t.screenX-nm.screenX,Y1=t.screenY-nm.screenY):Y1=K1=0,nm=t),K1)},movementY:function(t){return"movementY"in t?t.movementY:Y1}}),M2=Fi(q_),yZ=Vn({},q_,{dataTransfer:0}),wZ=Fi(yZ),bZ=Vn({},g0,{relatedTarget:0}),Q1=Fi(bZ),vZ=Vn({},vg,{animationName:0,elapsedTime:0,pseudoElement:0}),EZ=Fi(vZ),_Z=Vn({},vg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),CZ=Fi(_Z),SZ=Vn({},vg,{data:0}),L2=Fi(SZ),AZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xZ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NZ[t])?!!e[t]:!1}function JR(){return xZ}var TZ=Vn({},g0,{key:function(t){if(t.key){var e=AZ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Av(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IZ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:JR,charCode:function(t){return t.type==="keypress"?Av(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Av(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RZ=Fi(TZ),PZ=Vn({},q_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U2=Fi(PZ),OZ=Vn({},g0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:JR}),kZ=Fi(OZ),DZ=Vn({},vg,{propertyName:0,elapsedTime:0,pseudoElement:0}),$Z=Fi(DZ),MZ=Vn({},q_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LZ=Fi(MZ),UZ=[9,13,27,32],eP=Hc&&"CompositionEvent"in window,ny=null;Hc&&"documentMode"in document&&(ny=document.documentMode);var BZ=Hc&&"TextEvent"in window&&!ny,iB=Hc&&(!eP||ny&&8<ny&&11>=ny),B2=" ",j2=!1;function oB(t,e){switch(t){case"keyup":return UZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aB(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ff=!1;function jZ(t,e){switch(t){case"compositionend":return aB(e);case"keypress":return e.which!==32?null:(j2=!0,B2);case"textInput":return t=e.data,t===B2&&j2?null:t;default:return null}}function FZ(t,e){if(Ff)return t==="compositionend"||!eP&&oB(t,e)?(t=sB(),Sv=ZR=Gl=null,Ff=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iB&&e.locale!=="ko"?null:e.data;default:return null}}var WZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WZ[t.type]:e==="textarea"}function cB(t,e,n,r){B8(r),e=xE(e,"onChange"),0<e.length&&(n=new XR("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ry=null,Hy=null;function zZ(t){bB(t,0)}function V_(t){var e=Hf(t);if(O8(e))return t}function HZ(t,e){if(t==="change")return e}var lB=!1;if(Hc){var Z1;if(Hc){var X1="oninput"in document;if(!X1){var W2=document.createElement("div");W2.setAttribute("oninput","return;"),X1=typeof W2.oninput=="function"}Z1=X1}else Z1=!1;lB=Z1&&(!document.documentMode||9<document.documentMode)}function z2(){ry&&(ry.detachEvent("onpropertychange",uB),Hy=ry=null)}function uB(t){if(t.propertyName==="value"&&V_(Hy)){var e=[];cB(e,Hy,t,VR(t)),z8(zZ,e)}}function qZ(t,e,n){t==="focusin"?(z2(),ry=e,Hy=n,ry.attachEvent("onpropertychange",uB)):t==="focusout"&&z2()}function VZ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return V_(Hy)}function GZ(t,e){if(t==="click")return V_(e)}function KZ(t,e){if(t==="input"||t==="change")return V_(e)}function YZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ia=typeof Object.is=="function"?Object.is:YZ;function qy(t,e){if(ia(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!BI.call(e,s)||!ia(t[s],e[s]))return!1}return!0}function H2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function q2(t,e){var n=H2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=H2(n)}}function dB(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dB(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hB(){for(var t=window,e=EE();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=EE(t.document)}return e}function tP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function QZ(t){var e=hB(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dB(n.ownerDocument.documentElement,n)){if(r!==null&&tP(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=q2(n,i);var o=q2(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ZZ=Hc&&"documentMode"in document&&11>=document.documentMode,Wf=null,sN=null,sy=null,iN=!1;function V2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;iN||Wf==null||Wf!==EE(r)||(r=Wf,"selectionStart"in r&&tP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sy&&qy(sy,r)||(sy=r,r=xE(sN,"onSelect"),0<r.length&&(e=new XR("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wf)))}function Eb(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zf={animationend:Eb("Animation","AnimationEnd"),animationiteration:Eb("Animation","AnimationIteration"),animationstart:Eb("Animation","AnimationStart"),transitionend:Eb("Transition","TransitionEnd")},J1={},fB={};Hc&&(fB=document.createElement("div").style,"AnimationEvent"in window||(delete zf.animationend.animation,delete zf.animationiteration.animation,delete zf.animationstart.animation),"TransitionEvent"in window||delete zf.transitionend.transition);function G_(t){if(J1[t])return J1[t];if(!zf[t])return t;var e=zf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fB)return J1[t]=e[n];return t}var pB=G_("animationend"),gB=G_("animationiteration"),mB=G_("animationstart"),yB=G_("transitionend"),wB=new Map,G2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lu(t,e){wB.set(t,e),Th(e,[t])}for(var eS=0;eS<G2.length;eS++){var tS=G2[eS],XZ=tS.toLowerCase(),JZ=tS[0].toUpperCase()+tS.slice(1);Lu(XZ,"on"+JZ)}Lu(pB,"onAnimationEnd");Lu(gB,"onAnimationIteration");Lu(mB,"onAnimationStart");Lu("dblclick","onDoubleClick");Lu("focusin","onFocus");Lu("focusout","onBlur");Lu(yB,"onTransitionEnd");$p("onMouseEnter",["mouseout","mouseover"]);$p("onMouseLeave",["mouseout","mouseover"]);$p("onPointerEnter",["pointerout","pointerover"]);$p("onPointerLeave",["pointerout","pointerover"]);Th("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Th("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Th("onBeforeInput",["compositionend","keypress","textInput","paste"]);Th("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Th("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Th("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eX=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dm));function K2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,XQ(r,e,void 0,t),t.currentTarget=null}function bB(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;K2(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;K2(s,a,l),i=c}}}if(CE)throw t=eN,CE=!1,eN=null,t}function Rn(t,e){var n=e[uN];n===void 0&&(n=e[uN]=new Set);var r=t+"__bubble";n.has(r)||(vB(e,t,2,!1),n.add(r))}function nS(t,e,n){var r=0;e&&(r|=4),vB(n,t,r,e)}var _b="_reactListening"+Math.random().toString(36).slice(2);function Vy(t){if(!t[_b]){t[_b]=!0,N8.forEach(function(n){n!=="selectionchange"&&(eX.has(n)||nS(n,!1,t),nS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_b]||(e[_b]=!0,nS("selectionchange",!1,e))}}function vB(t,e,n,r){switch(rB(e)){case 1:var s=pZ;break;case 4:s=gZ;break;default:s=QR}n=s.bind(null,e,n,t),s=void 0,!JI||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function rS(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ed(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}z8(function(){var l=i,u=VR(n),d=[];e:{var h=wB.get(t);if(h!==void 0){var f=XR,p=t;switch(t){case"keypress":if(Av(n)===0)break e;case"keydown":case"keyup":f=RZ;break;case"focusin":p="focus",f=Q1;break;case"focusout":p="blur",f=Q1;break;case"beforeblur":case"afterblur":f=Q1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=M2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=wZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=kZ;break;case pB:case gB:case mB:f=EZ;break;case yB:f=$Z;break;case"scroll":f=mZ;break;case"wheel":f=LZ;break;case"copy":case"cut":case"paste":f=CZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=U2}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,E;b!==null;){E=b;var _=E.stateNode;if(E.tag===5&&_!==null&&(E=_,y!==null&&(_=jy(b,y),_!=null&&g.push(Gy(b,_,E)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==ZI&&(p=n.relatedTarget||n.fromElement)&&(Ed(p)||p[qc]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?Ed(p):null,p!==null&&(w=Rh(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=M2,_="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=U2,_="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:Hf(f),E=p==null?h:Hf(p),h=new g(_,b+"leave",f,n,u),h.target=w,h.relatedTarget=E,_=null,Ed(u)===l&&(g=new g(y,b+"enter",p,n,u),g.target=E,g.relatedTarget=w,_=g),w=_,f&&p)t:{for(g=f,y=p,b=0,E=g;E;E=tf(E))b++;for(E=0,_=y;_;_=tf(_))E++;for(;0<b-E;)g=tf(g),b--;for(;0<E-b;)y=tf(y),E--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=tf(g),y=tf(y)}g=null}else g=null;f!==null&&Y2(d,h,f,g,!1),p!==null&&w!==null&&Y2(d,w,p,g,!0)}}e:{if(h=l?Hf(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=HZ;else if(F2(h))if(lB)C=KZ;else{C=VZ;var I=qZ}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=GZ);if(C&&(C=C(t,l))){cB(d,C,n,u);break e}I&&I(t,h,l),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&VI(h,"number",h.value)}switch(I=l?Hf(l):window,t){case"focusin":(F2(I)||I.contentEditable==="true")&&(Wf=I,sN=l,sy=null);break;case"focusout":sy=sN=Wf=null;break;case"mousedown":iN=!0;break;case"contextmenu":case"mouseup":case"dragend":iN=!1,V2(d,n,u);break;case"selectionchange":if(ZZ)break;case"keydown":case"keyup":V2(d,n,u)}var A;if(eP)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ff?oB(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(iB&&n.locale!=="ko"&&(Ff||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ff&&(A=sB()):(Gl=u,ZR="value"in Gl?Gl.value:Gl.textContent,Ff=!0)),I=xE(l,x),0<I.length&&(x=new L2(x,t,null,n,u),d.push({event:x,listeners:I}),A?x.data=A:(A=aB(n),A!==null&&(x.data=A)))),(A=BZ?jZ(t,n):FZ(t,n))&&(l=xE(l,"onBeforeInput"),0<l.length&&(u=new L2("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=A))}bB(d,e)})}function Gy(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xE(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=jy(t,n),i!=null&&r.unshift(Gy(t,i,s)),i=jy(t,e),i!=null&&r.push(Gy(t,i,s))),t=t.return}return r}function tf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Y2(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=jy(n,i),c!=null&&o.unshift(Gy(n,c,a))):s||(c=jy(n,i),c!=null&&o.push(Gy(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var tX=/\r\n?/g,nX=/\u0000|\uFFFD/g;function Q2(t){return(typeof t=="string"?t:""+t).replace(tX,`
`).replace(nX,"")}function Cb(t,e,n){if(e=Q2(e),Q2(t)!==e&&n)throw Error(ge(425))}function TE(){}var oN=null,aN=null;function cN(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lN=typeof setTimeout=="function"?setTimeout:void 0,rX=typeof clearTimeout=="function"?clearTimeout:void 0,Z2=typeof Promise=="function"?Promise:void 0,sX=typeof queueMicrotask=="function"?queueMicrotask:typeof Z2<"u"?function(t){return Z2.resolve(null).then(t).catch(iX)}:lN;function iX(t){setTimeout(function(){throw t})}function sS(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),zy(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);zy(e)}function lu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function X2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Eg=Math.random().toString(36).slice(2),$a="__reactFiber$"+Eg,Ky="__reactProps$"+Eg,qc="__reactContainer$"+Eg,uN="__reactEvents$"+Eg,oX="__reactListeners$"+Eg,aX="__reactHandles$"+Eg;function Ed(t){var e=t[$a];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qc]||n[$a]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=X2(t);t!==null;){if(n=t[$a])return n;t=X2(t)}return e}t=n,n=t.parentNode}return null}function m0(t){return t=t[$a]||t[qc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function K_(t){return t[Ky]||null}var dN=[],qf=-1;function Uu(t){return{current:t}}function kn(t){0>qf||(t.current=dN[qf],dN[qf]=null,qf--)}function Tn(t,e){qf++,dN[qf]=t.current,t.current=e}var Tu={},gs=Uu(Tu),li=Uu(!1),eh=Tu;function Mp(t,e){var n=t.type.contextTypes;if(!n)return Tu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ui(t){return t=t.childContextTypes,t!=null}function RE(){kn(li),kn(gs)}function J2(t,e,n){if(gs.current!==Tu)throw Error(ge(168));Tn(gs,e),Tn(li,n)}function EB(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ge(108,qQ(t)||"Unknown",s));return Vn({},n,r)}function PE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Tu,eh=gs.current,Tn(gs,t),Tn(li,li.current),!0}function eD(t,e,n){var r=t.stateNode;if(!r)throw Error(ge(169));n?(t=EB(t,e,eh),r.__reactInternalMemoizedMergedChildContext=t,kn(li),kn(gs),Tn(gs,t)):kn(li),Tn(li,n)}var _c=null,Y_=!1,iS=!1;function _B(t){_c===null?_c=[t]:_c.push(t)}function cX(t){Y_=!0,_B(t)}function Bu(){if(!iS&&_c!==null){iS=!0;var t=0,e=an;try{var n=_c;for(an=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_c=null,Y_=!1}catch(s){throw _c!==null&&(_c=_c.slice(t+1)),G8(GR,Bu),s}finally{an=e,iS=!1}}return null}var Vf=[],Gf=0,OE=null,kE=0,co=[],lo=0,th=null,Rc=1,Pc="";function ad(t,e){Vf[Gf++]=kE,Vf[Gf++]=OE,OE=t,kE=e}function CB(t,e,n){co[lo++]=Rc,co[lo++]=Pc,co[lo++]=th,th=t;var r=Rc;t=Pc;var s=32-ta(r)-1;r&=~(1<<s),n+=1;var i=32-ta(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Rc=1<<32-ta(e)+s|n<<s|r,Pc=i+t}else Rc=1<<i|n<<s|r,Pc=t}function nP(t){t.return!==null&&(ad(t,1),CB(t,1,0))}function rP(t){for(;t===OE;)OE=Vf[--Gf],Vf[Gf]=null,kE=Vf[--Gf],Vf[Gf]=null;for(;t===th;)th=co[--lo],co[lo]=null,Pc=co[--lo],co[lo]=null,Rc=co[--lo],co[lo]=null}var Di=null,Pi=null,Bn=!1,Ho=null;function SB(t,e){var n=uo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tD(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Di=t,Pi=lu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Di=t,Pi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=th!==null?{id:Rc,overflow:Pc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=uo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Di=t,Pi=null,!0):!1;default:return!1}}function hN(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fN(t){if(Bn){var e=Pi;if(e){var n=e;if(!tD(t,e)){if(hN(t))throw Error(ge(418));e=lu(n.nextSibling);var r=Di;e&&tD(t,e)?SB(r,n):(t.flags=t.flags&-4097|2,Bn=!1,Di=t)}}else{if(hN(t))throw Error(ge(418));t.flags=t.flags&-4097|2,Bn=!1,Di=t}}}function nD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Di=t}function Sb(t){if(t!==Di)return!1;if(!Bn)return nD(t),Bn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cN(t.type,t.memoizedProps)),e&&(e=Pi)){if(hN(t))throw AB(),Error(ge(418));for(;e;)SB(t,e),e=lu(e.nextSibling)}if(nD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pi=lu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pi=null}}else Pi=Di?lu(t.stateNode.nextSibling):null;return!0}function AB(){for(var t=Pi;t;)t=lu(t.nextSibling)}function Lp(){Pi=Di=null,Bn=!1}function sP(t){Ho===null?Ho=[t]:Ho.push(t)}var lX=el.ReactCurrentBatchConfig;function rm(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ge(309));var r=n.stateNode}if(!r)throw Error(ge(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ge(284));if(!n._owner)throw Error(ge(290,t))}return t}function Ab(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rD(t){var e=t._init;return e(t._payload)}function IB(t){function e(y,b){if(t){var E=y.deletions;E===null?(y.deletions=[b],y.flags|=16):E.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=fu(y,b),y.index=0,y.sibling=null,y}function i(y,b,E){return y.index=E,t?(E=y.alternate,E!==null?(E=E.index,E<b?(y.flags|=2,b):E):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,E,_){return b===null||b.tag!==6?(b=hS(E,y.mode,_),b.return=y,b):(b=s(b,E),b.return=y,b)}function c(y,b,E,_){var C=E.type;return C===jf?u(y,b,E.props.children,_,E.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Il&&rD(C)===b.type)?(_=s(b,E.props),_.ref=rm(y,b,E),_.return=y,_):(_=Ov(E.type,E.key,E.props,null,y.mode,_),_.ref=rm(y,b,E),_.return=y,_)}function l(y,b,E,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==E.containerInfo||b.stateNode.implementation!==E.implementation?(b=fS(E,y.mode,_),b.return=y,b):(b=s(b,E.children||[]),b.return=y,b)}function u(y,b,E,_,C){return b===null||b.tag!==7?(b=zd(E,y.mode,_,C),b.return=y,b):(b=s(b,E),b.return=y,b)}function d(y,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return b=hS(""+b,y.mode,E),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pb:return E=Ov(b.type,b.key,b.props,null,y.mode,E),E.ref=rm(y,null,b),E.return=y,E;case Bf:return b=fS(b,y.mode,E),b.return=y,b;case Il:var _=b._init;return d(y,_(b._payload),E)}if(Om(b)||Xg(b))return b=zd(b,y.mode,E,null),b.return=y,b;Ab(y,b)}return null}function h(y,b,E,_){var C=b!==null?b.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return C!==null?null:a(y,b,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case pb:return E.key===C?c(y,b,E,_):null;case Bf:return E.key===C?l(y,b,E,_):null;case Il:return C=E._init,h(y,b,C(E._payload),_)}if(Om(E)||Xg(E))return C!==null?null:u(y,b,E,_,null);Ab(y,E)}return null}function f(y,b,E,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(E)||null,a(b,y,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pb:return y=y.get(_.key===null?E:_.key)||null,c(b,y,_,C);case Bf:return y=y.get(_.key===null?E:_.key)||null,l(b,y,_,C);case Il:var I=_._init;return f(y,b,E,I(_._payload),C)}if(Om(_)||Xg(_))return y=y.get(E)||null,u(b,y,_,C,null);Ab(b,_)}return null}function p(y,b,E,_){for(var C=null,I=null,A=b,x=b=0,S=null;A!==null&&x<E.length;x++){A.index>x?(S=A,A=null):S=A.sibling;var D=h(y,A,E[x],_);if(D===null){A===null&&(A=S);break}t&&A&&D.alternate===null&&e(y,A),b=i(D,b,x),I===null?C=D:I.sibling=D,I=D,A=S}if(x===E.length)return n(y,A),Bn&&ad(y,x),C;if(A===null){for(;x<E.length;x++)A=d(y,E[x],_),A!==null&&(b=i(A,b,x),I===null?C=A:I.sibling=A,I=A);return Bn&&ad(y,x),C}for(A=r(y,A);x<E.length;x++)S=f(A,y,x,E[x],_),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?x:S.key),b=i(S,b,x),I===null?C=S:I.sibling=S,I=S);return t&&A.forEach(function(P){return e(y,P)}),Bn&&ad(y,x),C}function g(y,b,E,_){var C=Xg(E);if(typeof C!="function")throw Error(ge(150));if(E=C.call(E),E==null)throw Error(ge(151));for(var I=C=null,A=b,x=b=0,S=null,D=E.next();A!==null&&!D.done;x++,D=E.next()){A.index>x?(S=A,A=null):S=A.sibling;var P=h(y,A,D.value,_);if(P===null){A===null&&(A=S);break}t&&A&&P.alternate===null&&e(y,A),b=i(P,b,x),I===null?C=P:I.sibling=P,I=P,A=S}if(D.done)return n(y,A),Bn&&ad(y,x),C;if(A===null){for(;!D.done;x++,D=E.next())D=d(y,D.value,_),D!==null&&(b=i(D,b,x),I===null?C=D:I.sibling=D,I=D);return Bn&&ad(y,x),C}for(A=r(y,A);!D.done;x++,D=E.next())D=f(A,y,x,D.value,_),D!==null&&(t&&D.alternate!==null&&A.delete(D.key===null?x:D.key),b=i(D,b,x),I===null?C=D:I.sibling=D,I=D);return t&&A.forEach(function(U){return e(y,U)}),Bn&&ad(y,x),C}function w(y,b,E,_){if(typeof E=="object"&&E!==null&&E.type===jf&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case pb:e:{for(var C=E.key,I=b;I!==null;){if(I.key===C){if(C=E.type,C===jf){if(I.tag===7){n(y,I.sibling),b=s(I,E.props.children),b.return=y,y=b;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Il&&rD(C)===I.type){n(y,I.sibling),b=s(I,E.props),b.ref=rm(y,I,E),b.return=y,y=b;break e}n(y,I);break}else e(y,I);I=I.sibling}E.type===jf?(b=zd(E.props.children,y.mode,_,E.key),b.return=y,y=b):(_=Ov(E.type,E.key,E.props,null,y.mode,_),_.ref=rm(y,b,E),_.return=y,y=_)}return o(y);case Bf:e:{for(I=E.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===E.containerInfo&&b.stateNode.implementation===E.implementation){n(y,b.sibling),b=s(b,E.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=fS(E,y.mode,_),b.return=y,y=b}return o(y);case Il:return I=E._init,w(y,b,I(E._payload),_)}if(Om(E))return p(y,b,E,_);if(Xg(E))return g(y,b,E,_);Ab(y,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,E),b.return=y,y=b):(n(y,b),b=hS(E,y.mode,_),b.return=y,y=b),o(y)):n(y,b)}return w}var Up=IB(!0),NB=IB(!1),DE=Uu(null),$E=null,Kf=null,iP=null;function oP(){iP=Kf=$E=null}function aP(t){var e=DE.current;kn(DE),t._currentValue=e}function pN(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function lp(t,e){$E=t,iP=Kf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(oi=!0),t.firstContext=null)}function po(t){var e=t._currentValue;if(iP!==t)if(t={context:t,memoizedValue:e,next:null},Kf===null){if($E===null)throw Error(ge(308));Kf=t,$E.dependencies={lanes:0,firstContext:t}}else Kf=Kf.next=t;return e}var _d=null;function cP(t){_d===null?_d=[t]:_d.push(t)}function xB(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,cP(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vc(t,r)}function Vc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nl=!1;function lP(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TB(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $c(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function uu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,jt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vc(t,n)}return s=r.interleaved,s===null?(e.next=e,cP(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vc(t,n)}function Iv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,KR(t,n)}}function sD(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ME(t,e,n,r){var s=t.updateQueue;Nl=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Vn({},d,h);break e;case 2:Nl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);rh|=o,t.lanes=o,t.memoizedState=d}}function iD(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ge(191,s));s.call(r)}}}var y0={},Fa=Uu(y0),Yy=Uu(y0),Qy=Uu(y0);function Cd(t){if(t===y0)throw Error(ge(174));return t}function uP(t,e){switch(Tn(Qy,e),Tn(Yy,t),Tn(Fa,y0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:KI(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=KI(e,t)}kn(Fa),Tn(Fa,e)}function Bp(){kn(Fa),kn(Yy),kn(Qy)}function RB(t){Cd(Qy.current);var e=Cd(Fa.current),n=KI(e,t.type);e!==n&&(Tn(Yy,t),Tn(Fa,n))}function dP(t){Yy.current===t&&(kn(Fa),kn(Yy))}var Wn=Uu(0);function LE(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var oS=[];function hP(){for(var t=0;t<oS.length;t++)oS[t]._workInProgressVersionPrimary=null;oS.length=0}var Nv=el.ReactCurrentDispatcher,aS=el.ReactCurrentBatchConfig,nh=0,qn=null,gr=null,Pr=null,UE=!1,iy=!1,Zy=0,uX=0;function as(){throw Error(ge(321))}function fP(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ia(t[n],e[n]))return!1;return!0}function pP(t,e,n,r,s,i){if(nh=i,qn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nv.current=t===null||t.memoizedState===null?pX:gX,t=n(r,s),iy){i=0;do{if(iy=!1,Zy=0,25<=i)throw Error(ge(301));i+=1,Pr=gr=null,e.updateQueue=null,Nv.current=mX,t=n(r,s)}while(iy)}if(Nv.current=BE,e=gr!==null&&gr.next!==null,nh=0,Pr=gr=qn=null,UE=!1,e)throw Error(ge(300));return t}function gP(){var t=Zy!==0;return Zy=0,t}function Ca(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?qn.memoizedState=Pr=t:Pr=Pr.next=t,Pr}function go(){if(gr===null){var t=qn.alternate;t=t!==null?t.memoizedState:null}else t=gr.next;var e=Pr===null?qn.memoizedState:Pr.next;if(e!==null)Pr=e,gr=t;else{if(t===null)throw Error(ge(310));gr=t,t={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},Pr===null?qn.memoizedState=Pr=t:Pr=Pr.next=t}return Pr}function Xy(t,e){return typeof e=="function"?e(t):e}function cS(t){var e=go(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=gr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((nh&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,qn.lanes|=u,rh|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,ia(r,e.memoizedState)||(oi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,qn.lanes|=i,rh|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function lS(t){var e=go(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ia(i,e.memoizedState)||(oi=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function PB(){}function OB(t,e){var n=qn,r=go(),s=e(),i=!ia(r.memoizedState,s);if(i&&(r.memoizedState=s,oi=!0),r=r.queue,mP($B.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Pr!==null&&Pr.memoizedState.tag&1){if(n.flags|=2048,Jy(9,DB.bind(null,n,r,s,e),void 0,null),Ur===null)throw Error(ge(349));nh&30||kB(n,e,s)}return s}function kB(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qn.updateQueue,e===null?(e={lastEffect:null,stores:null},qn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function DB(t,e,n,r){e.value=n,e.getSnapshot=r,MB(e)&&LB(t)}function $B(t,e,n){return n(function(){MB(e)&&LB(t)})}function MB(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ia(t,n)}catch{return!0}}function LB(t){var e=Vc(t,1);e!==null&&na(e,t,1,-1)}function oD(t){var e=Ca();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xy,lastRenderedState:t},e.queue=t,t=t.dispatch=fX.bind(null,qn,t),[e.memoizedState,t]}function Jy(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qn.updateQueue,e===null?(e={lastEffect:null,stores:null},qn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function UB(){return go().memoizedState}function xv(t,e,n,r){var s=Ca();qn.flags|=t,s.memoizedState=Jy(1|e,n,void 0,r===void 0?null:r)}function Q_(t,e,n,r){var s=go();r=r===void 0?null:r;var i=void 0;if(gr!==null){var o=gr.memoizedState;if(i=o.destroy,r!==null&&fP(r,o.deps)){s.memoizedState=Jy(e,n,i,r);return}}qn.flags|=t,s.memoizedState=Jy(1|e,n,i,r)}function aD(t,e){return xv(8390656,8,t,e)}function mP(t,e){return Q_(2048,8,t,e)}function BB(t,e){return Q_(4,2,t,e)}function jB(t,e){return Q_(4,4,t,e)}function FB(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WB(t,e,n){return n=n!=null?n.concat([t]):null,Q_(4,4,FB.bind(null,e,t),n)}function yP(){}function zB(t,e){var n=go();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fP(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function HB(t,e){var n=go();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fP(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qB(t,e,n){return nh&21?(ia(n,e)||(n=Q8(),qn.lanes|=n,rh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,oi=!0),t.memoizedState=n)}function dX(t,e){var n=an;an=n!==0&&4>n?n:4,t(!0);var r=aS.transition;aS.transition={};try{t(!1),e()}finally{an=n,aS.transition=r}}function VB(){return go().memoizedState}function hX(t,e,n){var r=hu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},GB(t))KB(e,n);else if(n=xB(t,e,n,r),n!==null){var s=Ps();na(n,t,r,s),YB(n,e,r)}}function fX(t,e,n){var r=hu(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(GB(t))KB(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ia(a,o)){var c=e.interleaved;c===null?(s.next=s,cP(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=xB(t,e,s,r),n!==null&&(s=Ps(),na(n,t,r,s),YB(n,e,r))}}function GB(t){var e=t.alternate;return t===qn||e!==null&&e===qn}function KB(t,e){iy=UE=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function YB(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,KR(t,n)}}var BE={readContext:po,useCallback:as,useContext:as,useEffect:as,useImperativeHandle:as,useInsertionEffect:as,useLayoutEffect:as,useMemo:as,useReducer:as,useRef:as,useState:as,useDebugValue:as,useDeferredValue:as,useTransition:as,useMutableSource:as,useSyncExternalStore:as,useId:as,unstable_isNewReconciler:!1},pX={readContext:po,useCallback:function(t,e){return Ca().memoizedState=[t,e===void 0?null:e],t},useContext:po,useEffect:aD,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xv(4194308,4,FB.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xv(4194308,4,t,e)},useInsertionEffect:function(t,e){return xv(4,2,t,e)},useMemo:function(t,e){var n=Ca();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ca();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hX.bind(null,qn,t),[r.memoizedState,t]},useRef:function(t){var e=Ca();return t={current:t},e.memoizedState=t},useState:oD,useDebugValue:yP,useDeferredValue:function(t){return Ca().memoizedState=t},useTransition:function(){var t=oD(!1),e=t[0];return t=dX.bind(null,t[1]),Ca().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qn,s=Ca();if(Bn){if(n===void 0)throw Error(ge(407));n=n()}else{if(n=e(),Ur===null)throw Error(ge(349));nh&30||kB(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,aD($B.bind(null,r,i,t),[t]),r.flags|=2048,Jy(9,DB.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ca(),e=Ur.identifierPrefix;if(Bn){var n=Pc,r=Rc;n=(r&~(1<<32-ta(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zy++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uX++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gX={readContext:po,useCallback:zB,useContext:po,useEffect:mP,useImperativeHandle:WB,useInsertionEffect:BB,useLayoutEffect:jB,useMemo:HB,useReducer:cS,useRef:UB,useState:function(){return cS(Xy)},useDebugValue:yP,useDeferredValue:function(t){var e=go();return qB(e,gr.memoizedState,t)},useTransition:function(){var t=cS(Xy)[0],e=go().memoizedState;return[t,e]},useMutableSource:PB,useSyncExternalStore:OB,useId:VB,unstable_isNewReconciler:!1},mX={readContext:po,useCallback:zB,useContext:po,useEffect:mP,useImperativeHandle:WB,useInsertionEffect:BB,useLayoutEffect:jB,useMemo:HB,useReducer:lS,useRef:UB,useState:function(){return lS(Xy)},useDebugValue:yP,useDeferredValue:function(t){var e=go();return gr===null?e.memoizedState=t:qB(e,gr.memoizedState,t)},useTransition:function(){var t=lS(Xy)[0],e=go().memoizedState;return[t,e]},useMutableSource:PB,useSyncExternalStore:OB,useId:VB,unstable_isNewReconciler:!1};function Bo(t,e){if(t&&t.defaultProps){e=Vn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gN(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Vn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Z_={isMounted:function(t){return(t=t._reactInternals)?Rh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ps(),s=hu(t),i=$c(r,s);i.payload=e,n!=null&&(i.callback=n),e=uu(t,i,s),e!==null&&(na(e,t,s,r),Iv(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ps(),s=hu(t),i=$c(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=uu(t,i,s),e!==null&&(na(e,t,s,r),Iv(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ps(),r=hu(t),s=$c(n,r);s.tag=2,e!=null&&(s.callback=e),e=uu(t,s,r),e!==null&&(na(e,t,r,n),Iv(e,t,r))}};function cD(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!qy(n,r)||!qy(s,i):!0}function QB(t,e,n){var r=!1,s=Tu,i=e.contextType;return typeof i=="object"&&i!==null?i=po(i):(s=ui(e)?eh:gs.current,r=e.contextTypes,i=(r=r!=null)?Mp(t,s):Tu),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Z_,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function lD(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Z_.enqueueReplaceState(e,e.state,null)}function mN(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},lP(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=po(i):(i=ui(e)?eh:gs.current,s.context=Mp(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(gN(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Z_.enqueueReplaceState(s,s.state,null),ME(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function jp(t,e){try{var n="",r=e;do n+=HQ(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function uS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yN(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var yX=typeof WeakMap=="function"?WeakMap:Map;function ZB(t,e,n){n=$c(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){FE||(FE=!0,NN=r),yN(t,e)},n}function XB(t,e,n){n=$c(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){yN(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yN(t,e),typeof r!="function"&&(du===null?du=new Set([this]):du.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function uD(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new yX;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=PX.bind(null,t,e,n),e.then(t,t))}function dD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hD(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$c(-1,1),e.tag=2,uu(n,e,1))),n.lanes|=1),t)}var wX=el.ReactCurrentOwner,oi=!1;function As(t,e,n,r){e.child=t===null?NB(e,null,n,r):Up(e,t.child,n,r)}function fD(t,e,n,r,s){n=n.render;var i=e.ref;return lp(e,s),r=pP(t,e,n,r,i,s),n=gP(),t!==null&&!oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gc(t,e,s)):(Bn&&n&&nP(e),e.flags|=1,As(t,e,r,s),e.child)}function pD(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!AP(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,JB(t,e,i,r,s)):(t=Ov(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:qy,n(o,r)&&t.ref===e.ref)return Gc(t,e,s)}return e.flags|=1,t=fu(i,r),t.ref=e.ref,t.return=e,e.child=t}function JB(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(qy(i,r)&&t.ref===e.ref)if(oi=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(oi=!0);else return e.lanes=t.lanes,Gc(t,e,s)}return wN(t,e,n,r,s)}function e4(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tn(Qf,Ii),Ii|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tn(Qf,Ii),Ii|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Tn(Qf,Ii),Ii|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Tn(Qf,Ii),Ii|=r;return As(t,e,s,n),e.child}function t4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wN(t,e,n,r,s){var i=ui(n)?eh:gs.current;return i=Mp(e,i),lp(e,s),n=pP(t,e,n,r,i,s),r=gP(),t!==null&&!oi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Gc(t,e,s)):(Bn&&r&&nP(e),e.flags|=1,As(t,e,n,s),e.child)}function gD(t,e,n,r,s){if(ui(n)){var i=!0;PE(e)}else i=!1;if(lp(e,s),e.stateNode===null)Tv(t,e),QB(e,n,r),mN(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=po(l):(l=ui(n)?eh:gs.current,l=Mp(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&lD(e,o,r,l),Nl=!1;var h=e.memoizedState;o.state=h,ME(e,r,o,s),c=e.memoizedState,a!==r||h!==c||li.current||Nl?(typeof u=="function"&&(gN(e,n,u,r),c=e.memoizedState),(a=Nl||cD(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,TB(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Bo(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=po(c):(c=ui(n)?eh:gs.current,c=Mp(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&lD(e,o,r,c),Nl=!1,h=e.memoizedState,o.state=h,ME(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||li.current||Nl?(typeof f=="function"&&(gN(e,n,f,r),p=e.memoizedState),(l=Nl||cD(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return bN(t,e,n,r,i,s)}function bN(t,e,n,r,s,i){t4(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&eD(e,n,!1),Gc(t,e,i);r=e.stateNode,wX.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Up(e,t.child,null,i),e.child=Up(e,null,a,i)):As(t,e,a,i),e.memoizedState=r.state,s&&eD(e,n,!0),e.child}function n4(t){var e=t.stateNode;e.pendingContext?J2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&J2(t,e.context,!1),uP(t,e.containerInfo)}function mD(t,e,n,r,s){return Lp(),sP(s),e.flags|=256,As(t,e,n,r),e.child}var vN={dehydrated:null,treeContext:null,retryLane:0};function EN(t){return{baseLanes:t,cachePool:null,transitions:null}}function r4(t,e,n){var r=e.pendingProps,s=Wn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Tn(Wn,s&1),t===null)return fN(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=eC(o,r,0,null),t=zd(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=EN(n),e.memoizedState=vN,t):wP(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return bX(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=fu(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=fu(a,i):(i=zd(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?EN(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=vN,r}return i=t.child,t=i.sibling,r=fu(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wP(t,e){return e=eC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ib(t,e,n,r){return r!==null&&sP(r),Up(e,t.child,null,n),t=wP(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bX(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=uS(Error(ge(422))),Ib(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=eC({mode:"visible",children:r.children},s,0,null),i=zd(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Up(e,t.child,null,o),e.child.memoizedState=EN(o),e.memoizedState=vN,i);if(!(e.mode&1))return Ib(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ge(419)),r=uS(i,r,void 0),Ib(t,e,o,r)}if(a=(o&t.childLanes)!==0,oi||a){if(r=Ur,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vc(t,s),na(r,t,s,-1))}return SP(),r=uS(Error(ge(421))),Ib(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=OX.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Pi=lu(s.nextSibling),Di=e,Bn=!0,Ho=null,t!==null&&(co[lo++]=Rc,co[lo++]=Pc,co[lo++]=th,Rc=t.id,Pc=t.overflow,th=e),e=wP(e,r.children),e.flags|=4096,e)}function yD(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),pN(t.return,e,n)}function dS(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function s4(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(As(t,e,r.children,n),r=Wn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yD(t,n,e);else if(t.tag===19)yD(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Tn(Wn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&LE(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),dS(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&LE(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}dS(e,!0,n,null,i);break;case"together":dS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),rh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,n=fu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function vX(t,e,n){switch(e.tag){case 3:n4(e),Lp();break;case 5:RB(e);break;case 1:ui(e.type)&&PE(e);break;case 4:uP(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Tn(DE,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Tn(Wn,Wn.current&1),e.flags|=128,null):n&e.child.childLanes?r4(t,e,n):(Tn(Wn,Wn.current&1),t=Gc(t,e,n),t!==null?t.sibling:null);Tn(Wn,Wn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return s4(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Tn(Wn,Wn.current),r)break;return null;case 22:case 23:return e.lanes=0,e4(t,e,n)}return Gc(t,e,n)}var i4,_N,o4,a4;i4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_N=function(){};o4=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Cd(Fa.current);var i=null;switch(n){case"input":s=HI(t,s),r=HI(t,r),i=[];break;case"select":s=Vn({},s,{value:void 0}),r=Vn({},r,{value:void 0}),i=[];break;case"textarea":s=GI(t,s),r=GI(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=TE)}YI(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Uy.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Uy.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Rn("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};a4=function(t,e,n,r){n!==r&&(e.flags|=4)};function sm(t,e){if(!Bn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function cs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function EX(t,e,n){var r=e.pendingProps;switch(rP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cs(e),null;case 1:return ui(e.type)&&RE(),cs(e),null;case 3:return r=e.stateNode,Bp(),kn(li),kn(gs),hP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sb(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ho!==null&&(RN(Ho),Ho=null))),_N(t,e),cs(e),null;case 5:dP(e);var s=Cd(Qy.current);if(n=e.type,t!==null&&e.stateNode!=null)o4(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ge(166));return cs(e),null}if(t=Cd(Fa.current),Sb(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$a]=e,r[Ky]=i,t=(e.mode&1)!==0,n){case"dialog":Rn("cancel",r),Rn("close",r);break;case"iframe":case"object":case"embed":Rn("load",r);break;case"video":case"audio":for(s=0;s<Dm.length;s++)Rn(Dm[s],r);break;case"source":Rn("error",r);break;case"img":case"image":case"link":Rn("error",r),Rn("load",r);break;case"details":Rn("toggle",r);break;case"input":I2(r,i),Rn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Rn("invalid",r);break;case"textarea":x2(r,i),Rn("invalid",r)}YI(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Cb(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Cb(r.textContent,a,t),s=["children",""+a]):Uy.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Rn("scroll",r)}switch(n){case"input":gb(r),N2(r,i,!0);break;case"textarea":gb(r),T2(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=TE)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$8(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$a]=e,t[Ky]=r,i4(t,e,!1,!1),e.stateNode=t;e:{switch(o=QI(n,r),n){case"dialog":Rn("cancel",t),Rn("close",t),s=r;break;case"iframe":case"object":case"embed":Rn("load",t),s=r;break;case"video":case"audio":for(s=0;s<Dm.length;s++)Rn(Dm[s],t);s=r;break;case"source":Rn("error",t),s=r;break;case"img":case"image":case"link":Rn("error",t),Rn("load",t),s=r;break;case"details":Rn("toggle",t),s=r;break;case"input":I2(t,r),s=HI(t,r),Rn("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Vn({},r,{value:void 0}),Rn("invalid",t);break;case"textarea":x2(t,r),s=GI(t,r),Rn("invalid",t);break;default:s=r}YI(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?U8(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&M8(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&By(t,c):typeof c=="number"&&By(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uy.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Rn("scroll",t):c!=null&&WR(t,i,c,o))}switch(n){case"input":gb(t),N2(t,r,!1);break;case"textarea":gb(t),T2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xu(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ip(t,!!r.multiple,i,!1):r.defaultValue!=null&&ip(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=TE)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cs(e),null;case 6:if(t&&e.stateNode!=null)a4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ge(166));if(n=Cd(Qy.current),Cd(Fa.current),Sb(e)){if(r=e.stateNode,n=e.memoizedProps,r[$a]=e,(i=r.nodeValue!==n)&&(t=Di,t!==null))switch(t.tag){case 3:Cb(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cb(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$a]=e,e.stateNode=r}return cs(e),null;case 13:if(kn(Wn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bn&&Pi!==null&&e.mode&1&&!(e.flags&128))AB(),Lp(),e.flags|=98560,i=!1;else if(i=Sb(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ge(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ge(317));i[$a]=e}else Lp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cs(e),i=!1}else Ho!==null&&(RN(Ho),Ho=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Wn.current&1?vr===0&&(vr=3):SP())),e.updateQueue!==null&&(e.flags|=4),cs(e),null);case 4:return Bp(),_N(t,e),t===null&&Vy(e.stateNode.containerInfo),cs(e),null;case 10:return aP(e.type._context),cs(e),null;case 17:return ui(e.type)&&RE(),cs(e),null;case 19:if(kn(Wn),i=e.memoizedState,i===null)return cs(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)sm(i,!1);else{if(vr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=LE(t),o!==null){for(e.flags|=128,sm(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tn(Wn,Wn.current&1|2),e.child}t=t.sibling}i.tail!==null&&nr()>Fp&&(e.flags|=128,r=!0,sm(i,!1),e.lanes=4194304)}else{if(!r)if(t=LE(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),sm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Bn)return cs(e),null}else 2*nr()-i.renderingStartTime>Fp&&n!==1073741824&&(e.flags|=128,r=!0,sm(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=nr(),e.sibling=null,n=Wn.current,Tn(Wn,r?n&1|2:n&1),e):(cs(e),null);case 22:case 23:return CP(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ii&1073741824&&(cs(e),e.subtreeFlags&6&&(e.flags|=8192)):cs(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function _X(t,e){switch(rP(e),e.tag){case 1:return ui(e.type)&&RE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bp(),kn(li),kn(gs),hP(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dP(e),null;case 13:if(kn(Wn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));Lp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return kn(Wn),null;case 4:return Bp(),null;case 10:return aP(e.type._context),null;case 22:case 23:return CP(),null;case 24:return null;default:return null}}var Nb=!1,ps=!1,CX=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Yf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qn(t,e,r)}else n.current=null}function CN(t,e,n){try{n()}catch(r){Qn(t,e,r)}}var wD=!1;function SX(t,e){if(oN=IE,t=hB(),tP(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(aN={focusedElem:t,selectionRange:n},IE=!1,Ue=e;Ue!==null;)if(e=Ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ue=t;else for(;Ue!==null;){e=Ue;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Bo(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(_){Qn(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Ue=t;break}Ue=e.return}return p=wD,wD=!1,p}function oy(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&CN(e,n,i)}s=s.next}while(s!==r)}}function X_(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function SN(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function c4(t){var e=t.alternate;e!==null&&(t.alternate=null,c4(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$a],delete e[Ky],delete e[uN],delete e[oX],delete e[aX])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function l4(t){return t.tag===5||t.tag===3||t.tag===4}function bD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||l4(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function AN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=TE));else if(r!==4&&(t=t.child,t!==null))for(AN(t,e,n),t=t.sibling;t!==null;)AN(t,e,n),t=t.sibling}function IN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(IN(t,e,n),t=t.sibling;t!==null;)IN(t,e,n),t=t.sibling}var Gr=null,zo=!1;function il(t,e,n){for(n=n.child;n!==null;)u4(t,e,n),n=n.sibling}function u4(t,e,n){if(ja&&typeof ja.onCommitFiberUnmount=="function")try{ja.onCommitFiberUnmount(H_,n)}catch{}switch(n.tag){case 5:ps||Yf(n,e);case 6:var r=Gr,s=zo;Gr=null,il(t,e,n),Gr=r,zo=s,Gr!==null&&(zo?(t=Gr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Gr.removeChild(n.stateNode));break;case 18:Gr!==null&&(zo?(t=Gr,n=n.stateNode,t.nodeType===8?sS(t.parentNode,n):t.nodeType===1&&sS(t,n),zy(t)):sS(Gr,n.stateNode));break;case 4:r=Gr,s=zo,Gr=n.stateNode.containerInfo,zo=!0,il(t,e,n),Gr=r,zo=s;break;case 0:case 11:case 14:case 15:if(!ps&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&CN(n,e,o),s=s.next}while(s!==r)}il(t,e,n);break;case 1:if(!ps&&(Yf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qn(n,e,a)}il(t,e,n);break;case 21:il(t,e,n);break;case 22:n.mode&1?(ps=(r=ps)||n.memoizedState!==null,il(t,e,n),ps=r):il(t,e,n);break;default:il(t,e,n)}}function vD(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new CX),e.forEach(function(r){var s=kX.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Po(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Gr=a.stateNode,zo=!1;break e;case 3:Gr=a.stateNode.containerInfo,zo=!0;break e;case 4:Gr=a.stateNode.containerInfo,zo=!0;break e}a=a.return}if(Gr===null)throw Error(ge(160));u4(i,o,s),Gr=null,zo=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Qn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)d4(e,t),e=e.sibling}function d4(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Po(e,t),fa(t),r&4){try{oy(3,t,t.return),X_(3,t)}catch(g){Qn(t,t.return,g)}try{oy(5,t,t.return)}catch(g){Qn(t,t.return,g)}}break;case 1:Po(e,t),fa(t),r&512&&n!==null&&Yf(n,n.return);break;case 5:if(Po(e,t),fa(t),r&512&&n!==null&&Yf(n,n.return),t.flags&32){var s=t.stateNode;try{By(s,"")}catch(g){Qn(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&k8(s,i),QI(a,o);var l=QI(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?U8(s,d):u==="dangerouslySetInnerHTML"?M8(s,d):u==="children"?By(s,d):WR(s,u,d,l)}switch(a){case"input":qI(s,i);break;case"textarea":D8(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?ip(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?ip(s,!!i.multiple,i.defaultValue,!0):ip(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ky]=i}catch(g){Qn(t,t.return,g)}}break;case 6:if(Po(e,t),fa(t),r&4){if(t.stateNode===null)throw Error(ge(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Qn(t,t.return,g)}}break;case 3:if(Po(e,t),fa(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zy(e.containerInfo)}catch(g){Qn(t,t.return,g)}break;case 4:Po(e,t),fa(t);break;case 13:Po(e,t),fa(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(EP=nr())),r&4&&vD(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ps=(l=ps)||u,Po(e,t),ps=l):Po(e,t),fa(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ue=t,u=t.child;u!==null;){for(d=Ue=u;Ue!==null;){switch(h=Ue,f=h.child,h.tag){case 0:case 11:case 14:case 15:oy(4,h,h.return);break;case 1:Yf(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Qn(r,n,g)}}break;case 5:Yf(h,h.return);break;case 22:if(h.memoizedState!==null){_D(d);continue}}f!==null?(f.return=h,Ue=f):_D(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=L8("display",o))}catch(g){Qn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Qn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Po(e,t),fa(t),r&4&&vD(t);break;case 21:break;default:Po(e,t),fa(t)}}function fa(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(l4(n)){var r=n;break e}n=n.return}throw Error(ge(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(By(s,""),r.flags&=-33);var i=bD(t);IN(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=bD(t);AN(t,a,o);break;default:throw Error(ge(161))}}catch(c){Qn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AX(t,e,n){Ue=t,h4(t)}function h4(t,e,n){for(var r=(t.mode&1)!==0;Ue!==null;){var s=Ue,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Nb;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||ps;a=Nb;var l=ps;if(Nb=o,(ps=c)&&!l)for(Ue=s;Ue!==null;)o=Ue,c=o.child,o.tag===22&&o.memoizedState!==null?CD(s):c!==null?(c.return=o,Ue=c):CD(s);for(;i!==null;)Ue=i,h4(i),i=i.sibling;Ue=s,Nb=a,ps=l}ED(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ue=i):ED(t)}}function ED(t){for(;Ue!==null;){var e=Ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ps||X_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ps)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Bo(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&iD(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}iD(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&zy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}ps||e.flags&512&&SN(e)}catch(h){Qn(e,e.return,h)}}if(e===t){Ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function _D(t){for(;Ue!==null;){var e=Ue;if(e===t){Ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function CD(t){for(;Ue!==null;){var e=Ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{X_(4,e)}catch(c){Qn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Qn(e,s,c)}}var i=e.return;try{SN(e)}catch(c){Qn(e,i,c)}break;case 5:var o=e.return;try{SN(e)}catch(c){Qn(e,o,c)}}}catch(c){Qn(e,e.return,c)}if(e===t){Ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ue=a;break}Ue=e.return}}var IX=Math.ceil,jE=el.ReactCurrentDispatcher,bP=el.ReactCurrentOwner,fo=el.ReactCurrentBatchConfig,jt=0,Ur=null,lr=null,Qr=0,Ii=0,Qf=Uu(0),vr=0,ew=null,rh=0,J_=0,vP=0,ay=null,ri=null,EP=0,Fp=1/0,Ec=null,FE=!1,NN=null,du=null,xb=!1,Kl=null,WE=0,cy=0,xN=null,Rv=-1,Pv=0;function Ps(){return jt&6?nr():Rv!==-1?Rv:Rv=nr()}function hu(t){return t.mode&1?jt&2&&Qr!==0?Qr&-Qr:lX.transition!==null?(Pv===0&&(Pv=Q8()),Pv):(t=an,t!==0||(t=window.event,t=t===void 0?16:rB(t.type)),t):1}function na(t,e,n,r){if(50<cy)throw cy=0,xN=null,Error(ge(185));p0(t,n,r),(!(jt&2)||t!==Ur)&&(t===Ur&&(!(jt&2)&&(J_|=n),vr===4&&kl(t,Qr)),di(t,r),n===1&&jt===0&&!(e.mode&1)&&(Fp=nr()+500,Y_&&Bu()))}function di(t,e){var n=t.callbackNode;lZ(t,e);var r=AE(t,t===Ur?Qr:0);if(r===0)n!==null&&O2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&O2(n),e===1)t.tag===0?cX(SD.bind(null,t)):_B(SD.bind(null,t)),sX(function(){!(jt&6)&&Bu()}),n=null;else{switch(Z8(r)){case 1:n=GR;break;case 4:n=K8;break;case 16:n=SE;break;case 536870912:n=Y8;break;default:n=SE}n=v4(n,f4.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function f4(t,e){if(Rv=-1,Pv=0,jt&6)throw Error(ge(327));var n=t.callbackNode;if(up()&&t.callbackNode!==n)return null;var r=AE(t,t===Ur?Qr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zE(t,r);else{e=r;var s=jt;jt|=2;var i=g4();(Ur!==t||Qr!==e)&&(Ec=null,Fp=nr()+500,Wd(t,e));do try{TX();break}catch(a){p4(t,a)}while(!0);oP(),jE.current=i,jt=s,lr!==null?e=0:(Ur=null,Qr=0,e=vr)}if(e!==0){if(e===2&&(s=tN(t),s!==0&&(r=s,e=TN(t,s))),e===1)throw n=ew,Wd(t,0),kl(t,r),di(t,nr()),n;if(e===6)kl(t,r);else{if(s=t.current.alternate,!(r&30)&&!NX(s)&&(e=zE(t,r),e===2&&(i=tN(t),i!==0&&(r=i,e=TN(t,i))),e===1))throw n=ew,Wd(t,0),kl(t,r),di(t,nr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ge(345));case 2:cd(t,ri,Ec);break;case 3:if(kl(t,r),(r&130023424)===r&&(e=EP+500-nr(),10<e)){if(AE(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ps(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=lN(cd.bind(null,t,ri,Ec),e);break}cd(t,ri,Ec);break;case 4:if(kl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ta(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=nr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IX(r/1960))-r,10<r){t.timeoutHandle=lN(cd.bind(null,t,ri,Ec),r);break}cd(t,ri,Ec);break;case 5:cd(t,ri,Ec);break;default:throw Error(ge(329))}}}return di(t,nr()),t.callbackNode===n?f4.bind(null,t):null}function TN(t,e){var n=ay;return t.current.memoizedState.isDehydrated&&(Wd(t,e).flags|=256),t=zE(t,e),t!==2&&(e=ri,ri=n,e!==null&&RN(e)),t}function RN(t){ri===null?ri=t:ri.push.apply(ri,t)}function NX(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ia(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kl(t,e){for(e&=~vP,e&=~J_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ta(e),r=1<<n;t[n]=-1,e&=~r}}function SD(t){if(jt&6)throw Error(ge(327));up();var e=AE(t,0);if(!(e&1))return di(t,nr()),null;var n=zE(t,e);if(t.tag!==0&&n===2){var r=tN(t);r!==0&&(e=r,n=TN(t,r))}if(n===1)throw n=ew,Wd(t,0),kl(t,e),di(t,nr()),n;if(n===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cd(t,ri,Ec),di(t,nr()),null}function _P(t,e){var n=jt;jt|=1;try{return t(e)}finally{jt=n,jt===0&&(Fp=nr()+500,Y_&&Bu())}}function sh(t){Kl!==null&&Kl.tag===0&&!(jt&6)&&up();var e=jt;jt|=1;var n=fo.transition,r=an;try{if(fo.transition=null,an=1,t)return t()}finally{an=r,fo.transition=n,jt=e,!(jt&6)&&Bu()}}function CP(){Ii=Qf.current,kn(Qf)}function Wd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rX(n)),lr!==null)for(n=lr.return;n!==null;){var r=n;switch(rP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&RE();break;case 3:Bp(),kn(li),kn(gs),hP();break;case 5:dP(r);break;case 4:Bp();break;case 13:kn(Wn);break;case 19:kn(Wn);break;case 10:aP(r.type._context);break;case 22:case 23:CP()}n=n.return}if(Ur=t,lr=t=fu(t.current,null),Qr=Ii=e,vr=0,ew=null,vP=J_=rh=0,ri=ay=null,_d!==null){for(e=0;e<_d.length;e++)if(n=_d[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}_d=null}return t}function p4(t,e){do{var n=lr;try{if(oP(),Nv.current=BE,UE){for(var r=qn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}UE=!1}if(nh=0,Pr=gr=qn=null,iy=!1,Zy=0,bP.current=null,n===null||n.return===null){vr=1,ew=e,lr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Qr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=dD(o);if(f!==null){f.flags&=-257,hD(f,o,a,i,e),f.mode&1&&uD(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){uD(i,l,e),SP();break e}c=Error(ge(426))}}else if(Bn&&a.mode&1){var w=dD(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),hD(w,o,a,i,e),sP(jp(c,a));break e}}i=c=jp(c,a),vr!==4&&(vr=2),ay===null?ay=[i]:ay.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=ZB(i,c,e);sD(i,y);break e;case 1:a=c;var b=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(du===null||!du.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=XB(i,a,e);sD(i,_);break e}}i=i.return}while(i!==null)}y4(n)}catch(C){e=C,lr===n&&n!==null&&(lr=n=n.return);continue}break}while(!0)}function g4(){var t=jE.current;return jE.current=BE,t===null?BE:t}function SP(){(vr===0||vr===3||vr===2)&&(vr=4),Ur===null||!(rh&268435455)&&!(J_&268435455)||kl(Ur,Qr)}function zE(t,e){var n=jt;jt|=2;var r=g4();(Ur!==t||Qr!==e)&&(Ec=null,Wd(t,e));do try{xX();break}catch(s){p4(t,s)}while(!0);if(oP(),jt=n,jE.current=r,lr!==null)throw Error(ge(261));return Ur=null,Qr=0,vr}function xX(){for(;lr!==null;)m4(lr)}function TX(){for(;lr!==null&&!eZ();)m4(lr)}function m4(t){var e=b4(t.alternate,t,Ii);t.memoizedProps=t.pendingProps,e===null?y4(t):lr=e,bP.current=null}function y4(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_X(n,e),n!==null){n.flags&=32767,lr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vr=6,lr=null;return}}else if(n=EX(n,e,Ii),n!==null){lr=n;return}if(e=e.sibling,e!==null){lr=e;return}lr=e=t}while(e!==null);vr===0&&(vr=5)}function cd(t,e,n){var r=an,s=fo.transition;try{fo.transition=null,an=1,RX(t,e,n,r)}finally{fo.transition=s,an=r}return null}function RX(t,e,n,r){do up();while(Kl!==null);if(jt&6)throw Error(ge(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(uZ(t,i),t===Ur&&(lr=Ur=null,Qr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xb||(xb=!0,v4(SE,function(){return up(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=fo.transition,fo.transition=null;var o=an;an=1;var a=jt;jt|=4,bP.current=null,SX(t,n),d4(n,t),QZ(aN),IE=!!oN,aN=oN=null,t.current=n,AX(n),tZ(),jt=a,an=o,fo.transition=i}else t.current=n;if(xb&&(xb=!1,Kl=t,WE=s),i=t.pendingLanes,i===0&&(du=null),sZ(n.stateNode),di(t,nr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(FE)throw FE=!1,t=NN,NN=null,t;return WE&1&&t.tag!==0&&up(),i=t.pendingLanes,i&1?t===xN?cy++:(cy=0,xN=t):cy=0,Bu(),null}function up(){if(Kl!==null){var t=Z8(WE),e=fo.transition,n=an;try{if(fo.transition=null,an=16>t?16:t,Kl===null)var r=!1;else{if(t=Kl,Kl=null,WE=0,jt&6)throw Error(ge(331));var s=jt;for(jt|=4,Ue=t.current;Ue!==null;){var i=Ue,o=i.child;if(Ue.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ue=l;Ue!==null;){var u=Ue;switch(u.tag){case 0:case 11:case 15:oy(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ue=d;else for(;Ue!==null;){u=Ue;var h=u.sibling,f=u.return;if(c4(u),u===l){Ue=null;break}if(h!==null){h.return=f,Ue=h;break}Ue=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ue=o;else e:for(;Ue!==null;){if(i=Ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:oy(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ue=y;break e}Ue=i.return}}var b=t.current;for(Ue=b;Ue!==null;){o=Ue;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Ue=E;else e:for(o=b;Ue!==null;){if(a=Ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:X_(9,a)}}catch(C){Qn(a,a.return,C)}if(a===o){Ue=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Ue=_;break e}Ue=a.return}}if(jt=s,Bu(),ja&&typeof ja.onPostCommitFiberRoot=="function")try{ja.onPostCommitFiberRoot(H_,t)}catch{}r=!0}return r}finally{an=n,fo.transition=e}}return!1}function AD(t,e,n){e=jp(n,e),e=ZB(t,e,1),t=uu(t,e,1),e=Ps(),t!==null&&(p0(t,1,e),di(t,e))}function Qn(t,e,n){if(t.tag===3)AD(t,t,n);else for(;e!==null;){if(e.tag===3){AD(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(du===null||!du.has(r))){t=jp(n,t),t=XB(e,t,1),e=uu(e,t,1),t=Ps(),e!==null&&(p0(e,1,t),di(e,t));break}}e=e.return}}function PX(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ps(),t.pingedLanes|=t.suspendedLanes&n,Ur===t&&(Qr&n)===n&&(vr===4||vr===3&&(Qr&130023424)===Qr&&500>nr()-EP?Wd(t,0):vP|=n),di(t,e)}function w4(t,e){e===0&&(t.mode&1?(e=wb,wb<<=1,!(wb&130023424)&&(wb=4194304)):e=1);var n=Ps();t=Vc(t,e),t!==null&&(p0(t,e,n),di(t,n))}function OX(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),w4(t,n)}function kX(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ge(314))}r!==null&&r.delete(e),w4(t,n)}var b4;b4=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||li.current)oi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return oi=!1,vX(t,e,n);oi=!!(t.flags&131072)}else oi=!1,Bn&&e.flags&1048576&&CB(e,kE,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tv(t,e),t=e.pendingProps;var s=Mp(e,gs.current);lp(e,n),s=pP(null,e,r,t,s,n);var i=gP();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ui(r)?(i=!0,PE(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lP(e),s.updater=Z_,e.stateNode=s,s._reactInternals=e,mN(e,r,t,n),e=bN(null,e,r,!0,i,n)):(e.tag=0,Bn&&i&&nP(e),As(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tv(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=$X(r),t=Bo(r,t),s){case 0:e=wN(null,e,r,t,n);break e;case 1:e=gD(null,e,r,t,n);break e;case 11:e=fD(null,e,r,t,n);break e;case 14:e=pD(null,e,r,Bo(r.type,t),n);break e}throw Error(ge(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bo(r,s),wN(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bo(r,s),gD(t,e,r,s,n);case 3:e:{if(n4(e),t===null)throw Error(ge(387));r=e.pendingProps,i=e.memoizedState,s=i.element,TB(t,e),ME(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=jp(Error(ge(423)),e),e=mD(t,e,r,n,s);break e}else if(r!==s){s=jp(Error(ge(424)),e),e=mD(t,e,r,n,s);break e}else for(Pi=lu(e.stateNode.containerInfo.firstChild),Di=e,Bn=!0,Ho=null,n=NB(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lp(),r===s){e=Gc(t,e,n);break e}As(t,e,r,n)}e=e.child}return e;case 5:return RB(e),t===null&&fN(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,cN(r,s)?o=null:i!==null&&cN(r,i)&&(e.flags|=32),t4(t,e),As(t,e,o,n),e.child;case 6:return t===null&&fN(e),null;case 13:return r4(t,e,n);case 4:return uP(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Up(e,null,r,n):As(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bo(r,s),fD(t,e,r,s,n);case 7:return As(t,e,e.pendingProps,n),e.child;case 8:return As(t,e,e.pendingProps.children,n),e.child;case 12:return As(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Tn(DE,r._currentValue),r._currentValue=o,i!==null)if(ia(i.value,o)){if(i.children===s.children&&!li.current){e=Gc(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=$c(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),pN(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ge(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),pN(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}As(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,lp(e,n),s=po(s),r=r(s),e.flags|=1,As(t,e,r,n),e.child;case 14:return r=e.type,s=Bo(r,e.pendingProps),s=Bo(r.type,s),pD(t,e,r,s,n);case 15:return JB(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bo(r,s),Tv(t,e),e.tag=1,ui(r)?(t=!0,PE(e)):t=!1,lp(e,n),QB(e,r,s),mN(e,r,s,n),bN(null,e,r,!0,t,n);case 19:return s4(t,e,n);case 22:return e4(t,e,n)}throw Error(ge(156,e.tag))};function v4(t,e){return G8(t,e)}function DX(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function uo(t,e,n,r){return new DX(t,e,n,r)}function AP(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $X(t){if(typeof t=="function")return AP(t)?1:0;if(t!=null){if(t=t.$$typeof,t===HR)return 11;if(t===qR)return 14}return 2}function fu(t,e){var n=t.alternate;return n===null?(n=uo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ov(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")AP(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jf:return zd(n.children,s,i,e);case zR:o=8,s|=8;break;case jI:return t=uo(12,n,e,s|2),t.elementType=jI,t.lanes=i,t;case FI:return t=uo(13,n,e,s),t.elementType=FI,t.lanes=i,t;case WI:return t=uo(19,n,e,s),t.elementType=WI,t.lanes=i,t;case R8:return eC(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x8:o=10;break e;case T8:o=9;break e;case HR:o=11;break e;case qR:o=14;break e;case Il:o=16,r=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=uo(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function zd(t,e,n,r){return t=uo(7,t,r,e),t.lanes=n,t}function eC(t,e,n,r){return t=uo(22,t,r,e),t.elementType=R8,t.lanes=n,t.stateNode={isHidden:!1},t}function hS(t,e,n){return t=uo(6,t,null,e),t.lanes=n,t}function fS(t,e,n){return e=uo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MX(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=G1(0),this.expirationTimes=G1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=G1(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function IP(t,e,n,r,s,i,o,a,c){return t=new MX(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=uo(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lP(i),t}function LX(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function E4(t){if(!t)return Tu;t=t._reactInternals;e:{if(Rh(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ui(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var n=t.type;if(ui(n))return EB(t,n,e)}return e}function _4(t,e,n,r,s,i,o,a,c){return t=IP(n,r,!0,t,s,i,o,a,c),t.context=E4(null),n=t.current,r=Ps(),s=hu(n),i=$c(r,s),i.callback=e??null,uu(n,i,s),t.current.lanes=s,p0(t,s,r),di(t,r),t}function tC(t,e,n,r){var s=e.current,i=Ps(),o=hu(s);return n=E4(n),e.context===null?e.context=n:e.pendingContext=n,e=$c(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=uu(s,e,o),t!==null&&(na(t,s,o,i),Iv(t,s,o)),o}function HE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ID(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function NP(t,e){ID(t,e),(t=t.alternate)&&ID(t,e)}function UX(){return null}var C4=typeof reportError=="function"?reportError:function(t){console.error(t)};function xP(t){this._internalRoot=t}nC.prototype.render=xP.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));tC(t,e,null,null)};nC.prototype.unmount=xP.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;sh(function(){tC(null,t,null,null)}),e[qc]=null}};function nC(t){this._internalRoot=t}nC.prototype.unstable_scheduleHydration=function(t){if(t){var e=eB();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ol.length&&e!==0&&e<Ol[n].priority;n++);Ol.splice(n,0,t),n===0&&nB(t)}};function TP(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ND(){}function BX(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=HE(o);i.call(l)}}var o=_4(e,r,t,0,null,!1,!1,"",ND);return t._reactRootContainer=o,t[qc]=o.current,Vy(t.nodeType===8?t.parentNode:t),sh(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=HE(c);a.call(l)}}var c=IP(t,0,!1,null,null,!1,!1,"",ND);return t._reactRootContainer=c,t[qc]=c.current,Vy(t.nodeType===8?t.parentNode:t),sh(function(){tC(e,c,n,r)}),c}function sC(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=HE(o);a.call(c)}}tC(e,o,t,s)}else o=BX(n,e,t,s,r);return HE(o)}X8=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=km(e.pendingLanes);n!==0&&(KR(e,n|1),di(e,nr()),!(jt&6)&&(Fp=nr()+500,Bu()))}break;case 13:sh(function(){var r=Vc(t,1);if(r!==null){var s=Ps();na(r,t,1,s)}}),NP(t,1)}};YR=function(t){if(t.tag===13){var e=Vc(t,134217728);if(e!==null){var n=Ps();na(e,t,134217728,n)}NP(t,134217728)}};J8=function(t){if(t.tag===13){var e=hu(t),n=Vc(t,e);if(n!==null){var r=Ps();na(n,t,e,r)}NP(t,e)}};eB=function(){return an};tB=function(t,e){var n=an;try{return an=t,e()}finally{an=n}};XI=function(t,e,n){switch(e){case"input":if(qI(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=K_(r);if(!s)throw Error(ge(90));O8(r),qI(r,s)}}}break;case"textarea":D8(t,n);break;case"select":e=n.value,e!=null&&ip(t,!!n.multiple,e,!1)}};F8=_P;W8=sh;var jX={usingClientEntryPoint:!1,Events:[m0,Hf,K_,B8,j8,_P]},im={findFiberByHostInstance:Ed,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FX={bundleType:im.bundleType,version:im.version,rendererPackageName:im.rendererPackageName,rendererConfig:im.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:el.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=q8(t),t===null?null:t.stateNode},findFiberByHostInstance:im.findFiberByHostInstance||UX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tb.isDisabled&&Tb.supportsFiber)try{H_=Tb.inject(FX),ja=Tb}catch{}}ji.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jX;ji.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!TP(e))throw Error(ge(200));return LX(t,e,null,n)};ji.createRoot=function(t,e){if(!TP(t))throw Error(ge(299));var n=!1,r="",s=C4;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=IP(t,1,!1,null,null,n,!1,r,s),t[qc]=e.current,Vy(t.nodeType===8?t.parentNode:t),new xP(e)};ji.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=q8(e),t=t===null?null:t.stateNode,t};ji.flushSync=function(t){return sh(t)};ji.hydrate=function(t,e,n){if(!rC(e))throw Error(ge(200));return sC(null,t,e,!0,n)};ji.hydrateRoot=function(t,e,n){if(!TP(t))throw Error(ge(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=C4;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=_4(e,null,t,1,n??null,s,!1,i,o),t[qc]=e.current,Vy(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new nC(e)};ji.render=function(t,e,n){if(!rC(e))throw Error(ge(200));return sC(null,t,e,!1,n)};ji.unmountComponentAtNode=function(t){if(!rC(t))throw Error(ge(40));return t._reactRootContainer?(sh(function(){sC(null,null,t,!1,function(){t._reactRootContainer=null,t[qc]=null})}),!0):!1};ji.unstable_batchedUpdates=_P;ji.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rC(n))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return sC(t,e,n,!1,r)};ji.version="18.3.1-next-f1338f8080-20240426";function S4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S4)}catch(t){console.error(t)}}S4(),S8.exports=ji;var RP=S8.exports,xD=RP;UI.createRoot=xD.createRoot,UI.hydrateRoot=xD.hydrateRoot;const A4="2.31.7";let om={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${A4}`},ue=class PN extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof PN?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof PN&&n.cause.docsPath||n.docsPath,i=(a=om.getDocsUrl)==null?void 0:a.call(om,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...om.version?[`Version: ${om.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=A4}walk(e){return I4(this,e)}};function I4(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?I4(t.cause,e):e?null:t}let N4=class extends ue{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class WX extends ue{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class zX extends ue{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let HX=class extends ue{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},x4=class extends ue{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},T4=class extends ue{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class TD extends ue{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function _g(t,{dir:e,size:n=32}={}){return typeof t=="string"?pu(t,{dir:e,size:n}):qX(t,{dir:e,size:n})}function pu(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new T4({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function qX(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new T4({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Ka(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Xn(t){return Ka(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Wa(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const VX=new TextEncoder;function Cg(t,e={}){return typeof t=="number"||typeof t=="bigint"?KX(t,e):typeof t=="boolean"?GX(t,e):Ka(t)?mo(t,e):Hd(t,e)}function GX(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Eo(n,{size:e.size}),_g(n,{size:e.size})):n}const oc={zero:48,nine:57,A:65,F:70,a:97,f:102};function RD(t){if(t>=oc.zero&&t<=oc.nine)return t-oc.zero;if(t>=oc.A&&t<=oc.F)return t-(oc.A-10);if(t>=oc.a&&t<=oc.f)return t-(oc.a-10)}function mo(t,e={}){let n=t;e.size&&(Eo(n,{size:e.size}),n=_g(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=RD(r.charCodeAt(a++)),l=RD(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ue(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function KX(t,e){const n=He(t,e);return mo(n)}function Hd(t,e={}){const n=VX.encode(t);return typeof e.size=="number"?(Eo(n,{size:e.size}),_g(n,{dir:"right",size:e.size})):n}function Eo(t,{size:e}){if(Xn(t)>e)throw new HX({givenSize:Xn(t),maxSize:e})}function Ui(t,e={}){const{signed:n}=e;e.size&&Eo(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function YX(t,e={}){let n=t;if(e.size&&(Eo(n,{size:e.size}),n=Wa(n)),Wa(n)==="0x00")return!1;if(Wa(n)==="0x01")return!0;throw new zX(n)}function oa(t,e={}){return Number(Ui(t,e))}function R4(t,e={}){let n=mo(t);return e.size&&(Eo(n,{size:e.size}),n=Wa(n,{dir:"right"})),new TextDecoder().decode(n)}const QX=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function yo(t,e={}){return typeof t=="number"||typeof t=="bigint"?He(t,e):typeof t=="string"?Wp(t,e):typeof t=="boolean"?P4(t,e):Cr(t,e)}function P4(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Eo(n,{size:e.size}),_g(n,{size:e.size})):n}function Cr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=QX[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Eo(r,{size:e.size}),_g(r,{dir:"right",size:e.size})):r}function He(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new N4({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?_g(a,{size:r}):a}const ZX=new TextEncoder;function Wp(t,e={}){const n=ZX.encode(t);return Cr(n,e)}async function XX(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:He(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function aa(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new dJ(t.type);return`${t.name}(${iC(t.inputs,{includeName:e})})`}function iC(t,{includeName:e=!1}={}){return t?t.map(n=>JX(n,{includeName:e})).join(e?", ":","):""}function JX(t,{includeName:e}){return t.type.startsWith("tuple")?`(${iC(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class eJ extends ue{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class PD extends ue{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class O4 extends ue{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${iC(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class w0 extends ue{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class tJ extends ue{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class nJ extends ue{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Xn(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class rJ extends ue{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class sJ extends ue{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class OD extends ue{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class k4 extends ue{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class iJ extends ue{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class D4 extends ue{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class kD extends ue{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class zp extends ue{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class $4 extends ue{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class oJ extends ue{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class aJ extends ue{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${aa(e.abiItem)}\`, and`,`\`${n.type}\` in \`${aa(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let cJ=class extends ue{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class tw extends ue{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${iC(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class oC extends ue{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${aa(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class lJ extends ue{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class uJ extends ue{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let M4=class extends ue{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class dJ extends ue{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function wo(t){return typeof t[0]=="string"?Sg(t):hJ(t)}function hJ(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Sg(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let Ru=class extends ue{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},aC=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Rb=BigInt(2**32-1),DD=BigInt(32);function fJ(t,e=!1){return e?{h:Number(t&Rb),l:Number(t>>DD&Rb)}:{h:Number(t>>DD&Rb)|0,l:Number(t&Rb)|0}}function pJ(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=fJ(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const gJ=(t,e,n)=>t<<n|e>>>32-n,mJ=(t,e,n)=>e<<n|t>>>32-n,yJ=(t,e,n)=>e<<n-32|t>>>64-n,wJ=(t,e,n)=>t<<n-32|e>>>64-n,nf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function PP(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function nw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ca(t,...e){if(!PP(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function bJ(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");nw(t.outputLen),nw(t.blockLen)}function Hp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function L4(t,e){ca(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function vJ(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function qp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function pS(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function pa(t,e){return t<<32-e|t>>>e}const EJ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function _J(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function CJ(t){for(let e=0;e<t.length;e++)t[e]=_J(t[e]);return t}const $D=EJ?t=>t:CJ,U4=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",SJ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function rw(t){if(ca(t),U4)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=SJ[t[n]];return e}const ac={_0:48,_9:57,A:65,F:70,a:97,f:102};function MD(t){if(t>=ac._0&&t<=ac._9)return t-ac._0;if(t>=ac.A&&t<=ac.F)return t-(ac.A-10);if(t>=ac.a&&t<=ac.f)return t-(ac.a-10)}function OP(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(U4)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=MD(t.charCodeAt(i)),a=MD(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function AJ(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function b0(t){return typeof t=="string"&&(t=AJ(t)),ca(t),t}function Sd(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];ca(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let kP=class{};function B4(t){const e=r=>t().update(b0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function IJ(t){const e=(r,s)=>t(s).update(b0(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function NJ(t=32){if(nf&&typeof nf.getRandomValues=="function")return nf.getRandomValues(new Uint8Array(t));if(nf&&typeof nf.randomBytes=="function")return Uint8Array.from(nf.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const xJ=BigInt(0),am=BigInt(1),TJ=BigInt(2),RJ=BigInt(7),PJ=BigInt(256),OJ=BigInt(113),j4=[],F4=[],W4=[];for(let t=0,e=am,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],j4.push(2*(5*r+n)),F4.push((t+1)*(t+2)/2%64);let s=xJ;for(let i=0;i<7;i++)e=(e<<am^(e>>RJ)*OJ)%PJ,e&TJ&&(s^=am<<(am<<BigInt(i))-am);W4.push(s)}const z4=pJ(W4,!0),kJ=z4[0],DJ=z4[1],LD=(t,e,n)=>n>32?yJ(t,e,n):gJ(t,e,n),UD=(t,e,n)=>n>32?wJ(t,e,n):mJ(t,e,n);function H4(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=LD(l,u,1)^n[a],h=UD(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=F4[o],c=LD(s,i,a),l=UD(s,i,a),u=j4[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=kJ[r],t[1]^=DJ[r]}qp(n)}let DP=class q4 extends kP{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,nw(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=vJ(this.state)}clone(){return this._cloneInto()}keccak(){$D(this.state32),H4(this.state32,this.rounds),$D(this.state32),this.posOut=0,this.pos=0}update(e){Hp(this),e=b0(e),ca(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Hp(this,!1),ca(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return nw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(L4(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,qp(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new q4(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const ju=(t,e,n)=>B4(()=>new DP(e,t,n)),$J=ju(6,144,224/8),MJ=ju(6,136,256/8),LJ=ju(6,104,384/8),UJ=ju(6,72,512/8),BJ=ju(1,144,224/8),$P=ju(1,136,256/8),jJ=ju(1,104,384/8),FJ=ju(1,72,512/8),V4=(t,e,n)=>IJ((r={})=>new DP(e,t,r.dkLen===void 0?n:r.dkLen,!0)),WJ=V4(31,168,128/8),zJ=V4(31,136,256/8),E5e=Object.freeze(Object.defineProperty({__proto__:null,Keccak:DP,keccakP:H4,keccak_224:BJ,keccak_256:$P,keccak_384:jJ,keccak_512:FJ,sha3_224:$J,sha3_256:MJ,sha3_384:LJ,sha3_512:UJ,shake128:WJ,shake256:zJ},Symbol.toStringTag,{value:"Module"}));function Yr(t,e){const n=e||"hex",r=$P(Ka(t,{strict:!1})?Cg(t):t);return n==="bytes"?r:yo(r)}const gS=new aC(8192);function v0(t,e){if(gS.has(`${t}.${e}`))return gS.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Yr(Hd(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return gS.set(`${t}.${e}`,i),i}function Oc(t,e){if(!bo(t,{strict:!1}))throw new Ru({address:t});return v0(t,e)}const HJ=/^0x[a-fA-F0-9]{40}$/,mS=new aC(8192);function bo(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(mS.has(r))return mS.get(r);const s=HJ.test(t)?t.toLowerCase()===t?!0:n?v0(t)===t:!0:!1;return mS.set(r,s),s}function Vp(t,e,n,{strict:r}={}){return Ka(t,{strict:!1})?qE(t,e,n,{strict:r}):Y4(t,e,n,{strict:r})}function G4(t,e){if(typeof e=="number"&&e>0&&e>Xn(t)-1)throw new x4({offset:e,position:"start",size:Xn(t)})}function K4(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Xn(t)!==n-e)throw new x4({offset:n,position:"end",size:Xn(t)})}function Y4(t,e,n,{strict:r}={}){G4(t,e);const s=t.slice(e,n);return r&&K4(s,e,n),s}function qE(t,e,n,{strict:r}={}){G4(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&K4(s,e,n),s}const qJ=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Q4=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Fu(t,e){if(t.length!==e.length)throw new rJ({expectedLength:t.length,givenLength:e.length});const n=VJ({params:t,values:e}),r=LP(n);return r.length===0?"0x":r}function VJ({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(MP({param:t[r],value:e[r]}));return n}function MP({param:t,value:e}){const n=UP(t.type);if(n){const[r,s]=n;return KJ(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return JJ(e,{param:t});if(t.type==="address")return GJ(e);if(t.type==="bool")return QJ(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Q4.exec(t.type)??[];return ZJ(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return YJ(e,{param:t});if(t.type==="string")return XJ(e);throw new lJ(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function LP(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Xn(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(He(e+s,{size:32})),r.push(a),s+=Xn(a)):n.push(a)}return wo([...n,...r])}function GJ(t){if(!bo(t))throw new Ru({address:t});return{dynamic:!1,encoded:pu(t.toLowerCase())}}function KJ(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new M4(t);if(!r&&t.length!==e)throw new tJ({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=MP({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=LP(i);if(r){const a=He(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?wo([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:wo(i.map(({encoded:o})=>o))}}function YJ(t,{param:e}){const[,n]=e.type.split("bytes"),r=Xn(t);if(!n){let s=t;return r%32!==0&&(s=pu(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:wo([pu(He(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new nJ({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:pu(t,{dir:"right"})}}function QJ(t){if(typeof t!="boolean")throw new ue(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:pu(P4(t))}}function ZJ(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new N4({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:He(t,{size:32,signed:e})}}function XJ(t){const e=Wp(t),n=Math.ceil(Xn(e)/32),r=[];for(let s=0;s<n;s++)r.push(pu(Vp(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:wo([pu(He(Xn(e),{size:32})),...r])}}function JJ(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=MP({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?LP(r):wo(r.map(({encoded:s})=>s))}}function UP(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const yS="/docs/contract/encodeDeployData";function cC(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new eJ({docsPath:yS});if(!("inputs"in s))throw new PD({docsPath:yS});if(!s.inputs||s.inputs.length===0)throw new PD({docsPath:yS});const i=Fu(s.inputs,n);return Sg([r,i])}function Jn(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class Ph extends ue{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class kv extends ue{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function eee(t){const e=Yr(`0x${t.substring(4)}`).substring(26);return v0(`0x${e}`)}const tee="modulepreload",nee=function(t){return"/"+t},BD={},hs=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=nee(c),c in BD)return;BD[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":tee,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function ree({hash:t,signature:e}){const n=Ka(t)?t:yo(t),{secp256k1:r}=await hs(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>vie);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=jD(f);return new r.Signature(Ui(l),Ui(u)).addRecoveryBit(p)}const o=Ka(e)?e:yo(e);if(Xn(o)!==65)throw new Error("invalid signature length");const a=oa(`0x${o.slice(130)}`),c=jD(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function jD(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Z4({hash:t,signature:e}){return eee(await ree({hash:t,signature:e}))}class FD extends ue{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class X4 extends ue{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class see extends ue{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const iee={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new see({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new X4({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new FD({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new FD({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function BP(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(iee);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function oee(t,e="hex"){const n=J4(t),r=BP(new Uint8Array(n.length));return n.encode(r),e==="hex"?Cr(r.bytes):r.bytes}function J4(t){return Array.isArray(t)?aee(t.map(e=>J4(e))):cee(t)}function aee(t){const e=t.reduce((s,i)=>s+i.length,0),n=ej(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function cee(t){const e=typeof t=="string"?mo(t):t,n=ej(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function ej(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ue("Length is too large.")}function lee(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Yr(Sg(["0x05",oee([e?He(e):"0x",s,n?He(n):"0x"])]));return r==="bytes"?mo(i):i}async function tj(t){const{authorization:e,signature:n}=t;return Z4({hash:lee(e),signature:n??e})}class ON extends ue{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class uee extends ue{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class dee extends ue{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class nj extends ue{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function rj({chain:t,currentChainId:e}){if(!t)throw new dee;if(e!==t.id)throw new uee({chain:t,currentChainId:e})}const hee={gwei:9,wei:18},fee={ether:-9,wei:9},pee={ether:-18,gwei:-9};function Oh(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function hi(t,e="wei"){return Oh(t,fee[e])}class Ad extends ue{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Ad,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Ad,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class VE extends ue{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${hi(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(VE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class kN extends ue{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${hi(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(kN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class DN extends ue{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(DN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class $N extends ue{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty($N,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class MN extends ue{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(MN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class LN extends ue{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(LN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class UN extends ue{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(UN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class BN extends ue{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(BN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class jN extends ue{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(jN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class GE extends ue{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${hi(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${hi(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(GE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class E0 extends ue{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function jP(t,e="wei"){return Oh(t,hee[e])}function _0(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class gee extends ue{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class mee extends ue{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",_0(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class yee extends ue{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=_0({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${jP(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${hi(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${hi(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${hi(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class sj extends ue{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class ij extends ue{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class wee extends ue{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Er=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),bee=t=>t,FP=t=>t;class ly extends ue{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${FP(o)}`,e&&`Request body: ${Er(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class WP extends ue{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${FP(r)}`,`Request body: ${Er(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class WD extends ue{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${FP(n)}`,`Request body: ${Er(e)}`],name:"TimeoutError"})}}const vee=-1;class mi extends ue{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof WP?e.code:n??vee}}class Wi extends mi{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class sw extends mi{constructor(e){super(e,{code:sw.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(sw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class iw extends mi{constructor(e){super(e,{code:iw.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(iw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class ow extends mi{constructor(e,{method:n}={}){super(e,{code:ow.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(ow,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class aw extends mi{constructor(e){super(e,{code:aw.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(aw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class ih extends mi{constructor(e){super(e,{code:ih.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(ih,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class oh extends mi{constructor(e){super(e,{code:oh.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(oh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class cw extends mi{constructor(e){super(e,{code:cw.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(cw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class gu extends mi{constructor(e){super(e,{code:gu.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(gu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Gp extends mi{constructor(e){super(e,{code:Gp.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Gp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Id extends mi{constructor(e,{method:n}={}){super(e,{code:Id.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Id,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Kp extends mi{constructor(e){super(e,{code:Kp.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class lw extends mi{constructor(e){super(e,{code:lw.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(lw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class pr extends Wi{constructor(e){super(e,{code:pr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(pr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class uw extends Wi{constructor(e){super(e,{code:uw.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(uw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class dw extends Wi{constructor(e,{method:n}={}){super(e,{code:dw.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(dw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class hw extends Wi{constructor(e){super(e,{code:hw.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(hw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class fw extends Wi{constructor(e){super(e,{code:fw.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(fw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ya extends Wi{constructor(e){super(e,{code:Ya.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ya,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Yp extends Wi{constructor(e){super(e,{code:Yp.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Yp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class pw extends Wi{constructor(e){super(e,{code:pw.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(pw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class gw extends Wi{constructor(e){super(e,{code:gw.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(gw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class mw extends Wi{constructor(e){super(e,{code:mw.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(mw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class yw extends Wi{constructor(e){super(e,{code:yw.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(yw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class ww extends Wi{constructor(e){super(e,{code:ww.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(ww,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Qp extends Wi{constructor(e){super(e,{code:Qp.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Eee extends mi{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function lC(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ue?t.walk(s=>(s==null?void 0:s.code)===Ad.code):t;return r instanceof ue?new Ad({cause:t,message:r.details}):Ad.nodeMessage.test(n)?new Ad({cause:t,message:t.details}):VE.nodeMessage.test(n)?new VE({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):kN.nodeMessage.test(n)?new kN({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):DN.nodeMessage.test(n)?new DN({cause:t,nonce:e==null?void 0:e.nonce}):$N.nodeMessage.test(n)?new $N({cause:t,nonce:e==null?void 0:e.nonce}):MN.nodeMessage.test(n)?new MN({cause:t,nonce:e==null?void 0:e.nonce}):LN.nodeMessage.test(n)?new LN({cause:t}):UN.nodeMessage.test(n)?new UN({cause:t,gas:e==null?void 0:e.gas}):BN.nodeMessage.test(n)?new BN({cause:t,gas:e==null?void 0:e.gas}):jN.nodeMessage.test(n)?new jN({cause:t}):GE.nodeMessage.test(n)?new GE({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new E0({cause:t})}function oj(t,{docsPath:e,...n}){const r=(()=>{const s=lC(t,n);return s instanceof E0?t:s})();return new yee(r,{docsPath:e,...n})}function uC(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const _ee={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Ag(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Cee(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Cr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=He(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=He(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=He(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=He(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=He(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=He(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=_ee[t.type]),typeof t.value<"u"&&(e.value=He(t.value)),e}function Cee(t){return t.map(e=>({address:e.address,r:e.r?He(BigInt(e.r)):e.r,s:e.s?He(BigInt(e.s)):e.s,chainId:He(e.chainId),nonce:He(e.nonce),...typeof e.yParity<"u"?{yParity:He(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:He(e.v)}:{}}))}function tt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const See=2n**256n-1n;function kh(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Jn(e):void 0;if(o&&!bo(o.address))throw new Ru({address:o.address});if(i&&!bo(i))throw new Ru({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new gee;if(r&&r>See)throw new VE({maxFeePerGas:r});if(s&&r&&s>r)throw new GE({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Ig(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return oa(e)}class Aee extends ue{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class zP extends ue{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Iee extends ue{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${hi(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class aj extends ue{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const cj={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function lj(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?oa(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?oa(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?cj[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=Nee(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function Nee(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function uj(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:lj(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Ba(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?He(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new aj({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||uj)(c)}async function HP(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function xee(t,e){return dj(t,e)}async function dj(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await tt(t,Ba,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Ui(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):tt(t,Ba,"getBlock")({}),tt(t,HP,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new zP;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function Tee(t,e){return FN(t,e)}async function FN(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new Aee;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await tt(t,Ba,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new zP;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await dj(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await tt(t,HP,"getGasPrice")({}))}}class Ree extends ue{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=_0({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${jP(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${hi(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${hi(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${hi(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function Pee(t,{docsPath:e,...n}){const r=(()=>{const s=lC(t,n);return s instanceof E0?t:s})();return new Ree(r,{docsPath:e,...n})}class Oee extends ue{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class kee extends ue{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function zD(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function Dee(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=zD(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=zD(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function HD(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new TD({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new TD({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function $ee(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=He(e)),n!==void 0&&(o.nonce=He(n)),r!==void 0&&(o.state=HD(r)),s!==void 0){if(o.state)throw new kee;o.stateDiff=HD(s)}return o}function qP(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!bo(n,{strict:!1}))throw new Ru({address:n});if(e[n])throw new Oee({address:n});e[n]=$ee(r)}return e}async function VP(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?He(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function dC(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Jn(n):void 0;try{let j=function(N){const{block:$,request:R,rpcStateOverride:k}=N;return t.request({method:"eth_estimateGas",params:k?[R,$??"latest",k]:$?[R,$]:[R]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:E,value:_,stateOverride:C,...I}=await C0(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),x=(typeof d=="bigint"?He(d):void 0)||h,S=qP(C),D=await(async()=>{if(I.to)return I.to;if(c&&c.length>0)return await tj({authorization:c[0]}).catch(()=>{throw new ue("`to` is required. Could not infer from `authorizationList`")})})();kh(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,q=(P||Ag)({...uC(I,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:E,to:D,value:_});let T=BigInt(await j({block:x,request:q,rpcStateOverride:S}));if(c){const N=await VP(t,{address:q.from}),$=await Promise.all(c.map(async R=>{const{address:k}=R,B=await j({block:x,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:k,value:He(N)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(B)}));T+=$.reduce((R,k)=>R+k,0n)}return T}catch(a){throw Pee(a,{...e,account:r,chain:t.chain})}}async function GP(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?He(r):n]},{dedupe:!!r});return oa(s)}function hj(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>mo(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Cr(i))}function fj(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>mo(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>mo(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Cr(o))}function Mee(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Lee(t,e,n){return t&e^~t&n}function Uee(t,e,n){return t&e^t&n^e&n}class Bee extends kP{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=pS(this.buffer)}update(e){Hp(this),e=b0(e),ca(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=pS(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Hp(this),L4(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,qp(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Mee(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=pS(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const ol=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),jee=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),al=new Uint32Array(64);class Fee extends Bee{constructor(e=32){super(64,e,8,!1),this.A=ol[0]|0,this.B=ol[1]|0,this.C=ol[2]|0,this.D=ol[3]|0,this.E=ol[4]|0,this.F=ol[5]|0,this.G=ol[6]|0,this.H=ol[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)al[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=al[d-15],f=al[d-2],p=pa(h,7)^pa(h,18)^h>>>3,g=pa(f,17)^pa(f,19)^f>>>10;al[d]=g+al[d-7]+p+al[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=pa(a,6)^pa(a,11)^pa(a,25),f=u+h+Lee(a,c,l)+jee[d]+al[d]|0,g=(pa(r,2)^pa(r,13)^pa(r,22))+Uee(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){qp(al)}destroy(){this.set(0,0,0,0,0,0,0,0),qp(this.buffer)}}const pj=B4(()=>new Fee),Wee=pj;function zee(t,e){return Wee(Ka(t,{strict:!1})?Cg(t):t)}function Hee(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=zee(e);return s.set([n],0),r==="bytes"?s:Cr(s)}function qee(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Hee({commitment:i,to:r,version:n}));return s}const qD=6,gj=32,KP=4096,mj=gj*KP,VD=mj*qD-1-1*KP*qD;class Vee extends ue{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Gee extends ue{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Kee(t){const e=typeof t.data=="string"?mo(t.data):t.data,n=Xn(e);if(!n)throw new Gee;if(n>VD)throw new Vee({maxSize:VD,size:n});const r=[];let s=!0,i=0;for(;s;){const o=BP(new Uint8Array(mj));let a=0;for(;a<KP;){const c=e.slice(i,i+(gj-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Cr(o.bytes))}function Yee(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Kee({data:e}),i=t.commitments??hj({blobs:s,kzg:n,to:r}),o=t.proofs??fj({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Qee(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new mee({transaction:t})}const yj=["blobVersionedHashes","chainId","fees","gas","nonce","type"],GD=new Map;async function C0(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=yj,type:u}=e,d=n&&Jn(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await tt(t,Ba,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await tt(t,Ig,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await tt(t,GP,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=hj({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=qee({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=fj({blobs:r,commitments:y,kzg:o}),E=Yee({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=E}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=Qee(h)}catch{let y=GD.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",GD.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:E}=await FN(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<E)throw new Iee({maxPriorityFeePerGas:E});h.maxPriorityFeePerGas=E,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new zP;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await FN(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await tt(t,dC,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),kh(h),delete h.parameters,h}async function YP(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const wS=new aC(128);async function S0(t,e){var b,E,_,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new Ph({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?Jn(n):null;try{kh(e);const I=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await tj({authorization:i[0]}).catch(()=>{throw new ue("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let A;r!==null&&(A=await tt(t,Ig,"getChainId")({}),rj({currentChainId:A,chain:r}));const x=(_=(E=(b=t.chain)==null?void 0:b.formatters)==null?void 0:E.transactionRequest)==null?void 0:_.format,D=(x||Ag)({...uC(w,{format:x}),accessList:s,authorizationList:i,blobs:o,chainId:A,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:I,type:p,value:g}),P=wS.get(t.uid),U=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:U,params:[D]},{retryCount:0})}catch(q){if(P===!1)throw q;const j=q;if(j.name==="InvalidInputRpcError"||j.name==="InvalidParamsRpcError"||j.name==="MethodNotFoundRpcError"||j.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[D]},{retryCount:0}).then(T=>(wS.set(t.uid,!0),T)).catch(T=>{const N=T;throw N.name==="MethodNotFoundRpcError"||N.name==="MethodNotSupportedRpcError"?(wS.set(t.uid,!1),j):N});throw j}}if((y==null?void 0:y.type)==="local"){const A=await tt(t,C0,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...yj,"sidecars"],type:p,value:g,...w,to:I}),x=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,S=await y.signTransaction(A,{serializer:x});return await tt(t,YP,"sendRawTransaction")({serializedTransaction:S})}throw(y==null?void 0:y.type)==="smart"?new kv({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new kv({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(I){throw I instanceof kv?I:oj(I,{...e,account:y,chain:e.chain||void 0})}}function Zee(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=cC({abi:n,args:r,bytecode:s});return S0(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const WN=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],zN=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],wj=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],bj=[...wj,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Xee=[...wj,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],KD=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],YD=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],QD=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function Jee(t,e={}){typeof e.size<"u"&&Eo(t,{size:e.size});const n=Cr(t,e);return Ui(n,e)}function ete(t,e={}){let n=t;if(typeof e.size<"u"&&(Eo(n,{size:e.size}),n=Wa(n)),n.length>1||n[0]>1)throw new WX(n);return!!n[0]}function Mc(t,e={}){typeof e.size<"u"&&Eo(t,{size:e.size});const n=Cr(t,e);return oa(n,e)}function tte(t,e={}){let n=t;return typeof e.size<"u"&&(Eo(n,{size:e.size}),n=Wa(n,{dir:"right"})),new TextDecoder().decode(n)}function A0(t,e){const n=typeof e=="string"?mo(e):e,r=BP(n);if(Xn(n)===0&&t.length>0)throw new w0;if(Xn(e)&&Xn(e)<32)throw new O4({data:typeof e=="string"?e:Cr(e),params:t,size:Xn(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=dp(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function dp(t,e,{staticPosition:n}){const r=UP(e.type);if(r){const[s,i]=r;return rte(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return ate(t,e,{staticPosition:n});if(e.type==="address")return nte(t);if(e.type==="bool")return ste(t);if(e.type.startsWith("bytes"))return ite(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return ote(t,e);if(e.type==="string")return cte(t,{staticPosition:n});throw new uJ(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const ZD=32,HN=32;function nte(t){const e=t.readBytes(32);return[v0(Cr(Y4(e,-20))),32]}function rte(t,e,{length:n,staticPosition:r}){if(!n){const o=Mc(t.readBytes(HN)),a=r+o,c=a+ZD;t.setPosition(a);const l=Mc(t.readBytes(ZD)),u=bw(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=dp(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(bw(e)){const o=Mc(t.readBytes(HN)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=dp(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=dp(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function ste(t){return[ete(t.readBytes(32),{size:32}),32]}function ite(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Mc(t.readBytes(32));t.setPosition(n+o);const a=Mc(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Cr(c),32]}return[Cr(t.readBytes(Number.parseInt(s),32)),32]}function ote(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?Jee(s,{signed:n}):Mc(s,{signed:n}),32]}function ate(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(bw(e)){const o=Mc(t.readBytes(HN)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=dp(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=dp(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function cte(t,{staticPosition:e}){const n=Mc(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Mc(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=tte(Wa(i));return t.setPosition(e+32),[o,32]}function bw(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(bw);const n=UP(t.type);return!!(n&&bw({...t,type:n[1]}))}const lte=t=>Yr(Cg(t));function ute(t){return lte(t)}const dte="1.0.8";let zi=class qN extends Error{constructor(e,n={}){var o;const r=n.cause instanceof qN?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof qN&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${dte}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function tl(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const vj=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ej=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,_j=/^\(.+?\).*?$/,XD=/^tuple(?<array>(\[(\d*)\])*)$/;function VN(t){let e=t.type;if(XD.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=VN(i),s<n-1&&(e+=", ")}const r=tl(XD,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,VN({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function cm(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=VN(s),r!==n-1&&(e+=", ")}return e}function KE(t){var e;return t.type==="function"?`function ${t.name}(${cm(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${cm(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${cm(t.inputs)})`:t.type==="error"?`error ${t.name}(${cm(t.inputs)})`:t.type==="constructor"?`constructor(${cm(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const Cj=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function hte(t){return Cj.test(t)}function fte(t){return tl(Cj,t)}const Sj=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function pte(t){return Sj.test(t)}function gte(t){return tl(Sj,t)}const Aj=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function mte(t){return Aj.test(t)}function yte(t){return tl(Aj,t)}const Ij=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function QP(t){return Ij.test(t)}function wte(t){return tl(Ij,t)}const Nj=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function bte(t){return Nj.test(t)}function vte(t){return tl(Nj,t)}const xj=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Ete(t){return xj.test(t)}function _te(t){return tl(xj,t)}const Cte=/^receive\(\) external payable$/;function Ste(t){return Cte.test(t)}const Ate=new Set(["indexed"]),GN=new Set(["calldata","memory","storage"]);class Ite extends zi{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Nte extends zi{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class xte extends zi{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Tte extends zi{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Rte extends zi{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Pte extends zi{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Ote extends zi{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class kte extends zi{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Ng extends zi{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Dte extends zi{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class $te extends zi{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Mte extends zi{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Lte extends zi{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Ute(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const bS=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function KN(t,e={}){if(mte(t))return Bte(t,e);if(pte(t))return jte(t,e);if(hte(t))return Fte(t,e);if(bte(t))return Wte(t,e);if(Ete(t))return zte(t);if(Ste(t))return{type:"receive",stateMutability:"payable"};throw new Dte({signature:t})}function Bte(t,e={}){const n=yte(t);if(!n)throw new Ng({signature:t,type:"function"});const r=Ko(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(ah(r[a],{modifiers:GN,structs:e,type:"function"}));const o=[];if(n.returns){const a=Ko(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(ah(a[l],{modifiers:GN,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function jte(t,e={}){const n=gte(t);if(!n)throw new Ng({signature:t,type:"event"});const r=Ko(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ah(r[o],{modifiers:Ate,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Fte(t,e={}){const n=fte(t);if(!n)throw new Ng({signature:t,type:"error"});const r=Ko(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ah(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Wte(t,e={}){const n=vte(t);if(!n)throw new Ng({signature:t,type:"constructor"});const r=Ko(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ah(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function zte(t){const e=_te(t);if(!e)throw new Ng({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Hte=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,qte=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Vte=/^u?int$/;function ah(t,e){var d,h;const n=Ute(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(bS.has(n))return bS.get(n);const r=_j.test(t),s=tl(r?qte:Hte,t);if(!s)throw new Tte({param:t});if(s.name&&Kte(s.name))throw new Rte({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Ko(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(ah(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Vte.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!Tj(c))throw new xte({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new Pte({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(GN.has(s.modifier)&&!Yte(c,!!s.array))throw new Ote({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return bS.set(n,u),u}function Ko(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Ko(a,[...e,n.trim()]):Ko(a,e,`${n}${o}`,r);case"(":return Ko(a,e,`${n}${o}`,r+1);case")":return Ko(a,e,`${n}${o}`,r-1);default:return Ko(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new Lte({current:n,depth:r});return e.push(n.trim()),e}function Tj(t){return t==="address"||t==="bool"||t==="function"||t==="string"||vj.test(t)||Ej.test(t)}const Gte=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Kte(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||vj.test(t)||Ej.test(t)||Gte.test(t)}function Yte(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function Rj(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!QP(a))continue;const c=wte(a);if(!c)throw new Ng({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=ah(p,{type:"struct"});u.push(g)}if(!u.length)throw new $te({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=Pj(c,e)}return r}const Qte=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Pj(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(_j.test(o.type))r.push(o);else{const c=tl(Qte,o.type);if(!(c!=null&&c.type))throw new kte({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new Mte({type:u});r.push({...o,type:`tuple${l??""}`,components:Pj(e[u]??[],e,new Set([...n,u]))})}else if(Tj(u))r.push(o);else throw new Nte({type:u})}}return r}function Oj(t){const e=Rj(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];QP(i)||n.push(KN(i,e))}return n}function JD(t){let e;if(typeof t=="string")e=KN(t);else{const n=Rj(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!QP(i)){e=KN(i,n);break}}}if(!e)throw new Ite({signature:t});return e}function Zte(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ue("Unable to normalize signature.");return s}const Xte=t=>{const e=typeof t=="string"?t:KE(t);return Zte(e)};function kj(t){return ute(Xte(t))}const hC=kj,I0=t=>Vp(kj(t),0,4);function Dh(t){const{abi:e,args:n=[],name:r}=t,s=Ka(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?I0(a)===r:a.type==="event"?hC(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?YN(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=Dj(a.inputs,o.inputs,n);if(l)throw new aJ({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function YN(t,e){const n=typeof t,r=e.type;switch(r){case"address":return bo(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>YN(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>YN(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Dj(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return Dj(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?bo(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?bo(n[r],{strict:!1}):!1)return o}}const vS="/docs/contract/decodeFunctionResult";function $h(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=Dh({abi:e,args:n,name:r});if(!a)throw new zp(r,{docsPath:vS});i=a}if(i.type!=="function")throw new zp(void 0,{docsPath:vS});if(!i.outputs)throw new $4(i.name,{docsPath:vS});const o=A0(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const e3="/docs/contract/encodeFunctionData";function Jte(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Dh({abi:e,args:n,name:r});if(!i)throw new zp(r,{docsPath:e3});s=i}if(s.type!=="function")throw new zp(void 0,{docsPath:e3});return{abi:[s],functionName:I0(aa(s))}}function _o(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:Jte(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Fu(s.inputs,e??[]):void 0;return Sg([i,o??"0x"])}function xg({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new ON({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new ON({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const $j={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Mj={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},ene={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function tne(t){const{abi:e,data:n}=t,r=Vp(n,0,4);if(r==="0x")throw new w0;const i=[...e||[],Mj,ene].find(o=>o.type==="error"&&r===I0(aa(o)));if(!i)throw new k4(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?A0(i.inputs,Vp(n,4)):void 0,errorName:i.name}}function Lj({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Er(e[i]):e[i]}`).join(", ")})`}class Uj extends ue{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?Jn(n):void 0;let g=_0({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${jP(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${hi(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${hi(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${hi(l)} gwei`,nonce:u});f&&(g+=`
${Dee(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Bj extends ue{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Dh({abi:n,args:r,name:o}),l=c?Lj({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?aa(c,{includeName:!0}):void 0,d=_0({address:s&&bee(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class QN extends ue{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=tne({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=$j[f]}else{const f=u?aa(u,{includeName:!0}):void 0,p=u&&h?Lj({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof k4&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class nne extends ue{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class rne extends ue{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class fC extends ue{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function ZP(t,e){var r,s,i,o,a,c;if(!(t instanceof ue))return!1;const n=t.walk(l=>l instanceof QN);return n instanceof QN?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===$j[50]):!1}function sne(t){const{abi:e,data:n}=t,r=Vp(n,0,4),s=e.find(i=>i.type==="function"&&r===I0(aa(i)));if(!s)throw new oJ(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?A0(s.inputs,Vp(n,4)):void 0}}const ES="/docs/contract/encodeErrorResult";function t3(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=Dh({abi:e,args:r,name:n});if(!c)throw new OD(n,{docsPath:ES});s=c}if(s.type!=="error")throw new OD(void 0,{docsPath:ES});const i=aa(s),o=I0(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new sJ(s.name,{docsPath:ES});a=Fu(s.inputs,r)}return Sg([o,a])}const _S="/docs/contract/encodeFunctionResult";function ine(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=Dh({abi:e,name:n});if(!o)throw new zp(n,{docsPath:_S});s=o}if(s.type!=="function")throw new zp(void 0,{docsPath:_S});if(!s.outputs)throw new $4(s.name,{docsPath:_S});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new M4(r)})();return Fu(s.outputs,i)}const XP="x-batch-gateway:true";async function one(t){const{data:e,ccipRequest:n}=t,{args:[r]}=sne({abi:zN,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(XP)?await one({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=ane(c)}})),ine({abi:zN,functionName:"query",result:[s,i]})}function ane(t){return t.name==="HttpRequestError"&&t.status?t3({abi:zN,errorName:"HttpError",args:[t.status,t.shortMessage]}):t3({abi:[Mj],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function jj(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Ka(e)?e:null}function Dv(t){let e=new Uint8Array(32).fill(0);if(!t)return Cr(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=jj(n[r]),i=s?Cg(s):Yr(Hd(n[r]),"bytes");e=Yr(wo([e,i]),"bytes")}return Cr(e)}function cne(t){return`[${t.slice(2)}]`}function lne(t){const e=new Uint8Array(32).fill(0);return t?jj(t)||Yr(Hd(t)):Cr(e)}function pC(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Hd(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=Hd(s[i]);o.byteLength>255&&(o=Hd(cne(lne(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const une=3;function ch(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof fC?t:t instanceof ue?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof w0?new nne({functionName:i}):[une,ih.code].includes(c)&&(l||u||d||h)?new QN({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof WP?u:h??d}):t;return new Bj(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const JP=BigInt(0),ZN=BigInt(1);function YE(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Pb(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Fj(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?JP:BigInt("0x"+t)}function gC(t){return Fj(rw(t))}function Wj(t){return ca(t),Fj(rw(Uint8Array.from(t).reverse()))}function eO(t,e){return OP(t.toString(16).padStart(e*2,"0"))}function zj(t,e){return eO(t,e).reverse()}function ro(t,e,n){let r;if(typeof e=="string")try{r=OP(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(PP(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const CS=t=>typeof t=="bigint"&&JP<=t;function dne(t,e,n){return CS(t)&&CS(e)&&CS(n)&&e<=t&&t<n}function hne(t,e,n,r){if(!dne(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function fne(t){let e;for(e=0;t>JP;t>>=ZN,e+=1);return e}const mC=t=>(ZN<<BigInt(t))-ZN;function pne(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return Sd(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function tO(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function n3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const gne="0.1.1";function mne(){return gne}let ir=class XN extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof XN){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof XN&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${mne()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return Hj(this,e)}};function Hj(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?Hj(t.cause,e):e?null:t}const yne="#__bigint";function wne(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+yne:s,n)}function bne(t,e){if(s3(t)>e)throw new Tne({givenSize:s3(t),maxSize:e})}const cc={zero:48,nine:57,A:65,F:70,a:97,f:102};function r3(t){if(t>=cc.zero&&t<=cc.nine)return t-cc.zero;if(t>=cc.A&&t<=cc.F)return t-(cc.A-10);if(t>=cc.a&&t<=cc.f)return t-(cc.a-10)}function vne(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new Rne({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function nO(t,e){if(vo(t)>e)throw new $ne({givenSize:vo(t),maxSize:e})}function Ene(t,e){if(typeof e=="number"&&e>0&&e>vo(t)-1)throw new Yj({offset:e,position:"start",size:vo(t)})}function _ne(t,e,n){if(typeof e=="number"&&typeof n=="number"&&vo(t)!==n-e)throw new Yj({offset:n,position:"end",size:vo(t)})}function qj(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Mne({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Cne=new TextEncoder;function Sne(t){return t instanceof Uint8Array?t:typeof t=="string"?Ine(t):Ane(t)}function Ane(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Ine(t,e={}){const{size:n}=e;let r=t;n&&(nO(t,n),r=uh(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=r3(s.charCodeAt(c++)),u=r3(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new ir(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function Nne(t,e={}){const{size:n}=e,r=Cne.encode(t);return typeof n=="number"?(bne(r,n),xne(r,n)):r}function xne(t,e){return vne(t,{dir:"right",size:e})}function s3(t){return t.length}let Tne=class extends ir{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Rne=class extends ir{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const Pne=new TextEncoder,One=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function kne(t,e={}){const{strict:n=!1}=e;if(!t)throw new i3(t);if(typeof t!="string")throw new i3(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new o3(t);if(!t.startsWith("0x"))throw new o3(t)}function Qa(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Vj(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(nO(n,e.size),lh(n,e.size)):n}function Gj(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=One[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(nO(r,e.size),uh(r,e.size)):r}function Ns(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new Kj({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?lh(c,r):c}function rO(t,e={}){return Gj(Pne.encode(t),e)}function lh(t,e){return qj(t,{dir:"left",size:e})}function uh(t,e){return qj(t,{dir:"right",size:e})}function sO(t,e,n,r={}){const{strict:s}=r;Ene(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&_ne(i,e,n),i}function vo(t){return Math.ceil((t.length-2)/2)}function Dne(t,e={}){const{strict:n=!1}=e;try{return kne(t,{strict:n}),!0}catch{return!1}}let Kj=class extends ir{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class i3 extends ir{constructor(e){super(`Value \`${typeof e=="object"?wne(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class o3 extends ir{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let $ne=class extends ir{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class Yj extends ir{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Mne=class extends ir{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Lne(t){return{address:t.address,amount:Ns(t.amount),index:Ns(t.index),validatorIndex:Ns(t.validatorIndex)}}function Qj(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Ns(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Ns(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Ns(t.gasLimit)},...typeof t.number=="bigint"&&{number:Ns(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Ns(t.prevRandao)},...typeof t.time=="bigint"&&{time:Ns(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Lne)}}}const Une="0x82ad56cb",Zj="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Bne="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",jne="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function Xj(t,{docsPath:e,...n}){const r=(()=>{const s=lC(t,n);return s instanceof E0?t:s})();return new Uj(r,{docsPath:e,...n})}function iO(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const SS=new Map;function Jj({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>SS.delete(e),a=()=>c().map(({args:u})=>u),c=()=>SS.get(e)||[],l=u=>SS.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=iO();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function N0(t,e){var q,j,T,N;const{account:n=t.account,authorizationList:r,batch:s=!!((q=t.batch)!=null&&q.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:E,to:_,value:C,stateOverride:I,...A}=e,x=n?Jn(n):void 0;if(u&&(h||f))throw new ue("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&_)throw new ue("Cannot provide both `code` & `to` as parameters.");const S=u&&d,D=h&&f&&_&&d,P=S||D,U=S?zne({code:u,data:d}):D?Hne({data:d,factory:h,factoryData:f,to:_}):d;try{kh(e);const R=(typeof i=="bigint"?He(i):void 0)||o,k=l?Qj(l):void 0,B=qP(I),H=(N=(T=(j=t.chain)==null?void 0:j.formatters)==null?void 0:T.transactionRequest)==null?void 0:N.format,se=(H||Ag)({...uC(A,{format:H}),from:x==null?void 0:x.address,accessList:a,authorizationList:r,blobs:c,data:U,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:E,to:P?void 0:_,value:C});if(s&&Fne({request:se})&&!B&&!k)try{return await Wne(t,{...se,blockNumber:i,blockTag:o})}catch(me){if(!(me instanceof nj)&&!(me instanceof ON))throw me}const ne=(()=>{const me=[se,R];return B&&k?[...me,B,k]:B?[...me,B]:k?[...me,{},k]:me})(),ae=await t.request({method:"eth_call",params:ne});return ae==="0x"?{data:void 0}:{data:ae}}catch($){const R=qne($),{offchainLookup:k,offchainLookupSignature:B}=await hs(async()=>{const{offchainLookup:H,offchainLookupSignature:X}=await import("./ccip-BStOA8c4.js");return{offchainLookup:H,offchainLookupSignature:X}},[]);if(t.ccipRead!==!1&&(R==null?void 0:R.slice(0,10))===B&&_)return{data:await k(t,{data:R,to:_})};throw P&&(R==null?void 0:R.slice(0,10))==="0x101bb98d"?new rne({factory:h}):Xj($,{...e,account:x,chain:t.chain})}}function Fne({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Une)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Wne(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new nj;l=xg({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?He(s):void 0)||i,{schedule:h}=Jj({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:E})=>b+(E.length-2),0)>n*2},fn:async w=>{const y=w.map(_=>({allowFailure:!0,callData:_.data,target:_.to})),b=_o({abi:WN,args:[y],functionName:"aggregate3"}),E=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return $h({abi:WN,args:[y],functionName:"aggregate3",data:E||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new fC({data:f});return f==="0x"?{data:void 0}:{data:f}}function zne(t){const{code:e,data:n}=t;return cC({abi:Oj(["constructor(bytes, bytes)"]),bytecode:Zj,args:[e,n]})}function Hne(t){const{data:e,factory:n,factoryData:r,to:s}=t;return cC({abi:Oj(["constructor(address, bytes, address, bytes)"]),bytecode:Bne,args:[s,e,n,r]})}function qne(t){var n;if(!(t instanceof ue))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Za(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=_o({abi:n,args:s,functionName:i});try{const{data:c}=await tt(t,N0,"call")({...o,data:a,to:r});return $h({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw ch(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Vne(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xg({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=_o({abi:YD,functionName:"addr",...s!=null?{args:[Dv(i),BigInt(s)]}:{args:[Dv(i)]}}),h={address:l,abi:bj,functionName:"resolve",args:[yo(pC(i)),d,o??[XP]],blockNumber:n,blockTag:r},p=await tt(t,Za,"readContract")(h);if(p[0]==="0x")return null;const g=$h({abi:YD,args:s!=null?[Dv(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Wa(g)==="0x00"?null:g}catch(d){if(a)throw d;if(ZP(d,"resolve"))return null;throw d}}class Gne extends ue{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class lm extends ue{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class oO extends ue{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Kne extends ue{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Yne=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Qne=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Zne=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Xne=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Jne(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function a3(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function eF({uri:t,gatewayUrls:e}){const n=Zne.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=a3(e==null?void 0:e.ipfs,"https://ipfs.io"),s=a3(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(Yne),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||Qne.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(Xne,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new oO({uri:t})}function tF(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Gne({data:t});return t.image||t.image_url||t.image_data}async function ere({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await aO({gatewayUrls:t,uri:tF(n)})}catch{throw new oO({uri:e})}}async function aO({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=eF({uri:e,gatewayUrls:t});if(r||await Jne(n))return n;throw new oO({uri:e})}function tre(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new lm({reason:"Only EIP-155 supported"});if(!o)throw new lm({reason:"Chain ID not found"});if(!c)throw new lm({reason:"Contract address not found"});if(!s)throw new lm({reason:"Token ID not found"});if(!a)throw new lm({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function nre(t,{nft:e}){if(e.namespace==="erc721")return Za(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Za(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Kne({namespace:e.namespace})}async function rre(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?sre(t,{gatewayUrls:e,record:n}):aO({uri:n,gatewayUrls:e})}async function sre(t,{gatewayUrls:e,record:n}){const r=tre(n),s=await nre(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=eF({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return aO({uri:tF(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),ere({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function nF(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xg({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:bj,functionName:"resolve",args:[yo(pC(i)),_o({abi:KD,functionName:"text",args:[Dv(i),s]}),o??[XP]],blockNumber:n,blockTag:r},f=await tt(t,Za,"readContract")(d);if(f[0]==="0x")return null;const p=$h({abi:KD,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(ZP(d,"resolve"))return null;throw d}}async function ire(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await tt(t,nF,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await rre(t,{record:c,gatewayUrls:r})}catch{return null}}async function rF(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=xg({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:Xee,functionName:"reverse",args:[yo(pC(c))],blockNumber:n,blockTag:r},u=tt(t,Za,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(ZP(l,"reverse"))return null;throw l}}async function ore(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return xg({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await tt(t,Za,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[yo(pC(s))],blockNumber:n,blockTag:r});return c}async function sF(t,e){var w,y,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?Jn(n):void 0;try{kh(e);const _=(typeof r=="bigint"?He(r):void 0)||s,C=(b=(y=(w=t.chain)==null?void 0:w.formatters)==null?void 0:y.transactionRequest)==null?void 0:b.format,A=(C||Ag)({...uC(p,{format:C}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),x=await t.request({method:"eth_createAccessList",params:[A,_]});return{accessList:x.accessList,gasUsed:BigInt(x.gasUsed)}}catch(E){throw Xj(E,{...e,account:g,chain:t.chain})}}function yC(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function are(t){const e=yC(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class cre extends ue{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const c3="/docs/contract/encodeEventTopics";function x0(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=Dh({abi:e,name:n});if(!l)throw new kD(n,{docsPath:c3});s=l}if(s.type!=="event")throw new kD(void 0,{docsPath:c3});const i=aa(s),o=hC(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>l3({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?l3({param:d,value:u[h]}):null))??[])}return[o,...a]}function l3({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Yr(Cg(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new cre(t.type);return Fu([t],[e])}async function iF(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=yC(t,{method:"eth_newFilter"}),u=i?x0({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?He(o):o,toBlock:typeof c=="bigint"?He(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function oF(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=yC(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>x0({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?He(i):i,toBlock:typeof a=="bigint"?He(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function aF(t){const e=yC(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function lre(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=_o({abi:n,args:s,functionName:i});try{return await tt(t,dC,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Jn(a.account):void 0;throw ch(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function ure(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const dre=new Map,hre=new Map;function fre(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,dre),r=e(t,hre);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function pre(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=fre(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const gre=t=>`blockNumber.${t}`;async function T0(t,{cacheTime:e=t.cacheTime}={}){const n=await pre(()=>t.request({method:"eth_blockNumber"}),{cacheKey:gre(t.uid),cacheTime:e});return BigInt(n)}async function mre(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?He(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),oa(i)}async function u3(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?He(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function wC(t,e){if(!bo(t,{strict:!1}))throw new Ru({address:t});if(!bo(e,{strict:!1}))throw new Ru({address:e});return t.toLowerCase()===e.toLowerCase()}const d3="/docs/contract/decodeEventLog";function cO(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new iJ({docsPath:d3});const c=e.find(g=>g.type==="event"&&o===hC(aa(g)));if(!(c&&"name"in c)||c.type!=="event")throw new D4(o,{docsPath:d3});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,y]=f[g],b=a[g];if(!b)throw new oC({abiItem:c,param:w});h[d?y:w.name||y]=yre({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=A0(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof O4||g instanceof X4?new tw({abiItem:c,data:n,params:p,size:Xn(n)}):g}else if(i)throw new tw({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function yre({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(A0([t],e)||[])[0]}function lO(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===hC(u));if(!c)return null;const l=cO({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!wre({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof D4)return null;if(c instanceof tw||c instanceof oC){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function wre(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?wC(o,a):i.type==="string"||i.type==="bytes"?Yr(Cg(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function Kc(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function uO(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>x0({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?He(r):r,toBlock:typeof s=="bigint"?He(s):s}]});const f=h.map(p=>Kc(p));return u?lO({abi:u,args:a,logs:f,strict:l}):f}async function cF(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?Dh({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return tt(t,uO,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class bre extends ue{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function vre(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await tt(t,Za,"readContract")({abi:Ere,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new bre({address:n}):o}}const Ere=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function _re(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function Cre(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?He(n):void 0,o=await t.request({method:"eth_feeHistory",params:[He(e),i||r,s]},{dedupe:!!i});return _re(o)}async function bC(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Kc(i));return!("abi"in e)||!e.abi?s:lO({abi:e.abi,logs:s,strict:n})}async function Sre(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>Kc(i));return e.abi?lO({abi:e.abi,logs:s,strict:n}):s}async function Are(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?He(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function vC(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?He(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,He(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,He(i)]},{dedupe:!!a}),!c)throw new sj({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||lj)(c)}async function Ire(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([tt(t,T0,"getBlockNumber")({}),e?tt(t,vC,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const lF={"0x0":"reverted","0x1":"success"};function Nre(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>Kc(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?oa(t.transactionIndex):null,status:t.status?lF[t.status]:null,type:t.type?cj[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function JN(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new ij({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Nre)(n)}async function uF(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=xg({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:E,address:_,args:C,functionName:I}=l[b];try{const A=_o({abi:E,args:C,functionName:I});p+=(A.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(A.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:A,target:_}]}catch(A){const x=ch(A,{abi:E,address:_,args:C,docsPath:"/docs/contract/multicall",functionName:I,sender:n});if(!r)throw x;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:_}]}}const g=await Promise.allSettled(h.map(b=>tt(t,Za,"readContract")({abi:WN,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const E=g[b];if(E.status==="rejected"){if(!r)throw E.reason;for(let C=0;C<h[b].length;C++)w.push({status:"failure",error:E.reason,result:void 0});continue}const _=E.value;for(let C=0;C<_.length;C++){const{returnData:I,success:A}=_[C],{callData:x}=h[b][C],{abi:S,address:D,functionName:P,args:U}=l[w.length];try{if(x==="0x")throw new w0;if(!A)throw new fC({data:I});const q=$h({abi:S,args:U,data:I,functionName:P});w.push(r?{result:q,status:"success"}:q)}catch(q){const j=ch(q,{abi:S,address:D,args:U,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw j;w.push({error:j,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new ue("multicall results mismatch");return w}async function ex(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?Qj(h.blockOverrides):void 0,p=h.calls.map(w=>{const y=w,b=y.account?Jn(y.account):void 0,E=y.abi?_o(y):y.data,_={...y,data:y.dataSuffix?wo([E||"0x",y.dataSuffix]):E,from:y.from??(b==null?void 0:b.address)};return kh(_),Ag(_)}),g=h.stateOverrides?qP(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?He(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...uj(h),calls:h.calls.map((p,g)=>{var D,P;const{abi:w,args:y,functionName:b,to:E}=s[f].calls[g],_=((D=p.error)==null?void 0:D.data)??p.returnData,C=BigInt(p.gasUsed),I=(P=p.logs)==null?void 0:P.map(U=>Kc(U)),A=p.status==="0x1"?"success":"failure",x=w&&A==="success"&&_!=="0x"?$h({abi:w,data:_,functionName:b}):null,S=(()=>{var q;if(A==="success")return;let U;if(((q=p.error)==null?void 0:q.data)==="0x"?U=new w0:p.error&&(U=new fC(p.error)),!!U)return ch(U,{abi:w??[],address:E??"0x",args:y,functionName:b??"<unknown>"})})();return{data:_,gasUsed:C,logs:I,status:A,...A==="success"?{result:x}:{error:S}}})}))}catch(c){const l=c,u=lC(l,{});throw u instanceof E0?l:u}}function dF(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=$P(Sne(t));return n==="Bytes"?r:Gj(r)}let xre=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Tre={checksum:new xre(8192)},AS=Tre.checksum,Rre=/^0x[a-fA-F0-9]{40}$/;function EC(t,e={}){const{strict:n=!0}=e;if(!Rre.test(t))throw new h3({address:t,cause:new Ore});if(n){if(t.toLowerCase()===t)return;if(Pre(t)!==t)throw new h3({address:t,cause:new kre})}}function Pre(t){if(AS.has(t))return AS.get(t);EC(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=dF(Nne(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return AS.set(t,s),s}function tx(t,e={}){const{strict:n=!0}=e??{};try{return EC(t,{strict:n}),!0}catch{return!1}}class h3 extends ir{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Ore extends ir{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class kre extends ir{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function nx(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ir("Unable to normalize signature.");return s}function rx(t,e){const n=typeof t,r=e.type;switch(r){case"address":return tx(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>rx(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>rx(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function hF(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return hF(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?tx(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?tx(n[r],{strict:!1}):!1)return o}}function fF(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?JD(t):t;return{...r,...n?{hash:Zf(r)}:{}}}function Dre(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=Dne(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?pF(l)===sO(e,0,4):l.type==="event"?Zf(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new sx({name:e});if(o.length===1)return{...o[0],...s?{hash:Zf(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:Zf(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?rx(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=hF(l.inputs,a.inputs,r);if(d)throw new Mre({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new sx({name:e});return{...c,...s?{hash:Zf(c)}:{}}}function pF(t){return sO(Zf(t),0,4)}function $re(t){const e=typeof t=="string"?t:KE(t);return nx(e)}function Zf(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:dF(rO($re(t)))}class Mre extends ir{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${nx(KE(e.abiItem))}\`, and`,`\`${n.type}\` in \`${nx(KE(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class sx extends ir{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const Lre=/^(.*)\[([0-9]*)\]$/,Ure=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,gF=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Bre({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(dO({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function dO({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=Gre(r.type);if(s){const[i,o]=s;return Fre(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return Vre(n,{checksumAddress:t,parameter:r});if(r.type==="address")return jre(n,{checksum:t});if(r.type==="bool")return zre(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=gF.exec(r.type)??[];return Hre(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return Wre(n,{type:r.type});if(r.type==="string")return qre(n);throw new bF(r.type)}function hO(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=vo(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ns(e+s,{size:32})),r.push(a),s+=vo(a)):n.push(a)}return Qa(...n,...r)}function jre(t,e){const{checksum:n=!1}=e;return EC(t,{strict:n}),{dynamic:!1,encoded:lh(t.toLowerCase())}}function Fre(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new Yre(t);if(!i&&t.length!==r)throw new Kre({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=dO({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=hO(a);if(i){const l=Ns(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Qa(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Qa(...a.map(({encoded:c})=>c))}}function Wre(t,{type:e}){const[,n]=e.split("bytes"),r=vo(t);if(!n){let s=t;return r%32!==0&&(s=uh(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Qa(lh(Ns(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new yF({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:uh(t)}}function zre(t){if(typeof t!="boolean")throw new ir(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:lh(Vj(t))}}function Hre(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new Kj({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ns(t,{size:32,signed:e})}}function qre(t){const e=rO(t),n=Math.ceil(vo(e)/32),r=[];for(let s=0;s<n;s++)r.push(uh(sO(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Qa(uh(Ns(vo(e),{size:32})),...r)}}function Vre(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=dO({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?hO(i):Qa(...i.map(({encoded:o})=>o))}}function Gre(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function mF(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new wF({expectedLength:t.length,givenLength:e.length});const s=Bre({checksumAddress:r,parameters:t,values:e}),i=hO(s);return i.length===0?"0x":i}function ix(t,e){if(t.length!==e.length)throw new wF({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(ix.encode(s,i))}return Qa(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return EC(c),lh(c.toLowerCase(),s?32:0)}if(n==="string")return rO(r);if(n==="bytes")return r;if(n==="bool")return lh(Vj(r),s?32:1);const i=n.match(gF);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return Ns(r,{size:s?32:d,signed:l==="int"})}const o=n.match(Ure);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new yF({expectedSize:Number.parseInt(l),value:r});return uh(r,s?32:0)}const a=n.match(Lre);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Qa(...u)}throw new bF(n)}t.encode=e})(ix||(ix={}));class Kre extends ir{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class yF extends ir{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${vo(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class wF extends ir{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Yre extends ir{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class bF extends ir{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function Qre(t,e){var s;const{bytecode:n,args:r}=e;return Qa(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?mF(t.inputs,r):"0x")}function Zre(t){return fF(t)}function Xre(t,...e){const{overloads:n}=t,r=n?Jre([t,...n],t.name,{args:e[0]}):t,s=ese(r),i=e.length>0?mF(r.inputs,e[0]):void 0;return i?Qa(s,i):s}function rf(t,e={}){return fF(t,e)}function Jre(t,e,n){const r=Dre(t,e,n);if(r.type!=="function")throw new sx({name:e,type:"function"});return r}function ese(t){return pF(t)}const tse="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",ga="0x0000000000000000000000000000000000000000",Ob=new aC(8192);function nse(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Ob.get(n))return Ob.get(n);const r=t().finally(()=>Ob.delete(n));return Ob.set(n,r),r}async function QE(t){return new Promise(e=>setTimeout(e,t))}function ZE(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await QE(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function rse(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Id(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Id(new Error("method not supported"),{method:l});const u=s?Wp(`${c}.${Er(n)}`):void 0;return nse(()=>ZE(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case sw.code:throw new sw(f);case iw.code:throw new iw(f);case ow.code:throw new ow(f,{method:n.method});case aw.code:throw new aw(f);case ih.code:throw new ih(f);case oh.code:throw new oh(f);case cw.code:throw new cw(f);case gu.code:throw new gu(f);case Gp.code:throw new Gp(f);case Id.code:throw new Id(f,{method:n.method});case Kp.code:throw new Kp(f);case lw.code:throw new lw(f);case pr.code:throw new pr(f);case uw.code:throw new uw(f);case dw.code:throw new dw(f);case hw.code:throw new hw(f);case fw.code:throw new fw(f);case Ya.code:throw new Ya(f);case Yp.code:throw new Yp(f);case pw.code:throw new pw(f);case gw.code:throw new gw(f);case mw.code:throw new mw(f);case yw.code:throw new yw(f);case ww.code:throw new ww(f);case Qp.code:throw new Qp(f);case 5e3:throw new pr(f);default:throw h instanceof ue?h:new Eee(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof ly){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>sse(h)}),{enabled:s,id:u})}}function sse(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Kp.code||t.code===ih.code:t instanceof ly&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function ise(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function vF(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function ose(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const f3=ose();function ase(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await vF(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Er(r.map(E=>({jsonrpc:"2.0",id:E.id??f3.take(),...E}))):Er({jsonrpc:"2.0",id:r.id??f3.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),y=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new WD({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new ly({body:r,details:Er(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof ly||h instanceof WD?h:new ly({body:r,cause:h,url:t})}}}}class cse extends ue{constructor({domain:e}){super(`Invalid domain "${Er(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class lse extends ue{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class use extends ue{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function dse(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:IF({domain:e}),...t.types};AF({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(hse({domain:e,types:s})),r!=="EIP712Domain"&&i.push(EF({data:n,primaryType:r,types:s})),Yr(wo(i))}function hse({domain:t,types:e}){return EF({data:t,primaryType:"EIP712Domain",types:e})}function EF({data:t,primaryType:e,types:n}){const r=_F({data:t,primaryType:e,types:n});return Yr(r)}function _F({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[fse({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=SF({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Fu(r,s)}function fse({primaryType:t,types:e}){const n=yo(pse({primaryType:t,types:e}));return Yr(n)}function pse({primaryType:t,types:e}){let n="";const r=CF({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function CF({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])CF({primaryType:i.type,types:e},n);return n}function SF({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Yr(_F({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Yr(r)];if(n==="string")return[{type:"bytes32"},Yr(yo(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>SF({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Yr(Fu(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function gse(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Er({domain:o,message:a,primaryType:r,types:s})}function AF(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(Q4);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,y]=h;He(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!bo(d))throw new Ru({address:d});const f=u.match(qJ);if(f){const[g,w]=f;if(w&&Xn(d)!==Number.parseInt(w))throw new cJ({expectedSize:Number.parseInt(w),givenSize:Xn(d)})}const p=s[u];p&&(mse(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new cse({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new lse({primaryType:r,types:s})}function IF({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function mse(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new use({type:t})}const yse=`Ethereum Signed Message:
`;function wse(t){const e=typeof t=="string"?Wp(t):typeof t.raw=="string"?t.raw:Cr(t.raw),n=Wp(`${yse}${Xn(e)}`);return wo([n,e])}function NF(t,e){return Yr(wse(t),e)}const xF="0x6492649264926492649264926492649264926492649264926492649264926492";function bse(t){return qE(t,-32)===xF}function vse(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=Sg([Fu([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),xF]);return s==="hex"?i:mo(i)}class Ese extends ue{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function _se(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new Ese({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const Cse="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Sse(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Jn(e.account):void 0;if(o&&!l)throw new ue("`account` is required when `traceAssetChanges` is true");const u=l?Qre(Zre("constructor(bytes, bytes)"),{bytecode:Zj,args:[Cse,Xre(rf("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async R=>{if(!R.data&&!R.abi)return;const{accessList:k}=await sF(t,{account:l.address,...R,data:R.abi?_o(R):R.data});return k.map(({address:B,storageKeys:H})=>H.length>0?B:null)})).then(R=>R.flat().filter(Boolean)):[],h=await ex(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((R,k)=>({abi:[rf("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:R,from:ga,nonce:k})),stateOverrides:[{address:ga,nonce:0}]}]:[],{calls:[...s,{}].map(R=>({...R,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((R,k)=>({abi:[rf("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:R,from:ga,nonce:k})),stateOverrides:[{address:ga,nonce:0}]},{calls:d.map((R,k)=>({to:R,abi:[rf("function decimals() returns (uint256)")],functionName:"decimals",from:ga,nonce:k})),stateOverrides:[{address:ga,nonce:0}]},{calls:d.map((R,k)=>({to:R,abi:[rf("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:ga,nonce:k})),stateOverrides:[{address:ga,nonce:0}]},{calls:d.map((R,k)=>({to:R,abi:[rf("function symbol() returns (string)")],functionName:"symbol",from:ga,nonce:k})),stateOverrides:[{address:ga,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,w,y,b,E,_]=o?h:[],{calls:C,...I}=f,A=C.slice(0,-1)??[],x=(p==null?void 0:p.calls)??[],S=(g==null?void 0:g.calls)??[],D=[...x,...S].map(R=>R.status==="success"?Ui(R.data):null),P=(w==null?void 0:w.calls)??[],U=(y==null?void 0:y.calls)??[],q=[...P,...U].map(R=>R.status==="success"?Ui(R.data):null),j=((b==null?void 0:b.calls)??[]).map(R=>R.status==="success"?R.result:null),T=((_==null?void 0:_.calls)??[]).map(R=>R.status==="success"?R.result:null),N=((E==null?void 0:E.calls)??[]).map(R=>R.status==="success"?R.result:null),$=[];for(const[R,k]of q.entries()){const B=D[R];if(typeof k!="bigint"||typeof B!="bigint")continue;const H=j[R-1],X=T[R-1],se=N[R-1],ne=R===0?{address:tse,decimals:18,symbol:"ETH"}:{address:d[R-1],decimals:se||H?Number(H??1):void 0,symbol:X??void 0};$.some(ae=>ae.token.address===ne.address)||$.push({token:ne,value:{pre:B,post:k,diff:k-B}})}return{assetChanges:$,block:I,results:A}}const IS=new Map,p3=new Map;let Ase=0;function Yc(t,e,n){const r=++Ase,s=()=>IS.get(t)||[],i=()=>{const u=s();IS.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=p3.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(IS.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&p3.set(t,l),o}function Tg(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await QE(c);const l=async()=>{s&&(await t({unpoll:i}),await QE(r),l())};l()})(),i}function Ise(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=Er(["watchBlocks",t.uid,e,n,r,u,c]);return Yc(p,{onBlock:s,onError:i},g=>Tg(async()=>{var w;try{const y=await tt(t,Ba,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<y.number;b++){const E=await tt(t,Ba,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(E,d),d=E}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(g.onBlock(y,d),d=y)}catch(y){(w=g.onError)==null||w.call(g,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,w=()=>p=!1;return(async()=>{try{r&&tt(t,Ba,"getBlock")({blockTag:e,includeTransactions:u}).then(E=>{p&&g&&(s(E,void 0),g=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const E=t.transport.transports.find(_=>_.config.type==="webSocket"||_.config.type==="ipc");return E?E.value:t.transport}return t.transport})(),{unsubscribe:b}=await y.subscribe({params:["newHeads"],async onData(E){var C;if(!p)return;const _=await tt(t,Ba,"getBlock")({blockNumber:(C=E.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(_,d),g=!1,d=_)},onError(E){i==null||i(E)}});w=b,p||w()}catch(y){i==null||i(y)}})(),()=>w()})()}function TF(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Er(["watchBlockNumber",t.uid,e,n,o]);return Yc(d,{onBlockNumber:r,onError:s},h=>Tg(async()=>{var f;try{const p=await tt(t,T0,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Er(["watchBlockNumber",t.uid,e,n]);return Yc(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(y){var E;if(!f)return;const b=Ui((E=y.result)==null?void 0:E.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function _C(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Nse(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=Er(["watchEvent",e,n,r,t.uid,s,u,o]);return Yc(w,{onLogs:c,onError:a},y=>{let b;o!==void 0&&(b=o-1n);let E,_=!1;const C=Tg(async()=>{var I;if(!_){try{E=await tt(t,oF,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}_=!0;return}try{let A;if(E)A=await tt(t,bC,"getFilterChanges")({filter:E});else{const x=await tt(t,T0,"getBlockNumber")({});b&&b!==x?A=await tt(t,uO,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:x}):A=[],b=x}if(A.length===0)return;if(r)y.onLogs(A);else for(const x of A)y.onLogs([x])}catch(A){E&&A instanceof oh&&(_=!1),(I=y.onError)==null||I.call(y,A)}},{emitOnBegin:!0,interval:u});return async()=>{E&&await tt(t,_C,"uninstallFilter")({filter:E}),C()}})})():(()=>{let w=!0,y=()=>w=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const I=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return I?I.value:t.transport}return t.transport})(),E=i??(s?[s]:void 0);let _=[];E&&(_=[E.flatMap(A=>x0({abi:[A],eventName:A.name,args:n}))],s&&(_=_[0]));const{unsubscribe:C}=await b.subscribe({params:["logs",{address:e,topics:_}],onData(I){var x;if(!w)return;const A=I.result;try{const{eventName:S,args:D}=cO({abi:E??[],data:A.data,topics:A.topics,strict:f}),P=Kc(A,{args:D,eventName:S});c([P])}catch(S){let D,P;if(S instanceof tw||S instanceof oC){if(d)return;D=S.abiItem.name,P=(x=S.abiItem.inputs)==null?void 0:x.some(q=>!("name"in q&&q.name))}const U=Kc(A,{args:P?[]:{},eventName:D});c([U])}},onError(I){a==null||a(I)}});y=C,w||y()}catch(b){a==null||a(b)}})(),()=>y()})()}function RF(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Er(["watchPendingTransactions",t.uid,e,i]);return Yc(l,{onTransactions:r,onError:n},u=>{let d;const h=Tg(async()=>{var f;try{if(!d)try{d=await tt(t,aF,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await tt(t,bC,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await tt(t,_C,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function xse(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>v0(r))}async function Tse(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Rse(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Jn(n):void 0,i=r?[s==null?void 0:s.address,[He(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const PF="0x5792579257925792579257925792579257925792579257925792579257925792",OF=He(0,{size:32});async function Pse(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Jn(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?_o({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?wo([p,f.dataSuffix]):p,to:f.to,value:f.value?He(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:He(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Yp(new ue(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Qp(new ue(y,{details:y}))}const p=[];for(const y of d){const b=S0(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?Ui(y.value):void 0});p.push(b),o>0&&await new Promise(E=>setTimeout(E,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const w=g.map(y=>y.status==="fulfilled"?y.value:OF);return{id:wo([...w,He(s.id,{size:32}),PF])}}throw oj(h,{...e,account:u,chain:e.chain})}}async function kF(t,e){async function n(u){if(u.endsWith(PF.slice(2))){const h=Wa(qE(u,-64,-32)),f=qE(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>OF.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:oa(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?oa(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Ui(u.blockNumber),gasUsed:Ui(u.gasUsed),status:lF[u.status]})))??[],statusCode:l,status:c,version:o}}async function Ose(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function kse(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Er(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=iO();let u;const d=Yc(o,{resolve:c,reject:l},h=>{const f=Tg(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await kF(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new Dse({id:n}))},i):void 0,await a}class Dse extends ue{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function $se(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function Mse(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?oa(t.nonce):void 0,storageProof:t.storageProof?$se(t.storageProof):void 0}}async function Lse(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?He(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return Mse(a)}async function DF(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Er(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:y}=iO(),b=a?setTimeout(()=>{p(),f(),y(new wee({hash:n}))},a):void 0;return f=Yc(c,{onReplaced:r,resolve:w,reject:y},E=>{p=tt(t,TF,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(_){const C=A=>{clearTimeout(b),p(),A(),f()};let I=_;if(!h)try{if(d){if(e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;C(()=>E.resolve(d));return}if(l||(h=!0,await ZE(async()=>{l=await tt(t,vC,"getTransaction")({hash:n}),l.blockNumber&&(I=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await tt(t,JN,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;C(()=>E.resolve(d))}catch(A){if(A instanceof sj||A instanceof ij){if(!l){h=!1;return}try{u=l,h=!0;const x=await ZE(()=>tt(t,Ba,"getBlock")({blockNumber:I,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof aj});h=!1;const S=x.transactions.find(({from:P,nonce:U})=>P===u.from&&U===u.nonce);if(!S||(d=await tt(t,JN,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e)))return;let D="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?D="repriced":S.from===S.to&&S.value===0n&&(D="cancelled"),C(()=>{var P;(P=E.onReplaced)==null||P.call(E,{reason:D,replacedTransaction:u,transaction:S,transactionReceipt:d}),E.resolve(d)})}catch(x){C(()=>E.reject(x))}}else C(()=>E.reject(A))}}})}),g}async function Use(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Oc(n))}async function Bse(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function $F(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Ph({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Jn(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Jn(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await tt(t,Ig,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await tt(t,GP,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&wC(o.address,i.address))&&(a.nonce+=1)),a}async function jse(t,e){const{account:n=t.account}=e;if(!n)throw new Ph({docsPath:"/docs/eip7702/signAuthorization"});const r=Jn(n);if(!r.signAuthorization)throw new kv({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await $F(t,e);return r.signAuthorization(s)}async function Fse(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Ph({docsPath:"/docs/actions/wallet/signTransaction"});const i=Jn(n);kh({account:i,...e});const o=await tt(t,Ig,"getChainId")({});r!==null&&rj({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||Ag;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:He(o),from:i.address}]},{retryCount:0})}async function MF(t,{account:e=t.account,message:n}){if(!e)throw new Ph({docsPath:"/docs/actions/wallet/signMessage"});const r=Jn(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Wp(n):n.raw instanceof Uint8Array?yo(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function Wse(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Ph({docsPath:"/docs/actions/wallet/signTypedData"});const o=Jn(n),a={EIP712Domain:IF({domain:r}),...e.types};if(AF({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=gse({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function zse(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Jn(a.account):t.account,l=_o({abi:n,args:s,functionName:o});try{const{data:u}=await tt(t,N0,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=$h({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw ch(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function Hse(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:He(e)}]},{retryCount:0})}class LF extends kP{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,bJ(e);const r=b0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),qp(i)}update(e){return Hp(this),this.iHash.update(e),this}digestInto(e){Hp(this),ca(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const UF=(t,e,n)=>new LF(t,e).update(n).digest();UF.create=(t,e)=>new LF(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ai=BigInt(0),Os=BigInt(1),Nd=BigInt(2),qse=BigInt(3),BF=BigInt(4),jF=BigInt(5),FF=BigInt(8);function oo(t,e){const n=t%e;return n>=ai?n:e+n}function Gi(t,e,n){let r=t;for(;e-- >ai;)r*=r,r%=n;return r}function g3(t,e){if(t===ai)throw new Error("invert: expected non-zero number");if(e<=ai)throw new Error("invert: expected positive modulus, got "+e);let n=oo(t,e),r=e,s=ai,i=Os;for(;n!==ai;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Os)throw new Error("invert: does not exist");return oo(s,e)}function WF(t,e){const n=(t.ORDER+Os)/BF,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Vse(t,e){const n=(t.ORDER-jF)/FF,r=t.mul(e,Nd),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Nd),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Gse(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Os,n=0;for(;e%Nd===ai;)e/=Nd,n++;let r=Nd;const s=CC(t);for(;m3(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return WF;let i=s.pow(r,e);const o=(e+Os)/Nd;return function(c,l){if(c.is0(l))return l;if(m3(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=Os<<BigInt(u-p-1),y=c.pow(d,w);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function Kse(t){return t%BF===qse?WF:t%FF===jF?Vse:Gse(t)}const Yse=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Qse(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Yse.reduce((r,s)=>(r[s]="function",r),e);return tO(t,n),t}function Zse(t,e,n){if(n<ai)throw new Error("invalid exponent, negatives unsupported");if(n===ai)return t.ONE;if(n===Os)return e;let r=t.ONE,s=e;for(;n>ai;)n&Os&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Os;return r}function zF(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function m3(t,e){const n=(t.ORDER-Os)/Nd,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Xse(t,e){e!==void 0&&nw(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function CC(t,e,n=!1,r={}){if(t<=ai)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=Xse(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:mC(o),ZERO:ai,ONE:Os,create:u=>oo(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return ai<=u&&u<t},is0:u=>u===ai,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Os)===Os,neg:u=>oo(-u,t),eql:(u,d)=>u===d,sqr:u=>oo(u*u,t),add:(u,d)=>oo(u+d,t),sub:(u,d)=>oo(u-d,t),mul:(u,d)=>oo(u*d,t),pow:(u,d)=>Zse(l,u,d),div:(u,d)=>oo(u*g3(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>g3(u,t),sqrt:i||(u=>(c||(c=Kse(t)),c(l,u))),toBytes:u=>n?zj(u,a):eO(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?Wj(u):gC(u)},invertBatch:u=>zF(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function HF(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function qF(t){const e=HF(t);return e+Math.ceil(e/2)}function Jse(t,e,n=!1){const r=t.length,s=HF(e),i=qF(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Wj(t):gC(t),a=oo(o,e-Os)+Os;return n?zj(a,s):eO(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zp=BigInt(0),xd=BigInt(1);function uy(t,e){const n=e.negate();return t?n:e}function eie(t,e,n){const r=o=>o.pz,s=zF(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function VF(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function NS(t,e){VF(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=mC(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function y3(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=xd);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function tie(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function nie(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const xS=new WeakMap,GF=new WeakMap;function TS(t){return GF.get(t)||1}function w3(t){if(t!==Zp)throw new Error("invalid wNAF")}function rie(t,e){return{constTimeNegate:uy,hasPrecomputes(n){return TS(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Zp;)r&xd&&(s=s.add(i)),i=i.double(),r>>=xd;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=NS(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=NS(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=y3(s,c,a);s=l,d?o=o.add(uy(f,r[p])):i=i.add(uy(h,r[u]))}return w3(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=NS(n,e);for(let a=0;a<o.windows&&s!==Zp;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=y3(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return w3(s),i},getPrecomputes(n,r,s){let i=xS.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),xS.set(r,i))),i},wNAFCached(n,r,s){const i=TS(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=TS(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){VF(r,e),GF.set(n,r),xS.delete(n)}}}function sie(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Zp||r>Zp;)n&xd&&(i=i.add(s)),r&xd&&(o=o.add(s)),s=s.double(),n>>=xd,r>>=xd;return{p1:i,p2:o}}function iie(t,e,n,r){tie(n,t),nie(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=fne(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=mC(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function b3(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Qse(e),e}else return CC(t)}function oie(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Zp))throw new Error(`CURVE.${a} must be positive bigint`)}const r=b3(e.p,n.Fp),s=b3(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function v3(t){t.lowS!==void 0&&YE("lowS",t.lowS),t.prehash!==void 0&&YE("prehash",t.prehash)}class aie extends Error{constructor(e=""){super(e)}}const Cc={Err:aie,_tlv:{encode:(t,e)=>{const{Err:n}=Cc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Pb(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Pb(s.length/2|128):"";return Pb(t)+i+s+e},decode(t,e){const{Err:n}=Cc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Cc;if(t<dy)throw new e("integer: negative integers are not allowed");let n=Pb(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Cc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return gC(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Cc,s=ro("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Cc,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},dy=BigInt(0),hy=BigInt(1),cie=BigInt(2),kb=BigInt(3),lie=BigInt(4);function uie(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function KF(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=ro("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function die(t,e={}){const{Fp:n,Fn:r}=oie("weierstrass",t,e),{h:s,n:i}=t;tO(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(x,S,D){const{x:P,y:U}=S.toAffine(),q=n.toBytes(P);if(YE("isCompressed",D),D){a();const j=!n.isOdd(U);return Sd(YF(j),q)}else return Sd(Uint8Array.of(4),q,n.toBytes(U))}function l(x){ca(x);const S=n.BYTES,D=S+1,P=2*S+1,U=x.length,q=x[0],j=x.subarray(1);if(U===D&&(q===2||q===3)){const T=n.fromBytes(j);if(!n.isValid(T))throw new Error("bad point: is not on curve, wrong x");const N=h(T);let $;try{$=n.sqrt(N)}catch(B){const H=B instanceof Error?": "+B.message:"";throw new Error("bad point: is not on curve, sqrt error"+H)}a();const R=n.isOdd($);return(q&1)===1!==R&&($=n.neg($)),{x:T,y:$}}else if(U===P&&q===4){const T=n.fromBytes(j.subarray(S*0,S*1)),N=n.fromBytes(j.subarray(S*1,S*2));if(!f(T,N))throw new Error("bad point: is not on curve");return{x:T,y:N}}else throw new Error(`bad point: got length ${U}, expected compressed=${D} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=uie(n,t.a,t.b);function f(x,S){const D=n.sqr(S),P=h(x);return n.eql(D,P)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,kb),lie),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(x,S,D=!1){if(!n.isValid(S)||D&&n.is0(S))throw new Error(`bad point coordinate ${x}`);return S}function y(x){if(!(x instanceof C))throw new Error("ProjectivePoint expected")}const b=n3((x,S)=>{const{px:D,py:P,pz:U}=x;if(n.eql(U,n.ONE))return{x:D,y:P};const q=x.is0();S==null&&(S=q?n.ONE:n.inv(U));const j=n.mul(D,S),T=n.mul(P,S),N=n.mul(U,S);if(q)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:j,y:T}}),E=n3(x=>{if(x.is0()){if(e.allowInfinityPoint&&!n.is0(x.py))return;throw new Error("bad point: ZERO")}const{x:S,y:D}=x.toAffine();if(!n.isValid(S)||!n.isValid(D))throw new Error("bad point: x or y not field elements");if(!f(S,D))throw new Error("bad point: equation left != right");if(!x.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(x,S,D,P,U){return D=new C(n.mul(D.px,x),D.py,D.pz),S=uy(P,S),D=uy(U,D),S.add(D)}class C{constructor(S,D,P){this.px=w("x",S),this.py=w("y",D,!0),this.pz=w("z",P),Object.freeze(this)}static fromAffine(S){const{x:D,y:P}=S||{};if(!S||!n.isValid(D)||!n.isValid(P))throw new Error("invalid affine point");if(S instanceof C)throw new Error("projective point not allowed");return n.is0(D)&&n.is0(P)?C.ZERO:new C(D,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return eie(C,"pz",S)}static fromBytes(S){return ca(S),C.fromHex(S)}static fromHex(S){const D=C.fromAffine(d(ro("pointHex",S)));return D.assertValidity(),D}static fromPrivateKey(S){const D=KF(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(D(S))}static msm(S,D){return iie(C,r,S,D)}precompute(S=8,D=!0){return A.setWindowSize(this,S),D||this.multiply(kb),this}_setWindowSize(S){this.precompute(S)}assertValidity(){E(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){y(S);const{px:D,py:P,pz:U}=this,{px:q,py:j,pz:T}=S,N=n.eql(n.mul(D,T),n.mul(q,U)),$=n.eql(n.mul(P,T),n.mul(j,U));return N&&$}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:D}=t,P=n.mul(D,kb),{px:U,py:q,pz:j}=this;let T=n.ZERO,N=n.ZERO,$=n.ZERO,R=n.mul(U,U),k=n.mul(q,q),B=n.mul(j,j),H=n.mul(U,q);return H=n.add(H,H),$=n.mul(U,j),$=n.add($,$),T=n.mul(S,$),N=n.mul(P,B),N=n.add(T,N),T=n.sub(k,N),N=n.add(k,N),N=n.mul(T,N),T=n.mul(H,T),$=n.mul(P,$),B=n.mul(S,B),H=n.sub(R,B),H=n.mul(S,H),H=n.add(H,$),$=n.add(R,R),R=n.add($,R),R=n.add(R,B),R=n.mul(R,H),N=n.add(N,R),B=n.mul(q,j),B=n.add(B,B),R=n.mul(B,H),T=n.sub(T,R),$=n.mul(B,k),$=n.add($,$),$=n.add($,$),new C(T,N,$)}add(S){y(S);const{px:D,py:P,pz:U}=this,{px:q,py:j,pz:T}=S;let N=n.ZERO,$=n.ZERO,R=n.ZERO;const k=t.a,B=n.mul(t.b,kb);let H=n.mul(D,q),X=n.mul(P,j),se=n.mul(U,T),ne=n.add(D,P),ae=n.add(q,j);ne=n.mul(ne,ae),ae=n.add(H,X),ne=n.sub(ne,ae),ae=n.add(D,U);let me=n.add(q,T);return ae=n.mul(ae,me),me=n.add(H,se),ae=n.sub(ae,me),me=n.add(P,U),N=n.add(j,T),me=n.mul(me,N),N=n.add(X,se),me=n.sub(me,N),R=n.mul(k,ae),N=n.mul(B,se),R=n.add(N,R),N=n.sub(X,R),R=n.add(X,R),$=n.mul(N,R),X=n.add(H,H),X=n.add(X,H),se=n.mul(k,se),ae=n.mul(B,ae),X=n.add(X,se),se=n.sub(H,se),se=n.mul(k,se),ae=n.add(ae,se),H=n.mul(X,ae),$=n.add($,H),H=n.mul(me,ae),N=n.mul(ne,N),N=n.sub(N,H),H=n.mul(ne,X),R=n.mul(me,R),R=n.add(R,H),new C(N,$,R)}subtract(S){return this.add(S.negate())}is0(){return this.equals(C.ZERO)}multiply(S){const{endo:D}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let P,U;const q=j=>A.wNAFCached(this,j,C.normalizeZ);if(D){const{k1neg:j,k1:T,k2neg:N,k2:$}=D.splitScalar(S),{p:R,f:k}=q(T),{p:B,f:H}=q($);U=k.add(H),P=_(D.beta,R,B,j,N)}else{const{p:j,f:T}=q(S);P=j,U=T}return C.normalizeZ([P,U])[0]}multiplyUnsafe(S){const{endo:D}=e,P=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===dy||P.is0())return C.ZERO;if(S===hy)return P;if(A.hasPrecomputes(this))return this.multiply(S);if(D){const{k1neg:U,k1:q,k2neg:j,k2:T}=D.splitScalar(S),{p1:N,p2:$}=sie(C,P,q,T);return _(D.beta,N,$,U,j)}else return A.wNAFCachedUnsafe(P,S)}multiplyAndAddUnsafe(S,D,P){const U=this.multiplyUnsafe(D).add(S.multiplyUnsafe(P));return U.is0()?void 0:U}toAffine(S){return b(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===hy?!0:S?S(C,this):A.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===hy?this:S?S(C,this):this.multiplyUnsafe(s)}toBytes(S=!0){return YE("isCompressed",S),this.assertValidity(),u(C,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return rw(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const I=r.BITS,A=rie(C,e.endo?Math.ceil(I/2):I);return C}function YF(t){return Uint8Array.of(t?2:3)}function hie(t,e,n={}){tO(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||NJ,s=e.hmac||((P,...U)=>UF(e.hash,P,Sd(...U))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const U=a>>hy;return P>U}function u(P){return l(P)?o.neg(P):P}function d(P,U){if(!o.isValidNot0(U))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class h{constructor(U,q,j){d("r",U),d("s",q),this.r=U,this.s=q,j!=null&&(this.recovery=j),Object.freeze(this)}static fromCompact(U){const q=o.BYTES,j=ro("compactSignature",U,q*2);return new h(o.fromBytes(j.subarray(0,q)),o.fromBytes(j.subarray(q,q*2)))}static fromDER(U){const{r:q,s:j}=Cc.toSig(ro("DER",U));return new h(q,j)}assertValidity(){}addRecoveryBit(U){return new h(this.r,this.s,U)}recoverPublicKey(U){const q=i.ORDER,{r:j,s:T,recovery:N}=this;if(N==null||![0,1,2,3].includes(N))throw new Error("recovery id invalid");if(a*cie<q&&N>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=N===2||N===3?j+a:j;if(!i.isValid(R))throw new Error("recovery id 2 or 3 invalid");const k=i.toBytes(R),B=t.fromHex(Sd(YF((N&1)===0),k)),H=o.inv(R),X=E(ro("msgHash",U)),se=o.create(-X*H),ne=o.create(T*H),ae=t.BASE.multiplyUnsafe(se).add(B.multiplyUnsafe(ne));if(ae.is0())throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(U){if(U==="compact")return Sd(o.toBytes(this.r),o.toBytes(this.s));if(U==="der")return OP(Cc.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return rw(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return rw(this.toBytes("compact"))}}const f=KF(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=a;return Jse(r(qF(P)),P)},precompute(P=8,U=t.BASE){return U.precompute(P,!1)}};function g(P,U=!0){return t.fromPrivateKey(P).toBytes(U)}function w(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const q=ro("key",P).length,j=i.BYTES,T=j+1,N=2*j+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===T))return q===T||q===N}function y(P,U,q=!0){if(w(P)===!0)throw new Error("first arg must be private key");if(w(U)===!1)throw new Error("second arg must be public key");return t.fromHex(U).multiply(f(P)).toBytes(q)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const U=gC(P),q=P.length*8-c;return q>0?U>>BigInt(q):U},E=e.bits2int_modN||function(P){return o.create(b(P))},_=mC(c);function C(P){return hne("num < 2^"+c,P,dy,_),o.toBytes(P)}function I(P,U,q=A){if(["recovered","canonical"].some(ne=>ne in q))throw new Error("sign() legacy options not supported");const{hash:j}=e;let{lowS:T,prehash:N,extraEntropy:$}=q;T==null&&(T=!0),P=ro("msgHash",P),v3(q),N&&(P=ro("prehashed msgHash",j(P)));const R=E(P),k=f(U),B=[C(k),C(R)];if($!=null&&$!==!1){const ne=$===!0?r(i.BYTES):$;B.push(ro("extraEntropy",ne))}const H=Sd(...B),X=R;function se(ne){const ae=b(ne);if(!o.isValidNot0(ae))return;const me=o.inv(ae),Z=t.BASE.multiply(ae).toAffine(),re=o.create(Z.x);if(re===dy)return;const de=o.create(me*o.create(X+re*k));if(de===dy)return;let ee=(Z.x===re?0:2)|Number(Z.y&hy),he=de;return T&&l(de)&&(he=u(de),ee^=1),new h(re,he,ee)}return{seed:H,k2sig:se}}const A={lowS:e.lowS,prehash:!1},x={lowS:e.lowS,prehash:!1};function S(P,U,q=A){const{seed:j,k2sig:T}=I(P,U,q);return pne(e.hash.outputLen,o.BYTES,s)(j,T)}t.BASE.precompute(8);function D(P,U,q,j=x){const T=P;U=ro("msgHash",U),q=ro("publicKey",q),v3(j);const{lowS:N,prehash:$,format:R}=j;if("strict"in j)throw new Error("options.strict was renamed to lowS");if(R!==void 0&&!["compact","der","js"].includes(R))throw new Error('format must be "compact", "der" or "js"');const k=typeof T=="string"||PP(T),B=!k&&!R&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!k&&!B)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let H,X;try{if(B)if(R===void 0||R==="js")H=new h(T.r,T.s);else throw new Error("invalid format");if(k){try{R!=="compact"&&(H=h.fromDER(T))}catch(he){if(!(he instanceof Cc.Err))throw he}!H&&R!=="der"&&(H=h.fromCompact(T))}X=t.fromHex(q)}catch{return!1}if(!H||N&&H.hasHighS())return!1;$&&(U=e.hash(U));const{r:se,s:ne}=H,ae=E(U),me=o.inv(ne),Z=o.create(ae*me),re=o.create(se*me),de=t.BASE.multiplyUnsafe(Z).add(X.multiplyUnsafe(re));return de.is0()?!1:o.create(de.x)===se}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:S,verify:D,utils:p,Point:t,Signature:h})}function fie(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=CC(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function pie(t){const{CURVE:e,curveOpts:n}=fie(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function gie(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function mie(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=pie(t),s=die(e,n),i=hie(s,r,n);return gie(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function yie(t,e){const n=r=>mie({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const XE={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const wie=BigInt(1),ox=BigInt(2),E3=(t,e)=>(t+e/ox)/e;function bie(t){const e=XE.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Gi(u,n,e)*u%e,h=Gi(d,n,e)*u%e,f=Gi(h,ox,e)*l%e,p=Gi(f,s,e)*f%e,g=Gi(p,i,e)*p%e,w=Gi(g,a,e)*g%e,y=Gi(w,c,e)*w%e,b=Gi(y,a,e)*g%e,E=Gi(b,n,e)*u%e,_=Gi(E,o,e)*p%e,C=Gi(_,r,e)*l%e,I=Gi(C,ox,e);if(!ax.eql(ax.sqr(I),t))throw new Error("Cannot find square root");return I}const ax=CC(XE.p,void 0,void 0,{sqrt:bie}),QF=yie({...XE,Fp:ax,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=XE.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-wie*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=E3(i*t,e),c=E3(-r*t,e);let l=oo(t-a*n-c*s,e),u=oo(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},pj),vie=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:QF},Symbol.toStringTag,{value:"Module"}));function Eie({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new QF.Signature(Ui(t),Ui(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:mo(o)}async function fO(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Ka(o)?o:typeof o=="object"&&"r"in o&&"s"in o?Eie(o):Cr(o),u=await(async()=>!r&&!s||bse(l)?l:vse({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:_o({abi:QD,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:cC({abi:QD,args:[n,i,u],bytecode:jne}),...c},{data:g}=await tt(t,N0,"call")(p);return YX(g??"0x0")}catch(p){try{if(wC(Oc(n),await Z4({hash:i,signature:o})))return!0}catch{}if(p instanceof Uj)return!1;throw p}}async function _ie(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=NF(n);return fO(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function Cie(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=dse({message:o,primaryType:a,types:c,domain:l});return fO(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function Sie(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function Aie(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,y=Er(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return Yc(y,{onLogs:l,onError:c},b=>{let E;a!==void 0&&(E=a-1n);let _,C=!1;const I=Tg(async()=>{var A;if(!C){try{_=await tt(t,iF,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}C=!0;return}try{let x;if(_)x=await tt(t,bC,"getFilterChanges")({filter:_});else{const S=await tt(t,T0,"getBlockNumber")({});E&&E<S?x=await tt(t,cF,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:E+1n,toBlock:S,strict:w}):x=[],E=S}if(x.length===0)return;if(i)b.onLogs(x);else for(const S of x)b.onLogs([S])}catch(x){_&&x instanceof oh&&(C=!1),(A=b.onError)==null||A.call(b,x)}},{emitOnBegin:!0,interval:d});return async()=>{_&&await tt(t,_C,"uninstallFilter")({filter:_}),I()}})})():(()=>{const w=h??!1,y=Er(["watchContractEvent",r,s,i,t.uid,o,d,w]);let b=!0,E=()=>b=!1;return Yc(y,{onLogs:l,onError:c},_=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const x=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return x?x.value:t.transport}return t.transport})(),I=o?x0({abi:n,eventName:o,args:s}):[],{unsubscribe:A}=await C.subscribe({params:["logs",{address:r,topics:I}],onData(x){var D;if(!b)return;const S=x.result;try{const{eventName:P,args:U}=cO({abi:n,data:S.data,topics:S.topics,strict:h}),q=Kc(S,{args:U,eventName:P});_.onLogs([q])}catch(P){let U,q;if(P instanceof tw||P instanceof oC){if(h)return;U=P.abiItem.name,q=(D=P.abiItem.inputs)==null?void 0:D.some(T=>!("name"in T&&T.name))}const j=Kc(S,{args:q?[]:{},eventName:U});_.onLogs([j])}},onError(x){var S;(S=_.onError)==null||S.call(_,x)}});E=A,b||E()}catch(C){c==null||c(C)}})(),()=>E()))})()}async function ZF(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Ph({docsPath:"/docs/contract/writeContract"});const l=r?Jn(r):null,u=_o({abi:n,args:i,functionName:a});try{return await tt(t,S0,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw ch(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function $i(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const $v="2.17.3",Iie=()=>`@wagmi/core@${$v}`;var XF=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},JE,JF;let nl=class cx extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return Iie()}constructor(e,n={}){var i;super(),JE.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof cx?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof cx&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return XF(this,JE,"m",JF).call(this,this,e)}};JE=new WeakSet,JF=function t(e,n){return n!=null&&n(e)?e:e.cause?XF(this,JE,"m",t).call(this,e.cause,n):e};class vw extends nl{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Nie extends nl{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class xie extends nl{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class Tie extends nl{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class Rie extends nl{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class Pie extends nl{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Mv(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new Nie;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const lx=256;let Db=lx,$b;function e9(t=11){if(!$b||Db+t>lx*2){$b="",Db=0;for(let e=0;e<lx;e++)$b+=(256+Math.random()*256|0).toString(16).substring(1)}return $b.substring(Db,Db+++t)}function t9(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Jn(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:e9()};function y(b){return E=>{const _=E(b);for(const I in w)delete _[I];const C={...b,..._};return Object.assign(C,{extend:y(C)})}}return Object.assign(w,{extend:y(w)})}function pO({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=e9();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:rse(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function Oie(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>pO({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function e_(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=kie,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=pO({key:n,name:r,async request({method:g,params:w}){let y;const b=async(E=0)=>{const _=h[E]({...d,chain:c,retryCount:0,timeout:u});try{const C=await _.request({method:g,params:w});return f({method:g,params:w,response:C,transport:_,status:"success"}),C}catch(C){if(f({error:C,method:g,params:w,transport:_,status:"error"}),i(C)||E===h.length-1||(y??(y=h.slice(E+1).some(I=>{const{include:A,exclude:x}=I({chain:c}).config.methods||{};return A?A.includes(g):x?!x.includes(g):!0})),!y))throw C;return b(E+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};Die({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function kie(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Gp.code||t.code===pr.code||Ad.nodeMessage.test(t.message)||t.code===5e3))}function Die({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,E;try{await(r?r({transport:w}):w.request({method:"net_listening"})),E=1}catch{E=0}finally{b=Date.now()}return{latency:b-y,success:E}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const y=u.map(I=>I[w].latency),E=1-y.reduce((I,A)=>I+A,0)/y.length/f,_=u.map(I=>I[w].success),C=_.reduce((I,A)=>I+A,0)/_.length;return C===0?[0,w]:[l*E+c*C,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await QE(e),d()};d()}class $ie extends ue{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Yl(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new $ie;const E=ase(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return pO({key:s,methods:i,name:o,async request({method:_,params:C}){const I={method:_,params:C},{schedule:A}=Jj({id:b,wait:g,shouldSplitBatch(P){return P.length>p},fn:P=>E.request({body:P}),sort:(P,U)=>P.id-U.id}),x=async P=>n?A(P):[await E.request({body:P})],[{error:S,result:D}]=await x(I);if(u)return{error:S,result:D};if(S)throw new WP({body:I,error:S,url:b});return D},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function Mie(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(Lie))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(Uie))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const Lie=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Uie=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Bie(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!bo(r.address,{strict:!1})||e&&!wC(r.address,e))return!1}catch{return!1}return!0}async function jie(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=Mie(s);if(!u.address||!Bie({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=NF(s);return fO(t,{address:u.address,hash:h,signature:a,...l})}function Fie(t){return{call:e=>N0(t,e),createAccessList:e=>sF(t,e),createBlockFilter:()=>are(t),createContractEventFilter:e=>iF(t,e),createEventFilter:e=>oF(t,e),createPendingTransactionFilter:()=>aF(t),estimateContractGas:e=>lre(t,e),estimateGas:e=>dC(t,e),getBalance:e=>VP(t,e),getBlobBaseFee:()=>ure(t),getBlock:e=>Ba(t,e),getBlockNumber:e=>T0(t,e),getBlockTransactionCount:e=>mre(t,e),getBytecode:e=>u3(t,e),getChainId:()=>Ig(t),getCode:e=>u3(t,e),getContractEvents:e=>cF(t,e),getEip712Domain:e=>vre(t,e),getEnsAddress:e=>Vne(t,e),getEnsAvatar:e=>ire(t,e),getEnsName:e=>rF(t,e),getEnsResolver:e=>ore(t,e),getEnsText:e=>nF(t,e),getFeeHistory:e=>Cre(t,e),estimateFeesPerGas:e=>Tee(t,e),getFilterChanges:e=>bC(t,e),getFilterLogs:e=>Sre(t,e),getGasPrice:()=>HP(t),getLogs:e=>uO(t,e),getProof:e=>Lse(t,e),estimateMaxPriorityFeePerGas:e=>xee(t,e),getStorageAt:e=>Are(t,e),getTransaction:e=>vC(t,e),getTransactionConfirmations:e=>Ire(t,e),getTransactionCount:e=>GP(t,e),getTransactionReceipt:e=>JN(t,e),multicall:e=>uF(t,e),prepareTransactionRequest:e=>C0(t,e),readContract:e=>Za(t,e),sendRawTransaction:e=>YP(t,e),simulate:e=>ex(t,e),simulateBlocks:e=>ex(t,e),simulateCalls:e=>Sse(t,e),simulateContract:e=>zse(t,e),verifyMessage:e=>_ie(t,e),verifySiweMessage:e=>jie(t,e),verifyTypedData:e=>Cie(t,e),uninstallFilter:e=>_C(t,e),waitForTransactionReceipt:e=>DF(t,e),watchBlocks:e=>Ise(t,e),watchBlockNumber:e=>TF(t,e),watchContractEvent:e=>Aie(t,e),watchEvent:e=>Nse(t,e),watchPendingTransactions:e=>RF(t,e)}}function Wie(t){return{addChain:e=>XX(t,e),deployContract:e=>Zee(t,e),getAddresses:()=>xse(t),getCallsStatus:e=>kF(t,e),getCapabilities:e=>Rse(t,e),getChainId:()=>Ig(t),getPermissions:()=>Tse(t),prepareAuthorization:e=>$F(t,e),prepareTransactionRequest:e=>C0(t,e),requestAddresses:()=>Use(t),requestPermissions:e=>Bse(t,e),sendCalls:e=>Pse(t,e),sendRawTransaction:e=>YP(t,e),sendTransaction:e=>S0(t,e),showCallsStatus:e=>Ose(t,e),signAuthorization:e=>jse(t,e),signMessage:e=>MF(t,e),signTransaction:e=>Fse(t,e),signTypedData:e=>Wse(t,e),switchChain:e=>Hse(t,e),waitForCallsStatus:e=>kse(t,e),watchAsset:e=>Sie(t,e),writeContract:e=>ZF(t,e)}}async function R0(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new Pie({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new xie;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new Rie({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Jn(e.account??n.accounts[0]);if(o&&(o.address=Oc(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new Tie({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return t9({account:o,chain:a,name:"Connector Client",transport:l=>Oie(c)({...l,retryCount:0})})}async function ux(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function zie(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await R0(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return $i(o,dC,"estimateGas")({...s,account:i})}function n9(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(pee[t])}function hp(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function Hie(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return $i(o,uF,"multicall")({allowFailure:n,contracts:s,...i})}function r9(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return $i(s,Za,"readContract")(r)}async function qie(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>Hie(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof Bj)throw c;const l=()=>o.map(u=>r9(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function Vie(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await _3(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await _3(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=R4(Wa(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await $i(c,VP,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Oh(u,n9(a)),symbol:d.nativeCurrency.symbol,value:u}}async function _3(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await qie(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Oh(c??"0",n9(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function C3(t){return t.state.chainId}function dh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!dh(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!dh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Gie(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let Mb=[];function jo(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||dh(Mb,e)?Mb:(Mb=e,e)}let RS=[];function S3(t){const e=t.connectors;return dh(RS,e)?RS:(RS=e,e)}function Kie(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return $i(s,rF,"getEnsName")(r)}function dx(t,e={}){const n=Gie(t,e);return n==null?void 0:n.extend(Fie)}async function Yie(t,e={}){return(await R0(t,e)).extend(Wie)}async function Qie(t,e){const{account:n,chainId:r,...s}=e,i=n??hp(t).address,o=t.getClient({chainId:r});return $i(o,C0,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let PS=!1;async function hx(t,e={}){var l,u;if(PS)return[];PS=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),PS=!1,a}async function Zie(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await R0(t,{account:n??void 0,chainId:r,connector:s}),await $i(o,S0,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function Xie(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await R0(t,{account:n,connector:r}),$i(i,MF,"signMessage")({...s,...n?{account:n}:{}})}class xl extends nl{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class Jie extends nl{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function A3(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new Jie({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new vw;return t.setState(a=>({...a,chainId:r})),i}function s9(t,e){const{onChange:n}=e;return t.subscribe(()=>hp(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return dh(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function eoe(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function i9(t,e){const{onChange:n}=e;return t.subscribe(()=>jo(t),n,{equalityFn:dh})}function o9(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function toe(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=$i(l,RF,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function noe(t,e){const{onChange:n}=e;return t.subscribe(()=>dx(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function a9(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await $i(i,DF,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await $i(i,vC,"getTransaction")({hash:a.transactionHash}),d=await $i(i,N0,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?R4(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function c9(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await R0(t,{account:n??void 0,chainId:r,connector:s}),await $i(o,ZF,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function x5e(t){return t}SC.type="injected";function SC(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...roe[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:SC.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,y,b;const d=await this.getProvider();if(!d)throw new xl;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(_=>Oc(_)),h.length>0&&(h=await this.getAccounts())}catch(E){const _=E;if(_.code===pr.code)throw new pr(_);if(_.code===gu.code)throw _}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>Oc(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let E=await this.getChainId();if(l&&E!==l){const _=await this.switchChain({chainId:l}).catch(C=>{if(C.code===pr.code)throw C;return{id:E}});E=(_==null?void 0:_.id)??E}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:E}}catch(E){const _=E;throw _.code===pr.code?new pr(_):_.code===gu.code?new gu(_):_}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new xl;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await vF(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new xl;return(await l.request({method:"eth_accounts"})).map(d=>Oc(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new xl;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=Lv(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new xl}return!!(await ZE(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,y;const d=await this.getProvider();if(!d)throw new xl;const h=c.chains.find(b=>b.id===u);if(!h)throw new Ya(new vw);const f=new Promise(b=>{const E=_=>{"chainId"in _&&_.chainId===u&&(c.emitter.off("change",E),b())};c.emitter.on("change",E)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:He(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const E=b;if(E.code===4902||((g=(p=E==null?void 0:E.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:_,...C}=h.blockExplorers??{};let I;l!=null&&l.blockExplorerUrls?I=l.blockExplorerUrls:_&&(I=[_.url,...Object.values(C).map(S=>S.url)]);let A;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?A=l.rpcUrls:A=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const x={blockExplorerUrls:I,chainId:He(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:A};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[x]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new pr(new Error("User rejected switch after adding network."))}),f]),h}catch(_){throw new pr(_)}throw E.code===pr.code?new pr(E):new Ya(E)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Oc(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const roe={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:Lv(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return Lv(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:Lv(t,"isPhantom")}}};function Lv(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function soe(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function ioe(){const t=new Set;let e=[];const n=()=>soe(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const ooe=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},aoe=ooe;function coe(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const fx=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return fx(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return fx(r)(n)}}}},loe=(t,e)=>(n,r,s)=>{let i={storage:coe(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var E;return b((E=r())!=null?E:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return fx(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var E;const[_,C]=b;if(f=i.merge(C,(E=r())!=null?E:h),n(f,!0),_)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},uoe=loe,I3=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},OS=t=>t?I3(t):I3;var l9={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,b,E;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(E=1,b=new Array(y-1);E<y;E++)b[E-1]=arguments[E];w.fn.apply(w.context,b)}else{var _=w.length,C;for(E=0;E<_;E++)switch(w[E].once&&this.removeListener(l,w[E].fn,void 0,!0),y){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,u);break;case 3:w[E].fn.call(w[E].context,u,d);break;case 4:w[E].fn.call(w[E].context,u,d,h);break;default:if(!b)for(C=1,b=new Array(y-1);C<y;C++)b[C-1]=arguments[C];w[E].fn.apply(w[E].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(l9);var doe=l9.exports;const hoe=Nh(doe);class foe{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new hoe})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function poe(t){return new foe(t)}function goe(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function N3(t,e){return t.slice(0,e).join(".")||"."}function x3(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function moe(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=x3(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=x3(s,c);if(u!==0)return r?e.call(this,a,c,N3(i,u)):`[ref=${N3(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function yoe(t,e,n,r){return JSON.stringify(t,moe((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function woe(t){const{deserialize:e=goe,key:n="wagmi",serialize:r=yoe,storage:s=u9}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const u9={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function boe(){const t=typeof window<"u"&&window.localStorage?window.localStorage:u9;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const px=256;let Lb=px,Ub;function voe(t=11){if(!Ub||Lb+t>px*2){Ub="",Lb=0;for(let e=0;e<px;e++)Ub+=(256+Math.random()*256|0).toString(16).substring(1)}return Ub.substring(Lb,Lb+++t)}function Eoe(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=woe({storage:boe()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?ioe():void 0,a=OS(()=>i.chains),c=OS(()=>{const C=[],I=new Set;for(const A of i.connectors??[]){const x=l(A);if(C.push(x),!s&&x.rdns){const S=typeof x.rdns=="string"?[x.rdns]:x.rdns;for(const D of S)I.add(D)}}if(!s&&o){const A=o.getProviders();for(const x of A)I.has(x.info.rdns)||C.push(l(u(x)))}return C});function l(C){var x;const I=poe(voe()),A={...C({emitter:I,chains:a.getState(),storage:n,transports:i.transports}),emitter:I,uid:I.uid};return I.on("connect",E),(x=A.setup)==null||x.call(A),A}function u(C){const{info:I}=C,A=C.provider;return SC({target:{...I,id:I.rdns,provider:A}})}const d=new Map;function h(C={}){const I=C.chainId??w.getState().chainId,A=a.getState().find(S=>S.id===I);if(C.chainId&&!A)throw new vw;{const S=d.get(w.getState().chainId);if(S&&!A)return S;if(!A)throw new vw}{const S=d.get(I);if(S)return S}let x;if(i.client)x=i.client({chain:A});else{const S=A.id,D=a.getState().map(q=>q.id),P={},U=Object.entries(i);for(const[q,j]of U)if(!(q==="chains"||q==="client"||q==="connectors"||q==="transports"))if(typeof j=="object")if(S in j)P[q]=j[S];else{if(D.some(N=>N in j))continue;P[q]=j}else P[q]=j;x=t9({...P,chain:A,batch:P.batch??{multicall:!0},transport:q=>i.transports[S]({...q,connectors:c})})}return d.set(I,x),x}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";$v.startsWith(g)?p=Number.parseInt($v.replace(g,"")):p=Number.parseInt($v.split(".")[0]??"0");const w=OS(aoe(n?uoe(f,{migrate(C,I){if(I===p)return C;const A=f(),x=y(C,A.chainId);return{...A,chainId:x}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([I,A])=>{const{id:x,name:S,type:D,uid:P}=A.connector;return[I,{...A,connector:{id:x,name:S,type:D,uid:P}}]})},chainId:C.chainId,current:C.current}},merge(C,I){typeof C=="object"&&C&&"status"in C&&delete C.status;const A=y(C,I.chainId);return{...I,...C,chainId:A}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(C,I){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(A=>A.id===C.chainId)?C.chainId:I}r&&w.subscribe(({connections:C,current:I})=>{var A;return I?(A=C.get(I))==null?void 0:A.chainId:void 0},C=>{if(a.getState().some(A=>A.id===C))return w.setState(A=>({...A,chainId:C??A.chainId}))}),o==null||o.subscribe(C=>{const I=new Set,A=new Set;for(const S of c.getState())if(I.add(S.id),S.rdns){const D=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const P of D)A.add(P)}const x=[];for(const S of C){if(A.has(S.info.rdns))continue;const D=l(u(S));I.has(D.id)||x.push(D)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...x],!0)});function b(C){w.setState(I=>{const A=I.connections.get(C.uid);return A?{...I,connections:new Map(I.connections).set(C.uid,{accounts:C.accounts??A.accounts,chainId:C.chainId??A.chainId,connector:A.connector})}:I})}function E(C){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(I=>{const A=c.getState().find(x=>x.uid===C.uid);return A?(A.emitter.listenerCount("connect")&&A.emitter.off("connect",b),A.emitter.listenerCount("change")||A.emitter.on("change",b),A.emitter.listenerCount("disconnect")||A.emitter.on("disconnect",_),{...I,connections:new Map(I.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:A}),current:C.uid,status:"connected"}):I})}function _(C){w.setState(I=>{const A=I.connections.get(C.uid);if(A){const S=A.connector;S.emitter.listenerCount("change")&&A.connector.emitter.off("change",b),S.emitter.listenerCount("disconnect")&&A.connector.emitter.off("disconnect",_),S.emitter.listenerCount("connect")||A.connector.emitter.on("connect",E)}if(I.connections.delete(C.uid),I.connections.size===0)return{...I,connections:new Map,current:null,status:"disconnected"};const x=I.connections.values().next().value;return{...I,connections:new Map(I.connections),current:x.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(C){let I;typeof C=="function"?I=C(w.getState()):I=C;const A=f();typeof I!="object"&&(I=A),Object.keys(A).some(S=>!(S in I))&&(I=A),w.setState(I,!0)},subscribe(C,I,A){return w.subscribe(C,I,A?{...A,fireImmediately:A.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const I=typeof C=="function"?C(a.getState()):C;if(I.length!==0)return a.setState(I,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:b,connect:E,disconnect:_}}}}function _oe(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?hx(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function Coe(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=_oe(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=O.useRef(!0);return O.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const d9=O.createContext(void 0);function Soe(t){const{children:e,config:n}=t,r={value:n};return O.createElement(Coe,t,O.createElement(d9.Provider,r,e))}const Aoe="2.15.6",Ioe=()=>`wagmi@${Aoe}`;let Noe=class extends nl{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return Ioe()}};class xoe extends Noe{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Co(t={}){const e=t.config??O.useContext(d9);if(!e)throw new xoe;return e}var h9={exports:{}},f9={},p9={exports:{}},g9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp=O;function Toe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Roe=typeof Object.is=="function"?Object.is:Toe,Poe=Xp.useState,Ooe=Xp.useEffect,koe=Xp.useLayoutEffect,Doe=Xp.useDebugValue;function $oe(t,e){var n=e(),r=Poe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return koe(function(){s.value=n,s.getSnapshot=e,kS(s)&&i({inst:s})},[t,n,e]),Ooe(function(){return kS(s)&&i({inst:s}),t(function(){kS(s)&&i({inst:s})})},[t]),Doe(n),n}function kS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Roe(t,n)}catch{return!0}}function Moe(t,e){return e()}var Loe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Moe:$oe;g9.useSyncExternalStore=Xp.useSyncExternalStore!==void 0?Xp.useSyncExternalStore:Loe;p9.exports=g9;var m9=p9.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC=O,Uoe=m9;function Boe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var joe=typeof Object.is=="function"?Object.is:Boe,Foe=Uoe.useSyncExternalStore,Woe=AC.useRef,zoe=AC.useEffect,Hoe=AC.useMemo,qoe=AC.useDebugValue;f9.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Woe(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Hoe(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,joe(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=Foe(t,i[0],i[1]);return zoe(function(){o.hasValue=!0,o.value=a},[a]),qoe(a),a};h9.exports=f9;var y9=h9.exports;const DS=t=>typeof t=="object"&&!Array.isArray(t);function Voe(t,e,n=e,r=dh){const s=O.useRef([]),i=y9.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(DS(o)&&DS(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return O.useMemo(()=>{if(DS(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function P0(t={}){const e=Co(t);return Voe(n=>s9(e,{onChange:n}),()=>hp(e))}var Rg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hh=typeof window>"u"||"Deno"in globalThis;function Is(){}function Goe(t,e){return typeof t=="function"?t(e):t}function gx(t){return typeof t=="number"&&t>=0&&t!==1/0}function w9(t,e){return Math.max(t+(e||0)-Date.now(),0)}function mu(t,e){return typeof t=="function"?t(e):t}function ao(t,e){return typeof t=="function"?t(e):t}function T3(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==gO(o,e.options))return!1}else if(!Ew(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function R3(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(fh(e.options.mutationKey)!==fh(i))return!1}else if(!Ew(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function gO(t,e){return((e==null?void 0:e.queryKeyHashFn)||fh)(t)}function fh(t){return JSON.stringify(t,(e,n)=>mx(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ew(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Ew(t[n],e[n])):!1}function mO(t,e){if(t===e)return t;const n=P3(t)&&P3(e);if(n||mx(t)&&mx(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=mO(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function t_(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function P3(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function mx(t){if(!O3(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!O3(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function O3(t){return Object.prototype.toString.call(t)==="[object Object]"}function Koe(t){return new Promise(e=>{setTimeout(e,t)})}function yx(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?mO(t,e):e}function Yoe(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Qoe(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var yO=Symbol();function b9(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===yO?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function v9(t,e){return typeof t=="function"?t(...e):!!t}var kd,Ll,bp,EU,Zoe=(EU=class extends Rg{constructor(){super();Je(this,kd);Je(this,Ll);Je(this,bp);xe(this,bp,e=>{if(!hh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){W(this,Ll)||this.setEventListener(W(this,bp))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,Ll))==null||e.call(this),xe(this,Ll,void 0))}setEventListener(e){var n;xe(this,bp,e),(n=W(this,Ll))==null||n.call(this),xe(this,Ll,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){W(this,kd)!==e&&(xe(this,kd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof W(this,kd)=="boolean"?W(this,kd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},kd=new WeakMap,Ll=new WeakMap,bp=new WeakMap,EU),wO=new Zoe,vp,Ul,Ep,_U,Xoe=(_U=class extends Rg{constructor(){super();Je(this,vp,!0);Je(this,Ul);Je(this,Ep);xe(this,Ep,e=>{if(!hh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){W(this,Ul)||this.setEventListener(W(this,Ep))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,Ul))==null||e.call(this),xe(this,Ul,void 0))}setEventListener(e){var n;xe(this,Ep,e),(n=W(this,Ul))==null||n.call(this),xe(this,Ul,e(this.setOnline.bind(this)))}setOnline(e){W(this,vp)!==e&&(xe(this,vp,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return W(this,vp)}},vp=new WeakMap,Ul=new WeakMap,Ep=new WeakMap,_U),n_=new Xoe;function wx(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Joe(t){return Math.min(1e3*2**t,3e4)}function E9(t){return(t??"online")==="online"?n_.isOnline():!0}var _9=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function $S(t){return t instanceof _9}function C9(t){let e=!1,n=0,r=!1,s;const i=wx(),o=g=>{var w;r||(h(new _9(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>wO.isFocused()&&(t.networkMode==="always"||n_.isOnline())&&t.canRun(),u=()=>E9(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=y=>{(r||l())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var I;if(r)return;const b=t.retry??(hh?0:3),E=t.retryDelay??Joe,_=typeof E=="function"?E(n,y):E,C=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!C){h(y);return}n++,(I=t.onFail)==null||I.call(t,n,y),Koe(_).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var eae=t=>setTimeout(t,0);function tae(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=eae;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var yr=tae(),Dd,CU,S9=(CU=class{constructor(){Je(this,Dd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),gx(this.gcTime)&&xe(this,Dd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(hh?1/0:5*60*1e3))}clearGcTimeout(){W(this,Dd)&&(clearTimeout(W(this,Dd)),xe(this,Dd,void 0))}},Dd=new WeakMap,CU),_p,$d,so,Md,ds,n0,Ld,Fo,bc,SU,nae=(SU=class extends S9{constructor(e){super();Je(this,Fo);Je(this,_p);Je(this,$d);Je(this,so);Je(this,Md);Je(this,ds);Je(this,n0);Je(this,Ld);xe(this,Ld,!1),xe(this,n0,e.defaultOptions),this.setOptions(e.options),this.observers=[],xe(this,Md,e.client),xe(this,so,W(this,Md).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,xe(this,_p,rae(this.options)),this.state=e.state??W(this,_p),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=W(this,ds))==null?void 0:e.promise}setOptions(e){this.options={...W(this,n0),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&W(this,so).remove(this)}setData(e,n){const r=yx(this.state.data,e,this.options);return _t(this,Fo,bc).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){_t(this,Fo,bc).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=W(this,ds))==null?void 0:r.promise;return(s=W(this,ds))==null||s.cancel(e),n?n.then(Is).catch(Is):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(W(this,_p))}isActive(){return this.observers.some(e=>ao(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===yO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>mu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!w9(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=W(this,ds))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=W(this,ds))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),W(this,so).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(W(this,ds)&&(W(this,Ld)?W(this,ds).cancel({revert:!0}):W(this,ds).cancelRetry()),this.scheduleGc()),W(this,so).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||_t(this,Fo,bc).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(W(this,ds))return W(this,ds).continueRetry(),W(this,ds).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(xe(this,Ld,!0),r.signal)})},i=()=>{const h=b9(this.options,n),p=(()=>{const g={client:W(this,Md),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return xe(this,Ld,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:W(this,Md),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),xe(this,$d,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&_t(this,Fo,bc).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;$S(h)&&h.silent||_t(this,Fo,bc).call(this,{type:"error",error:h}),$S(h)||((p=(f=W(this,so).config).onError)==null||p.call(f,h,this),(w=(g=W(this,so).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return xe(this,ds,C9({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=W(this,so).config).onSuccess)==null||p.call(f,h,this),(w=(g=W(this,so).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{_t(this,Fo,bc).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{_t(this,Fo,bc).call(this,{type:"pause"})},onContinue:()=>{_t(this,Fo,bc).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),W(this,ds).start()}},_p=new WeakMap,$d=new WeakMap,so=new WeakMap,Md=new WeakMap,ds=new WeakMap,n0=new WeakMap,Ld=new WeakMap,Fo=new WeakSet,bc=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...A9(r.data,this.options),fetchMeta:e.meta??null};case"success":return xe(this,$d,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return $S(s)&&s.revert&&W(this,$d)?{...W(this,$d),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),yr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),W(this,so).notify({query:this,type:"updated",action:e})})},SU);function A9(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:E9(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function rae(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ia,AU,sae=(AU=class extends Rg{constructor(e={}){super();Je(this,Ia);this.config=e,xe(this,Ia,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??gO(s,n);let o=this.get(i);return o||(o=new nae({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){W(this,Ia).has(e.queryHash)||(W(this,Ia).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=W(this,Ia).get(e.queryHash);n&&(e.destroy(),n===e&&W(this,Ia).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){yr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return W(this,Ia).get(e)}getAll(){return[...W(this,Ia).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>T3(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>T3(e,r)):n}notify(e){yr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){yr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){yr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ia=new WeakMap,AU),Na,Cs,Ud,xa,Cl,IU,iae=(IU=class extends S9{constructor(e){super();Je(this,xa);Je(this,Na);Je(this,Cs);Je(this,Ud);this.mutationId=e.mutationId,xe(this,Cs,e.mutationCache),xe(this,Na,[]),this.state=e.state||I9(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){W(this,Na).includes(e)||(W(this,Na).push(e),this.clearGcTimeout(),W(this,Cs).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){xe(this,Na,W(this,Na).filter(n=>n!==e)),this.scheduleGc(),W(this,Cs).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){W(this,Na).length||(this.state.status==="pending"?this.scheduleGc():W(this,Cs).remove(this))}continue(){var e;return((e=W(this,Ud))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,y,b,E,_,C,I,A,x;const n=()=>{_t(this,xa,Cl).call(this,{type:"continue"})};xe(this,Ud,C9({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,D)=>{_t(this,xa,Cl).call(this,{type:"failed",failureCount:S,error:D})},onPause:()=>{_t(this,xa,Cl).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>W(this,Cs).canRun(this)}));const r=this.state.status==="pending",s=!W(this,Ud).canStart();try{if(r)n();else{_t(this,xa,Cl).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=W(this,Cs).config).onMutate)==null?void 0:o.call(i,e,this));const D=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));D!==this.state.context&&_t(this,xa,Cl).call(this,{type:"pending",context:D,variables:e,isPaused:s})}const S=await W(this,Ud).start();return await((u=(l=W(this,Cs).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=W(this,Cs).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,S,null,e,this.state.context)),_t(this,xa,Cl).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(y=W(this,Cs).config).onError)==null?void 0:b.call(y,S,e,this.state.context,this)),await((_=(E=this.options).onError)==null?void 0:_.call(E,S,e,this.state.context)),await((I=(C=W(this,Cs).config).onSettled)==null?void 0:I.call(C,void 0,S,this.state.variables,this.state.context,this)),await((x=(A=this.options).onSettled)==null?void 0:x.call(A,void 0,S,e,this.state.context)),S}finally{_t(this,xa,Cl).call(this,{type:"error",error:S})}}finally{W(this,Cs).runNext(this)}}},Na=new WeakMap,Cs=new WeakMap,Ud=new WeakMap,xa=new WeakSet,Cl=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),yr.batch(()=>{W(this,Na).forEach(r=>{r.onMutationUpdate(e)}),W(this,Cs).notify({mutation:this,type:"updated",action:e})})},IU);function I9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ac,Wo,r0,NU,oae=(NU=class extends Rg{constructor(e={}){super();Je(this,Ac);Je(this,Wo);Je(this,r0);this.config=e,xe(this,Ac,new Set),xe(this,Wo,new Map),xe(this,r0,0)}build(e,n,r){const s=new iae({mutationCache:this,mutationId:++ub(this,r0)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){W(this,Ac).add(e);const n=Bb(e);if(typeof n=="string"){const r=W(this,Wo).get(n);r?r.push(e):W(this,Wo).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(W(this,Ac).delete(e)){const n=Bb(e);if(typeof n=="string"){const r=W(this,Wo).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&W(this,Wo).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Bb(e);if(typeof n=="string"){const r=W(this,Wo).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Bb(e);if(typeof n=="string"){const s=(r=W(this,Wo).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){yr.batch(()=>{W(this,Ac).forEach(e=>{this.notify({type:"removed",mutation:e})}),W(this,Ac).clear(),W(this,Wo).clear()})}getAll(){return Array.from(W(this,Ac))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>R3(n,r))}findAll(e={}){return this.getAll().filter(n=>R3(e,n))}notify(e){yr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return yr.batch(()=>Promise.all(e.map(n=>n.continue().catch(Is))))}},Ac=new WeakMap,Wo=new WeakMap,r0=new WeakMap,NU);function Bb(t){var e;return(e=t.options.scope)==null?void 0:e.id}function k3(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=b9(e.options,e.fetchOptions),b=async(E,_,C)=>{if(g)return Promise.reject();if(_==null&&E.pages.length)return Promise.resolve(E);const A=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:_,direction:C?"backward":"forward",meta:e.options.meta};return w(P),P})(),x=await y(A),{maxPages:S}=e.options,D=C?Qoe:Yoe;return{pages:D(E.pages,x,S),pageParams:D(E.pageParams,_,S)}};if(s&&i.length){const E=s==="backward",_=E?aae:D3,C={pages:i,pageParams:o},I=_(r,C);a=await b(C,I,E)}else{const E=t??i.length;do{const _=c===0?o[0]??r.initialPageParam:D3(r,a);if(c>0&&_==null)break;a=await b(a,_),c++}while(c<E)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function D3(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function aae(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Yn,Bl,jl,Cp,Sp,Fl,Ap,Ip,xU,cae=(xU=class{constructor(t={}){Je(this,Yn);Je(this,Bl);Je(this,jl);Je(this,Cp);Je(this,Sp);Je(this,Fl);Je(this,Ap);Je(this,Ip);xe(this,Yn,t.queryCache||new sae),xe(this,Bl,t.mutationCache||new oae),xe(this,jl,t.defaultOptions||{}),xe(this,Cp,new Map),xe(this,Sp,new Map),xe(this,Fl,0)}mount(){ub(this,Fl)._++,W(this,Fl)===1&&(xe(this,Ap,wO.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,Yn).onFocus())})),xe(this,Ip,n_.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,Yn).onOnline())})))}unmount(){var t,e;ub(this,Fl)._--,W(this,Fl)===0&&((t=W(this,Ap))==null||t.call(this),xe(this,Ap,void 0),(e=W(this,Ip))==null||e.call(this),xe(this,Ip,void 0))}isFetching(t){return W(this,Yn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return W(this,Bl).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=W(this,Yn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=W(this,Yn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(mu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return W(this,Yn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=W(this,Yn).get(r.queryHash),i=s==null?void 0:s.state.data,o=Goe(e,i);if(o!==void 0)return W(this,Yn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return yr.batch(()=>W(this,Yn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=W(this,Yn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=W(this,Yn);yr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=W(this,Yn);return yr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=yr.batch(()=>W(this,Yn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Is).catch(Is)}invalidateQueries(t,e={}){return yr.batch(()=>(W(this,Yn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=yr.batch(()=>W(this,Yn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Is)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Is)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=W(this,Yn).build(this,e);return n.isStaleByTime(mu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Is).catch(Is)}fetchInfiniteQuery(t){return t.behavior=k3(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Is).catch(Is)}ensureInfiniteQueryData(t){return t.behavior=k3(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return n_.isOnline()?W(this,Bl).resumePausedMutations():Promise.resolve()}getQueryCache(){return W(this,Yn)}getMutationCache(){return W(this,Bl)}getDefaultOptions(){return W(this,jl)}setDefaultOptions(t){xe(this,jl,t)}setQueryDefaults(t,e){W(this,Cp).set(fh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...W(this,Cp).values()],n={};return e.forEach(r=>{Ew(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){W(this,Sp).set(fh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...W(this,Sp).values()],n={};return e.forEach(r=>{Ew(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...W(this,jl).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=gO(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===yO&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...W(this,jl).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){W(this,Yn).clear(),W(this,Bl).clear()}},Yn=new WeakMap,Bl=new WeakMap,jl=new WeakMap,Cp=new WeakMap,Sp=new WeakMap,Fl=new WeakMap,Ap=new WeakMap,Ip=new WeakMap,xU),Zs,Dt,s0,Ss,Bd,Np,Wl,zl,i0,xp,Tp,jd,Fd,Hl,Rp,tn,$m,bx,vx,Ex,_x,Cx,Sx,Ax,N9,TU,lae=(TU=class extends Rg{constructor(e,n){super();Je(this,tn);Je(this,Zs);Je(this,Dt);Je(this,s0);Je(this,Ss);Je(this,Bd);Je(this,Np);Je(this,Wl);Je(this,zl);Je(this,i0);Je(this,xp);Je(this,Tp);Je(this,jd);Je(this,Fd);Je(this,Hl);Je(this,Rp,new Set);this.options=n,xe(this,Zs,e),xe(this,zl,null),xe(this,Wl,wx()),this.options.experimental_prefetchInRender||W(this,Wl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(W(this,Dt).addObserver(this),$3(W(this,Dt),this.options)?_t(this,tn,$m).call(this):this.updateResult(),_t(this,tn,_x).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ix(W(this,Dt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ix(W(this,Dt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,_t(this,tn,Cx).call(this),_t(this,tn,Sx).call(this),W(this,Dt).removeObserver(this)}setOptions(e){const n=this.options,r=W(this,Dt);if(this.options=W(this,Zs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ao(this.options.enabled,W(this,Dt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");_t(this,tn,Ax).call(this),W(this,Dt).setOptions(this.options),n._defaulted&&!t_(this.options,n)&&W(this,Zs).getQueryCache().notify({type:"observerOptionsUpdated",query:W(this,Dt),observer:this});const s=this.hasListeners();s&&M3(W(this,Dt),r,this.options,n)&&_t(this,tn,$m).call(this),this.updateResult(),s&&(W(this,Dt)!==r||ao(this.options.enabled,W(this,Dt))!==ao(n.enabled,W(this,Dt))||mu(this.options.staleTime,W(this,Dt))!==mu(n.staleTime,W(this,Dt)))&&_t(this,tn,bx).call(this);const i=_t(this,tn,vx).call(this);s&&(W(this,Dt)!==r||ao(this.options.enabled,W(this,Dt))!==ao(n.enabled,W(this,Dt))||i!==W(this,Hl))&&_t(this,tn,Ex).call(this,i)}getOptimisticResult(e){const n=W(this,Zs).getQueryCache().build(W(this,Zs),e),r=this.createResult(n,e);return dae(this,r)&&(xe(this,Ss,r),xe(this,Np,this.options),xe(this,Bd,W(this,Dt).state)),r}getCurrentResult(){return W(this,Ss)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){W(this,Rp).add(e)}getCurrentQuery(){return W(this,Dt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=W(this,Zs).defaultQueryOptions(e),r=W(this,Zs).getQueryCache().build(W(this,Zs),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return _t(this,tn,$m).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),W(this,Ss)))}createResult(e,n){var S;const r=W(this,Dt),s=this.options,i=W(this,Ss),o=W(this,Bd),a=W(this,Np),l=e!==r?e.state:W(this,s0),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const D=this.hasListeners(),P=!D&&$3(e,n),U=D&&M3(e,r,n,s);(P||U)&&(d={...d,...A9(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let D;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(D=i.data,y=!0):D=typeof n.placeholderData=="function"?n.placeholderData((S=W(this,Tp))==null?void 0:S.state.data,W(this,Tp)):n.placeholderData,D!==void 0&&(w="success",f=yx(i==null?void 0:i.data,D,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===W(this,i0))f=W(this,xp);else try{xe(this,i0,n.select),f=n.select(f),f=yx(i==null?void 0:i.data,f,n),xe(this,xp,f),xe(this,zl,null)}catch(D){xe(this,zl,D)}W(this,zl)&&(p=W(this,zl),f=W(this,xp),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",E=w==="pending",_=w==="error",C=E&&b,I=f!==void 0,x={status:w,fetchStatus:d.fetchStatus,isPending:E,isSuccess:w==="success",isError:_,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!E,isLoadingError:_&&!I,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&I,isStale:bO(e,n),refetch:this.refetch,promise:W(this,Wl),isEnabled:ao(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const D=q=>{x.status==="error"?q.reject(x.error):x.data!==void 0&&q.resolve(x.data)},P=()=>{const q=xe(this,Wl,x.promise=wx());D(q)},U=W(this,Wl);switch(U.status){case"pending":e.queryHash===r.queryHash&&D(U);break;case"fulfilled":(x.status==="error"||x.data!==U.value)&&P();break;case"rejected":(x.status!=="error"||x.error!==U.reason)&&P();break}}return x}updateResult(){const e=W(this,Ss),n=this.createResult(W(this,Dt),this.options);if(xe(this,Bd,W(this,Dt).state),xe(this,Np,this.options),W(this,Bd).data!==void 0&&xe(this,Tp,W(this,Dt)),t_(n,e))return;xe(this,Ss,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!W(this,Rp).size)return!0;const o=new Set(i??W(this,Rp));return this.options.throwOnError&&o.add("error"),Object.keys(W(this,Ss)).some(a=>{const c=a;return W(this,Ss)[c]!==e[c]&&o.has(c)})};_t(this,tn,N9).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&_t(this,tn,_x).call(this)}},Zs=new WeakMap,Dt=new WeakMap,s0=new WeakMap,Ss=new WeakMap,Bd=new WeakMap,Np=new WeakMap,Wl=new WeakMap,zl=new WeakMap,i0=new WeakMap,xp=new WeakMap,Tp=new WeakMap,jd=new WeakMap,Fd=new WeakMap,Hl=new WeakMap,Rp=new WeakMap,tn=new WeakSet,$m=function(e){_t(this,tn,Ax).call(this);let n=W(this,Dt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Is)),n},bx=function(){_t(this,tn,Cx).call(this);const e=mu(this.options.staleTime,W(this,Dt));if(hh||W(this,Ss).isStale||!gx(e))return;const r=w9(W(this,Ss).dataUpdatedAt,e)+1;xe(this,jd,setTimeout(()=>{W(this,Ss).isStale||this.updateResult()},r))},vx=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(W(this,Dt)):this.options.refetchInterval)??!1},Ex=function(e){_t(this,tn,Sx).call(this),xe(this,Hl,e),!(hh||ao(this.options.enabled,W(this,Dt))===!1||!gx(W(this,Hl))||W(this,Hl)===0)&&xe(this,Fd,setInterval(()=>{(this.options.refetchIntervalInBackground||wO.isFocused())&&_t(this,tn,$m).call(this)},W(this,Hl)))},_x=function(){_t(this,tn,bx).call(this),_t(this,tn,Ex).call(this,_t(this,tn,vx).call(this))},Cx=function(){W(this,jd)&&(clearTimeout(W(this,jd)),xe(this,jd,void 0))},Sx=function(){W(this,Fd)&&(clearInterval(W(this,Fd)),xe(this,Fd,void 0))},Ax=function(){const e=W(this,Zs).getQueryCache().build(W(this,Zs),this.options);if(e===W(this,Dt))return;const n=W(this,Dt);xe(this,Dt,e),xe(this,s0,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},N9=function(e){yr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(W(this,Ss))}),W(this,Zs).getQueryCache().notify({query:W(this,Dt),type:"observerResultsUpdated"})})},TU);function uae(t,e){return ao(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function $3(t,e){return uae(t,e)||t.state.data!==void 0&&Ix(t,e,e.refetchOnMount)}function Ix(t,e,n){if(ao(e.enabled,t)!==!1&&mu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&bO(t,e)}return!1}function M3(t,e,n,r){return(t!==e||ao(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&bO(t,n)}function bO(t,e){return ao(e.enabled,t)!==!1&&t.isStaleByTime(mu(e.staleTime,t))}function dae(t,e){return!t_(t.getCurrentResult(),e)}var ql,Vl,Xs,Ic,Fc,Uv,Nx,RU,hae=(RU=class extends Rg{constructor(n,r){super();Je(this,Fc);Je(this,ql);Je(this,Vl);Je(this,Xs);Je(this,Ic);xe(this,ql,n),this.setOptions(r),this.bindMethods(),_t(this,Fc,Uv).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=W(this,ql).defaultMutationOptions(n),t_(this.options,r)||W(this,ql).getMutationCache().notify({type:"observerOptionsUpdated",mutation:W(this,Xs),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&fh(r.mutationKey)!==fh(this.options.mutationKey)?this.reset():((s=W(this,Xs))==null?void 0:s.state.status)==="pending"&&W(this,Xs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=W(this,Xs))==null||n.removeObserver(this)}onMutationUpdate(n){_t(this,Fc,Uv).call(this),_t(this,Fc,Nx).call(this,n)}getCurrentResult(){return W(this,Vl)}reset(){var n;(n=W(this,Xs))==null||n.removeObserver(this),xe(this,Xs,void 0),_t(this,Fc,Uv).call(this),_t(this,Fc,Nx).call(this)}mutate(n,r){var s;return xe(this,Ic,r),(s=W(this,Xs))==null||s.removeObserver(this),xe(this,Xs,W(this,ql).getMutationCache().build(W(this,ql),this.options)),W(this,Xs).addObserver(this),W(this,Xs).execute(n)}},ql=new WeakMap,Vl=new WeakMap,Xs=new WeakMap,Ic=new WeakMap,Fc=new WeakSet,Uv=function(){var r;const n=((r=W(this,Xs))==null?void 0:r.state)??I9();xe(this,Vl,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Nx=function(n){yr.batch(()=>{var r,s,i,o,a,c,l,u;if(W(this,Ic)&&this.hasListeners()){const d=W(this,Vl).variables,h=W(this,Vl).context;(n==null?void 0:n.type)==="success"?((s=(r=W(this,Ic)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=W(this,Ic)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=W(this,Ic)).onError)==null||c.call(a,n.error,d,h),(u=(l=W(this,Ic)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(W(this,Vl))})})},RU);function fae(t,e){return mO(t,e)}function pae(t){return JSON.stringify(t,(e,n)=>gae(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function gae(t){if(!L3(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!L3(n)||!n.hasOwnProperty("isPrototypeOf"))}function L3(t){return Object.prototype.toString.call(t)==="[object Object]"}function IC(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:E,enabled:_,notifyOnChangeProps:C,placeholderData:I,refetchInterval:A,refetchIntervalInBackground:x,refetchOnMount:S,refetchOnReconnect:D,refetchOnWindowFocus:P,retryOnMount:U,select:q,staleTime:j,suspense:T,throwOnError:N,config:$,connector:R,query:k,...B}=t;return B}function mae(t){return{mutationFn(e){return Mv(t,e)},mutationKey:["connect"]}}function yae(t){return{mutationFn(e){return ux(t,e)},mutationKey:["disconnect"]}}function wae(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return Kie(t,{...i,address:r})},queryKey:bae(e)}}function bae(t={}){return["ensName",IC(t)]}function vae(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Yie(t,{...o,connector:r})},queryKey:Eae(e)}}function Eae(t={}){const{connector:e,...n}=t;return["walletClient",{...IC(n),connectorUid:e==null?void 0:e.uid}]}function _ae(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return r9(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:Cae(e)}}function Cae(t={}){const{abi:e,...n}=t;return["readContract",IC(n)]}function Sae(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return a9(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:Aae(e)}}function Aae(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",IC(n)]}function Iae(t){return{mutationFn(e){return c9(t,e)},mutationKey:["writeContract"]}}var x9=O.createContext(void 0),vO=t=>{const e=O.useContext(x9);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Nae=({client:t,children:e})=>(O.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(x9.Provider,{value:t,children:e})),T9=O.createContext(!1),xae=()=>O.useContext(T9);T9.Provider;function Tae(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Rae=O.createContext(Tae()),Pae=()=>O.useContext(Rae),Oae=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},kae=t=>{O.useEffect(()=>{t.clearReset()},[t])},Dae=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||v9(n,[t.error,r])),$ae=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Mae=(t,e)=>t.isLoading&&t.isFetching&&!e,Lae=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,U3=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Uae(t,e,n){var d,h,f,p,g;const r=xae(),s=Pae(),i=vO(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",$ae(o),Oae(o,s),kae(s);const a=!i.getQueryCache().get(o.queryHash),[c]=O.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(O.useSyncExternalStore(O.useCallback(w=>{const y=u?c.subscribe(yr.batchCalls(w)):Is;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),O.useEffect(()=>{c.setOptions(o)},[o,c]),Lae(o,l))throw U3(o,c,s);if(Dae({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!hh&&Mae(l,r)){const w=a?U3(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(Is).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function Bae(t,e){return Uae(t,lae)}function EO(t,e){const n=vO(),[r]=O.useState(()=>new hae(n,t));O.useEffect(()=>{r.setOptions(t)},[r,t]);const s=O.useSyncExternalStore(O.useCallback(o=>r.subscribe(yr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=O.useCallback((o,a)=>{r.mutate(o,a).catch(Is)},[r]);if(s.error&&v9(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function NC(t){const e=Bae({...t,queryKeyHashFn:pae});return e.queryKey=t.queryKey,e}function xC(t={}){const e=Co(t);return O.useSyncExternalStore(n=>eoe(e,{onChange:n}),()=>C3(e),()=>C3(e))}function jae(t={}){const e=Co(t);return O.useSyncExternalStore(n=>o9(e,{onChange:n}),()=>S3(e),()=>S3(e))}function R9(t={}){const{mutation:e}=t,n=Co(t),r=mae(n),{mutate:s,mutateAsync:i,...o}=EO({...e,...r});return O.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:jae({config:n})}}function Fae(t={}){const e=Co(t);return O.useSyncExternalStore(n=>i9(e,{onChange:n}),()=>jo(e),()=>jo(e))}function P9(t={}){const{mutation:e}=t,n=Co(t),r=yae(n),{mutate:s,mutateAsync:i,...o}=EO({...e,...r});return{...o,connectors:Fae({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function O9(t={}){const{address:e,query:n={}}=t,r=Co(t),s=xC({config:r}),i=wae(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return NC({...n,...i,enabled:o})}function Wae(t={}){const e=Co(t);return y9.useSyncExternalStoreWithSelector(n=>noe(e,{onChange:n}),()=>dx(e,t),()=>dx(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function B3(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=Co(t),a=xC({config:o}),c=_ae(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return NC({...s,...c,enabled:l,structuralSharing:s.structuralSharing??fae})}function k9(t={}){const{query:e={},...n}=t,r=Co(n),s=vO(),{address:i,connector:o,status:a}=P0({config:r}),c=xC({config:r}),l=t.connector??o,{queryKey:u,...d}=vae(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=O.useRef(i);return O.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),NC({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function MS(t={}){const{hash:e,query:n={}}=t,r=Co(t),s=xC({config:r}),i=Sae(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return NC({...n,...i,enabled:o})}function LS(t={}){const{mutation:e}=t,n=Co(t),r=Iae(n),{mutate:s,mutateAsync:i,...o}=EO({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const zae="_verified_lvyh0_1",_O={verified:zae},Hae=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:_O.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),qae=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:_O.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Vae=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:_O.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function D9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=D9(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function yu(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=D9(t))&&(r&&(r+=" "),r+=e);return r}const Gae="_root_98iqw_1",Kae="_article_98iqw_21",j3={root:Gae,article:Kae},CO=({className:t,children:e})=>m.jsx("div",{className:yu("react-tweet-theme",j3.root,t),children:m.jsx("article",{className:j3.article,children:e})}),$9=t=>m.jsx("img",{...t}),Yae="_header_nqq4j_1",Qae="_avatar_nqq4j_11",Zae="_avatarOverflow_nqq4j_16",Xae="_avatarSquare_nqq4j_23",Jae="_avatarShadow_nqq4j_26",ece="_author_nqq4j_37",tce="_authorLink_nqq4j_44",nce="_authorVerified_nqq4j_53",rce="_authorLinkText_nqq4j_56",sce="_authorMeta_nqq4j_63",ice="_authorFollow_nqq4j_66",oce="_username_nqq4j_69",ace="_follow_nqq4j_74",cce="_separator_nqq4j_82",lce="_brand_nqq4j_86",uce="_twitterIcon_nqq4j_90",jr={header:Yae,avatar:Qae,avatarOverflow:Zae,avatarSquare:Xae,avatarShadow:Jae,author:ece,authorLink:tce,authorVerified:nce,authorLinkText:rce,authorMeta:sce,authorFollow:ice,username:oce,follow:ace,separator:cce,brand:lce,twitterIcon:uce},dce="_verifiedOld_lcna5_1",hce="_verifiedBlue_lcna5_4",fce="_verifiedGovernment_lcna5_7",US={verifiedOld:dce,verifiedBlue:hce,verifiedGovernment:fce},M9=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(Hae,{}),s=US.verifiedBlue;if(n)switch(t.is_blue_verified||(s=US.verifiedOld),t.verified_type){case"Government":r=m.jsx(Vae,{}),s=US.verifiedGovernment;break;case"Business":r=m.jsx(qae,{}),s=null;break}return n?m.jsx("div",{className:yu(e,s),children:r}):null},pce=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:$9,{user:s}=t;return m.jsxs("div",{className:jr.header,children:[m.jsxs("a",{href:t.url,className:jr.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:yu(jr.avatarOverflow,s.profile_image_shape==="Square"&&jr.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:jr.avatarOverflow,children:m.jsx("div",{className:jr.avatarShadow})})]}),m.jsxs("div",{className:jr.author,children:[m.jsxs("a",{href:t.url,className:jr.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:jr.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(M9,{user:s,className:jr.authorVerified})]}),m.jsxs("div",{className:jr.authorMeta,children:[m.jsx("a",{href:t.url,className:jr.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:jr.authorFollow,children:[m.jsx("span",{className:jr.separator,children:""}),m.jsx("a",{href:s.follow_url,className:jr.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:jr.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:jr.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},gce="_root_1ec15_1",mce={root:gce},yce=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:mce.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),wce="_root_eihfa_1",bce={root:wce},vce=({href:t,children:e})=>m.jsx("a",{href:t,className:bce.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),Ece="_root_1xq52_1",_ce={root:Ece},Cce=({tweet:t})=>m.jsx("p",{className:_ce.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(vce,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),F3=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,L9=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,Sce=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,Ace=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,Ice=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,Nce=t=>`https://x.com/hashtag/${t.text}`,xce=t=>`https://x.com/search?q=%24${t.text}`,Tce=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,U9=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},Rce=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},Pce=t=>{const e=Rce(t);return e.length>1?e[1]:e[0]},xx=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function W3(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return um(n,"hashtag",t.entities.hashtags),um(n,"mention",t.entities.user_mentions),um(n,"url",t.entities.urls),um(n,"symbol",t.entities.symbols),t.entities.media&&um(n,"media",t.entities.media),Oce(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:Nce(r),text:s});case"mention":return Object.assign(r,{href:L9(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:xce(r),text:s});default:return Object.assign(r,{text:s})}})}function um(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function Oce(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const kce=t=>({...t,url:F3(t),user:{...t.user,url:L9(t),follow_url:Ice(t)},like_url:Sce(t),reply_url:Ace(t),in_reply_to_url:t.in_reply_to_screen_name?Tce(t):void 0,entities:W3(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:F3(t.quoted_tweet),entities:W3(t.quoted_tweet)}:void 0}),Dce="_root_g9tkv_1",$ce="_rounded_g9tkv_6",Mce="_mediaWrapper_g9tkv_10",Lce="_grid2Columns_g9tkv_17",Uce="_grid3_g9tkv_20",Bce="_grid2x2_g9tkv_23",jce="_mediaContainer_g9tkv_26",Fce="_mediaLink_g9tkv_34",Wce="_skeleton_g9tkv_38",zce="_image_g9tkv_43",_i={root:Dce,rounded:$ce,mediaWrapper:Mce,grid2Columns:Lce,grid3:Uce,grid2x2:Bce,mediaContainer:jce,mediaLink:Fce,skeleton:Wce,image:zce},Hce="_anchor_fp31d_1",qce="_videoButton_fp31d_17",Vce="_videoButtonIcon_fp31d_35",Gce="_watchOnTwitter_fp31d_44",Kce="_viewReplies_fp31d_60",sf={anchor:Hce,videoButton:qce,videoButtonIcon:Vce,watchOnTwitter:Gce,viewReplies:Kce},Yce=({tweet:t,media:e})=>{const[n,r]=O.useState(!0),[s,i]=O.useState(!1),[o,a]=O.useState(!1),c=Pce(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:_i.image,poster:U9(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:sf.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:sf.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:sf.watchOnTwitter,children:m.jsx("a",{href:t.url,className:sf.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:yu(sf.anchor,sf.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},Qce=t=>m.jsx("img",{...t}),z3=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},B9=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:Qce;return m.jsx("div",{className:yu(_i.root,!n&&_i.rounded),children:m.jsx("div",{className:yu(_i.mediaWrapper,o>1&&_i.grid2Columns,o===3&&_i.grid3,o>4&&_i.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(O.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:yu(_i.mediaContainer,_i.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:_i.skeleton,style:z3(l,o)}),m.jsx(c,{src:U9(l,"small"),alt:l.ext_alt_text||"Image",className:_i.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:_i.mediaContainer,children:[m.jsx("div",{className:_i.skeleton,style:z3(l,o)}),m.jsx(Yce,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},Zce={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},Xce=new Intl.DateTimeFormat("en-US",Zce),Jce=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},ele=t=>{const e=Jce(Xce.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},tle="_root_i24yn_1",nle={root:tle},rle=({tweet:t})=>{const e=new Date(t.created_at),n=ele(e);return m.jsx("a",{className:nle.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},sle="_info_19qcj_1",ile="_infoLink_19qcj_10",ole="_infoIcon_19qcj_30",BS={info:sle,infoLink:ile,infoIcon:ole},ale=({tweet:t})=>m.jsxs("div",{className:BS.info,children:[m.jsx(rle,{tweet:t}),m.jsx("a",{className:BS.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:BS.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),cle="_actions_n2anf_1",lle="_like_n2anf_13",ule="_reply_n2anf_14",dle="_copy_n2anf_15",hle="_likeIconWrapper_n2anf_27",fle="_likeCount_n2anf_30",ple="_replyIconWrapper_n2anf_35",gle="_copyIconWrapper_n2anf_36",mle="_likeIcon_n2anf_27",yle="_replyIcon_n2anf_35",wle="_copyIcon_n2anf_36",ble="_replyText_n2anf_56",vle="_copyText_n2anf_57",Js={actions:cle,like:lle,reply:ule,copy:dle,likeIconWrapper:hle,likeCount:fle,replyIconWrapper:ple,copyIconWrapper:gle,likeIcon:mle,replyIcon:yle,copyIcon:wle,replyText:ble,copyText:vle},Ele=({tweet:t})=>{const[e,n]=O.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return O.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:Js.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:Js.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:Js.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:Js.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:Js.copyText,children:e?"Copied!":"Copy link"})]})},_le=({tweet:t})=>{const e=xx(t.favorite_count);return m.jsxs("div",{className:Js.actions,children:[m.jsxs("a",{className:Js.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:Js.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Js.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:Js.likeCount,children:e})]}),m.jsxs("a",{className:Js.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:Js.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Js.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:Js.replyText,children:"Reply"})]}),m.jsx(Ele,{tweet:t})]})},Cle="_replies_1cutb_1",Sle="_link_1cutb_4",Ale="_text_1cutb_23",jS={replies:Cle,link:Sle,text:Ale},Ile=({tweet:t})=>m.jsx("div",{className:jS.replies,children:m.jsx("a",{className:jS.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:jS.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${xx(t.conversation_count)} reply`:`Read ${xx(t.conversation_count)} replies`})})}),Nle="_root_q5799_1",xle="_article_q5799_16",H3={root:Nle,article:xle},Tle=({tweet:t,children:e})=>m.jsx("div",{className:H3.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:H3.article,children:e})}),Rle="_header_r31i5_1",Ple="_avatar_r31i5_11",Ole="_avatarSquare_r31i5_17",kle="_author_r31i5_21",Dle="_authorText_r31i5_26",$le="_username_r31i5_33",Qu={header:Rle,avatar:Ple,avatarSquare:Ole,author:kle,authorText:Dle,username:$le},Mle=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Qu.header,children:[m.jsx("a",{href:t.url,className:Qu.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:yu(Qu.avatarOverflow,e.profile_image_shape==="Square"&&Qu.avatarSquare),children:m.jsx($9,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Qu.author,children:[m.jsx("div",{className:Qu.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(M9,{user:e}),m.jsx("div",{className:Qu.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},Lle="_root_175ot_1",Ule={root:Lle},Ble=({tweet:t})=>m.jsx("p",{className:Ule.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),jle=({tweet:t})=>{var e;return m.jsxs(Tle,{tweet:t,children:[m.jsx(Mle,{tweet:t}),m.jsx(Ble,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(B9,{quoted:!0,tweet:t}):null]})},Fle=({tweet:t,components:e})=>{var n;const r=O.useMemo(()=>kce(t),[t]);return m.jsxs(CO,{children:[m.jsx(pce,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(yce,{tweet:r}),m.jsx(Cce,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(B9,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(jle,{tweet:r.quoted_tweet}),m.jsx(ale,{tweet:r}),m.jsx(_le,{tweet:r}),m.jsx(Ile,{tweet:r})]})},Wle="_root_16yxa_1",zle={root:Wle},Hle=t=>m.jsx(CO,{children:m.jsxs("div",{className:zle.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found"})]})}),qle="_skeleton_oi7hr_1",Vle={skeleton:qle},jb=({style:t})=>m.jsx("span",{className:Vle.skeleton,style:t}),Gle="_root_17qqv_1",Kle={root:Gle},Yle=()=>m.jsxs(CO,{className:Kle.root,children:[m.jsx(jb,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(jb,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(jb,{style:{height:"2rem"}}),m.jsx(jb,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]}),j9=0,F9=1,W9=2,q3=3;var V3=Object.prototype.hasOwnProperty;function Tx(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Tx(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(V3.call(t,n)&&++r&&!V3.call(e,n)||!(n in e)||!Tx(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Nc=new WeakMap,Ql=()=>{},xs=Ql(),Rx=Object,Bt=t=>t===xs,Ma=t=>typeof t=="function",Pu=(t,e)=>({...t,...e}),z9=t=>Ma(t.then),FS={},Fb={},SO="undefined",O0=typeof window!=SO,Px=typeof document!=SO,Qle=O0&&"Deno"in window,Zle=()=>O0&&typeof window.requestAnimationFrame!=SO,H9=(t,e)=>{const n=Nc.get(t);return[()=>!Bt(e)&&t.get(e)||FS,r=>{if(!Bt(e)){const s=t.get(e);e in Fb||(Fb[e]=s),n[5](e,Pu(s,r),s||FS)}},n[6],()=>!Bt(e)&&e in Fb?Fb[e]:!Bt(e)&&t.get(e)||FS]};let Ox=!0;const Xle=()=>Ox,[kx,Dx]=O0&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Ql,Ql],Jle=()=>{const t=Px&&document.visibilityState;return Bt(t)||t!=="hidden"},eue=t=>(Px&&document.addEventListener("visibilitychange",t),kx("focus",t),()=>{Px&&document.removeEventListener("visibilitychange",t),Dx("focus",t)}),tue=t=>{const e=()=>{Ox=!0,t()},n=()=>{Ox=!1};return kx("online",e),kx("offline",n),()=>{Dx("online",e),Dx("offline",n)}},nue={isOnline:Xle,isVisible:Jle},rue={initFocus:eue,initReconnect:tue},G3=!ki.useId,_w=!O0||Qle,sue=t=>Zle()?window.requestAnimationFrame(t):setTimeout(t,1),WS=_w?O.useEffect:O.useLayoutEffect,zS=typeof navigator<"u"&&navigator.connection,K3=!_w&&zS&&(["slow-2g","2g"].includes(zS.effectiveType)||zS.saveData),Wb=new WeakMap,iue=t=>Rx.prototype.toString.call(t),HS=(t,e)=>t===`[object ${e}]`;let oue=0;const $x=t=>{const e=typeof t,n=iue(t),r=HS(n,"Date"),s=HS(n,"RegExp"),i=HS(n,"Object");let o,a;if(Rx(t)===t&&!r&&!s){if(o=Wb.get(t),o)return o;if(o=++oue+"~",Wb.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=$x(t[a])+",";Wb.set(t,o)}if(i){o="#";const c=Rx.keys(t).sort();for(;!Bt(a=c.pop());)Bt(t[a])||(o+=a+":"+$x(t[a])+",");Wb.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},AO=t=>{if(Ma(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?$x(t):"",[t,e]};let aue=0;const Mx=()=>++aue;async function q9(...t){const[e,n,r,s]=t,i=Pu({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Ma(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=AO(h);if(!f)return;const[p,g]=H9(e,f),[w,y,b,E]=Nc.get(e),_=()=>{const j=w[f];return(Ma(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete E[f],j&&j[0])?j[0](W9).then(()=>p().data):p().data};if(t.length<3)return _();let C=r,I,A=!1;const x=Mx();y[f]=[x,0];const S=!Bt(c),D=p(),P=D.data,U=D._c,q=Bt(U)?P:U;if(S&&(c=Ma(c)?c(q,P):c,g({data:c,_c:q})),Ma(C))try{C=C(q)}catch(j){I=j,A=!0}if(C&&z9(C))if(C=await C.catch(j=>{I=j,A=!0}),x!==y[f][0]){if(A)throw I;return C}else A&&S&&l(I)&&(o=!0,g({data:q,_c:xs}));if(o&&!A)if(Ma(o)){const j=o(C,q);g({data:j,error:xs,_c:xs})}else g({data:C,error:xs,_c:xs});if(y[f][1]=Mx(),Promise.resolve(_()).then(()=>{g({_c:xs})}),A){if(u)throw I;return}return C}}const Y3=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},cue=(t,e)=>{if(!Nc.has(t)){const n=Pu(rue,e),r=Object.create(null),s=q9.bind(xs,t);let i=Ql;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Nc.has(t)&&(Nc.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!_w)){const u=n.initFocus(setTimeout.bind(xs,Y3.bind(xs,r,j9))),d=n.initReconnect(setTimeout.bind(xs,Y3.bind(xs,r,F9)));i=()=>{u&&u(),d&&d(),Nc.delete(t)}}};return l(),[t,s,l,i]}return[t,Nc.get(t)[4]]},lue=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!Bt(i)&&o>i||setTimeout(r,a,s)},uue=Tx,[V9,due]=cue(new Map),hue=Pu({onLoadingSlow:Ql,onSuccess:Ql,onError:Ql,onErrorRetry:lue,onDiscarded:Ql,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:K3?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:K3?5e3:3e3,compare:uue,isPaused:()=>!1,cache:V9,mutate:due,fallback:{}},nue),fue=(t,e)=>{const n=Pu(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Pu(s,o))}return n},pue=O.createContext({}),gue="$inf$",G9=O0&&window.__SWR_DEVTOOLS_USE__,mue=G9?window.__SWR_DEVTOOLS_USE__:[],yue=()=>{G9&&(window.__SWR_DEVTOOLS_REACT__=ki)},wue=t=>Ma(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],bue=()=>Pu(hue,O.useContext(pue)),vue=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=AO(e),[,,,a]=Nc.get(V9);if(o.startsWith(gue))return n(...i);const c=a[o];return Bt(c)?n(...i):(delete a[o],c)}),r),Eue=mue.concat(vue),_ue=t=>function(...n){const r=bue(),[s,i,o]=wue(n),a=fue(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(Eue);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},Cue=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};yue();const qS=ki.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),VS={dedupe:!0},Sue=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=Nc.get(r),[y,b]=AO(t),E=O.useRef(!1),_=O.useRef(!1),C=O.useRef(y),I=O.useRef(e),A=O.useRef(n),x=()=>A.current,S=()=>x().isVisible()&&x().isOnline(),[D,P,U,q]=H9(r,y),j=O.useRef({}).current,T=Bt(o)?Bt(n.fallback)?xs:n.fallback[y]:o,N=(le,ye)=>{for(const ze in j){const Ze=ze;if(Ze==="data"){if(!s(le[Ze],ye[Ze])&&(!Bt(le[Ze])||!s(ae,ye[Ze])))return!1}else if(ye[Ze]!==le[Ze])return!1}return!0},$=O.useMemo(()=>{const le=!y||!e?!1:Bt(a)?x().isPaused()||i?!1:c!==!1:a,ye=vn=>{const Mn=Pu(vn);return delete Mn._k,le?{isValidating:!0,isLoading:!0,...Mn}:Mn},ze=D(),Ze=q(),Kt=ye(ze),nn=ze===Ze?Kt:ye(Ze);let rn=Kt;return[()=>{const vn=ye(D());return N(vn,rn)?(rn.data=vn.data,rn.isLoading=vn.isLoading,rn.isValidating=vn.isValidating,rn.error=vn.error,rn):(rn=vn,vn)},()=>nn]},[r,y]),R=m9.useSyncExternalStore(O.useCallback(le=>U(y,(ye,ze)=>{N(ze,ye)||le()}),[r,y]),$[0],$[1]),k=!E.current,B=f[y]&&f[y].length>0,H=R.data,X=Bt(H)?T&&z9(T)?qS(T):T:H,se=R.error,ne=O.useRef(X),ae=h?Bt(H)?Bt(ne.current)?X:ne.current:H:X,me=B&&!Bt(se)?!1:k&&!Bt(a)?a:x().isPaused()?!1:i?Bt(X)?!1:c:Bt(X)||c,Z=!!(y&&e&&k&&me),re=Bt(R.isValidating)?Z:R.isValidating,de=Bt(R.isLoading)?Z:R.isLoading,ee=O.useCallback(async le=>{const ye=I.current;if(!y||!ye||_.current||x().isPaused())return!1;let ze,Ze,Kt=!0;const nn=le||{},rn=!g[y]||!nn.dedupe,vn=()=>G3?!_.current&&y===C.current&&E.current:y===C.current,Mn={isValidating:!1,isLoading:!1},or=()=>{P(Mn)},ss=()=>{const Sr=g[y];Sr&&Sr[1]===Ze&&delete g[y]},xo={isValidating:!0};Bt(D().data)&&(xo.isLoading=!0);try{if(rn&&(P(xo),n.loadingTimeout&&Bt(D().data)&&setTimeout(()=>{Kt&&vn()&&x().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[ye(b),Mx()]),[ze,Ze]=g[y],ze=await ze,rn&&setTimeout(ss,n.dedupingInterval),!g[y]||g[y][1]!==Ze)return rn&&vn()&&x().onDiscarded(y),!1;Mn.error=xs;const Sr=p[y];if(!Bt(Sr)&&(Ze<=Sr[0]||Ze<=Sr[1]||Sr[1]===0))return or(),rn&&vn()&&x().onDiscarded(y),!1;const bs=D().data;Mn.data=s(bs,ze)?bs:ze,rn&&vn()&&x().onSuccess(ze,y,n)}catch(Sr){ss();const bs=x(),{shouldRetryOnError:is}=bs;bs.isPaused()||(Mn.error=Sr,rn&&vn()&&(bs.onError(Sr,y,bs),(is===!0||Ma(is)&&is(Sr))&&(!x().revalidateOnFocus||!x().revalidateOnReconnect||S())&&bs.onErrorRetry(Sr,y,bs,zu=>{const To=f[y];To&&To[0]&&To[0](q3,zu)},{retryCount:(nn.retryCount||0)+1,dedupe:!0})))}return Kt=!1,or(),!0},[y,r]),he=O.useCallback((...le)=>q9(r,C.current,...le),[]);if(WS(()=>{I.current=e,A.current=n,Bt(H)||(ne.current=H)}),WS(()=>{if(!y)return;const le=ee.bind(xs,VS);let ye=0;x().revalidateOnFocus&&(ye=Date.now()+x().focusThrottleInterval);const Ze=Cue(y,f,(Kt,nn={})=>{if(Kt==j9){const rn=Date.now();x().revalidateOnFocus&&rn>ye&&S()&&(ye=rn+x().focusThrottleInterval,le())}else if(Kt==F9)x().revalidateOnReconnect&&S()&&le();else{if(Kt==W9)return ee();if(Kt==q3)return ee(nn)}});return _.current=!1,C.current=y,E.current=!0,P({_k:b}),me&&(g[y]||(Bt(X)||_w?le():sue(le))),()=>{_.current=!0,Ze()}},[y]),WS(()=>{let le;function ye(){const Ze=Ma(l)?l(D().data):l;Ze&&le!==-1&&(le=setTimeout(ze,Ze))}function ze(){!D().error&&(u||x().isVisible())&&(d||x().isOnline())?ee(VS).then(ye):ye()}return ye(),()=>{le&&(clearTimeout(le),le=-1)}},[l,u,d,y]),O.useDebugValue(ae),i&&Bt(X)&&y){if(!G3&&_w)throw new Error("Fallback data is required when using Suspense in SSR.");I.current=e,A.current=n,_.current=!1;const le=w[y];if(!Bt(le)){const ye=he(le);qS(ye)}if(Bt(se)){const ye=ee(VS);Bt(ae)||(ye.status="fulfilled",ye.value=!0),qS(ye)}else throw se}return{mutate:he,get data(){return j.data=!0,ae},get error(){return j.error=!0,se},get isValidating(){return j.isValidating=!0,re},get isLoading(){return j.isLoading=!0,de}}},Q3=_ue(Sue);class Aue extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const Iue=Q3.default||Q3,Nue="https://react-tweet.vercel.app";async function xue([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new Aue({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const Tue=(t,e,n)=>{const{isLoading:r,data:s,error:i}=Iue(()=>e||t?[e||t&&`${Nue}/api/tweet/${t}`,n]:null,xue,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},Rue=({id:t,apiUrl:e,fallback:n=m.jsx(Yle,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=Tue(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||Hle;return m.jsx(l,{error:i?i(a):a})}return m.jsx(Fle,{tweet:o,components:r})};var TC={exports:{}},K9={},Y9={exports:{}},Pue="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Oue=Pue,kue=Oue;function Q9(){}function Z9(){}Z9.resetWarningCache=Q9;var Due=function(){function t(r,s,i,o,a,c){if(c!==kue){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Z9,resetWarningCache:Q9};return n.PropTypes=n,n};Y9.exports=Due();var X9=Y9.exports,Lx={exports:{}};function J9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=J9(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Z3(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=J9(t))&&(r&&(r+=" "),r+=e);return r}Lx.exports=Z3,Lx.exports.clsx=Z3;var $ue=Lx.exports,er={},nc={};Object.defineProperty(nc,"__esModule",{value:!0});nc.dontSetMe=jue;nc.findInArray=Mue;nc.int=Bue;nc.isFunction=Lue;nc.isNum=Uue;function Mue(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Lue(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Uue(t){return typeof t=="number"&&!isNaN(t)}function Bue(t){return parseInt(t,10)}function jue(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Mh={};Object.defineProperty(Mh,"__esModule",{value:!0});Mh.browserPrefixToKey=t7;Mh.browserPrefixToStyle=Fue;Mh.default=void 0;Mh.getPrefix=e7;const GS=["Moz","Webkit","O","ms"];function e7(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<GS.length;s++)if(t7(t,GS[s])in e)return GS[s];return""}function t7(t,e){return e?`${e}${Wue(t)}`:t}function Fue(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Wue(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Mh.default=e7();Object.defineProperty(er,"__esModule",{value:!0});er.addClassName=s7;er.addEvent=Hue;er.addUserSelectStyles=tde;er.createCSSTransform=Zue;er.createSVGTransform=Xue;er.getTouch=Jue;er.getTouchIdentifier=ede;er.getTranslation=IO;er.innerHeight=Kue;er.innerWidth=Yue;er.matchesSelector=r7;er.matchesSelectorAndParentsTo=zue;er.offsetXYFromParent=Que;er.outerHeight=Vue;er.outerWidth=Gue;er.removeClassName=i7;er.removeEvent=que;er.scheduleRemoveUserSelectStyles=nde;var Mi=nc,X3=n7(Mh);function n7(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(n7=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let zb="";function r7(t,e){return zb||(zb=(0,Mi.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Mi.isFunction)(t[n])})),(0,Mi.isFunction)(t[zb])?t[zb](e):!1}function zue(t,e,n){let r=t;do{if(r7(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Hue(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function que(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Vue(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Mi.int)(n.borderTopWidth),e+=(0,Mi.int)(n.borderBottomWidth),e}function Gue(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Mi.int)(n.borderLeftWidth),e+=(0,Mi.int)(n.borderRightWidth),e}function Kue(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Mi.int)(n.paddingTop),e-=(0,Mi.int)(n.paddingBottom),e}function Yue(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Mi.int)(n.paddingLeft),e-=(0,Mi.int)(n.paddingRight),e}function Que(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Zue(t,e){const n=IO(t,e,"px");return{[(0,X3.browserPrefixToKey)("transform",X3.default)]:n}}function Xue(t,e){return IO(t,e,"")}function IO(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function Jue(t,e){return t.targetTouches&&(0,Mi.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Mi.findInArray)(t.changedTouches,n=>e===n.identifier)}function ede(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function tde(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&s7(t.body,"react-draggable-transparent-selection")}function nde(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{J3(t)}):J3(t)}function J3(t){if(t)try{if(t.body&&i7(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function s7(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function i7(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var rc={};Object.defineProperty(rc,"__esModule",{value:!0});rc.canDragX=ide;rc.canDragY=ode;rc.createCoreData=cde;rc.createDraggableData=lde;rc.getBoundPosition=rde;rc.getControlPosition=ade;rc.snapToGrid=sde;var Ci=nc,Xf=er;function rde(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:ude(r);const s=NO(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,Ci.int)(u.paddingLeft)+(0,Ci.int)(l.marginLeft),top:-s.offsetTop+(0,Ci.int)(u.paddingTop)+(0,Ci.int)(l.marginTop),right:(0,Xf.innerWidth)(c)-(0,Xf.outerWidth)(s)-s.offsetLeft+(0,Ci.int)(u.paddingRight)-(0,Ci.int)(l.marginRight),bottom:(0,Xf.innerHeight)(c)-(0,Xf.outerHeight)(s)-s.offsetTop+(0,Ci.int)(u.paddingBottom)-(0,Ci.int)(l.marginBottom)}}return(0,Ci.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Ci.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Ci.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Ci.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function sde(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function ide(t){return t.props.axis==="both"||t.props.axis==="x"}function ode(t){return t.props.axis==="both"||t.props.axis==="y"}function ade(t,e,n){const r=typeof e=="number"?(0,Xf.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=NO(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Xf.offsetXYFromParent)(r||t,i,n.props.scale)}function cde(t,e,n){const r=!(0,Ci.isNum)(t.lastX),s=NO(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function lde(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function ude(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function NO(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var RC={},PC={};Object.defineProperty(PC,"__esModule",{value:!0});PC.default=dde;function dde(){}Object.defineProperty(RC,"__esModule",{value:!0});RC.default=void 0;var KS=o7(O),vs=xO(X9),hde=xO(RP),ls=er,cl=rc,YS=nc,dm=xO(PC);function xO(t){return t&&t.__esModule?t:{default:t}}function o7(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(o7=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function _s(t,e,n){return(e=fde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fde(t){var e=pde(t,"string");return typeof e=="symbol"?e:e+""}function pde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Mo={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ll=Mo.mouse,OC=class extends KS.Component{constructor(){super(...arguments),_s(this,"dragging",!1),_s(this,"lastX",NaN),_s(this,"lastY",NaN),_s(this,"touchIdentifier",null),_s(this,"mounted",!1),_s(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,ls.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,ls.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,ls.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,cl.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,cl.createCoreData)(this,o,a);(0,dm.default)("DraggableCore: handleDragStart: %j",c),(0,dm.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,ls.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,ls.addEvent)(r,ll.move,this.handleDrag),(0,ls.addEvent)(r,ll.stop,this.handleDragStop))}),_s(this,"handleDrag",e=>{const n=(0,cl.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,cl.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,cl.createCoreData)(this,r,s);if((0,dm.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),_s(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,cl.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,cl.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,cl.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,ls.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,dm.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,dm.default)("DraggableCore: Removing handlers"),(0,ls.removeEvent)(a.ownerDocument,ll.move,this.handleDrag),(0,ls.removeEvent)(a.ownerDocument,ll.stop,this.handleDragStop))}),_s(this,"onMouseDown",e=>(ll=Mo.mouse,this.handleDragStart(e))),_s(this,"onMouseUp",e=>(ll=Mo.mouse,this.handleDragStop(e))),_s(this,"onTouchStart",e=>(ll=Mo.touch,this.handleDragStart(e))),_s(this,"onTouchEnd",e=>(ll=Mo.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,ls.addEvent)(e,Mo.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,ls.removeEvent)(n,Mo.mouse.move,this.handleDrag),(0,ls.removeEvent)(n,Mo.touch.move,this.handleDrag),(0,ls.removeEvent)(n,Mo.mouse.stop,this.handleDragStop),(0,ls.removeEvent)(n,Mo.touch.stop,this.handleDragStop),(0,ls.removeEvent)(e,Mo.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,ls.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:hde.default.findDOMNode(this)}render(){return KS.cloneElement(KS.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};RC.default=OC;_s(OC,"displayName","DraggableCore");_s(OC,"propTypes",{allowAnyClick:vs.default.bool,allowMobileScroll:vs.default.bool,children:vs.default.node.isRequired,disabled:vs.default.bool,enableUserSelectHack:vs.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:vs.default.arrayOf(vs.default.number),handle:vs.default.string,cancel:vs.default.string,nodeRef:vs.default.object,onStart:vs.default.func,onDrag:vs.default.func,onStop:vs.default.func,onMouseDown:vs.default.func,scale:vs.default.number,className:YS.dontSetMe,style:YS.dontSetMe,transform:YS.dontSetMe});_s(OC,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(O),n=u(X9),r=u(RP),s=$ue,i=er,o=rc,a=nc,c=u(RC),l=u(PC);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,b){if(typeof WeakMap=="function")var E=new WeakMap,_=new WeakMap;return(d=function(C,I){if(!I&&C&&C.__esModule)return C;var A,x,S={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return S;if(A=I?_:E){if(A.has(C))return A.get(C);A.set(C,S)}for(const D in C)D!=="default"&&{}.hasOwnProperty.call(C,D)&&((x=(A=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,D))&&(x.get||x.set)?A(S,D,x):S[D]=C[D]);return S})(y,b)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var b=1;b<arguments.length;b++){var E=arguments[b];for(var _ in E)({}).hasOwnProperty.call(E,_)&&(y[_]=E[_])}return y},h.apply(null,arguments)}function f(y,b,E){return(b=p(b))in y?Object.defineProperty(y,b,{value:E,enumerable:!0,configurable:!0,writable:!0}):y[b]=E,y}function p(y){var b=g(y,"string");return typeof b=="symbol"?b:b+""}function g(y,b){if(typeof y!="object"||!y)return y;var E=y[Symbol.toPrimitive];if(E!==void 0){var _=E.call(y,b);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}class w extends e.Component{static getDerivedStateFromProps(b,E){let{position:_}=b,{prevPropsPosition:C}=E;return _&&(!C||_.x!==C.x||_.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:C}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(b){super(b),f(this,"onDragStart",(E,_)=>{if((0,l.default)("Draggable: onDragStart: %j",_),this.props.onStart(E,(0,o.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(E,_)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",_);const C=(0,o.createDraggableData)(this,_),I={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x,y:S}=I;I.x+=this.state.slackX,I.y+=this.state.slackY;const[D,P]=(0,o.getBoundPosition)(this,I.x,I.y);I.x=D,I.y=P,I.slackX=this.state.slackX+(x-I.x),I.slackY=this.state.slackY+(S-I.y),C.x=I.x,C.y=I.y,C.deltaX=I.x-this.state.x,C.deltaY=I.y-this.state.y}if(this.props.onDrag(E,C)===!1)return!1;this.setState(I)}),f(this,"onDragStop",(E,_)=>{if(!this.state.dragging||this.props.onStop(E,(0,o.createDraggableData)(this,_))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",_);const I={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x,y:S}=this.props.position;I.x=x,I.y=S}this.setState(I)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,E;return((E=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:E.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:E,children:_,defaultPosition:C,defaultClassName:I,defaultClassNameDragging:A,defaultClassNameDragged:x,position:S,positionOffset:D,scale:P,...U}=this.props;let q={},j=null;const N=!!!S||this.state.dragging,$=S||C,R={x:(0,o.canDragX)(this)&&N?this.state.x:$.x,y:(0,o.canDragY)(this)&&N?this.state.y:$.y};this.state.isElementSVG?j=(0,i.createSVGTransform)(R,D):q=(0,i.createCSSTransform)(R,D);const k=(0,s.clsx)(_.props.className||"",I,{[A]:this.state.dragging,[x]:this.state.dragged});return e.createElement(c.default,h({},U,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:k,style:{..._.props.style,...q},transform:j}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(K9);const{default:a7,DraggableCore:gde}=K9;TC.exports=a7;TC.exports.default=a7;TC.exports.DraggableCore=gde;var mde=TC.exports;const k0=Nh(mde);function Hn(){return Hn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hn.apply(null,arguments)}function c7(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var l7={exports:{}},ln={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Br=typeof Symbol=="function"&&Symbol.for,TO=Br?Symbol.for("react.element"):60103,RO=Br?Symbol.for("react.portal"):60106,kC=Br?Symbol.for("react.fragment"):60107,DC=Br?Symbol.for("react.strict_mode"):60108,$C=Br?Symbol.for("react.profiler"):60114,MC=Br?Symbol.for("react.provider"):60109,LC=Br?Symbol.for("react.context"):60110,PO=Br?Symbol.for("react.async_mode"):60111,UC=Br?Symbol.for("react.concurrent_mode"):60111,BC=Br?Symbol.for("react.forward_ref"):60112,jC=Br?Symbol.for("react.suspense"):60113,yde=Br?Symbol.for("react.suspense_list"):60120,FC=Br?Symbol.for("react.memo"):60115,WC=Br?Symbol.for("react.lazy"):60116,wde=Br?Symbol.for("react.block"):60121,bde=Br?Symbol.for("react.fundamental"):60117,vde=Br?Symbol.for("react.responder"):60118,Ede=Br?Symbol.for("react.scope"):60119;function Hi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case TO:switch(t=t.type,t){case PO:case UC:case kC:case $C:case DC:case jC:return t;default:switch(t=t&&t.$$typeof,t){case LC:case BC:case WC:case FC:case MC:return t;default:return e}}case RO:return e}}}function u7(t){return Hi(t)===UC}ln.AsyncMode=PO;ln.ConcurrentMode=UC;ln.ContextConsumer=LC;ln.ContextProvider=MC;ln.Element=TO;ln.ForwardRef=BC;ln.Fragment=kC;ln.Lazy=WC;ln.Memo=FC;ln.Portal=RO;ln.Profiler=$C;ln.StrictMode=DC;ln.Suspense=jC;ln.isAsyncMode=function(t){return u7(t)||Hi(t)===PO};ln.isConcurrentMode=u7;ln.isContextConsumer=function(t){return Hi(t)===LC};ln.isContextProvider=function(t){return Hi(t)===MC};ln.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===TO};ln.isForwardRef=function(t){return Hi(t)===BC};ln.isFragment=function(t){return Hi(t)===kC};ln.isLazy=function(t){return Hi(t)===WC};ln.isMemo=function(t){return Hi(t)===FC};ln.isPortal=function(t){return Hi(t)===RO};ln.isProfiler=function(t){return Hi(t)===$C};ln.isStrictMode=function(t){return Hi(t)===DC};ln.isSuspense=function(t){return Hi(t)===jC};ln.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===kC||t===UC||t===$C||t===DC||t===jC||t===yde||typeof t=="object"&&t!==null&&(t.$$typeof===WC||t.$$typeof===FC||t.$$typeof===MC||t.$$typeof===LC||t.$$typeof===BC||t.$$typeof===bde||t.$$typeof===vde||t.$$typeof===Ede||t.$$typeof===wde)};ln.typeOf=Hi;l7.exports=ln;var _de=l7.exports,OO=_de,Cde={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Sde={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Ade={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},d7={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},kO={};kO[OO.ForwardRef]=Ade;kO[OO.Memo]=d7;function e$(t){return OO.isMemo(t)?d7:kO[t.$$typeof]||Cde}var Ide=Object.defineProperty,Nde=Object.getOwnPropertyNames,t$=Object.getOwnPropertySymbols,xde=Object.getOwnPropertyDescriptor,Tde=Object.getPrototypeOf,n$=Object.prototype;function h7(t,e,n){if(typeof e!="string"){if(n$){var r=Tde(e);r&&r!==n$&&h7(t,r,n)}var s=Nde(e);t$&&(s=s.concat(t$(e)));for(var i=e$(t),o=e$(e),a=0;a<s.length;++a){var c=s[a];if(!Sde[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=xde(e,c);try{Ide(t,c,l)}catch{}}}}return t}var Rde=h7;const Pde=Nh(Rde);var f7={};Object.defineProperty(f7,"__esModule",{value:!0});f7.default=Ode;function Ode(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function Hb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r_(){return r_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r_.apply(this,arguments)}function kde(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function ul(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dde(t){var e=function(n){kde(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,Hb(ul(ul(i)),"cachedTheme",void 0),Hb(ul(ul(i)),"lastOuterTheme",void 0),Hb(ul(ul(i)),"lastTheme",void 0),Hb(ul(ul(i)),"renderProvider",function(l){var u=i.props.children;return ki.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?r_({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?ki.createElement(t.Consumer,null,this.renderProvider):null},r}(ki.Component);return e}function $de(t){return function(n){var r=ki.forwardRef(function(s,i){return ki.createElement(t.Consumer,null,function(o){return ki.createElement(n,r_({theme:o,ref:i},s))})});return Pde(r,n),r}}function Mde(t){var e=function(){var r=ki.useContext(t);return r};return e}function Lde(t){return{context:t,withTheme:$de(t),useTheme:Mde(t),ThemeProvider:Dde(t)}}var p7=O.createContext();Lde(p7);var r$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pg=(typeof window>"u"?"undefined":r$(window))==="object"&&(typeof document>"u"?"undefined":r$(document))==="object"&&document.nodeType===9;function Cw(t){"@babel/helpers - typeof";return Cw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cw(t)}function Ude(t,e){if(Cw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Bde(t){var e=Ude(t,"string");return Cw(e)=="symbol"?e:e+""}function jde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bde(r.key),r)}}function DO(t,e,n){return e&&jde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ux(t,e){return Ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ux(t,e)}function g7(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ux(t,e)}function s$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Fde={}.constructor;function Bx(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(Bx);if(t.constructor!==Fde)return t;var e={};for(var n in t)e[n]=Bx(t[n]);return e}function zC(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=Bx(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var i$=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},qd=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=i$(e[r]," ");else n=i$(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function Og(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function hm(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function Sw(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=Og(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=hm(f+":"+u+qd(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=hm(g+":"+u+qd(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=hm(y+":"+u+qd(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),hm(""+t+u+"{"+r,o)+hm("}",o))}var Wde=/([[\].#*$><+~=|^:(),"'`\s])/g,o$=typeof CSS<"u"&&CSS.escape,$O=function(t){return o$?o$(t):t.replace(Wde,"\\$1")},m7=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),jx=function(t){g7(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(s$(s$(o)),l),o.selectorText="."+$O(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=qd(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Hn({},s,{allowEmpty:!0}):s;return Sw(this.selectorText,this.style,a)},DO(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(m7),zde={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new jx(e,n,r)}},QS={indent:1,children:!0},Hde=/@([\w-]+)/,qde=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Hde);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new HC(Hn({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=QS);var s=Og(r),i=s.linebreak;if(r.indent==null&&(r.indent=QS.indent),r.children==null&&(r.children=QS.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Vde=/@container|@media|@supports\s+/,Gde={onCreateRule:function(e,n,r){return Vde.test(e)?new qde(e,n,r):null}},ZS={indent:1,children:!0},Kde=/@keyframes\s+([\w-]+)/,Fx=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Kde);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:$O(c(this,a)),this.rules=new HC(Hn({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Hn({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=ZS);var s=Og(r),i=s.linebreak;if(r.indent==null&&(r.indent=ZS.indent),r.children==null&&(r.children=ZS.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Yde=/@keyframes\s+/,Qde=/\$([\w-]+)/g,Wx=function(e,n){return typeof e=="string"?e.replace(Qde,function(r,s){return s in n?n[s]:r}):e},a$=function(e,n,r){var s=e[n],i=Wx(s,r);i!==s&&(e[n]=i)},Zde={onCreateRule:function(e,n,r){return typeof e=="string"&&Yde.test(e)?new Fx(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&a$(e,"animation-name",r.keyframes),"animation"in e&&a$(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return Wx(e,s.keyframes);case"animation-name":return Wx(e,s.keyframes);default:return e}}},Xde=function(t){g7(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Hn({},s,{allowEmpty:!0}):s;return Sw(this.key,this.style,a)},e}(m7),Jde={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new Xde(e,n,r):null}},ehe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=Og(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=Sw(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return Sw(this.at,this.style,r)},t}(),the=/@font-face/,nhe={onCreateRule:function(e,n,r){return the.test(e)?new ehe(e,n,r):null}},rhe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return Sw(this.key,this.style,r)},t}(),she={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new rhe(e,n,r):null}},ihe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),ohe={"@charset":!0,"@import":!0,"@namespace":!0},ahe={onCreateRule:function(e,n,r){return e in ohe?new ihe(e,n,r):null}},c$=[zde,Gde,Zde,Jde,nhe,she,ahe],che={process:!0},l$={force:!0,process:!0},HC=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Hn({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+$O(this.classes[p]));var g=zC(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Hn({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof jx?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof Fx&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof jx?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof Fx&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=che);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,l$)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,l$)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=Og(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),y7=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Hn({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new HC(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),lhe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),uhe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=c7(s,["attached"]),a=Og(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},DO(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),fy=new uhe,zx=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),Hx="2f1acc6c3a606b082e5eef5e54414ffb";zx[Hx]==null&&(zx[Hx]=0);var u$=zx[Hx]++,d$=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+u$+a+n:c+i.key+"-"+u$+(a?"-"+a:"")+"-"+n};return r},w7=function(e){var n;return function(){return n||(n=e()),n}},dhe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},hhe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=qd(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},fhe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},phe=function(e,n){return e.selectorText=n,e.selectorText===n},b7=w7(function(){return document.querySelector("head")});function ghe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function mhe(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function yhe(t){for(var e=b7(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function whe(t){var e=fy.registry;if(e.length>0){var n=ghe(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=mhe(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=yhe(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function bhe(t,e){var n=e.insertionPoint,r=whe(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}b7().appendChild(t)}var vhe=w7(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),h$=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},f$=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},Ehe=function(){var e=document.createElement("style");return e.textContent=`
`,e},_he=function(){function t(n){this.getPropertyValue=dhe,this.setProperty=hhe,this.removeProperty=fhe,this.setSelector=phe,this.hasInsertedRules=!1,this.cssRules=[],n&&fy.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||Ehe(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=vhe();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){bhe(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=f$(i,s);if(a=h$(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=f$(i,s),d=h$(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof y7&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),Che=0,She=function(){function t(n){this.id=Che++,this.version="10.10.0",this.plugins=new lhe,this.options={id:{minify:!1},createGenerateId:d$,Renderer:Pg?_he:null,plugins:[]},this.generateId=d$({minify:!1});for(var r=0;r<c$.length;r++)this.plugins.use(c$[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Hn({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=fy.index===0?0:fy.index+1);var a=new y7(r,Hn({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),fy.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Hn({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=zC(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),v7=function(e){return new She(e)},p$=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},DO(t,[{key:"size",get:function(){return this.length}}]),t}(),MO=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function E7(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=E7(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */v7();var _7=Date.now(),XS="fnValues"+_7,JS="fnStyle"+ ++_7,Ahe=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=zC(n,{},s);return i[JS]=r,i},onProcessStyle:function(n,r){if(XS in r||JS in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[XS]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[JS];a&&(o.style=a(n)||{});var c=o[XS];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function Ihe(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Of;typeof self<"u"?Of=self:typeof window<"u"?Of=window:typeof global<"u"?Of=global:typeof module<"u"?Of=module:Of=Function("return this")();var g$=Ihe(Of),m$=function(e){return e&&e[g$]&&e===e[g$]()},Nhe=function(e){return{onCreateRule:function(r,s,i){if(!m$(s))return null;var o=s,a=zC(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!m$(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},xhe=/;\n/,The=function(e){for(var n={},r=e.split(xhe),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},Rhe=function(e){typeof e.style=="string"&&(e.style=The(e.style))};function Phe(){return{onProcessRule:Rhe}}var wu="@global",qx="@global ",Ohe=function(){function t(n,r,s){this.type="global",this.at=wu,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new HC(Hn({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),khe=function(){function t(n,r,s){this.type="global",this.at=wu,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(qx.length);this.rule=s.jss.createRule(i,r,Hn({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),Dhe=/\s*,\s*/g;function C7(t,e){for(var n=t.split(Dhe),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function $he(t,e){var n=t.options,r=t.style,s=r?r[wu]:null;if(s){for(var i in s)e.addRule(i,s[i],Hn({},n,{selector:C7(i,t.selector)}));delete r[wu]}}function Mhe(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,wu.length)!==wu)){var i=C7(s.substr(wu.length),t.selector);e.addRule(i,r[s],Hn({},n,{selector:i})),delete r[s]}}function Lhe(){function t(n,r,s){if(!n)return null;if(n===wu)return new Ohe(n,r,s);if(n[0]==="@"&&n.substr(0,qx.length)===qx)return new khe(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||($he(n,r),Mhe(n,r))}return{onCreateRule:t,onProcessRule:e}}var Bv=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},eA="extendCurrValue"+Date.now();function Uhe(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Td(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Hn({},t,{extend:l}):t.extend[c];Td(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Td(t.extend.extend,e,n,r);continue}if(Bv(t.extend[d])){d in r||(r[d]={}),Td(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function Bhe(t,e,n,r){for(var s in t)if(s!=="extend"){if(Bv(r[s])&&Bv(t[s])){Td(t[s],e,n,r[s]);continue}if(Bv(t[s])){r[s]=Td(t[s],e,n);continue}r[s]=t[s]}}function Td(t,e,n,r){return r===void 0&&(r={}),Uhe(t,e,n,r),Bhe(t,e,n,r),r}function jhe(){function t(n,r,s){return"extend"in n?Td(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[eA])s.prop(i,null);return s[eA]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[eA]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var y$=/\s*,\s*/g,Fhe=/&/g,Whe=/\$([\w-]+)/g;function zhe(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(y$),a=s.split(y$),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(Fhe,u):u+" "+h}return c}function n(s,i,o){if(o)return Hn({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Hn({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Whe,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Hn({},l,{selector:p})):c.addRule(g,s[d],Hn({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function Vx(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=Vx(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return Vx(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function Hhe(){function t(e,n){return"composes"in e&&(Vx(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var qhe=/[A-Z]/g,Vhe=/^ms-/,tA={};function Ghe(t){return"-"+t.toLowerCase()}function S7(t){if(tA.hasOwnProperty(t))return tA[t];var e=t.replace(qhe,Ghe);return tA[t]=Vhe.test(e)?"-"+e:e}function s_(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:S7(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(s_):e.fallbacks=s_(t.fallbacks)),e}function Khe(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=s_(n[r]);return n}return s_(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=S7(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var oe=MO&&CSS?CSS.px:"px",qb=MO&&CSS?CSS.ms:"ms",of=MO&&CSS?CSS.percent:"%",Yhe={"animation-delay":qb,"animation-duration":qb,"background-position":oe,"background-position-x":oe,"background-position-y":oe,"background-size":oe,border:oe,"border-bottom":oe,"border-bottom-left-radius":oe,"border-bottom-right-radius":oe,"border-bottom-width":oe,"border-left":oe,"border-left-width":oe,"border-radius":oe,"border-right":oe,"border-right-width":oe,"border-top":oe,"border-top-left-radius":oe,"border-top-right-radius":oe,"border-top-width":oe,"border-width":oe,"border-block":oe,"border-block-end":oe,"border-block-end-width":oe,"border-block-start":oe,"border-block-start-width":oe,"border-block-width":oe,"border-inline":oe,"border-inline-end":oe,"border-inline-end-width":oe,"border-inline-start":oe,"border-inline-start-width":oe,"border-inline-width":oe,"border-start-start-radius":oe,"border-start-end-radius":oe,"border-end-start-radius":oe,"border-end-end-radius":oe,margin:oe,"margin-bottom":oe,"margin-left":oe,"margin-right":oe,"margin-top":oe,"margin-block":oe,"margin-block-end":oe,"margin-block-start":oe,"margin-inline":oe,"margin-inline-end":oe,"margin-inline-start":oe,padding:oe,"padding-bottom":oe,"padding-left":oe,"padding-right":oe,"padding-top":oe,"padding-block":oe,"padding-block-end":oe,"padding-block-start":oe,"padding-inline":oe,"padding-inline-end":oe,"padding-inline-start":oe,"mask-position-x":oe,"mask-position-y":oe,"mask-size":oe,height:oe,width:oe,"min-height":oe,"max-height":oe,"min-width":oe,"max-width":oe,bottom:oe,left:oe,top:oe,right:oe,inset:oe,"inset-block":oe,"inset-block-end":oe,"inset-block-start":oe,"inset-inline":oe,"inset-inline-end":oe,"inset-inline-start":oe,"box-shadow":oe,"text-shadow":oe,"column-gap":oe,"column-rule":oe,"column-rule-width":oe,"column-width":oe,"font-size":oe,"font-size-delta":oe,"letter-spacing":oe,"text-decoration-thickness":oe,"text-indent":oe,"text-stroke":oe,"text-stroke-width":oe,"word-spacing":oe,motion:oe,"motion-offset":oe,outline:oe,"outline-offset":oe,"outline-width":oe,perspective:oe,"perspective-origin-x":of,"perspective-origin-y":of,"transform-origin":of,"transform-origin-x":of,"transform-origin-y":of,"transform-origin-z":of,"transition-delay":qb,"transition-duration":qb,"vertical-align":oe,"flex-basis":oe,"shape-margin":oe,size:oe,gap:oe,grid:oe,"grid-gap":oe,"row-gap":oe,"grid-row-gap":oe,"grid-column-gap":oe,"grid-template-rows":oe,"grid-template-columns":oe,"grid-auto-rows":oe,"grid-auto-columns":oe,"box-shadow-x":oe,"box-shadow-y":oe,"box-shadow-blur":oe,"box-shadow-spread":oe,"font-line-height":oe,"text-shadow-x":oe,"text-shadow-y":oe,"text-shadow-blur":oe};function A7(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var Qhe=A7(Yhe);function py(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=py(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=py(s,e[s],n);else for(var i in e)e[i]=py(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||Qhe[t];return o&&!(e===0&&o===oe)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Zhe(t){t===void 0&&(t={});var e=A7(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=py(o,s[o],e);return s}function r(s,i){return py(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var Xhe={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},Jhe={position:!0,size:!0},Vb={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},nA={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function efe(t,e,n){return t.map(function(r){return N7(r,e,n,!1,!0)})}function I7(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?I7(t[0],e,n,r):typeof t[0]=="object"?efe(t,e,r):[t]}function N7(t,e,n,r,s){if(!(Vb[e]||nA[e]))return[];var i=[];if(nA[e]&&(t=tfe(t,n,nA[e],r)),Object.keys(t).length)for(var o in Vb[e]){if(t[o]){Array.isArray(t[o])?i.push(Jhe[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}Vb[e][o]!=null&&i.push(Vb[e][o])}return!i.length||s?i:[i]}function tfe(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=Aw((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function Aw(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=Aw(t.fallbacks[i],e,!0);continue}t[r]=I7(s,r,Xhe,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=Aw(t.fallbacks,e,!0);continue}t[r]=N7(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function nfe(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=Aw(e[r],n);return e}return Aw(e,n)}return{onProcessStyle:t}}function Gx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function rfe(t){if(Array.isArray(t))return Gx(t)}function sfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ife(t,e){if(t){if(typeof t=="string")return Gx(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gx(t,e):void 0}}function ofe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function afe(t){return rfe(t)||sfe(t)||ife(t)||ofe()}var Mm="",Kx="",x7="",T7="",cfe=Pg&&"ontouchstart"in document.documentElement;if(Pg){var rA={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},lfe=document.createElement("p"),sA=lfe.style,ufe="Transform";for(var iA in rA)if(iA+ufe in sA){Mm=iA,Kx=rA[iA];break}Mm==="Webkit"&&"msHyphens"in sA&&(Mm="ms",Kx=rA.ms,T7="edge"),Mm==="Webkit"&&"-apple-trailing-word"in sA&&(x7="apple")}var vt={js:Mm,css:Kx,vendor:x7,browser:T7,isTouch:cfe};function dfe(t){return t[1]==="-"||vt.js==="ms"?t:"@"+vt.css+"keyframes"+t.substr(10)}var hfe={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:vt.js==="ms"?"-webkit-"+e:vt.css+e}},ffe={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:vt.js==="Webkit"?vt.css+"print-"+e:e}},pfe=/[-\s]+(.)?/g;function gfe(t,e){return e?e.toUpperCase():""}function LO(t){return t.replace(pfe,gfe)}function Ou(t){return LO("-"+t)}var mfe={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(vt.js==="Webkit"){var r="mask-image";if(LO(r)in n)return e;if(vt.js+Ou(r)in n)return vt.css+e}return e}},yfe={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:vt.vendor==="apple"&&!vt.isTouch?vt.css+e:e}},wfe={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:vt.css+e}},bfe={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:vt.css+e}},vfe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:vt.js==="Webkit"||vt.js==="ms"&&vt.browser!=="edge"?vt.css+e:e}},Efe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:vt.js==="Moz"||vt.js==="ms"||vt.vendor==="apple"?vt.css+e:e}},_fe={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(vt.js==="Webkit"){var r="WebkitColumn"+Ou(e);return r in n?vt.css+"column-"+e:!1}if(vt.js==="Moz"){var s="page"+Ou(e);return s in n?"page-"+e:!1}return!1}},Cfe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(vt.js==="Moz")return e;var r=e.replace("-inline","");return vt.js+Ou(r)in n?vt.css+r:!1}},Sfe={supportedProperty:function(e,n){return LO(e)in n?e:!1}},Afe={supportedProperty:function(e,n){var r=Ou(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:vt.js+r in n?vt.css+e:vt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},Ife={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:vt.js==="ms"?""+vt.css+e:e}},Nfe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:vt.js==="ms"?vt.css+"scroll-chaining":e}},xfe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Tfe={supportedProperty:function(e,n){var r=xfe[e];return r&&vt.js+Ou(r)in n?vt.css+r:!1}},R7={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Rfe=Object.keys(R7),Pfe=function(e){return vt.css+e},Ofe={supportedProperty:function(e,n,r){var s=r.multiple;if(Rfe.indexOf(e)>-1){var i=R7[e];if(!Array.isArray(i))return vt.js+Ou(i)in n?vt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(vt.js+Ou(i[0])in n))return!1;return i.map(Pfe)}return!1}},P7=[hfe,ffe,mfe,yfe,wfe,bfe,vfe,Efe,_fe,Cfe,Sfe,Afe,Ife,Nfe,Tfe,Ofe],w$=P7.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),kfe=P7.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,afe(e.noPrefill)),t},[]),Lm,pd={};if(Pg){Lm=document.createElement("p");var oA=window.getComputedStyle(document.documentElement,"");for(var aA in oA)isNaN(aA)||(pd[oA[aA]]=oA[aA]);kfe.forEach(function(t){return delete pd[t]})}function Yx(t,e){if(e===void 0&&(e={}),!Lm)return t;if(pd[t]!=null)return pd[t];(t==="transition"||t==="transform")&&(e[t]=t in Lm.style);for(var n=0;n<w$.length&&(pd[t]=w$[n](t,Lm.style,e),!pd[t]);n++);try{Lm.style[t]=""}catch{return!1}return pd[t]}var af={},Dfe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},$fe=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Sl;function Mfe(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?Yx(e):", "+Yx(n);return r||e||n}Pg&&(Sl=document.createElement("p"));function b$(t,e){var n=e;if(!Sl||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(af[r]!=null)return af[r];try{Sl.style[t]=n}catch{return af[r]=!1,!1}if(Dfe[t])n=n.replace($fe,Mfe);else if(Sl.style[t]===""&&(n=vt.css+n,n==="-ms-flex"&&(Sl.style[t]="-ms-flexbox"),Sl.style[t]=n,Sl.style[t]===""))return af[r]=!1,!1;return Sl.style[t]="",af[r]=n,af[r]}function Lfe(){function t(s){if(s.type==="keyframes"){var i=s;i.at=dfe(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=Yx(i);c&&c!==i&&(a=!0);var l=!1,u=b$(c,qd(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return b$(i,qd(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function Ufe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var Bfe=function(e){return e===void 0&&(e={}),{plugins:[Ahe(),Nhe(e.observable),Phe(),Lhe(),jhe(),zhe(),Hhe(),Khe(),Zhe(e.defaultUnit),nfe(),Lfe(),Ufe()]}},jfe=Number.MIN_SAFE_INTEGER||-1e9,Ffe=function(){return jfe++},Wfe=O.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Pg}),v$=new Map,UO=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new p$),r[n];var s=v$.get(n);return s||(s=new p$,v$.set(n,s)),s},E$=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=UO(r,s);o.manage(i),r.registry&&r.registry.add(n)}},zfe=function(e){if(e.sheet){var n=UO(e.context,e.index);n.unmanage(e.theme)}},Hfe=v7(Bfe()),O7=new WeakMap,k7=function(e){return O7.get(e)},qfe=function(e,n){O7.set(e,n)},Vfe=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function Gfe(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Hn({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Kfe=function(e){if(!e.context.disableStylesGeneration){var n=UO(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||Hfe,i=Vfe(e),o=E7(i),a=s.createStyleSheet(i,Gfe(e,o!==null));return qfe(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Yfe=function(e,n){for(var r in n)e.deleteRule(n[r])},Qfe=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},Zfe=function(e,n){var r=k7(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},Xfe=function(e,n){if(!n)return e.classes;var r=k7(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function _$(t){return t?O.useEffect:ki.useInsertionEffect||O.useLayoutEffect}var cA={},ua=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?Ffe():s,o=r.theming,a=r.name,c=c7(r,["index","theming","name"]),l=o&&o.context||p7,u=function(f){return typeof e=="function"&&(f||O.useContext(l))||cA},d={};return function(f){var p=O.useRef(!0),g=O.useContext(Wfe),w=u(f&&f.theme),y=O.useMemo(function(){var C=Kfe({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return C&&g.isSSR&&E$({index:i,context:g,sheet:C,theme:w}),[C,C?Zfe(C,f):null]},[g,w]),b=y[0],E=y[1];_$(g.isSSR)(function(){b&&E&&!p.current&&Qfe(f,b,E)},[f]),_$(g.isSSR)(function(){return b&&E$({index:i,context:g,sheet:b,theme:w}),function(){b&&(zfe({index:i,context:g,sheet:b,theme:w}),E&&Yfe(b,E))}},[b]);var _=O.useMemo(function(){return b&&E?Xfe(b,E):d},[b,E]);return O.useDebugValue(_),O.useDebugValue(w===cA?"No theme":w),O.useEffect(function(){p.current=!1}),_}};const Jfe=ua({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function lA({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=Jfe(),d=O.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(k0,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const epe=ua({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function to({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=epe({isOpen:e}),u=O.useRef(null),d=()=>{r&&r(t)};return m.jsx(k0,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const uA=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],tpe=80,npe=80,rpe=10,spe=10,ipe=10,ope=10,ape=({onIconClick:t})=>{const e=uA.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:ipe+d*(tpe+rpe),y:ope+u*(npe+spe)},u++,u>=4&&(u=0,d++)}),l},[r,s]=O.useState(n()),[i,o]=O.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(lA,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(to,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:uA.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(lA,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(to,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:uA.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(lA,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},cpe=ua({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),lpe=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=O.useState(!1),[o,a]=O.useState(new Date),c=cpe({isOpen:s});O.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function D7(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function BO(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function $7(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function jO(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function M7(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function L7(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function upe(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const dpe=ua({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),hpe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=dpe({isOpen:t}),i=O.useRef(null),[o,a]=O.useState([]),[c,l]=O.useState(!1),[u,d]=O.useState(!1),[h,f]=O.useState({}),[p,g]=O.useState(null),{data:w}=k9();O.useEffect(()=>{t&&r&&y()},[t,r]);const y=async()=>{l(!0),g(null);try{const I=await D7(r);a(I);const A={};I.forEach(x=>{A[x.id]=0}),f(A)}catch(I){g(I.message)}finally{l(!1)}},b=(I,A)=>{f(x=>({...x,[I]:Math.max(0,A)}))},E=async()=>{const I=Object.entries(h).filter(([,A])=>A>0).map(([A,x])=>({id:A,quantity:x}));if(I.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const A=await $7(r,I);if(console.log("Mint API result:",A),A.success&&A.mintTransaction){console.log("Got mint transaction:",A.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const x=await w.sendTransaction({to:A.mintTransaction.to,value:BigInt(A.mintTransaction.value),data:A.mintTransaction.data});console.log("Transaction sent successfully:",x),alert(`NFT Minted Successfully: Transaction Hash - ${x}`),e()}catch(x){console.error("Transaction sending failed:",x),g("Transaction failed: "+x.message)}}else throw new Error(A.message||"Could not retrieve minting transaction.")}catch(A){console.error("Minting failed:",A),g("Minting failed: "+A.message)}finally{d(!1)}},_=(I,A)=>`${parseFloat(I)} ${A}`,C=()=>{n&&n()};return t?m.jsx(k0,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:C,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(I=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:I.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",_(I.token_price,I.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",I.wallet_limit===4294967295?"Unlimited":I.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:I.wallet_limit===4294967295?999:I.wallet_limit,value:h[I.id]||0,onChange:A=>b(I.id,parseInt(A.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},I.id))]}),m.jsx("button",{onClick:()=>void E(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},fpe=ua({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),ppe=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},gpe=({nft:t,onClose:e})=>{const n=fpe(),r=O.useRef(null),s=ppe(t.attributes);return m.jsx(k0,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},mpe=Symbol(),C$=Object.getPrototypeOf,Qx=new WeakMap,ype=t=>t&&(Qx.has(t)?Qx.get(t):C$(t)===Object.prototype||C$(t)===Array.prototype),wpe=t=>ype(t)&&t[mpe]||null,S$=(t,e=!0)=>{Qx.set(t,e)},i_={},dA=t=>typeof t=="object"&&t!==null,Tl=new WeakMap,Um=new WeakSet,bpe=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>dA(l)&&!Um.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return S$(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:w,configurable:!0};if(Um.has(g))S$(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(Tl.has(g)){const[b,E]=Tl.get(g);y.value=i(b,E(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!dA(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,D=++a[0])=>{d!==D&&(d=D,h.forEach(P=>P(S,D)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,y.forEach(([D])=>{const P=D[1](S);P>d&&(d=P)})),d),w=S=>(D,P)=>{const U=[...D];U[1]=[S,...U[1]],f(U,P)},y=new Map,b=(S,D)=>{if((i_?"production":void 0)!=="production"&&y.has(S))throw new Error("prop listener already exists");if(h.size){const P=D[3](w(S));y.set(S,[D,P])}else y.set(S,[D])},E=S=>{var D;const P=y.get(S);P&&(y.delete(S),(D=P[1])==null||D.call(P))},_=S=>(h.add(S),h.size===1&&y.forEach(([P,U],q)=>{if((i_?"production":void 0)!=="production"&&U)throw new Error("remove already exists");const j=P[3](w(q));y.set(q,[P,j])}),()=>{h.delete(S),h.size===0&&y.forEach(([P,U],q)=>{U&&(U(),y.set(q,[P]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),A=e(C,{deleteProperty(S,D){const P=Reflect.get(S,D);E(D);const U=Reflect.deleteProperty(S,D);return U&&f(["delete",[D],P]),U},set(S,D,P,U){const q=Reflect.has(S,D),j=Reflect.get(S,D,U);if(q&&(t(j,P)||o.has(P)&&t(j,o.get(P))))return!0;E(D),dA(P)&&(P=wpe(P)||P);let T=P;if(P instanceof Promise)P.then(N=>{P.status="fulfilled",P.value=N,f(["resolve",[D],N])}).catch(N=>{P.status="rejected",P.reason=N,f(["reject",[D],N])});else{!Tl.has(P)&&n(P)&&(T=c(P));const N=!Um.has(T)&&Tl.get(T);N&&b(D,N)}return Reflect.set(S,D,T,U),f(["set",[D],P,j]),!0}});o.set(l,A);const x=[C,g,i,_];return Tl.set(A,x),Reflect.ownKeys(l).forEach(S=>{const D=Object.getOwnPropertyDescriptor(l,S);"value"in D&&(A[S]=l[S],delete D.value,delete D.writable),Object.defineProperty(C,S,D)}),A})=>[c,Tl,Um,t,e,n,r,s,i,o,a],[vpe]=bpe();function Dn(t={}){return vpe(t)}function ms(t,e,n){const r=Tl.get(t);(i_?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Iw(t,e){const n=Tl.get(t);(i_?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function ph(t){return Um.add(t),t}function ws(t,e,n,r){let s=t[e];return ms(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function Epe(t){const e=Dn({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var A$={};const ke={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof A$<"u"?A$.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},U7={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ke.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var _pe=20,Cpe=1,gh=1e6,I$=1e6,Spe=-7,Ape=21,Ipe=!1,D0="[big.js] ",Lh=D0+"Invalid ",qC=Lh+"decimal places",Npe=Lh+"rounding mode",B7=D0+"Division by zero",cn={},za=void 0,xpe=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function j7(){function t(e){var n=this;if(!(n instanceof t))return e===za?j7():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Lh+"value");e=e===0&&1/e<0?"-0":String(e)}Tpe(n,e)}n.constructor=t}return t.prototype=cn,t.DP=_pe,t.RM=Cpe,t.NE=Spe,t.PE=Ape,t.strict=Ipe,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Tpe(t,e){var n,r,s;if(!xpe.test(e))throw Error(Lh+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Uh(t,e,n,r){var s=t.c;if(n===za&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(Npe);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==za))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==za||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Bh(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}cn.abs=function(){var t=new this.constructor(this);return t.s=1,t};cn.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};cn.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>gh)throw Error(qC);if(!s[0])throw Error(B7);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,y=t,b=y.c=[],E=0,_=o+(y.e=e.e-t.e)+1;for(y.s=i,i=_<0?0:_,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[E++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==za)&&i--);return!b[0]&&E!=1&&(b.shift(),y.e--,_--),E>_&&Uh(y,_,n.RM,g[0]!==za),y};cn.eq=function(t){return this.cmp(t)===0};cn.gt=function(t){return this.cmp(t)>0};cn.gte=function(t){return this.cmp(t)>-1};cn.lt=function(t){return this.cmp(t)<0};cn.lte=function(t){return this.cmp(t)<1};cn.minus=cn.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};cn.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(B7);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};cn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};cn.plus=cn.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};cn.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-I$||t>I$)throw Error(Lh+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};cn.prec=function(t,e){if(t!==~~t||t<1||t>gh)throw Error(Lh+"precision");return Uh(new this.constructor(this),t,e)};cn.round=function(t,e){if(t===za)t=0;else if(t!==~~t||t<-gh||t>gh)throw Error(qC);return Uh(new this.constructor(this),t+this.e+1,e)};cn.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(D0+"No square root");i=Math.sqrt(+Bh(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Uh(t,(s.DP-=4)+t.e+1,s.RM)};cn.times=cn.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};cn.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==za){if(t!==~~t||t<0||t>gh)throw Error(qC);for(n=Uh(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Bh(n,!0,!!r)};cn.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==za){if(t!==~~t||t<0||t>gh)throw Error(qC);for(n=Uh(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Bh(n,!1,!!r)};cn[Symbol.for("nodejs.util.inspect.custom")]=cn.toJSON=cn.toString=function(){var t=this,e=t.constructor;return Bh(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};cn.toNumber=function(){var t=+Bh(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(D0+"Imprecise conversion");return t};cn.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==za){if(t!==~~t||t<1||t>gh)throw Error(Lh+"precision");for(n=Uh(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Bh(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};cn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(D0+"valueOf disallowed");return Bh(t,t.e<=e.NE||t.e>=e.PE,!0)};var La=j7();const Rpe={bigNumber(t){return t?new La(t):new La(0)},multiply(t,e){if(t===void 0||e===void 0)return new La(0);const n=new La(t),r=new La(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},Ppe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Ope=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],kpe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Dpe={getERC20Abi:t=>ke.USDT_CONTRACT_ADDRESSES.includes(t)?kpe:Ppe,getSwapAbi:()=>Ope},dl={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},yt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function hA(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ft={setItem(t,e){Bm()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Bm())return localStorage.getItem(t)||void 0},removeItem(t){Bm()&&localStorage.removeItem(t)},clear(){Bm()&&localStorage.clear()}};function Bm(){return typeof window<"u"&&typeof localStorage<"u"}function kc(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var N$={};const fA=(typeof process<"u"&&typeof N$<"u"?N$.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",F7=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],$pe="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",pn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:fA,SECURE_SITE_DASHBOARD:`${fA}/dashboard`,SECURE_SITE_FAVICON:`${fA}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},je={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=je.getActiveNamespace(),e=je.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{ft.setItem(yt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ft.getItem(yt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ft.removeItem(yt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ft.setItem(yt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ft.setItem(yt.ACTIVE_CAIP_NETWORK_ID,t),je.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ft.getItem(yt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ft.removeItem(yt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=hA(t);ft.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=je.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ft.setItem(yt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ft.getItem(yt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=hA(t);ft.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ft.getItem(yt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=hA(t);return ft.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{ft.setItem(yt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ft.getItem(yt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ft.removeItem(yt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ft.getItem(yt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=ft.getItem(yt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{ft.setItem(yt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ft.getItem(yt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ft.getItem(yt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ft.setItem(yt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=je.getConnectedNamespaces();e.includes(t)||(e.push(t),je.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=je.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),je.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ft.getItem(yt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ft.setItem(yt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ft.removeItem(yt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ft.getItem(yt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=je.getBalanceCache();ft.setItem(yt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=je.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;je.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=je.getBalanceCache();e[t.caipAddress]=t,ft.setItem(yt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ft.getItem(yt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=je.getBalanceCache();ft.setItem(yt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=je.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),je.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=je.getNativeBalanceCache();e[t.caipAddress]=t,ft.setItem(yt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ft.getItem(yt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=je.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;je.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=je.getEnsCache();e[t.address]=t,ft.setItem(yt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=je.getEnsCache();ft.setItem(yt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ft.getItem(yt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=je.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;je.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=je.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ft.setItem(yt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=je.getIdentityCache();ft.setItem(yt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ft.removeItem(yt.PORTFOLIO_CACHE),ft.removeItem(yt.NATIVE_BALANCE_CACHE),ft.removeItem(yt.ENS_CACHE),ft.removeItem(yt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ft.setItem(yt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ft.getItem(yt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...je.getConnections(),[e]:t};ft.setItem(yt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=ft.getItem(yt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},Qe={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Qe.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=pn.TEN_SEC_MS:!0},isAllowedRetry(t,e=pn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Qe.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+pn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Qe.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Qe.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?je.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Qe.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ke.W3M_API_URL},getBlockchainApiUrl(){return ke.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ke.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?pn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ke.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function fm(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let $0=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await fm(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await fm(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await fm(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await fm(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await fm(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const Mpe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?pn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Qe.isTelegram()){if(Qe.isIos())return t.filter(e=>e!=="google");if(Qe.isMac())return t.filter(e=>e!=="x");if(Qe.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},rt=Dn({features:pn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:pn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),pe={state:rt,subscribeKey(t,e){return ws(rt,t,e)},setOptions(t){Object.assign(rt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...rt.remoteFeatures,...t};rt.remoteFeatures=e,(n=rt.remoteFeatures)!=null&&n.socials&&(rt.remoteFeatures.socials=Mpe.filterSocialsByPlatform(rt.remoteFeatures.socials))},setFeatures(t){if(!t)return;rt.features||(rt.features=pn.DEFAULT_FEATURES);const e={...rt.features,...t};rt.features=e},setProjectId(t){rt.projectId=t},setCustomRpcUrls(t){rt.customRpcUrls=t},setAllWallets(t){rt.allWallets=t},setIncludeWalletIds(t){rt.includeWalletIds=t},setExcludeWalletIds(t){rt.excludeWalletIds=t},setFeaturedWalletIds(t){rt.featuredWalletIds=t},setTokens(t){rt.tokens=t},setTermsConditionsUrl(t){rt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){rt.privacyPolicyUrl=t},setCustomWallets(t){rt.customWallets=t},setIsSiweEnabled(t){rt.isSiweEnabled=t},setIsUniversalProvider(t){rt.isUniversalProvider=t},setSdkVersion(t){rt.sdkVersion=t},setMetadata(t){rt.metadata=t},setDisableAppend(t){rt.disableAppend=t},setEIP6963Enabled(t){rt.enableEIP6963=t},setDebug(t){rt.debug=t},setEnableWalletConnect(t){rt.enableWalletConnect=t},setEnableWalletGuide(t){rt.enableWalletGuide=t},setEnableAuthLogger(t){rt.enableAuthLogger=t},setEnableWallets(t){rt.enableWallets=t},setPreferUniversalLinks(t){rt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){rt.hasMultipleAddresses=t},setSIWX(t){rt.siwx=t},setConnectMethodsOrder(t){rt.features={...rt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){rt.features={...rt.features,walletFeaturesOrder:t}},setSocialsOrder(t){rt.remoteFeatures={...rt.remoteFeatures,socials:t}},setCollapseWallets(t){rt.features={...rt.features,collapseWallets:t}},setEnableEmbedded(t){rt.enableEmbedded=t},setAllowUnsupportedChain(t){rt.allowUnsupportedChain=t},setManualWCControl(t){rt.manualWCControl=t},setEnableNetworkSwitch(t){rt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(rt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){rt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return rt.universalProviderConfigOverride},getSnapshot(){return Iw(rt)}},Lpe=Object.freeze({enabled:!0,events:[]}),Upe=new $0({baseUrl:Qe.getAnalyticsUrl(),clientId:null}),Bpe=5,jpe=60*1e3,hl=Dn({...Lpe}),Fpe={state:hl,subscribeKey(t,e){return ws(hl,t,e)},async sendError(t,e){if(!hl.enabled)return;const n=Date.now();if(hl.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<jpe}).length>=Bpe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};hl.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=pe.state;await Upe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Qe.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){hl.enabled=!0},disable(){hl.enabled=!1},clearEvents(){hl.events=[]}};let Zx=class Xx extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Xx.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Xx):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function x$(t,e){const n=t instanceof Zx?t:new Zx(t instanceof Error?t.message:String(t),e,t);throw Fpe.sendError(n,n.category),n}function qi(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return x$(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return x$(a,e)}},n[r]=i}else n[r]=s}),n}const Ra={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Wpe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Ra.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Ra.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Ra.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Ra.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ke.CHAIN.SOLANA&&t===Ra.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Ra.COINBASE.url}/dapp?cb_url=${r}`)}},wi=Dn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),zpe={state:wi,subscribeNetworkImages(t){return ms(wi.networkImages,()=>t(wi.networkImages))},subscribeKey(t,e){return ws(wi,t,e)},subscribe(t){return ms(wi,()=>t(wi))},setWalletImage(t,e){wi.walletImages[t]=e},setNetworkImage(t,e){wi.networkImages[t]=e},setChainImage(t,e){wi.chainImages[t]=e},setConnectorImage(t,e){wi.connectorImages={...wi.connectorImages,[t]:e}},setTokenImage(t,e){wi.tokenImages[t]=e},setCurrencyImage(t,e){wi.currencyImages[t]=e}},qo=qi(zpe),Hpe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},pA=Dn({networkImagePromises:{}}),W7={async fetchWalletImage(t){if(t)return await Xe._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(pA.networkImagePromises[t]||(pA.networkImagePromises[t]=Xe._fetchNetworkImage(t)),await pA.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return qo.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return qo.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return qo.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return qo.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return qo.state.connectorImages[t.imageId]},getChainImage(t){return qo.state.networkImages[Hpe[t]]}},fl=Dn({message:"",variant:"info",open:!1}),qpe={state:fl,subscribeKey(t,e){return ws(fl,t,e)},open(t,e){const{debug:n}=pe.state,{shortMessage:r,longMessage:s}=t;n&&(fl.message=r,fl.variant=e,fl.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){fl.open=!1,fl.message="",fl.variant="info"}},Ua=qi(qpe),Vpe=Qe.getAnalyticsUrl(),Gpe=new $0({baseUrl:Vpe,clientId:null}),Kpe=["MODAL_CREATED"],lc=Dn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),jn={state:lc,subscribe(t){return ms(lc,()=>t(lc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=pe.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Be.state.address;if(Kpe.includes(t.data.event)||typeof window>"u")return;await Gpe.post({path:"/e",params:jn.getSdkProperties(),body:{eventId:Qe.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),lc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ke.HTTP_STATUS_CODES.FORBIDDEN&&!lc.reportedErrors.FORBIDDEN&&(Ua.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Bm()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),lc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;lc.timestamp=Date.now(),lc.data=t,(e=pe.state.features)!=null&&e.analytics&&jn._sendAnalyticsEvent(lc)}},Ype=Qe.getApiUrl(),Bs=new $0({baseUrl:Ype,clientId:null}),Qpe=40,T$=4,Zpe=20,wt=Dn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Xe={state:wt,subscribeKey(t,e){return ws(wt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=pe.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return pe.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Bs.baseUrl}/getWalletImage/${t}`,n=await Bs.getBlob({path:e,params:Xe._getSdkProperties()});qo.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Bs.baseUrl}/public/getAssetImage/${t}`,n=await Bs.getBlob({path:e,params:Xe._getSdkProperties()});qo.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Bs.baseUrl}/public/getAssetImage/${t}`,n=await Bs.getBlob({path:e,params:Xe._getSdkProperties()});qo.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Bs.baseUrl}/public/getCurrencyImage/${t}`,n=await Bs.getBlob({path:e,params:Xe._getSdkProperties()});qo.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Bs.baseUrl}/public/getTokenImage/${t}`,n=await Bs.getBlob({path:e,params:Xe._getSdkProperties()});qo.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Qe.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Ra.COINBASE.id?!0:L.state.activeChain==="solana"&&(n.id===Ra.SOLFLARE.id||n.id===Ra.PHANTOM.id)):t},async fetchProjectConfig(){return(await Bs.get({path:"/appkit/v1/config",params:Xe._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Bs.get({path:"/projects/v1/origins",params:Xe._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=L.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!W7.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Xe._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Oe.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Xe._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Xe._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Xe._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Xe._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Ra).map(o=>o.id));const r=await Bs.get({path:"/getWallets",params:{...Xe._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Xe._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=pe.state;if(t!=null&&t.length){const e={...Xe._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??T$,include:t},{data:n}=await Xe.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Xe._fetchWalletImage(i))),wt.featured=r,wt.allFeatured=r}},async fetchRecommendedWallets(){try{wt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=pe.state,r=[...e??[],...n??[]].filter(Boolean),s=L.getRequestedCaipNetworkIds().join(","),i={page:1,entries:T$,include:t,exclude:r,chains:s},{data:o,count:a}=await Xe.fetchWallets(i),c=je.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Xe._fetchWalletImage(d))),wt.recommended=o,wt.allRecommended=o,wt.count=a??0}catch{}finally{wt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=pe.state,s=L.getRequestedCaipNetworkIds().join(","),i=[...wt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Qpe,include:e,exclude:i,chains:s},{data:a,count:c}=await Xe.fetchWallets(o),l=a.slice(0,Zpe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Xe._fetchWalletImage(u))),wt.wallets=Qe.uniqueBy([...wt.wallets,...Xe._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),wt.count=c>wt.count?c:wt.count,wt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Xe.fetchWallets(e);n&&n.forEach(r=>{wt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=pe.state,s=L.getRequestedCaipNetworkIds().join(",");wt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Xe.fetchWallets(i);jn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Xe._fetchWalletImage(c)),Qe.wait(300)]),wt.search=Xe._filterOutExtensions(o)},initPromise(t,e){const n=wt.promises[t];return n||(wt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Xe.initPromise("connectorImages",Xe.fetchConnectorImages),e&&Xe.initPromise("featuredWallets",Xe.fetchFeaturedWallets),n&&Xe.initPromise("recommendedWallets",Xe.fetchRecommendedWallets),r&&Xe.initPromise("networkImages",Xe.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=pe.state.features)!=null&&t.analytics&&Xe.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Bs.get({path:"/getAnalyticsConfig",params:Xe._getSdkProperties()});pe.setFeatures({analytics:t})}catch{pe.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){wt.featured=wt.allFeatured,wt.recommended=wt.allRecommended;return}const e=L.getRequestedCaipNetworkIds().join(",");wt.featured=wt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.recommended=wt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.filteredWallets=wt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){wt.filteredWallets=[]},setFilterByNamespace(t){if(!t){wt.featured=wt.allFeatured,wt.recommended=wt.allRecommended;return}const e=L.getRequestedCaipNetworkIds().join(",");wt.featured=wt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.recommended=wt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.filteredWallets=wt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},un=Dn({view:"Connect",history:["Connect"],transactionStack:[]}),Xpe={state:un,subscribeKey(t,e){return ws(un,t,e)},pushTransactionStack(t){un.transactionStack.push(t)},popTransactionStack(t){const e=un.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),St.goBack();break;case"cancel":s==null||s(),St.goBack();break}},push(t,e){t!==un.view&&(un.view=t,un.history.push(t),un.data=e)},reset(t,e){un.view=t,un.history=[t],un.data=e},replace(t,e){un.history.at(-1)===t||(un.view=t,un.history[un.history.length-1]=t,un.data=e)},goBack(){var r;const t=L.state.activeCaipAddress,e=St.state.view==="ConnectingFarcaster",n=!t&&e;if(un.history.length>1){un.history.pop();const[s]=un.history.slice(-1);s&&(t&&s==="Connect"?un.view="Account":un.view=s)}else $r.close();(r=un.data)!=null&&r.wallet&&(un.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Be.setFarcasterUrl(void 0,L.state.activeChain);const a=Oe.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=Iw(pe.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(un.history.length>1){un.history=un.history.slice(0,t+1);const[e]=un.history.slice(-1);e&&(un.view=e)}},goBackOrCloseModal(){St.state.history.length>1?St.goBack():$r.close()}},St=qi(Xpe),uc=Dn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Jx={state:uc,subscribe(t){return ms(uc,()=>t(uc))},setThemeMode(t){uc.themeMode=t;try{const e=Oe.getAuthConnector();if(e){const n=Jx.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:kc(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){uc.themeVariables={...uc.themeVariables,...t};try{const e=Oe.getAuthConnector();if(e){const n=Jx.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:kc(uc.themeVariables,uc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Iw(uc)}},ei=qi(Jx),z7={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ft=Dn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...z7},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Jpe={state:Ft,subscribe(t){return ms(Ft,()=>{t(Ft)})},subscribeKey(t,e){return ws(Ft,t,e)},initialize(t){t.forEach(e=>{const n=je.getConnectedConnectorId(e);n&&Oe.setConnectorId(n,e)})},setActiveConnector(t){t&&(Ft.activeConnector=ph(t))},setConnectors(t){t.filter(s=>!Ft.allConnectors.some(i=>i.id===s.id&&Oe.getConnectorName(i.name)===Oe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Ft.allConnectors.push(ph(s))});const n=Oe.getEnabledNamespaces(),r=Oe.getEnabledConnectors(n);Ft.connectors=Oe.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(Ft.filterByNamespaceMap).forEach(e=>{Ft.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Ft.filterByNamespaceMap[e]=!0}),Oe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Ft.filterByNamespaceMap[t]=e,Oe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Oe.getEnabledNamespaces(),e=Oe.getEnabledConnectors(t),n=Oe.areAllNamespacesEnabled();Ft.connectors=Oe.mergeMultiChainConnectors(e),n?Xe.clearFilterByNamespaces():Xe.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Ft.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Ft.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Ft.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Oe.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ke.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Oe.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ke.CONNECTOR_ID.AUTH){const s=t,i=Iw(pe.state),o=ei.getSnapshot().themeMode,a=ei.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:kc(a,o)}),Oe.setConnectors([t])}else Oe.setConnectors([t])},getAuthConnector(t){var r;const e=t||L.state.activeChain,n=Ft.connectors.find(s=>s.id===ke.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return Ft.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Ft.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Ft.allConnectors.filter(r=>r.chain===L.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=Iw(pe.state),r=ei.getSnapshot().themeMode,s=ei.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:kc(s,r)})},getConnectorsByNamespace(t){const e=Ft.allConnectors.filter(n=>n.chain===t);return Oe.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Oe.getConnector(t.id,t.rdns),n=L.state.activeChain;Wpe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?St.push("ConnectingExternal",{connector:e}):St.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Oe.getConnectorsByNamespace(t):Oe.mergeMultiChainConnectors(Ft.allConnectors)},setFilterByNamespace(t){Ft.filterByNamespace=t,Ft.connectors=Oe.getConnectors(t),Xe.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Ft.activeConnectorIds={...Ft.activeConnectorIds,[e]:t},je.setConnectedConnectorId(e,t))},removeConnectorId(t){Ft.activeConnectorIds={...Ft.activeConnectorIds,[t]:void 0},je.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Ft.activeConnectorIds[t]},isConnected(t){return t?!!Ft.activeConnectorIds[t]:Object.values(Ft.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Ft.activeConnectorIds={...z7}}},Oe=qi(Jpe);var Jp={};const ege="https://secure.walletconnect.org/sdk",tge=(typeof process<"u"&&typeof Jp<"u"?Jp.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||ege,nge=(typeof process<"u"&&typeof Jp<"u"?Jp.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",rge=(typeof process<"u"&&typeof Jp<"u"?Jp.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Le={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Zr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},ld=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),dr=Dn({...ld}),sge={state:dr,subscribeKey(t,e){return ws(dr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Qe.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){dr.message=ld.message,dr.variant=ld.variant,dr.svg=ld.svg,dr.open=ld.open,dr.autoClose=ld.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ld.autoClose}){dr.open?(dr.open=!1,setTimeout(()=>{dr.message=t,dr.variant=n,dr.svg=e,dr.open=!0,dr.autoClose=r},150)):(dr.message=t,dr.variant=n,dr.svg=e,dr.open=!0,dr.autoClose=r)}},Yo=sge,_n=Dn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),ige={state:_n,subscribe(t){return ms(_n,()=>t(_n))},setLastNetworkInView(t){_n.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");_n.loading=!0;try{const s=await it.fetchTransactions({account:t,cursor:_n.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=jm.filterSpamTransactions(s.data),o=jm.filterByConnectedChain(i),a=[..._n.transactions,...o];_n.loading=!1,e==="coinbase"?_n.coinbaseTransactions=jm.groupTransactionsByYearAndMonth(_n.coinbaseTransactions,s.data):(_n.transactions=a,_n.transactionsByYear=jm.groupTransactionsByYearAndMonth(_n.transactionsByYear,o)),_n.empty=a.length===0,_n.next=s.next?s.next:void 0}catch{const i=L.state.activeChain;jn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:pe.state.projectId,cursor:_n.next,isSmartAccount:((r=Be.state.preferredAccountTypes)==null?void 0:r[i])===Zr.ACCOUNT_TYPES.SMART_ACCOUNT}}),Yo.showError("Failed to fetch transactions"),_n.loading=!1,_n.empty=!0,_n.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){_n.next=void 0},resetTransactions(){_n.transactions=[],_n.transactionsByYear={},_n.lastNetworkInView=void 0,_n.loading=!1,_n.empty=!1,_n.next=void 0}},jm=qi(ige,"API_ERROR"),mn=Dn({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Zu;const oge={state:mn,subscribeKey(t,e){return ws(mn,t,e)},_getClient(){return mn._client},setClient(t){mn._client=ph(t)},async connectWalletConnect(){var t,e,n,r;if(Qe.isTelegram()||Qe.isSafari()&&Qe.isIos()){if(Zu){await Zu,Zu=void 0;return}if(!Qe.isPairingExpired(mn==null?void 0:mn.wcPairingExpiry)){const s=mn.wcUri;mn.wcUri=s;return}Zu=(e=(t=ot._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),ot.state.status="connecting",await Zu,Zu=void 0,mn.wcPairingExpiry=void 0,ot.state.status="connected"}else await((r=(n=ot._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=ot._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&L.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=ot._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||L.state.activeChain;e&&Oe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;$r.setLoading(!0,L.state.activeChain);const n=Oe.getAuthConnector();n&&(Be.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),je.setPreferredAccountTypes(Be.state.preferredAccountTypes??{[e]:t}),await ot.reconnectExternal(n),$r.setLoading(!1,L.state.activeChain),jn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ot._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ot._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ot._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ot._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ot._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ot._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ot._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ot._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ot._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ot._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ot._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ot._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){mn.wcUri=void 0,mn.wcPairingExpiry=void 0,mn.wcLinking=void 0,mn.recentWallet=void 0,mn.status="disconnected",jm.resetTransactions(),je.deleteWalletConnectDeepLink()},resetUri(){mn.wcUri=void 0,mn.wcPairingExpiry=void 0,Zu=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=ot.state;t&&je.setWalletConnectDeepLink(t),e&&je.setAppKitRecent(e),jn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=St.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){mn.wcBasic=t},setUri(t){mn.wcUri=t,mn.wcPairingExpiry=Qe.getPairingExpiry()},setWcLinking(t){mn.wcLinking=t},setWcError(t){mn.wcError=t,mn.buffering=!1},setRecentWallet(t){mn.recentWallet=t},setBuffering(t){mn.buffering=t},setStatus(t){mn.status=t},async disconnect(t){var e;try{await((e=ot._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new Zx("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){mn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(Oe.state.activeConnectorIds[n]===t.connectorId){const i=L.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Be.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=Oe.getConnector(t.connectorId);i?ot.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},ot=qi(oge),cf=Dn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Ha={state:cf,subscribe(t){return ms(cf,()=>t(cf))},subscribeOpen(t){return ws(cf,"open",t)},set(t){Object.assign(cf,{...cf,...t})}},gA={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Oh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},R$={async getMyTokensWithBalance(t){const e=Be.state.address,n=L.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await it.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=gA.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ot.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ot.walletGetAssets({account:t,chainFilter:[s]});return gA.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>gA.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:L.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},sn=Dn({tokenBalances:[],loading:!1}),age={state:sn,subscribe(t){return ms(sn,()=>t(sn))},subscribeKey(t,e){return ws(sn,t,e)},setToken(t){t&&(sn.token=ph(t))},setTokenAmount(t){sn.sendTokenAmount=t},setReceiverAddress(t){sn.receiverAddress=t},setReceiverProfileImageUrl(t){sn.receiverProfileImageUrl=t},setReceiverProfileName(t){sn.receiverProfileName=t},setNetworkBalanceInUsd(t){sn.networkBalanceInUSD=t},setLoading(t){sn.loading=t},async sendToken(){var t;try{switch(Qt.setLoading(!0),(t=L.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Qt.sendEvmToken();return;case"solana":await Qt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Qt.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=L.state.activeChain,e=(n=Be.state.preferredAccountTypes)==null?void 0:n[t];if(!Qt.state.sendTokenAmount||!Qt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Qt.state.token)throw new Error("A token is required");(r=Qt.state.token)!=null&&r.address?(jn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Qt.state.token.address,amount:Qt.state.sendTokenAmount,network:((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Qt.sendERC20Token({receiverAddress:Qt.state.receiverAddress,tokenAddress:Qt.state.token.address,sendTokenAmount:Qt.state.sendTokenAmount,decimals:Qt.state.token.quantity.decimals})):(jn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Qt.state.token.symbol||"",amount:Qt.state.sendTokenAmount,network:((i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await Qt.sendNativeToken({receiverAddress:Qt.state.receiverAddress,sendTokenAmount:Qt.state.sendTokenAmount,decimals:Qt.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;sn.loading=!0;const e=(i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=L.state.activeCaipAddress,s=r?Qe.getPlainAddress(r):void 0;if(sn.lastRetry&&!Qe.isAllowedRetry(sn.lastRetry,30*pn.ONE_SEC_MS))return sn.loading=!1,[];try{if(s&&e&&n){const a=await R$.getMyTokensWithBalance();return sn.tokenBalances=a,sn.lastRetry=void 0,a}}catch(a){sn.lastRetry=Date.now(),t==null||t(a),Yo.showError("Token Balance Unavailable")}finally{sn.loading=!1}return[]},fetchNetworkBalance(){if(sn.tokenBalances.length===0)return;const t=R$.mapBalancesToSwapTokens(sn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===L.getActiveNetworkTokenAddress());e&&(sn.networkBalanceInUSD=e?Rpe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;St.pushTransactionStack({});const e=t.receiverAddress,n=Be.state.address,r=ot.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ot.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),jn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Be.state.preferredAccountTypes)==null?void 0:i.eip155)===Zr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=Qt.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=ot._getClient())==null||c.updateBalance("eip155"),Qt.resetSend()},async sendERC20Token(t){St.pushTransactionStack({onSuccess(){St.replace("Account")}});const e=ot.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Be.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Qe.getPlainAddress(t.tokenAddress);await ot.writeContract({fromAddress:Be.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Dpe.getERC20Abi(n),chainNamespace:"eip155"}),Qt.resetSend()}},async sendSolanaToken(){var t;if(!Qt.state.sendTokenAmount||!Qt.state.receiverAddress)throw new Error("An amount and receiver address are required");St.pushTransactionStack({onSuccess(){St.replace("Account")}}),await ot.sendTransaction({chainNamespace:"solana",to:Qt.state.receiverAddress,value:Qt.state.sendTokenAmount}),(t=ot._getClient())==null||t.updateBalance("solana"),Qt.resetSend()},resetSend(){sn.token=void 0,sn.sendTokenAmount=void 0,sn.receiverAddress=void 0,sn.receiverProfileImageUrl=void 0,sn.receiverProfileName=void 0,sn.loading=!1,sn.tokenBalances=[]}},Qt=qi(age),mA={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Gb={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ie=Dn({chains:Epe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),cge={state:Ie,subscribe(t){return ms(Ie,()=>{t(Ie)})},subscribeKey(t,e){return ws(Ie,t,e)},subscribeChainProp(t,e,n){let r;return ms(Ie.chains,()=>{var i;const s=n||Ie.activeChain;if(s){const o=(i=Ie.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=je.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=pe.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Ie.noAdapters=!0),Ie.noAdapters||(Ie.activeChain=a==null?void 0:a.namespace,Ie.activeCaipNetwork=i,L.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Ie.activeChain&&Ha.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);L.state.chains.set(u,{namespace:u,networkState:Dn({...Gb,caipNetwork:d==null?void 0:d[0]}),accountState:Dn(mA),caipNetworks:d??[],...n}),L.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Ie.activeChain===t){const r=Array.from(Ie.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&L.setActiveCaipNetwork(s)}}Ie.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Ie.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Gb,caipNetwork:r[0]},accountState:mA,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),L.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Ie.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Ie.chains.set(t.chainNamespace,{...e,caipNetworks:r}),L.setRequestedCaipNetworks(r,t.chainNamespace),Oe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Ie.chains.get(t);if(n){const o=((r=Ie.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&L.setActiveCaipNetwork(n.caipNetworks[0]),Ie.chains.set(t,{...n,caipNetworks:a}),L.setRequestedCaipNetworks(a||[],t),a.length===0&&Oe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Ie.chains.get(t);n&&(n.networkState={...n.networkState||Gb,...e},Ie.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Ie.chains.get(t);if(r){const s={...r.accountState||mA,...e};Ie.chains.set(t,{...r,accountState:s}),(Ie.chains.size===1||Ie.activeChain===t)&&(e.caipAddress&&(Ie.activeCaipAddress=e.caipAddress),Be.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Ie.chains.get(t);if(n){const r={...n.networkState||Gb,...e};Ie.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){L.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Oe.removeConnectorId(n)},setActiveNamespace(t){var r,s;Ie.activeChain=t;const e=t?Ie.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Ie.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Ie.activeCaipNetwork=n,L.setChainNetworkData(t,{caipNetwork:n}),je.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Ha.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Ie.activeChain!==t.chainNamespace&&L.setIsSwitchingNamespace(!0);const e=Ie.chains.get(t.chainNamespace);Ie.activeChain=t.chainNamespace,Ie.activeCaipNetwork=t,L.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Ie.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Ie.activeCaipAddress=void 0,L.setAccountProp("caipAddress",Ie.activeCaipAddress,t.chainNamespace),e&&Be.replaceState(e.accountState),Qt.resetSend(),Ha.set({activeChain:Ie.activeChain,selectedNetworkId:(i=Ie.activeCaipNetwork)==null?void 0:i.caipNetworkId}),je.setActiveCaipNetworkId(t.caipNetworkId),!L.checkIfSupportedNetwork(t.chainNamespace)&&pe.state.enableNetworkSwitch&&!pe.state.allowUnsupportedChain&&!ot.state.wcBasic&&L.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Ie.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==L.state.activeChain,n=(s=L.getNetworkData(t))==null?void 0:s.caipNetwork,r=L.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await L.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=L.state.chains.get(L.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Ie.activeCaipNetwork)==null?void 0:o.id)})),r=L.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&$r.close()}catch{St.goBack()}jn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Ie.activeChain,n=Ie.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Ie.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Ie.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Ie.activeChain;if(e&&(n=e),!n)return;const r=(s=Ie.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Ie.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Ie.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Qe.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Ie.chains.forEach(e=>{const n=L.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){L.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=L.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Oe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ie.chains.forEach(e=>{const n=L.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Ie.activeCaipNetwork},getActiveCaipAddress(){return Ie.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Ie.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=L.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());L.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Ie.activeCaipNetwork,r=L.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Ie.activeChain)return!0;const e=L.getRequestedCaipNetworks(Ie.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){L.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=U7.caipNetworkIdToNumber((r=Ie.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Ie.activeChain;if(!e||!t)return!1;const n=L.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=Ie.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Ie.activeCaipNetwork)==null?void 0:s.id)||1,n=pn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){$r.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ie.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&pn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){L.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Ie.activeCaipAddress=void 0,L.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Oe.removeConnectorId(e)},setIsSwitchingNamespace(t){Ie.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Ie.chains.forEach(s=>{ke.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Ie.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=L.state.chains.get(t))==null?void 0:e.accountState:Be.state},getNetworkData(t){var n;const e=t||Ie.activeChain;if(e)return(n=L.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=L.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Oe.state.filterByNamespace;return(t?[Ie.chains.get(t)]:Array.from(Ie.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?L.getRequestedCaipNetworks(t):L.getAllRequestedCaipNetworks()}},L=qi(cge),lge={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},H7=Qe.getBlockchainApiUrl(),js=Dn({clientId:null,api:new $0({baseUrl:H7,clientId:null}),supportedChains:{http:[],ws:[]}}),it={state:js,async get(t){const{st:e,sv:n}=it.getSdkProperties(),r=pe.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return js.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=pe.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{js.supportedChains.http.length||await it.getSupportedNetworks()}catch{return!1}return js.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await it.get({path:"v1/supported-chains"});return js.supportedChains=t,t}catch{return js.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await it.isNetworkSupported(e))return{avatar:"",name:""};const r=je.getIdentityFromCacheForAddress(t);if(r)return r;const s=await it.get({path:`/v1/identity/${t}`,params:{sender:L.state.activeCaipAddress?Qe.getPlainAddress(L.state.activeCaipAddress):void 0}});return je.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await it.isNetworkSupported((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?it.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await it.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?it.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await it.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await it.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?js.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:pe.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await it.isNetworkSupported((r=L.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?it.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=it.getSdkProperties();if(!await it.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return it.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await it.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return js.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:pn.CONVERT_SLIPPAGE_TOLERANCE},projectId:pe.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=it.getSdkProperties();if(!await it.isNetworkSupported((o=L.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return it.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=it.getSdkProperties();if(!await it.isNetworkSupported((l=L.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Yo.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=je.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await it.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return je.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await it.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await it.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/profile/reverse/${t}`,params:{sender:Be.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await it.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await it.isNetworkSupported((i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?js.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await it.isNetworkSupported((a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await js.api.post({path:"/v1/generators/onrampurl",params:{projectId:pe.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await it.isNetworkSupported((e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await it.get({path:"/v1/onramp/options"})}catch{return lge}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await it.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await js.api.post({path:"/v1/onramp/quote",params:{projectId:pe.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await it.isNetworkSupported((n=L.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await it.isNetworkSupported((s=L.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?js.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:pe.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){js.clientId=t,js.api=new $0({baseUrl:H7,clientId:t})}},Ki=Dn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),uge={state:Ki,replaceState(t){t&&Object.assign(Ki,ph(t))},subscribe(t){return L.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return L.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){L.setAccountProp("status",t,e)},getCaipAddress(t){return L.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Qe.getPlainAddress(t):void 0;e===L.state.activeChain&&(L.state.activeCaipAddress=t),L.setAccountProp("caipAddress",t,e),L.setAccountProp("address",n,e)},setBalance(t,e,n){L.setAccountProp("balance",t,n),L.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){L.setAccountProp("profileName",t,e)},setProfileImage(t,e){L.setAccountProp("profileImage",t,e)},setUser(t,e){L.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){L.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){L.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){L.setAccountProp("currentTab",t,L.state.activeChain)},setTokenBalance(t,e){t&&L.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){L.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){L.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=L.getAccountProp("addressLabels",n)||new Map;r.set(t,e),L.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=L.getAccountProp("addressLabels",e)||new Map;n.delete(t),L.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){L.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){L.setAccountProp("preferredAccountTypes",{...Ki.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Ki.preferredAccountTypes=t},setSocialProvider(t,e){t&&L.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){L.setAccountProp("socialWindow",t?ph(t):void 0,e)},setFarcasterUrl(t,e){L.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Ki.balanceLoading=!0;const e=(i=L.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=L.state.activeCaipAddress,s=r?Qe.getPlainAddress(r):void 0;if(Ki.lastRetry&&!Qe.isAllowedRetry(Ki.lastRetry,30*pn.ONE_SEC_MS))return Ki.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await it.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Be.setTokenBalance(c,n),Ki.lastRetry=void 0,Ki.balanceLoading=!1,c}}catch(a){Ki.lastRetry=Date.now(),t==null||t(a),Yo.showError("Token Balance Unavailable")}finally{Ki.balanceLoading=!1}return[]},resetAccount(t){L.resetAccount(t)}},Be=qi(uge),dge={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=L.state.activeCaipNetwork,r=St.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Be.getCaipAddress(L.state.activeChain),o=t.chainNamespace!==L.state.activeChain,a=Be.getCaipAddress(t.chainNamespace),l=Oe.getConnectorId(L.state.activeChain)===ke.CONNECTOR_ID.AUTH,u=ke.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?St.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?St.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):St.push("SwitchNetwork",{...r,network:t})}},Fs=Dn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),hge={state:Fs,subscribe(t){return ms(Fs,()=>t(Fs))},subscribeKey(t,e){return ws(Fs,t,e)},async open(t){var o,a;const e=Be.state.status==="connected",n=t==null?void 0:t.namespace,r=L.state.activeChain,s=n&&n!==r,i=(o=L.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(ot.state.wcBasic?Xe.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Xe.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Oe.setFilterByNamespace(t==null?void 0:t.namespace),$r.setLoading(!0,n),n&&s){const c=((a=L.getNetworkData(n))==null?void 0:a.caipNetwork)||L.getRequestedCaipNetworks(n)[0];c&&dge.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=L.state.noAdapters;pe.state.manualWCControl||c&&!i?Qe.isMobile()?St.reset("AllWallets"):St.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?St.reset(t.view,t.data):i?St.reset("Account"):St.reset("Connect")}Fs.open=!0,Ha.set({open:!0}),jn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=pe.state.enableEmbedded,e=!!L.state.activeCaipAddress;Fs.open&&jn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Fs.open=!1,St.reset("Connect"),$r.clearLoading(),t?e?St.replace("Account"):St.push("Connect"):Ha.set({open:!1}),ot.resetUri()},setLoading(t,e){e&&Fs.loadingNamespaceMap.set(e,t),Fs.loading=t,Ha.set({loading:t})},clearLoading(){Fs.loadingNamespaceMap.clear(),Fs.loading=!1},shake(){Fs.shake||(Fs.shake=!0,setTimeout(()=>{Fs.shake=!1},500))}},$r=qi(hge),gy={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},eT={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},fge={providers:F7,selectedProvider:null,error:null,purchaseCurrency:gy,paymentCurrency:eT,purchaseCurrencies:[gy],paymentCurrencies:[],quotesLoading:!1},Ut=Dn(fge),pge={state:Ut,subscribe(t){return ms(Ut,()=>t(Ut))},subscribeKey(t,e){return ws(Ut,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=L.state.activeChain===ke.CHAIN.SOLANA?"SOL":"USDC",n=Be.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",$pe),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",pe.state.projectId),Ut.selectedProvider={...t,url:r.toString()}}else Ut.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=F7.filter(r=>e.includes(r.name));Ut.providers=n}else Ut.providers=[]},setPurchaseCurrency(t){Ut.purchaseCurrency=t},setPaymentCurrency(t){Ut.paymentCurrency=t},setPurchaseAmount(t){tT.state.purchaseAmount=t},setPaymentAmount(t){tT.state.paymentAmount=t},async getAvailableCurrencies(){const t=await it.getOnrampOptions();Ut.purchaseCurrencies=t.purchaseCurrencies,Ut.paymentCurrencies=t.paymentCurrencies,Ut.paymentCurrency=t.paymentCurrencies[0]||eT,Ut.purchaseCurrency=t.purchaseCurrencies[0]||gy,await Xe.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Xe.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;Ut.quotesLoading=!0;try{const n=await it.getOnrampQuote({purchaseCurrency:Ut.purchaseCurrency,paymentCurrency:Ut.paymentCurrency,amount:((t=Ut.paymentAmount)==null?void 0:t.toString())||"0",network:(e=Ut.purchaseCurrency)==null?void 0:e.symbol});return Ut.quotesLoading=!1,Ut.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return Ut.error=n.message,Ut.quotesLoading=!1,null}finally{Ut.quotesLoading=!1}},resetState(){Ut.selectedProvider=null,Ut.error=null,Ut.purchaseCurrency=gy,Ut.paymentCurrency=eT,Ut.purchaseCurrencies=[gy],Ut.paymentCurrencies=[],Ut.paymentAmount=void 0,Ut.purchaseAmount=void 0,Ut.quotesLoading=!1}},tT=qi(pge),P$=2147483648,gge={convertEVMChainIdToCoinType(t){if(t>=P$)throw new Error("Invalid chainId");return(P$|t)>>>0}},Yi=Dn({suggestions:[],loading:!1}),mge={state:Yi,subscribe(t){return ms(Yi,()=>t(Yi))},subscribeKey(t,e){return ws(Yi,t,e)},async resolveName(t){var e,n;try{return await it.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await it.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Yi.loading=!0,Yi.suggestions=[];const e=await it.getEnsNameSuggestions(t);return Yi.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Yi.suggestions}catch(e){const n=my.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Yi.loading=!1}},async getNamesForAddress(t){try{if(!L.state.activeCaipNetwork)return[];const n=je.getEnsFromCacheForAddress(t);if(n)return n;const r=await it.reverseLookupEnsName({address:t});return je.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=my.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=L.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Be.state.address,r=Oe.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Yi.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});St.pushTransactionStack({onCancel(){St.replace("RegisterAccountName")}});const i=await ot.signMessage(s);Yi.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=gge.convertEVMChainIdToCoinType(Number(o));await it.registerEnsName({coinType:a,address:n,signature:i,message:s}),Be.setProfileName(t,e.chainNamespace),St.replace("RegisterAccountNameSuccess")}catch(s){const i=my.parseEnsApiError(s,`Error registering name ${t}`);throw St.replace("RegisterAccountName"),new Error(i)}finally{Yi.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},my=qi(mge);var FO={exports:{}},fp=typeof Reflect=="object"?Reflect:null,O$=fp&&typeof fp.apply=="function"?fp.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},jv;fp&&typeof fp.ownKeys=="function"?jv=fp.ownKeys:Object.getOwnPropertySymbols?jv=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:jv=function(e){return Object.getOwnPropertyNames(e)};function yge(t){console&&console.warn&&console.warn(t)}var q7=Number.isNaN||function(e){return e!==e};function gn(){gn.init.call(this)}FO.exports=gn;FO.exports.once=Ege;gn.EventEmitter=gn;gn.prototype._events=void 0;gn.prototype._eventsCount=0;gn.prototype._maxListeners=void 0;var k$=10;function VC(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(gn,"defaultMaxListeners",{enumerable:!0,get:function(){return k$},set:function(t){if(typeof t!="number"||t<0||q7(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");k$=t}});gn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};gn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||q7(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function V7(t){return t._maxListeners===void 0?gn.defaultMaxListeners:t._maxListeners}gn.prototype.getMaxListeners=function(){return V7(this)};gn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")O$(c,this,n);else for(var l=c.length,u=Z7(c,l),r=0;r<l;++r)O$(u[r],this,n);return!0};function G7(t,e,n,r){var s,i,o;if(VC(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=V7(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,yge(a)}return t}gn.prototype.addListener=function(e,n){return G7(this,e,n,!1)};gn.prototype.on=gn.prototype.addListener;gn.prototype.prependListener=function(e,n){return G7(this,e,n,!0)};function wge(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function K7(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=wge.bind(r);return s.listener=n,r.wrapFn=s,s}gn.prototype.once=function(e,n){return VC(n),this.on(e,K7(this,e,n)),this};gn.prototype.prependOnceListener=function(e,n){return VC(n),this.prependListener(e,K7(this,e,n)),this};gn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(VC(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():bge(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};gn.prototype.off=gn.prototype.removeListener;gn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function Y7(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?vge(s):Z7(s,s.length)}gn.prototype.listeners=function(e){return Y7(this,e,!0)};gn.prototype.rawListeners=function(e){return Y7(this,e,!1)};gn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Q7.call(t,e)};gn.prototype.listenerCount=Q7;function Q7(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}gn.prototype.eventNames=function(){return this._eventsCount>0?jv(this._events):[]};function Z7(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function bge(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function vge(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Ege(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}X7(t,e,i,{once:!0}),e!=="error"&&_ge(t,s,{once:!0})})}function _ge(t,e,n){typeof t.on=="function"&&X7(t,"error",e,n)}function X7(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var So=FO.exports;const WO=Nh(So);var be={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var nT=function(t,e){return nT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},nT(t,e)};function Cge(t,e){nT(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var rT=function(){return rT=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},rT.apply(this,arguments)};function Sge(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Age(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function Ige(t,e){return function(n,r){e(n,r,t)}}function Nge(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function xge(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Tge(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Rge(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Pge(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function sT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function J7(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Oge(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(J7(arguments[e]));return t}function kge(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function Nw(t){return this instanceof Nw?(this.v=t,this):new Nw(t)}function Dge(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof Nw?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function $ge(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Nw(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Mge(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof sT=="function"?sT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Lge(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Uge(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Bge(t){return t&&t.__esModule?t:{default:t}}function jge(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Fge(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Wge=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return rT},__asyncDelegator:$ge,__asyncGenerator:Dge,__asyncValues:Mge,__await:Nw,__awaiter:xge,__classPrivateFieldGet:jge,__classPrivateFieldSet:Fge,__createBinding:Rge,__decorate:Age,__exportStar:Pge,__extends:Cge,__generator:Tge,__importDefault:Bge,__importStar:Uge,__makeTemplateObject:Lge,__metadata:Nge,__param:Ige,__read:J7,__rest:Sge,__spread:Oge,__spreadArrays:kge,__values:sT},Symbol.toStringTag,{value:"Module"})),GC=OU(Wge);var yA={},pm={},D$;function zge(){if(D$)return pm;D$=1,Object.defineProperty(pm,"__esModule",{value:!0}),pm.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return pm.delay=t,pm}var Xu={},wA={},Ju={},$$;function Hge(){return $$||($$=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.ONE_THOUSAND=Ju.ONE_HUNDRED=void 0,Ju.ONE_HUNDRED=100,Ju.ONE_THOUSAND=1e3),Ju}var bA={},M$;function qge(){return M$||(M$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(bA)),bA}var L$;function eW(){return L$||(L$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=GC;e.__exportStar(Hge(),t),e.__exportStar(qge(),t)}(wA)),wA}var U$;function Vge(){if(U$)return Xu;U$=1,Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.fromMiliseconds=Xu.toMiliseconds=void 0;const t=eW();function e(r){return r*t.ONE_THOUSAND}Xu.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Xu.fromMiliseconds=n,Xu}var B$;function Gge(){return B$||(B$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=GC;e.__exportStar(zge(),t),e.__exportStar(Vge(),t)}(yA)),yA}var lf={},j$;function Kge(){if(j$)return lf;j$=1,Object.defineProperty(lf,"__esModule",{value:!0}),lf.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return lf.Watch=t,lf.default=t,lf}var vA={},gm={},F$;function Yge(){if(F$)return gm;F$=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.IWatch=void 0;class t{}return gm.IWatch=t,gm}var W$;function Qge(){return W$||(W$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),GC.__exportStar(Yge(),t)}(vA)),vA}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=GC;e.__exportStar(Gge(),t),e.__exportStar(Kge(),t),e.__exportStar(Qge(),t),e.__exportStar(eW(),t)})(be);class jh{}let Zge=class extends jh{constructor(e){super()}};const z$=be.FIVE_SECONDS,Fh={pulse:"heartbeat_pulse"};let Xge=class tW extends Zge{constructor(e){super(e),this.events=new So.EventEmitter,this.interval=z$,this.interval=(e==null?void 0:e.interval)||z$}static async init(e){const n=new tW(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),be.toMiliseconds(this.interval))}pulse(){this.events.emit(Fh.pulse)}};const Jge=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,eme=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,tme=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function nme(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){rme(t);return}return e}function rme(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Kb(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!tme.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Jge.test(t)||eme.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,nme)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Wh(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function nW(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Wh(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let EA;function M0(){return EA||(EA=nW("keyval-store","keyval")),EA}function H$(t,e=M0()){return e("readonly",n=>Wh(n.get(t)))}function sme(t,e,n=M0()){return n("readwrite",r=>(r.put(e,t),Wh(r.transaction)))}function ime(t,e=M0()){return e("readwrite",n=>(n.delete(t),Wh(n.transaction)))}function ome(t=M0()){return t("readwrite",e=>(e.clear(),Wh(e.transaction)))}function ame(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Wh(t.transaction)}function cme(t=M0()){return t("readonly",e=>{if(e.getAllKeys)return Wh(e.getAllKeys());const n=[];return ame(e,r=>n.push(r.key)).then(()=>n)})}const lme=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),ume=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function mh(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return ume(t)}catch{return t}}function Qc(t){return typeof t=="string"?t:lme(t)||""}function dme(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var hme=fme;function fme(t,e,n){var r=n&&n.stringify||dme,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const q$=hme;var kf=qa;const xw=Cme().console||{},pme={mapHttpRequest:Yb,mapHttpResponse:Yb,wrapRequestSerializer:_A,wrapResponseSerializer:_A,wrapErrorSerializer:_A,req:Yb,res:Yb,err:bme};function gme(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function qa(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||xw;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=gme(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=Tw),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:vme(t)};c.levels=qa.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Tw,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=iT());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,uf(l,c,"error","log"),uf(l,c,"fatal","error"),uf(l,c,"warn","error"),uf(l,c,"info","log"),uf(l,c,"debug","log"),uf(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,KC([p],b,y,this._stdErrSerialize)}function E(_){this._childLevel=(_._childLevel|0)+1,this.error=df(_,p,"error"),this.fatal=df(_,p,"fatal"),this.warn=df(_,p,"warn"),this.info=df(_,p,"info"),this.debug=df(_,p,"debug"),this.trace=df(_,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=iT([].concat(_._logEvent.bindings,p)))}return E.prototype=this,new E(this)}return c}qa.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};qa.stdSerializers=pme;qa.stdTimeFunctions=Object.assign({},{nullTime:rW,epochTime:sW,unixTime:Eme,isoTime:_me});function uf(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?Tw:s[n]?s[n]:xw[n]||xw[r]||Tw,mme(t,e,n)}function mme(t,e,n){!t.transmit&&e[n]===Tw||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===xw?xw:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&KC(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,yme(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=qa.levels.values[l],d=qa.levels.values[n];if(d<u)return;wme(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:qa.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function yme(t,e,n,r){t._serialize&&KC(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=qa.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?q$(s.shift(),s):void 0}else typeof i=="string"&&(i=q$(s.shift(),s));return i!==void 0&&(o.msg=i),o}function KC(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=qa.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function df(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function wme(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;KC(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=iT(c)}function iT(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function bme(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function vme(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?rW:sW}function Yb(){return{}}function _A(t){return t}function Tw(){}function rW(){return!1}function sW(){return Date.now()}function Eme(){return Math.round(Date.now()/1e3)}function _me(){return new Date(Date.now()).toISOString()}function Cme(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const L0=Nh(kf),Sme={level:"info"},U0="custom_context",zO=1e3*1024;let Ame=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},V$=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Ame(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},iW=class{constructor(e,n=zO){this.level=e??"error",this.levelValue=kf.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new V$(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===kf.levels.values.error?console.error(e):n===kf.levels.values.warn?console.warn(e):n===kf.levels.values.debug?console.debug(e):n===kf.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Qc({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new V$(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Qc({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Ime=class{constructor(e,n=zO){this.baseChunkLogger=new iW(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},Nme=class{constructor(e,n=zO){this.baseChunkLogger=new iW(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var xme=Object.defineProperty,Tme=Object.defineProperties,Rme=Object.getOwnPropertyDescriptors,G$=Object.getOwnPropertySymbols,Pme=Object.prototype.hasOwnProperty,Ome=Object.prototype.propertyIsEnumerable,K$=(t,e,n)=>e in t?xme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,o_=(t,e)=>{for(var n in e||(e={}))Pme.call(e,n)&&K$(t,n,e[n]);if(G$)for(var n of G$(e))Ome.call(e,n)&&K$(t,n,e[n]);return t},a_=(t,e)=>Tme(t,Rme(e));function zh(t){return a_(o_({},t),{level:(t==null?void 0:t.level)||Sme.level})}function kme(t,e=U0){return t[e]||""}function Dme(t,e,n=U0){return t[n]=e,t}function yi(t,e=U0){let n="";return typeof t.bindings>"u"?n=kme(t,e):n=t.bindings().context||"",n}function $me(t,e,n=U0){const r=yi(t,n);return r.trim()?`${r}/${e}`:e}function es(t,e,n=U0){const r=$me(t,e,n),s=t.child({context:r});return Dme(s,r,n)}function Mme(t){var e,n;const r=new Ime((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:L0(a_(o_({},t.opts),{level:"trace",browser:a_(o_({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Lme(t){var e;const n=new Nme((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:L0(a_(o_({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function YC(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Mme(t):Lme(t)}function Ume(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function oW(t,...e){if(!Ume(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Y$(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Bme(t,e){oW(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const hf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const CA=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function jme(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function aW(t){return typeof t=="string"&&(t=jme(t)),oW(t),t}let Fme=class{clone(){return this._cloneInto()}};function Wme(t){const e=r=>t().update(aW(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function cW(t=32){if(hf&&typeof hf.getRandomValues=="function")return hf.getRandomValues(new Uint8Array(t));if(hf&&typeof hf.randomBytes=="function")return hf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function zme(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let Hme=class extends Fme{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=CA(this.buffer)}update(e){Y$(this);const{view:n,buffer:r,blockLen:s}=this;e=aW(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=CA(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Y$(this),Bme(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;zme(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=CA(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Qb=BigInt(2**32-1),oT=BigInt(32);function lW(t,e=!1){return e?{h:Number(t&Qb),l:Number(t>>oT&Qb)}:{h:Number(t>>oT&Qb)|0,l:Number(t&Qb)|0}}function qme(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=lW(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Vme=(t,e)=>BigInt(t>>>0)<<oT|BigInt(e>>>0),Gme=(t,e,n)=>t>>>n,Kme=(t,e,n)=>t<<32-n|e>>>n,Yme=(t,e,n)=>t>>>n|e<<32-n,Qme=(t,e,n)=>t<<32-n|e>>>n,Zme=(t,e,n)=>t<<64-n|e>>>n-32,Xme=(t,e,n)=>t>>>n-32|e<<64-n,Jme=(t,e)=>e,eye=(t,e)=>t,tye=(t,e,n)=>t<<n|e>>>32-n,nye=(t,e,n)=>e<<n|t>>>32-n,rye=(t,e,n)=>e<<n-32|t>>>64-n,sye=(t,e,n)=>t<<n-32|e>>>64-n;function iye(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const oye=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),aye=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,cye=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),lye=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,uye=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),dye=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ct={fromBig:lW,split:qme,toBig:Vme,shrSH:Gme,shrSL:Kme,rotrSH:Yme,rotrSL:Qme,rotrBH:Zme,rotrBL:Xme,rotr32H:Jme,rotr32L:eye,rotlSH:tye,rotlSL:nye,rotlBH:rye,rotlBL:sye,add:iye,add3L:oye,add3H:aye,add4L:cye,add4H:lye,add5H:dye,add5L:uye},[hye,fye]=Ct.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),pl=new Uint32Array(80),gl=new Uint32Array(80);let pye=class extends Hme{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let E=0;E<16;E++,n+=4)pl[E]=e.getUint32(n),gl[E]=e.getUint32(n+=4);for(let E=16;E<80;E++){const _=pl[E-15]|0,C=gl[E-15]|0,I=Ct.rotrSH(_,C,1)^Ct.rotrSH(_,C,8)^Ct.shrSH(_,C,7),A=Ct.rotrSL(_,C,1)^Ct.rotrSL(_,C,8)^Ct.shrSL(_,C,7),x=pl[E-2]|0,S=gl[E-2]|0,D=Ct.rotrSH(x,S,19)^Ct.rotrBH(x,S,61)^Ct.shrSH(x,S,6),P=Ct.rotrSL(x,S,19)^Ct.rotrBL(x,S,61)^Ct.shrSL(x,S,6),U=Ct.add4L(A,P,gl[E-7],gl[E-16]),q=Ct.add4H(U,I,D,pl[E-7],pl[E-16]);pl[E]=q|0,gl[E]=U|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let E=0;E<80;E++){const _=Ct.rotrSH(d,h,14)^Ct.rotrSH(d,h,18)^Ct.rotrBH(d,h,41),C=Ct.rotrSL(d,h,14)^Ct.rotrSL(d,h,18)^Ct.rotrBL(d,h,41),I=d&f^~d&g,A=h&p^~h&w,x=Ct.add5L(b,C,A,fye[E],gl[E]),S=Ct.add5H(x,y,_,I,hye[E],pl[E]),D=x|0,P=Ct.rotrSH(r,s,28)^Ct.rotrBH(r,s,34)^Ct.rotrBH(r,s,39),U=Ct.rotrSL(r,s,28)^Ct.rotrBL(r,s,34)^Ct.rotrBL(r,s,39),q=r&i^r&a^i&a,j=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ct.add(l|0,u|0,S|0,D|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=Ct.add3L(D,U,j);r=Ct.add3H(T,S,P,q),s=T|0}({h:r,l:s}=Ct.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ct.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ct.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ct.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ct.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ct.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Ct.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Ct.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){pl.fill(0),gl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const gye=Wme(()=>new pye);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const HO=BigInt(0),uW=BigInt(1),mye=BigInt(2);function qO(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function VO(t){if(!qO(t))throw new Error("Uint8Array expected")}function SA(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const yye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function GO(t){VO(t);let e="";for(let n=0;n<t.length;n++)e+=yye[t[n]];return e}function dW(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?HO:BigInt("0x"+t)}const dc={_0:48,_9:57,A:65,F:70,a:97,f:102};function Q$(t){if(t>=dc._0&&t<=dc._9)return t-dc._0;if(t>=dc.A&&t<=dc.F)return t-(dc.A-10);if(t>=dc.a&&t<=dc.f)return t-(dc.a-10)}function hW(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Q$(t.charCodeAt(i)),a=Q$(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function wye(t){return dW(GO(t))}function Fv(t){return VO(t),dW(GO(Uint8Array.from(t).reverse()))}function fW(t,e){return hW(t.toString(16).padStart(e*2,"0"))}function aT(t,e){return fW(t,e).reverse()}function hc(t,e,n){let r;if(typeof e=="string")try{r=hW(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(qO(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Z$(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];VO(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const AA=t=>typeof t=="bigint"&&HO<=t;function bye(t,e,n){return AA(t)&&AA(e)&&AA(n)&&e<=t&&t<n}function mm(t,e,n,r){if(!bye(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function vye(t){let e;for(e=0;t>HO;t>>=uW,e+=1);return e}const Eye=t=>(mye<<BigInt(t-1))-uW,_ye={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||qO(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function KO(t,e,n={}){const r=(s,i,o)=>{const a=_ye[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function X$(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Mr=BigInt(0),rr=BigInt(1),gd=BigInt(2),Cye=BigInt(3),cT=BigInt(4),J$=BigInt(5),e5=BigInt(8);function mr(t,e){const n=t%e;return n>=Mr?n:e+n}function Sye(t,e,n){if(e<Mr)throw new Error("invalid exponent, negatives unsupported");if(n<=Mr)throw new Error("invalid modulus");if(n===rr)return Mr;let r=rr;for(;e>Mr;)e&rr&&(r=r*t%n),t=t*t%n,e>>=rr;return r}function ma(t,e,n){let r=t;for(;e-- >Mr;)r*=r,r%=n;return r}function t5(t,e){if(t===Mr)throw new Error("invert: expected non-zero number");if(e<=Mr)throw new Error("invert: expected positive modulus, got "+e);let n=mr(t,e),r=e,s=Mr,i=rr;for(;n!==Mr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==rr)throw new Error("invert: does not exist");return mr(s,e)}function Aye(t){const e=(t-rr)/gd;let n,r,s;for(n=t-rr,r=0;n%gd===Mr;n/=gd,r++);for(s=gd;s<t&&Sye(s,e,t)!==t-rr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+rr)/cT;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+rr)/gd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,rr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function Iye(t){if(t%cT===Cye){const e=(t+rr)/cT;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%e5===J$){const e=(t-J$)/e5;return function(n,r){const s=n.mul(r,gd),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,gd),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Aye(t)}const Nye=(t,e)=>(mr(t,e)&rr)===rr,xye=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Tye(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=xye.reduce((r,s)=>(r[s]="function",r),e);return KO(t,n)}function Rye(t,e,n){if(n<Mr)throw new Error("invalid exponent, negatives unsupported");if(n===Mr)return t.ONE;if(n===rr)return e;let r=t.ONE,s=e;for(;n>Mr;)n&rr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=rr;return r}function Pye(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function pW(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function gW(t,e,n=!1,r={}){if(t<=Mr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=pW(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Eye(s),ZERO:Mr,ONE:rr,create:c=>mr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Mr<=c&&c<t},is0:c=>c===Mr,isOdd:c=>(c&rr)===rr,neg:c=>mr(-c,t),eql:(c,l)=>c===l,sqr:c=>mr(c*c,t),add:(c,l)=>mr(c+l,t),sub:(c,l)=>mr(c-l,t),mul:(c,l)=>mr(c*l,t),pow:(c,l)=>Rye(a,c,l),div:(c,l)=>mr(c*t5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>t5(c,t),sqrt:r.sqrt||(c=>(o||(o=Iye(t)),o(a,c))),invertBatch:c=>Pye(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?aT(c,i):fW(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Fv(c):wye(c)}});return Object.freeze(a)}const n5=BigInt(0),Zb=BigInt(1);function IA(t,e){const n=e.negate();return t?n:e}function mW(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function NA(t,e){mW(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Oye(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function kye(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const xA=new WeakMap,yW=new WeakMap;function TA(t){return yW.get(t)||1}function Dye(t,e){return{constTimeNegate:IA,hasPrecomputes(n){return TA(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>n5;)r&Zb&&(s=s.add(i)),i=i.double(),r>>=Zb;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=NA(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=NA(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=Zb);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(IA(y,r[g])):a=a.add(IA(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=NA(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===n5)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=Zb),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=xA.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&xA.set(r,s(i))),i},wNAFCached(n,r,s){const i=TA(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=TA(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){mW(r,e),yW.set(n,r),xA.delete(n)}}}function $ye(t,e,n,r){if(Oye(n,t),kye(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=vye(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Mye(t){return Tye(t.Fp),KO(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...pW(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Oo=BigInt(0),Ws=BigInt(1),Xb=BigInt(2),Lye=BigInt(8),Uye={zip215:!0};function Bye(t){const e=Mye(t);return KO(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function jye(t){const e=Bye(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=Xb<<BigInt(a*8)-Ws,u=n.create,d=gW(e.n,e.nBitLength),h=e.uvRatio||((T,N)=>{try{return{isValid:!0,value:n.sqrt(T*n.inv(N))}}catch{return{isValid:!1,value:Oo}}}),f=e.adjustScalarBytes||(T=>T),p=e.domain||((T,N,$)=>{if(SA("phflag",$),N.length||$)throw new Error("Contexts/pre-hash are not supported");return T});function g(T,N){mm("coordinate "+T,N,Oo,l)}function w(T){if(!(T instanceof E))throw new Error("ExtendedPoint expected")}const y=X$((T,N)=>{const{ex:$,ey:R,ez:k}=T,B=T.is0();N==null&&(N=B?Lye:n.inv(k));const H=u($*N),X=u(R*N),se=u(k*N);if(B)return{x:Oo,y:Ws};if(se!==Ws)throw new Error("invZ was invalid");return{x:H,y:X}}),b=X$(T=>{const{a:N,d:$}=e;if(T.is0())throw new Error("bad point: ZERO");const{ex:R,ey:k,ez:B,et:H}=T,X=u(R*R),se=u(k*k),ne=u(B*B),ae=u(ne*ne),me=u(X*N),Z=u(ne*u(me+se)),re=u(ae+u($*u(X*se)));if(Z!==re)throw new Error("bad point: equation left != right (1)");const de=u(R*k),ee=u(B*H);if(de!==ee)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(N,$,R,k){this.ex=N,this.ey=$,this.ez=R,this.et=k,g("x",N),g("y",$),g("z",R),g("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(N){if(N instanceof E)throw new Error("extended point not allowed");const{x:$,y:R}=N||{};return g("x",$),g("y",R),new E($,R,Ws,u($*R))}static normalizeZ(N){const $=n.invertBatch(N.map(R=>R.ez));return N.map((R,k)=>R.toAffine($[k])).map(E.fromAffine)}static msm(N,$){return $ye(E,d,N,$)}_setWindowSize(N){I.setWindowSize(this,N)}assertValidity(){b(this)}equals(N){w(N);const{ex:$,ey:R,ez:k}=this,{ex:B,ey:H,ez:X}=N,se=u($*X),ne=u(B*k),ae=u(R*X),me=u(H*k);return se===ne&&ae===me}is0(){return this.equals(E.ZERO)}negate(){return new E(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:N}=e,{ex:$,ey:R,ez:k}=this,B=u($*$),H=u(R*R),X=u(Xb*u(k*k)),se=u(N*B),ne=$+R,ae=u(u(ne*ne)-B-H),me=se+H,Z=me-X,re=se-H,de=u(ae*Z),ee=u(me*re),he=u(ae*re),Ne=u(Z*me);return new E(de,ee,Ne,he)}add(N){w(N);const{a:$,d:R}=e,{ex:k,ey:B,ez:H,et:X}=this,{ex:se,ey:ne,ez:ae,et:me}=N;if($===BigInt(-1)){const rn=u((B-k)*(ne+se)),vn=u((B+k)*(ne-se)),Mn=u(vn-rn);if(Mn===Oo)return this.double();const or=u(H*Xb*me),ss=u(X*Xb*ae),xo=ss+or,Sr=vn+rn,bs=ss-or,is=u(xo*Mn),zu=u(Sr*bs),To=u(xo*bs),zg=u(Mn*Sr);return new E(is,zu,zg,To)}const Z=u(k*se),re=u(B*ne),de=u(X*R*me),ee=u(H*ae),he=u((k+B)*(se+ne)-Z-re),Ne=ee-de,le=ee+de,ye=u(re-$*Z),ze=u(he*Ne),Ze=u(le*ye),Kt=u(he*ye),nn=u(Ne*le);return new E(ze,Ze,nn,Kt)}subtract(N){return this.add(N.negate())}wNAF(N){return I.wNAFCached(this,N,E.normalizeZ)}multiply(N){const $=N;mm("scalar",$,Ws,r);const{p:R,f:k}=this.wNAF($);return E.normalizeZ([R,k])[0]}multiplyUnsafe(N,$=E.ZERO){const R=N;return mm("scalar",R,Oo,r),R===Oo?C:this.is0()||R===Ws?this:I.wNAFCachedUnsafe(this,R,E.normalizeZ,$)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,r).is0()}toAffine(N){return y(this,N)}clearCofactor(){const{h:N}=e;return N===Ws?this:this.multiplyUnsafe(N)}static fromHex(N,$=!1){const{d:R,a:k}=e,B=n.BYTES;N=hc("pointHex",N,B),SA("zip215",$);const H=N.slice(),X=N[B-1];H[B-1]=X&-129;const se=Fv(H),ne=$?l:n.ORDER;mm("pointHex.y",se,Oo,ne);const ae=u(se*se),me=u(ae-Ws),Z=u(R*ae-k);let{isValid:re,value:de}=h(me,Z);if(!re)throw new Error("Point.fromHex: invalid y coordinate");const ee=(de&Ws)===Ws,he=(X&128)!==0;if(!$&&de===Oo&&he)throw new Error("Point.fromHex: x=0 and x_0=1");return he!==ee&&(de=u(-de)),E.fromAffine({x:de,y:se})}static fromPrivateKey(N){return S(N).point}toRawBytes(){const{x:N,y:$}=this.toAffine(),R=aT($,n.BYTES);return R[R.length-1]|=N&Ws?128:0,R}toHex(){return GO(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,Ws,u(e.Gx*e.Gy)),E.ZERO=new E(Oo,Ws,Ws,Oo);const{BASE:_,ZERO:C}=E,I=Dye(E,a*8);function A(T){return mr(T,r)}function x(T){return A(Fv(T))}function S(T){const N=n.BYTES;T=hc("private key",T,N);const $=hc("hashed private key",i(T),2*N),R=f($.slice(0,N)),k=$.slice(N,2*N),B=x(R),H=_.multiply(B),X=H.toRawBytes();return{head:R,prefix:k,scalar:B,point:H,pointBytes:X}}function D(T){return S(T).pointBytes}function P(T=new Uint8Array,...N){const $=Z$(...N);return x(i(p($,hc("context",T),!!s)))}function U(T,N,$={}){T=hc("message",T),s&&(T=s(T));const{prefix:R,scalar:k,pointBytes:B}=S(N),H=P($.context,R,T),X=_.multiply(H).toRawBytes(),se=P($.context,X,B,T),ne=A(H+se*k);mm("signature.s",ne,Oo,r);const ae=Z$(X,aT(ne,n.BYTES));return hc("result",ae,n.BYTES*2)}const q=Uye;function j(T,N,$,R=q){const{context:k,zip215:B}=R,H=n.BYTES;T=hc("signature",T,2*H),N=hc("message",N),$=hc("publicKey",$,H),B!==void 0&&SA("zip215",B),s&&(N=s(N));const X=Fv(T.slice(H,2*H));let se,ne,ae;try{se=E.fromHex($,B),ne=E.fromHex(T.slice(0,H),B),ae=_.multiplyUnsafe(X)}catch{return!1}if(!B&&se.isSmallOrder())return!1;const me=P(k,ne.toRawBytes(),se.toRawBytes(),N);return ne.add(se.multiplyUnsafe(me)).subtract(ae).clearCofactor().equals(E.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:D,sign:U,verify:j,ExtendedPoint:E,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(T=8,N=E.BASE){return N._setWindowSize(T),N.multiply(BigInt(3)),N}}}}BigInt(0),BigInt(1);const YO=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),r5=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Fye=BigInt(1),s5=BigInt(2);BigInt(3);const Wye=BigInt(5),zye=BigInt(8);function Hye(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=YO,o=t*t%i*t%i,a=ma(o,s5,i)*o%i,c=ma(a,Fye,i)*t%i,l=ma(c,Wye,i)*c%i,u=ma(l,e,i)*l%i,d=ma(u,n,i)*u%i,h=ma(d,r,i)*d%i,f=ma(h,s,i)*h%i,p=ma(f,s,i)*h%i,g=ma(p,e,i)*l%i;return{pow_p_5_8:ma(g,s5,i)*t%i,b2:o}}function qye(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Vye(t,e){const n=YO,r=mr(e*e*e,n),s=mr(r*r*e,n),i=Hye(t*s).pow_p_5_8;let o=mr(t*r*i,n);const a=mr(e*o*o,n),c=o,l=mr(o*r5,n),u=a===t,d=a===mr(-t,n),h=a===mr(-t*r5,n);return u&&(o=c),(d||h)&&(o=l),Nye(o,n)&&(o=mr(-o,n)),{isValid:u||d,value:o}}const Gye=gW(YO,void 0,!0),Kye={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Gye,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:zye,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:gye,randomBytes:cW,adjustScalarBytes:qye,uvRatio:Vye},wW=jye(Kye),Yye="EdDSA",Qye="JWT",c_=".",QC="base64url",bW="utf8",vW="utf8",Zye=":",Xye="did",Jye="key",i5="base58btc",ewe="z",twe="K36",nwe=32;function QO(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function EW(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?QO(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function _W(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=EW(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return QO(n)}function rwe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var E=(b-y)*u+1>>>0,_=new Uint8Array(E);y!==b;){for(var C=p[y],I=0,A=E-1;(C!==0||I<w)&&A!==-1;A--,I++)C+=256*_[A]>>>0,_[A]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,y++}for(var x=E-w;x!==E&&_[x]===0;)x++;for(var S=c.repeat(g);x<E;++x)S+=t.charAt(_[x]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,E=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var C=0,I=b-1;(_!==0||C<y)&&I!==-1;I--,C++)_+=a*E[I]>>>0,E[I]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var A=b-y;A!==b&&E[A]===0;)A++;for(var x=new Uint8Array(w+(b-A)),S=w;A!==b;)x[S++]=E[A++];return x}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var swe=rwe,iwe=swe;const CW=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},owe=t=>new TextEncoder().encode(t),awe=t=>new TextDecoder().decode(t);let cwe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},lwe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return SW(this,e)}},uwe=class{constructor(e){this.decoders=e}or(e){return SW(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const SW=(t,e)=>new uwe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let dwe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new cwe(e,n,r),this.decoder=new lwe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const ZC=({name:t,prefix:e,encode:n,decode:r})=>new dwe(t,e,n,r),B0=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=iwe(n,e);return ZC({prefix:t,name:e,encode:r,decode:i=>CW(s(i))})},hwe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},fwe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},ts=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>ZC({prefix:e,name:t,encode(s){return fwe(s,r,n)},decode(s){return hwe(s,r,n,t)}}),pwe=ZC({prefix:"\0",name:"identity",encode:t=>awe(t),decode:t=>owe(t)});var gwe=Object.freeze({__proto__:null,identity:pwe});const mwe=ts({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ywe=Object.freeze({__proto__:null,base2:mwe});const wwe=ts({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var bwe=Object.freeze({__proto__:null,base8:wwe});const vwe=B0({prefix:"9",name:"base10",alphabet:"0123456789"});var Ewe=Object.freeze({__proto__:null,base10:vwe});const _we=ts({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Cwe=ts({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Swe=Object.freeze({__proto__:null,base16:_we,base16upper:Cwe});const Awe=ts({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Iwe=ts({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Nwe=ts({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),xwe=ts({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Twe=ts({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Rwe=ts({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Pwe=ts({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Owe=ts({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),kwe=ts({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Dwe=Object.freeze({__proto__:null,base32:Awe,base32upper:Iwe,base32pad:Nwe,base32padupper:xwe,base32hex:Twe,base32hexupper:Rwe,base32hexpad:Pwe,base32hexpadupper:Owe,base32z:kwe});const $we=B0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Mwe=B0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Lwe=Object.freeze({__proto__:null,base36:$we,base36upper:Mwe});const Uwe=B0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Bwe=B0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var jwe=Object.freeze({__proto__:null,base58btc:Uwe,base58flickr:Bwe});const Fwe=ts({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Wwe=ts({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),zwe=ts({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Hwe=ts({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var qwe=Object.freeze({__proto__:null,base64:Fwe,base64pad:Wwe,base64url:zwe,base64urlpad:Hwe});const AW=Array.from(""),Vwe=AW.reduce((t,e,n)=>(t[n]=e,t),[]),Gwe=AW.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Kwe(t){return t.reduce((e,n)=>(e+=Vwe[n],e),"")}function Ywe(t){const e=[];for(const n of t){const r=Gwe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Qwe=ZC({prefix:"",name:"base256emoji",encode:Kwe,decode:Ywe});var Zwe=Object.freeze({__proto__:null,base256emoji:Qwe}),Xwe=IW,o5=128,Jwe=-128,e0e=Math.pow(2,31);function IW(t,e,n){e=e||[],n=n||0;for(var r=n;t>=e0e;)e[n++]=t&255|o5,t/=128;for(;t&Jwe;)e[n++]=t&255|o5,t>>>=7;return e[n]=t|0,IW.bytes=n-r+1,e}var t0e=lT,n0e=128,a5=127;function lT(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw lT.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&a5)<<s:(o&a5)*Math.pow(2,s),s+=7}while(o>=n0e);return lT.bytes=i-r,n}var r0e=Math.pow(2,7),s0e=Math.pow(2,14),i0e=Math.pow(2,21),o0e=Math.pow(2,28),a0e=Math.pow(2,35),c0e=Math.pow(2,42),l0e=Math.pow(2,49),u0e=Math.pow(2,56),d0e=Math.pow(2,63),h0e=function(t){return t<r0e?1:t<s0e?2:t<i0e?3:t<o0e?4:t<a0e?5:t<c0e?6:t<l0e?7:t<u0e?8:t<d0e?9:10},f0e={encode:Xwe,decode:t0e,encodingLength:h0e},NW=f0e;const c5=(t,e,n=0)=>(NW.encode(t,e,n),e),l5=t=>NW.encodingLength(t),uT=(t,e)=>{const n=e.byteLength,r=l5(t),s=r+l5(n),i=new Uint8Array(s+n);return c5(t,i,0),c5(n,i,r),i.set(e,s),new p0e(t,n,e,i)};let p0e=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const xW=({name:t,code:e,encode:n})=>new g0e(t,e,n);let g0e=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?uT(this.code,n):n.then(r=>uT(this.code,r))}else throw Error("Unknown type, must be binary type")}};const TW=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),m0e=xW({name:"sha2-256",code:18,encode:TW("SHA-256")}),y0e=xW({name:"sha2-512",code:19,encode:TW("SHA-512")});var w0e=Object.freeze({__proto__:null,sha256:m0e,sha512:y0e});const RW=0,b0e="identity",PW=CW,v0e=t=>uT(RW,PW(t)),E0e={code:RW,name:b0e,encode:PW,digest:v0e};var _0e=Object.freeze({__proto__:null,identity:E0e});new TextEncoder,new TextDecoder;const u5={...gwe,...ywe,...bwe,...Ewe,...Swe,...Dwe,...Lwe,...jwe,...qwe,...Zwe};({...w0e,..._0e});function OW(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const d5=OW("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),RA=OW("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=EW(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),kW={utf8:d5,"utf-8":d5,hex:u5.base16,latin1:RA,ascii:RA,binary:RA,...u5};function XC(t,e="utf8"){const n=kW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function kg(t,e="utf8"){const n=kW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?QO(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function h5(t){return mh(XC(kg(t,QC),bW))}function l_(t){return XC(kg(Qc(t),bW),QC)}function DW(t){const e=kg(twe,i5),n=ewe+XC(_W([e,t]),i5);return[Xye,Jye,n].join(Zye)}function C0e(t){return XC(t,QC)}function S0e(t){return kg(t,QC)}function A0e(t){return kg([l_(t.header),l_(t.payload)].join(c_),vW)}function I0e(t){return[l_(t.header),l_(t.payload),C0e(t.signature)].join(c_)}function dT(t){const e=t.split(c_),n=h5(e[0]),r=h5(e[1]),s=S0e(e[2]),i=kg(e.slice(0,2).join(c_),vW);return{header:n,payload:r,signature:s,data:i}}function f5(t=cW(nwe)){const e=wW.getPublicKey(t);return{secretKey:_W([t,e]),publicKey:e}}async function N0e(t,e,n,r,s=be.fromMiliseconds(Date.now())){const i={alg:Yye,typ:Qye},o=DW(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=A0e({header:i,payload:c}),u=wW.sign(l,r.secretKey.slice(0,32));return I0e({header:i,payload:c,signature:u})}var p5=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},x0e=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),T0e=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),R0e=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),P0e=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),O0e=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),k0e=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,D0e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,g5=3,$0e=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",k0e]],m5=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function M0e(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new O0e:typeof navigator<"u"?U0e(navigator.userAgent):j0e()}function L0e(t){return t!==""&&$0e.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function U0e(t){var e=L0e(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new P0e;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<g5&&(s=p5(p5([],s,!0),F0e(g5-s.length),!0)):s=[];var i=s.join("."),o=B0e(t),a=D0e.exec(t);return a&&a[1]?new R0e(n,i,o,a[1]):new x0e(n,i,o)}function B0e(t){for(var e=0,n=m5.length;e<n;e++){var r=m5[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function j0e(){var t=typeof process<"u"&&process.version;return t?new T0e(process.version.slice(1)):null}function F0e(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var An={};Object.defineProperty(An,"__esModule",{value:!0});An.getLocalStorage=An.getLocalStorageOrThrow=An.getCrypto=An.getCryptoOrThrow=$W=An.getLocation=An.getLocationOrThrow=ZO=An.getNavigator=An.getNavigatorOrThrow=yh=An.getDocument=An.getDocumentOrThrow=An.getFromWindowOrThrow=An.getFromWindow=void 0;function Hh(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}An.getFromWindow=Hh;function Dg(t){const e=Hh(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}An.getFromWindowOrThrow=Dg;function W0e(){return Dg("document")}An.getDocumentOrThrow=W0e;function z0e(){return Hh("document")}var yh=An.getDocument=z0e;function H0e(){return Dg("navigator")}An.getNavigatorOrThrow=H0e;function q0e(){return Hh("navigator")}var ZO=An.getNavigator=q0e;function V0e(){return Dg("location")}An.getLocationOrThrow=V0e;function G0e(){return Hh("location")}var $W=An.getLocation=G0e;function K0e(){return Dg("crypto")}An.getCryptoOrThrow=K0e;function Y0e(){return Hh("crypto")}An.getCrypto=Y0e;function Q0e(){return Dg("localStorage")}An.getLocalStorageOrThrow=Q0e;function Z0e(){return Hh("localStorage")}An.getLocalStorage=Z0e;var XO={};Object.defineProperty(XO,"__esModule",{value:!0});var MW=XO.getWindowMetadata=void 0;const y5=An;function X0e(){let t,e;try{t=y5.getDocumentOrThrow(),e=y5.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const E=b.join("/");y+=E+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}MW=XO.getWindowMetadata=X0e;function J0e(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],E=0;for(let _=p-1;(b!==0||E<d)&&_!==-1;_--,E++)b+=256*g[_]>>>0,g[_]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=E,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let E=e[b];if(E===255)return;let _=0;for(let C=f-1;(E!==0||_<h)&&C!==-1;C--,_++)E+=n*p[C]>>>0,p[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");h=_,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var ebe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const LW=J0e(ebe);function UW(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function yy(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=UW(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function tbe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var E=(b-y)*u+1>>>0,_=new Uint8Array(E);y!==b;){for(var C=p[y],I=0,A=E-1;(C!==0||I<w)&&A!==-1;A--,I++)C+=256*_[A]>>>0,_[A]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,y++}for(var x=E-w;x!==E&&_[x]===0;)x++;for(var S=c.repeat(g);x<E;++x)S+=t.charAt(_[x]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,E=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var C=0,I=b-1;(_!==0||C<y)&&I!==-1;I--,C++)_+=a*E[I]>>>0,E[I]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var A=b-y;A!==b&&E[A]===0;)A++;for(var x=new Uint8Array(w+(b-A)),S=w;A!==b;)x[S++]=E[A++];return x}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var nbe=tbe,rbe=nbe;const sbe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},ibe=t=>new TextEncoder().encode(t),obe=t=>new TextDecoder().decode(t);class abe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class cbe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return BW(this,e)}}class lbe{constructor(e){this.decoders=e}or(e){return BW(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const BW=(t,e)=>new lbe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class ube{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new abe(e,n,r),this.decoder=new cbe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const JC=({name:t,prefix:e,encode:n,decode:r})=>new ube(t,e,n,r),j0=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=rbe(n,e);return JC({prefix:t,name:e,encode:r,decode:i=>sbe(s(i))})},dbe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},hbe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},ns=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>JC({prefix:e,name:t,encode(s){return hbe(s,r,n)},decode(s){return dbe(s,r,n,t)}}),fbe=JC({prefix:"\0",name:"identity",encode:t=>obe(t),decode:t=>ibe(t)}),pbe=Object.freeze(Object.defineProperty({__proto__:null,identity:fbe},Symbol.toStringTag,{value:"Module"})),gbe=ns({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),mbe=Object.freeze(Object.defineProperty({__proto__:null,base2:gbe},Symbol.toStringTag,{value:"Module"})),ybe=ns({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),wbe=Object.freeze(Object.defineProperty({__proto__:null,base8:ybe},Symbol.toStringTag,{value:"Module"})),bbe=j0({prefix:"9",name:"base10",alphabet:"0123456789"}),vbe=Object.freeze(Object.defineProperty({__proto__:null,base10:bbe},Symbol.toStringTag,{value:"Module"})),Ebe=ns({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),_be=ns({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Cbe=Object.freeze(Object.defineProperty({__proto__:null,base16:Ebe,base16upper:_be},Symbol.toStringTag,{value:"Module"})),Sbe=ns({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Abe=ns({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ibe=ns({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Nbe=ns({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xbe=ns({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Tbe=ns({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Rbe=ns({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Pbe=ns({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Obe=ns({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),kbe=Object.freeze(Object.defineProperty({__proto__:null,base32:Sbe,base32hex:xbe,base32hexpad:Rbe,base32hexpadupper:Pbe,base32hexupper:Tbe,base32pad:Ibe,base32padupper:Nbe,base32upper:Abe,base32z:Obe},Symbol.toStringTag,{value:"Module"})),Dbe=j0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$be=j0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Mbe=Object.freeze(Object.defineProperty({__proto__:null,base36:Dbe,base36upper:$be},Symbol.toStringTag,{value:"Module"})),Lbe=j0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ube=j0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Bbe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Lbe,base58flickr:Ube},Symbol.toStringTag,{value:"Module"})),jbe=ns({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Fbe=ns({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Wbe=ns({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),zbe=ns({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Hbe=Object.freeze(Object.defineProperty({__proto__:null,base64:jbe,base64pad:Fbe,base64url:Wbe,base64urlpad:zbe},Symbol.toStringTag,{value:"Module"})),jW=Array.from(""),qbe=jW.reduce((t,e,n)=>(t[n]=e,t),[]),Vbe=jW.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Gbe(t){return t.reduce((e,n)=>(e+=qbe[n],e),"")}function Kbe(t){const e=[];for(const n of t){const r=Vbe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Ybe=JC({prefix:"",name:"base256emoji",encode:Gbe,decode:Kbe}),Qbe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Ybe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const w5={...pbe,...mbe,...wbe,...vbe,...Cbe,...kbe,...Mbe,...Bbe,...Hbe,...Qbe};function FW(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const b5=FW("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),PA=FW("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=UW(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),WW={utf8:b5,"utf-8":b5,hex:w5.base16,latin1:PA,ascii:PA,binary:PA,...w5};function ho(t,e="utf8"){const n=WW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function fi(t,e="utf8"){const n=WW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const Zbe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},Xbe="PARSE_ERROR",Jbe="INVALID_REQUEST",eve="METHOD_NOT_FOUND",tve="INVALID_PARAMS",zW="INTERNAL_ERROR",JO="SERVER_ERROR",nve=[-32700,-32600,-32601,-32602,-32603],wy={[Xbe]:{code:-32700,message:"Parse error"},[Jbe]:{code:-32600,message:"Invalid Request"},[eve]:{code:-32601,message:"Method not found"},[tve]:{code:-32602,message:"Invalid params"},[zW]:{code:-32603,message:"Internal error"},[JO]:{code:-32e3,message:"Server error"}},HW=JO;function rve(t){return nve.includes(t)}function v5(t){return Object.keys(wy).includes(t)?wy[t]:wy[HW]}function sve(t){const e=Object.values(wy).find(n=>n.code===t);return e||wy[HW]}function qW(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var VW={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hT=function(t,e){return hT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},hT(t,e)};function ive(t,e){hT(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var fT=function(){return fT=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fT.apply(this,arguments)};function ove(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ave(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function cve(t,e){return function(n,r){e(n,r,t)}}function lve(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function uve(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function dve(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function hve(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function fve(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function pT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function GW(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function pve(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(GW(arguments[e]));return t}function gve(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function Rw(t){return this instanceof Rw?(this.v=t,this):new Rw(t)}function mve(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof Rw?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function yve(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Rw(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function wve(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof pT=="function"?pT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function bve(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function vve(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Eve(t){return t&&t.__esModule?t:{default:t}}function _ve(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Cve(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Sve=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return fT},__asyncDelegator:yve,__asyncGenerator:mve,__asyncValues:wve,__await:Rw,__awaiter:uve,__classPrivateFieldGet:_ve,__classPrivateFieldSet:Cve,__createBinding:hve,__decorate:ave,__exportStar:fve,__extends:ive,__generator:dve,__importDefault:Eve,__importStar:vve,__makeTemplateObject:bve,__metadata:lve,__param:cve,__read:GW,__rest:ove,__spread:pve,__spreadArrays:gve,__values:pT},Symbol.toStringTag,{value:"Module"})),Ave=OU(Sve);var fc={},E5;function Ive(){if(E5)return fc;E5=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.isBrowserCryptoAvailable=fc.getSubtleCrypto=fc.getBrowerCrypto=void 0;function t(){return(Ta==null?void 0:Ta.crypto)||(Ta==null?void 0:Ta.msCrypto)||{}}fc.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}fc.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return fc.isBrowserCryptoAvailable=n,fc}var pc={},_5;function Nve(){if(_5)return pc;_5=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.isBrowser=pc.isNode=pc.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}pc.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}pc.isNode=e;function n(){return!t()&&!e()}return pc.isBrowser=n,pc}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ave;e.__exportStar(Ive(),t),e.__exportStar(Nve(),t)})(VW);function Sa(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Rd(t=6){return BigInt(Sa(t))}function Zl(t,e,n){return{id:n||Sa(),jsonrpc:"2.0",method:t,params:e}}function e1(t,e){return{id:t,jsonrpc:"2.0",result:e}}function t1(t,e,n){return{id:t,jsonrpc:"2.0",error:xve(e)}}function xve(t,e){return typeof t>"u"?v5(zW):(typeof t=="string"&&(t=Object.assign(Object.assign({},v5(JO)),{message:t})),rve(t.code)&&(t=sve(t.code)),t)}let Tve=class{},Rve=class extends Tve{constructor(){super()}},Pve=class extends Rve{constructor(e){super()}};const Ove="^https?:",kve="^wss?:";function Dve(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function KW(t,e){const n=Dve(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function C5(t){return KW(t,Ove)}function S5(t){return KW(t,kve)}function $ve(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function YW(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function ek(t){return YW(t)&&"method"in t}function n1(t){return YW(t)&&(Aa(t)||io(t))}function Aa(t){return"result"in t}function io(t){return"error"in t}let Ao=class extends Pve{constructor(e){super(e),this.events=new So.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Zl(e.method,e.params||[],e.id||Rd().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{io(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),n1(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Mve=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Lve=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",A5=t=>t.split("?")[0],I5=10,Uve=Mve();let Bve=class{constructor(e){if(this.url=e,this.events=new So.EventEmitter,this.registering=!1,!S5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Qc(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!S5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=VW.isReactNative()?void 0:{rejectUnauthorized:!$ve(e)},i=new Uve(e,[],s);Lve()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?mh(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=t1(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return qW(e,A5(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>I5&&this.events.setMaxListeners(I5)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${A5(this.url)}`));return this.events.emit("register_error",n),n}};var gT={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ta<"u"&&Ta,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Ta<"u"&&Ta||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(T){return T&&DataView.prototype.isPrototypeOf(T)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(T){return T&&u.indexOf(Object.prototype.toString.call(T))>-1};function h(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(T)||T==="")throw new TypeError('Invalid character in header field name: "'+T+'"');return T.toLowerCase()}function f(T){return typeof T!="string"&&(T=String(T)),T}function p(T){var N={next:function(){var $=T.shift();return{done:$===void 0,value:$}}};return c.iterable&&(N[Symbol.iterator]=function(){return N}),N}function g(T){this.map={},T instanceof g?T.forEach(function(N,$){this.append($,N)},this):Array.isArray(T)?T.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(N){this.append(N,T[N])},this)}g.prototype.append=function(T,N){T=h(T),N=f(N);var $=this.map[T];this.map[T]=$?$+", "+N:N},g.prototype.delete=function(T){delete this.map[h(T)]},g.prototype.get=function(T){return T=h(T),this.has(T)?this.map[T]:null},g.prototype.has=function(T){return this.map.hasOwnProperty(h(T))},g.prototype.set=function(T,N){this.map[h(T)]=f(N)},g.prototype.forEach=function(T,N){for(var $ in this.map)this.map.hasOwnProperty($)&&T.call(N,this.map[$],$,this)},g.prototype.keys=function(){var T=[];return this.forEach(function(N,$){T.push($)}),p(T)},g.prototype.values=function(){var T=[];return this.forEach(function(N){T.push(N)}),p(T)},g.prototype.entries=function(){var T=[];return this.forEach(function(N,$){T.push([$,N])}),p(T)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(T){if(!T._noBody){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}}function y(T){return new Promise(function(N,$){T.onload=function(){N(T.result)},T.onerror=function(){$(T.error)}})}function b(T){var N=new FileReader,$=y(N);return N.readAsArrayBuffer(T),$}function E(T){var N=new FileReader,$=y(N),R=/charset=([A-Za-z0-9_-]+)/.exec(T.type),k=R?R[1]:"utf-8";return N.readAsText(T,k),$}function _(T){for(var N=new Uint8Array(T),$=new Array(N.length),R=0;R<N.length;R++)$[R]=String.fromCharCode(N[R]);return $.join("")}function C(T){if(T.slice)return T.slice(0);var N=new Uint8Array(T.byteLength);return N.set(new Uint8Array(T)),N.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(T){this.bodyUsed=this.bodyUsed,this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:c.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:c.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():c.arrayBuffer&&c.blob&&l(T)?(this._bodyArrayBuffer=C(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||d(T))?this._bodyArrayBuffer=C(T):this._bodyText=T=Object.prototype.toString.call(T):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var T=w(this);return T||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function x(T){var N=T.toUpperCase();return A.indexOf(N)>-1?N:T}function S(T,N){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');N=N||{};var $=N.body;if(T instanceof S){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,N.headers||(this.headers=new g(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!$&&T._bodyInit!=null&&($=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new g(N.headers)),this.method=x(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in a){var B=new AbortController;return B.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&$)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody($),(this.method==="GET"||this.method==="HEAD")&&(N.cache==="no-store"||N.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var k=/\?/;this.url+=(k.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function D(T){var N=new FormData;return T.trim().split("&").forEach(function($){if($){var R=$.split("="),k=R.shift().replace(/\+/g," "),B=R.join("=").replace(/\+/g," ");N.append(decodeURIComponent(k),decodeURIComponent(B))}}),N}function P(T){var N=new g,$=T.replace(/\r?\n[\t ]+/g," ");return $.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var k=R.split(":"),B=k.shift().trim();if(B){var H=k.join(":").trim();try{N.append(B,H)}catch(X){console.warn("Response "+X.message)}}}),N}I.call(S.prototype);function U(T,N){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new g(N.headers),this.url=N.url||"",this._initBody(T)}I.call(U.prototype),U.prototype.clone=function(){return new U(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},U.error=function(){var T=new U(null,{status:200,statusText:""});return T.ok=!1,T.status=0,T.type="error",T};var q=[301,302,303,307,308];U.redirect=function(T,N){if(q.indexOf(N)===-1)throw new RangeError("Invalid status code");return new U(null,{status:N,headers:{location:T}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(N,$){this.message=N,this.name=$;var R=Error(N);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function j(T,N){return new Promise(function($,R){var k=new S(T,N);if(k.signal&&k.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var B=new XMLHttpRequest;function H(){B.abort()}B.onload=function(){var ne={statusText:B.statusText,headers:P(B.getAllResponseHeaders()||"")};k.url.indexOf("file://")===0&&(B.status<200||B.status>599)?ne.status=200:ne.status=B.status,ne.url="responseURL"in B?B.responseURL:ne.headers.get("X-Request-URL");var ae="response"in B?B.response:B.responseText;setTimeout(function(){$(new U(ae,ne))},0)},B.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},B.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},B.onabort=function(){setTimeout(function(){R(new o.DOMException("Aborted","AbortError"))},0)};function X(ne){try{return ne===""&&a.location.href?a.location.href:ne}catch{return ne}}if(B.open(k.method,X(k.url),!0),k.credentials==="include"?B.withCredentials=!0:k.credentials==="omit"&&(B.withCredentials=!1),"responseType"in B&&(c.blob?B.responseType="blob":c.arrayBuffer&&(B.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof g||a.Headers&&N.headers instanceof a.Headers)){var se=[];Object.getOwnPropertyNames(N.headers).forEach(function(ne){se.push(h(ne)),B.setRequestHeader(ne,f(N.headers[ne]))}),k.headers.forEach(function(ne,ae){se.indexOf(ae)===-1&&B.setRequestHeader(ae,ne)})}else k.headers.forEach(function(ne,ae){B.setRequestHeader(ae,ne)});k.signal&&(k.signal.addEventListener("abort",H),B.onreadystatechange=function(){B.readyState===4&&k.signal.removeEventListener("abort",H)}),B.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return j.polyfill=!0,a.fetch||(a.fetch=j,a.Headers=g,a.Request=S,a.Response=U),o.Headers=g,o.Request=S,o.Response=U,o.fetch=j,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(gT,gT.exports);var jve=gT.exports;const N5=Nh(jve);var Fve=Object.defineProperty,Wve=Object.defineProperties,zve=Object.getOwnPropertyDescriptors,x5=Object.getOwnPropertySymbols,Hve=Object.prototype.hasOwnProperty,qve=Object.prototype.propertyIsEnumerable,T5=(t,e,n)=>e in t?Fve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,R5=(t,e)=>{for(var n in e||(e={}))Hve.call(e,n)&&T5(t,n,e[n]);if(x5)for(var n of x5(e))qve.call(e,n)&&T5(t,n,e[n]);return t},P5=(t,e)=>Wve(t,zve(e));const Vve={Accept:"application/json","Content-Type":"application/json"},Gve="POST",O5={headers:Vve,method:Gve},k5=10;let da=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new So.EventEmitter,this.isAvailable=!1,this.registering=!1,!C5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Qc(e),r=await(await N5(this.url,P5(R5({},O5),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!C5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Qc({id:1,jsonrpc:"2.0",method:"test",params:[]});await N5(e,P5(R5({},O5),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?mh(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=t1(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return qW(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>k5&&this.events.setMaxListeners(k5)}};const by={getSIWX(){return pe.state.siwx},async initializeIfEnabled(){var i;const t=pe.state.siwx,e=L.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(L.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await $r.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),jn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=ot._getClient())==null?void 0:i.disconnect().catch(console.error)),St.reset("Connect"),Yo.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=pe.state.siwx,e=Qe.getPlainAddress(L.getActiveCaipAddress()),n=L.getActiveCaipNetwork(),r=ot._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Oe.getConnectorId(n.chainNamespace)===ke.CONNECTOR_ID.AUTH&&St.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),$r.close(),jn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!$r.state.open||St.state.view==="ApproveTransaction")&&await $r.open({view:"SIWXSignMessage"}),i.isSmartAccount?Yo.showError("This application might not support Smart Accounts"):Yo.showError("Signature declined"),jn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await ot.disconnect():$r.close(),St.reset("Connect"),jn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=pe.state.siwx,e=Qe.getPlainAddress(L.getActiveCaipAddress()),n=L.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=St.state.view==="ApproveTransaction",r=St.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=by.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=L.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Yo.showLoading("Authenticating...",{autoClose:!1}),Be.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),jn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:by.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),jn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:by.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Yo.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=L.state.activeChain;return{network:((e=L.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Be.state.preferredAccountTypes)==null?void 0:n[t])===Zr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function Jb(t,e){return Oe.getConnectorId(t)===e}function Kve(t){const e=Array.from(L.state.chains.keys());let n=[];return t?(n.push([t,L.state.chains.get(t)]),Jb(t,ke.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&Jb(r,ke.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,L.state.chains.get(r)])}):Jb(t,ke.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&Jb(r,ke.CONNECTOR_ID.AUTH)&&n.push([r,L.state.chains.get(r)])})):n=Array.from(L.state.chains.entries()),n}const ti={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},u_={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ke.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ke.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ke.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ke.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ke.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ke.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ke.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ke.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ke.CONNECTOR_ID.COINBASE]:"Coinbase",[ke.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ke.CONNECTOR_ID.LEDGER]:"Ledger",[ke.CONNECTOR_ID.SAFE]:"Safe"}},r1={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${ti.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},Yve=new AbortController,Pa={EmbeddedWalletAbortController:Yve,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${Qve()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function Qve(){return typeof window<"u"}const Zve={createLogger(t,e="error"){const n=zh({level:e}),{logger:r}=YC({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},Xve="rpc.walletconnect.org";function D5(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const OA=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Df={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Xve}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ke.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ke.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return OA.includes(e)?D5(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:u_.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Df.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Yl(a.url,a.config))}),OA.includes(t.caipNetworkId)&&r.push(Yl(D5(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Yl(a))}),e_(r)},extendWagmiTransports(t,e,n){if(OA.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return e_([n,Yl(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ke.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=je.getActiveCaipNetworkId(),n=L.getAllRequestedCaipNetworks(),r=Array.from(((c=L.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},d_={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},zs=Dn({providers:{...d_},providerIds:{...d_}}),hn={state:zs,subscribeKey(t,e){return ws(zs,t,e)},subscribe(t){return ms(zs,()=>{t(zs)})},subscribeProviders(t){return ms(zs.providers,()=>t(zs.providers))},setProvider(t,e){e&&(zs.providers[t]=ph(e))},getProvider(t){return zs.providers[t]},setProviderId(t,e){e&&(zs.providerIds[t]=e)},getProviderId(t){if(t)return zs.providerIds[t]},reset(){zs.providers={...d_},zs.providerIds={...d_}},resetChain(t){zs.providers[t]=void 0,zs.providerIds[t]=void 0}},$5={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},qr={set(t,e){Ri.isClient&&localStorage.setItem(`${Le.STORAGE_KEY}${t}`,e)},get(t){return Ri.isClient?localStorage.getItem(`${Le.STORAGE_KEY}${t}`):null},delete(t,e){Ri.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Le.STORAGE_KEY}${t}`))}},ev=30*1e3,Ri={checkIfAllowedToTriggerEmail(){const t=qr.get(Le.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<ev){const n=Math.ceil((ev-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=qr.get(Le.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<ev)return Math.ceil((ev-e)/1e3)}return 0},checkIfRequestExists(t){return Zr.NOT_SAFE_RPC_METHODS.includes(t.method)||Zr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match($5.transactionHash))||(t==null?void 0:t.match($5.signedMessage)))?Le.RPC_RESPONSE_TYPE_TX:Le.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Zr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var qt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(qt||(qt={}));var mT;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(mT||(mT={}));const Te=qt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Dl=t=>{switch(typeof t){case"undefined":return Te.undefined;case"string":return Te.string;case"number":return isNaN(t)?Te.nan:Te.number;case"boolean":return Te.boolean;case"function":return Te.function;case"bigint":return Te.bigint;case"symbol":return Te.symbol;case"object":return Array.isArray(t)?Te.array:t===null?Te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Te.promise:typeof Map<"u"&&t instanceof Map?Te.map:typeof Set<"u"&&t instanceof Set?Te.set:typeof Date<"u"&&t instanceof Date?Te.date:Te.object;default:return Te.unknown}},we=qt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Jve=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class ra extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,qt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ra.create=t=>new ra(t);const Pw=(t,e)=>{let n;switch(t.code){case we.invalid_type:t.received===Te.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case we.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,qt.jsonStringifyReplacer)}`;break;case we.unrecognized_keys:n=`Unrecognized key(s) in object: ${qt.joinValues(t.keys,", ")}`;break;case we.invalid_union:n="Invalid input";break;case we.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${qt.joinValues(t.options)}`;break;case we.invalid_enum_value:n=`Invalid enum value. Expected ${qt.joinValues(t.options)}, received '${t.received}'`;break;case we.invalid_arguments:n="Invalid function arguments";break;case we.invalid_return_type:n="Invalid function return type";break;case we.invalid_date:n="Invalid date";break;case we.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:qt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case we.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case we.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case we.custom:n="Invalid input";break;case we.invalid_intersection_types:n="Intersection results could not be merged";break;case we.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case we.not_finite:n="Number must be finite";break;default:n=e.defaultError,qt.assertNever(t)}return{message:n}};let QW=Pw;function eEe(t){QW=t}function h_(){return QW}const f_=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},tEe=[];function Me(t,e){const n=f_({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,h_(),Pw].filter(r=>!!r)});t.common.issues.push(n)}class ys{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return mt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ys.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return mt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const mt=Object.freeze({status:"aborted"}),ZW=t=>({status:"dirty",value:t}),Ds=t=>({status:"valid",value:t}),yT=t=>t.status==="aborted",wT=t=>t.status==="dirty",Ow=t=>t.status==="valid",p_=t=>typeof Promise<"u"&&t instanceof Promise;var et;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(et||(et={}));class Xa{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const M5=(t,e)=>{if(Ow(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ra(t.common.issues);return this._error=n,this._error}}};function Et(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class At{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Dl(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Dl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ys,ctx:{common:e.parent.common,data:e.data,parsedType:Dl(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(p_(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Dl(e)},i=this._parseSync({data:e,path:s.path,parent:s});return M5(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Dl(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(p_(s)?s:Promise.resolve(s));return M5(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:we.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new la({schema:this,typeName:ut.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Lc.create(this,this._def)}nullable(){return vh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return sa.create(this,this._def)}promise(){return tg.create(this,this._def)}or(e){return Mw.create([this,e],this._def)}and(e){return Lw.create(this,e,this._def)}transform(e){return new la({...Et(this._def),schema:this,typeName:ut.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Ww({...Et(this._def),innerType:this,defaultValue:n,typeName:ut.ZodDefault})}brand(){return new JW({typeName:ut.ZodBranded,type:this,...Et(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new w_({...Et(this._def),innerType:this,catchValue:n,typeName:ut.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return F0.create(this,e)}readonly(){return v_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const nEe=/^c[^\s-]{8,}$/i,rEe=/^[a-z][a-z0-9]*$/,sEe=/^[0-9A-HJKMNP-TV-Z]{26}$/,iEe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,oEe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,aEe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let kA;const cEe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,lEe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,uEe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function dEe(t,e){return!!((e==="v4"||!e)&&cEe.test(t)||(e==="v6"||!e)&&lEe.test(t))}class Xo extends At{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Te.string){const i=this._getOrReturnCtx(e);return Me(i,{code:we.invalid_type,expected:Te.string,received:i.parsedType}),mt}const r=new ys;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:we.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:we.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Me(s,{code:we.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Me(s,{code:we.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")oEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"email",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")kA||(kA=new RegExp(aEe,"u")),kA.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"emoji",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")iEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"uuid",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")nEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")rEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid2",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")sEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ulid",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Me(s,{validation:"url",code:we.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"regex",code:we.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Me(s,{code:we.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:we.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:we.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?uEe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{code:we.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?dEe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ip",code:we.invalid_string,message:i.message}),r.dirty()):qt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:we.invalid_string,...et.errToObj(r)})}_addCheck(e){return new Xo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...et.errToObj(e)})}url(e){return this._addCheck({kind:"url",...et.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...et.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...et.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...et.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...et.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...et.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...et.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...et.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...et.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...et.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...et.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...et.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...et.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...et.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...et.errToObj(n)})}nonempty(e){return this.min(1,et.errToObj(e))}trim(){return new Xo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Xo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Xo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Xo.create=t=>{var e;return new Xo({checks:[],typeName:ut.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Et(t)})};function hEe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class ku extends At{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Te.number){const i=this._getOrReturnCtx(e);return Me(i,{code:we.invalid_type,expected:Te.number,received:i.parsedType}),mt}let r;const s=new ys;for(const i of this._def.checks)i.kind==="int"?qt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:we.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:we.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:we.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?hEe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Me(r,{code:we.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:we.not_finite,message:i.message}),s.dirty()):qt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,et.toString(n))}gt(e,n){return this.setLimit("min",e,!1,et.toString(n))}lte(e,n){return this.setLimit("max",e,!0,et.toString(n))}lt(e,n){return this.setLimit("max",e,!1,et.toString(n))}setLimit(e,n,r,s){return new ku({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:et.toString(s)}]})}_addCheck(e){return new ku({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:et.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:et.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:et.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:et.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:et.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:et.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:et.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:et.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:et.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&qt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ku.create=t=>new ku({checks:[],typeName:ut.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Et(t)});class Du extends At{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Te.bigint){const i=this._getOrReturnCtx(e);return Me(i,{code:we.invalid_type,expected:Te.bigint,received:i.parsedType}),mt}let r;const s=new ys;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:we.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:we.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:we.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):qt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,et.toString(n))}gt(e,n){return this.setLimit("min",e,!1,et.toString(n))}lte(e,n){return this.setLimit("max",e,!0,et.toString(n))}lt(e,n){return this.setLimit("max",e,!1,et.toString(n))}setLimit(e,n,r,s){return new Du({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:et.toString(s)}]})}_addCheck(e){return new Du({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:et.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:et.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:et.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:et.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:et.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Du.create=t=>{var e;return new Du({checks:[],typeName:ut.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Et(t)})};class kw extends At{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Te.boolean){const r=this._getOrReturnCtx(e);return Me(r,{code:we.invalid_type,expected:Te.boolean,received:r.parsedType}),mt}return Ds(e.data)}}kw.create=t=>new kw({typeName:ut.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Et(t)});class wh extends At{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Te.date){const i=this._getOrReturnCtx(e);return Me(i,{code:we.invalid_type,expected:Te.date,received:i.parsedType}),mt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Me(i,{code:we.invalid_date}),mt}const r=new ys;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:we.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:we.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):qt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new wh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:et.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:et.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}wh.create=t=>new wh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ut.ZodDate,...Et(t)});class g_ extends At{_parse(e){if(this._getType(e)!==Te.symbol){const r=this._getOrReturnCtx(e);return Me(r,{code:we.invalid_type,expected:Te.symbol,received:r.parsedType}),mt}return Ds(e.data)}}g_.create=t=>new g_({typeName:ut.ZodSymbol,...Et(t)});class Dw extends At{_parse(e){if(this._getType(e)!==Te.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:we.invalid_type,expected:Te.undefined,received:r.parsedType}),mt}return Ds(e.data)}}Dw.create=t=>new Dw({typeName:ut.ZodUndefined,...Et(t)});class $w extends At{_parse(e){if(this._getType(e)!==Te.null){const r=this._getOrReturnCtx(e);return Me(r,{code:we.invalid_type,expected:Te.null,received:r.parsedType}),mt}return Ds(e.data)}}$w.create=t=>new $w({typeName:ut.ZodNull,...Et(t)});class eg extends At{constructor(){super(...arguments),this._any=!0}_parse(e){return Ds(e.data)}}eg.create=t=>new eg({typeName:ut.ZodAny,...Et(t)});class Vd extends At{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ds(e.data)}}Vd.create=t=>new Vd({typeName:ut.ZodUnknown,...Et(t)});class Zc extends At{_parse(e){const n=this._getOrReturnCtx(e);return Me(n,{code:we.invalid_type,expected:Te.never,received:n.parsedType}),mt}}Zc.create=t=>new Zc({typeName:ut.ZodNever,...Et(t)});class m_ extends At{_parse(e){if(this._getType(e)!==Te.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:we.invalid_type,expected:Te.void,received:r.parsedType}),mt}return Ds(e.data)}}m_.create=t=>new m_({typeName:ut.ZodVoid,...Et(t)});class sa extends At{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Te.array)return Me(n,{code:we.invalid_type,expected:Te.array,received:n.parsedType}),mt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Me(n,{code:o?we.too_big:we.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Me(n,{code:we.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Me(n,{code:we.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Xa(n,o,n.path,a)))).then(o=>ys.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Xa(n,o,n.path,a)));return ys.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new sa({...this._def,minLength:{value:e,message:et.toString(n)}})}max(e,n){return new sa({...this._def,maxLength:{value:e,message:et.toString(n)}})}length(e,n){return new sa({...this._def,exactLength:{value:e,message:et.toString(n)}})}nonempty(e){return this.min(1,e)}}sa.create=(t,e)=>new sa({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ut.ZodArray,...Et(e)});function $f(t){if(t instanceof Fn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Lc.create($f(r))}return new Fn({...t._def,shape:()=>e})}else return t instanceof sa?new sa({...t._def,type:$f(t.element)}):t instanceof Lc?Lc.create($f(t.unwrap())):t instanceof vh?vh.create($f(t.unwrap())):t instanceof Ja?Ja.create(t.items.map(e=>$f(e))):t}class Fn extends At{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=qt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Te.object){const l=this._getOrReturnCtx(e);return Me(l,{code:we.invalid_type,expected:Te.object,received:l.parsedType}),mt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Zc&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Xa(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Zc){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Me(s,{code:we.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Xa(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>ys.mergeObjectSync(r,l)):ys.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return et.errToObj,new Fn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=et.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Fn({...this._def,unknownKeys:"strip"})}passthrough(){return new Fn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Fn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Fn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ut.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Fn({...this._def,catchall:e})}pick(e){const n={};return qt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Fn({...this._def,shape:()=>n})}omit(e){const n={};return qt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Fn({...this._def,shape:()=>n})}deepPartial(){return $f(this)}partial(e){const n={};return qt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Fn({...this._def,shape:()=>n})}required(e){const n={};return qt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Lc;)i=i._def.innerType;n[r]=i}}),new Fn({...this._def,shape:()=>n})}keyof(){return XW(qt.objectKeys(this.shape))}}Fn.create=(t,e)=>new Fn({shape:()=>t,unknownKeys:"strip",catchall:Zc.create(),typeName:ut.ZodObject,...Et(e)});Fn.strictCreate=(t,e)=>new Fn({shape:()=>t,unknownKeys:"strict",catchall:Zc.create(),typeName:ut.ZodObject,...Et(e)});Fn.lazycreate=(t,e)=>new Fn({shape:t,unknownKeys:"strip",catchall:Zc.create(),typeName:ut.ZodObject,...Et(e)});class Mw extends At{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ra(a.ctx.common.issues));return Me(n,{code:we.invalid_union,unionErrors:o}),mt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new ra(c));return Me(n,{code:we.invalid_union,unionErrors:a}),mt}}get options(){return this._def.options}}Mw.create=(t,e)=>new Mw({options:t,typeName:ut.ZodUnion,...Et(e)});const Wv=t=>t instanceof Bw?Wv(t.schema):t instanceof la?Wv(t.innerType()):t instanceof jw?[t.value]:t instanceof $u?t.options:t instanceof Fw?Object.keys(t.enum):t instanceof Ww?Wv(t._def.innerType):t instanceof Dw?[void 0]:t instanceof $w?[null]:null;class s1 extends At{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.object)return Me(n,{code:we.invalid_type,expected:Te.object,received:n.parsedType}),mt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Me(n,{code:we.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),mt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Wv(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new s1({typeName:ut.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Et(r)})}}function bT(t,e){const n=Dl(t),r=Dl(e);if(t===e)return{valid:!0,data:t};if(n===Te.object&&r===Te.object){const s=qt.objectKeys(e),i=qt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=bT(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Te.array&&r===Te.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=bT(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Te.date&&r===Te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Lw extends At{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(yT(i)||yT(o))return mt;const a=bT(i.value,o.value);return a.valid?((wT(i)||wT(o))&&n.dirty(),{status:n.value,value:a.data}):(Me(r,{code:we.invalid_intersection_types}),mt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Lw.create=(t,e,n)=>new Lw({left:t,right:e,typeName:ut.ZodIntersection,...Et(n)});class Ja extends At{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.array)return Me(r,{code:we.invalid_type,expected:Te.array,received:r.parsedType}),mt;if(r.data.length<this._def.items.length)return Me(r,{code:we.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mt;!this._def.rest&&r.data.length>this._def.items.length&&(Me(r,{code:we.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Xa(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ys.mergeArray(n,o)):ys.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Ja({...this._def,rest:e})}}Ja.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ja({items:t,typeName:ut.ZodTuple,rest:null,...Et(e)})};class Uw extends At{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.object)return Me(r,{code:we.invalid_type,expected:Te.object,received:r.parsedType}),mt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Xa(r,a,r.path,a)),value:o._parse(new Xa(r,r.data[a],r.path,a))});return r.common.async?ys.mergeObjectAsync(n,s):ys.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof At?new Uw({keyType:e,valueType:n,typeName:ut.ZodRecord,...Et(r)}):new Uw({keyType:Xo.create(),valueType:e,typeName:ut.ZodRecord,...Et(n)})}}class y_ extends At{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.map)return Me(r,{code:we.invalid_type,expected:Te.map,received:r.parsedType}),mt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Xa(r,a,r.path,[l,"key"])),value:i._parse(new Xa(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return mt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return mt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}y_.create=(t,e,n)=>new y_({valueType:e,keyType:t,typeName:ut.ZodMap,...Et(n)});class bh extends At{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.set)return Me(r,{code:we.invalid_type,expected:Te.set,received:r.parsedType}),mt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Me(r,{code:we.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Me(r,{code:we.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return mt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Xa(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new bh({...this._def,minSize:{value:e,message:et.toString(n)}})}max(e,n){return new bh({...this._def,maxSize:{value:e,message:et.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}bh.create=(t,e)=>new bh({valueType:t,minSize:null,maxSize:null,typeName:ut.ZodSet,...Et(e)});class pp extends At{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.function)return Me(n,{code:we.invalid_type,expected:Te.function,received:n.parsedType}),mt;function r(a,c){return f_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,h_(),Pw].filter(l=>!!l),issueData:{code:we.invalid_arguments,argumentsError:c}})}function s(a,c){return f_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,h_(),Pw].filter(l=>!!l),issueData:{code:we.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof tg){const a=this;return Ds(async function(...c){const l=new ra([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Ds(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new ra([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new ra([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new pp({...this._def,args:Ja.create(e).rest(Vd.create())})}returns(e){return new pp({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new pp({args:e||Ja.create([]).rest(Vd.create()),returns:n||Vd.create(),typeName:ut.ZodFunction,...Et(r)})}}class Bw extends At{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Bw.create=(t,e)=>new Bw({getter:t,typeName:ut.ZodLazy,...Et(e)});class jw extends At{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Me(n,{received:n.data,code:we.invalid_literal,expected:this._def.value}),mt}return{status:"valid",value:e.data}}get value(){return this._def.value}}jw.create=(t,e)=>new jw({value:t,typeName:ut.ZodLiteral,...Et(e)});function XW(t,e){return new $u({values:t,typeName:ut.ZodEnum,...Et(e)})}class $u extends At{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Me(n,{expected:qt.joinValues(r),received:n.parsedType,code:we.invalid_type}),mt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Me(n,{received:n.data,code:we.invalid_enum_value,options:r}),mt}return Ds(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return $u.create(e)}exclude(e){return $u.create(this.options.filter(n=>!e.includes(n)))}}$u.create=XW;class Fw extends At{_parse(e){const n=qt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Te.string&&r.parsedType!==Te.number){const s=qt.objectValues(n);return Me(r,{expected:qt.joinValues(s),received:r.parsedType,code:we.invalid_type}),mt}if(n.indexOf(e.data)===-1){const s=qt.objectValues(n);return Me(r,{received:r.data,code:we.invalid_enum_value,options:s}),mt}return Ds(e.data)}get enum(){return this._def.values}}Fw.create=(t,e)=>new Fw({values:t,typeName:ut.ZodNativeEnum,...Et(e)});class tg extends At{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.promise&&n.common.async===!1)return Me(n,{code:we.invalid_type,expected:Te.promise,received:n.parsedType}),mt;const r=n.parsedType===Te.promise?n.data:Promise.resolve(n.data);return Ds(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}tg.create=(t,e)=>new tg({type:t,typeName:ut.ZodPromise,...Et(e)});class la extends At{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ut.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Me(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?mt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?mt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Ow(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Ow(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);qt.assertNever(s)}}la.create=(t,e,n)=>new la({schema:t,typeName:ut.ZodEffects,effect:e,...Et(n)});la.createWithPreprocess=(t,e,n)=>new la({schema:e,effect:{type:"preprocess",transform:t},typeName:ut.ZodEffects,...Et(n)});class Lc extends At{_parse(e){return this._getType(e)===Te.undefined?Ds(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Lc.create=(t,e)=>new Lc({innerType:t,typeName:ut.ZodOptional,...Et(e)});class vh extends At{_parse(e){return this._getType(e)===Te.null?Ds(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vh.create=(t,e)=>new vh({innerType:t,typeName:ut.ZodNullable,...Et(e)});class Ww extends At{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Te.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Ww.create=(t,e)=>new Ww({innerType:t,typeName:ut.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Et(e)});class w_ extends At{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return p_(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ra(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ra(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}w_.create=(t,e)=>new w_({innerType:t,typeName:ut.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Et(e)});class b_ extends At{_parse(e){if(this._getType(e)!==Te.nan){const r=this._getOrReturnCtx(e);return Me(r,{code:we.invalid_type,expected:Te.nan,received:r.parsedType}),mt}return{status:"valid",value:e.data}}}b_.create=t=>new b_({typeName:ut.ZodNaN,...Et(t)});const fEe=Symbol("zod_brand");class JW extends At{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class F0 extends At{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?mt:i.status==="dirty"?(n.dirty(),ZW(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?mt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new F0({in:e,out:n,typeName:ut.ZodPipeline})}}class v_ extends At{_parse(e){const n=this._def.innerType._parse(e);return Ow(n)&&(n.value=Object.freeze(n.value)),n}}v_.create=(t,e)=>new v_({innerType:t,typeName:ut.ZodReadonly,...Et(e)});const ez=(t,e={},n)=>t?eg.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):eg.create(),pEe={object:Fn.lazycreate};var ut;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ut||(ut={}));const gEe=(t,e={message:`Input not instance of ${t.name}`})=>ez(n=>n instanceof t,e),tz=Xo.create,nz=ku.create,mEe=b_.create,yEe=Du.create,rz=kw.create,wEe=wh.create,bEe=g_.create,vEe=Dw.create,EEe=$w.create,_Ee=eg.create,CEe=Vd.create,SEe=Zc.create,AEe=m_.create,IEe=sa.create,NEe=Fn.create,xEe=Fn.strictCreate,TEe=Mw.create,REe=s1.create,PEe=Lw.create,OEe=Ja.create,kEe=Uw.create,DEe=y_.create,$Ee=bh.create,MEe=pp.create,LEe=Bw.create,UEe=jw.create,BEe=$u.create,jEe=Fw.create,FEe=tg.create,L5=la.create,WEe=Lc.create,zEe=vh.create,HEe=la.createWithPreprocess,qEe=F0.create,VEe=()=>tz().optional(),GEe=()=>nz().optional(),KEe=()=>rz().optional(),YEe={string:t=>Xo.create({...t,coerce:!0}),number:t=>ku.create({...t,coerce:!0}),boolean:t=>kw.create({...t,coerce:!0}),bigint:t=>Du.create({...t,coerce:!0}),date:t=>wh.create({...t,coerce:!0})},QEe=mt;var v=Object.freeze({__proto__:null,defaultErrorMap:Pw,setErrorMap:eEe,getErrorMap:h_,makeIssue:f_,EMPTY_PATH:tEe,addIssueToContext:Me,ParseStatus:ys,INVALID:mt,DIRTY:ZW,OK:Ds,isAborted:yT,isDirty:wT,isValid:Ow,isAsync:p_,get util(){return qt},get objectUtil(){return mT},ZodParsedType:Te,getParsedType:Dl,ZodType:At,ZodString:Xo,ZodNumber:ku,ZodBigInt:Du,ZodBoolean:kw,ZodDate:wh,ZodSymbol:g_,ZodUndefined:Dw,ZodNull:$w,ZodAny:eg,ZodUnknown:Vd,ZodNever:Zc,ZodVoid:m_,ZodArray:sa,ZodObject:Fn,ZodUnion:Mw,ZodDiscriminatedUnion:s1,ZodIntersection:Lw,ZodTuple:Ja,ZodRecord:Uw,ZodMap:y_,ZodSet:bh,ZodFunction:pp,ZodLazy:Bw,ZodLiteral:jw,ZodEnum:$u,ZodNativeEnum:Fw,ZodPromise:tg,ZodEffects:la,ZodTransformer:la,ZodOptional:Lc,ZodNullable:vh,ZodDefault:Ww,ZodCatch:w_,ZodNaN:b_,BRAND:fEe,ZodBranded:JW,ZodPipeline:F0,ZodReadonly:v_,custom:ez,Schema:At,ZodSchema:At,late:pEe,get ZodFirstPartyTypeKind(){return ut},coerce:YEe,any:_Ee,array:IEe,bigint:yEe,boolean:rz,date:wEe,discriminatedUnion:REe,effect:L5,enum:BEe,function:MEe,instanceof:gEe,intersection:PEe,lazy:LEe,literal:UEe,map:DEe,nan:mEe,nativeEnum:jEe,never:SEe,null:EEe,nullable:zEe,number:nz,object:NEe,oboolean:KEe,onumber:GEe,optional:WEe,ostring:VEe,pipeline:qEe,preprocess:HEe,promise:FEe,record:kEe,set:$Ee,strictObject:xEe,string:tz,symbol:bEe,transformer:L5,tuple:OEe,undefined:vEe,union:TEe,unknown:CEe,void:AEe,NEVER:QEe,ZodIssueCode:we,quotelessJson:Jve,ZodError:ra});const Gn=v.object({message:v.string()});function De(t){return v.literal(Le[t])}v.object({accessList:v.array(v.string()),blockHash:v.string().nullable(),blockNumber:v.string().nullable(),chainId:v.string().or(v.number()),from:v.string(),gas:v.string(),hash:v.string(),input:v.string().nullable(),maxFeePerGas:v.string(),maxPriorityFeePerGas:v.string(),nonce:v.string(),r:v.string(),s:v.string(),to:v.string(),transactionIndex:v.string().nullable(),type:v.string(),v:v.string(),value:v.string()});const ZEe=v.object({chainId:v.string().or(v.number())}),XEe=v.object({email:v.string().email()}),JEe=v.object({otp:v.string()}),e_e=v.object({uri:v.string(),preferredAccountType:v.optional(v.string()),chainId:v.optional(v.string().or(v.number()))}),t_e=v.object({chainId:v.optional(v.string().or(v.number())),preferredAccountType:v.optional(v.string()),socialUri:v.optional(v.string())}),n_e=v.object({provider:v.enum(["google","github","apple","facebook","x","discord"])}),r_e=v.object({email:v.string().email()}),s_e=v.object({otp:v.string()}),i_e=v.object({otp:v.string()}),o_e=v.object({themeMode:v.optional(v.enum(["light","dark"])),themeVariables:v.optional(v.record(v.string(),v.string().or(v.number()))),w3mThemeVariables:v.optional(v.record(v.string(),v.string()))}),a_e=v.object({metadata:v.object({name:v.string(),description:v.string(),url:v.string(),icons:v.array(v.string())}).optional(),sdkVersion:v.string().optional(),sdkType:v.string().optional(),projectId:v.string()}),c_e=v.object({type:v.string()}),l_e=v.object({action:v.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),u_e=v.object({url:v.string()}),d_e=v.object({userName:v.string()}),h_e=v.object({email:v.string().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),accounts:v.array(v.object({address:v.string(),type:v.enum([Zr.ACCOUNT_TYPES.EOA,Zr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:v.string().optional().nullable(),preferredAccountType:v.optional(v.string())}),f_e=v.object({action:v.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),p_e=v.object({email:v.string().email().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),smartAccountDeployed:v.optional(v.boolean()),accounts:v.array(v.object({address:v.string(),type:v.enum([Zr.ACCOUNT_TYPES.EOA,Zr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:v.optional(v.string())}),g_e=v.object({uri:v.string()}),m_e=v.object({isConnected:v.boolean()}),y_e=v.object({chainId:v.string().or(v.number())}),w_e=v.object({chainId:v.string().or(v.number())}),b_e=v.object({newEmail:v.string().email()}),v_e=v.object({smartAccountEnabledNetworks:v.array(v.number())});v.object({address:v.string(),isDeployed:v.boolean()});const E_e=v.object({version:v.string().optional()}),__e=v.object({type:v.string(),address:v.string()}),C_e=v.any(),S_e=v.object({method:v.literal("eth_accounts")}),A_e=v.object({method:v.literal("eth_blockNumber")}),I_e=v.object({method:v.literal("eth_call"),params:v.array(v.any())}),N_e=v.object({method:v.literal("eth_chainId")}),x_e=v.object({method:v.literal("eth_estimateGas"),params:v.array(v.any())}),T_e=v.object({method:v.literal("eth_feeHistory"),params:v.array(v.any())}),R_e=v.object({method:v.literal("eth_gasPrice")}),P_e=v.object({method:v.literal("eth_getAccount"),params:v.array(v.any())}),O_e=v.object({method:v.literal("eth_getBalance"),params:v.array(v.any())}),k_e=v.object({method:v.literal("eth_getBlockByHash"),params:v.array(v.any())}),D_e=v.object({method:v.literal("eth_getBlockByNumber"),params:v.array(v.any())}),$_e=v.object({method:v.literal("eth_getBlockReceipts"),params:v.array(v.any())}),M_e=v.object({method:v.literal("eth_getBlockTransactionCountByHash"),params:v.array(v.any())}),L_e=v.object({method:v.literal("eth_getBlockTransactionCountByNumber"),params:v.array(v.any())}),U_e=v.object({method:v.literal("eth_getCode"),params:v.array(v.any())}),B_e=v.object({method:v.literal("eth_getFilterChanges"),params:v.array(v.any())}),j_e=v.object({method:v.literal("eth_getFilterLogs"),params:v.array(v.any())}),F_e=v.object({method:v.literal("eth_getLogs"),params:v.array(v.any())}),W_e=v.object({method:v.literal("eth_getProof"),params:v.array(v.any())}),z_e=v.object({method:v.literal("eth_getStorageAt"),params:v.array(v.any())}),H_e=v.object({method:v.literal("eth_getTransactionByBlockHashAndIndex"),params:v.array(v.any())}),q_e=v.object({method:v.literal("eth_getTransactionByBlockNumberAndIndex"),params:v.array(v.any())}),V_e=v.object({method:v.literal("eth_getTransactionByHash"),params:v.array(v.any())}),G_e=v.object({method:v.literal("eth_getTransactionCount"),params:v.array(v.any())}),K_e=v.object({method:v.literal("eth_getTransactionReceipt"),params:v.array(v.any())}),Y_e=v.object({method:v.literal("eth_getUncleCountByBlockHash"),params:v.array(v.any())}),Q_e=v.object({method:v.literal("eth_getUncleCountByBlockNumber"),params:v.array(v.any())}),Z_e=v.object({method:v.literal("eth_maxPriorityFeePerGas")}),X_e=v.object({method:v.literal("eth_newBlockFilter")}),J_e=v.object({method:v.literal("eth_newFilter"),params:v.array(v.any())}),eCe=v.object({method:v.literal("eth_newPendingTransactionFilter")}),tCe=v.object({method:v.literal("eth_sendRawTransaction"),params:v.array(v.any())}),nCe=v.object({method:v.literal("eth_syncing"),params:v.array(v.any())}),rCe=v.object({method:v.literal("eth_uninstallFilter"),params:v.array(v.any())}),U5=v.object({method:v.literal("personal_sign"),params:v.array(v.any())}),sCe=v.object({method:v.literal("eth_signTypedData_v4"),params:v.array(v.any())}),iCe=v.object({method:v.literal("eth_sendTransaction"),params:v.array(v.any())}),oCe=v.object({method:v.literal("solana_signMessage"),params:v.object({message:v.string(),pubkey:v.string()})}),aCe=v.object({method:v.literal("solana_signTransaction"),params:v.object({transaction:v.string()})}),cCe=v.object({method:v.literal("solana_signAllTransactions"),params:v.object({transactions:v.array(v.string())})}),lCe=v.object({method:v.literal("solana_signAndSendTransaction"),params:v.object({transaction:v.string(),options:v.object({skipPreflight:v.boolean().optional(),preflightCommitment:v.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:v.number().optional(),minContextSlot:v.number().optional()}).optional()})}),uCe=v.object({method:v.literal("wallet_sendCalls"),params:v.array(v.object({chainId:v.string().or(v.number()).optional(),from:v.string().optional(),version:v.string().optional(),capabilities:v.any().optional(),calls:v.array(v.object({to:v.string().startsWith("0x"),data:v.string().startsWith("0x").optional(),value:v.string().optional()}))}))}),dCe=v.object({method:v.literal("wallet_getCallsStatus"),params:v.array(v.string())}),hCe=v.object({method:v.literal("wallet_getCapabilities")}),fCe=v.object({method:v.literal("wallet_grantPermissions"),params:v.array(v.any())}),pCe=v.object({method:v.literal("wallet_revokePermissions"),params:v.any()}),gCe=v.object({method:v.literal("wallet_getAssets"),params:v.any()}),B5=v.object({token:v.string()}),$e=v.object({id:v.string().optional()}),ym={appEvent:$e.extend({type:De("APP_SWITCH_NETWORK"),payload:ZEe}).or($e.extend({type:De("APP_CONNECT_EMAIL"),payload:XEe})).or($e.extend({type:De("APP_CONNECT_DEVICE")})).or($e.extend({type:De("APP_CONNECT_OTP"),payload:JEe})).or($e.extend({type:De("APP_CONNECT_SOCIAL"),payload:e_e})).or($e.extend({type:De("APP_GET_FARCASTER_URI")})).or($e.extend({type:De("APP_CONNECT_FARCASTER")})).or($e.extend({type:De("APP_GET_USER"),payload:v.optional(t_e)})).or($e.extend({type:De("APP_GET_SOCIAL_REDIRECT_URI"),payload:n_e})).or($e.extend({type:De("APP_SIGN_OUT")})).or($e.extend({type:De("APP_IS_CONNECTED"),payload:v.optional(B5)})).or($e.extend({type:De("APP_GET_CHAIN_ID")})).or($e.extend({type:De("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or($e.extend({type:De("APP_INIT_SMART_ACCOUNT")})).or($e.extend({type:De("APP_SET_PREFERRED_ACCOUNT"),payload:c_e})).or($e.extend({type:De("APP_RPC_REQUEST"),payload:U5.or(gCe).or(S_e).or(A_e).or(I_e).or(N_e).or(x_e).or(T_e).or(R_e).or(P_e).or(O_e).or(k_e).or(D_e).or($_e).or(M_e).or(L_e).or(U_e).or(B_e).or(j_e).or(F_e).or(W_e).or(z_e).or(H_e).or(q_e).or(V_e).or(G_e).or(K_e).or(Y_e).or(Q_e).or(Z_e).or(X_e).or(J_e).or(eCe).or(tCe).or(nCe).or(rCe).or(U5).or(sCe).or(iCe).or(oCe).or(aCe).or(cCe).or(lCe).or(dCe).or(uCe).or(hCe).or(fCe).or(pCe)})).or($e.extend({type:De("APP_UPDATE_EMAIL"),payload:r_e})).or($e.extend({type:De("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:s_e})).or($e.extend({type:De("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:i_e})).or($e.extend({type:De("APP_SYNC_THEME"),payload:o_e})).or($e.extend({type:De("APP_SYNC_DAPP_DATA"),payload:a_e})).or($e.extend({type:De("APP_RELOAD")})),frameEvent:$e.extend({type:De("FRAME_SWITCH_NETWORK_ERROR"),payload:Gn}).or($e.extend({type:De("FRAME_SWITCH_NETWORK_SUCCESS"),payload:w_e})).or($e.extend({type:De("FRAME_CONNECT_EMAIL_SUCCESS"),payload:l_e})).or($e.extend({type:De("FRAME_CONNECT_EMAIL_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:u_e})).or($e.extend({type:De("FRAME_GET_FARCASTER_URI_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:d_e})).or($e.extend({type:De("FRAME_CONNECT_FARCASTER_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_CONNECT_OTP_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_CONNECT_OTP_SUCCESS")})).or($e.extend({type:De("FRAME_CONNECT_DEVICE_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_CONNECT_DEVICE_SUCCESS")})).or($e.extend({type:De("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:h_e})).or($e.extend({type:De("FRAME_CONNECT_SOCIAL_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_GET_USER_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_GET_USER_SUCCESS"),payload:p_e})).or($e.extend({type:De("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:g_e})).or($e.extend({type:De("FRAME_SIGN_OUT_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_SIGN_OUT_SUCCESS")})).or($e.extend({type:De("FRAME_IS_CONNECTED_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_IS_CONNECTED_SUCCESS"),payload:m_e})).or($e.extend({type:De("FRAME_GET_CHAIN_ID_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_GET_CHAIN_ID_SUCCESS"),payload:y_e})).or($e.extend({type:De("FRAME_RPC_REQUEST_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_RPC_REQUEST_SUCCESS"),payload:C_e})).or($e.extend({type:De("FRAME_SESSION_UPDATE"),payload:B5})).or($e.extend({type:De("FRAME_UPDATE_EMAIL_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_UPDATE_EMAIL_SUCCESS"),payload:f_e})).or($e.extend({type:De("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or($e.extend({type:De("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:b_e})).or($e.extend({type:De("FRAME_SYNC_THEME_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_SYNC_THEME_SUCCESS")})).or($e.extend({type:De("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or($e.extend({type:De("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:v_e})).or($e.extend({type:De("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:__e})).or($e.extend({type:De("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_READY"),payload:E_e})).or($e.extend({type:De("FRAME_RELOAD_ERROR"),payload:Gn})).or($e.extend({type:De("FRAME_RELOAD_SUCCESS")}))};function DA(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let mCe=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=ke.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!DA(Le.FRAME_EVENT_KEY,l))return;const u=ym.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Ri.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Ri.isClient&&window.addEventListener("message",({data:o})=>{if(!DA(Le.FRAME_EVENT_KEY,o))return;const a=ym.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Ri.isClient&&window.addEventListener("message",({data:o})=>{if(!DA(Le.APP_EVENT_KEY,o))return;const a=ym.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Ri.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");ym.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Ri.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");ym.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Ri.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${tge}?projectId=${e}&chainId=${r}&version=${rge}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},yCe=class{constructor(e){var i;const n=zh({level:nge}),{logger:r,chunkLoggerController:s}=YC({opts:n});this.logger=es(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},wCe=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new yCe(e)),this.abortController=i,this.w3mFrame=new mCe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!qr.get(Le.EMAIL_LOGIN_USED_KEY)}getEmail(){return qr.get(Le.EMAIL)}getUsername(){return qr.get(Le.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Le.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Ri.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Le.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Le.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Le.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Le.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Le.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Le.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Le.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Le.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Le.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Le.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Le.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Le.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Le.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Le.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Le.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Le.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Le.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Le.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Le.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Le.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Zr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Le.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Le.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Le.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Zr.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Le.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Zr.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Le.APP_SYNC_DAPP_DATA,Le.APP_SYNC_THEME,Le.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Le.APP_CONNECT_EMAIL,Le.APP_CONNECT_DEVICE,Le.APP_CONNECT_OTP,Le.APP_CONNECT_SOCIAL,Le.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,E,_;w.id===u&&((E=y==null?void 0:(b=y.logger).info)==null||E.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((_=w.payload)==null?void 0:_.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){qr.set(Le.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){qr.set(Le.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&qr.set(Le.EMAIL,e),qr.set(Le.EMAIL_LOGIN_USED_KEY,"true"),qr.delete(Le.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){qr.delete(Le.EMAIL_LOGIN_USED_KEY),qr.delete(Le.EMAIL),qr.delete(Le.LAST_USED_CHAIN_KEY),qr.delete(Le.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&qr.set(Le.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=qr.get(Le.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){qr.set(Le.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},bCe=class zv{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return zv.instance||(zv.instance=new wCe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),zv.instance}};function vCe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Nr(t,...e){try{return vCe(t(...e))}catch(n){return Promise.reject(n)}}function ECe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function _Ce(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Hv(t){if(ECe(t))return String(t);if(_Ce(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Hv(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const vT="base64:";function CCe(t){return typeof t=="string"?t:vT+ICe(t)}function SCe(t){return typeof t!="string"||!t.startsWith(vT)?t:ACe(t.slice(vT.length))}function ACe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function ICe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ys(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function NCe(...t){return Ys(t.join(":"))}function tv(t){return t=Ys(t),t?t+":":""}function xCe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function TCe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const RCe="memory",PCe=()=>{const t=new Map;return{name:RCe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function OCe(t={}){const e={mounts:{"":t.driver||PCe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Ys(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await j5(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=Ys(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},E=n(w);f(E).items.push({key:w,value:y,relativeKey:E.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ys(l);const{relativeKey:d,driver:h}=n(l);return Nr(h.hasItem,d,u)},getItem(l,u={}){l=Ys(l);const{relativeKey:d,driver:h}=n(l);return Nr(h.getItem,d,u).then(f=>Kb(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Nr(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:NCe(d.base,f.key),value:Kb(f.value)}))):Promise.all(d.items.map(h=>Nr(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:Kb(f)})))))},getItemRaw(l,u={}){l=Ys(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Nr(h.getItemRaw,d,u):Nr(h.getItem,d,u).then(f=>SCe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ys(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Nr(f.setItem,h,Hv(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Nr(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:Hv(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Nr(d.driver.setItem,h.relativeKey,Hv(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ys(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Nr(f.setItemRaw,h,u,d);else if(f.setItem)await Nr(f.setItem,h,CCe(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ys(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Nr(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Nr(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ys(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Nr(h.getMeta,d,u)),!u.nativeOnly){const p=await Nr(h.getItem,d+"$",u).then(g=>Kb(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=tv(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await Nr(y.driver.getKeys,y.relativeBase,u);for(const E of b){const _=y.mountpoint+Ys(E);h.some(C=>_.startsWith(C))||f.push(_)}h=[y.mountpoint,...h.filter(E=>!E.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||xCe(y,u.maxDepth))&&TCe(y,l))},async clear(l,u={}){l=tv(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Nr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>F5(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=tv(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(j5(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=tv(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await F5(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ys(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ys(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function j5(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function F5(t){typeof t.dispose=="function"&&await Nr(t.dispose)}const kCe="idb-keyval";var DCe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=nW(t.dbName,t.storeName)),{name:kCe,options:t,async hasItem(s){return!(typeof await H$(n(s),r)>"u")},async getItem(s){return await H$(n(s),r)??null},setItem(s,i){return sme(n(s),i,r)},removeItem(s){return ime(n(s),r)},getKeys(){return cme(r)},clear(){return ome(r)}}};const $Ce="WALLET_CONNECT_V2_INDEXED_DB",MCe="keyvaluestorage";let LCe=class{constructor(){this.indexedDb=OCe({driver:DCe({dbName:$Ce,storeName:MCe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Qc(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var $A=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qv={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof $A<"u"&&$A.localStorage?qv.exports=$A.localStorage:typeof window<"u"&&window.localStorage?qv.exports=window.localStorage:qv.exports=new e})();function UCe(t){var e;return[t[0],mh((e=t[1])!=null?e:"")]}let BCe=class{constructor(){this.localStorage=qv.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(UCe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return mh(n)}async setItem(e,n){this.localStorage.setItem(e,Qc(n))}async removeItem(e){this.localStorage.removeItem(e)}};const jCe="wc_storage_version",W5=1,FCe=async(t,e,n)=>{const r=jCe,s=await e.getItem(r);if(s&&s>=W5){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,W5),n(e),WCe(t,o)},WCe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let zCe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new BCe;this.storage=e;try{const n=new LCe;FCe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var HCe=Object.defineProperty,qCe=(t,e,n)=>e in t?HCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,z5=(t,e,n)=>qCe(t,typeof e!="symbol"?e+"":e,n);let VCe=class extends jh{constructor(e){super(),this.opts=e,z5(this,"protocol","wc"),z5(this,"version",2)}};var GCe=Object.defineProperty,KCe=(t,e,n)=>e in t?GCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,YCe=(t,e,n)=>KCe(t,e+"",n);let QCe=class extends jh{constructor(e,n){super(),this.core=e,this.logger=n,YCe(this,"records",new Map)}},ZCe=class{constructor(e,n){this.logger=e,this.core=n}},XCe=class extends jh{constructor(e,n){super(),this.relayer=e,this.logger=n}},JCe=class extends jh{constructor(e){super()}},e1e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},t1e=class extends jh{constructor(e,n){super(),this.relayer=e,this.logger=n}},n1e=class extends jh{constructor(e,n){super(),this.core=e,this.logger=n}},r1e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},s1e=class{constructor(e,n){this.projectId=e,this.logger=n}},i1e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var o1e=Object.defineProperty,a1e=(t,e,n)=>e in t?o1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H5=(t,e,n)=>a1e(t,typeof e!="symbol"?e+"":e,n);let c1e=class{constructor(e){this.opts=e,H5(this,"protocol","wc"),H5(this,"version",2)}},l1e=class{constructor(e){this.client=e}};function zw(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function q5(t){return zw(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const sz="2.23.2";let wm={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${sz}`};class Eh extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Eh?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Eh&&n.cause.docsPath||n.docsPath,i=(a=wm.getDocsUrl)==null?void 0:a.call(wm,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...wm.version?[`Version: ${wm.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=sz}walk(e){return iz(this,e)}}function iz(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?iz(t.cause,e):e?null:t}class oz extends Eh{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function $g(t,{dir:e,size:n=32}={}){return typeof t=="string"?u1e(t,{dir:e,size:n}):d1e(t,{dir:e,size:n})}function u1e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new oz({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function d1e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new oz({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class h1e extends Eh{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class f1e extends Eh{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Mg(t,{size:e}){if(q5(t)>e)throw new f1e({givenSize:q5(t),maxSize:e})}function ET(t,e={}){const{signed:n}=e;e.size&&Mg(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function p1e(t,e={}){return Number(ET(t,e))}const g1e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _T(t,e={}){return typeof t=="number"||typeof t=="bigint"?cz(t,e):typeof t=="string"?w1e(t,e):typeof t=="boolean"?m1e(t,e):az(t,e)}function m1e(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Mg(n,{size:e.size}),$g(n,{size:e.size})):n}function az(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=g1e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Mg(r,{size:e.size}),$g(r,{dir:"right",size:e.size})):r}function cz(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new h1e({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?$g(a,{size:r}):a}const y1e=new TextEncoder;function w1e(t,e={}){const n=y1e.encode(t);return az(n,e)}const b1e=new TextEncoder;function v1e(t,e={}){return typeof t=="number"||typeof t=="bigint"?_1e(t,e):typeof t=="boolean"?E1e(t,e):zw(t)?lz(t,e):uz(t,e)}function E1e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Mg(n,{size:e.size}),$g(n,{size:e.size})):n}const gc={zero:48,nine:57,A:65,F:70,a:97,f:102};function V5(t){if(t>=gc.zero&&t<=gc.nine)return t-gc.zero;if(t>=gc.A&&t<=gc.F)return t-(gc.A-10);if(t>=gc.a&&t<=gc.f)return t-(gc.a-10)}function lz(t,e={}){let n=t;e.size&&(Mg(n,{size:e.size}),n=$g(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=V5(r.charCodeAt(a++)),l=V5(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Eh(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function _1e(t,e){const n=cz(t,e);return lz(n)}function uz(t,e={}){const n=b1e.encode(t);return typeof e.size=="number"?(Mg(n,{size:e.size}),$g(n,{dir:"right",size:e.size})):n}function E_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function C1e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function i1(t,...e){if(!C1e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function bMe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");E_(t.outputLen),E_(t.blockLen)}function G5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function S1e(t,e){i1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const nv=BigInt(2**32-1),K5=BigInt(32);function A1e(t,e=!1){return e?{h:Number(t&nv),l:Number(t>>K5&nv)}:{h:Number(t>>K5&nv)|0,l:Number(t&nv)|0}}function I1e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=A1e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const N1e=(t,e,n)=>t<<n|e>>>32-n,x1e=(t,e,n)=>e<<n|t>>>32-n,T1e=(t,e,n)=>e<<n-32|t>>>64-n,R1e=(t,e,n)=>t<<n-32|e>>>64-n,ff=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function P1e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function vMe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function EMe(t,e){return t<<32-e|t>>>e}const Y5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function O1e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Q5(t){for(let e=0;e<t.length;e++)t[e]=O1e(t[e])}function k1e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function dz(t){return typeof t=="string"&&(t=k1e(t)),i1(t),t}function _Me(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];i1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class D1e{clone(){return this._cloneInto()}}function $1e(t){const e=r=>t().update(dz(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function CMe(t=32){if(ff&&typeof ff.getRandomValues=="function")return ff.getRandomValues(new Uint8Array(t));if(ff&&typeof ff.randomBytes=="function")return ff.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const hz=[],fz=[],pz=[],M1e=BigInt(0),bm=BigInt(1),L1e=BigInt(2),U1e=BigInt(7),B1e=BigInt(256),j1e=BigInt(113);for(let t=0,e=bm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],hz.push(2*(5*r+n)),fz.push((t+1)*(t+2)/2%64);let s=M1e;for(let i=0;i<7;i++)e=(e<<bm^(e>>U1e)*j1e)%B1e,e&L1e&&(s^=bm<<(bm<<BigInt(i))-bm);pz.push(s)}const[F1e,W1e]=I1e(pz,!0),Z5=(t,e,n)=>n>32?T1e(t,e,n):N1e(t,e,n),X5=(t,e,n)=>n>32?R1e(t,e,n):x1e(t,e,n);function z1e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Z5(l,u,1)^n[a],h=X5(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=fz[o],c=Z5(s,i,a),l=X5(s,i,a),u=hz[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=F1e[r],t[1]^=W1e[r]}n.fill(0)}class tk extends D1e{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,E_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=P1e(this.state)}keccak(){Y5||Q5(this.state32),z1e(this.state32,this.rounds),Y5||Q5(this.state32),this.posOut=0,this.pos=0}update(e){G5(this);const{blockLen:n,state:r}=this;e=dz(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){G5(this,!1),i1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return E_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(S1e(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new tk(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const H1e=(t,e,n)=>$1e(()=>new tk(e,t,n)),q1e=H1e(1,136,256/8);function gz(t,e){const n=e||"hex",r=q1e(zw(t,{strict:!1})?v1e(t):t);return n==="bytes"?r:_T(r)}class V1e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const MA=new V1e(8192);function G1e(t,e){if(MA.has(`${t}.${e}`))return MA.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=gz(uz(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return MA.set(`${t}.${e}`,i),i}function K1e(t){const e=gz(`0x${t.substring(4)}`).substring(26);return G1e(`0x${e}`)}async function Y1e({hash:t,signature:e}){const n=zw(t)?t:_T(t),{secp256k1:r}=await hs(async()=>{const{secp256k1:o}=await import("./secp256k1-CaOrXjdP.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=J5(f);return new r.Signature(ET(l),ET(u)).addRecoveryBit(p)}const o=zw(e)?e:_T(e),a=p1e(`0x${o.slice(130)}`),c=J5(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function J5(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Q1e({hash:t,signature:e}){return K1e(await Y1e({hash:t,signature:e}))}var Z1e={};const X1e=":";function gp(t){const[e,n]=t.split(X1e);return{namespace:e,reference:n}}function mz(t,e){return t.includes(":")?[t]:e.chains||[]}var J1e=Object.defineProperty,eSe=Object.defineProperties,tSe=Object.getOwnPropertyDescriptors,eM=Object.getOwnPropertySymbols,nSe=Object.prototype.hasOwnProperty,rSe=Object.prototype.propertyIsEnumerable,tM=(t,e,n)=>e in t?J1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nM=(t,e)=>{for(var n in e||(e={}))nSe.call(e,n)&&tM(t,n,e[n]);if(eM)for(var n of eM(e))rSe.call(e,n)&&tM(t,n,e[n]);return t},sSe=(t,e)=>eSe(t,tSe(e));const iSe="ReactNative",Oi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},oSe="js";function __(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Wu(){return!yh()&&!!ZO()&&navigator.product===iSe}function aSe(){return Wu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function cSe(){return Wu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Lg(){return!__()&&!!ZO()&&!!yh()}function W0(){return Wu()?Oi.reactNative:__()?Oi.node:Lg()?Oi.browser:Oi.unknown}function rM(){var t;try{return Wu()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function lSe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function uSe(t){var e,n;const r=yz();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),sSe(nM(nM({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function yz(){return MW()||{name:"",description:"",url:"",icons:[""]}}function dSe(){if(W0()===Oi.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=M0e();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function hSe(){var t;const e=W0();return e===Oi.browser?[e,((t=$W())==null?void 0:t.host)||"unknown"].join(":"):e}function wz(t,e,n){const r=dSe(),s=hSe();return[[t,e].join("-"),[oSe,n].join("-"),r,s].join("/")}function fSe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=wz(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=lSe(l[1]||"",d);return l[0]+"?"+h}function Pd(t,e){return t.filter(n=>e.includes(n)).length===t.length}function CT(t){return Object.fromEntries(t.entries())}function ST(t){return new Map(Object.entries(t))}function ud(t=be.FIVE_MINUTES,e){const n=be.toMiliseconds(t||be.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Xl(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function bz(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function pSe(t){return bz("topic",t)}function gSe(t){return bz("id",t)}function vz(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function fr(t,e){return be.fromMiliseconds(Date.now()+be.toMiliseconds(t))}function Rl(t){return Date.now()>=be.toMiliseconds(t)}function en(t,e){return`${t}${e?`:${e}`:""}`}function Va(t=[],e=[]){return[...new Set([...t,...e])]}async function mSe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=ySe(i,t,e),a=W0();if(a===Oi.browser){if(!((r=yh())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}wSe(o)}else a===Oi.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function ySe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${_Se(r,!0)}`}else s=`${s}/wc?${r}`;return s}function wSe(t){let e="_self";ESe()?e="_top":(vSe()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function bSe(t,e){let n="";try{if(Lg()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function sM(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function iM(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function nk(){return typeof process<"u"&&Z1e.IS_VITEST==="true"}function vSe(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function ESe(){try{return window.self!==window.top}catch{return!1}}function _Se(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function Ez(t){return Buffer.from(t,"base64").toString("utf-8")}function CSe(t){return new Promise(e=>setTimeout(e,t))}function Hw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function SSe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function z0(t,...e){if(!SSe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function rk(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Hw(t.outputLen),Hw(t.blockLen)}function ng(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _z(t,e){z0(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const rv=BigInt(2**32-1),oM=BigInt(32);function ASe(t,e=!1){return e?{h:Number(t&rv),l:Number(t>>oM&rv)}:{h:Number(t>>oM&rv)|0,l:Number(t&rv)|0}}function ISe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=ASe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const NSe=(t,e,n)=>t<<n|e>>>32-n,xSe=(t,e,n)=>e<<n|t>>>32-n,TSe=(t,e,n)=>e<<n-32|t>>>64-n,RSe=(t,e,n)=>t<<n-32|e>>>64-n,pf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function PSe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function LA(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ya(t,e){return t<<32-e|t>>>e}const aM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function OSe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function cM(t){for(let e=0;e<t.length;e++)t[e]=OSe(t[e])}function kSe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function rg(t){return typeof t=="string"&&(t=kSe(t)),z0(t),t}function DSe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];z0(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let sk=class{clone(){return this._cloneInto()}};function Cz(t){const e=r=>t().update(rg(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Ug(t=32){if(pf&&typeof pf.getRandomValues=="function")return pf.getRandomValues(new Uint8Array(t));if(pf&&typeof pf.randomBytes=="function")return pf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Sz=[],Az=[],Iz=[],$Se=BigInt(0),vm=BigInt(1),MSe=BigInt(2),LSe=BigInt(7),USe=BigInt(256),BSe=BigInt(113);for(let t=0,e=vm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Sz.push(2*(5*r+n)),Az.push((t+1)*(t+2)/2%64);let s=$Se;for(let i=0;i<7;i++)e=(e<<vm^(e>>LSe)*BSe)%USe,e&MSe&&(s^=vm<<(vm<<BigInt(i))-vm);Iz.push(s)}const[jSe,FSe]=ISe(Iz,!0),lM=(t,e,n)=>n>32?TSe(t,e,n):NSe(t,e,n),uM=(t,e,n)=>n>32?RSe(t,e,n):xSe(t,e,n);function WSe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=lM(l,u,1)^n[a],h=uM(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Az[o],c=lM(s,i,a),l=uM(s,i,a),u=Sz[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=jSe[r],t[1]^=FSe[r]}n.fill(0)}let zSe=class Nz extends sk{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Hw(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=PSe(this.state)}keccak(){aM||cM(this.state32),WSe(this.state32,this.rounds),aM||cM(this.state32),this.posOut=0,this.pos=0}update(e){ng(this);const{blockLen:n,state:r}=this;e=rg(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ng(this,!1),z0(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Hw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(_z(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Nz(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const HSe=(t,e,n)=>Cz(()=>new zSe(e,t,n)),qSe=HSe(1,136,256/8),VSe="https://rpc.walletconnect.org/v1";function xz(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(qSe(n)).toString("hex")}async function GSe(t,e,n,r,s,i){switch(n.t){case"eip191":return await KSe(t,e,n.s);case"eip1271":return await YSe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function KSe(t,e,n){return(await Q1e({hash:xz(e),signature:n})).toLowerCase()===t.toLowerCase()}async function YSe(t,e,n,r,s,i){const o=gp(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=xz(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||VSe}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:QSe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function QSe(){return Date.now()+Math.floor(Math.random()*1e3)}function ZSe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return LW.encode(i)}var XSe=Object.defineProperty,JSe=Object.defineProperties,eAe=Object.getOwnPropertyDescriptors,dM=Object.getOwnPropertySymbols,tAe=Object.prototype.hasOwnProperty,nAe=Object.prototype.propertyIsEnumerable,hM=(t,e,n)=>e in t?XSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rAe=(t,e)=>{for(var n in e||(e={}))tAe.call(e,n)&&hM(t,n,e[n]);if(dM)for(var n of dM(e))nAe.call(e,n)&&hM(t,n,e[n]);return t},sAe=(t,e)=>JSe(t,eAe(e));const iAe="did:pkh:",ik=t=>t==null?void 0:t.split(":"),oAe=t=>{const e=t&&ik(t);if(e)return t.includes(iAe)?e[3]:e[1]},AT=t=>{const e=t&&ik(t);if(e)return e[2]+":"+e[3]},C_=t=>{const e=t&&ik(t);if(e)return e.pop()};async function fM(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=Tz(s,s.iss),o=C_(s.iss);return await GSe(o,i,r,AT(s.iss),n)}const Tz=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=C_(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${oAe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=Vv(t.resources);if(p){const g=qw(p);s=gAe(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function aAe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function cAe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function _h(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function lAe(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:uAe(e,n,r)}}}function uAe(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function Rz(t){return _h(t),`urn:recap:${aAe(t).replace(/=/g,"")}`}function qw(t){const e=cAe(t.replace("urn:recap:",""));return _h(e),e}function dAe(t,e,n){const r=lAe(t,e,n);return Rz(r)}function hAe(t){return t&&t.includes("urn:recap:")}function fAe(t,e){const n=qw(t),r=qw(e),s=pAe(n,r);return Rz(s)}function pAe(t,e){_h(t),_h(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=sAe(rAe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function gAe(t="",e){_h(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function pM(t){var e;const n=qw(t);_h(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function gM(t){const e=qw(t);_h(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function Vv(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return hAe(e)?e:void 0}function UA(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Pz(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ti(t,...e){if(!Pz(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function mM(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function mAe(t,e){Ti(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function yM(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const bu=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),yAe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),wAe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!wAe)throw new Error("Non little-endian hardware is not supported");function bAe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function IT(t){if(typeof t=="string")t=bAe(t);else if(Pz(t))t=NT(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function vAe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function EAe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const _Ae=(t,e)=>{function n(r,...s){if(Ti(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Ti(l):Ti(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Ti(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Ti(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Ti(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Ti(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function wM(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!CAe(e))throw new Error("invalid output, must be aligned");return e}function bM(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function CAe(t){return t.byteOffset%4===0}function NT(t){return Uint8Array.from(t)}function sg(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const Oz=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),SAe=Oz("expand 16-byte k"),AAe=Oz("expand 32-byte k"),IAe=bu(SAe),NAe=bu(AAe);function Wt(t,e){return t<<e|t>>>32-e}function xT(t){return t.byteOffset%4===0}const sv=64,xAe=16,kz=2**32-1,vM=new Uint32Array;function TAe(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(sv),u=bu(l),d=xT(s)&&xT(i),h=d?bu(s):vM,f=d?bu(i):vM;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=kz)throw new Error("arx: counter overflow");const g=Math.min(sv,c-p);if(d&&g===sv){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<xAe;y++)b=w+y,f[b]=h[b]^u[y];p+=sv;continue}for(let w=0,y;w<g;w++)y=p+w,i[y]=s[y]^l[w];p+=g}}function RAe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=vAe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return UA(s),UA(o),yM(i),yM(n),(a,c,l,u,d=0)=>{Ti(a),Ti(c),Ti(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Ti(u),UA(d),d<0||d>=kz)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=NT(a)),w=NAe;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=IAe,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);xT(c)||f.push(c=NT(c));const y=bu(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,bu(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const _=new Uint8Array(12);_.set(c,i?0:12-c.length),c=_,f.push(c)}const E=bu(c);return TAe(t,w,y,E,l,u,d,o),sg(...f),u}}const Fr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class PAe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=IT(e),Ti(e,32);const n=Fr(e,0),r=Fr(e,2),s=Fr(e,4),i=Fr(e,6),o=Fr(e,8),a=Fr(e,10),c=Fr(e,12),l=Fr(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Fr(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],y=Fr(e,n+0),b=Fr(e,n+2),E=Fr(e,n+4),_=Fr(e,n+6),C=Fr(e,n+8),I=Fr(e,n+10),A=Fr(e,n+12),x=Fr(e,n+14);let S=i[0]+(y&8191),D=i[1]+((y>>>13|b<<3)&8191),P=i[2]+((b>>>10|E<<6)&8191),U=i[3]+((E>>>7|_<<9)&8191),q=i[4]+((_>>>4|C<<12)&8191),j=i[5]+(C>>>1&8191),T=i[6]+((C>>>14|I<<2)&8191),N=i[7]+((I>>>11|A<<5)&8191),$=i[8]+((A>>>8|x<<8)&8191),R=i[9]+(x>>>5|s),k=0,B=k+S*a+D*(5*w)+P*(5*g)+U*(5*p)+q*(5*f);k=B>>>13,B&=8191,B+=j*(5*h)+T*(5*d)+N*(5*u)+$*(5*l)+R*(5*c),k+=B>>>13,B&=8191;let H=k+S*c+D*a+P*(5*w)+U*(5*g)+q*(5*p);k=H>>>13,H&=8191,H+=j*(5*f)+T*(5*h)+N*(5*d)+$*(5*u)+R*(5*l),k+=H>>>13,H&=8191;let X=k+S*l+D*c+P*a+U*(5*w)+q*(5*g);k=X>>>13,X&=8191,X+=j*(5*p)+T*(5*f)+N*(5*h)+$*(5*d)+R*(5*u),k+=X>>>13,X&=8191;let se=k+S*u+D*l+P*c+U*a+q*(5*w);k=se>>>13,se&=8191,se+=j*(5*g)+T*(5*p)+N*(5*f)+$*(5*h)+R*(5*d),k+=se>>>13,se&=8191;let ne=k+S*d+D*u+P*l+U*c+q*a;k=ne>>>13,ne&=8191,ne+=j*(5*w)+T*(5*g)+N*(5*p)+$*(5*f)+R*(5*h),k+=ne>>>13,ne&=8191;let ae=k+S*h+D*d+P*u+U*l+q*c;k=ae>>>13,ae&=8191,ae+=j*a+T*(5*w)+N*(5*g)+$*(5*p)+R*(5*f),k+=ae>>>13,ae&=8191;let me=k+S*f+D*h+P*d+U*u+q*l;k=me>>>13,me&=8191,me+=j*c+T*a+N*(5*w)+$*(5*g)+R*(5*p),k+=me>>>13,me&=8191;let Z=k+S*p+D*f+P*h+U*d+q*u;k=Z>>>13,Z&=8191,Z+=j*l+T*c+N*a+$*(5*w)+R*(5*g),k+=Z>>>13,Z&=8191;let re=k+S*g+D*p+P*f+U*h+q*d;k=re>>>13,re&=8191,re+=j*u+T*l+N*c+$*a+R*(5*w),k+=re>>>13,re&=8191;let de=k+S*w+D*g+P*p+U*f+q*h;k=de>>>13,de&=8191,de+=j*d+T*u+N*l+$*c+R*a,k+=de>>>13,de&=8191,k=(k<<2)+k|0,k=k+B|0,B=k&8191,k=k>>>13,H+=k,i[0]=B,i[1]=H,i[2]=X,i[3]=se,i[4]=ne,i[5]=ae,i[6]=me,i[7]=Z,i[8]=re,i[9]=de}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;sg(r)}update(e){mM(this);const{buffer:n,blockLen:r}=this;e=IT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){sg(this.h,this.r,this.buffer,this.pad)}digestInto(e){mM(this),mAe(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function OAe(t){const e=(r,s)=>t(s).update(IT(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const kAe=OAe(t=>new PAe(t));function DAe(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=s,E=n[0],_=n[1],C=n[2],I=o,A=a,x=c,S=l,D=u,P=d,U=h,q=f,j=p,T=g,N=w,$=y,R=b,k=E,B=_,H=C;for(let se=0;se<i;se+=2)I=I+D|0,R=Wt(R^I,16),j=j+R|0,D=Wt(D^j,12),I=I+D|0,R=Wt(R^I,8),j=j+R|0,D=Wt(D^j,7),A=A+P|0,k=Wt(k^A,16),T=T+k|0,P=Wt(P^T,12),A=A+P|0,k=Wt(k^A,8),T=T+k|0,P=Wt(P^T,7),x=x+U|0,B=Wt(B^x,16),N=N+B|0,U=Wt(U^N,12),x=x+U|0,B=Wt(B^x,8),N=N+B|0,U=Wt(U^N,7),S=S+q|0,H=Wt(H^S,16),$=$+H|0,q=Wt(q^$,12),S=S+q|0,H=Wt(H^S,8),$=$+H|0,q=Wt(q^$,7),I=I+P|0,H=Wt(H^I,16),N=N+H|0,P=Wt(P^N,12),I=I+P|0,H=Wt(H^I,8),N=N+H|0,P=Wt(P^N,7),A=A+U|0,R=Wt(R^A,16),$=$+R|0,U=Wt(U^$,12),A=A+U|0,R=Wt(R^A,8),$=$+R|0,U=Wt(U^$,7),x=x+q|0,k=Wt(k^x,16),j=j+k|0,q=Wt(q^j,12),x=x+q|0,k=Wt(k^x,8),j=j+k|0,q=Wt(q^j,7),S=S+D|0,B=Wt(B^S,16),T=T+B|0,D=Wt(D^T,12),S=S+D|0,B=Wt(B^S,8),T=T+B|0,D=Wt(D^T,7);let X=0;r[X++]=o+I|0,r[X++]=a+A|0,r[X++]=c+x|0,r[X++]=l+S|0,r[X++]=u+D|0,r[X++]=d+P|0,r[X++]=h+U|0,r[X++]=f+q|0,r[X++]=p+j|0,r[X++]=g+T|0,r[X++]=w+N|0,r[X++]=y+$|0,r[X++]=b+R|0,r[X++]=E+k|0,r[X++]=_+B|0,r[X++]=C+H|0}const $Ae=RAe(DAe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),MAe=new Uint8Array(16),EM=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(MAe.subarray(n))},LAe=new Uint8Array(32);function _M(t,e,n,r,s){const i=t(e,n,LAe),o=kAe.create(i);s&&EM(o,s),EM(o,r);const a=new Uint8Array(16),c=yAe(a);bM(c,0,BigInt(s?s.length:0),!0),bM(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return sg(i,a),l}const UAe=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=wM(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=_M(t,e,n,a,r);return i.set(c,o),sg(c),i},decrypt(s,i){i=wM(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=_M(t,e,n,o,r);if(!EAe(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),sg(c),i}}),Dz=_Ae({blockSize:64,nonceLength:12,tagLength:16},UAe($Ae));let $z=class extends sk{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,rk(e);const r=rg(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return ng(this),this.iHash.update(e),this}digestInto(e){ng(this),z0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const o1=(t,e,n)=>new $z(t,e).update(n).digest();o1.create=(t,e)=>new $z(t,e);function BAe(t,e,n){return rk(t),n===void 0&&(n=new Uint8Array(t.outputLen)),o1(t,rg(n),rg(e))}const BA=new Uint8Array([0]),CM=new Uint8Array;function jAe(t,e,n,r=32){if(rk(t),Hw(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=CM);const i=new Uint8Array(s*t.outputLen),o=o1.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)BA[0]=l+1,a.update(l===0?CM:c).update(n).update(BA).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),BA.fill(0),i.slice(0,r)}const FAe=(t,e,n,r,s)=>jAe(t,BAe(t,e,n),r,s);function WAe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function zAe(t,e,n){return t&e^~t&n}function HAe(t,e,n){return t&e^t&n^e&n}let qAe=class extends sk{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=LA(this.buffer)}update(e){ng(this);const{view:n,buffer:r,blockLen:s}=this;e=rg(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=LA(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ng(this),_z(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;WAe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=LA(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const VAe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ml=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),yl=new Uint32Array(64);class GAe extends qAe{constructor(){super(64,32,8,!1),this.A=ml[0]|0,this.B=ml[1]|0,this.C=ml[2]|0,this.D=ml[3]|0,this.E=ml[4]|0,this.F=ml[5]|0,this.G=ml[6]|0,this.H=ml[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)yl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=yl[d-15],f=yl[d-2],p=ya(h,7)^ya(h,18)^h>>>3,g=ya(f,17)^ya(f,19)^f>>>10;yl[d]=g+yl[d-7]+p+yl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ya(a,6)^ya(a,11)^ya(a,25),f=u+h+zAe(a,c,l)+VAe[d]+yl[d]|0,p=(ya(r,2)^ya(r,13)^ya(r,22))+HAe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){yl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const H0=Cz(()=>new GAe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const a1=BigInt(0),c1=BigInt(1),KAe=BigInt(2);function Ch(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function q0(t){if(!Ch(t))throw new Error("Uint8Array expected")}function ig(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const YAe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function og(t){q0(t);let e="";for(let n=0;n<t.length;n++)e+=YAe[t[n]];return e}function Jf(t){const e=t.toString(16);return e.length&1?"0"+e:e}function ok(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?a1:BigInt("0x"+t)}const mc={_0:48,_9:57,A:65,F:70,a:97,f:102};function SM(t){if(t>=mc._0&&t<=mc._9)return t-mc._0;if(t>=mc.A&&t<=mc.F)return t-(mc.A-10);if(t>=mc.a&&t<=mc.f)return t-(mc.a-10)}function ag(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=SM(t.charCodeAt(i)),a=SM(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Gd(t){return ok(og(t))}function Vw(t){return q0(t),ok(og(Uint8Array.from(t).reverse()))}function cg(t,e){return ag(t.toString(16).padStart(e*2,"0"))}function l1(t,e){return cg(t,e).reverse()}function QAe(t){return ag(Jf(t))}function Ni(t,e,n){let r;if(typeof e=="string")try{r=ag(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Ch(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Gw(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];q0(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function ZAe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function XAe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const jA=t=>typeof t=="bigint"&&a1<=t;function u1(t,e,n){return jA(t)&&jA(e)&&jA(n)&&e<=t&&t<n}function Uc(t,e,n,r){if(!u1(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Mz(t){let e;for(e=0;t>a1;t>>=c1,e+=1);return e}function JAe(t,e){return t>>BigInt(e)&c1}function eIe(t,e,n){return t|(n?c1:a1)<<BigInt(e)}const ak=t=>(KAe<<BigInt(t-1))-c1,FA=t=>new Uint8Array(t),AM=t=>Uint8Array.from(t);function Lz(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=FA(t),s=FA(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=FA())=>{s=a(AM([0]),u),r=a(),u.length!==0&&(s=a(AM([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return Gw(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const tIe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ch(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Bg(t,e,n={}){const r=(s,i,o)=>{const a=tIe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const nIe=()=>{throw new Error("not implemented")};function TT(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var rIe=Object.freeze({__proto__:null,isBytes:Ch,abytes:q0,abool:ig,bytesToHex:og,numberToHexUnpadded:Jf,hexToNumber:ok,hexToBytes:ag,bytesToNumberBE:Gd,bytesToNumberLE:Vw,numberToBytesBE:cg,numberToBytesLE:l1,numberToVarBytesBE:QAe,ensureBytes:Ni,concatBytes:Gw,equalBytes:ZAe,utf8ToBytes:XAe,inRange:u1,aInRange:Uc,bitLen:Mz,bitGet:JAe,bitSet:eIe,bitMask:ak,createHmacDrbg:Lz,validateObject:Bg,notImplemented:nIe,memoized:TT});const Lr=BigInt(0),sr=BigInt(1),md=BigInt(2),sIe=BigInt(3),RT=BigInt(4),IM=BigInt(5),NM=BigInt(8);function ni(t,e){const n=t%e;return n>=Lr?n:e+n}function Uz(t,e,n){if(e<Lr)throw new Error("invalid exponent, negatives unsupported");if(n<=Lr)throw new Error("invalid modulus");if(n===sr)return Lr;let r=sr;for(;e>Lr;)e&sr&&(r=r*t%n),t=t*t%n,e>>=sr;return r}function Lo(t,e,n){let r=t;for(;e-- >Lr;)r*=r,r%=n;return r}function PT(t,e){if(t===Lr)throw new Error("invert: expected non-zero number");if(e<=Lr)throw new Error("invert: expected positive modulus, got "+e);let n=ni(t,e),r=e,s=Lr,i=sr;for(;n!==Lr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==sr)throw new Error("invert: does not exist");return ni(s,e)}function iIe(t){const e=(t-sr)/md;let n,r,s;for(n=t-sr,r=0;n%md===Lr;n/=md,r++);for(s=md;s<t&&Uz(s,e,t)!==t-sr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+sr)/RT;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+sr)/md;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,sr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function oIe(t){if(t%RT===sIe){const e=(t+sr)/RT;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%NM===IM){const e=(t-IM)/NM;return function(n,r){const s=n.mul(r,md),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,md),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return iIe(t)}const aIe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function cIe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=aIe.reduce((r,s)=>(r[s]="function",r),e);return Bg(t,n)}function lIe(t,e,n){if(n<Lr)throw new Error("invalid exponent, negatives unsupported");if(n===Lr)return t.ONE;if(n===sr)return e;let r=t.ONE,s=e;for(;n>Lr;)n&sr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=sr;return r}function uIe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function Bz(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function jz(t,e,n=!1,r={}){if(t<=Lr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=Bz(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:ak(s),ZERO:Lr,ONE:sr,create:c=>ni(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Lr<=c&&c<t},is0:c=>c===Lr,isOdd:c=>(c&sr)===sr,neg:c=>ni(-c,t),eql:(c,l)=>c===l,sqr:c=>ni(c*c,t),add:(c,l)=>ni(c+l,t),sub:(c,l)=>ni(c-l,t),mul:(c,l)=>ni(c*l,t),pow:(c,l)=>lIe(a,c,l),div:(c,l)=>ni(c*PT(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>PT(c,t),sqrt:r.sqrt||(c=>(o||(o=oIe(t)),o(a,c))),invertBatch:c=>uIe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?l1(c,i):cg(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Vw(c):Gd(c)}});return Object.freeze(a)}function Fz(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Wz(t){const e=Fz(t);return e+Math.ceil(e/2)}function dIe(t,e,n=!1){const r=t.length,s=Fz(e),i=Wz(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Vw(t):Gd(t),a=ni(o,e-sr)+sr;return n?l1(a,s):cg(a,s)}const xM=BigInt(0),iv=BigInt(1);function WA(t,e){const n=e.negate();return t?n:e}function zz(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function zA(t,e){zz(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function hIe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function fIe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const HA=new WeakMap,Hz=new WeakMap;function qA(t){return Hz.get(t)||1}function pIe(t,e){return{constTimeNegate:WA,hasPrecomputes(n){return qA(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>xM;)r&iv&&(s=s.add(i)),i=i.double(),r>>=iv;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=zA(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=zA(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=iv);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(WA(y,r[g])):a=a.add(WA(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=zA(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===xM)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=iv),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=HA.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&HA.set(r,s(i))),i},wNAFCached(n,r,s){const i=qA(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=qA(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){zz(r,e),Hz.set(n,r),HA.delete(n)}}}function gIe(t,e,n,r){if(hIe(n,t),fIe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Mz(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function qz(t){return cIe(t.Fp),Bg(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Bz(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const gf=BigInt(0),VA=BigInt(1);function mIe(t){return Bg(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function yIe(t){const e=mIe(t),{P:n}=e,r=b=>ni(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>Uz(b,n-BigInt(2),n));function l(b,E,_){const C=r(b*(E-_));return E=r(E-C),_=r(_+C),[E,_]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,E){Uc("u",b,gf,n),Uc("scalar",E,gf,n);const _=E,C=b;let I=VA,A=gf,x=b,S=VA,D=gf,P;for(let q=BigInt(s-1);q>=gf;q--){const j=_>>q&VA;D^=j,P=l(D,I,x),I=P[0],x=P[1],P=l(D,A,S),A=P[0],S=P[1],D=j;const T=I+A,N=r(T*T),$=I-A,R=r($*$),k=N-R,B=x+S,H=x-S,X=r(H*T),se=r(B*$),ne=X+se,ae=X-se;x=r(ne*ne),S=r(C*r(ae*ae)),I=r(N*R),A=r(k*(N+r(u*k)))}P=l(D,I,x),I=P[0],x=P[1],P=l(D,A,S),A=P[0],S=P[1];const U=c(A);return r(I*U)}function h(b){return l1(r(b),i)}function f(b){const E=Ni("u coordinate",b,i);return o===32&&(E[31]&=127),Vw(E)}function p(b){const E=Ni("scalar",b),_=E.length;if(_!==i&&_!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+_)}return Vw(a(E))}function g(b,E){const _=f(E),C=p(b),I=d(_,C);if(I===gf)throw new Error("invalid private or public key received");return h(I)}const w=h(e.Gu);function y(b){return g(b,w)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(b,E)=>g(b,E),getPublicKey:b=>y(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const OT=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const wIe=BigInt(1),TM=BigInt(2),bIe=BigInt(3),vIe=BigInt(5);BigInt(8);function EIe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=OT,o=t*t%i*t%i,a=Lo(o,TM,i)*o%i,c=Lo(a,wIe,i)*t%i,l=Lo(c,vIe,i)*c%i,u=Lo(l,e,i)*l%i,d=Lo(u,n,i)*u%i,h=Lo(d,r,i)*d%i,f=Lo(h,s,i)*h%i,p=Lo(f,s,i)*h%i,g=Lo(p,e,i)*l%i;return{pow_p_5_8:Lo(g,TM,i)*t%i,b2:o}}function _Ie(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const kT=yIe({P:OT,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=OT,{pow_p_5_8:n,b2:r}=EIe(t);return ni(Lo(n,bIe,e)*r,e)},adjustScalarBytes:_Ie,randomBytes:Ug});function RM(t){t.lowS!==void 0&&ig("lowS",t.lowS),t.prehash!==void 0&&ig("prehash",t.prehash)}function CIe(t){const e=qz(t);Bg(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:SIe,hexToBytes:AIe}=rIe;class IIe extends Error{constructor(e=""){super(e)}}const Sc={Err:IIe,_tlv:{encode:(t,e)=>{const{Err:n}=Sc;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Jf(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Jf(s.length/2|128):"";return Jf(t)+i+s+e},decode(t,e){const{Err:n}=Sc;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Sc;if(t<xc)throw new e("integer: negative integers are not allowed");let n=Jf(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Sc;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return SIe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Sc,s=typeof t=="string"?AIe(t):t;q0(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Sc,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},xc=BigInt(0),xr=BigInt(1);BigInt(2);const PM=BigInt(3);BigInt(4);function NIe(t){const e=CIe(t),{Fp:n}=e,r=jz(e.n,e.nBitLength),s=e.toBytes||((g,w,y)=>{const b=w.toAffine();return Gw(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const w=g.subarray(1),y=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:y,y:b}});function o(g){const{a:w,b:y}=e,b=n.sqr(g),E=n.mul(b,g);return n.add(n.add(E,n.mul(g,w)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return u1(g,xr,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:b,n:E}=e;if(w&&typeof g!="bigint"){if(Ch(g)&&(g=og(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let _;try{_=typeof g=="bigint"?g:Gd(Ni("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return b&&(_=ni(_,E)),Uc("private key",_,xr,E),_}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=TT((g,w)=>{const{px:y,py:b,pz:E}=g;if(n.eql(E,n.ONE))return{x:y,y:b};const _=g.is0();w==null&&(w=_?n.ONE:n.inv(E));const C=n.mul(y,w),I=n.mul(b,w),A=n.mul(E,w);if(_)return{x:n.ZERO,y:n.ZERO};if(!n.eql(A,n.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}),d=TT(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=g.toAffine();if(!n.isValid(w)||!n.isValid(y))throw new Error("bad point: x or y not FE");const b=n.sqr(y),E=o(w);if(!n.eql(b,E))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,y,b){if(this.px=w,this.py=y,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:y,y:b}=w||{};if(!w||!n.isValid(y)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const E=_=>n.eql(_,n.ZERO);return E(y)&&E(b)?h.ZERO:new h(y,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,E)=>b.toAffine(y[E])).map(h.fromAffine)}static fromHex(w){const y=h.fromAffine(i(Ni("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,y){return gIe(h,r,w,y)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:y,py:b,pz:E}=this,{px:_,py:C,pz:I}=w,A=n.eql(n.mul(y,I),n.mul(_,E)),x=n.eql(n.mul(b,I),n.mul(C,E));return A&&x}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,b=n.mul(y,PM),{px:E,py:_,pz:C}=this;let I=n.ZERO,A=n.ZERO,x=n.ZERO,S=n.mul(E,E),D=n.mul(_,_),P=n.mul(C,C),U=n.mul(E,_);return U=n.add(U,U),x=n.mul(E,C),x=n.add(x,x),I=n.mul(w,x),A=n.mul(b,P),A=n.add(I,A),I=n.sub(D,A),A=n.add(D,A),A=n.mul(I,A),I=n.mul(U,I),x=n.mul(b,x),P=n.mul(w,P),U=n.sub(S,P),U=n.mul(w,U),U=n.add(U,x),x=n.add(S,S),S=n.add(x,S),S=n.add(S,P),S=n.mul(S,U),A=n.add(A,S),P=n.mul(_,C),P=n.add(P,P),S=n.mul(P,U),I=n.sub(I,S),x=n.mul(P,D),x=n.add(x,x),x=n.add(x,x),new h(I,A,x)}add(w){l(w);const{px:y,py:b,pz:E}=this,{px:_,py:C,pz:I}=w;let A=n.ZERO,x=n.ZERO,S=n.ZERO;const D=e.a,P=n.mul(e.b,PM);let U=n.mul(y,_),q=n.mul(b,C),j=n.mul(E,I),T=n.add(y,b),N=n.add(_,C);T=n.mul(T,N),N=n.add(U,q),T=n.sub(T,N),N=n.add(y,E);let $=n.add(_,I);return N=n.mul(N,$),$=n.add(U,j),N=n.sub(N,$),$=n.add(b,E),A=n.add(C,I),$=n.mul($,A),A=n.add(q,j),$=n.sub($,A),S=n.mul(D,N),A=n.mul(P,j),S=n.add(A,S),A=n.sub(q,S),S=n.add(q,S),x=n.mul(A,S),q=n.add(U,U),q=n.add(q,U),j=n.mul(D,j),N=n.mul(P,N),q=n.add(q,j),j=n.sub(U,j),j=n.mul(D,j),N=n.add(N,j),U=n.mul(q,N),x=n.add(x,U),U=n.mul($,N),A=n.mul(T,A),A=n.sub(A,U),U=n.mul(T,q),S=n.mul($,S),S=n.add(S,U),new h(A,x,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:y,n:b}=e;Uc("scalar",w,xc,b);const E=h.ZERO;if(w===xc)return E;if(this.is0()||w===xr)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:_,k1:C,k2neg:I,k2:A}=y.splitScalar(w),x=E,S=E,D=this;for(;C>xc||A>xc;)C&xr&&(x=x.add(D)),A&xr&&(S=S.add(D)),D=D.double(),C>>=xr,A>>=xr;return _&&(x=x.negate()),I&&(S=S.negate()),S=new h(n.mul(S.px,y.beta),S.py,S.pz),x.add(S)}multiply(w){const{endo:y,n:b}=e;Uc("scalar",w,xr,b);let E,_;if(y){const{k1neg:C,k1:I,k2neg:A,k2:x}=y.splitScalar(w);let{p:S,f:D}=this.wNAF(I),{p:P,f:U}=this.wNAF(x);S=p.constTimeNegate(C,S),P=p.constTimeNegate(A,P),P=new h(n.mul(P.px,y.beta),P.py,P.pz),E=S.add(P),_=D.add(U)}else{const{p:C,f:I}=this.wNAF(w);E=C,_=I}return h.normalizeZ([E,_])[0]}multiplyAndAddUnsafe(w,y,b){const E=h.BASE,_=(I,A)=>A===xc||A===xr||!I.equals(E)?I.multiplyUnsafe(A):I.multiply(A),C=_(this,y).add(_(w,b));return C.is0()?void 0:C}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===xr)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===xr?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return ig("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return ig("isCompressed",w),og(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=pIe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function xIe(t){const e=qz(t);return Bg(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function TIe(t){const e=xIe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(j){return ni(j,r)}function a(j){return PT(j,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=NIe({...e,toBytes(j,T,N){const $=T.toAffine(),R=n.toBytes($.x),k=Gw;return ig("isCompressed",N),N?k(Uint8Array.from([T.hasEvenY()?2:3]),R):k(Uint8Array.from([4]),R,n.toBytes($.y))},fromBytes(j){const T=j.length,N=j[0],$=j.subarray(1);if(T===s&&(N===2||N===3)){const R=Gd($);if(!u1(R,xr,n.ORDER))throw new Error("Point is not on curve");const k=u(R);let B;try{B=n.sqrt(k)}catch(X){const se=X instanceof Error?": "+X.message:"";throw new Error("Point is not on curve"+se)}const H=(B&xr)===xr;return(N&1)===1!==H&&(B=n.neg(B)),{x:R,y:B}}else if(T===i&&N===4){const R=n.fromBytes($.subarray(0,n.BYTES)),k=n.fromBytes($.subarray(n.BYTES,2*n.BYTES));return{x:R,y:k}}else{const R=s,k=i;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+k+", got "+T)}}}),h=j=>og(cg(j,e.nByteLength));function f(j){const T=r>>xr;return j>T}function p(j){return f(j)?o(-j):j}const g=(j,T,N)=>Gd(j.slice(T,N));class w{constructor(T,N,$){this.r=T,this.s=N,this.recovery=$,this.assertValidity()}static fromCompact(T){const N=e.nByteLength;return T=Ni("compactSignature",T,N*2),new w(g(T,0,N),g(T,N,2*N))}static fromDER(T){const{r:N,s:$}=Sc.toSig(Ni("DER",T));return new w(N,$)}assertValidity(){Uc("r",this.r,xr,r),Uc("s",this.s,xr,r)}addRecoveryBit(T){return new w(this.r,this.s,T)}recoverPublicKey(T){const{r:N,s:$,recovery:R}=this,k=I(Ni("msgHash",T));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const B=R===2||R===3?N+e.n:N;if(B>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=R&1?"03":"02",X=c.fromHex(H+h(B)),se=a(B),ne=o(-k*se),ae=o($*se),me=c.BASE.multiplyAndAddUnsafe(X,ne,ae);if(!me)throw new Error("point at infinify");return me.assertValidity(),me}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ag(this.toDERHex())}toDERHex(){return Sc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ag(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(j){try{return l(j),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const j=Wz(e.n);return dIe(e.randomBytes(j),e.n)},precompute(j=8,T=c.BASE){return T._setWindowSize(j),T.multiply(BigInt(3)),T}};function b(j,T=!0){return c.fromPrivateKey(j).toRawBytes(T)}function E(j){const T=Ch(j),N=typeof j=="string",$=(T||N)&&j.length;return T?$===s||$===i:N?$===2*s||$===2*i:j instanceof c}function _(j,T,N=!0){if(E(j))throw new Error("first arg must be private key");if(!E(T))throw new Error("second arg must be public key");return c.fromHex(T).multiply(l(j)).toRawBytes(N)}const C=e.bits2int||function(j){if(j.length>8192)throw new Error("input is too large");const T=Gd(j),N=j.length*8-e.nBitLength;return N>0?T>>BigInt(N):T},I=e.bits2int_modN||function(j){return o(C(j))},A=ak(e.nBitLength);function x(j){return Uc("num < 2^"+e.nBitLength,j,xc,A),cg(j,e.nByteLength)}function S(j,T,N=D){if(["recovered","canonical"].some(re=>re in N))throw new Error("sign() legacy options not supported");const{hash:$,randomBytes:R}=e;let{lowS:k,prehash:B,extraEntropy:H}=N;k==null&&(k=!0),j=Ni("msgHash",j),RM(N),B&&(j=Ni("prehashed msgHash",$(j)));const X=I(j),se=l(T),ne=[x(se),x(X)];if(H!=null&&H!==!1){const re=H===!0?R(n.BYTES):H;ne.push(Ni("extraEntropy",re))}const ae=Gw(...ne),me=X;function Z(re){const de=C(re);if(!d(de))return;const ee=a(de),he=c.BASE.multiply(de).toAffine(),Ne=o(he.x);if(Ne===xc)return;const le=o(ee*o(me+Ne*se));if(le===xc)return;let ye=(he.x===Ne?0:2)|Number(he.y&xr),ze=le;return k&&f(le)&&(ze=p(le),ye^=1),new w(Ne,ze,ye)}return{seed:ae,k2sig:Z}}const D={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function U(j,T,N=D){const{seed:$,k2sig:R}=S(j,T,N),k=e;return Lz(k.hash.outputLen,k.nByteLength,k.hmac)($,R)}c.BASE._setWindowSize(8);function q(j,T,N,$=P){var le;const R=j;T=Ni("msgHash",T),N=Ni("publicKey",N);const{lowS:k,prehash:B,format:H}=$;if(RM($),"strict"in $)throw new Error("options.strict was renamed to lowS");if(H!==void 0&&H!=="compact"&&H!=="der")throw new Error("format must be compact or der");const X=typeof R=="string"||Ch(R),se=!X&&!H&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!X&&!se)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ne,ae;try{if(se&&(ne=new w(R.r,R.s)),X){try{H!=="compact"&&(ne=w.fromDER(R))}catch(ye){if(!(ye instanceof Sc.Err))throw ye}!ne&&H!=="der"&&(ne=w.fromCompact(R))}ae=c.fromHex(N)}catch{return!1}if(!ne||k&&ne.hasHighS())return!1;B&&(T=e.hash(T));const{r:me,s:Z}=ne,re=I(T),de=a(Z),ee=o(re*de),he=o(me*de),Ne=(le=c.BASE.multiplyAndAddUnsafe(ae,ee,he))==null?void 0:le.toAffine();return Ne?o(Ne.x)===me:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:_,sign:U,verify:q,ProjectivePoint:c,Signature:w,utils:y}}function RIe(t){return{hash:t,hmac:(e,...n)=>o1(t,e,DSe(...n)),randomBytes:Ug}}function PIe(t,e){const n=r=>TIe({...t,...RIe(r)});return{...n(e),create:n}}const Vz=jz(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),OIe=Vz.create(BigInt("-3")),kIe=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),DIe=PIe({a:OIe,b:kIe,Fp:Vz,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},H0),Gz="base10",ks="base16",Jo="base64pad",$l="base64url",V0="utf8",Kz=0,Bc=1,G0=2,$Ie=0,OM=1,vy=12,ck=32;function MIe(){const t=kT.utils.randomPrivateKey(),e=kT.getPublicKey(t);return{privateKey:fi(t,ks),publicKey:fi(e,ks)}}function DT(){const t=Ug(ck);return fi(t,ks)}function LIe(t,e){const n=kT.getSharedSecret(ho(t,ks),ho(e,ks)),r=FAe(H0,n,void 0,void 0,ck);return fi(r,ks)}function Gv(t){const e=H0(ho(t,ks));return fi(e,ks)}function Oa(t){const e=H0(ho(t,V0));return fi(e,ks)}function Yz(t){return ho(`${t}`,Gz)}function Sh(t){return Number(fi(t,Gz))}function Qz(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Zz(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function UIe(t){const e=Yz(typeof t.type<"u"?t.type:Kz);if(Sh(e)===Bc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?ho(t.senderPublicKey,ks):void 0,r=typeof t.iv<"u"?ho(t.iv,ks):Ug(vy),s=ho(t.symKey,ks),i=Dz(s,r).encrypt(ho(t.message,V0)),o=Xz({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===$l?Qz(o):o}function BIe(t){const e=ho(t.symKey,ks),{sealed:n,iv:r}=Kw({encoded:t.encoded,encoding:t.encoding}),s=Dz(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return fi(s,V0)}function jIe(t,e){const n=Yz(G0),r=Ug(vy),s=ho(t,V0),i=Xz({type:n,sealed:s,iv:r});return e===$l?Qz(i):i}function FIe(t,e){const{sealed:n}=Kw({encoded:t,encoding:e});return fi(n,V0)}function Xz(t){if(Sh(t.type)===G0)return fi(yy([t.type,t.sealed]),Jo);if(Sh(t.type)===Bc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return fi(yy([t.type,t.senderPublicKey,t.iv,t.sealed]),Jo)}return fi(yy([t.type,t.iv,t.sealed]),Jo)}function Kw(t){const e=(t.encoding||Jo)===$l?Zz(t.encoded):t.encoded,n=ho(e,Jo),r=n.slice($Ie,OM),s=OM;if(Sh(r)===Bc){const c=s+ck,l=c+vy,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Sh(r)===G0){const c=n.slice(s),l=Ug(vy);return{type:r,sealed:c,iv:l}}const i=s+vy,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function WIe(t,e){const n=Kw({encoded:t,encoding:e==null?void 0:e.encoding});return Jz({type:Sh(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?fi(n.senderPublicKey,ks):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Jz(t){const e=(t==null?void 0:t.type)||Kz;if(e===Bc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function kM(t){return t.type===Bc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function DM(t){return t.type===G0}function zIe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return yy([new Uint8Array([4]),e,n])}function HIe(t,e){const[n,r,s]=t.split("."),i=Buffer.from(Zz(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=H0(c),u=zIe(e);if(!DIe.verify(yy([o,a]),l,u))throw new Error("Invalid signature");return dT(t).payload}const qIe="irn";function S_(t){return(t==null?void 0:t.relay)||{protocol:qIe}}function Fm(t){const e=Zbe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function VIe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function $M(t){if(!t.includes("wc:")){const l=Ez(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:GIe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:VIe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function GIe(t){return t.startsWith("//")?t.substring(2):t}function KIe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function MM(t){const e=new URLSearchParams,n=KIe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function ov(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var YIe=Object.defineProperty,QIe=Object.defineProperties,ZIe=Object.getOwnPropertyDescriptors,LM=Object.getOwnPropertySymbols,XIe=Object.prototype.hasOwnProperty,JIe=Object.prototype.propertyIsEnumerable,UM=(t,e,n)=>e in t?YIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eNe=(t,e)=>{for(var n in e||(e={}))XIe.call(e,n)&&UM(t,n,e[n]);if(LM)for(var n of LM(e))JIe.call(e,n)&&UM(t,n,e[n]);return t},tNe=(t,e)=>QIe(t,ZIe(e));function jg(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function nNe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...jg(n.accounts))}),e}function rNe(t,e){const n=[];return Object.values(t).forEach(r=>{jg(r.accounts).includes(e)&&n.push(...r.methods)}),n}function sNe(t,e){const n=[];return Object.values(t).forEach(r=>{jg(r.accounts).includes(e)&&n.push(...r.events)}),n}function d1(t){return t.includes(":")}function ep(t){return d1(t)?t.split(":")[0]:t}function BM(t){var e,n,r;const s={};if(!Eu(t))return s;for(const[i,o]of Object.entries(t)){const a=d1(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=ep(i);s[u]=tNe(eNe({},s[u]),{chains:Va(a,(e=s[u])==null?void 0:e.chains),methods:Va(c,(n=s[u])==null?void 0:n.methods),events:Va(l,(r=s[u])==null?void 0:r.events)})}return s}function iNe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function jM(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=iNe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Va(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function oNe(t,e){var n,r,s,i,o,a;const c=BM(t),l=BM(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Va((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Va((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Va((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const aNe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},cNe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ee(t,e){const{message:n,code:r}=cNe[t];return{message:e?`${n} ${e}`:n,code:r}}function fn(t,e){const{message:n,code:r}=aNe[t];return{message:e?`${n} ${e}`:n,code:r}}function vu(t,e){return!!Array.isArray(t)}function Eu(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Kr(t){return typeof t>"u"}function cr(t,e){return e&&Kr(t)?!0:typeof t=="string"&&!!t.trim().length}function lk(t,e){return e&&Kr(t)?!0:typeof t=="number"&&!isNaN(t)}function lNe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Pd(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=jg(a),d=n[o];(!Pd(mz(o,d),u)||!Pd(d.methods,c)||!Pd(d.events,l))&&(i=!1)}),i):!1}function A_(t){return cr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function uNe(t){if(cr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&A_(n)}}return!1}function dNe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(cr(t,!1)){if(e(t))return!0;const n=Ez(t);return e(n)}}catch{}return!1}function hNe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function fNe(t){return t==null?void 0:t.topic}function pNe(t,e){let n=null;return cr(t==null?void 0:t.publicKey,!1)||(n=Ee("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function FM(t){let e=!0;return vu(t)?t.length&&(e=t.every(n=>cr(n,!1))):e=!1,e}function gNe(t,e,n){let r=null;return vu(e)&&e.length?e.forEach(s=>{r||A_(s)||(r=fn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):A_(t)||(r=fn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function mNe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=gNe(s,mz(s,i),`${e} ${n}`);o&&(r=o)}),r}function yNe(t,e){let n=null;return vu(t)?t.forEach(r=>{n||uNe(r)||(n=fn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=fn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function wNe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=yNe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function bNe(t,e){let n=null;return FM(t==null?void 0:t.methods)?FM(t==null?void 0:t.events)||(n=fn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=fn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function eH(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=bNe(r,`${e}, namespace`);s&&(n=s)}),n}function vNe(t,e,n){let r=null;if(t&&Eu(t)){const s=eH(t,e);s&&(r=s);const i=mNe(t,e,n);i&&(r=i)}else r=Ee("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function GA(t,e){let n=null;if(t&&Eu(t)){const r=eH(t,e);r&&(n=r);const s=wNe(t,e);s&&(n=s)}else n=Ee("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function tH(t){return cr(t.protocol,!0)}function ENe(t,e){let n=!1;return t?t&&vu(t)&&t.length&&t.forEach(r=>{n=tH(r)}):n=!0,n}function _Ne(t){return typeof t=="number"}function Qs(t){return typeof t<"u"&&typeof t!==null}function CNe(t){return!(!t||typeof t!="object"||!t.code||!lk(t.code,!1)||!t.message||!cr(t.message,!1))}function SNe(t){return!(Kr(t)||!cr(t.method,!1))}function ANe(t){return!(Kr(t)||Kr(t.result)&&Kr(t.error)||!lk(t.id,!1)||!cr(t.jsonrpc,!1))}function INe(t){return!(Kr(t)||!cr(t.name,!1))}function WM(t,e){return!(!A_(e)||!nNe(t).includes(e))}function NNe(t,e,n){return cr(n,!1)?rNe(t,e).includes(n):!1}function xNe(t,e,n){return cr(n,!1)?sNe(t,e).includes(n):!1}function zM(t,e,n){let r=null;const s=TNe(t),i=RNe(e),o=Object.keys(s),a=Object.keys(i),c=HM(Object.keys(t)),l=HM(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Pd(o,a)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=jg(e[d].accounts);h.includes(d)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Pd(s[d].methods,i[d].methods)?Pd(s[d].events,i[d].events)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function TNe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function HM(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function RNe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=jg(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function PNe(t,e){return lk(t,!1)&&t<=e.max&&t>=e.min}function qM(){const t=W0();return new Promise(e=>{switch(t){case Oi.browser:e(ONe());break;case Oi.reactNative:e(kNe());break;case Oi.node:e(DNe());break;default:e(!0)}})}function ONe(){return Lg()&&(navigator==null?void 0:navigator.onLine)}async function kNe(){if(Wu()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function DNe(){return!0}function $Ne(t){switch(W0()){case Oi.browser:MNe(t);break;case Oi.reactNative:LNe(t);break}}function MNe(t){!Wu()&&Lg()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function LNe(t){Wu()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function UNe(){var t;return Lg()&&yh()?((t=yh())==null?void 0:t.visibilityState)==="visible":!0}const KA={};class Em{static get(e){return KA[e]}static set(e,n){KA[e]=n}static delete(e){delete KA[e]}}var BNe={};const nH="wc",rH=2,$T="core",ec=`${nH}@2:${$T}:`,jNe={logger:"error"},FNe={database:":memory:"},WNe="crypto",VM="client_ed25519_seed",zNe=be.ONE_DAY,HNe="keychain",qNe="0.3",VNe="messages",GNe="0.3",GM=be.SIX_HOURS,KNe="publisher",sH="irn",YNe="error",iH="wss://relay.walletconnect.org",QNe="relayer",kr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ZNe="_subscription",Qi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},XNe=.1,MT="2.21.0",Pn={link_mode:"link_mode",relay:"relay"},Kv={inbound:"inbound",outbound:"outbound"},JNe="0.3",exe="WALLETCONNECT_CLIENT_ID",KM="WALLETCONNECT_LINK_MODE_APPS",Ai={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},txe="subscription",nxe="0.3",rxe="pairing",sxe="0.3",_m={wc_pairingDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:be.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:be.ONE_DAY,prompt:!1,tag:0},res:{ttl:be.ONE_DAY,prompt:!1,tag:0}}},yd={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ko={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},ixe="history",oxe="0.3",axe="expirer",no={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},cxe="0.3",lxe="verify-api",uxe="https://verify.walletconnect.com",oH="https://verify.walletconnect.org",Ey=oH,dxe=`${Ey}/v3`,hxe=[uxe,oH],fxe="echo",pxe="https://echo.walletconnect.com",_a={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},vc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Do={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ed={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},td={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Cm={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},gxe=.1,mxe="event-client",yxe=86400,wxe="https://pulse.walletconnect.org/batch";function bxe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var E=(b-y)*u+1>>>0,_=new Uint8Array(E);y!==b;){for(var C=p[y],I=0,A=E-1;(C!==0||I<w)&&A!==-1;A--,I++)C+=256*_[A]>>>0,_[A]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,y++}for(var x=E-w;x!==E&&_[x]===0;)x++;for(var S=c.repeat(g);x<E;++x)S+=t.charAt(_[x]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,E=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var C=0,I=b-1;(_!==0||C<y)&&I!==-1;I--,C++)_+=a*E[I]>>>0,E[I]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var A=b-y;A!==b&&E[A]===0;)A++;for(var x=new Uint8Array(w+(b-A)),S=w;A!==b;)x[S++]=E[A++];return x}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var vxe=bxe,Exe=vxe;const aH=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},_xe=t=>new TextEncoder().encode(t),Cxe=t=>new TextDecoder().decode(t);class Sxe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Axe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return cH(this,e)}}class Ixe{constructor(e){this.decoders=e}or(e){return cH(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const cH=(t,e)=>new Ixe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Nxe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Sxe(e,n,r),this.decoder=new Axe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const h1=({name:t,prefix:e,encode:n,decode:r})=>new Nxe(t,e,n,r),K0=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Exe(n,e);return h1({prefix:t,name:e,encode:r,decode:i=>aH(s(i))})},xxe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Txe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},rs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>h1({prefix:e,name:t,encode(s){return Txe(s,r,n)},decode(s){return xxe(s,r,n,t)}}),Rxe=h1({prefix:"\0",name:"identity",encode:t=>Cxe(t),decode:t=>_xe(t)});var Pxe=Object.freeze({__proto__:null,identity:Rxe});const Oxe=rs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var kxe=Object.freeze({__proto__:null,base2:Oxe});const Dxe=rs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var $xe=Object.freeze({__proto__:null,base8:Dxe});const Mxe=K0({prefix:"9",name:"base10",alphabet:"0123456789"});var Lxe=Object.freeze({__proto__:null,base10:Mxe});const Uxe=rs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Bxe=rs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var jxe=Object.freeze({__proto__:null,base16:Uxe,base16upper:Bxe});const Fxe=rs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Wxe=rs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zxe=rs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Hxe=rs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),qxe=rs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Vxe=rs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Gxe=rs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Kxe=rs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Yxe=rs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Qxe=Object.freeze({__proto__:null,base32:Fxe,base32upper:Wxe,base32pad:zxe,base32padupper:Hxe,base32hex:qxe,base32hexupper:Vxe,base32hexpad:Gxe,base32hexpadupper:Kxe,base32z:Yxe});const Zxe=K0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Xxe=K0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Jxe=Object.freeze({__proto__:null,base36:Zxe,base36upper:Xxe});const eTe=K0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),tTe=K0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var nTe=Object.freeze({__proto__:null,base58btc:eTe,base58flickr:tTe});const rTe=rs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sTe=rs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),iTe=rs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),oTe=rs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var aTe=Object.freeze({__proto__:null,base64:rTe,base64pad:sTe,base64url:iTe,base64urlpad:oTe});const lH=Array.from(""),cTe=lH.reduce((t,e,n)=>(t[n]=e,t),[]),lTe=lH.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function uTe(t){return t.reduce((e,n)=>(e+=cTe[n],e),"")}function dTe(t){const e=[];for(const n of t){const r=lTe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const hTe=h1({prefix:"",name:"base256emoji",encode:uTe,decode:dTe});var fTe=Object.freeze({__proto__:null,base256emoji:hTe}),pTe=uH,YM=128,gTe=-128,mTe=Math.pow(2,31);function uH(t,e,n){e=e||[],n=n||0;for(var r=n;t>=mTe;)e[n++]=t&255|YM,t/=128;for(;t&gTe;)e[n++]=t&255|YM,t>>>=7;return e[n]=t|0,uH.bytes=n-r+1,e}var yTe=LT,wTe=128,QM=127;function LT(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw LT.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&QM)<<s:(o&QM)*Math.pow(2,s),s+=7}while(o>=wTe);return LT.bytes=i-r,n}var bTe=Math.pow(2,7),vTe=Math.pow(2,14),ETe=Math.pow(2,21),_Te=Math.pow(2,28),CTe=Math.pow(2,35),STe=Math.pow(2,42),ATe=Math.pow(2,49),ITe=Math.pow(2,56),NTe=Math.pow(2,63),xTe=function(t){return t<bTe?1:t<vTe?2:t<ETe?3:t<_Te?4:t<CTe?5:t<STe?6:t<ATe?7:t<ITe?8:t<NTe?9:10},TTe={encode:pTe,decode:yTe,encodingLength:xTe},dH=TTe;const ZM=(t,e,n=0)=>(dH.encode(t,e,n),e),XM=t=>dH.encodingLength(t),UT=(t,e)=>{const n=e.byteLength,r=XM(t),s=r+XM(n),i=new Uint8Array(s+n);return ZM(t,i,0),ZM(n,i,r),i.set(e,s),new RTe(t,n,e,i)};class RTe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const hH=({name:t,code:e,encode:n})=>new PTe(t,e,n);class PTe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?UT(this.code,n):n.then(r=>UT(this.code,r))}else throw Error("Unknown type, must be binary type")}}const fH=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),OTe=hH({name:"sha2-256",code:18,encode:fH("SHA-256")}),kTe=hH({name:"sha2-512",code:19,encode:fH("SHA-512")});var DTe=Object.freeze({__proto__:null,sha256:OTe,sha512:kTe});const pH=0,$Te="identity",gH=aH,MTe=t=>UT(pH,gH(t)),LTe={code:pH,name:$Te,encode:gH,digest:MTe};var UTe=Object.freeze({__proto__:null,identity:LTe});new TextEncoder,new TextDecoder;const JM={...Pxe,...kxe,...$xe,...Lxe,...jxe,...Qxe,...Jxe,...nTe,...aTe,...fTe};({...DTe,...UTe});function BTe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function mH(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const eL=mH("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),YA=mH("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=BTe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),jTe={utf8:eL,"utf-8":eL,hex:JM.base16,latin1:YA,ascii:YA,binary:YA,...JM};function FTe(t,e="utf8"){const n=jTe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var WTe=Object.defineProperty,zTe=(t,e,n)=>e in t?WTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wa=(t,e,n)=>zTe(t,typeof e!="symbol"?e+"":e,n);class HTe{constructor(e,n){this.core=e,this.logger=n,wa(this,"keychain",new Map),wa(this,"name",HNe),wa(this,"version",qNe),wa(this,"initialized",!1),wa(this,"storagePrefix",ec),wa(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),wa(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),wa(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),wa(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Ee("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),wa(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=es(n,this.name)}get context(){return yi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,CT(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ST(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var qTe=Object.defineProperty,VTe=(t,e,n)=>e in t?qTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wr=(t,e,n)=>VTe(t,typeof e!="symbol"?e+"":e,n);class GTe{constructor(e,n,r){this.core=e,this.logger=n,Wr(this,"name",WNe),Wr(this,"keychain"),Wr(this,"randomSessionIdentifier",DT()),Wr(this,"initialized",!1),Wr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Wr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Wr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=f5(s);return DW(i.publicKey)}),Wr(this,"generateKeyPair",()=>{this.isInitialized();const s=MIe();return this.setPrivateKey(s.publicKey,s.privateKey)}),Wr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=f5(i),a=this.randomSessionIdentifier;return await N0e(a,s,zNe,o)}),Wr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=LIe(a,i);return this.setSymKey(c,o)}),Wr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Gv(s);return await this.keychain.set(o,s),o}),Wr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Wr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Wr(this,"encode",async(s,i,o)=>{this.isInitialized();const a=Jz(o),c=Qc(i);if(DM(a))return jIe(c,o==null?void 0:o.encoding);if(kM(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return UIe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Wr(this,"decode",async(s,i,o)=>{this.isInitialized();const a=WIe(i,o);if(DM(a)){const c=FIe(i,o==null?void 0:o.encoding);return mh(c)}if(kM(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=BIe({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return mh(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Wr(this,"getPayloadType",(s,i=Jo)=>{const o=Kw({encoded:s,encoding:i});return Sh(o.type)}),Wr(this,"getPayloadSenderPublicKey",(s,i=Jo)=>{const o=Kw({encoded:s,encoding:i});return o.senderPublicKey?fi(o.senderPublicKey,ks):void 0}),this.core=e,this.logger=es(n,this.name),this.keychain=r||new HTe(this.core,this.logger)}get context(){return yi(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(VM)}catch{e=DT(),await this.keychain.set(VM,e)}return FTe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var KTe=Object.defineProperty,YTe=Object.defineProperties,QTe=Object.getOwnPropertyDescriptors,tL=Object.getOwnPropertySymbols,ZTe=Object.prototype.hasOwnProperty,XTe=Object.prototype.propertyIsEnumerable,BT=(t,e,n)=>e in t?KTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,JTe=(t,e)=>{for(var n in e||(e={}))ZTe.call(e,n)&&BT(t,n,e[n]);if(tL)for(var n of tL(e))XTe.call(e,n)&&BT(t,n,e[n]);return t},eRe=(t,e)=>YTe(t,QTe(e)),bi=(t,e,n)=>BT(t,typeof e!="symbol"?e+"":e,n);class tRe extends ZCe{constructor(e,n){super(e,n),this.logger=e,this.core=n,bi(this,"messages",new Map),bi(this,"messagesWithoutClientAck",new Map),bi(this,"name",VNe),bi(this,"version",GNe),bi(this,"initialized",!1),bi(this,"storagePrefix",ec),bi(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),bi(this,"set",async(r,s,i)=>{this.isInitialized();const o=Oa(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===Kv.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,eRe(JTe({},c),{[o]:s}))}return await this.persist(),o}),bi(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),bi(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),bi(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Oa(s);return typeof i[o]<"u"}),bi(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Oa(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),bi(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=es(e,this.name),this.core=n}get context(){return yi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,CT(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,CT(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ST(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?ST(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nRe=Object.defineProperty,rRe=Object.defineProperties,sRe=Object.getOwnPropertyDescriptors,nL=Object.getOwnPropertySymbols,iRe=Object.prototype.hasOwnProperty,oRe=Object.prototype.propertyIsEnumerable,jT=(t,e,n)=>e in t?nRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,av=(t,e)=>{for(var n in e||(e={}))iRe.call(e,n)&&jT(t,n,e[n]);if(nL)for(var n of nL(e))oRe.call(e,n)&&jT(t,n,e[n]);return t},QA=(t,e)=>rRe(t,sRe(e)),$o=(t,e,n)=>jT(t,typeof e!="symbol"?e+"":e,n);class aRe extends XCe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,$o(this,"events",new So.EventEmitter),$o(this,"name",KNe),$o(this,"queue",new Map),$o(this,"publishTimeout",be.toMiliseconds(be.ONE_MINUTE)),$o(this,"initialPublishTimeout",be.toMiliseconds(be.ONE_SECOND*15)),$o(this,"needsTransportRestart",!1),$o(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||GM,c=S_(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Rd().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(kr.publish,w),g(h))};this.relayer.events.on(kr.publish,w);const y=Xl(new Promise((b,E)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(_=>{this.logger.warn(_,_==null?void 0:_.message),E(_)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(kr.publish,w)}catch(b){this.queue.set(d,QA(av({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Xl(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),$o(this,"on",(r,s)=>{this.events.on(r,s)}),$o(this,"once",(r,s)=>{this.events.once(r,s)}),$o(this,"off",(r,s)=>{this.events.off(r,s)}),$o(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=es(n,this.name),this.registerEventListeners()}get context(){return yi(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=GM,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Fm(S_().protocol).publish,params:av({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Kr((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Kr((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(kr.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,QA(av({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(QA(av({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Fh.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(kr.connection_stalled);return}this.checkQueue()}),this.relayer.on(kr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var cRe=Object.defineProperty,lRe=(t,e,n)=>e in t?cRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mf=(t,e,n)=>lRe(t,typeof e!="symbol"?e+"":e,n);class uRe{constructor(){mf(this,"map",new Map),mf(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),mf(this,"get",e=>this.map.get(e)||[]),mf(this,"exists",(e,n)=>this.get(e).includes(n)),mf(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),mf(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var dRe=Object.defineProperty,hRe=Object.defineProperties,fRe=Object.getOwnPropertyDescriptors,rL=Object.getOwnPropertySymbols,pRe=Object.prototype.hasOwnProperty,gRe=Object.prototype.propertyIsEnumerable,FT=(t,e,n)=>e in t?dRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sm=(t,e)=>{for(var n in e||(e={}))pRe.call(e,n)&&FT(t,n,e[n]);if(rL)for(var n of rL(e))gRe.call(e,n)&&FT(t,n,e[n]);return t},ZA=(t,e)=>hRe(t,fRe(e)),yn=(t,e,n)=>FT(t,typeof e!="symbol"?e+"":e,n);class mRe extends t1e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,yn(this,"subscriptions",new Map),yn(this,"topicMap",new uRe),yn(this,"events",new So.EventEmitter),yn(this,"name",txe),yn(this,"version",nxe),yn(this,"pending",new Map),yn(this,"cached",[]),yn(this,"initialized",!1),yn(this,"storagePrefix",ec),yn(this,"subscribeTimeout",be.toMiliseconds(be.ONE_MINUTE)),yn(this,"initialSubscribeTimeout",be.toMiliseconds(be.ONE_SECOND*15)),yn(this,"clientId"),yn(this,"batchSubscribeTopicsLimit",500),yn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),yn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=S_(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),yn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),yn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),yn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),yn(this,"on",(r,s)=>{this.events.on(r,s)}),yn(this,"once",(r,s)=>{this.events.once(r,s)}),yn(this,"off",(r,s)=>{this.events.off(r,s)}),yn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),yn(this,"start",async()=>{await this.onConnect()}),yn(this,"stop",async()=>{await this.onDisconnect()}),yn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),yn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),yn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Fh.pulse,async()=>{await this.checkPending()}),this.events.on(Ai.created,async r=>{const s=Ai.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Ai.deleted,async r=>{const s=Ai.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=es(n,this.name),this.clientId=""}get context(){return yi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=S_(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=fn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===Pn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Fm(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Pn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},be.toMiliseconds(be.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Ai.created,d),u(h.id))};this.events.on(Ai.created,d);try{const h=await Xl(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ai.created,d),u(h)}catch{}}),l=await Xl(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(kr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Fm(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Xl(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(kr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Fm(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Xl(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(kr.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Fm(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,ZA(Sm({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Sm({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Sm({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ai.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Ai.deleted,ZA(Sm({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ai.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ai.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>ZA(Sm({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await CSe(be.toMiliseconds(be.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Oa(e+await this.getClientId())}}var yRe=Object.defineProperty,sL=Object.getOwnPropertySymbols,wRe=Object.prototype.hasOwnProperty,bRe=Object.prototype.propertyIsEnumerable,WT=(t,e,n)=>e in t?yRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iL=(t,e)=>{for(var n in e||(e={}))wRe.call(e,n)&&WT(t,n,e[n]);if(sL)for(var n of sL(e))bRe.call(e,n)&&WT(t,n,e[n]);return t},zt=(t,e,n)=>WT(t,typeof e!="symbol"?e+"":e,n);class vRe extends JCe{constructor(e){super(e),zt(this,"protocol","wc"),zt(this,"version",2),zt(this,"core"),zt(this,"logger"),zt(this,"events",new So.EventEmitter),zt(this,"provider"),zt(this,"messages"),zt(this,"subscriber"),zt(this,"publisher"),zt(this,"name",QNe),zt(this,"transportExplicitlyClosed",!1),zt(this,"initialized",!1),zt(this,"connectionAttemptInProgress",!1),zt(this,"relayUrl"),zt(this,"projectId"),zt(this,"packageName"),zt(this,"bundleId"),zt(this,"hasExperiencedNetworkDisruption",!1),zt(this,"pingTimeout"),zt(this,"heartBeatTimeout",be.toMiliseconds(be.THIRTY_SECONDS+be.FIVE_SECONDS)),zt(this,"reconnectTimeout"),zt(this,"connectPromise"),zt(this,"reconnectInProgress",!1),zt(this,"requestsInFlight",[]),zt(this,"connectTimeout",be.toMiliseconds(be.ONE_SECOND*15)),zt(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Rd().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),zt(this,"resetPingTimeout",()=>{__()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),zt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),zt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(kr.connect)}),zt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),zt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(kr.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),zt(this,"registerProviderListeners",()=>{this.provider.on(Qi.payload,this.onPayloadHandler),this.provider.on(Qi.connect,this.onConnectHandler),this.provider.on(Qi.disconnect,this.onDisconnectHandler),this.provider.on(Qi.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?es(e.logger,this.name):L0(zh({level:e.logger||YNe})),this.messages=new tRe(this.logger,e.core),this.subscriber=new mRe(this,this.logger),this.publisher=new aRe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||iH,this.projectId=e.projectId,aSe()?this.packageName=rM():cSe()&&(this.bundleId=rM()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return yi(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Pn.relay},Kv.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Ai.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Ai.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,iL({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Xl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await qM())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=fr(be.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(kr.message,e),await this.recordMessageEvent(e,Kv.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Qi.disconnect,i),await Xl(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Qi.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Qi.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Qi.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,be.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(__())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Ao(new Bve(fSe({sdkVersion:MT,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ek(e)){if(!e.method.endsWith(ZNe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:Pn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(iL({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else n1(e)&&this.events.emit(kr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Kv.inbound),this.events.emit(kr.message,e))}async acknowledgePayload(e){const n=e1(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Qi.payload,this.onPayloadHandler),this.provider.off(Qi.connect,this.onConnectHandler),this.provider.off(Qi.disconnect,this.onDisconnectHandler),this.provider.off(Qi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await qM();$Ne(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Fh.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&UNe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(kr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},be.toMiliseconds(XNe)))))}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function ERe(){}function oL(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function aL(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function cL(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const _Re="[object RegExp]",CRe="[object String]",SRe="[object Number]",ARe="[object Boolean]",lL="[object Arguments]",IRe="[object Symbol]",NRe="[object Date]",xRe="[object Map]",TRe="[object Set]",RRe="[object Array]",PRe="[object Function]",ORe="[object ArrayBuffer]",XA="[object Object]",kRe="[object Error]",DRe="[object DataView]",$Re="[object Uint8Array]",MRe="[object Uint8ClampedArray]",LRe="[object Uint16Array]",URe="[object Uint32Array]",BRe="[object BigUint64Array]",jRe="[object Int8Array]",FRe="[object Int16Array]",WRe="[object Int32Array]",zRe="[object BigInt64Array]",HRe="[object Float32Array]",qRe="[object Float64Array]";function VRe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function GRe(t,e,n){return Wm(t,e,void 0,void 0,void 0,void 0,n)}function Wm(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return _y(t,e,i,o)}return _y(t,e,i,o)}function _y(t,e,n,r){if(Object.is(t,e))return!0;let s=cL(t),i=cL(e);if(s===lL&&(s=XA),i===lL&&(i=XA),s!==i)return!1;switch(s){case CRe:return t.toString()===e.toString();case SRe:{const c=t.valueOf(),l=e.valueOf();return VRe(c,l)}case ARe:case NRe:case IRe:return Object.is(t.valueOf(),e.valueOf());case _Re:return t.source===e.source&&t.flags===e.flags;case PRe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case xRe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Wm(l,e.get(c),c,t,e,n,r))return!1;return!0}case TRe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Wm(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case RRe:case $Re:case MRe:case LRe:case URe:case BRe:case jRe:case FRe:case WRe:case zRe:case HRe:case qRe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Wm(t[c],e[c],c,t,e,n,r))return!1;return!0}case ORe:return t.byteLength!==e.byteLength?!1:_y(new Uint8Array(t),new Uint8Array(e),n,r);case DRe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:_y(new Uint8Array(t),new Uint8Array(e),n,r);case kRe:return t.name===e.name&&t.message===e.message;case XA:{if(!(_y(t.constructor,e.constructor,n,r)||oL(t)&&oL(e)))return!1;const c=[...Object.keys(t),...aL(t)],l=[...Object.keys(e),...aL(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Wm(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function KRe(t,e){return GRe(t,e,ERe)}var YRe=Object.defineProperty,uL=Object.getOwnPropertySymbols,QRe=Object.prototype.hasOwnProperty,ZRe=Object.prototype.propertyIsEnumerable,zT=(t,e,n)=>e in t?YRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dL=(t,e)=>{for(var n in e||(e={}))QRe.call(e,n)&&zT(t,n,e[n]);if(uL)for(var n of uL(e))ZRe.call(e,n)&&zT(t,n,e[n]);return t},Hs=(t,e,n)=>zT(t,typeof e!="symbol"?e+"":e,n);class qh extends e1e{constructor(e,n,r,s=ec,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Hs(this,"map",new Map),Hs(this,"version",JNe),Hs(this,"cached",[]),Hs(this,"initialized",!1),Hs(this,"getKey"),Hs(this,"storagePrefix",ec),Hs(this,"recentlyDeleted",[]),Hs(this,"recentlyDeletedLimit",200),Hs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Kr(o)?this.map.set(this.getKey(o),o):hNe(o)?this.map.set(o.id,o):fNe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Hs(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Hs(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Hs(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>KRe(a[c],o[c]))):this.values)),Hs(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=dL(dL({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Hs(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=es(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return yi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Ee("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var XRe=Object.defineProperty,JRe=(t,e,n)=>e in t?XRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ot=(t,e,n)=>JRe(t,typeof e!="symbol"?e+"":e,n);class ePe{constructor(e,n){this.core=e,this.logger=n,Ot(this,"name",rxe),Ot(this,"version",sxe),Ot(this,"events",new WO),Ot(this,"pairings"),Ot(this,"initialized",!1),Ot(this,"storagePrefix",ec),Ot(this,"ignoredPayloadTypes",[Bc]),Ot(this,"registeredMethods",[]),Ot(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ot(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Ot(this,"create",async r=>{this.isInitialized();const s=DT(),i=await this.core.crypto.setSymKey(s),o=fr(be.FIVE_MINUTES),a={protocol:sH},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=MM({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(yd.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Ot(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[_a.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=$M(r.uri);s.props.properties.topic=i,s.addTrace(_a.pairing_uri_validation_success),s.addTrace(_a.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(_a.existing_pairing),u.active)throw s.setError(vc.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(_a.pairing_not_expired)}const d=c||fr(be.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(_a.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(yd.create,h),s.addTrace(_a.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(_a.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(vc.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(vc.subscribe_pairing_topic_failure),f}return s.addTrace(_a.subscribe_pairing_topic_success),h}),Ot(this,"activate",async({topic:r})=>{this.isInitialized();const s=fr(be.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Ot(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=ud();this.events.once(en("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Ot(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Ot(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Ot(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ot(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",fn("USER_DISCONNECTED")),await this.deletePairing(s))}),Ot(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return MM({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Ot(this,"sendRequest",async(r,s,i)=>{const o=Zl(s,i),a=await this.core.crypto.encode(r,o),c=_m[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Ot(this,"sendResult",async(r,s,i)=>{const o=e1(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=_m[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Ot(this,"sendError",async(r,s,i)=>{const o=t1(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=_m[c]?_m[c].res:_m.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Ot(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,fn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Ot(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Rl(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Ot(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Ot(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Ot(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(yd.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ot(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Aa(s)?this.events.emit(en("pairing_ping",i),{}):io(s)&&this.events.emit(en("pairing_ping",i),{error:s.error})},500)}),Ot(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(yd.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ot(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=fn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Ot(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(fn("WC_METHOD_UNSUPPORTED",r))}),Ot(this,"isValidPair",(r,s)=>{var i;if(!Qs(r)){const{message:a}=Ee("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(vc.malformed_pairing_uri),new Error(a)}if(!dNe(r.uri)){const{message:a}=Ee("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(vc.malformed_pairing_uri),new Error(a)}const o=$M(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Ee("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(vc.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Ee("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(vc.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&be.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(vc.pairing_expired);const{message:a}=Ee("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Ot(this,"isValidPing",async r=>{if(!Qs(r)){const{message:i}=Ee("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ot(this,"isValidDisconnect",async r=>{if(!Qs(r)){const{message:i}=Ee("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ot(this,"isValidPairingTopic",async r=>{if(!cr(r,!1)){const{message:s}=Ee("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Rl(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Ee("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=es(n,this.name),this.pairings=new qh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return yi(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(kr.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==Pn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);ek(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):n1(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(no.expired,async e=>{const{topic:n}=vz(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(yd.expire,{topic:n}))})}}var tPe=Object.defineProperty,nPe=(t,e,n)=>e in t?tPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zr=(t,e,n)=>nPe(t,typeof e!="symbol"?e+"":e,n);class rPe extends QCe{constructor(e,n){super(e,n),this.core=e,this.logger=n,zr(this,"records",new Map),zr(this,"events",new So.EventEmitter),zr(this,"name",ixe),zr(this,"version",oxe),zr(this,"cached",[]),zr(this,"initialized",!1),zr(this,"storagePrefix",ec),zr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),zr(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:fr(be.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(ko.created,o)}),zr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=io(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(ko.updated,s))}),zr(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),zr(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(ko.deleted,i)}}),this.persist()}),zr(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),zr(this,"on",(r,s)=>{this.events.on(r,s)}),zr(this,"once",(r,s)=>{this.events.once(r,s)}),zr(this,"off",(r,s)=>{this.events.off(r,s)}),zr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=es(n,this.name)}get context(){return yi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Zl(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ko.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ko.created,e=>{const n=ko.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ko.updated,e=>{const n=ko.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ko.deleted,e=>{const n=ko.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Fh.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{be.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(ko.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var sPe=Object.defineProperty,iPe=(t,e,n)=>e in t?sPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,us=(t,e,n)=>iPe(t,typeof e!="symbol"?e+"":e,n);class oPe extends n1e{constructor(e,n){super(e,n),this.core=e,this.logger=n,us(this,"expirations",new Map),us(this,"events",new So.EventEmitter),us(this,"name",axe),us(this,"version",cxe),us(this,"cached",[]),us(this,"initialized",!1),us(this,"storagePrefix",ec),us(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),us(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),us(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(no.created,{target:i,expiration:o})}),us(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),us(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(no.deleted,{target:s,expiration:i})}}),us(this,"on",(r,s)=>{this.events.on(r,s)}),us(this,"once",(r,s)=>{this.events.once(r,s)}),us(this,"off",(r,s)=>{this.events.off(r,s)}),us(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=es(n,this.name)}get context(){return yi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return pSe(e);if(typeof e=="number")return gSe(e);const{message:n}=Ee("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(no.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;be.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(no.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Fh.pulse,()=>this.checkExpirations()),this.events.on(no.created,e=>{const n=no.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(no.expired,e=>{const n=no.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(no.deleted,e=>{const n=no.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var aPe=Object.defineProperty,cPe=(t,e,n)=>e in t?aPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ar=(t,e,n)=>cPe(t,typeof e!="symbol"?e+"":e,n);class lPe extends r1e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,ar(this,"name",lxe),ar(this,"abortController"),ar(this,"isDevEnv"),ar(this,"verifyUrlV3",dxe),ar(this,"storagePrefix",ec),ar(this,"version",rH),ar(this,"publicKey"),ar(this,"fetchPromise"),ar(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&be.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ar(this,"register",async s=>{if(!Lg()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=yh(),u=this.startAbortTimer(be.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(dT(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),ar(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(dT(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),ar(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(be.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ar(this,"getVerifyUrl",s=>{let i=s||Ey;return hxe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Ey}`),i=Ey),i}),ar(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(be.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),ar(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),ar(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ar(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ar(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ar(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),ar(this,"validateAttestation",(s,i)=>{const o=HIe(s,i.publicKey),a={hasExpired:be.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=es(n,this.name),this.abortController=new AbortController,this.isDevEnv=nk(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return yi(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),be.toMiliseconds(e))}}var uPe=Object.defineProperty,dPe=(t,e,n)=>e in t?uPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hL=(t,e,n)=>dPe(t,typeof e!="symbol"?e+"":e,n);class hPe extends s1e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,hL(this,"context",fxe),hL(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${pxe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=es(n,this.context)}}var fPe=Object.defineProperty,fL=Object.getOwnPropertySymbols,pPe=Object.prototype.hasOwnProperty,gPe=Object.prototype.propertyIsEnumerable,HT=(t,e,n)=>e in t?fPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Am=(t,e)=>{for(var n in e||(e={}))pPe.call(e,n)&&HT(t,n,e[n]);if(fL)for(var n of fL(e))gPe.call(e,n)&&HT(t,n,e[n]);return t},Ar=(t,e,n)=>HT(t,typeof e!="symbol"?e+"":e,n);class mPe extends i1e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Ar(this,"context",mxe),Ar(this,"storagePrefix",ec),Ar(this,"storageVersion",gxe),Ar(this,"events",new Map),Ar(this,"shouldPersist",!1),Ar(this,"init",async()=>{if(!nk())try{const s={eventId:iM(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:wz(this.core.relayer.protocol,this.core.relayer.version,MT)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Ar(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=iM(),u=this.core.projectId||"",d=Date.now(),h=Am({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Ar(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Am(Am({},a),this.setMethods(a.eventId))}),Ar(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Ar(this,"setEventListeners",()=>{this.core.heartbeat.on(Fh.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{be.fromMiliseconds(Date.now())-be.fromMiliseconds(s.timestamp)>yxe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Ar(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Ar(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Ar(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Ar(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Ar(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Am(Am({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Ar(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Ar(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${wxe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${MT}${i}`,{method:"POST",body:JSON.stringify(s)})}),Ar(this,"getAppDomain",()=>yz().url),this.logger=es(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var yPe=Object.defineProperty,pL=Object.getOwnPropertySymbols,wPe=Object.prototype.hasOwnProperty,bPe=Object.prototype.propertyIsEnumerable,qT=(t,e,n)=>e in t?yPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gL=(t,e)=>{for(var n in e||(e={}))wPe.call(e,n)&&qT(t,n,e[n]);if(pL)for(var n of pL(e))bPe.call(e,n)&&qT(t,n,e[n]);return t},Cn=(t,e,n)=>qT(t,typeof e!="symbol"?e+"":e,n);let vPe=class yH extends VCe{constructor(e){var n;super(e),Cn(this,"protocol",nH),Cn(this,"version",rH),Cn(this,"name",$T),Cn(this,"relayUrl"),Cn(this,"projectId"),Cn(this,"customStoragePrefix"),Cn(this,"events",new So.EventEmitter),Cn(this,"logger"),Cn(this,"heartbeat"),Cn(this,"relayer"),Cn(this,"crypto"),Cn(this,"storage"),Cn(this,"history"),Cn(this,"expirer"),Cn(this,"pairing"),Cn(this,"verify"),Cn(this,"echoClient"),Cn(this,"linkModeSupportedApps"),Cn(this,"eventClient"),Cn(this,"initialized",!1),Cn(this,"logChunkController"),Cn(this,"on",(a,c)=>this.events.on(a,c)),Cn(this,"once",(a,c)=>this.events.once(a,c)),Cn(this,"off",(a,c)=>this.events.off(a,c)),Cn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Cn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:Pn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||iH,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=zh({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:jNe.logger,name:$T}),{logger:i,chunkLoggerController:o}=YC({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=es(i,this.name),this.heartbeat=new Xge,this.crypto=new GTe(this,this.logger,e==null?void 0:e.keychain),this.history=new rPe(this,this.logger),this.expirer=new oPe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new zCe(gL(gL({},FNe),e==null?void 0:e.storageOptions)),this.relayer=new vRe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new ePe(this,this.logger),this.verify=new lPe(this,this.logger,this.storage),this.echoClient=new hPe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new mPe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new yH(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(exe,r),n}get context(){return yi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(KM,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(KM)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&BNe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const EPe=vPe,wH="wc",bH=2,vH="client",uk=`${wH}@${bH}:${vH}:`,JA={name:vH,logger:"error"},mL="WALLETCONNECT_DEEPLINK_CHOICE",_Pe="proposal",yL="Proposal expired",CPe="session",yf=be.SEVEN_DAYS,SPe="engine",Ir={wc_sessionPropose:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1104},res:{ttl:be.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1106},res:{ttl:be.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1112},res:{ttl:be.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1114},res:{ttl:be.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:be.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:be.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1119}}},eI={min:be.FIVE_MINUTES,max:be.SEVEN_DAYS},ba={idle:"IDLE",active:"ACTIVE"},wL={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},APe="request",IPe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],NPe="wc",xPe="auth",TPe="authKeys",RPe="pairingTopics",PPe="requests",f1=`${NPe}@${1.5}:${xPe}:`,Yv=`${f1}:PUB_KEY`;var OPe=Object.defineProperty,kPe=Object.defineProperties,DPe=Object.getOwnPropertyDescriptors,bL=Object.getOwnPropertySymbols,$Pe=Object.prototype.hasOwnProperty,MPe=Object.prototype.propertyIsEnumerable,VT=(t,e,n)=>e in t?OPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wn=(t,e)=>{for(var n in e||(e={}))$Pe.call(e,n)&&VT(t,n,e[n]);if(bL)for(var n of bL(e))MPe.call(e,n)&&VT(t,n,e[n]);return t},Es=(t,e)=>kPe(t,DPe(e)),fe=(t,e,n)=>VT(t,typeof e!="symbol"?e+"":e,n);class LPe extends l1e{constructor(e){super(e),fe(this,"name",SPe),fe(this,"events",new WO),fe(this,"initialized",!1),fe(this,"requestQueue",{state:ba.idle,queue:[]}),fe(this,"sessionRequestQueue",{state:ba.idle,queue:[]}),fe(this,"requestQueueDelay",be.ONE_SECOND),fe(this,"expectedPairingMethodMap",new Map),fe(this,"recentlyDeletedMap",new Map),fe(this,"recentlyDeletedLimit",200),fe(this,"relayMessageCache",[]),fe(this,"pendingSessions",new Map),fe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Ir)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},be.toMiliseconds(this.requestQueueDelay)))}),fe(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=Es(wn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=oNe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const I=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),I}if(!u||!h){const{topic:I,uri:A}=await this.client.core.pairing.create();u=I,d=A}if(!u){const{message:I}=Ee("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(I)}const f=await this.client.core.crypto.generateKeyPair(),p=Ir.wc_sessionPropose.req.ttl||be.FIVE_MINUTES,g=fr(p),w=Es(wn(wn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:sH}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Sa()}),y=en("session_connect",w.id),{reject:b,resolve:E,done:_}=ud(p,yL),C=({id:I})=>{I===w.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:yL,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(y,({error:I,session:A})=>{this.client.events.off("proposal_expire",C),I?b(I):A&&E(A)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:_}}),fe(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),fe(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Do.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(ed.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(ed.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(ed.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Do.session_approve_started,properties:{topic:p,trace:[Do.session_approve_started,Do.session_namespaces_validation_success]}}));const E=await this.client.core.crypto.generateKeyPair(),_=g.publicKey,C=await this.client.core.crypto.generateSharedKey(E,_),I=wn(wn(wn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:E,metadata:this.client.metadata},expiry:fr(yf)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),A=Pn.relay;b.addTrace(Do.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:A})}catch(S){throw b.setError(ed.subscribe_session_topic_failure),S}b.addTrace(Do.subscribe_session_topic_success);const x=Es(wn({},I),{topic:C,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:I.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:E,transportType:Pn.relay});await this.client.session.set(C,x),b.addTrace(Do.store_session);try{b.addTrace(Do.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:I,throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(ed.session_settle_publish_failure),S}),b.addTrace(Do.session_settle_publish_success),b.addTrace(Do.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:E},throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(ed.session_approve_publish_failure),S}),b.addTrace(Do.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(C,fn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),S}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,fn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,fr(yf)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),fe(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:Ir.wc_sessionPropose.reject}),await this.client.proposal.delete(r,fn("USER_DISCONNECTED")))}),fe(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=ud(),c=Sa(),l=Rd().toString(),u=this.client.session.get(r).namespaces;return this.events.once(en("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),fe(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Sa(),{done:i,resolve:o,reject:a}=ud();return this.events.once(en("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,fr(yf)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),fe(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=Ir.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===Pn.relay&&await this.confirmOnlineStateOrThrow();const c=Sa(),l=Rd().toString(),{done:u,resolve:d,reject:h}=ud(o,"Request expired. Please try again.");this.events.once(en("session_request",c),({error:y,result:b})=>{y?h(y):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:Es(wn({},s),{expiryTimestamp:fr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:Es(wn({},s),{expiryTimestamp:fr(o)}),chainId:r},w=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(wn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const E=await bSe(this.client.core.storage,mL);await mSe({id:c,topic:i,wcDeepLink:E})}y()}),u()]).then(y=>y[2])}),fe(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===Pn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Aa(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):io(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),fe(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Sa(),i=Rd().toString(),{done:o,resolve:a,reject:c}=ud();this.events.once(en("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),fe(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Rd().toString(),a=Sa();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),fe(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:fn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Ee("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),fe(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>lNe(r,n)))),fe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),fe(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?Pn.link_mode:Pn.relay;o===Pn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:E}});const _=await this.client.core.crypto.generateKeyPair(),C=Gv(_);if(await Promise.all([this.client.auth.authKeys.set(Yv,{responseTopic:C,publicKey:_}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:b})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:k}=gp(a[0]);let B=dAe(k,"request",g);Vv(y)&&(B=fAe(B,y.pop())),y.push(B)}const I=w&&w>Ir.wc_sessionAuthenticate.req.ttl?w:Ir.wc_sessionAuthenticate.req.ttl,A={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:fr(I)},x={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:x,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:fr(Ir.wc_sessionPropose.req.ttl),id:Sa()},{done:D,resolve:P,reject:U}=ud(I,"Request expired"),q=Sa(),j=en("session_connect",S.id),T=en("session_request",q),N=async({error:k,session:B})=>{this.events.off(T,$),k?U(k):B&&P({session:B})},$=async k=>{var B,H,X;if(await this.deletePendingAuthRequest(q,{message:"fulfilled",code:0}),k.error){const de=fn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===de.code?void 0:(this.events.off(j,N),U(k.error.message))}await this.deleteProposal(S.id),this.events.off(j,N);const{cacaos:se,responder:ne}=k.result,ae=[],me=[];for(const de of se){await fM({cacao:de,projectId:this.client.core.projectId})||(this.client.logger.error(de,"Signature verification failed"),U(fn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ee}=de,he=Vv(ee.resources),Ne=[AT(ee.iss)],le=C_(ee.iss);if(he){const ye=pM(he),ze=gM(he);ae.push(...ye),Ne.push(...ze)}for(const ye of Ne)me.push(`${ye}:${le}`)}const Z=await this.client.core.crypto.generateSharedKey(_,ne.publicKey);let re;ae.length>0&&(re={topic:Z,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:ne,controller:ne.publicKey,expiry:fr(yf),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:jM([...new Set(ae)],[...new Set(me)]),transportType:o},await this.client.core.relayer.subscribe(Z,{transportType:o}),await this.client.session.set(Z,re),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:ne.metadata}),re=this.client.session.get(Z)),(B=this.client.metadata.redirect)!=null&&B.linkMode&&(H=ne.metadata.redirect)!=null&&H.linkMode&&(X=ne.metadata.redirect)!=null&&X.universal&&r&&(this.client.core.addLinkModeSupportedApp(ne.metadata.redirect.universal),this.client.session.update(Z,{transportType:Pn.link_mode})),P({auths:se,session:re})};this.events.once(j,N),this.events.once(T,$);let R;try{if(i){const k=Zl("wc_sessionAuthenticate",A,q);this.client.core.history.set(b,k);const B=await this.client.core.crypto.encode("",k,{type:G0,encoding:$l});R=ov(r,b,B)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:A,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:q}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:S,expiry:Ir.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(k){throw this.events.off(j,N),this.events.off(T,$),k}return await this.setProposal(S.id,S),await this.setAuthRequest(q,{request:Es(wn({},A),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:R??E,response:D}}),fe(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[td.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(Cm.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Cm.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||Pn.relay;a===Pn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Gv(c),d={type:Bc,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await fM({cacao:w,projectId:this.client.core.projectId})){i.setError(Cm.invalid_cacao);const C=fn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(td.cacaos_verified);const{p:y}=w,b=Vv(y.resources),E=[AT(y.iss)],_=C_(y.iss);if(b){const C=pM(b),I=gM(b);h.push(...C),E.push(...I)}for(const C of E)f.push(`${C}:${_}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(td.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:fr(yf),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:jM([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(td.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(Cm.subscribe_authenticated_session_topic_failure),w}i.addTrace(td.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(td.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(td.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(Cm.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),fe(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Pn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Gv(o),l={type:Bc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Ir.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,fn("USER_DISCONNECTED"))}),fe(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return Tz(r,s)}),fe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),fe(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),fe(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,fn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(mL).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,fn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=ba.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),fe(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(ed.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,fn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),fe(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=ba.idle,this.client.events.emit("session_request_expire",{id:n}))}),fe(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),fe(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),fe(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,fr(Ir.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),fe(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=Pn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),fe(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||fr(Ir.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),fe(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Zl(s,i,c);let f;const p=!!u;try{const y=p?$l:Jo;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(IPe.includes(s)){const y=Oa(JSON.stringify(h)),b=Oa(f);g=await this.client.core.verify.register({id:b,decryptedId:y})}const w=Ir[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=ov(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=Ir[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=Es(wn({},d),{correlationId:h.id}),l?(y.internal=Es(wn({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),fe(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=e1(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?$l:Jo;u=await this.client.core.crypto.encode(s,l,Es(wn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=ov(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=Ir[p].res;g.tvf=Es(wn({},f),{correlationId:r}),o?(g.internal=Es(wn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),fe(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=t1(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?$l:Jo;u=await this.client.core.crypto.encode(s,l,Es(wn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=ov(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Ir[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),fe(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Rl(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Rl(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),fe(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),fe(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),fe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ba.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ba.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=ba.idle}),fe(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),fe(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),fe(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Ee("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),fe(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),fe(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(vc.proposal_listener_not_found)),this.isValidConnect(wn({},s.params));const u=a.expiryTimestamp||fr(Ir.wc_sessionPropose.req.ttl),d=wn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Oa(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(_a.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Ir.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),fe(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Aa(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(io(r)){await this.client.proposal.delete(i,fn("USER_DISCONNECTED"));const o=en("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),fe(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=Es(wn(wn(wn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:Pn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(en("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Aa(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(en("session_approve",s),{})):io(r)&&(await this.client.session.delete(n,fn("USER_DISCONNECTED")),this.events.emit(en("session_approve",s),{error:r.error}))}),fe(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Em.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:fn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(wn({topic:n},s));try{Em.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw Em.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),fe(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=en("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Aa(r)?this.events.emit(en("session_update",s),{}):io(r)&&this.events.emit(en("session_update",s),{error:r.error})}),fe(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,fr(yf)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),fe(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=en("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Aa(r)?this.events.emit(en("session_extend",s),{}):io(r)&&this.events.emit(en("session_extend",s),{error:r.error})}),fe(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),fe(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=en("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Aa(r)?this.events.emit(en("session_ping",s),{}):io(r)&&this.events.emit(en("session_ping",s),{error:r.error})},500)}),fe(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(kr.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:fn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),fe(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(wn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Oa(JSON.stringify(Zl("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===Pn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),fe(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=en("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Aa(r)?this.events.emit(en("session_request",s),{result:r.result}):io(r)&&this.events.emit(en("session_request",s),{error:r.error})}),fe(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Em.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(wn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Em.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Aa(r)?this.events.emit(en("session_request",s),{result:r.result}):io(r)&&this.events.emit(en("session_request",s),{error:r.error})}),fe(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Oa(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===Pn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Bc,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Ir.wc_sessionAuthenticate.autoReject,appLink:h})}}),fe(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),fe(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ba.idle,this.processSessionRequestQueue()},be.toMiliseconds(this.requestQueueDelay))}),fe(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=en("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(en("session_request",i.request.id),{error:r})})}),fe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ba.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ba.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),fe(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),fe(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Zl("wc_sessionPropose",Es(wn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),fe(this,"isValidConnect",async n=>{if(!Qs(n)){const{message:l}=Ee("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Kr(r)||await this.isValidPairingTopic(r),!ENe(c)){const{message:l}=Ee("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Kr(s)&&Eu(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Kr(i)&&Eu(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Kr(o)||this.validateSessionProps(o,"sessionProperties"),!Kr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),fe(this,"validateNamespaces",(n,r)=>{const s=vNe(n,"connect()",r);if(s)throw new Error(s.message)}),fe(this,"isValidApprove",async n=>{if(!Qs(n))throw new Error(Ee("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=GA(s,"approve()");if(l)throw new Error(l.message);const u=zM(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!cr(i,!0)){const{message:d}=Ee("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Kr(o)||this.validateSessionProps(o,"sessionProperties"),!Kr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),fe(this,"isValidReject",async n=>{if(!Qs(n)){const{message:i}=Ee("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!CNe(s)){const{message:i}=Ee("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),fe(this,"isValidSessionSettleRequest",n=>{if(!Qs(n)){const{message:l}=Ee("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!tH(r)){const{message:l}=Ee("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=pNe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=GA(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Rl(o)){const{message:l}=Ee("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),fe(this,"isValidUpdate",async n=>{if(!Qs(n)){const{message:c}=Ee("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=GA(s,"update()");if(o)throw new Error(o.message);const a=zM(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),fe(this,"isValidExtend",async n=>{if(!Qs(n)){const{message:s}=Ee("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),fe(this,"isValidRequest",async n=>{if(!Qs(n)){const{message:c}=Ee("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!WM(a,i)){const{message:c}=Ee("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!SNe(s)){const{message:c}=Ee("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!NNe(a,i,s.method)){const{message:c}=Ee("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!PNe(o,eI)){const{message:c}=Ee("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${eI.min} and ${eI.max}`);throw new Error(c)}}),fe(this,"isValidRespond",async n=>{var r;if(!Qs(n)){const{message:o}=Ee("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!ANe(i)){const{message:o}=Ee("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),fe(this,"isValidPing",async n=>{if(!Qs(n)){const{message:s}=Ee("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),fe(this,"isValidEmit",async n=>{if(!Qs(n)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!WM(o,i)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!INe(s)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!xNe(o,i,s.name)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),fe(this,"isValidDisconnect",async n=>{if(!Qs(n)){const{message:s}=Ee("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),fe(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!cr(s,!1))throw new Error("uri is required parameter");if(!cr(i,!1))throw new Error("domain is required parameter");if(!cr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>gp(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=gp(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),fe(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||Ey,validation:"UNKNOWN",origin:o.url||""}};try{if(a===Pn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),fe(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Ee("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),fe(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),fe(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),fe(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Ee("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),fe(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==Pn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),fe(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),fe(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=sM(n,"topic")||"",s=decodeURIComponent(sM(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Pn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),fe(this,"registerLinkModeListeners",async()=>{var n;if(nk()||Wu()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),fe(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(wL).includes(s.method)}),fe(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return Es(wn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),fe(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),fe(this,"extractTxHashesFromResult",(n,r)=>{try{const s=wL[n];if(typeof r=="string")return[r];const i=r[s.key];if(vu(i))return n==="solana_signAllTransactions"?i.map(o=>ZSe(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(kr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Yv)?this.client.auth.authKeys.get(Yv):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===Pn.link_mode?$l:Jo});ek(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Oa(r)})):n1(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(no.expired,async e=>{const{topic:n,id:r}=vz(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ee("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ee("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(yd.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(yd.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!cr(e,!1)){const{message:n}=Ee("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Rl(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Ee("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!cr(e,!1)){const{message:n}=Ee("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Ee("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Rl(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Ee("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Ee("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(cr(e,!1)){const{message:n}=Ee("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Ee("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!_Ne(e)){const{message:n}=Ee("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Ee("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Rl(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Ee("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class UPe extends qh{constructor(e,n){super(e,n,_Pe,uk),this.core=e,this.logger=n}}let BPe=class extends qh{constructor(e,n){super(e,n,CPe,uk),this.core=e,this.logger=n}};class jPe extends qh{constructor(e,n){super(e,n,APe,uk,r=>r.id),this.core=e,this.logger=n}}class FPe extends qh{constructor(e,n){super(e,n,TPe,f1,()=>Yv),this.core=e,this.logger=n}}class WPe extends qh{constructor(e,n){super(e,n,RPe,f1),this.core=e,this.logger=n}}class zPe extends qh{constructor(e,n){super(e,n,PPe,f1,r=>r.id),this.core=e,this.logger=n}}var HPe=Object.defineProperty,qPe=(t,e,n)=>e in t?HPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tI=(t,e,n)=>qPe(t,typeof e!="symbol"?e+"":e,n);class VPe{constructor(e,n){this.core=e,this.logger=n,tI(this,"authKeys"),tI(this,"pairingTopics"),tI(this,"requests"),this.authKeys=new FPe(this.core,this.logger),this.pairingTopics=new WPe(this.core,this.logger),this.requests=new zPe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var GPe=Object.defineProperty,KPe=(t,e,n)=>e in t?GPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kt=(t,e,n)=>KPe(t,typeof e!="symbol"?e+"":e,n);let YPe=class EH extends c1e{constructor(e){super(e),kt(this,"protocol",wH),kt(this,"version",bH),kt(this,"name",JA.name),kt(this,"metadata"),kt(this,"core"),kt(this,"logger"),kt(this,"events",new So.EventEmitter),kt(this,"engine"),kt(this,"session"),kt(this,"proposal"),kt(this,"pendingRequest"),kt(this,"auth"),kt(this,"signConfig"),kt(this,"on",(r,s)=>this.events.on(r,s)),kt(this,"once",(r,s)=>this.events.once(r,s)),kt(this,"off",(r,s)=>this.events.off(r,s)),kt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),kt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),kt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),kt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),kt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||JA.name,this.metadata=uSe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:L0(zh({level:(e==null?void 0:e.logger)||JA.logger}));this.core=(e==null?void 0:e.core)||new EPe(e),this.logger=es(n,this.name),this.session=new BPe(this.core,this.logger),this.proposal=new UPe(this.core,this.logger),this.pendingRequest=new jPe(this.core,this.logger),this.engine=new LPe(this),this.auth=new VPe(this.core,this.logger)}static async init(e){const n=new EH(e);return await n.initialize(),n}get context(){return yi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},be.toMiliseconds(be.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const vL="error",QPe="wss://relay.walletconnect.org",ZPe="wc",XPe="universal_provider",cv=`${ZPe}@2:${XPe}:`,_H="https://rpc.walletconnect.org/v1/",Mf="generic",JPe=`${_H}bundler`,Io={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function eOe(){}function dk(t){return t==null||typeof t!="object"&&typeof t!="function"}function hk(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function tOe(t){if(dk(t))return t;if(Array.isArray(t)||hk(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function EL(t){return typeof t=="object"&&t!==null}function CH(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function SH(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const nOe="[object RegExp]",AH="[object String]",IH="[object Number]",NH="[object Boolean]",xH="[object Arguments]",rOe="[object Symbol]",sOe="[object Date]",iOe="[object Map]",oOe="[object Set]",aOe="[object Array]",cOe="[object ArrayBuffer]",lOe="[object Object]",uOe="[object DataView]",dOe="[object Uint8Array]",hOe="[object Uint8ClampedArray]",fOe="[object Uint16Array]",pOe="[object Uint32Array]",gOe="[object Int8Array]",mOe="[object Int16Array]",yOe="[object Int32Array]",wOe="[object Float32Array]",bOe="[object Float64Array]";function vOe(t,e){return tp(t,void 0,t,new Map,e)}function tp(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(dk(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=tp(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,tp(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(tp(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(hk(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=tp(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),wd(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),wd(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),wd(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,wd(o,t,n,r,s),o}if(typeof t=="object"&&EOe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),wd(o,t,n,r,s),o}return t}function wd(t,e,n=t,r,s){const i=[...Object.keys(e),...CH(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=tp(e[a],a,n,r,s))}}function EOe(t){switch(SH(t)){case xH:case aOe:case cOe:case uOe:case NH:case sOe:case wOe:case bOe:case gOe:case mOe:case yOe:case iOe:case IH:case lOe:case nOe:case oOe:case AH:case rOe:case dOe:case hOe:case fOe:case pOe:return!0;default:return!1}}function _Oe(t,e){return vOe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case IH:case AH:case NH:{const o=new t.constructor(t==null?void 0:t.valueOf());return wd(o,t),o}case xH:{const o={};return wd(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function _L(t){return _Oe(t)}function CL(t){return t!==null&&typeof t=="object"&&SH(t)==="[object Arguments]"}function COe(t){return hk(t)}function SOe(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function AOe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=GT(s,o,r,new Map)}return s}function GT(t,e,n,r){if(dk(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return tOe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...CH(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(CL(a)&&(a={...a}),CL(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=_L(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||EL(c)&&EL(a)?t[o]=GT(c,a,n,r):c==null&&SOe(a)?t[o]=GT({},a,n,r):c==null&&COe(a)?t[o]=_L(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function IOe(t,...e){return AOe(t,...e,eOe)}var NOe=Object.defineProperty,xOe=Object.defineProperties,TOe=Object.getOwnPropertyDescriptors,SL=Object.getOwnPropertySymbols,ROe=Object.prototype.hasOwnProperty,POe=Object.prototype.propertyIsEnumerable,AL=(t,e,n)=>e in t?NOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lv=(t,e)=>{for(var n in e||(e={}))ROe.call(e,n)&&AL(t,n,e[n]);if(SL)for(var n of SL(e))POe.call(e,n)&&AL(t,n,e[n]);return t},OOe=(t,e)=>xOe(t,TOe(e));function Bi(t,e,n){var r;const s=gp(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${_H}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Vh(t){return t.includes(":")?t.split(":")[1]:t}function TH(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function kOe(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function uv(t={},e={}){const n=IL(t),r=IL(e);return IOe(n,r)}function IL(t){var e,n,r,s,i;const o={};if(!Eu(t))return o;for(const[a,c]of Object.entries(t)){const l=d1(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=ep(a);o[f]=OOe(lv(lv({},o[f]),c),{chains:Va(l,(e=o[f])==null?void 0:e.chains),methods:Va(u,(n=o[f])==null?void 0:n.methods),events:Va(d,(r=o[f])==null?void 0:r.events)}),(Eu(h)||Eu(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=lv(lv({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function NL(t){return t.includes(":")?t.split(":")[2]:t}function xL(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=d1(n)?[n]:r.chains?r.chains:TH(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function nI(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const RH={},Gt=t=>RH[t],rI=(t,e)=>{RH[t]=e};var DOe=Object.defineProperty,$Oe=(t,e,n)=>e in t?DOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wf=(t,e,n)=>$Oe(t,typeof e!="symbol"?e+"":e,n);class MOe{constructor(e){wf(this,"name","polkadot"),wf(this,"client"),wf(this,"httpProviders"),wf(this,"events"),wf(this,"namespace"),wf(this,"chainId"),this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Io.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new da(r,Gt("disableProviderPing")))}}var LOe=Object.defineProperty,UOe=Object.defineProperties,BOe=Object.getOwnPropertyDescriptors,TL=Object.getOwnPropertySymbols,jOe=Object.prototype.hasOwnProperty,FOe=Object.prototype.propertyIsEnumerable,KT=(t,e,n)=>e in t?LOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,RL=(t,e)=>{for(var n in e||(e={}))jOe.call(e,n)&&KT(t,n,e[n]);if(TL)for(var n of TL(e))FOe.call(e,n)&&KT(t,n,e[n]);return t},PL=(t,e)=>UOe(t,BOe(e)),bf=(t,e,n)=>KT(t,typeof e!="symbol"?e+"":e,n);class WOe{constructor(e){bf(this,"name","eip155"),bf(this,"client"),bf(this,"chainId"),bf(this,"namespace"),bf(this,"httpProviders"),bf(this,"events"),this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(Io.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Bi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new da(r,Gt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Vh(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:PL(RL({},u.sessionProperties||{}),{capabilities:PL(RL({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Zl("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${JPe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var zOe=Object.defineProperty,HOe=(t,e,n)=>e in t?zOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vf=(t,e,n)=>HOe(t,typeof e!="symbol"?e+"":e,n);class qOe{constructor(e){vf(this,"name","solana"),vf(this,"client"),vf(this,"httpProviders"),vf(this,"events"),vf(this,"namespace"),vf(this,"chainId"),this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Io.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new da(r,Gt("disableProviderPing")))}}var VOe=Object.defineProperty,GOe=(t,e,n)=>e in t?VOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ef=(t,e,n)=>GOe(t,typeof e!="symbol"?e+"":e,n);class KOe{constructor(e){Ef(this,"name","cosmos"),Ef(this,"client"),Ef(this,"httpProviders"),Ef(this,"events"),Ef(this,"namespace"),Ef(this,"chainId"),this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Io.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new da(r,Gt("disableProviderPing")))}}var YOe=Object.defineProperty,QOe=(t,e,n)=>e in t?YOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_f=(t,e,n)=>QOe(t,typeof e!="symbol"?e+"":e,n);class ZOe{constructor(e){_f(this,"name","algorand"),_f(this,"client"),_f(this,"httpProviders"),_f(this,"events"),_f(this,"namespace"),_f(this,"chainId"),this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Bi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Io.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Ao(new da(r,Gt("disableProviderPing")))}}var XOe=Object.defineProperty,JOe=(t,e,n)=>e in t?XOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cf=(t,e,n)=>JOe(t,typeof e!="symbol"?e+"":e,n);class eke{constructor(e){Cf(this,"name","cip34"),Cf(this,"client"),Cf(this,"httpProviders"),Cf(this,"events"),Cf(this,"namespace"),Cf(this,"chainId"),this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Io.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Vh(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new da(r,Gt("disableProviderPing")))}}var tke=Object.defineProperty,nke=(t,e,n)=>e in t?tke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sf=(t,e,n)=>nke(t,typeof e!="symbol"?e+"":e,n);class rke{constructor(e){Sf(this,"name","elrond"),Sf(this,"client"),Sf(this,"httpProviders"),Sf(this,"events"),Sf(this,"namespace"),Sf(this,"chainId"),this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Io.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new da(r,Gt("disableProviderPing")))}}var ske=Object.defineProperty,ike=(t,e,n)=>e in t?ske(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Af=(t,e,n)=>ike(t,typeof e!="symbol"?e+"":e,n);class oke{constructor(e){Af(this,"name","multiversx"),Af(this,"client"),Af(this,"httpProviders"),Af(this,"events"),Af(this,"namespace"),Af(this,"chainId"),this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Io.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Vh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new da(r,Gt("disableProviderPing")))}}var ake=Object.defineProperty,cke=(t,e,n)=>e in t?ake(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,If=(t,e,n)=>cke(t,typeof e!="symbol"?e+"":e,n);class lke{constructor(e){If(this,"name","near"),If(this,"client"),If(this,"httpProviders"),If(this,"events"),If(this,"namespace"),If(this,"chainId"),this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Bi(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Io.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace);return typeof r>"u"?void 0:new Ao(new da(r,Gt("disableProviderPing")))}}var uke=Object.defineProperty,dke=(t,e,n)=>e in t?uke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nf=(t,e,n)=>dke(t,typeof e!="symbol"?e+"":e,n);class hke{constructor(e){Nf(this,"name","tezos"),Nf(this,"client"),Nf(this,"httpProviders"),Nf(this,"events"),Nf(this,"namespace"),Nf(this,"chainId"),this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Bi(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Io.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace);return typeof r>"u"?void 0:new Ao(new da(r))}}var fke=Object.defineProperty,pke=(t,e,n)=>e in t?fke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xf=(t,e,n)=>pke(t,typeof e!="symbol"?e+"":e,n);class gke{constructor(e){xf(this,"name",Mf),xf(this,"client"),xf(this,"httpProviders"),xf(this,"events"),xf(this,"namespace"),xf(this,"chainId"),this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(Io.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=gp(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Bi(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Ao(new da(r,Gt("disableProviderPing")))}}var mke=Object.defineProperty,yke=Object.defineProperties,wke=Object.getOwnPropertyDescriptors,OL=Object.getOwnPropertySymbols,bke=Object.prototype.hasOwnProperty,vke=Object.prototype.propertyIsEnumerable,YT=(t,e,n)=>e in t?mke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dv=(t,e)=>{for(var n in e||(e={}))bke.call(e,n)&&YT(t,n,e[n]);if(OL)for(var n of OL(e))vke.call(e,n)&&YT(t,n,e[n]);return t},sI=(t,e)=>yke(t,wke(e)),Zi=(t,e,n)=>YT(t,typeof e!="symbol"?e+"":e,n);let Eke=class PH{constructor(e){Zi(this,"client"),Zi(this,"namespaces"),Zi(this,"optionalNamespaces"),Zi(this,"sessionProperties"),Zi(this,"scopedProperties"),Zi(this,"events",new WO),Zi(this,"rpcProviders",{}),Zi(this,"session"),Zi(this,"providerOpts"),Zi(this,"logger"),Zi(this,"uri"),Zi(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:L0(zh({level:(e==null?void 0:e.logger)||vL})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new PH(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:dv({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,e1(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:fn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=xL(this.session.namespaces);this.namespaces=uv(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=xL(s.namespaces);return this.namespaces=uv(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Mf?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(vu(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await YPe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||vL,relayUrl:this.providerOpts.relayUrl||QPe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>ep(n)))];rI("client",this.client),rI("events",this.events),rI("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=kOe(n,this.session),s=TH(r),i=uv(this.namespaces,this.optionalNamespaces),o=sI(dv({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new WOe({namespace:o});break;case"algorand":this.rpcProviders[n]=new ZOe({namespace:o});break;case"solana":this.rpcProviders[n]=new qOe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new KOe({namespace:o});break;case"polkadot":this.rpcProviders[n]=new MOe({namespace:o});break;case"cip34":this.rpcProviders[n]=new eke({namespace:o});break;case"elrond":this.rpcProviders[n]=new rke({namespace:o});break;case"multiversx":this.rpcProviders[n]=new oke({namespace:o});break;case"near":this.rpcProviders[n]=new lke({namespace:o});break;case"tezos":this.rpcProviders[n]=new hke({namespace:o});break;default:this.rpcProviders[Mf]?this.rpcProviders[Mf].updateNamespace(o):this.rpcProviders[Mf]=new gke({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&vu(o)&&this.events.emit("accountsChanged",o.map(NL))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=ep(o),l=nI(o)!==nI(a)?`${c}:${nI(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=sI(dv({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",sI(dv({},fn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(Io.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Mf]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=uv(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>ep(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=ep(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(NL);if(!vu(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${cv}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${cv}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${cv}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(cv)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var kL={};const _ke={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof kL<"u"?kL.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},QT={filterOutDuplicatesByRDNS(t){const e=pe.state.enableEIP6963?Oe.state.connectors:[],n=je.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Qe.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Oe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=je.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Oe.state,{featuredWalletIds:n}=pe.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=pe.state.features)==null?void 0:c.connectMethodsOrder),r=e||Oe.state.connectors;if(n)return n;const{injected:s,announced:i}=Qv.getConnectorsByType(r,Xe.state.recommended,Xe.state.featured),o=s.filter(Qv.showConnector),a=i.filter(Qv.showConnector);return o.length||a.length?["wallet","email","social"]:_ke.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Xe.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Xe.state.excludedWallets.some(r=>r1.isLowerCaseMatch(r.name,t.name));return e||n}},Qv={getConnectorsByType(t,e,n){const{customWallets:r}=pe.state,s=je.getRecentWallets(),i=QT.filterOutDuplicateWallets(e),o=QT.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Xe.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Xe.state.excludedWallets.some(i=>r1.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Qe.isMobile()||Qe.isMobile()&&!e&&!ot.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(L.state.chains.values()).some(n=>Oe.getConnectorId(n.namespace)===ke.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=pe.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=Qv.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:pe.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!g.some(({type:E})=>E===y));return Array.from(new Set([...g,...w].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Zv=globalThis,fk=Zv.ShadowRoot&&(Zv.ShadyCSS===void 0||Zv.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,pk=Symbol(),DL=new WeakMap;let OH=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==pk)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(fk&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=DL.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&DL.set(n,e))}return e}toString(){return this.cssText}};const Ji=t=>new OH(typeof t=="string"?t:t+"",void 0,pk),jc=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new OH(n,t,pk)},Cke=(t,e)=>{if(fk)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=Zv.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},$L=fk?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Ji(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Ske,defineProperty:Ake,getOwnPropertyDescriptor:Ike,getOwnPropertyNames:Nke,getOwnPropertySymbols:xke,getPrototypeOf:Tke}=Object,_u=globalThis,ML=_u.trustedTypes,Rke=ML?ML.emptyScript:"",iI=_u.reactiveElementPolyfillSupport,Cy=(t,e)=>t,ZT={toAttribute(t,e){switch(e){case Boolean:t=t?Rke:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},kH=(t,e)=>!Ske(t,e),LL={attribute:!0,type:String,converter:ZT,reflect:!1,useDefault:!1,hasChanged:kH};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),_u.litPropertyMetadata??(_u.litPropertyMetadata=new WeakMap);let Lf=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=LL){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&Ake(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=Ike(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??LL}static _$Ei(){if(this.hasOwnProperty(Cy("elementProperties")))return;const e=Tke(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Cy("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Cy("properties"))){const n=this.properties,r=[...Nke(n),...xke(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift($L(s))}else e!==void 0&&n.push($L(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Cke(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:ZT).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:ZT;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??kH)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};Lf.elementStyles=[],Lf.shadowRootOptions={mode:"open"},Lf[Cy("elementProperties")]=new Map,Lf[Cy("finalized")]=new Map,iI==null||iI({ReactiveElement:Lf}),(_u.reactiveElementVersions??(_u.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Sy=globalThis,I_=Sy.trustedTypes,UL=I_?I_.createPolicy("lit-html",{createHTML:t=>t}):void 0,DH="$lit$",Ml=`lit$${Math.random().toFixed(9).slice(2)}$`,$H="?"+Ml,Pke=`<${$H}>`,Ah=document,Yw=()=>Ah.createComment(""),Qw=t=>t===null||typeof t!="object"&&typeof t!="function",gk=Array.isArray,Oke=t=>gk(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",oI=`[ 	
\f\r]`,Im=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,BL=/-->/g,jL=/>/g,nd=RegExp(`>|${oI}(?:([^\\s"'>=/]+)(${oI}*=${oI}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),FL=/'/g,WL=/"/g,MH=/^(?:script|style|textarea|title)$/i,LH=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),RMe=LH(1),PMe=LH(2),lg=Symbol.for("lit-noChange"),Dr=Symbol.for("lit-nothing"),zL=new WeakMap,Od=Ah.createTreeWalker(Ah,129);function UH(t,e){if(!gk(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return UL!==void 0?UL.createHTML(e):e}const kke=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Im;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Im?u[1]==="!--"?o=BL:u[1]!==void 0?o=jL:u[2]!==void 0?(MH.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=nd):u[3]!==void 0&&(o=nd):o===nd?u[0]===">"?(o=s??Im,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?nd:u[3]==='"'?WL:FL):o===WL||o===FL?o=nd:o===BL||o===jL?o=Im:(o=nd,s=void 0);const f=o===nd&&t[a+1].startsWith("/>")?" ":"";i+=o===Im?c+Pke:d>=0?(r.push(l),c.slice(0,d)+DH+c.slice(d)+Ml+f):c+Ml+(d===-2?a:f)}return[UH(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class Zw{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=kke(e,n);if(this.el=Zw.createElement(l,r),Od.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Od.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(DH)){const h=u[o++],f=s.getAttribute(d).split(Ml),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?$ke:p[1]==="?"?Mke:p[1]==="@"?Lke:p1}),s.removeAttribute(d)}else d.startsWith(Ml)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(MH.test(s.tagName)){const d=s.textContent.split(Ml),h=d.length-1;if(h>0){s.textContent=I_?I_.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Yw()),Od.nextNode(),c.push({type:2,index:++i});s.append(d[h],Yw())}}}else if(s.nodeType===8)if(s.data===$H)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Ml,d+1))!==-1;)c.push({type:7,index:i}),d+=Ml.length-1}i++}}static createElement(e,n){const r=Ah.createElement("template");return r.innerHTML=e,r}}function ug(t,e,n=t,r){var o,a;if(e===lg)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Qw(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=ug(t,s._$AS(t,e.values),s,r)),e}class Dke{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Ah).importNode(n,!0);Od.currentNode=s;let i=Od.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new Y0(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new Uke(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Od.nextNode(),o++)}return Od.currentNode=Ah,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Y0{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Dr,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=ug(this,e,n),Qw(e)?e===Dr||e==null||e===""?(this._$AH!==Dr&&this._$AR(),this._$AH=Dr):e!==this._$AH&&e!==lg&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Oke(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Dr&&Qw(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ah.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=Zw.createElement(UH(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new Dke(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=zL.get(e.strings);return n===void 0&&zL.set(e.strings,n=new Zw(e)),n}k(e){gk(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new Y0(this.O(Yw()),this.O(Yw()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class p1{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Dr,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Dr}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=ug(this,e,n,0),o=!Qw(e)||e!==this._$AH&&e!==lg,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=ug(this,a[r+c],n,c),l===lg&&(l=this._$AH[c]),o||(o=!Qw(l)||l!==this._$AH[c]),l===Dr?e=Dr:e!==Dr&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Dr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class $ke extends p1{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Dr?void 0:e}}class Mke extends p1{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Dr)}}class Lke extends p1{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=ug(this,e,n,0)??Dr)===lg)return;const r=this._$AH,s=e===Dr&&r!==Dr||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Dr&&(r===Dr||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class Uke{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){ug(this,e)}}const aI=Sy.litHtmlPolyfillSupport;aI==null||aI(Zw,Y0),(Sy.litHtmlVersions??(Sy.litHtmlVersions=[])).push("3.3.1");const Bke=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new Y0(e.insertBefore(Yw(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Kd=globalThis;let Xv=class extends Lf{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Bke(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return lg}};var PU;Xv._$litElement$=!0,Xv.finalized=!0,(PU=Kd.litElementHydrateSupport)==null||PU.call(Kd,{LitElement:Xv});const cI=Kd.litElementPolyfillSupport;cI==null||cI({LitElement:Xv});(Kd.litElementVersions??(Kd.litElementVersions=[])).push("4.2.1");let Ay,Cu,Su;function kMe(t,e){Ay=document.createElement("style"),Cu=document.createElement("style"),Su=document.createElement("style"),Ay.textContent=mp(t).core.cssText,Cu.textContent=mp(t).dark.cssText,Su.textContent=mp(t).light.cssText,document.head.appendChild(Ay),document.head.appendChild(Cu),document.head.appendChild(Su),BH(e)}function BH(t){Cu&&Su&&(t==="light"?(Cu.removeAttribute("media"),Su.media="enabled"):(Su.removeAttribute("media"),Cu.media="enabled"))}function jke(t){Ay&&Cu&&Su&&(Ay.textContent=mp(t).core.cssText,Cu.textContent=mp(t).dark.cssText,Su.textContent=mp(t).light.cssText)}function mp(t){return{core:jc`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Ji(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Ji((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Ji((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Ji((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Ji((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:jc`
      :root {
        --w3m-color-mix: ${Ji((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Ji(kc(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Ji(kc(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:jc`
      :root {
        --w3m-color-mix: ${Ji((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Ji(kc(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Ji(kc(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const DMe=jc`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,$Me=jc`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,MMe=jc`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,zm={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},jH=ise({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function Q0(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const HL=Q0({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),qL=Q0({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});Q0({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Q0({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Q0({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const Fke={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Jv={getMethodsByChainNamespace(t){return Fke[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case HL.caipNetworkId:u.chains.push(HL.deprecatedCaipNetworkId);break;case qL.caipNetworkId:u.chains.push(qL.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await my.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let FH=class{constructor({provider:e,namespace:n}){this.id=ke.CONNECTOR_ID.WALLET_CONNECT,this.name=u_.ConnectorNamesMap[ke.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=u_.ConnectorImageIds[ke.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=L.getCaipNetworks.bind(L),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=pe.state.universalProviderConfigOverride,s=Jv.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return by.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Wke})}};const Wke=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let zke=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>L.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ke.CONNECTOR_ID.AUTH,type:"AUTH",name:ke.CONNECTOR_NAMES.AUTH,provider:e,imageId:u_.ConnectorImageIds[ke.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Be.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Be.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof FH);if(!e)throw new Error("WalletConnectConnector not found");return e}};class Hke extends zke{setUniversalProvider(e){this.addConnector(new FH({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Qe.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&pn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Be.state.balanceLoading&&e.chainId===((c=L.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Be.state.balance||"0.00",symbol:Be.state.balanceSymbol||""};const s=(await Be.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=L.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ke.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:LW.encode(new TextEncoder().encode(r)),pubkey:s}},(a=L.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=L.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ke.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:yo(n.id)}]}))}catch(u){if(u.code===zm.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===zm.ERROR_INVALID_CHAIN_ID||u.code===zm.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===zm.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:yo(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const qke=["email","socials","swaps","onramp","activity","reownBranding"],hv={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?pn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?pn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?pn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?pn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?pn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?pn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?pn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?pn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?pn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},Vke={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=hv[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=hv[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return hv[t].processApi(e)},processFallbackFeature(t,e){return hv[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Xe.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?pn.DEFAULT_REMOTE_FEATURES:pn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of qke){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),pn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Ua.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class Gke{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=L.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=L.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=L.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return L.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>L.getCaipNetworks(n),this.getActiveChainNamespace=()=>L.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{L.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>L.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>L.state.activeChain===n||!n?L.state.activeCaipAddress:L.getAccountProp("caipAddress",n),this.setClientId=n=>{it.setClientId(n)},this.getProvider=n=>hn.getProvider(n),this.getProviderType=n=>hn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Be.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Be.setCaipAddress(n,r),n&&pe.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Be.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Be.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Be.setProfileImage(n,r)},this.setUser=(n,r)=>{Be.setUser(n,r)},this.resetAccount=n=>{Be.resetAccount(n)},this.setCaipNetwork=n=>{L.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{L.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Be.setAllAccounts(n,r),pe.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Be.setStatus(n,r),Oe.isConnected()?je.setConnectionStatus("connected"):je.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>L.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Oe.state.allConnectors,...n];Oe.setConnectors(r)},this.setConnections=(n,r)=>{ot.setConnections(n,r)},this.fetchIdentity=n=>it.fetchIdentity(n),this.getReownName=n=>my.getNamesForAddress(n),this.getConnectors=()=>Oe.getConnectors(),this.getConnectorImage=n=>W7.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=hn.getProviderId(r),i=n?{...n,type:s}:void 0;Be.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!L.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Be.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Be.removeAddressLabel(n,r)},this.getAddress=n=>L.state.activeChain===n||!n?Be.state.address:L.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>L.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{L.resetNetwork(n)},this.addConnector=n=>{Oe.addConnector(n)},this.resetWcConnection=()=>{ot.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Be.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Be.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{L.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Be.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{pe.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await Vke.fetchRemoteFeatures(e),pe.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&tT.setOnrampProviders(this.remoteFeatures.onramp),((n=pe.state.remoteFeatures)!=null&&n.email||Array.isArray((r=pe.state.remoteFeatures)==null?void 0:r.socials)&&((s=pe.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await Xe.fetchAllowedOrigins();if(e&&Qe.isClient()){const n=window.location.origin;Jv.isOriginAllowed(n,e,zm.DEFAULT_ALLOWED_ANCESTORS)||Ua.open(Pa.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Ua.open(Pa.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,jn.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&ei.setThemeMode(e.themeMode),e.themeVariables&&ei.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");L.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&L.setActiveCaipNetwork(n)}initializeConnectionController(e){ot.setWcBasic(e.basic??!1)}initializeConnectorController(){Oe.initialize(this.chainNamespaces)}initializeProjectSettings(e){pe.setProjectId(e.projectId),pe.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;pe.setDebug(e.debug!==!1),pe.setEnableWalletConnect(e.enableWalletConnect!==!1),pe.setEnableWalletGuide(e.enableWalletGuide!==!1),pe.setEnableWallets(e.enableWallets!==!1),pe.setEIP6963Enabled(e.enableEIP6963!==!1),pe.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),pe.setEnableAuthLogger(e.enableAuthLogger!==!1),pe.setCustomRpcUrls(e.customRpcUrls),pe.setEnableEmbedded(e.enableEmbedded),pe.setAllWallets(e.allWallets),pe.setIncludeWalletIds(e.includeWalletIds),pe.setExcludeWalletIds(e.excludeWalletIds),pe.setFeaturedWalletIds(e.featuredWalletIds),pe.setTokens(e.tokens),pe.setTermsConditionsUrl(e.termsConditionsUrl),pe.setPrivacyPolicyUrl(e.privacyPolicyUrl),pe.setCustomWallets(e.customWallets),pe.setFeatures(e.features),pe.setAllowUnsupportedChain(e.allowUnsupportedChain),pe.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),pe.setPreferUniversalLinks(e.experimental_preferUniversalLinks),pe.setDefaultAccountTypes(e.defaultAccountTypes);const n=je.getPreferredAccountTypes()||{},r={...pe.state.defaultAccountTypes,...n};Be.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),pe.setMetadata(e.metadata),pe.setDisableAppend(e.disableAppend),pe.setEnableEmbedded(e.enableEmbedded),pe.setSIWX(e.siwx),!e.projectId){Ua.open(Pa.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ke.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");pe.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Qe.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Df.getUnsupportedNetwork(`${n}:${e}`);L.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Df.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Df.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Df.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Df.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=hn.getProvider(e),s=hn.getProviderId(e),{caipAddress:i}=L.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),je.removeConnectedNamespace(e),hn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Oe.removeConnectorId(e),L.resetAccount(e),L.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=L.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),je.setConnectedNamespaces([...L.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Oe.setConnectorId(ti.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,y,b,E,_;const c=L.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(I=>I.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:y[0])||((_=(E=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:E.http)==null?void 0:_[0])});if(!h)return;je.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Be.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=L.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),je.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=Kve(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));Qt.resetSend(),ot.resetWcConnection(),await by.clearSessions(),Oe.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));je.deleteConnectedSocialProvider(),jn.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(L.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Be.state.address,provider:hn.getProvider(L.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(pn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(L.state.activeChain),s=hn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ke.CHAIN.EVM){const n=this.getAdapter(L.state.activeChain),r=hn.getProvider(L.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Be.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:L.state.activeChain}),Be.state.profileImage||!1},getEnsAddress:async e=>await Jv.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(L.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=hn.getProvider(L.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(L.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(L.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(L.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(L.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Be.state.address||this.updateNativeBalance(Be.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ot.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(hn.getProviderId(L.state.activeChain)===ti.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=hn.getProvider(n),i=hn.getProviderId(n);if(e.chainNamespace===L.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===ti.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=dl.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new Hke({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=je.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(je.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=L.state.activeChain===e,c=L.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Be.state.address,i=L.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=L.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=L.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=L.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===ke.CHAIN.EVM&&Qe.isSafeApp()&&Oe.setConnectorId(ke.CONNECTOR_ID.SAFE,e);const n=Oe.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ke.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ke.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Oe.getConnectorId(e),s=this.getCaipNetwork(e),o=Oe.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Qe.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=L.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=dl.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=dl.validateCaipAddress(o),{chainId:f,address:p}=dl.parseCaipAddress(h);if(hn.setProviderId(n,ti.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&L.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==ke.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:L.state.activeCaipNetwork});hn.setProvider(n,g)}else hn.setProvider(n,this.universalProvider);Oe.setConnectorId(ke.CONNECTOR_ID.WALLET_CONNECT,n),je.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await L.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=dl.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Qe.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){hn.setProviderId(s,e),hn.setProvider(s,n),Oe.setConnectorId(r,s)}async syncAllAccounts(e){const n=Oe.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===L.state.activeChain,r=L.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=je.getActiveNetworkProps(),c=i||a,l=((d=L.state.activeCaipNetwork)==null?void 0:d.name)===ke.UNSUPPORTED_NETWORK_NAME,u=L.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(E=>{var _;return((_=dl.parseCaipNetworkId(E))==null?void 0:_.chainId)===c.toString()}),b=w.find(E=>{var _;return((_=dl.parseCaipNetworkId(E))==null?void 0:_.chainNamespace)===o});f=this.getCaipNetworks().find(E=>E.caipNetworkId===y),p=this.getCaipNetworks().find(E=>E.caipNetworkId===b||"deprecatedCaipNetworkId"in E&&E.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===L.state.activeChain?pe.state.enableNetworkSwitch&&!pe.state.allowUnsupportedChain&&((h=L.state.activeCaipNetwork)==null?void 0:h.name)===ke.UNSUPPORTED_NETWORK_NAME?L.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),r1.isLowerCaseMatch(s,Be.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Oe.getConnectorId(e),r=hn.getProviderId(e);if(r===ti.CONNECTOR_TYPE_ANNOUNCED||r===ti.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===ti.CONNECTOR_TYPE_WALLET_CONNECT){const i=hn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===ke.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ke.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!U7.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=L.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=Zve.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};pe.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await Eke.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{ot.setUri(e)}),this.universalProvider.on("connect",ot.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),ot.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(Jv.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Qe.isCaipAddress(r[0])&&this.syncAccount(dl.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Qe.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){jn.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Pa.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Pa.ALERT_ERRORS[o];a&&(Ua.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&ot.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return $r.open({...e,data:{swap:e.arguments}})}return $r.open(e)}async close(){await this.injectModalUi(),$r.close()}setLoading(e,n){$r.setLoading(e,n)}async disconnect(e){await ot.disconnect(e)}getSIWX(){return pe.state.siwx}getError(){return""}getChainId(){var e;return(e=L.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Ua.open(Pa.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await L.switchActiveNetwork(n)}getWalletProvider(){return L.state.activeChain?hn.state.providers[L.state.activeChain]:null}getWalletProviderType(){return hn.getProviderId(L.state.activeChain)}subscribeProviders(e){return hn.subscribeProviders(e)}getThemeMode(){return ei.state.themeMode}getThemeVariables(){return ei.state.themeVariables}setThemeMode(e){ei.setThemeMode(e),BH(ei.state.themeMode)}setTermsConditionsUrl(e){pe.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){pe.setPrivacyPolicyUrl(e)}setThemeVariables(e){ei.setThemeVariables(e),jke(ei.state.themeVariables)}subscribeTheme(e){return ei.subscribe(e)}getWalletInfo(){return Be.state.connectedWalletInfo}getAccount(e){var o;const n=Oe.getAuthConnector(e),r=L.getAccountData(e),s=L.state.activeChain,i=je.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Qe.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===ke.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:je.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?L.subscribeChainProp("accountState",r,n):L.subscribe(r),Oe.subscribe(r)}subscribeNetwork(e){return L.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Be.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Be.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){L.subscribeKey("activeCaipNetwork",e)}getState(){return Ha.state}subscribeState(e){return Ha.subscribe(e)}showErrorMessage(e){Yo.showError(e)}showSuccessMessage(e){Yo.showSuccess(e)}getEvent(){return{...jn.state}}subscribeEvents(e){return jn.subscribe(e)}replace(e){St.replace(e)}redirect(e){St.push(e)}popTransactionStack(e){St.popTransactionStack(e)}isOpen(){return $r.state.open}isTransactionStackEmpty(){return St.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){pe.setFeatures(e)}updateRemoteFeatures(e){pe.setRemoteFeatures(e)}updateOptions(e){const r={...pe.state||{},...e};pe.setOptions(r)}setConnectMethodsOrder(e){pe.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){pe.setWalletFeaturesOrder(e)}setCollapseWallets(e){pe.setCollapseWallets(e)}setSocialsOrder(e){pe.setSocialsOrder(e)}getConnectMethodsOrder(){return QT.getConnectOrderMethod(pe.state.features,Oe.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||L.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&L.removeNetwork(e,n)}}let VL=!1;class Kke extends Gke{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Ri.checkIfRequestExists(n)?Ri.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Zr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Zr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Ri.checkIfRequestIsSafe(r),i=Be.state.address,o=L.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=L.state.activeChain;Oe.getConnectorId(n)===ke.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=L.state.activeChain,s=r===ke.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=pe.state.defaultAccountTypes[r],o=(l=Be.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;r1.isLowerCaseMatch(n.address,Be.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Be.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Qe.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Qe.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Be.state.user||{},username:n},L.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,L.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,L.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=ke.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Be.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=ei.getSnapshot(),l=pe.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:kc(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:ke.CONNECTOR_ID.AUTH,info:{name:ke.CONNECTOR_ID.AUTH},type:ti.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=L.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):Oe.getConnectorId(n)===ke.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),je.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Qe.isTelegram())return;const r=je.getTelegramSocialProvider();if(!r||!Qe.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Be.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Oe.getAuthConnector();r&&o&&(this.setLoading(!0,e),await ot.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),je.setConnectedSocialProvider(r),je.removeTelegramSocialProvider(),jn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!ke.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=bCe.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:Pa.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Ua.open(Pa.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Ua.open(Pa.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Ua.open(Pa.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Ha.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Xe.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=L.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=hn.getProvider(r),u=hn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=hn.getProviderId(n)===ti.CONNECTOR_TYPE_AUTH,u=hn.getProviderId(r),d=u===ti.CONNECTOR_TYPE_AUTH,h=ke.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(L.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ke.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:ti.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===ti.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Ha.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==ke.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=hn.getProviderId(e);if(n===ti.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=je.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Qe.isClient()&&!VL)try{const e={...pn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Qe.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!pe.state.disableAppend&&!pe.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}VL=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Qe.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(hs(()=>import("./embedded-wallet-Bon5jVSD.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(hs(()=>import("./email-VlMd8wxj.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(hs(()=>import("./socials-IiIqdVlg.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(hs(()=>import("./swaps-5ni-Oeeh.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(hs(()=>import("./send-Gy_FKuC0.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(hs(()=>import("./receive-DWeezdwN.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(hs(()=>import("./onramp-B0tkhEFQ.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(hs(()=>import("./transactions-C21YOPLF.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(hs(()=>import("./index-DAqXqQBw.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,hs(()=>import("./index-C0nF1-9h.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),hs(()=>import("./w3m-modal-C-DUacEb.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Al;function Yke(t){t&&(Al=t)}function g1(){if(!Al)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Al==null?void 0:Al.open(n))}async function e(){await(Al==null?void 0:Al.close())}return{open:t,close:e}}const Qke="1.7.8";let fv;function Zke(t){return fv||(fv=new Kke({...t,sdkVersion:Qe.generateSdkVersion(t.adapters??[],"react",Qke)}),Yke(fv)),fv}const Xke=ua({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),GL=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Jke=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=Xke({isOpen:t}),{open:i}=g1(),o=O.useRef(null),[a,c]=O.useState([]),[l,u]=O.useState(!0),[d,h]=O.useState(null),[f,p]=O.useState("all"),[g,w]=O.useState(1),[y,b]=O.useState(1),[E,_]=O.useState(0),[C,I]=O.useState(null),[A,x]=O.useState(GL[0]),[S,D]=O.useState(!1),[P,U]=O.useState(null),q=O.useCallback(async()=>{var k,B;try{if((k=window.solana)!=null&&k.isPhantom){const H=await window.solana.connect();U(H.publicKey.toString());return}if((B=window.solflare)!=null&&B.isSolflare){const H=await window.solflare.connect();U(H.publicKey.toString());return}i()}catch(H){console.error("Failed to connect Solana wallet:",H),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}D(!1)},[i]);O.useEffect(()=>{var k,B;(k=window.solana)!=null&&k.publicKey?U(window.solana.publicKey.toString()):(B=window.solflare)!=null&&B.publicKey&&U(window.solflare.publicKey.toString())},[]),O.useEffect(()=>{t&&(async()=>{var B;u(!0),h(null);try{let H,X=f==="owned"&&r||void 0;if(A.api==="opensea-solana"){if(f==="owned"&&!P){D(!0),u(!1);return}X=P||void 0,H=await L7(A.slug,50),console.log("Fetched Solana NFTs from collection:",H.data.length),f==="owned"&&P&&(console.log("Filtering for owner:",P),console.log("Sample NFT owner data:",(B=H.data[0])==null?void 0:B.owners),console.log("All NFTs owner data:",H.data.map(ne=>({name:ne.name,owners:ne.owners,owner_of:ne.owner_of}))),H.data.some(ne=>ne.owners&&ne.owners.length>0)?(H.data=H.data.filter(ne=>{const ae=ne.owners.some(me=>me.owner_of&&me.owner_of.toLowerCase()===P.toLowerCase());return ae&&console.log("Found owned NFT:",ne.name),ae}),console.log("NFTs after filtering:",H.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else A.api==="opensea"?H=await jO(A.slug,50,X):H=await BO(A.slug,g,50,X);c(H.data),b(H.totalPages),_(H.totalCount)}catch(H){H instanceof Error?h(H.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,A,P]),O.useEffect(()=>{S&&q()},[S,q]);const j=k=>new Date(k).toLocaleDateString(),T=k=>A.api==="opensea-solana"&&(!k.owners||k.owners.length===0)?"Owner data unavailable":k.owners.length>0?`${k.owners[0].owner_of.substring(0,6)}...`:"N/A",N=()=>{n&&n()},$=async k=>{if(A.api==="opensea"&&A.chain)try{const B=await M7(A.chain,k.address,k.token_id.toString()),H={...k,attributes:JSON.stringify(B.traits||[])};I(H)}catch(B){console.error("Failed to fetch full NFT details",B),I(k)}else I(k)},R=k=>{x(k),w(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(k0,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsx("div",{className:s.collectionSelector,children:GL.map(k=>m.jsx("button",{className:`${s.collectionButton} ${A.slug===k.slug?"active":""}`,onClick:()=>R(k),children:k.name},k.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!P,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||P?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||P?1:.6},children:"My NFTs"}),A.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{q()},style:{background:P?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:P?"white":"black",marginLeft:"auto"},children:P?`Solana: ${P.slice(0,4)}...${P.slice(-4)}`:"Connect Solana"})]}),A.api==="opensea-solana"&&!P&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${E} total)`,f==="recent"&&`Recently minted NFTs by ${A.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${A.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(k=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{$(k)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${k.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",k.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",T(k)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",j(k.created_at)]})]},k.id))}),f!=="recent"&&y>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>w(k=>Math.max(1,k-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),m.jsx("button",{onClick:()=>w(k=>Math.min(y,k+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&m.jsx(gpe,{nft:C,onClose:()=>I(null)})]}):null};var pv,e2e=new Uint8Array(16);function t2e(){if(!pv&&(pv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!pv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pv(e2e)}const n2e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function r2e(t){return typeof t=="string"&&n2e.test(t)}var Hr=[];for(var lI=0;lI<256;++lI)Hr.push((lI+256).toString(16).substr(1));function s2e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Hr[t[e+0]]+Hr[t[e+1]]+Hr[t[e+2]]+Hr[t[e+3]]+"-"+Hr[t[e+4]]+Hr[t[e+5]]+"-"+Hr[t[e+6]]+Hr[t[e+7]]+"-"+Hr[t[e+8]]+Hr[t[e+9]]+"-"+Hr[t[e+10]]+Hr[t[e+11]]+Hr[t[e+12]]+Hr[t[e+13]]+Hr[t[e+14]]+Hr[t[e+15]]).toLowerCase();if(!r2e(n))throw TypeError("Stringified UUID is invalid");return n}function i2e(t,e,n){t=t||{};var r=t.random||(t.rng||t2e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,s2e(r)}const o2e=ua({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),a2e=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],c2e=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],vi=500;function WH(){const t=o2e(),e=O.useRef(null),[n,r]=O.useState(null),[s,i]=O.useState(""),[o,a]=O.useState(""),[c,l]=O.useState(36),[u,d]=O.useState(36),[h,f]=O.useState(!1),[p,g]=O.useState(!1),[w,y]=O.useState(!1),[b,E]=O.useState(!1),[_,C]=O.useState(!1),[I,A]=O.useState([]),[x,S]=O.useState(null),D=O.useRef(null),[P,U]=O.useState(null),q=async Z=>{const re=Z.getContext("2d");if(!re)return;re.clearRect(0,0,Z.width,Z.height),n?await new Promise(ee=>{const he=new window.Image;he.crossOrigin="anonymous",he.onload=()=>{const Ne=Math.min(Z.width/he.width,Z.height/he.height),le=(Z.width-he.width*Ne)/2,ye=(Z.height-he.height*Ne)/2;re.drawImage(he,le,ye,he.width*Ne,he.height*Ne),ee()},he.onerror=()=>ee(),he.src=n}):(re.fillStyle="#333",re.fillRect(0,0,Z.width,Z.height)),(ee=>{ee.textAlign="center",ee.strokeStyle="black",ee.lineWidth=3,ee.fillStyle="white";const he=(Ne,le)=>{const ye=Ne.toUpperCase().split(" "),ze=[];let Ze=ye[0];for(let Kt=1;Kt<ye.length;Kt++){const nn=ye[Kt];ee.measureText(Ze+" "+nn).width<le?Ze+=" "+nn:(ze.push(Ze),Ze=nn)}return ze.push(Ze),ze};s&&(ee.font=`${c}px Impact`,he(s,vi-20).forEach((le,ye)=>{const ze=c+ye*c*1.2;ee.strokeText(le,vi/2,ze),ee.fillText(le,vi/2,ze)})),o&&(ee.font=`${u}px Impact`,he(o,vi-20).reverse().forEach((le,ye)=>{const ze=vi-u*1.2*(ye+1);ee.strokeText(le,vi/2,ze),ee.fillText(le,vi/2,ze)}))})(re),await Promise.all(I.map(ee=>new Promise(he=>{const Ne=new window.Image;Ne.src=ee.src,Ne.onload=()=>{re.save(),re.translate(ee.x,ee.y),re.rotate(ee.rotation*Math.PI/180),re.scale(ee.scale,ee.scale),re.drawImage(Ne,-40,-40,80,80),re.restore(),he()},Ne.onerror=()=>he()})));try{h&&j(Z),p&&T(Z),w&&N(Z)}catch(ee){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",ee),f(!1),g(!1),y(!1)}},j=Z=>{const re=Z.getContext("2d");if(!re)return;const de=re.getImageData(0,0,Z.width,Z.height),ee=de.data;for(let he=0;he<ee.length;he+=4){const Ne=ee[he],le=ee[he+1],ye=ee[he+2],ze=(Ne+le+ye)/3,Ze=1.8;ee[he]=Math.min(255,ze+(Ne-ze)*Ze),ee[he+1]=Math.min(255,ze+(le-ze)*Ze*.7),ee[he+2]=Math.min(255,ze+(ye-ze)*Ze*.4);const Kt=1.3;ee[he]=Math.min(255,Math.max(0,ee[he]*Kt)),ee[he+1]=Math.min(255,Math.max(0,ee[he+1]*Kt)),ee[he+2]=Math.min(255,Math.max(0,ee[he+2]*Kt))}re.putImageData(de,0,0)},T=Z=>{const re=Z.getContext("2d");if(!re)return;const de=4,he=re.getImageData(0,0,Z.width,Z.height).data,Ne=new Uint8ClampedArray(he);for(let le=0;le<Z.height;le+=de)for(let ye=0;ye<Z.width;ye+=de){const ze=(le*Z.width+ye)*4,Ze=he[ze],Kt=he[ze+1],nn=he[ze+2],rn=he[ze+3];for(let vn=0;vn<de&&le+vn<Z.height;vn++)for(let Mn=0;Mn<de&&ye+Mn<Z.width;Mn++){const or=((le+vn)*Z.width+(ye+Mn))*4;Ne[or]=Ze,Ne[or+1]=Kt,Ne[or+2]=nn,Ne[or+3]=rn}}re.putImageData(new ImageData(Ne,Z.width,Z.height),0,0)},N=Z=>{const re=Z.getContext("2d");if(!re)return;const de=re.getImageData(0,0,Z.width,Z.height),ee=de.data;for(let he=0;he<ee.length;he+=4){const Ne=(Math.random()-.5)*50;ee[he]=Math.max(0,Math.min(255,ee[he]+Ne)),ee[he+1]=Math.max(0,Math.min(255,ee[he+1]+Ne)),ee[he+2]=Math.max(0,Math.min(255,ee[he+2]+Ne))}re.putImageData(de,0,0)};O.useEffect(()=>{e.current&&q(e.current)},[q]);const $=Z=>{var de;const re=(de=Z.target.files)==null?void 0:de[0];re&&r(URL.createObjectURL(re))},R=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),y(!1)},k=async()=>{const Z=e.current;if(!Z)return;await q(Z);const re=document.createElement("a");re.download="meme.png",re.href=Z.toDataURL("image/png"),document.body.appendChild(re),re.click(),document.body.removeChild(re)},B=async Z=>{C(!0),E(!1);try{console.log("Fetching NFTs for collection:",Z);let re;if(Z.api==="opensea"){console.log("Using OpenSea API for:",Z.slug);const de=await jO(Z.slug,50);re=de.data,console.log("OpenSea response:",de)}else if(Z.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",Z.slug);const de=await L7(Z.slug,50);re=de.data,console.log("OpenSea Solana response:",de)}else{console.log("Using Scatter API for:",Z.slug);const de=await BO(Z.slug,1,50);re=de.data,console.log("Scatter response:",de)}if(re&&re.length>0){const de=re[Math.floor(Math.random()*re.length)],ee=de.image||de.image_url||de.image_url_shrunk;console.log("Selected NFT:",de),console.log("Image URL:",ee),r(ee)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(re){console.error("Error fetching NFTs:",re),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},H=Z=>{const re={id:i2e(),src:Z,x:80,y:80,scale:1,rotation:0};A(de=>de.length>=2||de.some(ee=>ee.src===Z&&!ee.id.startsWith("upload-"))?de:[...de,re]),U(re.id)},X=Z=>{var de;const re=(de=Z.target.files)==null?void 0:de[0];if(re){const ee=URL.createObjectURL(re);H(ee)}},se=(Z,re,de)=>{A(ee=>ee.map(he=>{if(he.id!==Z)return he;let Ne=he.x+re/1.2,le=he.y+de/1.2;const ye=40*he.scale,ze=40*he.scale;return Ne=Math.max(ye,Math.min(vi-ye,Ne)),le=Math.max(ze,Math.min(vi-ze,le)),{...he,x:Ne,y:le}}))},ne=(Z,re,de,ee,he)=>{A(Ne=>Ne.map(le=>{if(le.id!==Z)return le;const ye=le.x,ze=le.y,Ze=Math.atan2(he-ze,ee-ye)*180/Math.PI;return{...le,rotation:de+(Ze-re)*.5}}))},ae=Z=>{A(re=>re.filter(de=>de.id!==Z))},me=(Z,re)=>{A(de=>de.map(ee=>ee.id===Z?{...ee,scale:Math.max(.2,ee.scale*(1+(re-1)*.2))}:ee))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>E(Z=>!Z),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:a2e.map(Z=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{B(Z)},children:Z.name},Z.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:$})]}),_&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:Z=>i(Z.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:Z=>l(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:Z=>a(Z.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:Z=>d(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(Z=>!Z),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(Z=>!Z),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(Z=>!Z),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[c2e.map((Z,re)=>m.jsx("img",{src:Z,alt:`sticker${re+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>H(Z)},Z)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:D,onChange:X})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:k,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:R,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:vi,height:vi,className:t.canvas})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:vi,height:vi,pointerEvents:"none"},children:I.map(Z=>P===Z.id?m.jsxs("div",{style:{position:"absolute",left:Z.x,top:Z.y,width:80*Z.scale,height:80*Z.scale,transform:`rotate(${Z.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:re=>{S(Z.id),re.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:re=>{x===Z.id&&re.buttons===1&&se(Z.id,re.movementX,re.movementY)},children:[m.jsx("img",{src:Z.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:re=>{var Ze;re.stopPropagation();const de=(Ze=re.currentTarget.parentElement)==null?void 0:Ze.getBoundingClientRect(),ee=de?de.left+de.width/2:0,he=de?de.top+de.height/2:0,Ne=Math.atan2(re.clientY-he,re.clientX-ee)*180/Math.PI,le=Z.rotation,ye=Kt=>{ne(Z.id,Ne,le,Kt.clientX,Kt.clientY)},ze=()=>{window.removeEventListener("mousemove",ye),window.removeEventListener("mouseup",ze)};window.addEventListener("mousemove",ye),window.addEventListener("mouseup",ze)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:re=>{re.stopPropagation();const de=re.clientX,ee=Ne=>{const le=(Ne.clientX-de)/80;me(Z.id,1+le)},he=()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",he)};window.addEventListener("mousemove",ee),window.addEventListener("mouseup",he)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>ae(Z.id),children:""}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>U(null),children:"Place"})]},Z.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xw(){return Xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xw.apply(this,arguments)}var Jl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Jl||(Jl={}));const KL="popstate";function l2e(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return XT("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:HH(s)}return d2e(e,n,null,t)}function _r(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zH(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function u2e(){return Math.random().toString(36).substr(2,8)}function YL(t,e){return{usr:t.state,key:t.key,idx:e}}function XT(t,e,n,r){return n===void 0&&(n=null),Xw({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fg(e):e,{state:n,key:e&&e.key||r||u2e()})}function HH(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function d2e(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Jl.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Xw({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Jl.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function h(w,y){a=Jl.Push;let b=XT(g.location,w,y);l=u()+1;let E=YL(b,l),_=g.createHref(b);try{o.pushState(E,"",_)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(_)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,y){a=Jl.Replace;let b=XT(g.location,w,y);l=u();let E=YL(b,l),_=g.createHref(b);o.replaceState(E,"",_),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:HH(w);return b=b.replace(/ $/,"%20"),_r(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(KL,d),c=w,()=>{s.removeEventListener(KL,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var QL;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(QL||(QL={}));function h2e(t,e,n){return n===void 0&&(n="/"),f2e(t,e,n)}function f2e(t,e,n,r){let s=typeof e=="string"?Fg(e):e,i=GH(s.pathname||"/",n);if(i==null)return null;let o=qH(t);p2e(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=I2e(i);a=C2e(o[c],l)}return a}function qH(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(_r(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Yd([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(_r(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),qH(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:E2e(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of VH(i.path))s(i,o,c)}),e}function VH(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=VH(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function p2e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_2e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const g2e=/^:[\w-]+$/,m2e=3,y2e=2,w2e=1,b2e=10,v2e=-2,ZL=t=>t==="*";function E2e(t,e){let n=t.split("/"),r=n.length;return n.some(ZL)&&(r+=v2e),e&&(r+=y2e),n.filter(s=>!ZL(s)).reduce((s,i)=>s+(g2e.test(i)?m2e:i===""?w2e:b2e),r)}function _2e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function C2e(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=S2e({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Yd([i,d.pathname]),pathnameBase:O2e(Yd([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Yd([i,d.pathnameBase]))}return o}function S2e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=A2e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function A2e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),zH(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function I2e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zH(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function GH(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function N2e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Fg(t):t;return{pathname:n?n.startsWith("/")?n:x2e(n,e):e,search:k2e(r),hash:D2e(s)}}function x2e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function uI(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function T2e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function R2e(t,e){let n=T2e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function P2e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Fg(t):(s=Xw({},t),_r(!s.pathname||!s.pathname.includes("?"),uI("?","pathname","search",s)),_r(!s.pathname||!s.pathname.includes("#"),uI("#","pathname","hash",s)),_r(!s.search||!s.search.includes("#"),uI("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=N2e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Yd=t=>t.join("/").replace(/\/\/+/g,"/"),O2e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),k2e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,D2e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $2e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const KH=["post","put","patch","delete"];new Set(KH);const M2e=["get",...KH];new Set(M2e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jw(){return Jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jw.apply(this,arguments)}const mk=O.createContext(null),L2e=O.createContext(null),m1=O.createContext(null),y1=O.createContext(null),Wg=O.createContext({outlet:null,matches:[],isDataRoute:!1}),YH=O.createContext(null);function w1(){return O.useContext(y1)!=null}function QH(){return w1()||_r(!1),O.useContext(y1).location}function ZH(t){O.useContext(m1).static||O.useLayoutEffect(t)}function U2e(){let{isDataRoute:t}=O.useContext(Wg);return t?Z2e():B2e()}function B2e(){w1()||_r(!1);let t=O.useContext(mk),{basename:e,future:n,navigator:r}=O.useContext(m1),{matches:s}=O.useContext(Wg),{pathname:i}=QH(),o=JSON.stringify(R2e(s,n.v7_relativeSplatPath)),a=O.useRef(!1);return ZH(()=>{a.current=!0}),O.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=P2e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Yd([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function j2e(t,e){return F2e(t,e)}function F2e(t,e,n,r){w1()||_r(!1);let{navigator:s}=O.useContext(m1),{matches:i}=O.useContext(Wg),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=QH(),u;if(e){var d;let w=typeof e=="string"?Fg(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||_r(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=h2e(t,{pathname:f}),g=V2e(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Yd([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Yd([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?O.createElement(y1.Provider,{value:{location:Jw({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Jl.Pop}},g):g}function W2e(){let t=Q2e(),e=$2e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const z2e=O.createElement(W2e,null);class H2e extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Wg.Provider,{value:this.props.routeContext},O.createElement(YH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function q2e(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(mk);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Wg.Provider,{value:e},r)}function V2e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||_r(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||z2e,c&&(l<0&&h===0?(X2e("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let E;return f?E=g:p?E=w:d.route.Component?E=O.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=u,O.createElement(q2e,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?O.createElement(H2e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var XH=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(XH||{}),JH=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(JH||{});function G2e(t){let e=O.useContext(mk);return e||_r(!1),e}function K2e(t){let e=O.useContext(L2e);return e||_r(!1),e}function Y2e(t){let e=O.useContext(Wg);return e||_r(!1),e}function eq(t){let e=Y2e(),n=e.matches[e.matches.length-1];return n.route.id||_r(!1),n.route.id}function Q2e(){var t;let e=O.useContext(YH),n=K2e(),r=eq();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Z2e(){let{router:t}=G2e(XH.UseNavigateStable),e=eq(JH.UseNavigateStable),n=O.useRef(!1);return ZH(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Jw({fromRouteId:e},i)))},[t,e])}const XL={};function X2e(t,e,n){XL[t]||(XL[t]=!0)}function J2e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function eE(t){_r(!1)}function eDe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Jl.Pop,navigator:i,static:o=!1,future:a}=t;w1()&&_r(!1);let c=e.replace(/^\/*/,"/"),l=O.useMemo(()=>({basename:c,navigator:i,static:o,future:Jw({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Fg(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=O.useMemo(()=>{let w=GH(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:O.createElement(m1.Provider,{value:l},O.createElement(y1.Provider,{children:n,value:g}))}function tDe(t){let{children:e,location:n}=t;return j2e(JT(e),n)}new Promise(()=>{});function JT(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,JT(r.props.children,i));return}r.type!==eE&&_r(!1),!r.props.index||!r.props.children||_r(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=JT(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const nDe="6";try{window.__reactRouterVersion=nDe}catch{}const rDe="startTransition",JL=Uq[rDe];function sDe(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=l2e({window:s,v5Compat:!0}));let o=i.current,[a,c]=O.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=O.useCallback(d=>{l&&JL?JL(()=>c(d)):c(d)},[c,l]);return O.useLayoutEffect(()=>o.listen(u),[o,u]),O.useEffect(()=>J2e(r),[r]),O.createElement(eDe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var eU;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(eU||(eU={}));var tU;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tU||(tU={}));const iDe=ua({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function oDe(){const t=iDe(),{open:e}=g1(),{address:n,isConnected:r}=P0(),{isPending:s}=R9(),{disconnect:i}=P9(),{data:o}=O9({address:n}),[a,c]=O.useState("pixelawbs-popup"),[l,u]=O.useState(new Set),[d,h]=O.useState(!1),[f,p]=O.useState(!1),[g,w]=O.useState(!1),[y,b]=O.useState(!1),E=U2e(),_=O.useRef(null);O.useEffect(()=>{if(a==="halloween-popup"&&_.current){const N=_.current.querySelector("script[data-tiktok-embed]");N&&N.remove();const $=document.createElement("script");$.src="https://www.tiktok.com/embed.js",$.async=!0,$.setAttribute("data-tiktok-embed","true"),_.current.appendChild($)}},[a]);const C=(N,$,R)=>{if(N==="url"&&R)window.open(R,"_blank");else if(N==="popup"&&$)c($),u(k=>{const B=new Set(k);return B.delete($),B}),document.body.offsetWidth;else if(N==="wallet")r?i():e();else if(N==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else N==="nft-gallery"?p(!0):N==="meme-generator"?w(!0):N==="chess"&&(r?(b(!0),setTimeout(()=>{b(!1),E("/chess")},1500)):e().then(()=>{const k=()=>{window.ethereum&&window.ethereum.selectedAddress?(b(!0),setTimeout(()=>{b(!1),E("/chess")},1500)):setTimeout(k,200)};k()}))},I=()=>c(null),A=N=>{u($=>new Set($).add(N)),c(null)},x=N=>{N==="mint-popup"?h(!0):N==="nft-gallery-popup"?p(!0):N==="meme-generator-popup"?w(!0):c(N),u($=>{const R=new Set($);return R.delete(N),R})},S=()=>h(!1),D=()=>p(!1),P=()=>w(!1),U=()=>{h(!1),u(N=>new Set(N).add("mint-popup"))},q=()=>{p(!1),u(N=>new Set(N).add("nft-gallery-popup"))},j=()=>{w(!1),u(N=>new Set(N).add("meme-generator-popup"))},T=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[y&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(ape,{onIconClick:C}),m.jsx(lpe,{minimizedWindows:Array.from(l),onRestoreWindow:x,walletButton:T,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs(to,{id:"chat-popup",isOpen:a==="chat-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(to,{id:"purity-popup",isOpen:a==="purity-popup",onClose:I,onMinimize:A,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(to,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(to,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(to,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(to,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(Rue,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(to,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:I,onMinimize:A,children:(()=>{const N=$=>{$.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:N,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(to,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:I,onMinimize:A,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:_,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),m.jsxs(to,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:I,onMinimize:A,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(hpe,{isOpen:d,onClose:S,onMinimize:U,walletAddress:n||""}),m.jsx(Jke,{isOpen:f,onClose:D,onMinimize:q,walletAddress:n}),m.jsx(to,{id:"meme-generator-popup",isOpen:g,onClose:P,onMinimize:j,children:m.jsx(WH,{})})]})}const aDe=ua({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),nU=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],cDe=({onBack:t,walletAddress:e})=>{const n=aDe(),{open:r}=g1(),[s,i]=O.useState([]),[o,a]=O.useState(!0),[c,l]=O.useState(null),[u,d]=O.useState(nU[0]),[h,f]=O.useState(!1),[p,g]=O.useState(null),[w,y]=O.useState("all"),[b,E]=O.useState(null),_=O.useCallback(async()=>{var x,S;try{if((x=window.solana)!=null&&x.isPhantom){const D=await window.solana.connect();g(D.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const D=await window.solflare.connect();g(D.publicKey.toString());return}r()}catch(D){console.error("Failed to connect Solana wallet:",D),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);O.useEffect(()=>{var x,S;(x=window.solana)!=null&&x.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),O.useEffect(()=>{(async()=>{a(!0);try{let S,D=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}D=p,S=await upe(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await jO(u.slug,100,D):S=await BO(u.slug,1,100,D);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some(U=>U.owners&&U.owners.length>0)?S.data=S.data.filter(U=>U.owners.some(j=>j.owner_of&&j.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),E("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),O.useEffect(()=>{h&&_()},[h,_]);const C=async x=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await M7(u.chain,x.address,x.token_id.toString()),D={...x,attributes:JSON.stringify(S.traits||[])};l(D)}catch(S){console.error("Failed to fetch full NFT details",S),l(x)}else l(x);a(!1)},I=()=>{if(!c)return null;let x=[];try{x=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:x.map((S,D)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},D))})]})},A=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:nU.map(x=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===x.slug?"active":""}`,onClick:()=>d(x),children:x.name},x.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{_()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(x=>{let S=x.image||x.image_url||x.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void C(x),children:[m.jsx("img",{src:S,alt:x.name,onError:D=>{D.currentTarget.src!==x.image_url&&x.image_url?D.currentTarget.src=x.image_url:D.currentTarget.src!==x.image_url_shrunk&&x.image_url_shrunk?D.currentTarget.src=x.image_url_shrunk:D.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:x.name})]},x.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?I():A()})]})},lDe=ua({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),Uo=({isOpen:t,onClose:e,title:n,children:r})=>{const s=lDe();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),m.jsx("div",{className:s.content,children:r})]})}):null},uDe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=O.useState([]),[i,o]=O.useState(!1),[a,c]=O.useState(!1),[l,u]=O.useState({}),[d,h]=O.useState(null),{data:f}=k9();O.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const _=await D7(n);s(_);const C={};_.forEach(I=>{C[I.id]=0}),u(C)}catch(_){h(_.message)}finally{o(!1)}},g=(_,C)=>{u(I=>({...I,[_]:Math.max(0,C)}))},w=async()=>{const _=Object.entries(l).filter(([,C])=>C>0).map(([C,I])=>({id:C,quantity:I}));if(_.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await $7(n,_);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const I=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${I}`),e()}catch(I){h("Transaction failed: "+I.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},y=(_,C)=>`${parseFloat(_)} ${C}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},E={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(Uo,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:E,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(_=>m.jsxs("div",{style:b,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:_.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(_.token_price,_.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",_.wallet_limit===4294967295?"Unlimited":_.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:_.wallet_limit===4294967295?void 0:_.wallet_limit,value:l[_.id]||"",onChange:C=>g(_.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},_.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},dDe=ua({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),hDe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],fDe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],pDe=()=>{const t=dDe(),{open:e}=g1(),{address:n,isConnected:r}=P0(),{isPending:s}=R9(),{disconnect:i}=P9(),{data:o}=O9({address:n}),[a,c]=O.useState("main"),[l,u]=O.useState(!1),[d,h]=O.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=O.useState(!1),[g,w]=O.useState(!1),[y,b]=O.useState(!1),[E,_]=O.useState(!1),[C,I]=O.useState(!1),[A,x]=O.useState(!1),[S,D]=O.useState(!1),[P,U]=O.useState(!1),[q,j]=O.useState(!1),[T,N]=O.useState(!1),[$,R]=O.useState(!1),[k,B]=O.useState(!1),H=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>_(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>I(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],X=ae=>{ae.disabled||ae.action()};if(O.useEffect(()=>{const ae=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ae)},[]),O.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(cDe,{onBack:()=>c("main"),walletAddress:n||void 0});function se({open:ae,onClose:me,title:Z,nfts:re}){const de=ee=>{switch(ee){case"lawbsters":x(!0);break;case"lawbstarz":D(!0);break;case"pixelawbs":U(!0);break;case"halloween":j(!0);break;case"lawbstation":N(!0);break;case"nexus":R(!0);break}};return m.jsx(Uo,{isOpen:ae,onClose:me,title:Z,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:re.map(ee=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>de(ee.id),children:[m.jsx("img",{src:ee.image,alt:ee.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:ee.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:ee.description})]},ee.id))})})}function ne({open:ae,onClose:me}){return ae?m.jsxs(Uo,{isOpen:ae,onClose:me,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:H.map(ae=>m.jsxs("div",{className:t.icon,onClick:()=>X(ae),children:[m.jsx("img",{src:ae.icon,alt:ae.label}),m.jsx("span",{children:ae.label})]},ae.label))}),l&&m.jsxs(Uo,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:ae=>ae.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),B(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(uDe,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),m.jsx(se,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:hDe}),m.jsx(se,{open:E,onClose:()=>_(!1),title:"SOL NFTS FOLDER",nfts:fDe}),m.jsx(ne,{open:C,onClose:()=>I(!1)}),m.jsxs(Uo,{isOpen:A,onClose:()=>x(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Uo,{isOpen:S,onClose:()=>D(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Uo,{isOpen:P,onClose:()=>U(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{U(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(Uo,{isOpen:q,onClose:()=>j(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(Uo,{isOpen:T,onClose:()=>N(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Uo,{isOpen:$,onClose:()=>R(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(Uo,{isOpen:k,onClose:()=>B(!1),title:"Meme Generator",children:m.jsx(WH,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function gDe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=O.useState(e(t));function s(){r(e(t))}return O.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const mDe=Symbol(),rU=Object.getPrototypeOf,eR=new WeakMap,yDe=t=>t&&(eR.has(t)?eR.get(t):rU(t)===Object.prototype||rU(t)===Array.prototype),wDe=t=>yDe(t)&&t[mDe]||null,sU=(t,e=!0)=>{eR.set(t,e)},N_={},yk=t=>typeof t=="object"&&t!==null,bDe=t=>yk(t)&&!Z0.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),tq=(t,e)=>{const n=tR.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return sU(r,!0),tR.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(Z0.has(i))sU(i,!1);else if(Mu.has(i)){const[c,l]=Mu.get(i);a.value=tq(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},vDe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(iU(l,o)||e0.has(o)&&iU(l,e0.get(o))))return!0;n(i),yk(o)&&(o=wDe(o)||o);const u=!Mu.has(o)&&_De(o)?$n(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Mu=new WeakMap,Z0=new WeakSet,tR=new WeakMap,Hm=[1,1],e0=new WeakMap;let iU=Object.is,EDe=(t,e)=>new Proxy(t,e),_De=bDe,CDe=tq,SDe=vDe;function $n(t={}){if(!yk(t))throw new Error("object required");const e=e0.get(t);if(e)return e;let n=Hm[0];const r=new Set,s=(w,y=++Hm[0])=>{n!==y&&(n=y,r.forEach(b=>b(w,y)))};let i=Hm[1];const o=(w=++Hm[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([y])=>{const b=y[1](w);b>n&&(n=b)})),n),a=w=>(y,b)=>{const E=[...y];E[1]=[w,...E[1]],s(E,b)},c=new Map,l=(w,y)=>{const b=!Z0.has(y)&&Mu.get(y);if(b){if((N_?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const E=b[2](a(w));c.set(w,[b,E])}else c.set(w,[b])}},u=w=>{var y;const b=c.get(w);b&&(c.delete(w),(y=b[1])==null||y.call(b))},d=w=>(r.add(w),r.size===1&&c.forEach(([b,E],_)=>{if((N_?"production":void 0)!=="production"&&E)throw new Error("remove already exists");const C=b[2](a(_));c.set(_,[b,C])}),()=>{r.delete(w),r.size===0&&c.forEach(([b,E],_)=>{E&&(E(),c.set(_,[b]))})});let h=!0;const f=SDe(()=>h,l,u,s),p=EDe(t,f);e0.set(t,p);const g=[t,o,d];return Mu.set(p,g),Reflect.ownKeys(t).forEach(w=>{const y=Object.getOwnPropertyDescriptor(t,w);"value"in y&&y.writable&&(p[w]=t[w])}),h=!1,p}function gi(t,e,n){const r=Mu.get(t);(N_?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function t0(t){const e=Mu.get(t);(N_?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return CDe(n,r())}function dg(t){return Z0.add(t),t}function ADe(){return{proxyStateMap:Mu,refSet:Z0,snapCache:tR,versionHolder:Hm,proxyCache:e0}}function Ls(t,e,n,r){let s=t[e];return gi(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:IDe,snapCache:NDe}=ADe(),gv=t=>IDe.has(t);function xDe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=NDe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return gv(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!gv(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!gv(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!gv(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=$n(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var oU={};const ce={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof oU<"u"?oU.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},x_={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ce.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},TDe={bigNumber(t){return t?new La(t):new La(0)},multiply(t,e){if(t===void 0||e===void 0)return new La(0);const n=new La(t),r=new La(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},RDe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],PDe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],ODe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],kDe={getERC20Abi:t=>ce.USDT_CONTRACT_ADDRESSES.includes(t)?ODe:RDe,getSwapAbi:()=>PDe},eu={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},ht={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function dI(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const at={setItem(t,e){qm()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(qm())return localStorage.getItem(t)||void 0},removeItem(t){qm()&&localStorage.removeItem(t)},clear(){qm()&&localStorage.clear()}};function qm(){return typeof window<"u"&&typeof localStorage<"u"}function T_(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const Rs={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[ce.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},We={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=We.getActiveNamespace(),e=We.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{at.setItem(ht.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=at.getItem(ht.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{at.removeItem(ht.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{at.setItem(ht.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{at.setItem(ht.ACTIVE_CAIP_NETWORK_ID,t),We.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return at.getItem(ht.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{at.removeItem(ht.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=dI(t);at.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=We.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),at.setItem(ht.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=at.getItem(ht.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=dI(t);at.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return at.getItem(ht.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=dI(t);return at.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{at.setItem(ht.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return at.getItem(ht.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{at.removeItem(ht.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return at.getItem(ht.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=at.getItem(ht.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{at.setItem(ht.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return at.getItem(ht.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=at.getItem(ht.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));at.setItem(ht.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=We.getConnectedNamespaces();e.includes(t)||(e.push(t),We.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=We.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),We.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return at.getItem(ht.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{at.setItem(ht.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{at.removeItem(ht.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=at.getItem(ht.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=We.getBalanceCache();at.setItem(ht.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=We.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;We.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=We.getBalanceCache();e[t.caipAddress]=t,at.setItem(ht.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=at.getItem(ht.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=We.getBalanceCache();at.setItem(ht.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=We.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),We.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=We.getNativeBalanceCache();e[t.caipAddress]=t,at.setItem(ht.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=at.getItem(ht.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=We.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;We.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=We.getEnsCache();e[t.address]=t,at.setItem(ht.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=We.getEnsCache();at.setItem(ht.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=at.getItem(ht.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=We.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;We.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=We.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},at.setItem(ht.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=We.getIdentityCache();at.setItem(ht.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{at.removeItem(ht.PORTFOLIO_CACHE),at.removeItem(ht.NATIVE_BALANCE_CACHE),at.removeItem(ht.ENS_CACHE),at.removeItem(ht.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{at.setItem(ht.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=at.getItem(ht.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=We.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ce.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};at.setItem(ht.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=at.getItem(ht.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=We.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),at.setItem(ht.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=at.getItem(ht.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=We.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),at.setItem(ht.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=We.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),at.setItem(ht.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(We.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},nt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return nt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Rs.TEN_SEC_MS:!0},isAllowedRetry(t,e=Rs.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(nt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Rs.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(nt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!nt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?We.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,nt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ce.W3M_API_URL},getBlockchainApiUrl(){return ce.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ce.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Rs.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ce.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Nm(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class X0{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Nm(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Nm(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Nm(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Nm(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Nm(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const DDe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Rs.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(nt.isTelegram()){if(nt.isIos())return t.filter(e=>e!=="google");if(nt.isMac())return t.filter(e=>e!=="x");if(nt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},st=$n({features:Rs.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Rs.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),gt={state:st,subscribeKey(t,e){return Ls(st,t,e)},setOptions(t){Object.assign(st,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...st.remoteFeatures,...t};st.remoteFeatures=e,(n=st.remoteFeatures)!=null&&n.socials&&(st.remoteFeatures.socials=DDe.filterSocialsByPlatform(st.remoteFeatures.socials))},setFeatures(t){if(!t)return;st.features||(st.features=Rs.DEFAULT_FEATURES);const e={...st.features,...t};st.features=e},setProjectId(t){st.projectId=t},setCustomRpcUrls(t){st.customRpcUrls=t},setAllWallets(t){st.allWallets=t},setIncludeWalletIds(t){st.includeWalletIds=t},setExcludeWalletIds(t){st.excludeWalletIds=t},setFeaturedWalletIds(t){st.featuredWalletIds=t},setTokens(t){st.tokens=t},setTermsConditionsUrl(t){st.termsConditionsUrl=t},setPrivacyPolicyUrl(t){st.privacyPolicyUrl=t},setCustomWallets(t){st.customWallets=t},setIsSiweEnabled(t){st.isSiweEnabled=t},setIsUniversalProvider(t){st.isUniversalProvider=t},setSdkVersion(t){st.sdkVersion=t},setMetadata(t){st.metadata=t},setDisableAppend(t){st.disableAppend=t},setEIP6963Enabled(t){st.enableEIP6963=t},setDebug(t){st.debug=t},setEnableWalletConnect(t){st.enableWalletConnect=t},setEnableWalletGuide(t){st.enableWalletGuide=t},setEnableAuthLogger(t){st.enableAuthLogger=t},setEnableWallets(t){st.enableWallets=t},setPreferUniversalLinks(t){st.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(Rs.SIWX_DEFAULTS))t[e]??(t[e]=n);st.siwx=t},setConnectMethodsOrder(t){st.features={...st.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){st.features={...st.features,walletFeaturesOrder:t}},setSocialsOrder(t){st.remoteFeatures={...st.remoteFeatures,socials:t}},setCollapseWallets(t){st.features={...st.features,collapseWallets:t}},setEnableEmbedded(t){st.enableEmbedded=t},setAllowUnsupportedChain(t){st.allowUnsupportedChain=t},setManualWCControl(t){st.manualWCControl=t},setEnableNetworkSwitch(t){st.enableNetworkSwitch=t},setEnableReconnect(t){st.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(st.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){st.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return st.universalProviderConfigOverride},getSnapshot(){return t0(st)}},$De=Object.freeze({enabled:!0,events:[]}),MDe=new X0({baseUrl:nt.getAnalyticsUrl(),clientId:null}),LDe=5,UDe=60*1e3,wl=$n({...$De}),BDe={state:wl,subscribeKey(t,e){return Ls(wl,t,e)},async sendError(t,e){if(!wl.enabled)return;const n=Date.now();if(wl.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<UDe}).length>=LDe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};wl.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=gt.state;await MDe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:nt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){wl.enabled=!0},disable(){wl.enabled=!1},clearEvents(){wl.events=[]}};class hg extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,hg.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,hg):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function aU(t,e){const n=t instanceof hg?t:new hg(t instanceof Error?t.message:String(t),e,t);throw BDe.sendError(n,n.category),n}function No(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return aU(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return aU(a,e)}},n[r]=i}else n[r]=s}),n}var fg={};const jDe="https://secure.walletconnect.org/sdk",FDe=(typeof process<"u"&&typeof fg<"u"?fg.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||jDe,WDe=(typeof process<"u"&&typeof fg<"u"?fg.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",zDe=(typeof process<"u"&&typeof fg<"u"?fg.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Fe={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Xr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},ka={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},HDe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===ka.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${ka.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===ka.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${ka.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ce.CHAIN.SOLANA&&t===ka.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${ka.COINBASE.url}/dapp?cb_url=${r}`)}},Ei=$n({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),qDe={state:Ei,subscribeNetworkImages(t){return gi(Ei.networkImages,()=>t(Ei.networkImages))},subscribeKey(t,e){return Ls(Ei,t,e)},subscribe(t){return gi(Ei,()=>t(Ei))},setWalletImage(t,e){Ei.walletImages[t]=e},setNetworkImage(t,e){Ei.networkImages[t]=e},setChainImage(t,e){Ei.chainImages[t]=e},setConnectorImage(t,e){Ei.connectorImages={...Ei.connectorImages,[t]:e}},setTokenImage(t,e){Ei.tokenImages[t]=e},setCurrencyImage(t,e){Ei.currencyImages[t]=e}},Vo=No(qDe),VDe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},hI=$n({networkImagePromises:{}}),GDe={async fetchWalletImage(t){if(t)return await ct._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(hI.networkImagePromises[t]||(hI.networkImagePromises[t]=ct._fetchNetworkImage(t)),await hI.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Vo.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Vo.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Vo.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Vo.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Vo.state.connectorImages[t.imageId]},getChainImage(t){return Vo.state.networkImages[VDe[t]]}},bl=$n({message:"",variant:"info",open:!1}),KDe={state:bl,subscribeKey(t,e){return Ls(bl,t,e)},open(t,e){const{debug:n}=gt.state,{shortMessage:r,longMessage:s}=t;n&&(bl.message=r,bl.variant=e,bl.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){bl.open=!1,bl.message="",bl.variant="info"}},dd=No(KDe),YDe=nt.getAnalyticsUrl(),QDe=new X0({baseUrl:YDe,clientId:null}),ZDe=["MODAL_CREATED"],yc=$n({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),zn={state:yc,subscribe(t){return gi(yc,()=>t(yc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=gt.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Zt.state.address;if(ZDe.includes(t.data.event)||typeof window>"u")return;await QDe.post({path:"/e",params:zn.getSdkProperties(),body:{eventId:nt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),yc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ce.HTTP_STATUS_CODES.FORBIDDEN&&!yc.reportedErrors.FORBIDDEN&&(dd.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${qm()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),yc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;yc.timestamp=Date.now(),yc.data=t,(e=gt.state.features)!=null&&e.analytics&&zn._sendAnalyticsEvent(yc)}},XDe=nt.getApiUrl(),qs=new X0({baseUrl:XDe,clientId:null}),JDe=40,cU=4,e3e=20,bt=$n({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ct={state:bt,subscribeKey(t,e){return Ls(bt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=gt.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return gt.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${qs.baseUrl}/getWalletImage/${t}`,n=await qs.getBlob({path:e,params:ct._getSdkProperties()});Vo.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${qs.baseUrl}/public/getAssetImage/${t}`,n=await qs.getBlob({path:e,params:ct._getSdkProperties()});Vo.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${qs.baseUrl}/public/getAssetImage/${t}`,n=await qs.getBlob({path:e,params:ct._getSdkProperties()});Vo.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${qs.baseUrl}/public/getCurrencyImage/${t}`,n=await qs.getBlob({path:e,params:ct._getSdkProperties()});Vo.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${qs.baseUrl}/public/getTokenImage/${t}`,n=await qs.getBlob({path:e,params:ct._getSdkProperties()});Vo.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return nt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===ka.COINBASE.id?!0:G.state.activeChain==="solana"&&(n.id===ka.SOLFLARE.id||n.id===ka.PHANTOM.id)):t},async fetchProjectConfig(){return(await qs.get({path:"/appkit/v1/config",params:ct._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await qs.get({path:"/projects/v1/origins",params:ct._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ce.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ce.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=G.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!GDe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>ct._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Ke.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>ct._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ct._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ct._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];ct._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(ka).map(o=>o.id));const r=await qs.get({path:"/getWallets",params:{...ct._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:ct._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=gt.state;if(t!=null&&t.length){const e={...ct._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??cU,include:t},{data:n}=await ct.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ct._fetchWalletImage(i))),bt.featured=r,bt.allFeatured=r}},async fetchRecommendedWallets(){try{bt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=gt.state,r=[...e??[],...n??[]].filter(Boolean),s=G.getRequestedCaipNetworkIds().join(","),i={page:1,entries:cU,include:t,exclude:r,chains:s},{data:o,count:a}=await ct.fetchWallets(i),c=We.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>ct._fetchWalletImage(d))),bt.recommended=o,bt.allRecommended=o,bt.count=a??0}catch{}finally{bt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=gt.state,s=G.getRequestedCaipNetworkIds().join(","),i=[...bt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:JDe,include:e,exclude:i,chains:s},{data:a,count:c}=await ct.fetchWallets(o),l=a.slice(0,e3e).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ct._fetchWalletImage(u))),bt.wallets=nt.uniqueBy([...bt.wallets,...ct._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),bt.count=c>bt.count?c:bt.count,bt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await ct.fetchWallets(e);n&&n.forEach(r=>{bt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=gt.state,s=G.getRequestedCaipNetworkIds().join(",");bt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await ct.fetchWallets(i);zn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ct._fetchWalletImage(c)),nt.wait(300)]),bt.search=ct._filterOutExtensions(o)},initPromise(t,e){const n=bt.promises[t];return n||(bt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&ct.initPromise("connectorImages",ct.fetchConnectorImages),e&&ct.initPromise("featuredWallets",ct.fetchFeaturedWallets),n&&ct.initPromise("recommendedWallets",ct.fetchRecommendedWallets),r&&ct.initPromise("networkImages",ct.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=gt.state.features)!=null&&t.analytics&&ct.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await qs.get({path:"/getAnalyticsConfig",params:ct._getSdkProperties()});gt.setFeatures({analytics:t})}catch{gt.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){bt.featured=bt.allFeatured,bt.recommended=bt.allRecommended;return}const e=G.getRequestedCaipNetworkIds().join(",");bt.featured=bt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bt.recommended=bt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bt.filteredWallets=bt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){bt.filteredWallets=[]},setFilterByNamespace(t){if(!t){bt.featured=bt.allFeatured,bt.recommended=bt.allRecommended;return}const e=G.getRequestedCaipNetworkIds().join(",");bt.featured=bt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bt.recommended=bt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bt.filteredWallets=bt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},dn=$n({view:"Connect",history:["Connect"],transactionStack:[]}),t3e={state:dn,subscribeKey(t,e){return Ls(dn,t,e)},pushTransactionStack(t){dn.transactionStack.push(t)},popTransactionStack(t){const e=dn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),pt.goBack();break;case"cancel":s==null||s(),pt.goBack();break}},push(t,e){t!==dn.view&&(dn.view=t,dn.history.push(t),dn.data=e)},reset(t,e){dn.view=t,dn.history=[t],dn.data=e},replace(t,e){dn.history.at(-1)===t||(dn.view=t,dn.history[dn.history.length-1]=t,dn.data=e)},goBack(){var r;const t=G.state.activeCaipAddress,e=pt.state.view==="ConnectingFarcaster",n=!t&&e;if(dn.history.length>1){dn.history.pop();const[s]=dn.history.slice(-1);s&&(t&&s==="Connect"?dn.view="Account":dn.view=s)}else Nn.close();(r=dn.data)!=null&&r.wallet&&(dn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Zt.setFarcasterUrl(void 0,G.state.activeChain);const a=Ke.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=t0(gt.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(dn.history.length>1){dn.history=dn.history.slice(0,t+1);const[e]=dn.history.slice(-1);e&&(dn.view=e)}},goBackOrCloseModal(){pt.state.history.length>1?pt.goBack():Nn.close()}},pt=No(t3e),wc=$n({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),nR={state:wc,subscribe(t){return gi(wc,()=>t(wc))},setThemeMode(t){wc.themeMode=t;try{const e=Ke.getAuthConnector();if(e){const n=nR.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:T_(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){wc.themeVariables={...wc.themeVariables,...t};try{const e=Ke.getAuthConnector();if(e){const n=nR.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:T_(wc.themeVariables,wc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return t0(wc)}},mv=No(nR),nq={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ht=$n({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...nq},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),n3e={state:Ht,subscribe(t){return gi(Ht,()=>{t(Ht)})},subscribeKey(t,e){return Ls(Ht,t,e)},initialize(t){t.forEach(e=>{const n=We.getConnectedConnectorId(e);n&&Ke.setConnectorId(n,e)})},setActiveConnector(t){t&&(Ht.activeConnector=dg(t))},setConnectors(t){t.filter(s=>!Ht.allConnectors.some(i=>i.id===s.id&&Ke.getConnectorName(i.name)===Ke.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Ht.allConnectors.push(dg(s))});const n=Ke.getEnabledNamespaces(),r=Ke.getEnabledConnectors(n);Ht.connectors=Ke.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(Ht.filterByNamespaceMap).forEach(e=>{Ht.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Ht.filterByNamespaceMap[e]=!0}),Ke.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Ht.filterByNamespaceMap[t]=e,Ke.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Ke.getEnabledNamespaces(),e=Ke.getEnabledConnectors(t),n=Ke.areAllNamespacesEnabled();Ht.connectors=Ke.mergeMultiChainConnectors(e),n?ct.clearFilterByNamespaces():ct.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Ht.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Ht.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Ht.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Ke.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ce.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Ke.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ce.CONNECTOR_ID.AUTH){const s=t,i=t0(gt.state),o=mv.getSnapshot().themeMode,a=mv.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:T_(a,o)}),Ke.setConnectors([t])}else Ke.setConnectors([t])},getAuthConnector(t){var r;const e=t||G.state.activeChain,n=Ht.connectors.find(s=>s.id===ce.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return Ht.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Ht.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Ht.allConnectors.filter(r=>r.chain===G.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=t0(gt.state),r=mv.getSnapshot().themeMode,s=mv.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:T_(s,r)})},getConnectorsByNamespace(t){const e=Ht.allConnectors.filter(n=>n.chain===t);return Ke.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return G.checkIfSmartAccountEnabled()&&tc(t)===Xr.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Ke.getConnector(t.id,t.rdns);HDe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,G.state.activeChain),e?pt.push("ConnectingExternal",{connector:e}):pt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Ke.getConnectorsByNamespace(t):Ke.mergeMultiChainConnectors(Ht.allConnectors)},setFilterByNamespace(t){Ht.filterByNamespace=t,Ht.connectors=Ke.getConnectors(t),ct.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Ht.activeConnectorIds={...Ht.activeConnectorIds,[e]:t},We.setConnectedConnectorId(e,t))},removeConnectorId(t){Ht.activeConnectorIds={...Ht.activeConnectorIds,[t]:void 0},We.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Ht.activeConnectorIds[t]},isConnected(t){return t?!!Ht.activeConnectorIds[t]:Object.values(Ht.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Ht.activeConnectorIds={...nq}}},Ke=No(n3e),r3e=1e3,xm={checkNamespaceConnectorId(t,e){return Ke.getConnectorId(t)===e},isSocialProvider(t){return Rs.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Ke.setActiveConnector(e),s==null||s(nt.isMobile()&&t),r){const l=Nn.subscribeKey("open",u=>{u||(pt.state.view!==r&&pt.replace(r),l(),a(new Error("Modal closed")))})}const c=G.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Nn.close(),c(),o(eu.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=G.subscribeKey("activeCaipAddress",s=>{s&&(Nn.close(),r(),e(eu.parseCaipAddress(s)))});Ge.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=Zt.state.socialWindow,i=Zt.state.socialProvider,o=!1,a=null;const c=G.subscribeKey("activeCaipAddress",l=>{l&&(e&&Nn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===ce.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=Ke.getAuthConnector();if(g&&!o){s&&(s.close(),Zt.setSocialWindow(void 0,G.state.activeChain),s=Zt.state.socialWindow),o=!0;const w=f.data.resultUri;i&&zn.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=G.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:w,chainId:y==null?void 0:y.caipNetworkId}),i){We.setConnectedSocialProvider(i),await Ge.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const b=G.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(eu.parseCaipAddress(b)),zn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&zn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&zn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(Zt.setSocialProvider(t,G.state.activeChain),i=Zt.state.socialProvider,zn.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=Nn.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Ke.getAuthConnector();if(p&&!Zt.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();Zt.setFarcasterUrl(g,G.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Ke.getAuthConnector();a=nt.returnOpenHref(`${ce.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){Zt.setSocialWindow(a,G.state.activeChain),s=Zt.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Nn.subscribeKey("open",c=>{c||(pt.state.view!==e&&pt.replace(e),a(),i(new Error("Modal closed")))})}const o=G.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Nn.close(),o(),s(eu.parseCaipAddress(a)))})})},async updateEmail(){const t=We.getConnectedConnectorId(G.state.activeChain),e=Ke.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ce.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return pt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Nn.close(),clearInterval(i),o(),r({email:a}))},r3e),o=Nn.subscribeKey("open",a=>{a||(pt.state.view!=="Connect"&&pt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return G.checkIfSmartAccountEnabled()&&tc(t)===Xr.ACCOUNT_TYPES.EOA}};function rq(){var r,s;const t=((r=G.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=G.state.activeCaipNetwork)==null?void 0:s.id)||1,n=Rs.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function tc(t){var n;return(n=G.getAccountData(t))==null?void 0:n.preferredAccountType}const sq={getConnectionStatus(t,e){const n=Ke.state.activeConnectorIds[e],r=Ge.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=gt.state.remoteFeatures)!=null&&a.multiWallet),n=Ke.state.activeConnectorIds[t],r=Ge.getConnections(t),i=(Ge.state.recentConnections.get(t)??[]).filter(c=>Ke.getConnectorById(c.connectorId)),o=sq.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},hd=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),hr=$n({...hd}),s3e={state:hr,subscribeKey(t,e){return Ls(hr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=nt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){hr.message=hd.message,hr.variant=hd.variant,hr.svg=hd.svg,hr.open=hd.open,hr.autoClose=hd.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=hd.autoClose}){hr.open?(hr.open=!1,setTimeout(()=>{hr.message=t,hr.variant=n,hr.svg=e,hr.open=!0,hr.autoClose=r},150)):(hr.message=t,hr.variant=n,hr.svg=e,hr.open=!0,hr.autoClose=r)}},tu=s3e,Sn=$n({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),i3e={state:Sn,subscribe(t){return gi(Sn,()=>t(Sn))},setLastNetworkInView(t){Sn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Sn.loading=!0;try{const r=await dt.fetchTransactions({account:t,cursor:Sn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=Vm.filterSpamTransactions(r.data),i=Vm.filterByConnectedChain(s),o=[...Sn.transactions,...i];Sn.loading=!1,e==="coinbase"?Sn.coinbaseTransactions=Vm.groupTransactionsByYearAndMonth(Sn.coinbaseTransactions,r.data):(Sn.transactions=o,Sn.transactionsByYear=Vm.groupTransactionsByYearAndMonth(Sn.transactionsByYear,i)),Sn.empty=o.length===0,Sn.next=r.next?r.next:void 0}catch{const s=G.state.activeChain;zn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:gt.state.projectId,cursor:Sn.next,isSmartAccount:tc(s)===Xr.ACCOUNT_TYPES.SMART_ACCOUNT}}),tu.showError("Failed to fetch transactions"),Sn.loading=!1,Sn.empty=!0,Sn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=G.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Sn.next=void 0},resetTransactions(){Sn.transactions=[],Sn.transactionsByYear={},Sn.lastNetworkInView=void 0,Sn.loading=!1,Sn.empty=!1,Sn.next=void 0}},Vm=No(i3e,"API_ERROR"),Mt=$n({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let rd;const o3e={state:Mt,subscribe(t){return gi(Mt,()=>t(Mt))},subscribeKey(t,e){return Ls(Mt,t,e)},_getClient(){return Mt._client},setClient(t){Mt._client=dg(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);Ge.syncStorageConnections(e)},syncStorageConnections(t){const e=We.getConnections(),n=t??Array.from(G.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(Mt.recentConnections);i.set(r,s),Mt.recentConnections=i}},getConnections(t){return t?Mt.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Ge.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(nt.isTelegram()||nt.isSafari()&&nt.isIos()){if(rd){await rd,rd=void 0;return}if(!nt.isPairingExpired(Mt==null?void 0:Mt.wcPairingExpiry)){const s=Mt.wcUri;Mt.wcUri=s;return}rd=(e=(t=Ge._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Ge.state.status="connecting",await rd,rd=void 0,Mt.wcPairingExpiry=void 0,Ge.state.status="connected"}else await((r=(n=Ge._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Ge._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&G.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Ge._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||G.state.activeChain;e&&Ke.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;Nn.setLoading(!0,G.state.activeChain);const n=Ke.getAuthConnector();n&&(Zt.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),We.setPreferredAccountTypes(Object.entries(G.state.chains).reduce((s,[i,o])=>{const a=i,c=tc(a);return c!==void 0&&(s[a]=c),s},{})),await Ge.reconnectExternal(n),Nn.setLoading(!1,G.state.activeChain),zn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=G.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Ge._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Ge._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Ge._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Ge._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Ge._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Ge._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Ge._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Ge._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Ge._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Ge._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Ge._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Ge._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Mt.wcUri=void 0,Mt.wcPairingExpiry=void 0,Mt.wcLinking=void 0,Mt.recentWallet=void 0,Mt.status="disconnected",Vm.resetTransactions(),We.deleteWalletConnectDeepLink()},resetUri(){Mt.wcUri=void 0,Mt.wcPairingExpiry=void 0,rd=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Ge.state;t&&We.setWalletConnectDeepLink(t),e&&We.setAppKitRecent(e),zn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=pt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Mt.wcBasic=t},setUri(t){Mt.wcUri=t,Mt.wcPairingExpiry=nt.getPairingExpiry()},setWcLinking(t){Mt.wcLinking=t},setWcError(t){Mt.wcError=t,Mt.buffering=!1},setRecentWallet(t){Mt.recentWallet=t},setBuffering(t){Mt.buffering=t},setStatus(t){Mt.status=t},setIsSwitchingConnection(t){Mt.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=Ge._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new hg("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(Mt.connections);n.set(e,t),Mt.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=Zt.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&xm.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Ge.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Ke.getConnectorById(t.connectorId),s=t.connectorId===ce.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await Ge.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await Ge.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Ke.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===ce.CONNECTOR_ID.AUTH,a=t.connectorId===ce.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&xm.isSocialProvider(i)){const{address:d}=await xm.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Nn.open({view:"ConnectingFarcaster"})},onConnect(){pt.replace("ProfileWallets")}});c=d}else{const{address:d}=await xm.connectEmail({closeModalOnConnect:r,onOpen(){Nn.open({view:"EmailLogin"})},onConnect(){pt.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await xm.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Nn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){pt.replace("ProfileWallets")}});c=d}else{const d=await Ge.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Ge.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=Zt.getCaipAddress(n);if(o){const{address:c}=eu.parseCaipAddress(o);i=c}const a=sq.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Ge.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Ge.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Ge=No(o3e),Tf=$n({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),yp={state:Tf,subscribe(t){return gi(Tf,()=>t(Tf))},subscribeOpen(t){return Ls(Tf,"open",t)},set(t){Object.assign(Tf,{...Tf,...t})}},a3e={async getTokenList(){var r;const t=G.state.activeCaipNetwork,e=await dt.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=G.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Ge==null?void 0:Ge.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await dt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await dt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Ge.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await wk.getMyTokensWithBalance(t);return Zt.setTokenBalance(e,G.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:rq(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},on=$n({tokenBalances:[],loading:!1}),c3e={state:on,subscribe(t){return gi(on,()=>t(on))},subscribeKey(t,e){return Ls(on,t,e)},setToken(t){t&&(on.token=dg(t))},setTokenAmount(t){on.sendTokenAmount=t},setReceiverAddress(t){on.receiverAddress=t},setReceiverProfileImageUrl(t){on.receiverProfileImageUrl=t},setReceiverProfileName(t){on.receiverProfileName=t},setNetworkBalanceInUsd(t){on.networkBalanceInUSD=t},setLoading(t){on.loading=t},async sendToken(){var t;try{switch(Jt.setLoading(!0),(t=G.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Jt.sendEvmToken();return;case"solana":await Jt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Jt.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=G.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=tc(t);if(!Jt.state.sendTokenAmount||!Jt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Jt.state.token)throw new Error("A token is required");(n=Jt.state.token)!=null&&n.address?(zn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Xr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Jt.state.token.address,amount:Jt.state.sendTokenAmount,network:((r=G.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await Jt.sendERC20Token({receiverAddress:Jt.state.receiverAddress,tokenAddress:Jt.state.token.address,sendTokenAmount:Jt.state.sendTokenAmount,decimals:Jt.state.token.quantity.decimals})):(zn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Xr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Jt.state.token.symbol||"",amount:Jt.state.sendTokenAmount,network:((s=G.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Jt.sendNativeToken({receiverAddress:Jt.state.receiverAddress,sendTokenAmount:Jt.state.sendTokenAmount,decimals:Jt.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;on.loading=!0;const e=(i=G.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=G.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=G.state.activeCaipAddress,s=r?nt.getPlainAddress(r):void 0;if(on.lastRetry&&!nt.isAllowedRetry(on.lastRetry,30*Rs.ONE_SEC_MS))return on.loading=!1,[];try{if(s&&e&&n){const a=await wk.getMyTokensWithBalance();return on.tokenBalances=a,on.lastRetry=void 0,a}}catch(a){on.lastRetry=Date.now(),t==null||t(a),tu.showError("Token Balance Unavailable")}finally{on.loading=!1}return[]},fetchNetworkBalance(){if(on.tokenBalances.length===0)return;const t=a3e.mapBalancesToSwapTokens(on.tokenBalances);if(!t)return;const e=t.find(n=>n.address===rq());e&&(on.networkBalanceInUSD=e?TDe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;pt.pushTransactionStack({});const e=t.receiverAddress,n=Zt.state.address,r=Ge.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Ge.sendTransaction({chainNamespace:ce.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),zn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:tc("eip155")===Xr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=Jt.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=G.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=Ge._getClient())==null||a.updateBalance("eip155"),Jt.resetSend()},async sendERC20Token(t){pt.pushTransactionStack({onSuccess(){pt.replace("Account")}});const e=Ge.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Zt.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=nt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Ge.writeContract({fromAddress:Zt.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:kDe.getERC20Abi(n),chainNamespace:ce.CHAIN.EVM}),Jt.resetSend()}},async sendSolanaToken(){var t;if(!Jt.state.sendTokenAmount||!Jt.state.receiverAddress)throw new Error("An amount and receiver address are required");pt.pushTransactionStack({onSuccess(){pt.replace("Account")}}),await Ge.sendTransaction({chainNamespace:"solana",to:Jt.state.receiverAddress,value:Jt.state.sendTokenAmount}),(t=Ge._getClient())==null||t.updateBalance("solana"),Jt.resetSend()},resetSend(){on.token=void 0,on.sendTokenAmount=void 0,on.receiverAddress=void 0,on.receiverProfileImageUrl=void 0,on.receiverProfileName=void 0,on.loading=!1,on.tokenBalances=[]}},Jt=No(c3e),fI={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},yv={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ae=$n({chains:xDe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),l3e={state:Ae,subscribe(t){return gi(Ae,()=>{t(Ae)})},subscribeKey(t,e){return Ls(Ae,t,e)},subscribeChainProp(t,e,n){let r;return gi(Ae.chains,()=>{var i;const s=n||Ae.activeChain;if(s){const o=(i=Ae.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=We.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=gt.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Ae.noAdapters=!0),Ae.noAdapters||(Ae.activeChain=a==null?void 0:a.namespace,Ae.activeCaipNetwork=i,G.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Ae.activeChain&&yp.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=We.getPreferredAccountTypes()||{},f={...gt.state.defaultAccountTypes,...h};G.state.chains.set(u,{namespace:u,networkState:$n({...yv,caipNetwork:d==null?void 0:d[0]}),accountState:$n({...fI,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),G.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Ae.activeChain===t){const r=Array.from(Ae.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&G.setActiveCaipNetwork(s)}}Ae.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Ae.chains.set(t.namespace,{namespace:t.namespace,networkState:{...yv,caipNetwork:r[0]},accountState:fI,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),G.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Ae.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Ae.chains.set(t.chainNamespace,{...e,caipNetworks:r}),G.setRequestedCaipNetworks(r,t.chainNamespace),Ke.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Ae.chains.get(t);if(n){const o=((r=Ae.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&G.setActiveCaipNetwork(n.caipNetworks[0]),Ae.chains.set(t,{...n,caipNetworks:a}),G.setRequestedCaipNetworks(a||[],t),a.length===0&&Ke.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Ae.chains.get(t);n&&(n.networkState={...n.networkState||yv,...e},Ae.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Ae.chains.get(t);if(r){const s={...r.accountState||fI,...e};Ae.chains.set(t,{...r,accountState:s}),(Ae.chains.size===1||Ae.activeChain===t)&&(e.caipAddress&&(Ae.activeCaipAddress=e.caipAddress),Zt.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Ae.chains.get(t);if(n){const r={...n.networkState||yv,...e};Ae.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){G.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Ae.activeChain=t;const e=t?Ae.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Ae.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Ae.activeCaipNetwork=n,G.setChainNetworkData(t,{caipNetwork:n}),We.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),yp.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Ae.activeChain!==t.chainNamespace&&G.setIsSwitchingNamespace(!0);const e=Ae.chains.get(t.chainNamespace);Ae.activeChain=t.chainNamespace,Ae.activeCaipNetwork=t,G.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Ae.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Ae.activeCaipAddress=void 0,G.setAccountProp("caipAddress",Ae.activeCaipAddress,t.chainNamespace),e&&Zt.replaceState(e.accountState),Jt.resetSend(),yp.set({activeChain:Ae.activeChain,selectedNetworkId:(i=Ae.activeCaipNetwork)==null?void 0:i.caipNetworkId}),We.setActiveCaipNetworkId(t.caipNetworkId),!G.checkIfSupportedNetwork(t.chainNamespace)&&gt.state.enableNetworkSwitch&&!gt.state.allowUnsupportedChain&&!Ge.state.wcBasic&&G.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Ae.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==G.state.activeChain,n=(s=G.getNetworkData(t))==null?void 0:s.caipNetwork,r=G.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await G.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=G.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=G.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Ae.activeCaipNetwork)==null?void 0:a.id)})),s=G.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&Nn.close()}catch{pt.goBack()}zn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Ae.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Ae.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Ae.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Ae.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Ae.activeChain;if(e&&(n=e),!n)return;const r=(s=Ae.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Ae.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Ae.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return nt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Ae.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=G.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){G.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=G.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Ke.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ae.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=G.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Ae.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Ae.activeCaipNetwork},getActiveCaipAddress(){return Ae.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Ae.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=G.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());G.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Ae.activeCaipNetwork,r=G.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Ae.activeChain)return!0;const e=G.getRequestedCaipNetworks(Ae.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){G.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=x_.caipNetworkIdToNumber((r=Ae.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Ae.activeChain;if(!e||!t)return!1;const n=G.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Nn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ae.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Rs.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){G.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=G.getAccountProp("preferredAccountType",e);Ae.activeCaipAddress=void 0,G.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Ke.removeConnectorId(e)},setIsSwitchingNamespace(t){Ae.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Ae.chains.forEach(s=>{ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Ae.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=G.state.chains.get(t))==null?void 0:e.accountState:Zt.state},getNetworkData(t){var n;const e=t||Ae.activeChain;if(e)return(n=G.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=G.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Ke.state.filterByNamespace;return(t?[Ae.chains.get(t)]:Array.from(Ae.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?G.getRequestedCaipNetworks(t):G.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Ae.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Ae.lastConnectedSIWECaipNetwork}},G=No(l3e),u3e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},iq=nt.getBlockchainApiUrl(),Vs=$n({clientId:null,api:new X0({baseUrl:iq,clientId:null}),supportedChains:{http:[],ws:[]}}),dt={state:Vs,async get(t){const{st:e,sv:n}=dt.getSdkProperties(),r=gt.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Vs.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=gt.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Vs.supportedChains.http.length||await dt.getSupportedNetworks()}catch{return!1}return Vs.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await dt.get({path:"v1/supported-chains"});return Vs.supportedChains=t,t}catch{return Vs.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await dt.isNetworkSupported(e))return{avatar:"",name:""};const r=We.getIdentityFromCacheForAddress(t);if(r)return r;const s=await dt.get({path:`/v1/identity/${t}`,params:{sender:G.state.activeCaipAddress?nt.getPlainAddress(G.state.activeCaipAddress):void 0}});return We.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await dt.isNetworkSupported((a=G.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?dt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await dt.isNetworkSupported((o=G.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?dt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await dt.isNetworkSupported((n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await dt.isNetworkSupported((n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Vs.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:gt.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await dt.isNetworkSupported((r=G.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?dt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=dt.getSdkProperties();if(!await dt.isNetworkSupported((s=G.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return dt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await dt.isNetworkSupported((o=G.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Vs.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Rs.CONVERT_SLIPPAGE_TOLERANCE},projectId:gt.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=dt.getSdkProperties();if(!await dt.isNetworkSupported((o=G.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return dt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=dt.getSdkProperties();if(!await dt.isNetworkSupported((l=G.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return tu.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=We.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await dt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return We.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await dt.isNetworkSupported((n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await dt.isNetworkSupported((n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Zt.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await dt.isNetworkSupported((n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await dt.isNetworkSupported((i=G.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Vs.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await dt.isNetworkSupported((a=G.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Vs.api.post({path:"/v1/generators/onrampurl",params:{projectId:gt.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await dt.isNetworkSupported((e=G.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await dt.get({path:"/v1/onramp/options"})}catch{return u3e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await dt.isNetworkSupported((s=G.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Vs.api.post({path:"/v1/onramp/quote",params:{projectId:gt.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await dt.isNetworkSupported((n=G.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await dt.isNetworkSupported((s=G.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Vs.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:gt.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Vs.clientId=t,Vs.api=new X0({baseUrl:iq,clientId:t})}},pI={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Oh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},wk={async getMyTokensWithBalance(t){const e=Zt.state.address,n=G.state.activeCaipNetwork,r=Ke.getConnectorId("eip155")===ce.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=We.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===ce.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await dt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=pI.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Ge.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Ge.walletGetAssets({account:t,chainFilter:[s]});if(!pI.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>pI.createBalance(l,e.caipNetworkId));return We.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},va=$n({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),d3e={state:va,replaceState(t){t&&Object.assign(va,dg(t))},subscribe(t){return G.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return G.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){G.setAccountProp("status",t,e)},getCaipAddress(t){return G.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?nt.getPlainAddress(t):void 0;e===G.state.activeChain&&(G.state.activeCaipAddress=t),G.setAccountProp("caipAddress",t,e),G.setAccountProp("address",n,e)},setBalance(t,e,n){G.setAccountProp("balance",t,n),G.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){G.setAccountProp("profileName",t,e)},setProfileImage(t,e){G.setAccountProp("profileImage",t,e)},setUser(t,e){G.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){G.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){G.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){G.setAccountProp("currentTab",t,G.state.activeChain)},setTokenBalance(t,e){t&&G.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){G.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=G.getAccountProp("addressLabels",n)||new Map;r.set(t,e),G.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=G.getAccountProp("addressLabels",e)||new Map;n.delete(t),G.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){G.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){G.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&G.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){G.setAccountProp("socialWindow",t?dg(t):void 0,e)},setFarcasterUrl(t,e){G.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;va.balanceLoading=!0;const e=(i=G.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=G.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=G.state.activeCaipAddress,s=r?nt.getPlainAddress(r):void 0;if(va.lastRetry&&!nt.isAllowedRetry(va.lastRetry,30*Rs.ONE_SEC_MS))return va.balanceLoading=!1,[];try{if(s&&e&&n){const a=await wk.getMyTokensWithBalance();return Zt.setTokenBalance(a,n),va.lastRetry=void 0,va.balanceLoading=!1,a}}catch(a){va.lastRetry=Date.now(),t==null||t(a),tu.showError("Token Balance Unavailable")}finally{va.balanceLoading=!1}return[]},resetAccount(t){G.resetAccount(t)}},Zt=No(d3e),h3e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=G.state.activeCaipNetwork,r=pt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Zt.getCaipAddress(G.state.activeChain),o=t.chainNamespace!==G.state.activeChain,a=Zt.getCaipAddress(t.chainNamespace),l=Ke.getConnectorId(G.state.activeChain)===ce.CONNECTOR_ID.AUTH,u=ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?pt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?pt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):pt.push("SwitchNetwork",{...r,network:t})}},Gs=$n({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),f3e={state:Gs,subscribe(t){return gi(Gs,()=>t(Gs))},subscribeKey(t,e){return Ls(Gs,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=G.state.activeChain,r=e&&e!==n,s=(i=G.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(Ge.state.wcBasic?ct.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ct.prefetch(),Ke.setFilterByNamespace(t==null?void 0:t.namespace),Nn.setLoading(!0,e),e&&r){const a=((o=G.getNetworkData(e))==null?void 0:o.caipNetwork)||G.getRequestedCaipNetworks(e)[0];a&&h3e.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=G.state.noAdapters;gt.state.manualWCControl||a&&!s?nt.isMobile()?pt.reset("AllWallets"):pt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?pt.reset(t.view,t.data):s?pt.reset("Account"):pt.reset("Connect")}Gs.open=!0,yp.set({open:!0}),zn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=gt.state.enableEmbedded,e=!!G.state.activeCaipAddress;Gs.open&&zn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Gs.open=!1,pt.reset("Connect"),Nn.clearLoading(),t?e?pt.replace("Account"):pt.push("Connect"):yp.set({open:!1}),Ge.resetUri()},setLoading(t,e){e&&Gs.loadingNamespaceMap.set(e,t),Gs.loading=t,yp.set({loading:t})},clearLoading(){Gs.loadingNamespaceMap.clear(),Gs.loading=!1},shake(){Gs.shake||(Gs.shake=!0,setTimeout(()=>{Gs.shake=!1},500))}},Nn=No(f3e),lU=2147483648,p3e={convertEVMChainIdToCoinType(t){if(t>=lU)throw new Error("Invalid chainId");return(lU|t)>>>0}},Xi=$n({suggestions:[],loading:!1}),g3e={state:Xi,subscribe(t){return gi(Xi,()=>t(Xi))},subscribeKey(t,e){return Ls(Xi,t,e)},async resolveName(t){var e,n;try{return await dt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await dt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Xi.loading=!0,Xi.suggestions=[];const e=await dt.getEnsNameSuggestions(t);return Xi.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Xi.suggestions}catch(e){const n=tE.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Xi.loading=!1}},async getNamesForAddress(t){try{if(!G.state.activeCaipNetwork)return[];const n=We.getEnsFromCacheForAddress(t);if(n)return n;const r=await dt.reverseLookupEnsName({address:t});return We.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=tE.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=G.state.activeCaipNetwork,n=Zt.state.address,r=Ke.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");Xi.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});pt.pushTransactionStack({onCancel(){pt.replace("RegisterAccountName")}});const i=await Ge.signMessage(s);Xi.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=p3e.convertEVMChainIdToCoinType(Number(o));await dt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Zt.setProfileName(t,e.chainNamespace),pt.replace("RegisterAccountNameSuccess")}catch(s){const i=tE.parseEnsApiError(s,`Error registering name ${t}`);throw pt.replace("RegisterAccountName"),new Error(i)}finally{Xi.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},tE=No(g3e);let sd=null;const Pl={getSIWX(){return gt.state.siwx},async initializeIfEnabled(){var i;const t=gt.state.siwx,e=G.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(G.checkIfSupportedNetwork(n))try{if(sd&&await sd,(await t.getSessions(`${n}:${r}`,s)).length)return;await Nn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),zn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Ge._getClient())==null?void 0:i.disconnect().catch(console.error)),pt.reset("Connect"),tu.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=gt.state.siwx,e=nt.getPlainAddress(G.getActiveCaipAddress()),n=G.getActiveCaipNetwork(),r=Ge._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Ke.getConnectorId(n.chainNamespace)===ce.CONNECTOR_ID.AUTH&&pt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),G.setLastConnectedSIWECaipNetwork(n),Nn.close(),zn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Nn.state.open||pt.state.view==="ApproveTransaction")&&await Nn.open({view:"SIWXSignMessage"}),tu.showError("Error signing message"),zn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=G.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,nt.getPlainAddress(G.getActiveCaipAddress())||""));s&&s.length>0?await G.switchActiveNetwork(r):await Ge.disconnect()}else await Ge.disconnect()}else Nn.close();Nn.close(),zn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=G.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,nt.getPlainAddress(G.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=gt.state.siwx,e=nt.getPlainAddress(G.getActiveCaipAddress()),n=G.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=pt.state.view==="ApproveTransaction",r=pt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Pl.getSIWX();if(!i||!s.includes(ce.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=G.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Pl.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(sd)return sd;const r=Pl.getSIWX();return r?(sd=r.addSession({data:t,message:e,signature:n}).finally(()=>{sd=null}),sd):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Pl.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=G.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(tu.showLoading("Authenticating...",{autoClose:!1}),Zt.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),zn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Pl.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),zn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Pl.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{tu.hide()}}return!0},getSIWXEventProperties(){var e;const t=G.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=G.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:tc(t)===Xr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Si={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:ce.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},xi={ConnectorExplorerIds:{[ce.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ce.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ce.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ce.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ce.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Si.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Si.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Si.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Si.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Si.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Si.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Si.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Si.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Si.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Si.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Si.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ce.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ce.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ce.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ce.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ce.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ce.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ce.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ce.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ce.CONNECTOR_ID.COINBASE]:"Coinbase",[ce.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ce.CONNECTOR_ID.LEDGER]:"Ledger",[ce.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ce.CONNECTOR_ID.INJECTED]:"INJECTED",[ce.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ce.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ce.CONNECTOR_ID.AUTH]:"AUTH",[Si.CONNECTOR_TYPE_AUTH]:"AUTH"}},si={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Si.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=G.state.activeChain;return ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Ke.getConnectorId(e)===ce.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},m3e=new AbortController,vl={EmbeddedWalletAbortController:m3e,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},y3e="rpc.walletconnect.org";function uU(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const gI=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Gm={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===y3e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ce.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ce.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return gI.includes(e)?uU(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:xi.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Gm.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Yl(a.url,a.config))}),gI.includes(t.caipNetworkId)&&r.push(Yl(uU(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Yl(a))}),e_(r)},extendWagmiTransports(t,e,n){if(gI.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return e_([n,Yl(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ce.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=We.getActiveCaipNetworkId(),n=G.getAllRequestedCaipNetworks(),r=Array.from(((c=G.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},dU={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Vr={set(t,e){Da.isClient&&localStorage.setItem(`${Fe.STORAGE_KEY}${t}`,e)},get(t){return Da.isClient?localStorage.getItem(`${Fe.STORAGE_KEY}${t}`):null},delete(t,e){Da.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Fe.STORAGE_KEY}${t}`))}},wv=30*1e3,Da={checkIfAllowedToTriggerEmail(){const t=Vr.get(Fe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<wv){const n=Math.ceil((wv-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Vr.get(Fe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<wv)return Math.ceil((wv-e)/1e3)}return 0},checkIfRequestExists(t){return Xr.NOT_SAFE_RPC_METHODS.includes(t.method)||Xr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(dU.transactionHash))||(t==null?void 0:t.match(dU.signedMessage)))?Fe.RPC_RESPONSE_TYPE_TX:Fe.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Xr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Kn=v.object({message:v.string()});function Re(t){return v.literal(Fe[t])}const b1=v.object({serializedMessage:v.string().optional(),accountAddress:v.string(),chainId:v.string(),notBefore:v.string().optional(),domain:v.string(),uri:v.string(),version:v.string(),nonce:v.string(),statement:v.string().optional(),resources:v.array(v.string()).optional(),requestId:v.string().optional(),issuedAt:v.string().optional(),expirationTime:v.string().optional()});v.object({accessList:v.array(v.string()),blockHash:v.string().nullable(),blockNumber:v.string().nullable(),chainId:v.string().or(v.number()),from:v.string(),gas:v.string(),hash:v.string(),input:v.string().nullable(),maxFeePerGas:v.string(),maxPriorityFeePerGas:v.string(),nonce:v.string(),r:v.string(),s:v.string(),to:v.string(),transactionIndex:v.string().nullable(),type:v.string(),v:v.string(),value:v.string()});const w3e=v.object({chainId:v.string().or(v.number()),rpcUrl:v.optional(v.string())}),b3e=v.object({email:v.string().email()}),v3e=v.object({otp:v.string()}),E3e=v.object({uri:v.string(),preferredAccountType:v.optional(v.string()),chainId:v.optional(v.string().or(v.number())),siwxMessage:v.optional(b1),rpcUrl:v.optional(v.string())}),_3e=v.object({chainId:v.optional(v.string().or(v.number())),preferredAccountType:v.optional(v.string()),socialUri:v.optional(v.string()),siwxMessage:v.optional(b1),rpcUrl:v.optional(v.string())}),C3e=v.object({provider:v.enum(["google","github","apple","facebook","x","discord"])}),S3e=v.object({email:v.string().email()}),A3e=v.object({otp:v.string()}),I3e=v.object({otp:v.string()}),N3e=v.object({themeMode:v.optional(v.enum(["light","dark"])),themeVariables:v.optional(v.record(v.string(),v.string().or(v.number()))),w3mThemeVariables:v.optional(v.record(v.string(),v.string()))}),x3e=v.object({metadata:v.object({name:v.string(),description:v.string(),url:v.string(),icons:v.array(v.string())}).optional(),sdkVersion:v.string().optional(),sdkType:v.string().optional(),projectId:v.string()}),T3e=v.object({type:v.string()}),R3e=v.object({action:v.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),P3e=v.object({url:v.string()}),O3e=v.object({userName:v.string()}),k3e=v.object({email:v.string().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),accounts:v.array(v.object({address:v.string(),type:v.enum([Xr.ACCOUNT_TYPES.EOA,Xr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:v.string().optional().nullable(),preferredAccountType:v.optional(v.string()),signature:v.string().optional(),message:v.string().optional(),siwxMessage:v.optional(b1)}),D3e=v.object({action:v.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),$3e=v.object({email:v.string().email().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),smartAccountDeployed:v.optional(v.boolean()),accounts:v.array(v.object({address:v.string(),type:v.enum([Xr.ACCOUNT_TYPES.EOA,Xr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:v.optional(v.string()),signature:v.string().optional(),message:v.string().optional(),siwxMessage:v.optional(b1)}),M3e=v.object({uri:v.string()}),L3e=v.object({isConnected:v.boolean()}),U3e=v.object({chainId:v.string().or(v.number())}),B3e=v.object({chainId:v.string().or(v.number())}),j3e=v.object({newEmail:v.string().email()}),F3e=v.object({smartAccountEnabledNetworks:v.array(v.number())});v.object({address:v.string(),isDeployed:v.boolean()});const W3e=v.object({version:v.string().optional()}),z3e=v.object({type:v.string(),address:v.string()}),H3e=v.any(),q3e=v.object({method:v.literal("eth_accounts")}),V3e=v.object({method:v.literal("eth_blockNumber")}),G3e=v.object({method:v.literal("eth_call"),params:v.array(v.any())}),K3e=v.object({method:v.literal("eth_chainId")}),Y3e=v.object({method:v.literal("eth_estimateGas"),params:v.array(v.any())}),Q3e=v.object({method:v.literal("eth_feeHistory"),params:v.array(v.any())}),Z3e=v.object({method:v.literal("eth_gasPrice")}),X3e=v.object({method:v.literal("eth_getAccount"),params:v.array(v.any())}),J3e=v.object({method:v.literal("eth_getBalance"),params:v.array(v.any())}),e$e=v.object({method:v.literal("eth_getBlockByHash"),params:v.array(v.any())}),t$e=v.object({method:v.literal("eth_getBlockByNumber"),params:v.array(v.any())}),n$e=v.object({method:v.literal("eth_getBlockReceipts"),params:v.array(v.any())}),r$e=v.object({method:v.literal("eth_getBlockTransactionCountByHash"),params:v.array(v.any())}),s$e=v.object({method:v.literal("eth_getBlockTransactionCountByNumber"),params:v.array(v.any())}),i$e=v.object({method:v.literal("eth_getCode"),params:v.array(v.any())}),o$e=v.object({method:v.literal("eth_getFilterChanges"),params:v.array(v.any())}),a$e=v.object({method:v.literal("eth_getFilterLogs"),params:v.array(v.any())}),c$e=v.object({method:v.literal("eth_getLogs"),params:v.array(v.any())}),l$e=v.object({method:v.literal("eth_getProof"),params:v.array(v.any())}),u$e=v.object({method:v.literal("eth_getStorageAt"),params:v.array(v.any())}),d$e=v.object({method:v.literal("eth_getTransactionByBlockHashAndIndex"),params:v.array(v.any())}),h$e=v.object({method:v.literal("eth_getTransactionByBlockNumberAndIndex"),params:v.array(v.any())}),f$e=v.object({method:v.literal("eth_getTransactionByHash"),params:v.array(v.any())}),p$e=v.object({method:v.literal("eth_getTransactionCount"),params:v.array(v.any())}),g$e=v.object({method:v.literal("eth_getTransactionReceipt"),params:v.array(v.any())}),m$e=v.object({method:v.literal("eth_getUncleCountByBlockHash"),params:v.array(v.any())}),y$e=v.object({method:v.literal("eth_getUncleCountByBlockNumber"),params:v.array(v.any())}),w$e=v.object({method:v.literal("eth_maxPriorityFeePerGas")}),b$e=v.object({method:v.literal("eth_newBlockFilter")}),v$e=v.object({method:v.literal("eth_newFilter"),params:v.array(v.any())}),E$e=v.object({method:v.literal("eth_newPendingTransactionFilter")}),_$e=v.object({method:v.literal("eth_sendRawTransaction"),params:v.array(v.any())}),C$e=v.object({method:v.literal("eth_syncing"),params:v.array(v.any())}),S$e=v.object({method:v.literal("eth_uninstallFilter"),params:v.array(v.any())}),hU=v.object({method:v.literal("personal_sign"),params:v.array(v.any())}),A$e=v.object({method:v.literal("eth_signTypedData_v4"),params:v.array(v.any())}),I$e=v.object({method:v.literal("eth_sendTransaction"),params:v.array(v.any())}),N$e=v.object({method:v.literal("solana_signMessage"),params:v.object({message:v.string(),pubkey:v.string()})}),x$e=v.object({method:v.literal("solana_signTransaction"),params:v.object({transaction:v.string()})}),T$e=v.object({method:v.literal("solana_signAllTransactions"),params:v.object({transactions:v.array(v.string())})}),R$e=v.object({method:v.literal("solana_signAndSendTransaction"),params:v.object({transaction:v.string(),options:v.object({skipPreflight:v.boolean().optional(),preflightCommitment:v.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:v.number().optional(),minContextSlot:v.number().optional()}).optional()})}),P$e=v.object({method:v.literal("wallet_sendCalls"),params:v.array(v.object({chainId:v.string().or(v.number()).optional(),from:v.string().optional(),version:v.string().optional(),capabilities:v.any().optional(),calls:v.array(v.object({to:v.string().startsWith("0x"),data:v.string().startsWith("0x").optional(),value:v.string().optional()}))}))}),O$e=v.object({method:v.literal("wallet_getCallsStatus"),params:v.array(v.string())}),k$e=v.object({method:v.literal("wallet_getCapabilities"),params:v.array(v.string().or(v.number()).optional()).optional()}),D$e=v.object({method:v.literal("wallet_grantPermissions"),params:v.array(v.any())}),$$e=v.object({method:v.literal("wallet_revokePermissions"),params:v.any()}),M$e=v.object({method:v.literal("wallet_getAssets"),params:v.any()}),fU=v.object({token:v.string()}),Pe=v.object({id:v.string().optional()}),Tm={appEvent:Pe.extend({type:Re("APP_SWITCH_NETWORK"),payload:w3e}).or(Pe.extend({type:Re("APP_CONNECT_EMAIL"),payload:b3e})).or(Pe.extend({type:Re("APP_CONNECT_DEVICE")})).or(Pe.extend({type:Re("APP_CONNECT_OTP"),payload:v3e})).or(Pe.extend({type:Re("APP_CONNECT_SOCIAL"),payload:E3e})).or(Pe.extend({type:Re("APP_GET_FARCASTER_URI")})).or(Pe.extend({type:Re("APP_CONNECT_FARCASTER")})).or(Pe.extend({type:Re("APP_GET_USER"),payload:v.optional(_3e)})).or(Pe.extend({type:Re("APP_GET_SOCIAL_REDIRECT_URI"),payload:C3e})).or(Pe.extend({type:Re("APP_SIGN_OUT")})).or(Pe.extend({type:Re("APP_IS_CONNECTED"),payload:v.optional(fU)})).or(Pe.extend({type:Re("APP_GET_CHAIN_ID")})).or(Pe.extend({type:Re("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Pe.extend({type:Re("APP_INIT_SMART_ACCOUNT")})).or(Pe.extend({type:Re("APP_SET_PREFERRED_ACCOUNT"),payload:T3e})).or(Pe.extend({type:Re("APP_RPC_REQUEST"),payload:hU.or(M$e).or(q3e).or(V3e).or(G3e).or(K3e).or(Y3e).or(Q3e).or(Z3e).or(X3e).or(J3e).or(e$e).or(t$e).or(n$e).or(r$e).or(s$e).or(i$e).or(o$e).or(a$e).or(c$e).or(l$e).or(u$e).or(d$e).or(h$e).or(f$e).or(p$e).or(g$e).or(m$e).or(y$e).or(w$e).or(b$e).or(v$e).or(E$e).or(_$e).or(C$e).or(S$e).or(hU).or(A$e).or(I$e).or(N$e).or(x$e).or(T$e).or(R$e).or(O$e).or(P$e).or(k$e).or(D$e).or($$e).and(v.object({chainId:v.string().or(v.number()).optional(),chainNamespace:v.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:v.string().optional()}))})).or(Pe.extend({type:Re("APP_UPDATE_EMAIL"),payload:S3e})).or(Pe.extend({type:Re("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:A3e})).or(Pe.extend({type:Re("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:I3e})).or(Pe.extend({type:Re("APP_SYNC_THEME"),payload:N3e})).or(Pe.extend({type:Re("APP_SYNC_DAPP_DATA"),payload:x3e})).or(Pe.extend({type:Re("APP_RELOAD")})).or(Pe.extend({type:Re("APP_RPC_ABORT")})),frameEvent:Pe.extend({type:Re("FRAME_SWITCH_NETWORK_ERROR"),payload:Kn}).or(Pe.extend({type:Re("FRAME_SWITCH_NETWORK_SUCCESS"),payload:B3e})).or(Pe.extend({type:Re("FRAME_CONNECT_EMAIL_SUCCESS"),payload:R3e})).or(Pe.extend({type:Re("FRAME_CONNECT_EMAIL_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:P3e})).or(Pe.extend({type:Re("FRAME_GET_FARCASTER_URI_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:O3e})).or(Pe.extend({type:Re("FRAME_CONNECT_FARCASTER_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_CONNECT_OTP_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_CONNECT_OTP_SUCCESS")})).or(Pe.extend({type:Re("FRAME_CONNECT_DEVICE_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Pe.extend({type:Re("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:k3e})).or(Pe.extend({type:Re("FRAME_CONNECT_SOCIAL_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_GET_USER_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_GET_USER_SUCCESS"),payload:$3e})).or(Pe.extend({type:Re("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:M3e})).or(Pe.extend({type:Re("FRAME_SIGN_OUT_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_SIGN_OUT_SUCCESS")})).or(Pe.extend({type:Re("FRAME_IS_CONNECTED_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_IS_CONNECTED_SUCCESS"),payload:L3e})).or(Pe.extend({type:Re("FRAME_GET_CHAIN_ID_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_GET_CHAIN_ID_SUCCESS"),payload:U3e})).or(Pe.extend({type:Re("FRAME_RPC_REQUEST_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_RPC_REQUEST_SUCCESS"),payload:H3e})).or(Pe.extend({type:Re("FRAME_SESSION_UPDATE"),payload:fU})).or(Pe.extend({type:Re("FRAME_UPDATE_EMAIL_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_UPDATE_EMAIL_SUCCESS"),payload:D3e})).or(Pe.extend({type:Re("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Pe.extend({type:Re("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:j3e})).or(Pe.extend({type:Re("FRAME_SYNC_THEME_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_SYNC_THEME_SUCCESS")})).or(Pe.extend({type:Re("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Pe.extend({type:Re("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:F3e})).or(Pe.extend({type:Re("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:z3e})).or(Pe.extend({type:Re("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_READY"),payload:W3e})).or(Pe.extend({type:Re("FRAME_RELOAD_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_RELOAD_SUCCESS")}))};function mI(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function L$e({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=ce.BLOCKCHAIN_API_RPC_URL}){const i=new URL(FDe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class U$e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=ce.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!mI(Fe.FRAME_EVENT_KEY,u))return;const d=Tm.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}Da.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{Da.isClient&&window.addEventListener("message",({data:a})=>{if(!mI(Fe.FRAME_EVENT_KEY,a))return;const c=Tm.frameEvent.parse(a);o(c)})},onAppEvent:o=>{Da.isClient&&window.addEventListener("message",({data:a})=>{if(!mI(Fe.APP_EVENT_KEY,a))return;const c=Tm.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(Da.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");Tm.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Da.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Tm.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Da.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=L$e({projectId:e,chainId:r,version:zDe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class B$e{constructor(e){var i;const n=zh({level:WDe}),{logger:r,chunkLoggerController:s}=YC({opts:n});this.logger=es(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class j$e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new B$e(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new U$e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Vr.get(Fe.EMAIL_LOGIN_USED_KEY)}getEmail(){return Vr.get(Fe.EMAIL)}getUsername(){return Vr.get(Fe.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Fe.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Da.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Fe.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Fe.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Fe.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Fe.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Fe.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Fe.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Fe.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Fe.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Fe.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Fe.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Fe.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Fe.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Fe.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Fe.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Fe.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Fe.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Fe.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Fe.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Fe.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Fe.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Xr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Fe.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Fe.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Fe.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Xr.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Xr.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Fe.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Fe.APP_SYNC_DAPP_DATA,Fe.APP_SYNC_THEME,Fe.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Fe.APP_CONNECT_EMAIL,Fe.APP_CONNECT_DEVICE,Fe.APP_CONNECT_OTP,Fe.APP_CONNECT_SOCIAL,Fe.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,E,_;w.id===u&&((E=y==null?void 0:(b=y.logger).info)==null||E.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((_=w.payload)==null?void 0:_.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Vr.set(Fe.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Vr.set(Fe.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Vr.set(Fe.EMAIL,e),Vr.set(Fe.EMAIL_LOGIN_USED_KEY,"true"),Vr.delete(Fe.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Vr.delete(Fe.EMAIL_LOGIN_USED_KEY),Vr.delete(Fe.EMAIL),Vr.delete(Fe.LAST_USED_CHAIN_KEY),Vr.delete(Fe.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Vr.set(Fe.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Vr.get(Fe.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Vr.set(Fe.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=eu.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class wp{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return wp.instance||(wp.instance=new j$e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),wp.instance}}const F$e={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},pU={filterOutDuplicatesByRDNS(t){const e=gt.state.enableEIP6963?Ke.state.connectors:[],n=We.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&nt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Ke.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=We.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Ke.state,{featuredWalletIds:n}=gt.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=gt.state.features)==null?void 0:c.connectMethodsOrder),r=e||Ke.state.connectors;if(n)return n;const{injected:s,announced:i}=nE.getConnectorsByType(r,ct.state.recommended,ct.state.featured),o=s.filter(nE.showConnector),a=i.filter(nE.showConnector);return o.length||a.length?["wallet","email","social"]:F$e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ct.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&ct.state.excludedWallets.some(r=>si.isLowerCaseMatch(r.name,t.name));return e||n}},nE={getConnectorsByType(t,e,n){const{customWallets:r}=gt.state,s=We.getRecentWallets(),i=pU.filterOutDuplicateWallets(e),o=pU.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&ct.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&ct.state.excludedWallets.some(i=>si.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!nt.isMobile()||nt.isMobile()&&!e&&!Ge.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(G.state.chains.values()).some(n=>Ke.getConnectorId(n.namespace)===ce.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=gt.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:gt.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),g=h.filter(({type:w})=>!p.some(({type:b})=>b===w));return Array.from(new Set([...p,...g].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!nt.isMobile())return{accounts:[],chainId:void 0};if(t.id===ce.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};jc`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;jc`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;jc`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const rE={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([rE.getAddresses(t),rE.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:rE.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[xi.NetworkImageIds[e.id]]}]})}},Rf={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function J0(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const gU=J0({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),mU=J0({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});J0({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});J0({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});J0({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const W$e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Qd={getMethodsByChainNamespace(t){return W$e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case gU.caipNetworkId:u.chains.push(gU.deprecatedCaipNetworkId);break;case mU.caipNetworkId:u.chains.push(mU.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await tE.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Qd.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Qd.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>nt.isCaipAddress(d)).map(d=>eu.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>eu.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class z$e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case ce.CHAIN.EVM:await this.syncEVMConnections(e);break;case ce.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case ce.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===ce.CONNECTOR_ID.WALLET_CONNECT){const c=Qd.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await nE.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==ce.CONNECTOR_ID.AUTH&&a.id!==ce.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===ce.CONNECTOR_ID.WALLET_CONNECT){const c=Qd.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,w,y;if(a.id===ce.CONNECTOR_ID.WALLET_CONNECT){const b=Qd.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(E=>({address:E.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>nt.createAccount(ce.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:ce.CHAIN.BITCOIN,publicKey:((h=u[Rf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[Rf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[Rf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:ce.CHAIN.BITCOIN,publicKey:((g=u[Rf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((w=u[Rf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((y=u[Rf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>si.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>si.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>si.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>si.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>si.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class oq{constructor({provider:e,namespace:n}){this.id=ce.CONNECTOR_ID.WALLET_CONNECT,this.name=xi.ConnectorNamesMap[ce.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=xi.ConnectorImageIds[ce.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=G.getCaipNetworks.bind(G),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=gt.state.universalProviderConfigOverride,s=Qd.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Pl.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:H$e})}}const H$e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],q$e=[ce.CONNECTOR_ID.AUTH,ce.CONNECTOR_ID.WALLET_CONNECT];class V$e{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>G.getCaipNetworks(n),this.getConnectorId=n=>Ke.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new z$e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:ce.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:ce.CONNECTOR_ID.AUTH,type:"AUTH",name:ce.CONNECTOR_NAMES.AUTH,provider:e,imageId:xi.ConnectorImageIds[ce.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!si.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){Zt.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=tc(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof oq);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=nt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=nt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=nt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&si.isLowerCaseMatch(this.getConnectorId(ce.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=nt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),si.isLowerCaseMatch(this.getConnectorId(ce.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?rE.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),si.isLowerCaseMatch(this.getConnectorId(ce.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(q$e.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function G$e(t){let e=[],n,r;function s(a){return x_.parseEvmChainId(a)||1}function i(){var a;return n||(n=wp.getInstance({projectId:t.options.projectId,chainId:(a=G.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?dd.open(vl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?dd.open(vl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&dd.open(vl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:vl.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>G.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const w=x_.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=w||y,!l)throw new Error("ChainId not found in provider")}const u=tc("eip155"),{address:d,chainId:h,accounts:f}=await Pl.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:ce.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:ce.CONNECTOR_ID.AUTH,name:ce.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:ce.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=wp.getInstance({projectId:t.options.projectId,chainId:(c=G.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:vl.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?dd.open(vl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?dd.open(vl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&dd.open(vl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>G.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=G.state.activeChain===ce.CHAIN.EVM;if(ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Ke.getConnectorId(h)===ce.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Ya(new Error("chain not found on connector."));const d=await this.getProvider(),h=tc("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Ya(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Oc)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}bk.type="walletConnect";function bk(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:bk.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=G.getCaipNetworks(),w=await this.getProvider();if(!w)throw new xl;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=gt.state.universalProviderConfigOverride;if(!w.session||y){const S=Qd.createNamespaces(g,b);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(D=>Number(D.id)))}const E=await this.getAccounts(),_=await this.getChainId(),C=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,I=C==null?void 0:C.some(S=>Number(S.split(":")[1])===_);let A=1;I?A=_:C!=null&&C[0]&&(A=Number(C[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const x=b==null?void 0:b.defaultChain;return w.setDefaultChain(x??`eip155:${A}`),{accounts:E,chainId:A}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new pr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,y,b;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(b=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[ce.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(E=>E.split(":")[2]))??[],p=new Set;return f.filter(E=>{const _=E==null?void 0:E.toLowerCase();return p.has(_)?!1:(p.add(_),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=We.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=We.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],b=y==null?void 0:y.find(E=>E.id===w);b&&b.chainNamespace===ce.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,y,b;const d=(g=e.getCaipNetwork(ce.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[ce.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=G.getCaipNetworks().find(E=>E.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,y,b;const f=await this.getProvider();if(!f)throw new xl;const p=G.getCaipNetworks().find(E=>E.id===h);if(!p)throw new Ya(new vw);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:He(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const E=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...E,h]),{...p,id:p.id}}catch(E){const _=E;if(/(?:user rejected)/iu.test(_.message))throw new pr(_);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const I=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],A={blockExplorerUrls:C,chainId:He(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:I};await f.request({method:"wallet_addEthereumChain",params:[A]});const x=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...x,h]),{...p,id:p.id}}catch(C){throw new pr(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Oc(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(G.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[ce.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Rm=$n({pendingTransactions:0}),yU={state:Rm,subscribeKey(t,e){return Ls(Rm,t,e)},increase(t){Rm[t]+=1},decrease(t){Rm[t]-=1},reset(t){Rm[t]=0}};function K$e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function Y$e(t){if(nt.isSafeApp()){const{safe:e}=await hs(async()=>{const{safe:n}=await import("./index-6kXGFPTj.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function Q$e(t){try{const{coinbaseWallet:e}=await hs(async()=>{const{coinbaseWallet:n}=await import("./index-6kXGFPTj.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const Z$e={enable:!1,pollingInterval:3e4};class X$e extends V$e{constructor(e){const n=Gm.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=ce.CHAIN.EVM,this.adapterType=ce.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Z$e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===ce.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>nt.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=hp(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>nt.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=hp(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===ce.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Gm.getCaipNetworkId(s);i?n[s.id]=Gm.extendWagmiTransports(s,e.projectId,i):n[s.id]=Gm.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=Eoe({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=toe(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),yU.increase("pendingTransactions")}});const e=yU.subscribeKey("pendingTransactions",n=>{var r;n>=ce.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){s9(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),i9(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===ce.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:We.getConnectedSocialProvider(),username:We.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await Q$e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await Y$e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(bk(e,n)),e.enableEIP6963!==!1&&r.push(SC({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(G$e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:xi.ConnectorNamesMap[r.id]??r.name,imageId:xi.ConnectorImageIds[r.id],type:xi.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===ce.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await Xie(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=hp(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Qie(this.wagmiConfig,s);const i=await Zie(this.wagmiConfig,s);return await a9(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(x_.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await c9(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await zie(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return _se(e.value,e.decimals)}formatUnits(e){return Oh(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===ce.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===ce.CONNECTOR_ID.AUTH||e.id===ce.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:xi.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:xi.ConnectorNamesMap[e.id]??e.name,imageId:xi.ConnectorImageIds[e.id],type:xi.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===ce.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){o9(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=jo(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(nt.isSafeApp()&&n===ce.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await Mv(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await Mv(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await A3(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===ce.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((b,E)=>si.isLowerCaseMatch(b,r)?-1:si.isLowerCaseMatch(E,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await Mv(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await hx(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=We.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await Vie(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});We.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=jo(this.wagmiConfig).find(i=>si.isLowerCaseMatch(i.connector.id,e.id));return await ux(this.wagmiConfig,{connector:n}),gt.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=jo(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await ux(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await A3(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=jo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=K$e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=jo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=jo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=jo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:ce.CONNECTOR_ID.AUTH,type:"AUTH",name:ce.CONNECTOR_NAMES.AUTH,provider:e,imageId:xi.ConnectorImageIds[ce.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=jo(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(G.state.activeChain==="eip155")return;hx(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new oq({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const aq={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},cq="7c65f27254d6ddd24cf7eedf2685c4fb",J$e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},lq=new X$e({networks:[jH,aq],projectId:cq,ssr:!1});Zke({adapters:[lq],networks:[jH,aq],projectId:cq,metadata:J$e,features:{analytics:!1}});const uq=()=>{if(!vE)throw new Error("[FIREBASE] Database not initialized");return vE},Ih=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,R_=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;const n=new Date().toISOString(),r=uq(),s=eo(r,`leaderboard/${t}`),i=await fd(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await Jm(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Ih(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},e5e=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Ih(e),redPlayer:Ih(n)}),await R_(e,t==="blue"?"win":t==="red"?"loss":"draw"),await R_(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},dq=async(t=20)=>{try{const e=uq(),n=eo(e,"leaderboard"),r=await fd(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Ea=()=>{if(!vE)throw new Error("[FIREBASE] Database not initialized");return vE},Ks={async getGame(t){try{const e=Ea(),n=eo(e,`chess_games/${t}`),r=await fd(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=Ea(),r=eo(n,`chess_games/${t}`);await Jm(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=Ea(),r=eo(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=_2(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=Ea(),r=eo(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await Jm(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await fd(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=Ea(),e=eo(t,"chess_games"),n=await fd(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=Ea(),e=eo(t,"chess_games"),n=await fd(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player;return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=Ea(),n=eo(e,`chess_games/${t}`);await SQ(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=Ea(),n=eo(e,`leaderboard/${t.username}`);await Jm(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=Ea(),e=eo(t,"leaderboard"),n=await fd(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=Ea(),n=eo(e,"leaderboard");return _2(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},Pf=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"}],El="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",tr={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},yI={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},_l=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],t5e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function n5e(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}const hq=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=P0(),[i,o]=O.useState(""),[a,c]=O.useState(""),[l,u]=O.useState(!1),[d,h]=O.useState(!1),[f,p]=O.useState(!1),[g,w]=O.useState(!1),{writeContract:y,isPending:b,data:E}=LS(),{writeContract:_,isPending:C,data:I}=LS(),{writeContract:A,isPending:x,data:S}=LS(),D=Wae(),{isLoading:P}=MS({hash:E}),{isLoading:U}=MS({hash:I}),{isLoading:q}=MS({hash:S}),{data:j}=B3({address:El,abi:Pf,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:T}=B3({address:El,abi:Pf,functionName:"games",args:j?[j]:void 0,query:{enabled:!!j&&j!=="0x000000000000"}}),[N,$]=O.useState(""),R=async()=>{if(!r||!N||!le){console.error("[CLAIM] Missing required data for claiming winnings");return}try{p(!0),console.log("[CLAIM] Claiming winnings for game:",N,"Player:",le,"Address:",r);const M=await Ks.getGame(N);if(!M){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",M);let V=null;if(M.winner&&(M.blue_player||M.red_player)&&(V=M.winner==="blue"?M.blue_player:M.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:M.winner,winnerAddress:V})),!V&&T)if(M.winner&&(M.winner==="blue"||M.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let Q,ie,Ve,Ce,Ye,Lt;if(Array.isArray(T))[Q,ie,Ve,Ce,Ye,Lt]=T;else{console.error("[CLAIM] Unexpected contract data format:",T),alert("Failed to verify winner. Please try again.");return}V=M.winner==="blue"?Q:ie,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:M.winner,winnerAddress:V,player1:Q,player2:ie})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",T);let Q,ie,Ve,Ce,Ye,Lt;if(Array.isArray(T))[Q,ie,Ve,Ce,Ye,Lt]=T;else{console.error("[CLAIM] Unexpected contract data format:",T),alert("Failed to verify winner. Please try again.");return}const Pt=String(Ce);if(Pt.startsWith("0x"))V=Pt;else if(Pt==="blue"||Pt==="red")V=Pt==="blue"?Q:ie;else if(Pt==="1"||Pt==="2")V=Pt==="1"?Q:ie;else{console.error("[CLAIM] Unknown winner format:",Ce,"as string:",Pt),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:Ce,winnerAddress:V,player1:Q,player2:ie,winnerType:typeof Ce,winnerValue:Ce,address:r,addressType:typeof r})}if(!V){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:V,address:r,playerColor:le,winnerAddressType:typeof V,addressType:typeof r,addressesMatch:V===r,winnerAddressLength:V==null?void 0:V.length,addressLength:r==null?void 0:r.length}),V!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:V,address:r,playerColor:le}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM]  Winner verification passed! Proceeding with contract call...");let F=M.invite_code;if(!F&&T){console.log("[CLAIM] Using invite code from contract data");let Q,ie,Ve,Ce,Ye,Lt;if(Array.isArray(T))[Q,ie,Ve,Ce,Ye,Lt]=T,F=Ye;else{console.error("[CLAIM] Unexpected contract data format for invite code:",T),alert("Failed to get invite code. Please try again.");return}}if(!F||typeof F!="string"||!F.startsWith("0x")||F.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",F),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:F,winner:V,functionName:"endGame",inviteCodeSource:M.invite_code?"Firebase":"Contract"}),A({address:El,abi:Pf,functionName:"endGame",args:[F,V]}),console.log("[CLAIM] Contract call initiated successfully"),x?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:x,endGameHash:S})}catch(M){console.error("[CLAIM] Error claiming winnings:",M),alert("Failed to claim winnings. Please try again.")}finally{p(!1)}},[k,B]=O.useState(_l),[H,X]=O.useState("blue"),[se,ne]=O.useState(null),[ae,me]=O.useState([]),[Z,re]=O.useState([]),[de,ee]=O.useState("Waiting for opponent..."),[he,Ne]=O.useState(tr.LOBBY),[le,ye]=O.useState(null),[ze,Ze]=O.useState(null),[Kt,nn]=O.useState(0),[rn,vn]=O.useState([]),[Mn,or]=O.useState(!1),[ss,xo]=O.useState(null),[Sr,bs]=O.useState(""),[is,zu]=O.useState(0),[To,zg]=O.useState(!1),[eb,tb]=O.useState(!1),[nb,Gh]=O.useState(!1),[Hu,sc]=O.useState(null),[En,Kh]=O.useState(!1),[Hg,ha]=O.useState(!0),[Yh,rb]=O.useState(null),[Us,sb]=O.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[v1,ib]=O.useState([]),[qu,E1]=O.useState(null),Vi=O.useRef(null),os=O.useRef(null),Vu=O.useRef(r);O.useEffect(()=>{Vu.current=r},[r]),O.useEffect(()=>{I&&!U&&N&&le==="red"&&(console.log("[CONTRACT] Join transaction confirmed:",I),Ks.updateGame(N,{red_player:r,game_state:"active"}).then(()=>{Ne(tr.ACTIVE),ee("Game started!"),rl(N)}).catch(M=>{console.error("Error updating game in database:",M),ee("Joined game on contract but failed to update database")}))},[I,U,N,le,r]),O.useEffect(()=>{S&&!q&&(console.log("[CLAIM] End game transaction confirmed:",S),ee("Winnings claimed successfully! Transaction hash: "+S.slice(0,10)+"..."),p(!1))},[S,q]),O.useEffect(()=>{x===!1&&f&&!S&&(console.log("[CLAIM] End game transaction rejected or failed"),ee("Claim transaction was rejected. Please try again."),p(!1))},[x,f,S]),O.useEffect(()=>{E&&!P&&ss&&!N&&(console.log("[CONTRACT] Create game transaction confirmed:",E),Ks.createGame(ss).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),$(ss.invite_code),ye("blue"),nn(is),Ne(tr.WAITING),ee("Waiting for opponent to join..."),rl(ss.invite_code),setTimeout(()=>{Gu()},1e3),xo(null),or(!1)}).catch(M=>{console.error("[FIREBASE] Error creating game after transaction:",M),ee("Transaction confirmed but failed to create game in database"),xo(null),or(!1)}))},[E,P,ss,is]),O.useEffect(()=>{b===!1&&ss&&!E&&(console.log("[CONTRACT] Create game transaction rejected or failed"),ee("Transaction was rejected. Please try again."),xo(null),or(!1))},[b,ss,E]),O.useEffect(()=>{if(C===!1&&N&&le==="red"&&!I){if(console.log("[CONTRACT] Join game transaction rejected or failed"),ee("Transaction was rejected. Please try again."),T&&T.length>=2){const[M,V]=T;if(M===r||V===r){console.log("[CONTRACT] Player is already in game, not resetting state");return}}console.log("[CONTRACT] Resetting state due to join transaction failure"),$(""),ye(null),nn(0),Ze(null)}},[C,N,le,I,T,r]),O.useEffect(()=>{r&&j!==void 0&&(g||(j!=="0x000000000000"&&T||j==="0x000000000000")&&_1())},[r,j,T,g]),O.useEffect(()=>{w(!1)},[r]),O.useEffect(()=>()=>{N1(),Vi.current&&Vi.current(),os.current&&clearTimeout(os.current)},[]);const _1=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),j&&j!=="0x000000000000"&&!T){console.log("[GAME_STATE] Waiting for contract data...");return}if(j&&j!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",j),T)){let F,Q,ie,Ve,Ce,Ye;if(Array.isArray(T))[F,Q,ie,Ve,Ce,Ye]=T;else{console.error("[GAME_STATE] Unexpected contract data format:",T);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:F,player2:Q,isActive:ie,winner:Ve,inviteCode:Ce,wagerAmount:Ye}),!Ce){console.error("[GAME_STATE] Invalid invite code:",Ce);return}const Lt=F===r?"blue":"red",Pt=F===r?Q:F;console.log("[GAME_STATE] Player is",Lt,"opponent is",Pt),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",F),console.log("[DEBUG] - player2 (red):",Q),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",F===r),console.log("[DEBUG] - player2 === address:",Q===r);const It=await Ks.getGame(Ce);if(It){if(console.log("[GAME_STATE] Found game in Firebase:",It),$(Ce),ye(Lt),nn(parseFloat(It.bet_amount)),Ze(Pt),It.game_state==="waiting")Ne(tr.WAITING),ee("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(It.game_state==="active"||It.game_state==="test_update"){if(Ne(tr.ACTIVE),ee("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",It.game_state,")"),It.board){const ur=It.board;B(sl(ur)),X(It.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",It.game_state,"- treating as active"),Ne(tr.ACTIVE),ee("Game in progress"),It.board){const ur=It.board;B(sl(ur)),X(It.current_player||"blue")}rl(Ce),w(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",he),console.log("[GAME_STATE] Game state from Firebase:",It.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const ur={invite_code:Ce,game_title:`Game ${Ce.slice(-6)}`,bet_amount:Ye?Ye.toString():"0",blue_player:F,red_player:Q,game_state:ie?"active":"waiting",board:{positions:Qh(_l),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:El,is_public:!0};if(await Ks.createGame(ur),console.log("[GAME_STATE] Successfully synced game to Firebase:",ur),$(Ce),ye(Lt),nn(parseFloat(ur.bet_amount)),Ze(Pt),ie?(Ne(tr.ACTIVE),ee("Game in progress")):(Ne(tr.WAITING),ee("Waiting for opponent to join...")),ur.board){const Eq=ur.board;B(sl(Eq)),X(ur.current_player||"blue")}rl(Ce),w(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const V=(await Ks.getActiveGames()).filter(F=>F.chain==="sanko"&&(F.blue_player===r||F.red_player===r)&&["waiting","active"].includes(F.game_state));if(V&&V.length>0){const F=V[0];if(console.log("[GAME_STATE] Found active game in Firebase:",F),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",F.blue_player),console.log("[DEBUG] - red_player:",F.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",F.blue_player===r),console.log("[DEBUG] - red_player === address:",F.red_player===r),$(F.invite_code),ye(F.blue_player===r?"blue":"red"),nn(parseFloat(F.bet_amount)),Ze(F.blue_player===r?F.red_player:F.blue_player),F.game_state==="waiting")Ne(tr.WAITING),ee("Waiting for opponent to join...");else if(F.game_state==="active"||F.game_state==="test_update"){if(Ne(tr.ACTIVE),ee("Game in progress"),F.board){const Q=F.board;B(sl(Q)),X(F.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",F.game_state,"- treating as active"),Ne(tr.ACTIVE),ee("Game in progress"),F.board){const Q=F.board;B(sl(Q)),X(F.current_player||"blue")}rl(F.invite_code),w(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),Ne(tr.LOBBY),or(!1),w(!0)}catch(M){console.error("[GAME_STATE] Error in checkPlayerGameState:",M)}},C1=()=>{zg(!To),To?(document.documentElement.classList.remove("chess-dark-mode"),document.body.classList.remove("chess-dark-mode")):(document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode"))},qg=async()=>{try{const M=await dq(20);ib(M)}catch(M){console.error("Error loading leaderboard:",M)}},Ro=async M=>{if(console.log("[SCORE] updateScore called with:",M,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Ih(r)),await R_(r,M)?console.log("[SCORE] Successfully updated score for:",Ih(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(V){console.error("[SCORE] Error updating score:",V)}},ob=async(M,V,F)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:M,bluePlayer:V,redPlayer:F}),!V||!F){console.error("[SCORE] Missing player addresses from contract");return}await e5e(M,V,F)?(console.log("[SCORE] Successfully updated both players scores"),await qg()):console.error("[SCORE] Failed to update both players scores")}catch(Q){console.error("[SCORE] Error updating both players scores:",Q)}},Gu=async()=>{try{const M=await Ks.getOpenGames();console.log("[FIREBASE] Loaded open games:",M),await Ku(M),vn(M)}catch(M){console.error("Error loading open games:",M)}},Ku=async M=>{if(console.log("[CLEANUP] Checking for ghost games..."),!D){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const V of M)try{const F=V.invite_code;if(!F||typeof F!="string"||!F.startsWith("0x")||F.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",V.invite_code,F);continue}const Q=await D.readContract({address:El,abi:Pf,functionName:"games",args:[F]});(!Q||Array.isArray(Q)&&Q[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",V.invite_code,"- removing from Firebase"),await Ks.deleteGame(V.invite_code),console.log("[CLEANUP] Ghost game removed:",V.invite_code))}catch(F){console.error("[CLEANUP] Error checking game:",V.invite_code,F)}},S1=async()=>{if(!(!r||is<=0)){or(!0);try{const M=n5e();$(M);const V={invite_code:M,game_title:`Chess Game ${M.slice(-6)}`,bet_amount:is.toString(),blue_player:r,game_state:"waiting",board:{positions:Qh(_l),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:El,is_public:!0,created_at:new Date().toISOString()};y({address:El,abi:Pf,functionName:"createGame",args:[M],value:BigInt(Math.floor(is*1e18))}),xo(V),ee("Creating game... Please confirm transaction in your wallet.")}catch(M){console.error("Error creating game:",M),ee("Failed to create game. Please try again.")}finally{or(!1)}}},A1=async M=>{if(r)try{const V=await Ks.getGame(M);if(!V||V.game_state!=="waiting"){ee("Game not found or already full");return}const F=parseFloat(V.bet_amount);$(M),ye("red"),nn(F),Ze(V.blue_player),ee("Joining game... Please confirm transaction in your wallet."),_({address:El,abi:Pf,functionName:"joinGame",args:[M],value:BigInt(Math.floor(F*1e18))}),await Ks.updateGame(M,{...V,red_player:r,game_state:"active"})}catch{ee("Failed to join game. Please try again."),$(""),ye(null),nn(0),Ze(null)}},[vk,Ek]=O.useState(null),[_k,Ck]=O.useState(""),[Sk,I1]=O.useState(!0),N1=()=>{console.log("[FIREBASE] No fallback to stop")},rl=M=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",M),Vi.current&&(console.log("[FIREBASE] Removing existing subscription"),Vi.current());const V=Ks.subscribeToGame(M,F=>{const Q=Vu.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",Q),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",F),console.log("[DEBUG] Blue player from Firebase:",F==null?void 0:F.blue_player),console.log("[DEBUG] Red player from Firebase:",F==null?void 0:F.red_player),console.log("[DEBUG] Blue player type:",typeof(F==null?void 0:F.blue_player)),console.log("[DEBUG] Red player type:",typeof(F==null?void 0:F.red_player)),console.log("[DEBUG] Current address type:",typeof Q),!F){console.log("[DEBUG] No game data received");return}if(Q&&F.blue_player&&F.red_player){console.log("[DEBUG] All required data present, comparing addresses...");const ie=Q.toLowerCase()===F.blue_player.toLowerCase(),Ve=Q.toLowerCase()===F.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",ie),console.log("[DEBUG] Red player match:",Ve),console.log("[DEBUG] Blue comparison:",`${Q.toLowerCase()} === ${F.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${Q.toLowerCase()} === ${F.red_player.toLowerCase()}`),ie?(console.log("[DEBUG] Setting player color to BLUE"),ye("blue"),Ze(F.red_player)):Ve?(console.log("[DEBUG] Setting player color to RED"),ye("red"),Ze(F.blue_player)):(console.log("[DEBUG] No address match found - setting playerColor to null"),ye(null),Ze(null))}else console.log("[DEBUG] Missing player data in Firebase - preserving existing playerColor"),console.log("[DEBUG] - currentAddress:",!!Q),console.log("[DEBUG] - blue_player:",!!F.blue_player),console.log("[DEBUG] - red_player:",!!F.red_player),console.log("[DEBUG] - Current playerColor state:",le),(!F.blue_player||!F.red_player)&&(console.log("[DEBUG] Preserving existing playerColor:",le),F.blue_player&&F.red_player&&Ze(F.blue_player===Q?F.red_player:F.blue_player));console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),F.bet_amount&&!isNaN(parseFloat(F.bet_amount))?nn(parseFloat(F.bet_amount)):nn(0),F.board&&B(sl(F.board)),F.current_player&&X(F.current_player),F.game_state==="active"?(Ne(tr.ACTIVE),ee("Game in progress")):F.game_state==="finished"?(Ne(tr.FINISHED),ee("Game finished")):F.game_state==="waiting"&&(Ne(tr.WAITING),ee("Waiting for opponent to join..."))});Vi.current=V,console.log("[FIREBASE] Firebase subscription setup complete for game:",M)};O.useEffect(()=>(N&&rl(N),()=>{Vi.current&&Vi.current()}),[N,r]),O.useEffect(()=>{if(T&&!le&&r){console.log("[FALLBACK] Setting playerColor from contract data");let M,V,F,Q,ie,Ve;if(Array.isArray(T))[M,V,F,Q,ie,Ve]=T;else{console.error("[FALLBACK] Unexpected contract data format:",T);return}const Ce=M===r?"blue":"red",Ye=M===r?V:M;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",M),console.log("[FALLBACK] - player2 (red):",V),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Ce),console.log("[FALLBACK] - opponent:",Ye),console.log("[FALLBACK] - inviteCode from contract:",ie),ye(Ce),Ze(Ye),!N&&ie&&(console.log("[FALLBACK] Setting missing inviteCode:",ie),$(ie))}},[T,le,r,N]);const Qh=M=>{const V={};return M.forEach((F,Q)=>{F.forEach((ie,Ve)=>{V[`${Q}_${Ve}`]=ie})}),V},sl=M=>{if(!M||!M.positions)return console.warn("[BOARD] No board data available, using initial board"),_l;if(console.log("[BOARD] Attempting to reconstruct board from:",M),console.log("[BOARD] Positions type:",typeof M.positions),console.log("[BOARD] Positions is array:",Array.isArray(M.positions)),console.log("[BOARD] Positions value:",M.positions),typeof M.positions=="object"&&!Array.isArray(M.positions)){const V=M.positions,F=M.rows||8,Q=M.cols||8,ie=Array(F).fill(null).map(()=>Array(Q).fill(null));for(let Ve=0;Ve<F;Ve++)for(let Ce=0;Ce<Q;Ce++){const Ye=`${Ve}_${Ce}`;ie[Ve][Ce]=V[Ye]||null}return console.log("[BOARD] Reconstructed from flat structure:",ie),ie}return Array.isArray(M.positions)?(console.log("[BOARD] Found array structure, length:",M.positions.length),M.positions.length===8?M.positions.every((F,Q)=>{const ie=Array.isArray(F)&&F.length===8;return ie||console.warn(`[BOARD] Row ${Q} is invalid:`,F,"Type:",typeof F,"Length:",F==null?void 0:F.length),ie})?(console.log("[BOARD] Using legacy array structure"),M.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),_l):(console.warn("[BOARD] Array has wrong length:",M.positions.length,"expected 8"),_l)):(console.warn("[BOARD] Unknown board structure, using initial board:",M),_l)},Zh=M=>`${M.slice(0,6)}...${M.slice(-4)}`,Ln=M=>M&&M===M.toUpperCase()?"red":"blue",ab=(M,V)=>M>=0&&M<8&&V>=0&&V<8,Yu=(M,V)=>{const F=V==="red"?"K":"k";let Q=-1,ie=-1;for(let Ce=0;Ce<8;Ce++){for(let Ye=0;Ye<8;Ye++)if(M[Ce][Ye]===F){Q=Ce,ie=Ye;break}if(Q!==-1)break}return Q===-1?!1:cb(Q,ie,V==="red"?"blue":"red",M)},cb=(M,V,F,Q)=>{if(!Q||!Array.isArray(Q)||Q.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",Q),!1;for(let ie=0;ie<8;ie++){if(!Q[ie]||!Array.isArray(Q[ie])||Q[ie].length!==8)return console.warn("[SAFETY] Invalid board row structure:",Q[ie]),!1;for(let Ve=0;Ve<8;Ve++){const Ce=Q[ie][Ve];if(Ce&&Ln(Ce)===F&&K(Ce,ie,Ve,M,V,!1,F,Q,!0))return!0}}return!1},x1=(M,V,F,Q,ie,Ve=k)=>{const Ce=Ve[M][V];if(!Ce)return!1;const Ye=Ve.map(Lt=>[...Lt]);return Ye[F][Q]=Ce,Ye[M][V]=null,Yu(Ye,ie)},lb=(M,V,F,Q,ie,Ve)=>{const Ce=M==="blue"?-1:1,Ye=M==="blue"?6:1;if(!ab(Q,ie)||M==="blue"&&Q>=V||M==="red"&&Q<=V)return!1;if(F===ie&&Q===V+Ce)return Ve[Q][ie]===null;if(F===ie&&V===Ye&&Q===V+2*Ce)return Ve[V+Ce][F]===null&&Ve[Q][ie]===null;if(Math.abs(F-ie)===1&&Q===V+Ce){const Lt=Ve[Q][ie];if(Lt!==null&&Ln(Lt)!==M)return!0;if(Lt===null&&Us.lastPawnDoubleMove){const{row:Pt,col:It}=Us.lastPawnDoubleMove;if(Pt===V&&It===ie){const ur=Ve[V][ie];if(ur&&ur.toLowerCase()==="p"&&Ln(ur)!==M)return!0}}}return!1},Vg=(M,V,F,Q,ie)=>M===F||V===Q,Gg=(M,V,F,Q)=>{const ie=Math.abs(M-F),Ve=Math.abs(V-Q);return ie===2&&Ve===1||ie===1&&Ve===2},Xh=(M,V,F,Q,ie)=>Math.abs(M-F)===Math.abs(V-Q),T1=(M,V,F,Q,ie)=>Vg(M,V,F,Q)||Xh(M,V,F,Q),Jh=(M,V,F,Q,ie)=>{const Ve=Math.abs(V-Q),Ce=Math.abs(F-ie);if(Ve<=1&&Ce<=1)return!0;if(Ve===0&&Ce===2){if(M==="blue"&&!Us.blueKingMoved){if(ie===6&&!Us.blueRooksMove.right||ie===2&&!Us.blueRooksMove.left)return!0}else if(M==="red"&&!Us.redKingMoved&&(ie===6&&!Us.redRooksMove.right||ie===2&&!Us.redRooksMove.left))return!0}return!1},z=(M,V,F,Q,ie)=>{const Ve=M===F?0:(F-M)/Math.abs(F-M),Ce=V===Q?0:(Q-V)/Math.abs(Q-V);let Ye=M+Ve,Lt=V+Ce;for(;Ye!==F||Lt!==Q;){if(ie[Ye][Lt]!==null)return!1;Ye+=Ve,Lt+=Ce}return!0},K=(M,V,F,Q,ie,Ve=!0,Ce=Ln(M),Ye=k,Lt=!1)=>{if(!M||!ab(Q,ie))return!1;const Pt=Ye[Q][ie];if(Pt&&Ln(Pt)===Ce)return!1;let It=!1;switch(M.toUpperCase()){case"P":It=lb(Ce,V,F,Q,ie,Ye);break;case"R":It=Vg(V,F,Q,ie)&&z(V,F,Q,ie,Ye);break;case"N":It=Gg(V,F,Q,ie);break;case"B":It=Xh(V,F,Q,ie)&&z(V,F,Q,ie,Ye);break;case"Q":It=T1(V,F,Q,ie)&&z(V,F,Q,ie,Ye);break;case"K":It=Jh(Ce,V,F,Q,ie);break}return!(!It||Ve&&x1(V,F,Q,ie,Ce,Ye))},te=(M,V=k,F=H)=>{const Q=[],ie=V[M.row][M.col];if(!ie||Ln(ie)!==F)return Q;const Ve=ie.toLowerCase();if(Ve==="p"){const Ce=F==="blue"?-1:1,Ye=F==="blue"?6:1,Lt=M.row+Ce;if(Lt>=0&&Lt<8&&K(ie,M.row,M.col,Lt,M.col,!0,F,V,!0)&&Q.push({row:Lt,col:M.col}),M.row===Ye){const Pt=M.row+2*Ce;Pt>=0&&Pt<8&&K(ie,M.row,M.col,Pt,M.col,!0,F,V,!0)&&Q.push({row:Pt,col:M.col})}for(const Pt of[-1,1]){const It=M.col+Pt,ur=M.row+Ce;It>=0&&It<8&&ur>=0&&ur<8&&K(ie,M.row,M.col,ur,It,!0,F,V,!0)&&Q.push({row:ur,col:It})}}else if(Ve==="n"){const Ce=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Ye,Lt]of Ce){const Pt=M.row+Ye,It=M.col+Lt;Pt>=0&&Pt<8&&It>=0&&It<8&&K(ie,M.row,M.col,Pt,It,!0,F,V,!0)&&Q.push({row:Pt,col:It})}}else for(let Ce=0;Ce<8;Ce++)for(let Ye=0;Ye<8;Ye++)K(ie,M.row,M.col,Ce,Ye,!0,F,V,!0)&&Q.push({row:Ce,col:Ye});return Q},J=(M,V=k)=>{if(!Yu(V,M))return!1;for(let F=0;F<8;F++)for(let Q=0;Q<8;Q++){const ie=V[F][Q];if(ie&&Ln(ie)===M&&te({row:F,col:Q},V,M).length>0)return!1}return!0},Y=(M,V=k)=>{if(Yu(V,M))return!1;for(let F=0;F<8;F++)for(let Q=0;Q<8;Q++){const ie=V[F][Q];if(ie&&Ln(ie)===M&&te({row:F,col:Q},V,M).length>0)return!1}return!0},_e=(M,V)=>{if(console.log("[CLICK] Square clicked:",{row:M,col:V}),console.log("[CLICK] Game mode:",he,"Player color:",le),console.log("[CLICK] Current player:",H,"Player color:",le),he!==tr.ACTIVE||!le){console.log("[CLICK] Game not active or no player color");return}const F=k[M][V],Q=F?Ln(F):null;if(console.log("[CLICK] Piece at square:",F,"Piece color:",Q),H!==le){console.log("[CLICK] Not player's turn. Current:",H,"Player:",le);return}if(F&&Q===le){ne({row:M,col:V});const ie=te({row:M,col:V});me(ie);return}if(se&&ae.some(ie=>ie.row===M&&ie.col===V)){Se(se,{row:M,col:V}),ne(null),me([]);return}ne(null),me([])},Se=async(M,V)=>{if(!le||H!==le)return;const F=k[M.row][M.col];if(F){if(console.log("[PROMOTION] Checking pawn promotion:",{piece:F,pieceUpperCase:F.toUpperCase(),playerColor:le,toRow:V.row,isPawn:F.toUpperCase()==="P",redPromotion:le==="red"&&V.row===0,bluePromotion:le==="blue"&&V.row===7}),F.toUpperCase()==="P"&&(le==="red"&&V.row===0||le==="blue"&&V.row===7)){console.log("[PROMOTION] Showing promotion dialog for piece:",F,"at position:",V),sc({from:M,to:V}),Gh(!0);return}await qe(M,V)}},qe=async(M,V,F="q")=>{if(!le||H!==le||!k[M.row][M.col])return;const Ve=k[V.row][V.col]!==null;if(ic(Ve?"capture":"move"),Ve){rb({row:V.row,col:V.col,show:!0}),setTimeout(()=>{$t(M,V,F),rb(null)},500);return}$t(M,V,F)},$t=async(M,V,F="q")=>{if(!le||H!==le)return;const Q=k[M.row][M.col];if(!Q)return;const ie=k.map(Pt=>[...Pt]);let Ve=Q;Q.toUpperCase()==="P"&&(le==="red"&&V.row===0||le==="blue"&&V.row===7)&&(Ve=le==="red"?F.toUpperCase():F.toLowerCase()),Un(ie,M,V,Q),ie[V.row][V.col]=Ve,ie[M.row][M.col]=null,Yt(M,V,Q);const Ce=H==="blue"?"red":"blue";Yu(ie,Ce)&&ic("check");let Ye="active",Lt=null;J(Ce,ie)?(Ye="finished",Lt=H,ee(`${H==="red"?"Red":"Blue"} wins by checkmate!`),ic("checkmate"),Xt(),console.log("[SCORE] Updating scores - Winner:",H,"Loser:",Ce),console.log("[SCORE] Contract game data:",T),console.log("[SCORE] Player game invite code:",j),T&&T.length>=2?(console.log("[SCORE] Using contract data for both players update"),await ob(H,T[0],T[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await Ro(H===le?"win":"loss"),await qg()),Lt===le&&(console.log("[CONTRACT] Triggering automatic payout for winner:",Lt),setTimeout(()=>{R()},2e3))):Y(Ce,ie)&&(Ye="finished",ee("Game ended in stalemate"),console.log("[SCORE] Updating scores for draw"),await Ro("draw"));try{if(!N){console.error("[BUG] inviteCode is missing when trying to update game!"),ee("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",N,"gameData:",{board:{positions:ie},current_player:Ce,game_state:Ye,winner:Lt,last_move:{from:M,to:V}});const It={...await Ks.getGame(N),board:{positions:Qh(ie),rows:8,cols:8},current_player:Ce,game_state:Ye,winner:Lt,last_move:{from:M,to:V}};console.log("[FIREBASE] Storing data in Firebase:",It),await Ks.updateGame(N,It),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(Pt){console.error("[DATABASE] Error updating game:",Pt)}B(ie),X(Ce),E1({from:M,to:V}),Gh(!1),sc(null)},Xt=()=>{Kh(!0),ic("victory"),os.current&&clearTimeout(os.current),os.current=setTimeout(()=>{Kh(!1)},5e3)},Un=(M,V,F,Q)=>{if(Q.toLowerCase()==="p"&&(Ln(Q)==="blue"&&F.row===0||Ln(Q)==="red"&&F.row===7)){const ie=Ln(Q)==="blue"?"q":"Q";M[F.row][F.col]=ie}Q.toLowerCase()==="k"&&Math.abs(V.col-F.col)===2&&(F.col===6?(M[V.row][7]=null,M[V.row][5]=Ln(Q)==="blue"?"r":"R"):F.col===2&&(M[V.row][0]=null,M[V.row][3]=Ln(Q)==="blue"?"r":"R")),Q.toLowerCase()==="p"&&Math.abs(V.col-F.col)===1&&M[F.row][F.col]===null&&Us.lastPawnDoubleMove&&Us.lastPawnDoubleMove.row===V.row&&Us.lastPawnDoubleMove.col===F.col&&(M[V.row][F.col]=null)},Yt=(M,V,F)=>{const Q={...Us};F.toLowerCase()==="k"?Ln(F)==="blue"?Q.blueKingMoved=!0:Q.redKingMoved=!0:F.toLowerCase()==="r"&&(Ln(F)==="blue"?(M.col===0&&(Q.blueRooksMove.left=!0),M.col===7&&(Q.blueRooksMove.right=!0)):(M.col===0&&(Q.redRooksMove.left=!0),M.col===7&&(Q.redRooksMove.right=!0))),F.toLowerCase()==="p"&&Math.abs(M.row-V.row)===2?Q.lastPawnDoubleMove={row:V.row,col:V.col}:Q.lastPawnDoubleMove=null,sb(Q)},ic=M=>{if(Hg)try{const V=new Audio(`/images/${M}.mp3`);V.volume=.3,V.play().catch(F=>console.warn("Audio play failed:",F))}catch(V){console.warn("Sound play failed:",V)}},fq=async()=>{if(N)try{console.log("[RESET] Resetting corrupted game data for:",N);const M={board:{positions:Qh(_l),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await Ks.updateGame(N,M),console.log("[RESET] Successfully reset game data"),ee("Game reset successfully. You can now make moves.")}catch(M){console.error("[RESET] Error resetting game data:",M),ee("Failed to reset game. Please try again.")}},Ak=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(M){console.error("Error checking stuck games:",M)}},pq=(M,V)=>{if(!k||!Array.isArray(k)||k.length!==8||!k[M]||!Array.isArray(k[M])||k[M].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:M,col:V,board:k}),m.jsx("div",{className:"square error",children:m.jsx("div",{className:"error-indicator",children:"!"})},`${M}-${V}`);const F=k[M][V],Q=(se==null?void 0:se.row)===M&&(se==null?void 0:se.col)===V,ie=ae.some(Ye=>Ye.row===M&&Ye.col===V),Ve=qu&&(qu.from.row===M&&qu.from.col===V||qu.to.row===M&&qu.to.col===V),Ce=F&&F.toUpperCase()==="K"&&Yu(k,Ln(F));return m.jsxs("div",{className:`square ${Q?"selected":""} ${ie?"legal-move":""} ${Ve?"last-move":""} ${Ce?"square-in-check":""}`,onClick:()=>_e(M,V),children:[F&&m.jsx("div",{className:"piece",style:{backgroundImage:yI[F]?`url(${yI[F]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ie&&m.jsx("div",{className:"legal-move-indicator"})]},`${M}-${V}`)},gq=()=>{if(console.log("[PROMOTION] Rendering promotion dialog:",{showPromotion:nb,promotionMove:Hu,playerColor:le}),!nb||!Hu)return console.log("[PROMOTION] Not showing dialog - conditions not met"),null;const M=le==="red"?["Q","R","B","N"]:["q","r","b","n"];return console.log("[PROMOTION] Promotion pieces for",le,":",M),m.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:M.map(V=>m.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",V),qe(Hu.from,Hu.to,V.toLowerCase()),Gh(!1),sc(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:m.jsx("img",{src:yI[V],alt:V,style:{width:"40px",height:"40px"}})},V))})]})})},mq=()=>m.jsxs("div",{className:"piece-gallery",children:[m.jsx("h3",{children:"Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:t5e.map(M=>m.jsxs("div",{className:"piece-gallery-item",children:[m.jsx("img",{src:M.img,alt:M.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:M.name}),m.jsx("div",{className:"piece-gallery-desc",children:M.desc})]},M.key))})]}),Ik=()=>m.jsxs("div",{className:"chess-multiplayer-lobby",children:[m.jsx("h2",{children:"Multiplayer Chess Lobby"}),s?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"status-bar",children:["Connected: ",Zh(r)]}),m.jsxs("div",{className:"lobby-content",children:[m.jsxs("div",{className:"open-games",children:[m.jsx("h3",{children:"Open Games"}),m.jsxs("div",{className:"games-list",children:[rn.map(M=>m.jsxs("div",{className:"game-item",children:[m.jsxs("div",{className:"game-info",children:[m.jsx("div",{className:"game-id",children:M.game_title||"Untitled Game"}),m.jsxs("div",{className:"wager",children:["Wager: ",parseFloat(M.bet_amount)," tDMT"]}),m.jsxs("div",{className:"title",children:["Created by: ",Zh(M.blue_player)]})]}),m.jsx("button",{className:"join-btn",onClick:()=>A1(M.invite_code),children:"Join Game"})]},M.invite_code)),rn.length===0&&m.jsx("div",{className:"no-games",children:"No open games available"})]})]}),m.jsxs("div",{className:"actions",children:[m.jsx("button",{className:"create-btn",onClick:()=>or(!0),disabled:Mn,children:"Create New Game"}),m.jsx("button",{className:"resume-btn",onClick:Ak,style:{marginTop:"10px",background:"rgba(0, 255, 0, 0.1)",border:"2px solid #00ff00",color:"#00ff00",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"Check for Active Games"}),m.jsx("button",{onClick:Gu,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Refresh Lobby"})]}),Mn&&m.jsxs("div",{className:"create-form",children:[m.jsx("h3",{children:"Create New Game"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Wager (tDMT):"}),m.jsx("input",{type:"number",value:is,onChange:M=>zu(Number(M.target.value)),placeholder:"0.1",min:"0",step:"0.1"})]}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"create-confirm-btn",onClick:S1,disabled:is<=0,children:"Create Game"}),m.jsx("button",{className:"cancel-btn",onClick:()=>or(!1),children:"Cancel"})]})]})]})]}):m.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),yq=()=>m.jsxs("div",{className:"chess-multiplayer-waiting",children:[m.jsx("h2",{children:"Waiting for Opponent"}),m.jsxs("div",{className:"game-code",children:["Invite Code: ",m.jsx("strong",{children:N})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("p",{children:["Wager: ",Kt," tDMT"]}),m.jsx("p",{children:"Share this invite code with your opponent"})]})]}),wq=()=>m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:" Multiplayer Chess"}),m.jsxs("div",{className:"chess-controls",children:[m.jsx("button",{onClick:C1,className:"theme-toggle-btn",title:"Toggle Dark Mode",children:""}),e&&m.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),m.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:""})]})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("div",{className:"game-status-section",children:[m.jsx("span",{className:`status ${de.includes("Check")?"check-status":""}`,children:de}),m.jsxs("span",{className:`current-player ${H==="red"?"red-turn":"blue-turn"}`,children:["Current: ",H==="red"?" Red":" Blue"]})]}),m.jsxs("div",{className:"game-details-section",children:[m.jsxs("span",{className:"wager-display",children:[" ",Kt," tDMT"]}),ze&&m.jsxs("span",{className:"opponent-info",children:["vs ",Zh(ze)]})]}),he===tr.FINISHED&&m.jsx("button",{onClick:R,disabled:f,className:"claim-winnings-btn",children:f?" Claiming...":" Claim Winnings"})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsx("div",{className:"left-sidebar",children:m.jsxs("div",{className:"move-history",children:[m.jsx("h4",{children:"Move History"}),m.jsx("div",{className:"moves",children:Z.slice().reverse().map((M,V)=>m.jsx("div",{className:"move",children:M},Z.length-1-V))})]})}),m.jsxs("div",{className:"center-area",children:[m.jsxs("div",{className:"chessboard-container",children:[m.jsx("div",{className:"chessboard",children:Array.from({length:8},(M,V)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(F,Q)=>pq(V,Q))},V))}),Yh&&Yh.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${Yh.row*12.5}%`,left:`${Yh.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:m.jsx("div",{className:"explosion-effect",children:""})})]}),m.jsxs("div",{className:"game-controls",children:[m.jsxs("div",{className:"control-section",children:[m.jsx("button",{onClick:()=>tb(!eb),className:"gallery-toggle-btn",children:eb?" Hide Gallery":" Show Gallery"}),de.includes("corrupted")&&m.jsx("button",{className:"reset-game-btn",onClick:fq,children:" Reset Game"})]}),m.jsx("div",{className:"settings-section",children:m.jsxs("div",{className:"sound-controls",children:[m.jsxs("label",{className:"control-label",children:[m.jsx("input",{type:"checkbox",id:"sound-toggle",checked:Hg,onChange:M=>ha(M.target.checked),className:"control-checkbox"}),m.jsx("span",{className:"control-text",children:" Sound Effects"})]}),m.jsxs("label",{className:"control-label",children:[m.jsx("input",{type:"checkbox",id:"victory-toggle",checked:En,onChange:M=>Kh(M.target.checked),className:"control-checkbox"}),m.jsx("span",{className:"control-text",children:" Victory Celebration"})]})]})}),d&&m.jsx("button",{className:"claim-winnings-btn",onClick:R,disabled:f||x||q,children:f||x||q?" Claiming...":" Claim Winnings"})]})]}),m.jsx("div",{className:"right-sidebar",children:m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"#"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:v1.map((M,V)=>m.jsxs("tr",{children:[m.jsx("td",{children:V+1}),m.jsx("td",{children:M.username}),m.jsx("td",{children:M.wins}),m.jsx("td",{children:M.losses}),m.jsx("td",{children:M.draws}),m.jsx("td",{children:M.points})]},M.username))})]})})]})})]}),eb&&m.jsx("div",{className:"piece-gallery-panel",children:mq()}),gq(),En&&m.jsx("div",{className:"victory-celebration",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("h2",{children:" Victory! "}),m.jsx("p",{children:"Congratulations on your win!"})]})})]}),bq=()=>null;O.useEffect(()=>{qg(),Gu(),Ak();const M=setInterval(Gu,5e3);return()=>{clearInterval(M),Vi.current&&Vi.current(),os.current&&clearTimeout(os.current)}},[]),console.log("[RENDER] Current game mode:",he,"Game ID:",N);const vq=(()=>{switch(he){case tr.LOBBY:return Ik();case tr.WAITING:return yq();case tr.ACTIVE:case tr.FINISHED:return wq();default:return Ik()}})();return m.jsxs(m.Fragment,{children:[vq,bq()]})},wI={AI:"ai"},bv={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},wU=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],r5e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],s5e=()=>{const[t,e]=O.useState(!1),n=O.useRef(null),r=O.useRef(!1);O.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=O.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=O.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},i5e=()=>{const[t,e]=O.useState(null),[n,r]=O.useState(!1),s=O.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=O.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},o5e=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=P0(),[s,i]=O.useState(wI.AI),[o,a]=O.useState(()=>JSON.parse(JSON.stringify(wU))),[c,l]=O.useState("blue"),[u,d]=O.useState(null),[h,f]=O.useState("active"),[p,g]=O.useState("hard"),[w,y]=O.useState("Connect wallet to play"),[b,E]=O.useState([]),[_,C]=O.useState([]),[I,A]=O.useState([]),[x,S]=O.useState(null),[D,P]=O.useState(!1),[U,q]=O.useState(!1),[j,T]=O.useState(null),[N,$]=O.useState(null),[R]=O.useState(""),[k]=O.useState(.1),[B,H]=O.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),X=O.useRef(null),se=O.useRef(!1),ne=O.useRef(o),ae=O.useRef(null),me=O.useRef(null),Z=O.useRef(!1),re=O.useRef(!1),[de,ee]=O.useState(!1),[he,Ne]=O.useState(!1),[le,ye]=O.useState(!1),[ze,Ze]=O.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),Kt=()=>{Ze(z=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!z)),!z))},{stockfishReady:nn}=s5e(),{getOpeningData:rn}=i5e(),[vn,Mn]=O.useState("loading"),[or,ss]=O.useState(!1),[xo,Sr]=O.useState([]),[bs,is]=O.useState(!1),[zu,To]=O.useState("/images/chessboard1.png"),[zg,eb]=O.useState(!0),[tb,nb]=O.useState(!1),Gh=()=>{const z=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*z.length),te=z[K];return console.log("[DEBUG] Random chessboard selected:",te,"(index:",K,")"),te};O.useEffect(()=>{if(nn)Mn("ready");else{const z=window.setTimeout(()=>{nn||(Mn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(z)}},[nn]),O.useEffect(()=>{ne.current=o},[o]),O.useEffect(()=>{r?y("Select game mode"):(y("Connect wallet to play"),P(!1))},[r]),O.useEffect(()=>(!X.current&&typeof Worker<"u"&&(X.current=new Worker("/aiWorker.js"),X.current.onmessage=z=>{console.log("[DEBUG] AI worker response received:",z.data);const{move:K,nodes:te}=z.data;K&&se.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",K),console.log("[DEBUG] AI searched",te,"nodes"),se.current=!1,me.current&&(window.clearTimeout(me.current),me.current=null),ae.current&&ae.current(K.from,K.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},X.current.onerror=z=>{console.error("[DEBUG] AI worker error:",z),y("AI worker error - using fallback mode"),se.current=!1}),()=>{X.current&&(X.current.terminate(),X.current=null),me.current&&(window.clearTimeout(me.current),me.current=null)}),[]),O.useEffect(()=>{Hu()},[]);const Hu=async()=>{try{const z=await dq(20);C(z),console.log("Leaderboard data loaded:",z)}catch(z){y("Failed to load leaderboard"),console.error("Leaderboard error:",z)}},sc=async z=>{if(console.log("[DEBUG] updateScore called with:",z),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Ih(r)),await R_(r,z)?(console.log("[DEBUG] Successfully updated score for:",Ih(r)),await Hu()):console.error("[DEBUG] Failed to update score")}catch(K){console.error("[DEBUG] Error in updateScore:",K)}},En=z=>z&&z===z.toUpperCase()?"red":"blue",Kh=(z,K)=>z>=0&&z<8&&K>=0&&K<8,Hg=(z,K)=>`${String.fromCharCode(97+K)}${8-z}`,ha=(z,K)=>{const te=K==="blue"?"k":"K";let J=null;for(let Se=0;Se<8;Se++){for(let qe=0;qe<8;qe++)if(z[Se][qe]===te){J={row:Se,col:qe};break}if(J)break}if(!J)return console.log(`King not found for ${K}`),!1;const Y=K==="blue"?"red":"blue",_e=Yh(J.row,J.col,Y,z);return console.log(`${K} king at ${J.row},${J.col} under attack: ${_e}`),_e},Yh=(z,K,te,J)=>{for(let Y=0;Y<8;Y++)for(let _e=0;_e<8;_e++){const Se=J[Y][_e];if(Se&&En(Se)===te&&os(Se,Y,_e,z,K,!1,te,J,!0))return!0}return!1},rb=(z,K,te,J,Y,_e=o)=>{const Se=_e.map($t=>[...$t]),qe=Se[z][K];return Se[te][J]=qe,Se[z][K]=null,ha(Se,Y)},Us=(z,K,te,J,Y,_e)=>{const Se=z==="blue"?-1:1,qe=z==="blue"?6:1;if(!Kh(J,Y)||z==="blue"&&J>=K||z==="red"&&J<=K)return!1;const $t=Math.abs(J-K),Xt=Math.abs(Y-te);if(($t===1&&Xt===0||$t===2&&Xt===0&&K===qe||$t===1&&Xt===1)&&$t<=2&&Xt<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:z,from:`${K},${te}`,to:`${J},${Y}`}),te===Y&&J===K+Se)return _e[J][Y]===null;if(te===Y&&K===qe&&J===K+2*Se)return _e[K+Se][te]===null&&_e[J][Y]===null;if(Math.abs(te-Y)===1&&J===K+Se){const Yt=_e[J][Y];return Yt!==null&&En(Yt)!==z}if(Math.abs(te-Y)===1&&J===K+Se){const Yt=_e[K][Y];if(Yt&&En(Yt)!==z&&Yt.toLowerCase()==="p"&&B.lastPawnDoubleMove&&B.lastPawnDoubleMove.row===K&&B.lastPawnDoubleMove.col===Y)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},sb=(z,K,te,J,Y)=>z!==te&&K!==J?!1:Vi(z,K,te,J,Y),v1=(z,K,te,J)=>{const Y=Math.abs(z-te),_e=Math.abs(K-J);return Y===2&&_e===1||Y===1&&_e===2},ib=(z,K,te,J,Y)=>Math.abs(z-te)!==Math.abs(K-J)?!1:Vi(z,K,te,J,Y),qu=(z,K,te,J,Y)=>sb(z,K,te,J,Y)||ib(z,K,te,J,Y),E1=(z,K,te,J,Y)=>{const _e=Math.abs(K-J),Se=Math.abs(te-Y);if(_e<=1&&Se<=1)return!0;if(_e===0&&Se===2){if(z==="blue"&&!B.blueKingMoved){if(Y===6&&!B.blueRooksMove.right||Y===2&&!B.blueRooksMove.left)return!0}else if(z==="red"&&!B.redKingMoved&&(Y===6&&!B.redRooksMove.right||Y===2&&!B.redRooksMove.left))return!0}return!1},Vi=(z,K,te,J,Y)=>{const _e=z===te?0:(te-z)/Math.abs(te-z),Se=K===J?0:(J-K)/Math.abs(J-K);let qe=z+_e,$t=K+Se;for(;qe!==te||$t!==J;){if(Y[qe][$t]!==null)return!1;qe+=_e,$t+=Se}return!0},os=(z,K,te,J,Y,_e=!0,Se=En(z),qe=o,$t=!1)=>{if(!Kh(J,Y))return $t||console.log("[ILLEGAL MOVE] Out of board:",{piece:z,startRow:K,startCol:te,endRow:J,endCol:Y}),!1;const Xt=qe[J][Y];if(Xt&&En(Xt)===Se)return $t||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:z,startRow:K,startCol:te,endRow:J,endCol:Y}),!1;const Un=z.toLowerCase();let Yt=!1;switch(Un){case"p":Yt=Us(Se,K,te,J,Y,qe);break;case"r":Yt=sb(K,te,J,Y,qe);break;case"n":Yt=v1(K,te,J,Y);break;case"b":Yt=ib(K,te,J,Y,qe);break;case"q":Yt=qu(K,te,J,Y,qe);break;case"k":Yt=E1(Se,K,te,J,Y);break}return Yt?Yt&&_e&&rb(K,te,J,Y,Se,qe)?($t||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:z,startRow:K,startCol:te,endRow:J,endCol:Y}),!1):Yt:($t||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:z,startRow:K,startCol:te,endRow:J,endCol:Y,playerColor:Se,pieceType:Un,targetPiece:qe[J][Y],targetPieceColor:qe[J][Y]?En(qe[J][Y]):null}),!1)},Vu=(z,K=o,te=c)=>{const J=[],Y=K[z.row][z.col];if(!Y||En(Y)!==te)return J;const _e=Y.toLowerCase();if(_e==="p"){const Se=te==="blue"?-1:1,qe=te==="blue"?6:1,$t=z.row+Se;if($t>=0&&$t<8&&os(Y,z.row,z.col,$t,z.col,!0,te,K,!0)&&J.push({row:$t,col:z.col}),z.row===qe){const Xt=z.row+2*Se;Xt>=0&&Xt<8&&os(Y,z.row,z.col,Xt,z.col,!0,te,K,!0)&&J.push({row:Xt,col:z.col})}for(const Xt of[-1,1]){const Un=z.col+Xt,Yt=z.row+Se;Un>=0&&Un<8&&Yt>=0&&Yt<8&&os(Y,z.row,z.col,Yt,Un,!0,te,K,!0)&&J.push({row:Yt,col:Un})}}else if(_e==="n"){const Se=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[qe,$t]of Se){const Xt=z.row+qe,Un=z.col+$t;Xt>=0&&Xt<8&&Un>=0&&Un<8&&os(Y,z.row,z.col,Xt,Un,!0,te,K,!0)&&J.push({row:Xt,col:Un})}}else for(let Se=0;Se<8;Se++)for(let qe=0;qe<8;qe++)os(Y,z.row,z.col,Se,qe,!0,te,K,!0)&&J.push({row:Se,col:qe});return J},_1=(z,K=o)=>{if(!ha(K,z))return!1;for(let te=0;te<8;te++)for(let J=0;J<8;J++){const Y=K[te][J];if(Y&&En(Y)===z&&Vu({row:te,col:J},K,z).length>0)return!1}return!0},C1=(z,K=o)=>{if(ha(K,z))return!1;for(let te=0;te<8;te++)for(let J=0;J<8;J++){const Y=K[te][J];if(Y&&En(Y)===z&&Vu({row:te,col:J},K,z).length>0)return!1}return!0},qg=(z,K)=>{if(h!=="active"||se.current)return;const te=o[z][K],J=te?En(te):null;if(u&&I.some(Y=>Y.row===z&&Y.col===K)){Ro(u,{row:z,col:K});return}if(te&&J===c){const Y=Vu({row:z,col:K});d({row:z,col:K}),A(Y);return}d(null),A([])},Ro=(z,K,te=!1)=>{const J=o[z.row][z.col];if(console.log("[MOVE ATTEMPT]",{from:z,to:K,piece:J,isAIMove:te,board:JSON.parse(JSON.stringify(o)),moveHistory:b}),!!J){if(J.toLowerCase()==="p"&&(En(J)==="blue"&&K.row===0||En(J)==="red"&&K.row===7)){T({from:z,to:K}),q(!0);return}Zh(z,K,"q",te)}};ae.current=Ro;const ob=O.useCallback((z,K,te=!1)=>{is(!0);const J=o.map(Se=>[...Se]),Y=J[z.row][z.col];if(!Y)return;J[K.row][K.col]=Y,J[z.row][z.col]=null,rl(J,z,K,Y);const _e=Qh(z,K);if(E(Se=>{const qe=[...Se,_e];return console.log("[MOVE HISTORY UPDATED]",qe),qe}),S({from:z,to:K}),d(null),A([]),b.length<10&&!te){const Se=bU(J,c==="blue"?"red":"blue");rn(Se).then(qe=>{qe&&qe.moves&&qe.moves.length>0&&(Sr(qe.moves.slice(0,3)),ss(!0),setTimeout(()=>ss(!1),5e3))})}sl(z,K,Y),l(Se=>{const qe=Se==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",qe),Gu(J,qe),qe}),Gu(J,c==="blue"?"red":"blue"),a(J),se.current=!1,Z.current=!1,re.current=!1,is(!1)},[o,c,b,rn]);O.useEffect(()=>{if(!se.current&&s==="ai"&&c==="red"&&!Z.current&&!bs)if(se.current=!0,p==="easy")setTimeout(()=>{const z=Ku(o);z?Ro(z.from,z.to,!0):se.current=!1},600);else{y("AI is calculating...");const z=bU(o,c);if(re.current)return;re.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:z,difficulty:p,movetime:3e3})}).then(te=>{if(te.ok)return te.json();throw new Error("API call failed")}).then(te=>{console.log("[DEBUG] Stockfish API response:",te);const J=te.bestmove||te.move;if(J&&J!=="(none)"&&J.length===4){const Y=J.charCodeAt(0)-97,_e=parseInt(J[1]),Se=J.charCodeAt(2)-97,qe=parseInt(J[3]),$t=8-_e,Xt=8-qe;if(console.log("[DEBUG] Parsed move:",{fromCol:Y,fromRowStockfish:_e,toCol:Se,toRowStockfish:qe,fromRow:$t,toRow:Xt}),Y>=0&&Y<8&&$t>=0&&$t<8&&Se>=0&&Se<8&&Xt>=0&&Xt<8){const Un={from:{row:$t,col:Y},to:{row:Xt,col:Se}},Yt=o[$t][Y];if(console.log("[DEBUG] Move validation:",{piece:Yt,moveObj:Un,isValid:Yt&&En(Yt)==="red"&&os(Yt,$t,Y,Xt,Se,!0,"red",o)}),Yt&&En(Yt)==="red"&&os(Yt,$t,Y,Xt,Se,!0,"red",o))console.log("[DEBUG] Executing Stockfish move:",Un),Ro(Un.from,Un.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const ic=Ku(o);ic&&Ro(ic.from,ic.to,!0),se.current=!1,re.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const Un=Ku(o);Un&&Ro(Un.from,Un.to,!0),se.current=!1,re.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const Y=Ku(o);Y&&Ro(Y.from,Y.to,!0),se.current=!1,re.current=!1}}).catch(te=>{console.error("[DEBUG] Stockfish API error:",te),y("AI error. Falling back to random moves.");const J=Ku(o);J&&Ro(J.from,J.to,!0),se.current=!1,re.current=!1})}},[c,s,p,o,B,nn]);const Gu=(z,K)=>{console.log("Checking game end for player:",K);const te=z.some(Y=>Y.some(_e=>_e==="k")),J=z.some(Y=>Y.some(_e=>_e==="K"));if(!te)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),y("King captured! Red wins!"),sc("loss"),ye(!0),setTimeout(()=>ye(!1),3e3),"checkmate";if(!J)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),y("King captured! You win!"),sc("win"),ye(!0),setTimeout(()=>ye(!1),3e3),"checkmate";if(console.log("Is king in check:",ha(z,K)),_1(K,z)){console.log("[GAME END] CHECKMATE",{winner:K==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(z)),moveHistory:b}),f("checkmate");const Y=K==="blue"?"red":"blue";return Y==="blue"?(y("Checkmate! You win!"),Ln("checkmate"),cb(!0),ab(),sc("win"),ye(!0),setTimeout(()=>ye(!1),3e3)):(y(`Checkmate! ${Y==="red"?"AI":"Opponent"} wins!`),Ln("checkmate"),lb(!0),sc("loss"),ye(!0),setTimeout(()=>ye(!1),3e3)),"checkmate"}return C1(K,z)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(z)),moveHistory:b}),f("stalemate"),y("Stalemate! Game is a draw."),sc("draw"),ye(!0),setTimeout(()=>ye(!1),3e3),"stalemate"):(ha(z,K)?(console.log("CHECK detected!"),Ln("check"),y(`${K==="blue"?"Blue":"Red"} is in check!`)):y("Your turn"),null)},Ku=z=>{const K=[];for(let Y=0;Y<8;Y++)for(let _e=0;_e<8;_e++){const Se=z[Y][_e];Se&&En(Se)==="red"&&K.push({row:Y,col:_e})}for(let Y=K.length-1;Y>0;Y--){const _e=Math.floor(Math.random()*(Y+1));[K[Y],K[_e]]=[K[_e],K[Y]]}const te=[],J=[];for(const Y of K){const _e=Vu(Y,z,"red");for(const Se of _e){const qe=z[Se.row][Se.col];if(qe&&En(qe)==="blue"){const Xt={p:100,n:320,b:330,r:500,q:900,k:2e4}[qe.toLowerCase()]||0;te.push({from:Y,to:Se,value:Xt})}else J.push({from:Y,to:Se})}}if(te.length>0&&Math.random()<.3){te.sort((Y,_e)=>Y.value-_e.value);for(const Y of te){const _e=z.map(qe=>[...qe]),Se=_e[Y.from.row][Y.from.col];if(_e[Y.to.row][Y.to.col]=Se,_e[Y.from.row][Y.from.col]=null,!ha(_e,"red"))return{from:Y.from,to:Y.to}}}for(const Y of J){const _e=z.map(qe=>[...qe]),Se=_e[Y.from.row][Y.from.col];if(_e[Y.to.row][Y.to.col]=Se,_e[Y.from.row][Y.from.col]=null,!ha(_e,"red"))return Y}te.sort((Y,_e)=>Y.value-_e.value);for(const Y of te){const _e=z.map(qe=>[...qe]),Se=_e[Y.from.row][Y.from.col];if(_e[Y.to.row][Y.to.col]=Se,_e[Y.from.row][Y.from.col]=null,!ha(_e,"red"))return{from:Y.from,to:Y.to}}return null},S1=()=>{a(JSON.parse(JSON.stringify(wU))),l("blue"),d(null),f("active"),E([]),A([]),S(null),P(!1),y("Select game mode"),H({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),To(Gh()),se.current&&(se.current=!1)},A1=()=>{if(T1(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){P(!1),ee(!1);return}P(!0),ee(!1),y("Game started! Your turn");const z=Gh();To(z),console.log("[DEBUG] Game started with chessboard:",z)},vk=z=>`${z.slice(0,6)}...${z.slice(-4)}`,Ek=(z,K)=>{const te=o[z][K],J=(u==null?void 0:u.row)===z&&(u==null?void 0:u.col)===K,Y=I.some(Se=>Se.row===z&&Se.col===K),_e=x&&(x.from.row===z&&x.from.col===K||x.to.row===z&&x.to.col===K);return m.jsxs("div",{className:`square ${J?"selected":""} ${Y?"legal-move":""} ${_e?"last-move":""}`,onClick:()=>qg(z,K),children:[te&&m.jsx("div",{className:"piece",style:{backgroundImage:bv[te]?`url(${bv[te]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),Y&&m.jsx("div",{className:"legal-move-indicator"})]},`${z}-${K}`)},_k=()=>{if(!U||!j)return null;const z=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:z.map(K=>m.jsx("div",{className:"promotion-piece",onClick:()=>{Zh(j.from,j.to,K),q(!1),T(null)},style:{backgroundImage:bv[K]?`url(${bv[K]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},K))})]})})},[Ck,Sk]=O.useState(null),I1=(z=!1,K="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${z?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:r5e.map(te=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>Sk(te.key),children:[m.jsx("img",{src:te.img,alt:te.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:te.name}),Ck===te.key&&m.jsx("div",{className:"piece-gallery-desc",children:te.desc})]},te.key))}),m.jsx("div",{className:"piece-gallery-tip",children:K})]}),N1=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),m.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",m.jsx("br",{}),"Good luck, have fun!"]}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{A1()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Game"]})]})})}),rl=(z,K,te,J)=>{if(J.toLowerCase()==="p"&&(En(J)==="blue"&&te.row===0||En(J)==="red"&&te.row===7)){const Y=En(J)==="blue"?"q":"Q";z[te.row][te.col]=Y}J.toLowerCase()==="k"&&Math.abs(K.col-te.col)===2&&(te.col===6?(z[K.row][7]=null,z[K.row][5]=En(J)==="blue"?"r":"R"):te.col===2&&(z[K.row][0]=null,z[K.row][3]=En(J)==="blue"?"r":"R"))},Qh=(z,K,te,J)=>{const Y=Hg(z.row,z.col),_e=Hg(K.row,K.col);return`${Y}-${_e}`},sl=(z,K,te)=>{const J={...B};te.toLowerCase()==="k"?En(te)==="blue"?J.blueKingMoved=!0:J.redKingMoved=!0:te.toLowerCase()==="r"&&(En(te)==="blue"?(z.col===0&&(J.blueRooksMove.left=!0),z.col===7&&(J.blueRooksMove.right=!0)):(z.col===0&&(J.redRooksMove.left=!0),z.col===7&&(J.redRooksMove.right=!0))),te.toLowerCase()==="p"&&Math.abs(z.row-K.row)===2?J.lastPawnDoubleMove={row:K.row,col:K.col}:J.lastPawnDoubleMove=null,H(J)},Zh=(z,K,te="q",J=!1)=>{o[z.row][z.col];const _e=o[K.row][K.col]!==null;if(Ln(_e?"capture":"move"),_e){$({row:K.row,col:K.col,show:!0}),setTimeout(()=>{ob(z,K,J),$(null)},500);return}ob(z,K,J)},Ln=z=>{if(!zg)return;let K="";switch(z){case"move":K="/images/move.mp3";break;case"capture":K="/images/capture.mp3";break;case"check":K="/images/play.mp3";break;case"checkmate":K="/images/victory.mp3";break;case"victory":K="/images/victory.mp3";break;default:K="/images/move.mp3"}new Audio(K).play().catch(()=>{})},ab=()=>{if(tb){Ln("victory");for(let z=0;z<50;z++)setTimeout(()=>{const K=document.createElement("div");K.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),3e3)},z*100);setTimeout(()=>nb(!1),5e3)}},[Yu,cb]=O.useState(!1),[x1,lb]=O.useState(!1),Vg=()=>{cb(!1),lb(!1)},Gg=()=>{Vg(),S1()},Xh=()=>{Vg(),P(!1)},T1=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Jh=s==="online";return m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${ze?" chess-dark-mode":""}`,children:[!n&&m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[m.jsx("button",{className:"dark-mode-toggle",onClick:Kt,title:ze?"Switch to light mode":"Switch to dark mode","aria-label":ze?"Switch to light mode":"Switch to dark mode",children:ze?"":""}),e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:""})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Array.isArray(_)&&_.slice(0,8).map((z,K)=>{if(typeof z=="object"&&z!==null&&"username"in z&&"wins"in z&&"losses"in z&&"draws"in z&&"points"in z){const te=z;return m.jsxs("tr",{children:[m.jsx("td",{children:K+1}),m.jsx("td",{children:vk(te.username)}),m.jsx("td",{children:te.points})]},te.username)}return null})})]})})]}),D&&m.jsxs("div",{className:"move-history-compact",children:[m.jsx("div",{className:"move-history-title",children:"Moves"}),m.jsx("ul",{className:"move-history-list-compact",children:b.slice().reverse().map((z,K)=>m.jsx("li",{children:z},b.length-1-K))})]})]}),m.jsxs("div",{className:"center-area",children:[D&&m.jsxs("div",{className:"game-info-compact",children:[m.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:[c==="blue"?"Blue":"Red"," to move"]}),s===wI.AI&&m.jsxs("span",{className:"mode-play",children:[p==="easy"?"Easy":"Hard"," AI"]}),Jh&&m.jsxs("span",{className:"wager-display",children:["Wager: ",k," ETH"]})]}),D?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${zu})`},children:[Array.from({length:8},(z,K)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(te,J)=>Ek(K,J))},K)),N&&N.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${N.row*12.5}%`,left:`${N.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls-compact",children:[m.jsx("button",{onClick:Gg,children:"New Game"}),m.jsx("button",{onClick:Xh,children:"Menu"}),m.jsx("button",{onClick:()=>Ne(!0),children:"Pieces"})]})]}):de?N1():Jh?m.jsx(hq,{onClose:t,onMinimize:e,fullscreen:n}):m.jsxs("div",{className:"game-mode-panel-streamlined",children:[m.jsxs("div",{className:"mode-selection-compact",children:[m.jsx("button",{className:`mode-btn-compact ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS AI"}),m.jsx("button",{className:`mode-btn-compact ${Jh?"selected":""}`,onClick:()=>i("online"),children:"PvP"})]}),s===wI.AI&&m.jsx("button",{className:"start-btn-compact",onClick:()=>ee(!0),children:"Start Game"}),Jh&&m.jsxs("div",{className:"pvp-info",children:[m.jsx("p",{children:"Challenge other players with ETH wagers"}),m.jsx("p",{children:"Create or join games instantly"})]}),m.jsxs("div",{className:"help-section-compact",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"help-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Chess:"})," Capture your opponent's king. Each piece moves uniquely - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Multiplayer:"})," Connect your wallet to play PvP games with ETH wagers. Win games to claim your opponent's wager and climb the leaderboard."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"AI Mode:"})," Practice against our LawbBot AI. Choose Easy or Hard difficulty. Wins earn points on the leaderboard."]})]})]})]})]}),m.jsx("div",{className:"right-sidebar",children:m.jsx("div",{className:"piece-gallery-panel",children:I1(!0)})})]}),he&&m.jsx("div",{className:"gallery-modal-overlay",onClick:()=>Ne(!1),children:m.jsxs("div",{className:"gallery-modal",onClick:z=>z.stopPropagation(),children:[m.jsx("button",{className:"close-modal-btn",onClick:()=>Ne(!1),children:""}),I1(!1)]})}),_k(),le&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),Yu&&tb&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:Gg,children:"New Game"}),m.jsx("button",{onClick:Xh,children:"Back to Menu"})]})]}),x1&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(z=>m.jsx("div",{className:"blood-drip",style:{left:`${10+z*14}%`,animationDelay:`${.5+z*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},z))}),m.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Gg,children:"New Game"}),m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Xh,children:"Back to Menu"})]})]})]})]})};function bU(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const vU=()=>{const[t,e]=O.useState("singleplayer");return m.jsx("div",{className:"chess-page",children:m.jsx("div",{className:"chess-content",children:t==="singleplayer"?m.jsx(o5e,{onClose:()=>{}}):m.jsx(hq,{onClose:()=>{},onMinimize:()=>{},fullscreen:!1})})})},a5e=new cae,c5e=typeof window<"u"&&window.location.hostname.startsWith("chess."),l5e=()=>gDe("(max-width: 768px)")?m.jsx(pDe,{}):m.jsx(oDe,{});UI.createRoot(document.getElementById("root")).render(m.jsx(ki.StrictMode,{children:m.jsx(Soe,{config:lq.wagmiConfig,children:m.jsx(Nae,{client:a5e,children:m.jsx(sDe,{children:m.jsx(tDe,{children:c5e?m.jsx(eE,{path:"/*",element:m.jsx(vU,{})}):m.jsxs(m.Fragment,{children:[m.jsx(eE,{path:"/",element:m.jsx(l5e,{})}),m.jsx(eE,{path:"/chess",element:m.jsx(vU,{})})]})})})})})}));export{kMe as $,Be as A,it as B,Oe as C,Xe as D,my as E,tT as F,jm as G,qo as H,Dpe as I,hn as J,MMe as K,QT as L,$r as M,Rpe as N,pe as O,dl as P,Qv as Q,St as R,Yo as S,ei as T,dge as U,by as V,Zr as W,PMe as X,Dr as Y,Nh as Z,Ta as _,Xv as a,kH as a0,ZT as a1,lg as a2,hs as a3,x5e as a4,Oc as a5,Ya as a6,vw as a7,He as a8,pr as a9,OU as aA,E5e as aB,rw as aC,Wee as aD,hoe as aE,So as aF,_o as aG,NF as aH,dse as aI,xl as aa,vF as ab,SC as ac,ue as ad,FP as ae,Er as af,tne as ag,wC as ah,XP as ai,one as aj,N0 as ak,wo as al,Fu as am,ly as an,Ka as ao,D1e as ap,vMe as aq,G5 as ar,dz as as,S1e as at,$1e as au,EMe as av,bMe as aw,i1 as ax,CMe as ay,_Me as az,pn as b,ke as c,Qe as d,L as e,jn as f,kc as g,$Me as h,jc as i,Ri as j,ot as k,ti as l,wCe as m,Ua as n,_ke as o,je as p,Pa as q,DMe as r,Qt as s,W7 as t,Dn as u,R$ as v,qi as w,RMe as x,ws as y,ms as z};
