const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-ChPJ8VxQ.js","assets/if-defined-U-jzKPEt.js","assets/index-ufdfdRFl.js","assets/index-DUUe5A25.js","assets/ref-7945653W.js","assets/index-DOP4aTiq.js","assets/index-BXwhysGf.js","assets/index-BiEu38dF.js","assets/index-DHCmVMDo.js","assets/index-bFe-e753.js","assets/index-DMIJenPI.js","assets/index-1wloAXDV.js","assets/email-DRzGxNKH.js","assets/index-Clh8imFv.js","assets/socials-DiHqeHgA.js","assets/index-kRfTtZ2_.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-Ba7S0u5f.js","assets/index-C-x_3MZB.js","assets/index-DaUz8qDa.js","assets/index-cHUbtX8a.js","assets/swaps-B07cUlLA.js","assets/index-kRx44LPR.js","assets/index-qhHqIexG.js","assets/index-49ZXldME.js","assets/send-BBO5Ae80.js","assets/index-DOKYdTbG.js","assets/index-CzW4qON8.js","assets/receive-CJyZUYgV.js","assets/index-BxXg8Rx5.js","assets/onramp-B_DfNwPr.js","assets/index-CJuFin8s.js","assets/index-DtZj8dyH.js","assets/index-BwUng3hc.js","assets/transactions-1D3-embY.js","assets/index-DxbxHnFP.js","assets/index-CK2kkLG5.js","assets/index-BwuV5ITC.js","assets/index-DzZyclOG.js","assets/index-DF8D1quv.js","assets/w3m-modal-CfCTB779.js"])))=>i.map(i=>d[i]);
var are=Object.defineProperty;var J$=t=>{throw TypeError(t)};var cre=(t,e,n)=>e in t?are(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var te=(t,e,n)=>cre(t,typeof e!="symbol"?e+"":e,n),ER=(t,e,n)=>e.has(t)||J$("Cannot "+n);var C=(t,e,n)=>(ER(t,e,"read from private field"),n?n.call(t):e.get(t)),Q=(t,e,n)=>e.has(t)?J$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),L=(t,e,n,r)=>(ER(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),he=(t,e,n)=>(ER(t,e,"access private method"),n);var xd=(t,e,n,r)=>({set _(s){L(t,e,s,n)},get _(){return C(t,e,r)}});function lre(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function im(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function fz(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var pz={exports:{}},lN={},gz={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B_=Symbol.for("react.element"),ure=Symbol.for("react.portal"),dre=Symbol.for("react.fragment"),hre=Symbol.for("react.strict_mode"),fre=Symbol.for("react.profiler"),pre=Symbol.for("react.provider"),gre=Symbol.for("react.context"),mre=Symbol.for("react.forward_ref"),yre=Symbol.for("react.suspense"),wre=Symbol.for("react.memo"),bre=Symbol.for("react.lazy"),Z$=Symbol.iterator;function vre(t){return t===null||typeof t!="object"?null:(t=Z$&&t[Z$]||t["@@iterator"],typeof t=="function"?t:null)}var mz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yz=Object.assign,wz={};function sb(t,e,n){this.props=t,this.context=e,this.refs=wz,this.updater=n||mz}sb.prototype.isReactComponent={};sb.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sb.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bz(){}bz.prototype=sb.prototype;function G5(t,e,n){this.props=t,this.context=e,this.refs=wz,this.updater=n||mz}var q5=G5.prototype=new bz;q5.constructor=G5;yz(q5,sb.prototype);q5.isPureReactComponent=!0;var X$=Array.isArray,vz=Object.prototype.hasOwnProperty,V5={current:null},Ez={key:!0,ref:!0,__self:!0,__source:!0};function Cz(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)vz.call(e,r)&&!Ez.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:B_,type:t,key:i,ref:o,props:s,_owner:V5.current}}function Ere(t,e){return{$$typeof:B_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function K5(t){return typeof t=="object"&&t!==null&&t.$$typeof===B_}function Cre(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var eB=/\/+/g;function CR(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cre(""+t.key):e.toString(36)}function wS(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case B_:case ure:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+CR(o,0):r,X$(s)?(n="",t!=null&&(n=t.replace(eB,"$&/")+"/"),wS(s,e,n,"",function(l){return l})):s!=null&&(K5(s)&&(s=Ere(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(eB,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",X$(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+CR(i,a);o+=wS(i,e,n,c,s)}else if(c=vre(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+CR(i,a++),o+=wS(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function X1(t,e,n){if(t==null)return t;var r=[],s=0;return wS(t,r,"","",function(i){return e.call(n,i,s++)}),r}function _re(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ji={current:null},bS={transition:null},Are={ReactCurrentDispatcher:ji,ReactCurrentBatchConfig:bS,ReactCurrentOwner:V5};function _z(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:X1,forEach:function(t,e,n){X1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return X1(t,function(){e++}),e},toArray:function(t){return X1(t,function(e){return e})||[]},only:function(t){if(!K5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qt.Component=sb;Qt.Fragment=dre;Qt.Profiler=fre;Qt.PureComponent=G5;Qt.StrictMode=hre;Qt.Suspense=yre;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Are;Qt.act=_z;Qt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yz({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=V5.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)vz.call(e,c)&&!Ez.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:B_,type:t.type,key:s,ref:i,props:r,_owner:o}};Qt.createContext=function(t){return t={$$typeof:gre,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pre,_context:t},t.Consumer=t};Qt.createElement=Cz;Qt.createFactory=function(t){var e=Cz.bind(null,t);return e.type=t,e};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(t){return{$$typeof:mre,render:t}};Qt.isValidElement=K5;Qt.lazy=function(t){return{$$typeof:bre,_payload:{_status:-1,_result:t},_init:_re}};Qt.memo=function(t,e){return{$$typeof:wre,type:t,compare:e===void 0?null:e}};Qt.startTransition=function(t){var e=bS.transition;bS.transition={};try{t()}finally{bS.transition=e}};Qt.unstable_act=_z;Qt.useCallback=function(t,e){return ji.current.useCallback(t,e)};Qt.useContext=function(t){return ji.current.useContext(t)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(t){return ji.current.useDeferredValue(t)};Qt.useEffect=function(t,e){return ji.current.useEffect(t,e)};Qt.useId=function(){return ji.current.useId()};Qt.useImperativeHandle=function(t,e,n){return ji.current.useImperativeHandle(t,e,n)};Qt.useInsertionEffect=function(t,e){return ji.current.useInsertionEffect(t,e)};Qt.useLayoutEffect=function(t,e){return ji.current.useLayoutEffect(t,e)};Qt.useMemo=function(t,e){return ji.current.useMemo(t,e)};Qt.useReducer=function(t,e,n){return ji.current.useReducer(t,e,n)};Qt.useRef=function(t){return ji.current.useRef(t)};Qt.useState=function(t){return ji.current.useState(t)};Qt.useSyncExternalStore=function(t,e,n){return ji.current.useSyncExternalStore(t,e,n)};Qt.useTransition=function(){return ji.current.useTransition()};Qt.version="18.3.1";gz.exports=Qt;var D=gz.exports;const Zo=im(D),Sre=lre({__proto__:null,default:Zo},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xre=D,Ire=Symbol.for("react.element"),Nre=Symbol.for("react.fragment"),Tre=Object.prototype.hasOwnProperty,Rre=xre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Pre={key:!0,ref:!0,__self:!0,__source:!0};function Az(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Tre.call(e,r)&&!Pre.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Ire,type:t,key:i,ref:o,props:s,_owner:Rre.current}}lN.Fragment=Nre;lN.jsx=Az;lN.jsxs=Az;pz.exports=lN;var m=pz.exports,tB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sz={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie=function(t,e){if(!t)throw ib(e)},ib=function(t){return new Error("Firebase Database ("+Sz.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Ore=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Y5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ore(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new kre;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kre extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Iz=function(t){const e=xz(t);return Y5.encodeByteArray(e,!0)},hx=function(t){return Iz(t).replace(/\./g,"")},S2=function(t){try{return Y5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dre(t){return Nz(void 0,t)}function Nz(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Mre(n)||(t[n]=Nz(t[n],e[n]));return t}function Mre(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ure=()=>Lre().__FIREBASE_DEFAULTS__,$re=()=>{if(typeof process>"u"||typeof tB>"u")return;const t=tB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Bre=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&S2(t[1]);return e&&JSON.parse(e)},Tz=()=>{try{return Ure()||$re()||Bre()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Fre=t=>{var e,n;return(n=(e=Tz())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jre=t=>{const e=Fre(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Rz=()=>{var t;return(t=Tz())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wre(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[hx(JSON.stringify(n)),hx(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zre(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Pz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zre())}function Hre(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gre(){return Sz.NODE_ADMIN===!0}function qre(){try{return typeof indexedDB=="object"}catch{return!1}}function Vre(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kre="FirebaseError";class j_ extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Kre,Object.setPrototypeOf(this,j_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oz.prototype.create)}}class Oz{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Yre(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new j_(s,a,r)}}function Yre(t,e){return t.replace(Qre,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Qre=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){return JSON.parse(t)}function ss(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kz=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=LE(S2(i[0])||""),n=LE(S2(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Jre=function(t){const e=kz(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Zre=function(t){const e=kz(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function dw(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function nB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fx(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function x2(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(rB(i)&&rB(o)){if(!x2(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function rB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xre(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ese{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function uN(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tse=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Ie(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dN=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(t){return t&&t._delegate?t._delegate:t}class UE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nse{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new F_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sse(e))try{this.getOrInitializeService({instanceIdentifier:rp})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=rp){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rp){return this.instances.has(e)}getOptions(e=rp){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rse(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rp){return this.component?this.component.multipleInstances?e:rp:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rse(t){return t===rp?void 0:t}function sse(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ise{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nse(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tr||(tr={}));const ose={debug:tr.DEBUG,verbose:tr.VERBOSE,info:tr.INFO,warn:tr.WARN,error:tr.ERROR,silent:tr.SILENT},ase=tr.INFO,cse={[tr.DEBUG]:"log",[tr.VERBOSE]:"log",[tr.INFO]:"info",[tr.WARN]:"warn",[tr.ERROR]:"error"},lse=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=cse[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dz{constructor(e){this.name=e,this._logLevel=ase,this._logHandler=lse,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ose[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tr.DEBUG,...e),this._logHandler(this,tr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tr.VERBOSE,...e),this._logHandler(this,tr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tr.INFO,...e),this._logHandler(this,tr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tr.WARN,...e),this._logHandler(this,tr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tr.ERROR,...e),this._logHandler(this,tr.ERROR,...e)}}const use=(t,e)=>e.some(n=>t instanceof n);let sB,iB;function dse(){return sB||(sB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hse(){return iB||(iB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mz=new WeakMap,I2=new WeakMap,Lz=new WeakMap,_R=new WeakMap,Q5=new WeakMap;function fse(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Gh(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Mz.set(n,t)}).catch(()=>{}),Q5.set(e,t),e}function pse(t){if(I2.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});I2.set(t,e)}let N2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return I2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Lz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gse(t){N2=t(N2)}function mse(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(AR(this),e,...n);return Lz.set(r,e.sort?e.sort():[e]),Gh(r)}:hse().includes(t)?function(...e){return t.apply(AR(this),e),Gh(Mz.get(this))}:function(...e){return Gh(t.apply(AR(this),e))}}function yse(t){return typeof t=="function"?mse(t):(t instanceof IDBTransaction&&pse(t),use(t,dse())?new Proxy(t,N2):t)}function Gh(t){if(t instanceof IDBRequest)return fse(t);if(_R.has(t))return _R.get(t);const e=yse(t);return e!==t&&(_R.set(t,e),Q5.set(e,t)),e}const AR=t=>Q5.get(t);function wse(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Gh(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Gh(o.result),c.oldVersion,c.newVersion,Gh(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const bse=["get","getKey","getAll","getAllKeys","count"],vse=["put","add","delete","clear"],SR=new Map;function oB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(SR.get(e))return SR.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=vse.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||bse.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return SR.set(e,i),i}gse(t=>({...t,get:(e,n,r)=>oB(e,n)||t.get(e,n,r),has:(e,n)=>!!oB(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ese{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Cse(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Cse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const T2="@firebase/app",aB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=new Dz("@firebase/app"),_se="@firebase/app-compat",Ase="@firebase/analytics-compat",Sse="@firebase/analytics",xse="@firebase/app-check-compat",Ise="@firebase/app-check",Nse="@firebase/auth",Tse="@firebase/auth-compat",Rse="@firebase/database",Pse="@firebase/data-connect",Ose="@firebase/database-compat",kse="@firebase/functions",Dse="@firebase/functions-compat",Mse="@firebase/installations",Lse="@firebase/installations-compat",Use="@firebase/messaging",$se="@firebase/messaging-compat",Bse="@firebase/performance",Fse="@firebase/performance-compat",jse="@firebase/remote-config",Wse="@firebase/remote-config-compat",zse="@firebase/storage",Hse="@firebase/storage-compat",Gse="@firebase/firestore",qse="@firebase/vertexai-preview",Vse="@firebase/firestore-compat",Kse="firebase",Yse="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="[DEFAULT]",Qse={[T2]:"fire-core",[_se]:"fire-core-compat",[Sse]:"fire-analytics",[Ase]:"fire-analytics-compat",[Ise]:"fire-app-check",[xse]:"fire-app-check-compat",[Nse]:"fire-auth",[Tse]:"fire-auth-compat",[Rse]:"fire-rtdb",[Pse]:"fire-data-connect",[Ose]:"fire-rtdb-compat",[kse]:"fire-fn",[Dse]:"fire-fn-compat",[Mse]:"fire-iid",[Lse]:"fire-iid-compat",[Use]:"fire-fcm",[$se]:"fire-fcm-compat",[Bse]:"fire-perf",[Fse]:"fire-perf-compat",[jse]:"fire-rc",[Wse]:"fire-rc-compat",[zse]:"fire-gcs",[Hse]:"fire-gcs-compat",[Gse]:"fire-fst",[Vse]:"fire-fst-compat",[qse]:"fire-vertex","fire-js":"fire-js",[Kse]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E=new Map,Jse=new Map,P2=new Map;function cB(t,e){try{t.container.addComponent(e)}catch(n){cd.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function px(t){const e=t.name;if(P2.has(e))return cd.debug(`There were multiple attempts to register component ${e}.`),!1;P2.set(e,t);for(const n of $E.values())cB(n,t);for(const n of Jse.values())cB(n,t);return!0}function Zse(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xse={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qh=new Oz("app","Firebase",Xse);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eie{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new UE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tie=Yse;function Uz(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:R2,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw qh.create("bad-app-name",{appName:String(s)});if(n||(n=Rz()),!n)throw qh.create("no-options");const i=$E.get(s);if(i){if(x2(n,i.options)&&x2(r,i.config))return i;throw qh.create("duplicate-app",{appName:s})}const o=new ise(s);for(const c of P2.values())o.addComponent(c);const a=new eie(n,r,o);return $E.set(s,a),a}function $z(t=R2){const e=$E.get(t);if(!e&&t===R2&&Rz())return Uz();if(!e)throw qh.create("no-app",{appName:t});return e}function nie(){return Array.from($E.values())}function qy(t,e,n){var r;let s=(r=Qse[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cd.warn(a.join(" "));return}px(new UE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rie="firebase-heartbeat-database",sie=1,BE="firebase-heartbeat-store";let xR=null;function Bz(){return xR||(xR=wse(rie,sie,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(BE)}catch(n){console.warn(n)}}}}).catch(t=>{throw qh.create("idb-open",{originalErrorMessage:t.message})})),xR}async function iie(t){try{const n=(await Bz()).transaction(BE),r=await n.objectStore(BE).get(Fz(t));return await n.done,r}catch(e){if(e instanceof j_)cd.warn(e.message);else{const n=qh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cd.warn(n.message)}}}async function lB(t,e){try{const r=(await Bz()).transaction(BE,"readwrite");await r.objectStore(BE).put(e,Fz(t)),await r.done}catch(n){if(n instanceof j_)cd.warn(n.message);else{const r=qh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cd.warn(r.message)}}}function Fz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oie=1024,aie=30*24*60*60*1e3;class cie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=uB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=aie}),this._storage.overwrite(this._heartbeatsCache))}catch(r){cd.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=uB(),{heartbeatsToSend:r,unsentEntries:s}=lie(this._heartbeatsCache.heartbeats),i=hx(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return cd.warn(n),""}}}function uB(){return new Date().toISOString().substring(0,10)}function lie(t,e=oie){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),dB(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),dB(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qre()?Vre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iie(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return lB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function dB(t){return hx(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function die(t){px(new UE("platform-logger",e=>new Ese(e),"PRIVATE")),px(new UE("heartbeat",e=>new cie(e),"PRIVATE")),qy(T2,aB,t),qy(T2,aB,"esm2017"),qy("fire-js","")}die("");var hie="firebase",fie="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qy(hie,fie,"app");var hB={};const fB="@firebase/database",pB="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jz="";function pie(t){jz=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gie{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ss(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:LE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mie{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ru(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gie(e)}}catch{}return new mie},_p=Wz("localStorage"),yie=Wz("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=new Dz("@firebase/database"),wie=function(){let t=1;return function(){return t++}}(),zz=function(t){const e=tse(t),n=new ese;n.update(e);const r=n.digest();return Y5.encodeByteArray(r)},W_=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=W_.apply(null,r):typeof r=="object"?e+=ss(r):e+=r,e+=" "}return e};let tE=null,gB=!0;const bie=function(t,e){Ie(!0,"Can't turn on custom loggers persistently."),Vy.logLevel=tr.VERBOSE,tE=Vy.log.bind(Vy)},Fs=function(...t){if(gB===!0&&(gB=!1,tE===null&&yie.get("logging_enabled")===!0&&bie()),tE){const e=W_.apply(null,t);tE(e)}},z_=function(t){return function(...e){Fs(t,...e)}},O2=function(...t){const e="FIREBASE INTERNAL ERROR: "+W_(...t);Vy.error(e)},ld=function(...t){const e=`FIREBASE FATAL ERROR: ${W_(...t)}`;throw Vy.error(e),new Error(e)},Li=function(...t){const e="FIREBASE WARNING: "+W_(...t);Vy.warn(e)},vie=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Li("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},J5=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Eie=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},hw="[MIN_NAME]",Sg="[MAX_NAME]",om=function(t,e){if(t===e)return 0;if(t===hw||e===Sg)return-1;if(e===hw||t===Sg)return 1;{const n=mB(t),r=mB(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Cie=function(t,e){return t===e?0:t<e?-1:1},Gb=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ss(e))},Z5=function(t){if(typeof t!="object"||t===null)return ss(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ss(e[r]),n+=":",n+=Z5(t[e[r]]);return n+="}",n},Hz=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Ks(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Gz=function(t){Ie(!J5(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},_ie=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Aie=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Sie(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const xie=new RegExp("^-?(0*)\\d{1,10}$"),Iie=-2147483648,Nie=2147483647,mB=function(t){if(xie.test(t)){const e=Number(t);if(e>=Iie&&e<=Nie)return e}return null},ab=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Li("Exception was thrown by user callback.",n),e},Math.floor(0))}},Tie=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},nE=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rie{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Li(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pie{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Fs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Li(e)}}class vS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}vS.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5="5",qz="v",Vz="s",Kz="r",Yz="f",Qz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Jz="ls",Zz="p",k2="ac",Xz="websocket",eH="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tH{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_p.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_p.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Oie(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function nH(t,e,n){Ie(typeof e=="string","typeof type must == string"),Ie(typeof n=="object","typeof params must == object");let r;if(e===Xz)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===eH)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Oie(t)&&(n.ns=t.namespace);const s=[];return Ks(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kie{constructor(){this.counters_={}}incrementCounter(e,n=1){ru(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Dre(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR={},NR={};function eM(t){const e=t.toString();return IR[e]||(IR[e]=new kie),IR[e]}function Die(t,e){const n=t.toString();return NR[n]||(NR[n]=e()),NR[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mie{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&ab(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yB="start",Lie="close",Uie="pLPCommand",$ie="pRTLPCB",rH="id",sH="pw",iH="ser",Bie="cb",Fie="seg",jie="ts",Wie="d",zie="dframe",oH=1870,aH=30,Hie=oH-aH,Gie=25e3,qie=3e4;class _y{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=z_(e),this.stats_=eM(n),this.urlFn=c=>(this.appCheckToken&&(c[k2]=this.appCheckToken),nH(n,eH,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Mie(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(qie)),Eie(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tM((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===yB)this.id=a,this.password=c;else if(o===Lie)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[yB]="t",r[iH]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Bie]=this.scriptTagHolder.uniqueCallbackIdentifier),r[qz]=X5,this.transportSessionId&&(r[Vz]=this.transportSessionId),this.lastSessionId&&(r[Jz]=this.lastSessionId),this.applicationId&&(r[Zz]=this.applicationId),this.appCheckToken&&(r[k2]=this.appCheckToken),typeof location<"u"&&location.hostname&&Qz.test(location.hostname)&&(r[Kz]=Yz);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_y.forceAllow_=!0}static forceDisallow(){_y.forceDisallow_=!0}static isAvailable(){return _y.forceAllow_?!0:!_y.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!_ie()&&!Aie()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ss(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Iz(n),s=Hz(r,Hie);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[zie]="t",r[rH]=e,r[sH]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ss(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class tM{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=wie(),window[Uie+this.uniqueCallbackIdentifier]=e,window[$ie+this.uniqueCallbackIdentifier]=n,this.myIFrame=tM.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Fs("frame writing exception"),a.stack&&Fs(a.stack),Fs(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Fs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[rH]=this.myID,e[sH]=this.myPW,e[iH]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+aH+r.length<=oH;){const o=this.pendingSegs.shift();r=r+"&"+Fie+s+"="+o.seg+"&"+jie+s+"="+o.ts+"&"+Wie+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Gie)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Fs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vie=16384,Kie=45e3;let gx=null;typeof MozWebSocket<"u"?gx=MozWebSocket:typeof WebSocket<"u"&&(gx=WebSocket);class Rc{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=z_(this.connId),this.stats_=eM(n),this.connURL=Rc.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[qz]=X5,typeof location<"u"&&location.hostname&&Qz.test(location.hostname)&&(o[Kz]=Yz),n&&(o[Vz]=n),r&&(o[Jz]=r),s&&(o[k2]=s),i&&(o[Zz]=i),nH(e,Xz,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_p.set("previous_websocket_failure",!0);try{let r;Gre(),this.mySock=new gx(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Rc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&gx!==null&&!Rc.forceDisallow_}static previouslyFailed(){return _p.isInMemoryStorage||_p.get("previous_websocket_failure")===!0}markConnectionHealthy(){_p.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=LE(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ie(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ss(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Hz(n,Vie);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Kie))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Rc.responsesRequiredToBeHealthy=2;Rc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[_y,Rc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Rc&&Rc.isAvailable();let r=n&&!Rc.previouslyFailed();if(e.webSocketOnly&&(n||Li("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Rc];else{const s=this.transports_=[];for(const i of FE.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);FE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}FE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yie=6e4,Qie=5e3,Jie=10*1024,Zie=100*1024,TR="t",wB="d",Xie="s",bB="r",eoe="e",vB="o",EB="a",CB="n",_B="p",toe="h";class noe{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=z_("c:"+this.id+":"),this.transportManager_=new FE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=nE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Zie?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Jie?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(TR in e){const n=e[TR];n===EB?this.upgradeIfSecondaryHealthy_():n===bB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===vB&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Gb("t",e),r=Gb("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:_B,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:EB,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:CB,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Gb("t",e),r=Gb("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Gb(TR,e);if(wB in e){const r=e[wB];if(n===toe){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===CB){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Xie?this.onConnectionShutdown_(r):n===bB?this.onReset_(r):n===eoe?O2("Server Error: "+r):n===vB?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O2("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),X5!==r&&Li("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),nE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Yie))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):nE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Qie))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:_B,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lH=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Ie(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Ie(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx extends lH{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Pz()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new mx}getInitialEvent(e){return Ie(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AB=32,SB=768;class jn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function bn(){return new jn("")}function Gt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function mf(t){return t.pieces_.length-t.pieceNum_}function rr(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new jn(t.pieces_,e)}function nM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function roe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function jE(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function uH(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new jn(e,0)}function kr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof jn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new jn(n,0)}function Yt(t){return t.pieceNum_>=t.pieces_.length}function Pi(t,e){const n=Gt(t),r=Gt(e);if(n===null)return e;if(n===r)return Pi(rr(t),rr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function soe(t,e){const n=jE(t,0),r=jE(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=om(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function rM(t,e){if(mf(t)!==mf(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function $a(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(mf(t)>mf(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class ioe{constructor(e,n){this.errorPrefix_=n,this.parts_=jE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=dN(this.parts_[r]);dH(this)}}function ooe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=dN(e),dH(t)}function aoe(t){const e=t.parts_.pop();t.byteLength_-=dN(e),t.parts_.length>0&&(t.byteLength_-=1)}function dH(t){if(t.byteLength_>SB)throw new Error(t.errorPrefix_+"has a key path longer than "+SB+" bytes ("+t.byteLength_+").");if(t.parts_.length>AB)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+AB+") or object contains a cycle "+sp(t))}function sp(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM extends lH{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new sM}getInitialEvent(e){return Ie(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=1e3,coe=60*5*1e3,xB=30*1e3,loe=1.3,uoe=3e4,doe="server_kill",IB=3;class Zu extends cH{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Zu.nextPersistentConnectionId_++,this.log_=z_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qb,this.maxReconnectDelay_=coe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sM.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&mx.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(ss(i)),Ie(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new F_,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ie(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Zu.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ru(e,"w")){const r=dw(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Li(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Zre(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=xB)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Jre(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ss(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):O2("Unrecognized action received from server: "+ss(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ie(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=qb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>uoe&&(this.reconnectDelay_=qb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*loe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Zu.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Ie(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Fs("getToken() completed but was canceled"):(Fs("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new noe(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Li(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(doe)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Li(d),c())}}}interrupt(e){Fs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Fs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],nB(this.interruptReasons_)&&(this.reconnectDelay_=qb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>Z5(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new jn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Fs("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=IB&&(this.reconnectDelay_=xB,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Fs("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=IB&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+jz.replace(/\./g,"-")]=1,Pz()?e["framework.cordova"]=1:Hre()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=mx.getInstance().currentlyOnline();return nB(this.interruptReasons_)&&e}}Zu.nextPersistentConnectionId_=0;Zu.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new qt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new qt(hw,e),s=new qt(hw,n);return this.compare(r,s)!==0}minPost(){return qt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eA;class hH extends hN{static get __EMPTY_NODE(){return eA}static set __EMPTY_NODE(e){eA=e}compare(e,n){return om(e.name,n.name)}isDefinedOn(e){throw ib("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return qt.MIN}maxPost(){return new qt(Sg,eA)}makePost(e,n){return Ie(typeof e=="string","KeyIndex indexValue must always be a string."),new qt(e,eA)}toString(){return".key"}}const Ky=new hH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ws{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ws.RED,this.left=s??yo.EMPTY_NODE,this.right=i??yo.EMPTY_NODE}copy(e,n,r,s,i){return new ws(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return yo.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return yo.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ws.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ws.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ws.RED=!0;ws.BLACK=!1;class hoe{copy(e,n,r,s,i){return this}insert(e,n,r){return new ws(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class yo{constructor(e,n=yo.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new yo(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ws.BLACK,null,null))}remove(e){return new yo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ws.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tA(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new tA(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new tA(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new tA(this.root_,null,this.comparator_,!0,e)}}yo.EMPTY_NODE=new hoe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function foe(t,e){return om(t.name,e.name)}function iM(t,e){return om(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D2;function poe(t){D2=t}const fH=function(t){return typeof t=="number"?"number:"+Gz(t):"string:"+t},pH=function(t){if(t.isLeafNode()){const e=t.val();Ie(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ru(e,".sv"),"Priority must be a string or number.")}else Ie(t===D2||t.isEmpty(),"priority of unexpected type.");Ie(t===D2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NB;class ys{constructor(e,n=ys.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ie(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),pH(this.priorityNode_)}static set __childrenNodeConstructor(e){NB=e}static get __childrenNodeConstructor(){return NB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ys(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ys.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Yt(e)?this:Gt(e)===".priority"?this.priorityNode_:ys.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ys.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Gt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ie(r!==".priority"||mf(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ys.__childrenNodeConstructor.EMPTY_NODE.updateChild(rr(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+fH(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Gz(this.value_):e+=this.value_,this.lazyHash_=zz(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ys.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ys.__childrenNodeConstructor?-1:(Ie(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=ys.VALUE_TYPE_ORDER.indexOf(n),i=ys.VALUE_TYPE_ORDER.indexOf(r);return Ie(s>=0,"Unknown leaf type: "+n),Ie(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ys.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gH,mH;function goe(t){gH=t}function moe(t){mH=t}class yoe extends hN{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?om(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return qt.MIN}maxPost(){return new qt(Sg,new ys("[PRIORITY-POST]",mH))}makePost(e,n){const r=gH(e);return new qt(n,new ys("[PRIORITY-POST]",r))}toString(){return".priority"}}const Dr=new yoe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const woe=Math.log(2);class boe{constructor(e){const n=i=>parseInt(Math.log(i)/woe,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const yx=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new ws(h,d.node,ws.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new ws(h,d.node,ws.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const w=d-p,y=d;d-=p;const b=s(w+1,y),v=t[w],A=n?n(v):v;f(new ws(A,v.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));g?h(w,ws.BLACK):(h(w,ws.BLACK),h(w,ws.RED))}return u},o=new boe(t.length),a=i(o);return new yo(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RR;const Lm={};class qu{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ie(Lm&&Dr,"ChildrenNode.ts has not been loaded"),RR=RR||new qu({".priority":Lm},{".priority":Dr}),RR}get(e){const n=dw(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof yo?n:null}hasIndex(e){return ru(this.indexSet_,e.toString())}addIndex(e,n){Ie(e!==Ky,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(qt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=yx(r,e.getCompare()):a=Lm;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new qu(u,l)}addToIndexes(e,n){const r=fx(this.indexes_,(s,i)=>{const o=dw(this.indexSet_,i);if(Ie(o,"Missing index implementation for "+i),s===Lm)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(qt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),yx(a,o.getCompare())}else return Lm;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new qt(e.name,a))),c.insert(e,e.node)}});return new qu(r,this.indexSet_)}removeFromIndexes(e,n){const r=fx(this.indexes_,s=>{if(s===Lm)return s;{const i=n.get(e.name);return i?s.remove(new qt(e.name,i)):s}});return new qu(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vb;class vt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&pH(this.priorityNode_),this.children_.isEmpty()&&Ie(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Vb||(Vb=new vt(new yo(iM),null,qu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Vb}updatePriority(e){return this.children_.isEmpty()?this:new vt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Vb:n}}getChild(e){const n=Gt(e);return n===null?this:this.getImmediateChild(n).getChild(rr(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ie(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new qt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Vb:this.priorityNode_;return new vt(s,o,i)}}updateChild(e,n){const r=Gt(e);if(r===null)return n;{Ie(Gt(e)!==".priority"||mf(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(rr(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Dr,(o,a)=>{n[o]=a.val(e),r++,i&&vt.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+fH(this.getPriority().val())+":"),this.forEachChild(Dr,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":zz(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new qt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new qt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new qt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,qt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,qt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===H_?-1:0}withIndex(e){if(e===Ky||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new vt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ky||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Dr),s=n.getIterator(Dr);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Ky?null:this.indexMap_.get(e.toString())}}vt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class voe extends vt{constructor(){super(new yo(iM),vt.EMPTY_NODE,qu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return vt.EMPTY_NODE}isEmpty(){return!1}}const H_=new voe;Object.defineProperties(qt,{MIN:{value:new qt(hw,vt.EMPTY_NODE)},MAX:{value:new qt(Sg,H_)}});hH.__EMPTY_NODE=vt.EMPTY_NODE;ys.__childrenNodeConstructor=vt;poe(H_);moe(H_);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eoe=!0;function ns(t,e=null){if(t===null)return vt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ie(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ys(n,ns(e))}if(!(t instanceof Array)&&Eoe){const n=[];let r=!1;if(Ks(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=ns(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new qt(o,c)))}}),n.length===0)return vt.EMPTY_NODE;const i=yx(n,foe,o=>o.name,iM);if(r){const o=yx(n,Dr.getCompare());return new vt(i,ns(e),new qu({".priority":o},{".priority":Dr}))}else return new vt(i,ns(e),qu.Default)}else{let n=vt.EMPTY_NODE;return Ks(t,(r,s)=>{if(ru(t,r)&&r.substring(0,1)!=="."){const i=ns(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(ns(e))}}goe(ns);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Coe extends hN{constructor(e){super(),this.indexPath_=e,Ie(!Yt(e)&&Gt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?om(e.name,n.name):i}makePost(e,n){const r=ns(e),s=vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new qt(n,s)}maxPost(){const e=vt.EMPTY_NODE.updateChild(this.indexPath_,H_);return new qt(Sg,e)}toString(){return jE(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _oe extends hN{compare(e,n){const r=e.node.compareTo(n.node);return r===0?om(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return qt.MIN}maxPost(){return qt.MAX}makePost(e,n){const r=ns(e);return new qt(n,r)}toString(){return".value"}}const Aoe=new _oe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yH(t){return{type:"value",snapshotNode:t}}function fw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function WE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function zE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Soe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Ie(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(WE(n,a)):Ie(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(fw(n,r)):o.trackChildChange(zE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Dr,(s,i)=>{n.hasChild(s)||r.trackChildChange(WE(s,i))}),n.isLeafNode()||n.forEachChild(Dr,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(zE(s,i,o))}else r.trackChildChange(fw(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?vt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.indexedFilter_=new oM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=HE.getStartPost_(e),this.endPost_=HE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new qt(n,r))||(r=vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=vt.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(vt.EMPTY_NODE);const i=this;return n.forEachChild(Dr,(o,a)=>{i.matches(new qt(o,a))||(s=s.updateImmediateChild(o,vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xoe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new HE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new qt(n,r))||(r=vt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=vt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=vt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(vt.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Ie(a.numChildren()===this.limit_,"");const c=new qt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(zE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(WE(n,d));const g=a.updateImmediateChild(n,vt.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(fw(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(WE(l.name,l.node)),i.trackChildChange(fw(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,vt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Dr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ie(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ie(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:hw}hasEnd(){return this.endSet_}getIndexEndValue(){return Ie(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ie(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Sg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ie(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Dr}copy(){const e=new aM;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ioe(t){return t.loadsAllData()?new oM(t.getIndex()):t.hasLimit()?new xoe(t):new HE(t)}function TB(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Dr?n="$priority":t.index_===Aoe?n="$value":t.index_===Ky?n="$key":(Ie(t.index_ instanceof Coe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ss(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ss(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ss(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ss(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ss(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function RB(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Dr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx extends cH{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=z_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ie(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=wx.getListenId_(e,r),a={};this.listens_[o]=a;const c=TB(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),dw(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=wx.getListenId_(e,n);delete this.listens_[r]}get(e){const n=TB(e._queryParams),r=e._path.toString(),s=new F_;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Xre(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=LE(a.responseText)}catch{Li("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Li("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Noe{constructor(){this.rootNode_=vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(){return{value:null,children:new Map}}function wH(t,e,n){if(Yt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Gt(e);t.children.has(r)||t.children.set(r,bx());const s=t.children.get(r);e=rr(e),wH(s,e,n)}}function M2(t,e,n){t.value!==null?n(e,t.value):Toe(t,(r,s)=>{const i=new jn(e.toString()+"/"+r);M2(s,i,n)})}function Toe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Roe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ks(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=10*1e3,Poe=30*1e3,Ooe=5*60*1e3;class koe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Roe(e);const r=PB+(Poe-PB)*Math.random();nE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ks(e,(s,i)=>{i>0&&ru(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),nE(this.reportStats_.bind(this),Math.floor(Math.random()*2*Ooe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dc;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Dc||(Dc={}));function cM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function lM(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function uM(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Dc.ACK_USER_WRITE,this.source=cM()}operationForChild(e){if(Yt(this.path)){if(this.affectedTree.value!=null)return Ie(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new jn(e));return new vx(bn(),n,this.revert)}}else return Ie(Gt(this.path)===e,"operationForChild called for unrelated child."),new vx(rr(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.source=e,this.path=n,this.type=Dc.LISTEN_COMPLETE}operationForChild(e){return Yt(this.path)?new GE(this.source,bn()):new GE(this.source,rr(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Dc.OVERWRITE}operationForChild(e){return Yt(this.path)?new xg(this.source,bn(),this.snap.getImmediateChild(e)):new xg(this.source,rr(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Dc.MERGE}operationForChild(e){if(Yt(this.path)){const n=this.children.subtree(new jn(e));return n.isEmpty()?null:n.value?new xg(this.source,bn(),n.value):new pw(this.source,bn(),n)}else return Ie(Gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pw(this.source,rr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Yt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Gt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Doe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Moe(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Soe(o.childName,o.snapshotNode))}),Kb(t,s,"child_removed",e,r,n),Kb(t,s,"child_added",e,r,n),Kb(t,s,"child_moved",i,r,n),Kb(t,s,"child_changed",e,r,n),Kb(t,s,"value",e,r,n),s}function Kb(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Uoe(t,a,c)),o.forEach(a=>{const c=Loe(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Loe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Uoe(t,e,n){if(e.childName==null||n.childName==null)throw ib("Should only compare child_ events.");const r=new qt(e.childName,e.snapshotNode),s=new qt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(t,e){return{eventCache:t,serverCache:e}}function rE(t,e,n,r){return fN(new yf(e,n,r),t.serverCache)}function bH(t,e,n,r){return fN(t.eventCache,new yf(e,n,r))}function Ex(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ig(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PR;const $oe=()=>(PR||(PR=new yo(Cie)),PR);class Xn{constructor(e,n=$oe()){this.value=e,this.children=n}static fromObject(e){let n=new Xn(null);return Ks(e,(r,s)=>{n=n.set(new jn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:bn(),value:this.value};if(Yt(e))return null;{const r=Gt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(rr(e),n);return i!=null?{path:kr(new jn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Yt(e))return this;{const n=Gt(e),r=this.children.get(n);return r!==null?r.subtree(rr(e)):new Xn(null)}}set(e,n){if(Yt(e))return new Xn(n,this.children);{const r=Gt(e),i=(this.children.get(r)||new Xn(null)).set(rr(e),n),o=this.children.insert(r,i);return new Xn(this.value,o)}}remove(e){if(Yt(e))return this.children.isEmpty()?new Xn(null):new Xn(null,this.children);{const n=Gt(e),r=this.children.get(n);if(r){const s=r.remove(rr(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Xn(null):new Xn(this.value,i)}else return this}}get(e){if(Yt(e))return this.value;{const n=Gt(e),r=this.children.get(n);return r?r.get(rr(e)):null}}setTree(e,n){if(Yt(e))return n;{const r=Gt(e),i=(this.children.get(r)||new Xn(null)).setTree(rr(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Xn(this.value,o)}}fold(e){return this.fold_(bn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(kr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,bn(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Yt(e))return null;{const i=Gt(e),o=this.children.get(i);return o?o.findOnPath_(rr(e),kr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,bn(),n)}foreachOnPath_(e,n,r){if(Yt(e))return this;{this.value&&r(n,this.value);const s=Gt(e),i=this.children.get(s);return i?i.foreachOnPath_(rr(e),kr(n,s),r):new Xn(null)}}foreach(e){this.foreach_(bn(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(kr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.writeTree_=e}static empty(){return new Uc(new Xn(null))}}function sE(t,e,n){if(Yt(e))return new Uc(new Xn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Pi(s,e);return i=i.updateChild(o,n),new Uc(t.writeTree_.set(s,i))}else{const s=new Xn(n),i=t.writeTree_.setTree(e,s);return new Uc(i)}}}function L2(t,e,n){let r=t;return Ks(n,(s,i)=>{r=sE(r,kr(e,s),i)}),r}function OB(t,e){if(Yt(e))return Uc.empty();{const n=t.writeTree_.setTree(e,new Xn(null));return new Uc(n)}}function U2(t,e){return am(t,e)!=null}function am(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Pi(n.path,e)):null}function kB(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Dr,(r,s)=>{e.push(new qt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new qt(r,s.value))}),e}function Vh(t,e){if(Yt(e))return t;{const n=am(t,e);return n!=null?new Uc(new Xn(n)):new Uc(t.writeTree_.subtree(e))}}function $2(t){return t.writeTree_.isEmpty()}function gw(t,e){return vH(bn(),t.writeTree_,e)}function vH(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Ie(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=vH(kr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(kr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t,e){return AH(e,t)}function Boe(t,e,n,r,s){Ie(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=sE(t.visibleWrites,e,n)),t.lastWriteId=r}function Foe(t,e,n,r){Ie(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=L2(t.visibleWrites,e,n),t.lastWriteId=r}function joe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Woe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ie(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&zoe(a,r.path)?s=!1:$a(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Hoe(t),!0;if(r.snap)t.visibleWrites=OB(t.visibleWrites,r.path);else{const a=r.children;Ks(a,c=>{t.visibleWrites=OB(t.visibleWrites,kr(r.path,c))})}return!0}else return!1}function zoe(t,e){if(t.snap)return $a(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&$a(kr(t.path,n),e))return!0;return!1}function Hoe(t){t.visibleWrites=EH(t.allWrites,Goe,bn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Goe(t){return t.visible}function EH(t,e,n){let r=Uc.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)$a(n,o)?(a=Pi(n,o),r=sE(r,a,i.snap)):$a(o,n)&&(a=Pi(o,n),r=sE(r,bn(),i.snap.getChild(a)));else if(i.children){if($a(n,o))a=Pi(n,o),r=L2(r,a,i.children);else if($a(o,n))if(a=Pi(o,n),Yt(a))r=L2(r,bn(),i.children);else{const c=dw(i.children,Gt(a));if(c){const l=c.getChild(rr(a));r=sE(r,bn(),l)}}}else throw ib("WriteRecord should have .snap or .children")}}return r}function CH(t,e,n,r,s){if(!r&&!s){const i=am(t.visibleWrites,e);if(i!=null)return i;{const o=Vh(t.visibleWrites,e);if($2(o))return n;if(n==null&&!U2(o,bn()))return null;{const a=n||vt.EMPTY_NODE;return gw(o,a)}}}else{const i=Vh(t.visibleWrites,e);if(!s&&$2(i))return n;if(!s&&n==null&&!U2(i,bn()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&($a(l.path,e)||$a(e,l.path))},a=EH(t.allWrites,o,e),c=n||vt.EMPTY_NODE;return gw(a,c)}}}function qoe(t,e,n){let r=vt.EMPTY_NODE;const s=am(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Dr,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Vh(t.visibleWrites,e);return n.forEachChild(Dr,(o,a)=>{const c=gw(Vh(i,new jn(o)),a);r=r.updateImmediateChild(o,c)}),kB(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Vh(t.visibleWrites,e);return kB(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Voe(t,e,n,r,s){Ie(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=kr(e,n);if(U2(t.visibleWrites,i))return null;{const o=Vh(t.visibleWrites,i);return $2(o)?s.getChild(n):gw(o,s.getChild(n))}}function Koe(t,e,n,r){const s=kr(e,n),i=am(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Vh(t.visibleWrites,s);return gw(o,r.getNode().getImmediateChild(n))}else return null}function Yoe(t,e){return am(t.visibleWrites,e)}function Qoe(t,e,n,r,s,i,o){let a;const c=Vh(t.visibleWrites,e),l=am(c,bn());if(l!=null)a=l;else if(n!=null)a=gw(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Joe(){return{visibleWrites:Uc.empty(),allWrites:[],lastWriteId:-1}}function Cx(t,e,n,r){return CH(t.writeTree,t.treePath,e,n,r)}function dM(t,e){return qoe(t.writeTree,t.treePath,e)}function DB(t,e,n,r){return Voe(t.writeTree,t.treePath,e,n,r)}function _x(t,e){return Yoe(t.writeTree,kr(t.treePath,e))}function Zoe(t,e,n,r,s,i){return Qoe(t.writeTree,t.treePath,e,n,r,s,i)}function hM(t,e,n){return Koe(t.writeTree,t.treePath,e,n)}function _H(t,e){return AH(kr(t.treePath,e),t.writeTree)}function AH(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xoe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ie(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ie(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,zE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,WE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,fw(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,zE(r,e.snapshotNode,s.oldSnap));else throw ib("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eae{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const SH=new eae;class fM{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new yf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hM(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ig(this.viewCache_),i=Zoe(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tae(t){return{filter:t}}function nae(t,e){Ie(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ie(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function rae(t,e,n,r,s){const i=new Xoe;let o,a;if(n.type===Dc.OVERWRITE){const l=n;l.source.fromUser?o=B2(t,e,l.path,l.snap,r,s,i):(Ie(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Yt(l.path),o=Ax(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===Dc.MERGE){const l=n;l.source.fromUser?o=iae(t,e,l.path,l.children,r,s,i):(Ie(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=F2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===Dc.ACK_USER_WRITE){const l=n;l.revert?o=cae(t,e,l.path,r,s,i):o=oae(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===Dc.LISTEN_COMPLETE)o=aae(t,e,n.path,r,i);else throw ib("Unknown operation type: "+n.type);const c=i.getChanges();return sae(e,o,c),{viewCache:o,changes:c}}function sae(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=Ex(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(yH(Ex(e)))}}function xH(t,e,n,r,s,i){const o=e.eventCache;if(_x(r,n)!=null)return e;{let a,c;if(Yt(n))if(Ie(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Ig(e),u=l instanceof vt?l:vt.EMPTY_NODE,d=dM(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=Cx(r,Ig(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Gt(n);if(l===".priority"){Ie(mf(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=DB(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=rr(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=DB(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=hM(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return rE(e,a,o.isFullyInitialized()||Yt(n),t.filter.filtersNodes())}}function Ax(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Yt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Gt(n);if(!c.isCompleteForPath(n)&&mf(n)>1)return e;const p=rr(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,SH,null)}const d=bH(e,l,c.isFullyInitialized()||Yt(n),u.filtersNodes()),h=new fM(s,d,i);return xH(t,d,n,s,h,a)}function B2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new fM(s,e,i);if(Yt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=rE(e,l,!0,t.filter.filtersNodes());else{const d=Gt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=rE(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=rr(n),f=a.getNode().getImmediateChild(d);let p;if(Yt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?nM(h)===".priority"&&g.getChild(uH(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=vt.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=rE(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function MB(t,e){return t.eventCache.isCompleteForChild(e)}function iae(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=kr(n,c);MB(e,Gt(u))&&(a=B2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=kr(n,c);MB(e,Gt(u))||(a=B2(t,a,u,l,s,i,o))}),a}function LB(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function F2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Yt(n)?l=r:l=new Xn(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=LB(t,f,h);c=Ax(t,c,new jn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=LB(t,p,h);c=Ax(t,c,new jn(d),g,s,i,o,a)}}),c}function oae(t,e,n,r,s,i,o){if(_x(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Yt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Ax(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Yt(n)){let l=new Xn(null);return c.getNode().forEachChild(Ky,(u,d)=>{l=l.set(new jn(u),d)}),F2(t,e,n,l,s,i,a,o)}else return e}else{let l=new Xn(null);return r.foreach((u,d)=>{const h=kr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),F2(t,e,n,l,s,i,a,o)}}function aae(t,e,n,r,s){const i=e.serverCache,o=bH(e,i.getNode(),i.isFullyInitialized()||Yt(n),i.isFiltered());return xH(t,o,n,r,SH,s)}function cae(t,e,n,r,s,i){let o;if(_x(r,n)!=null)return e;{const a=new fM(r,e,s),c=e.eventCache.getNode();let l;if(Yt(n)||Gt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Cx(r,Ig(e));else{const d=e.serverCache.getNode();Ie(d instanceof vt,"serverChildren would be complete if leaf node"),u=dM(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Gt(n);let d=hM(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,rr(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,vt.EMPTY_NODE,rr(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Cx(r,Ig(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||_x(r,bn())!=null,rE(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lae{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new oM(r.getIndex()),i=Ioe(r);this.processor_=tae(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(vt.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(vt.EMPTY_NODE,a.getNode(),null),u=new yf(c,o.isFullyInitialized(),s.filtersNodes()),d=new yf(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=fN(d,u),this.eventGenerator_=new Doe(this.query_)}get query(){return this.query_}}function uae(t){return t.viewCache_.serverCache.getNode()}function dae(t){return Ex(t.viewCache_)}function hae(t,e){const n=Ig(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Yt(e)&&!n.getImmediateChild(Gt(e)).isEmpty())?n.getChild(e):null}function UB(t){return t.eventRegistrations_.length===0}function fae(t,e){t.eventRegistrations_.push(e)}function $B(t,e,n){const r=[];if(n){Ie(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function BB(t,e,n,r){e.type===Dc.MERGE&&e.source.queryId!==null&&(Ie(Ig(t.viewCache_),"We should always have a full cache before handling merges"),Ie(Ex(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=rae(t.processor_,s,e,n,r);return nae(t.processor_,i.viewCache),Ie(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,IH(t,i.changes,i.viewCache.eventCache.getNode(),null)}function pae(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Dr,(i,o)=>{r.push(fw(i,o))}),n.isFullyInitialized()&&r.push(yH(n.getNode())),IH(t,r,n.getNode(),e)}function IH(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Moe(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sx;class NH{constructor(){this.views=new Map}}function gae(t){Ie(!Sx,"__referenceConstructor has already been defined"),Sx=t}function mae(){return Ie(Sx,"Reference.ts has not been loaded"),Sx}function yae(t){return t.views.size===0}function pM(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Ie(i!=null,"SyncTree gave us an op for an invalid query."),BB(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(BB(o,e,n,r));return i}}function TH(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=Cx(n,s?r:null),c=!1;a?c=!0:r instanceof vt?(a=dM(n,r),c=!1):(a=vt.EMPTY_NODE,c=!1);const l=fN(new yf(a,c,!1),new yf(r,s,!1));return new lae(e,l)}return o}function wae(t,e,n,r,s,i){const o=TH(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),fae(o,n),pae(o,n)}function bae(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=wf(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat($B(l,n,r)),UB(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat($B(c,n,r)),UB(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!wf(t)&&i.push(new(mae())(e._repo,e._path)),{removed:i,events:o}}function RH(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Kh(t,e){let n=null;for(const r of t.views.values())n=n||hae(r,e);return n}function PH(t,e){if(e._queryParams.loadsAllData())return gN(t);{const r=e._queryIdentifier;return t.views.get(r)}}function OH(t,e){return PH(t,e)!=null}function wf(t){return gN(t)!=null}function gN(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xx;function vae(t){Ie(!xx,"__referenceConstructor has already been defined"),xx=t}function Eae(){return Ie(xx,"Reference.ts has not been loaded"),xx}let Cae=1;class FB{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Xn(null),this.pendingWriteTree_=Joe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kH(t,e,n,r,s){return Boe(t.pendingWriteTree_,e,n,r,s),s?cb(t,new xg(cM(),e,n)):[]}function _ae(t,e,n,r){Foe(t.pendingWriteTree_,e,n,r);const s=Xn.fromObject(n);return cb(t,new pw(cM(),e,s))}function Mh(t,e,n=!1){const r=joe(t.pendingWriteTree_,e);if(Woe(t.pendingWriteTree_,e)){let i=new Xn(null);return r.snap!=null?i=i.set(bn(),!0):Ks(r.children,o=>{i=i.set(new jn(o),!0)}),cb(t,new vx(r.path,i,n))}else return[]}function G_(t,e,n){return cb(t,new xg(lM(),e,n))}function Aae(t,e,n){const r=Xn.fromObject(n);return cb(t,new pw(lM(),e,r))}function Sae(t,e){return cb(t,new GE(lM(),e))}function xae(t,e,n){const r=mM(t,n);if(r){const s=yM(r),i=s.path,o=s.queryId,a=Pi(i,e),c=new GE(uM(o),a);return wM(t,i,c)}else return[]}function Ix(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||OH(o,e))){const c=bae(o,e,n,r);yae(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>wf(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=Tae(h);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,y=UH(t,g);t.listenProvider_.startListening(iE(w),qE(t,w),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(iE(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(mN(h));t.listenProvider_.stopListening(iE(h),f)}))}Rae(t,l)}return a}function DH(t,e,n,r){const s=mM(t,r);if(s!=null){const i=yM(s),o=i.path,a=i.queryId,c=Pi(o,e),l=new xg(uM(a),c,n);return wM(t,o,l)}else return[]}function Iae(t,e,n,r){const s=mM(t,r);if(s){const i=yM(s),o=i.path,a=i.queryId,c=Pi(o,e),l=Xn.fromObject(n),u=new pw(uM(a),c,l);return wM(t,o,u)}else return[]}function j2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=Pi(h,s);i=i||Kh(f,p),o=o||wf(f)});let a=t.syncPointTree_.get(s);a?(o=o||wf(a),i=i||Kh(a,bn())):(a=new NH,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=vt.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Kh(p,bn());g&&(i=i.updateImmediateChild(f,g))}));const l=OH(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=mN(e);Ie(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Pae();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=pN(t.pendingWriteTree_,s);let d=wae(a,e,n,u,i,c);if(!l&&!o&&!r){const h=PH(a,e);d=d.concat(Oae(t,e,h))}return d}function gM(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Pi(o,e),l=Kh(a,c);if(l)return l});return CH(s,e,i,n,!0)}function Nae(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=Pi(l,n);r=r||Kh(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Kh(s,bn()):(s=new NH,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new yf(r,!0,!1):null,a=pN(t.pendingWriteTree_,e._path),c=TH(s,e,a,i?o.getNode():vt.EMPTY_NODE,i);return dae(c)}function cb(t,e){return MH(e,t.syncPointTree_,null,pN(t.pendingWriteTree_,bn()))}function MH(t,e,n,r){if(Yt(t.path))return LH(t,e,n,r);{const s=e.get(bn());n==null&&s!=null&&(n=Kh(s,bn()));let i=[];const o=Gt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=_H(r,o);i=i.concat(MH(a,c,l,u))}return s&&(i=i.concat(pM(s,t,r,n))),i}}function LH(t,e,n,r){const s=e.get(bn());n==null&&s!=null&&(n=Kh(s,bn()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=_H(r,o),u=t.operationForChild(o);u&&(i=i.concat(LH(u,a,c,l)))}),s&&(i=i.concat(pM(s,t,r,n))),i}function UH(t,e){const n=e.query,r=qE(t,n);return{hashFn:()=>(uae(e)||vt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?xae(t,n._path,r):Sae(t,n._path);{const i=Sie(s,n);return Ix(t,n,null,i)}}}}function qE(t,e){const n=mN(e);return t.queryToTagMap.get(n)}function mN(t){return t._path.toString()+"$"+t._queryIdentifier}function mM(t,e){return t.tagToQueryMap.get(e)}function yM(t){const e=t.indexOf("$");return Ie(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new jn(t.substr(0,e))}}function wM(t,e,n){const r=t.syncPointTree_.get(e);Ie(r,"Missing sync point for query tag that we're tracking");const s=pN(t.pendingWriteTree_,e);return pM(r,n,s,null)}function Tae(t){return t.fold((e,n,r)=>{if(n&&wf(n))return[gN(n)];{let s=[];return n&&(s=RH(n)),Ks(r,(i,o)=>{s=s.concat(o)}),s}})}function iE(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Eae())(t._repo,t._path):t}function Rae(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=mN(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Pae(){return Cae++}function Oae(t,e,n){const r=e._path,s=qE(t,e),i=UH(t,n),o=t.listenProvider_.startListening(iE(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Ie(!wf(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Yt(l)&&u&&wf(u))return[gN(u).query];{let h=[];return u&&(h=h.concat(RH(u).map(f=>f.query))),Ks(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(iE(u),qE(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new bM(n)}node(){return this.node_}}class vM{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=kr(this.path_,e);return new vM(this.syncTree_,n)}node(){return gM(this.syncTree_,this.path_)}}const kae=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},jB=function(t,e,n){if(!t||typeof t!="object")return t;if(Ie(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Dae(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Mae(t[".sv"],e);Ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Dae=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ie(!1,"Unexpected server value: "+t)}},Mae=function(t,e,n){t.hasOwnProperty("increment")||Ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ie(!1,"Unexpected increment value: "+r);const s=e.node();if(Ie(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},$H=function(t,e,n,r){return EM(e,new vM(n,t),r)},BH=function(t,e,n){return EM(t,new bM(e),n)};function EM(t,e,n){const r=t.getPriority().val(),s=jB(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=jB(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new ys(a,ns(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new ys(s))),o.forEachChild(Dr,(a,c)=>{const l=EM(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function _M(t,e){let n=e instanceof jn?e:new jn(e),r=t,s=Gt(n);for(;s!==null;){const i=dw(r.node.children,s)||{children:{},childCount:0};r=new CM(s,r,i),n=rr(n),s=Gt(n)}return r}function lb(t){return t.node.value}function FH(t,e){t.node.value=e,W2(t)}function jH(t){return t.node.childCount>0}function Lae(t){return lb(t)===void 0&&!jH(t)}function yN(t,e){Ks(t.node.children,(n,r)=>{e(new CM(n,t,r))})}function WH(t,e,n,r){n&&e(t),yN(t,s=>{WH(s,e,!0)})}function Uae(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function q_(t){return new jn(t.parent===null?t.name:q_(t.parent)+"/"+t.name)}function W2(t){t.parent!==null&&$ae(t.parent,t.name,t)}function $ae(t,e,n){const r=Lae(n),s=ru(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,W2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,W2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bae=/[\[\].#$\/\u0000-\u001F\u007F]/,Fae=/[\[\].#$\u0000-\u001F\u007F]/,OR=10*1024*1024,AM=function(t){return typeof t=="string"&&t.length!==0&&!Bae.test(t)},zH=function(t){return typeof t=="string"&&t.length!==0&&!Fae.test(t)},jae=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),zH(t)},Wae=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!J5(t)||t&&typeof t=="object"&&ru(t,".sv")},zae=function(t,e,n,r){wN(uN(t,"value"),e,n)},wN=function(t,e,n){const r=n instanceof jn?new ioe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+sp(r));if(typeof e=="function")throw new Error(t+"contains a function "+sp(r)+" with contents = "+e.toString());if(J5(e))throw new Error(t+"contains "+e.toString()+" "+sp(r));if(typeof e=="string"&&e.length>OR/3&&dN(e)>OR)throw new Error(t+"contains a string greater than "+OR+" utf8 bytes "+sp(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Ks(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!AM(o)))throw new Error(t+" contains an invalid key ("+o+") "+sp(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ooe(r,o),wN(t,a,r),aoe(r)}),s&&i)throw new Error(t+' contains ".value" child '+sp(r)+" in addition to actual children.")}},Hae=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=jE(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!AM(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(soe);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&$a(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},Gae=function(t,e,n,r){const s=uN(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Ks(e,(o,a)=>{const c=new jn(o);if(wN(s,a,kr(n,c)),nM(c)===".priority"&&!Wae(a))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),Hae(s,i)},HH=function(t,e,n,r){if(!zH(n))throw new Error(uN(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},qae=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),HH(t,e,n)},GH=function(t,e){if(Gt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Vae=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!AM(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!jae(n))throw new Error(uN(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kae{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bN(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!rM(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function qH(t,e,n){bN(t,n),VH(t,r=>rM(r,e))}function za(t,e,n){bN(t,n),VH(t,r=>$a(r,e)||$a(e,r))}function VH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Yae(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Yae(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();tE&&Fs("event: "+n.toString()),ab(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qae="repo_interrupt",Jae=25;class Zae{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Kae,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bx(),this.transactionQueueTree_=new CM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Xae(t,e,n){if(t.stats_=eM(t.repoInfo_),t.forceRestClient_||Tie())t.server_=new wx(t.repoInfo_,(r,s,i,o)=>{WB(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>zB(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ss(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Zu(t.repoInfo_,e,(r,s,i,o)=>{WB(t,r,s,i,o)},r=>{zB(t,r)},r=>{tce(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Die(t.repoInfo_,()=>new koe(t.stats_,t.server_)),t.infoData_=new Noe,t.infoSyncTree_=new FB({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=G_(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),SM(t,"connected",!1),t.serverSyncTree_=new FB({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);za(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function ece(t){const n=t.infoData_.getNode(new jn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function vN(t){return kae({timestamp:ece(t)})}function WB(t,e,n,r,s){t.dataUpdateCount++;const i=new jn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=fx(n,l=>ns(l));o=Iae(t.serverSyncTree_,i,c,s)}else{const c=ns(n);o=DH(t.serverSyncTree_,i,c,s)}else if(r){const c=fx(n,l=>ns(l));o=Aae(t.serverSyncTree_,i,c)}else{const c=ns(n);o=G_(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=mw(t,i)),za(t.eventQueue_,a,o)}function zB(t,e){SM(t,"connected",e),e===!1&&ice(t)}function tce(t,e){Ks(e,(n,r)=>{SM(t,n,r)})}function SM(t,e,n){const r=new jn("/.info/"+e),s=ns(n);t.infoData_.updateSnapshot(r,s);const i=G_(t.infoSyncTree_,r,s);za(t.eventQueue_,r,i)}function xM(t){return t.nextWriteId_++}function nce(t,e,n){const r=Nae(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=ns(s).withIndex(e._queryParams.getIndex());j2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=G_(t.serverSyncTree_,e._path,i);else{const a=qE(t.serverSyncTree_,e);o=DH(t.serverSyncTree_,e._path,i,a)}return za(t.eventQueue_,e._path,o),Ix(t.serverSyncTree_,e,n,null,!0),i},s=>(V_(t,"get for query "+ss(e)+" failed: "+s),Promise.reject(new Error(s))))}function rce(t,e,n,r,s){V_(t,"set",{path:e.toString(),value:n,priority:r});const i=vN(t),o=ns(n,r),a=gM(t.serverSyncTree_,e),c=BH(o,a,i),l=xM(t),u=kH(t.serverSyncTree_,e,c,l,!0);bN(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||Li("set at "+e+" failed: "+h);const g=Mh(t.serverSyncTree_,l,!p);za(t.eventQueue_,e,g),z2(t,s,h,f)});const d=NM(t,e);mw(t,d),za(t.eventQueue_,d,[])}function sce(t,e,n,r){V_(t,"update",{path:e.toString(),value:n});let s=!0;const i=vN(t),o={};if(Ks(n,(a,c)=>{s=!1,o[a]=$H(kr(e,a),ns(c),t.serverSyncTree_,i)}),s)Fs("update() called with empty data.  Don't do anything."),z2(t,r,"ok",void 0);else{const a=xM(t),c=_ae(t.serverSyncTree_,e,o,a);bN(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{const d=l==="ok";d||Li("update at "+e+" failed: "+l);const h=Mh(t.serverSyncTree_,a,!d),f=h.length>0?mw(t,e):e;za(t.eventQueue_,f,h),z2(t,r,l,u)}),Ks(n,l=>{const u=NM(t,kr(e,l));mw(t,u)}),za(t.eventQueue_,e,[])}}function ice(t){V_(t,"onDisconnectEvents");const e=vN(t),n=bx();M2(t.onDisconnect_,bn(),(s,i)=>{const o=$H(s,i,t.serverSyncTree_,e);wH(n,s,o)});let r=[];M2(n,bn(),(s,i)=>{r=r.concat(G_(t.serverSyncTree_,s,i));const o=NM(t,s);mw(t,o)}),t.onDisconnect_=bx(),za(t.eventQueue_,bn(),r)}function oce(t,e,n){let r;Gt(e._path)===".info"?r=j2(t.infoSyncTree_,e,n):r=j2(t.serverSyncTree_,e,n),qH(t.eventQueue_,e._path,r)}function ace(t,e,n){let r;Gt(e._path)===".info"?r=Ix(t.infoSyncTree_,e,n):r=Ix(t.serverSyncTree_,e,n),qH(t.eventQueue_,e._path,r)}function cce(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Qae)}function V_(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Fs(n,...e)}function z2(t,e,n,r){e&&ab(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function KH(t,e,n){return gM(t.serverSyncTree_,e,n)||vt.EMPTY_NODE}function IM(t,e=t.transactionQueueTree_){if(e||EN(t,e),lb(e)){const n=QH(t,e);Ie(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&lce(t,q_(e),n)}else jH(e)&&yN(e,n=>{IM(t,n)})}function lce(t,e,n){const r=n.map(l=>l.currentWriteId),s=KH(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Ie(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Pi(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{V_(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Mh(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();EN(t,_M(t.transactionQueueTree_,e)),IM(t,t.transactionQueueTree_),za(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)ab(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Li("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}mw(t,e)}},o)}function mw(t,e){const n=YH(t,e),r=q_(n),s=QH(t,n);return uce(t,s,r),r}function uce(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=Pi(n,c.path);let u=!1,d;if(Ie(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(Mh(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Jae)u=!0,d="maxretry",s=s.concat(Mh(t.serverSyncTree_,c.currentWriteId,!0));else{const h=KH(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){wN("transaction failed: Data returned ",f,c.path);let p=ns(f);typeof f=="object"&&f!=null&&ru(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,y=vN(t),b=BH(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=xM(t),o.splice(o.indexOf(w),1),s=s.concat(kH(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(Mh(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat(Mh(t.serverSyncTree_,c.currentWriteId,!0))}za(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}EN(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)ab(r[a]);IM(t,t.transactionQueueTree_)}function YH(t,e){let n,r=t.transactionQueueTree_;for(n=Gt(e);n!==null&&lb(r)===void 0;)r=_M(r,n),e=rr(e),n=Gt(e);return r}function QH(t,e){const n=[];return JH(t,e,n),n.sort((r,s)=>r.order-s.order),n}function JH(t,e,n){const r=lb(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);yN(e,s=>{JH(t,s,n)})}function EN(t,e){const n=lb(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,FH(e,n.length>0?n:void 0)}yN(e,r=>{EN(t,r)})}function NM(t,e){const n=q_(YH(t,e)),r=_M(t.transactionQueueTree_,e);return Uae(r,s=>{kR(t,s)}),kR(t,r),WH(r,s=>{kR(t,s)}),n}function kR(t,e){const n=lb(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ie(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ie(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Mh(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?FH(e,void 0):n.length=i+1,za(t.eventQueue_,q_(e),s);for(let o=0;o<r.length;o++)ab(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dce(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function hce(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Li(`Invalid query segment '${n}' in query '${t}'`)}return e}const HB=function(t,e){const n=fce(t),r=n.namespace;n.domain==="firebase.com"&&ld(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ld("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||vie();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new tH(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new jn(n.pathString)}},fce=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=dce(t.substring(u,d)));const h=hce(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pce{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ss(this.snapshot.exportVal())}}class gce{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ie(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Yt(this._path)?null:nM(this._path)}get ref(){return new vd(this._repo,this._path)}get _queryIdentifier(){const e=RB(this._queryParams),n=Z5(e);return n==="{}"?"default":n}get _queryObject(){return RB(this._queryParams)}isEqual(e){if(e=ob(e),!(e instanceof TM))return!1;const n=this._repo===e._repo,r=rM(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+roe(this._path)}}class vd extends TM{constructor(e,n){super(e,n,new aM,!1)}get parent(){const e=uH(this._path);return e===null?null:new vd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class VE{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new jn(e),r=H2(this.ref,e);return new VE(this._node.getChild(n),r,Dr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new VE(s,H2(this.ref,r),Dr)))}hasChild(e){const n=new jn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function no(t,e){return t=ob(t),t._checkNotDeleted("ref"),e!==void 0?H2(t._root,e):t._root}function H2(t,e){return t=ob(t),Gt(t._path)===null?qae("child","path",e):HH("child","path",e),new vd(t._repo,kr(t._path,e))}function XH(t){return GH("remove",t._path),oE(t,null)}function oE(t,e){t=ob(t),GH("set",t._path),zae("set",e,t._path);const n=new F_;return rce(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function mce(t,e){Gae("update",e,t._path);const n=new F_;return sce(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function hp(t){t=ob(t);const e=new ZH(()=>{}),n=new CN(e);return nce(t._repo,t,n).then(r=>new VE(r,new vd(t._repo,t._path),t._queryParams.getIndex()))}class CN{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new pce("value",this,new VE(e.snapshotNode,new vd(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new gce(this,e,n):null}matches(e){return e instanceof CN?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function yce(t,e,n,r,s){const i=new ZH(n,void 0),o=new CN(i);return oce(t._repo,t,o),()=>ace(t._repo,t,o)}function GB(t,e,n,r){return yce(t,"value",e)}gae(vd);vae(vd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wce="FIREBASE_DATABASE_EMULATOR_HOST",G2={};let bce=!1;function vce(t,e,n,r){t.repoInfo_=new tH(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Ece(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||ld("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fs("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=HB(i,s),a=o.repoInfo,c;typeof process<"u"&&hB&&(c=hB[wce]),c?(i=`http://${c}?ns=${a.namespace}`,o=HB(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new Pie(t.name,t.options,e);Vae("Invalid Firebase Database URL",o),Yt(o.path)||ld("Database URL must point to the root of a Firebase Database (not including a child path).");const u=_ce(a,t,l,new Rie(t.name,n));return new Ace(u,t)}function Cce(t,e){const n=G2[e];(!n||n[t.key]!==t)&&ld(`Database ${e}(${t.repoInfo_}) has already been deleted.`),cce(t),delete n[t.key]}function _ce(t,e,n,r){let s=G2[e.name];s||(s={},G2[e.name]=s);let i=s[t.toURLString()];return i&&ld("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Zae(t,bce,n,r),s[t.toURLString()]=i,i}class Ace{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Xae(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vd(this._repo,bn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Cce(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ld("Cannot call "+e+" on a deleted database.")}}function Sce(t=$z(),e){const n=Zse(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=jre("database");r&&xce(n,...r)}return n}function xce(t,e,n,r={}){t=ob(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&ld("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&ld('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new vS(vS.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Wre(r.mockUserToken,t.app.options.projectId);i=new vS(o)}vce(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ice(t){pie(tie),px(new UE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return Ece(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),qy(fB,pB,t),qy(fB,pB,"esm2017")}Zu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Zu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Ice();const Nce={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},Tce=nie().length?$z():Uz(Nce),Nx=Sce(Tce);var q2={},eG={exports:{}},ia={},tG={exports:{}},nG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,M){var W=k.length;k.push(M);e:for(;0<W;){var K=W-1>>>1,ne=k[K];if(0<s(ne,M))k[K]=M,k[W]=ne,W=K;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var M=k[0],W=k.pop();if(W!==M){k[0]=W;e:for(var K=0,ne=k.length,le=ne>>>1;K<le;){var oe=2*(K+1)-1,ae=k[oe],ue=oe+1,et=k[ue];if(0>s(ae,W))ue<ne&&0>s(et,ae)?(k[K]=et,k[ue]=W,K=ue):(k[K]=ae,k[oe]=W,K=oe);else if(ue<ne&&0>s(et,W))k[K]=et,k[ue]=W,K=ue;else break e}}return M}function s(k,M){var W=k.sortIndex-M.sortIndex;return W!==0?W:k.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(k){for(var M=n(l);M!==null;){if(M.callback===null)r(l);else if(M.startTime<=k)r(l),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(l)}}function A(k){if(g=!1,v(k),!p)if(n(c)!==null)p=!0,R(_);else{var M=n(l);M!==null&&$(A,M.startTime-k)}}function _(k,M){p=!1,g&&(g=!1,y(N),N=-1),f=!0;var W=h;try{for(v(M),d=n(c);d!==null&&(!(d.expirationTime>M)||k&&!P());){var K=d.callback;if(typeof K=="function"){d.callback=null,h=d.priorityLevel;var ne=K(d.expirationTime<=M);M=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(c)&&r(c),v(M)}else r(c);d=n(c)}if(d!==null)var le=!0;else{var oe=n(l);oe!==null&&$(A,oe.startTime-M),le=!1}return le}finally{d=null,h=W,f=!1}}var I=!1,x=null,N=-1,S=5,O=-1;function P(){return!(t.unstable_now()-O<S)}function F(){if(x!==null){var k=t.unstable_now();O=k;var M=!0;try{M=x(!0,k)}finally{M?G():(I=!1,x=null)}}else I=!1}var G;if(typeof b=="function")G=function(){b(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,T=B.port2;B.port1.onmessage=F,G=function(){T.postMessage(null)}}else G=function(){w(F,0)};function R(k){x=k,I||(I=!0,G())}function $(k,M){N=w(function(){k(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,R(_))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(k){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var W=h;h=M;try{return k()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,M){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var W=h;h=k;try{return M()}finally{h=W}},t.unstable_scheduleCallback=function(k,M,W){var K=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?K+W:K):W=K,k){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=W+ne,k={id:u++,callback:M,priorityLevel:k,startTime:W,expirationTime:ne,sortIndex:-1},W>K?(k.sortIndex=W,e(l,k),n(c)===null&&k===n(l)&&(g?(y(N),N=-1):g=!0,$(A,W-K))):(k.sortIndex=ne,e(c,k),p||f||(p=!0,R(_))),k},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(k){var M=h;return function(){var W=h;h=M;try{return k.apply(this,arguments)}finally{h=W}}}})(nG);tG.exports=nG;var Rce=tG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pce=D,na=Rce;function Ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rG=new Set,KE={};function cm(t,e){yw(t,e),yw(t+"Capture",e)}function yw(t,e){for(KE[t]=e,t=0;t<e.length;t++)rG.add(e[t])}var ud=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),V2=Object.prototype.hasOwnProperty,Oce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qB={},VB={};function kce(t){return V2.call(VB,t)?!0:V2.call(qB,t)?!1:Oce.test(t)?VB[t]=!0:(qB[t]=!0,!1)}function Dce(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Mce(t,e,n,r){if(e===null||typeof e>"u"||Dce(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Wi(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ys={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ys[t]=new Wi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ys[e]=new Wi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ys[t]=new Wi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ys[t]=new Wi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ys[t]=new Wi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ys[t]=new Wi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ys[t]=new Wi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ys[t]=new Wi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ys[t]=new Wi(t,5,!1,t.toLowerCase(),null,!1,!1)});var RM=/[\-:]([a-z])/g;function PM(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(RM,PM);Ys[e]=new Wi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(RM,PM);Ys[e]=new Wi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(RM,PM);Ys[e]=new Wi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ys[t]=new Wi(t,1,!1,t.toLowerCase(),null,!1,!1)});Ys.xlinkHref=new Wi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ys[t]=new Wi(t,1,!1,t.toLowerCase(),null,!0,!0)});function OM(t,e,n,r){var s=Ys.hasOwnProperty(e)?Ys[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Mce(e,n,s,r)&&(n=null),r||s===null?kce(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ed=Pce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nA=Symbol.for("react.element"),Ay=Symbol.for("react.portal"),Sy=Symbol.for("react.fragment"),kM=Symbol.for("react.strict_mode"),K2=Symbol.for("react.profiler"),sG=Symbol.for("react.provider"),iG=Symbol.for("react.context"),DM=Symbol.for("react.forward_ref"),Y2=Symbol.for("react.suspense"),Q2=Symbol.for("react.suspense_list"),MM=Symbol.for("react.memo"),Jd=Symbol.for("react.lazy"),oG=Symbol.for("react.offscreen"),KB=Symbol.iterator;function Yb(t){return t===null||typeof t!="object"?null:(t=KB&&t[KB]||t["@@iterator"],typeof t=="function"?t:null)}var Ar=Object.assign,DR;function Rv(t){if(DR===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);DR=e&&e[1]||""}return`
`+DR+t}var MR=!1;function LR(t,e){if(!t||MR)return"";MR=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{MR=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rv(t):""}function Lce(t){switch(t.tag){case 5:return Rv(t.type);case 16:return Rv("Lazy");case 13:return Rv("Suspense");case 19:return Rv("SuspenseList");case 0:case 2:case 15:return t=LR(t.type,!1),t;case 11:return t=LR(t.type.render,!1),t;case 1:return t=LR(t.type,!0),t;default:return""}}function J2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sy:return"Fragment";case Ay:return"Portal";case K2:return"Profiler";case kM:return"StrictMode";case Y2:return"Suspense";case Q2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iG:return(t.displayName||"Context")+".Consumer";case sG:return(t._context.displayName||"Context")+".Provider";case DM:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case MM:return e=t.displayName||null,e!==null?e:J2(t.type)||"Memo";case Jd:e=t._payload,t=t._init;try{return J2(t(e))}catch{}}return null}function Uce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J2(e);case 8:return e===kM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function aG(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $ce(t){var e=aG(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rA(t){t._valueTracker||(t._valueTracker=$ce(t))}function cG(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=aG(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Z2(t,e){var n=e.checked;return Ar({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function YB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lG(t,e){e=e.checked,e!=null&&OM(t,"checked",e,!1)}function X2(t,e){lG(t,e);var n=bf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ek(t,e.type,n):e.hasOwnProperty("defaultValue")&&ek(t,e.type,bf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function QB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ek(t,e,n){(e!=="number"||Tx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pv=Array.isArray;function Yy(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bf(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function tk(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return Ar({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function JB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ce(92));if(Pv(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bf(n)}}function uG(t,e){var n=bf(e.value),r=bf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ZB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function dG(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nk(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?dG(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sA,hG=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sA=sA||document.createElement("div"),sA.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sA.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function YE(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var aE={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bce=["Webkit","ms","Moz","O"];Object.keys(aE).forEach(function(t){Bce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),aE[e]=aE[t]})});function fG(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||aE.hasOwnProperty(t)&&aE[t]?(""+e).trim():e+"px"}function pG(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=fG(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Fce=Ar({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rk(t,e){if(e){if(Fce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ce(62))}}function sk(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ik=null;function LM(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ok=null,Qy=null,Jy=null;function XB(t){if(t=Q_(t)){if(typeof ok!="function")throw Error(Ce(280));var e=t.stateNode;e&&(e=IN(e),ok(t.stateNode,t.type,e))}}function gG(t){Qy?Jy?Jy.push(t):Jy=[t]:Qy=t}function mG(){if(Qy){var t=Qy,e=Jy;if(Jy=Qy=null,XB(t),e)for(t=0;t<e.length;t++)XB(e[t])}}function yG(t,e){return t(e)}function wG(){}var UR=!1;function bG(t,e,n){if(UR)return t(e,n);UR=!0;try{return yG(t,e,n)}finally{UR=!1,(Qy!==null||Jy!==null)&&(wG(),mG())}}function QE(t,e){var n=t.stateNode;if(n===null)return null;var r=IN(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ce(231,e,typeof n));return n}var ak=!1;if(ud)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){ak=!0}}),window.addEventListener("test",Qb,Qb),window.removeEventListener("test",Qb,Qb)}catch{ak=!1}function jce(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var cE=!1,Rx=null,Px=!1,ck=null,Wce={onError:function(t){cE=!0,Rx=t}};function zce(t,e,n,r,s,i,o,a,c){cE=!1,Rx=null,jce.apply(Wce,arguments)}function Hce(t,e,n,r,s,i,o,a,c){if(zce.apply(this,arguments),cE){if(cE){var l=Rx;cE=!1,Rx=null}else throw Error(Ce(198));Px||(Px=!0,ck=l)}}function lm(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e6(t){if(lm(t)!==t)throw Error(Ce(188))}function Gce(t){var e=t.alternate;if(!e){if(e=lm(t),e===null)throw Error(Ce(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return e6(s),t;if(i===r)return e6(s),e;i=i.sibling}throw Error(Ce(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ce(189))}}if(n.alternate!==r)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?t:e}function EG(t){return t=Gce(t),t!==null?CG(t):null}function CG(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=CG(t);if(e!==null)return e;t=t.sibling}return null}var _G=na.unstable_scheduleCallback,t6=na.unstable_cancelCallback,qce=na.unstable_shouldYield,Vce=na.unstable_requestPaint,Fr=na.unstable_now,Kce=na.unstable_getCurrentPriorityLevel,UM=na.unstable_ImmediatePriority,AG=na.unstable_UserBlockingPriority,Ox=na.unstable_NormalPriority,Yce=na.unstable_LowPriority,SG=na.unstable_IdlePriority,_N=null,jl=null;function Qce(t){if(jl&&typeof jl.onCommitFiberRoot=="function")try{jl.onCommitFiberRoot(_N,t,void 0,(t.current.flags&128)===128)}catch{}}var $c=Math.clz32?Math.clz32:Xce,Jce=Math.log,Zce=Math.LN2;function Xce(t){return t>>>=0,t===0?32:31-(Jce(t)/Zce|0)|0}var iA=64,oA=4194304;function Ov(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ov(a):(i&=o,i!==0&&(r=Ov(i)))}else o=n&~s,o!==0?r=Ov(o):i!==0&&(r=Ov(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$c(e),s=1<<n,r|=t[n],e&=~s;return r}function ele(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tle(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-$c(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=ele(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function lk(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xG(){var t=iA;return iA<<=1,!(iA&4194240)&&(iA=64),t}function $R(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function K_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$c(e),t[e]=n}function nle(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-$c(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $M(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$c(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var On=0;function IG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var NG,BM,TG,RG,PG,uk=!1,aA=[],Yh=null,Qh=null,Jh=null,JE=new Map,ZE=new Map,rh=[],rle="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n6(t,e){switch(t){case"focusin":case"focusout":Yh=null;break;case"dragenter":case"dragleave":Qh=null;break;case"mouseover":case"mouseout":Jh=null;break;case"pointerover":case"pointerout":JE.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ZE.delete(e.pointerId)}}function Jb(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Q_(e),e!==null&&BM(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function sle(t,e,n,r,s){switch(e){case"focusin":return Yh=Jb(Yh,t,e,n,r,s),!0;case"dragenter":return Qh=Jb(Qh,t,e,n,r,s),!0;case"mouseover":return Jh=Jb(Jh,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return JE.set(i,Jb(JE.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ZE.set(i,Jb(ZE.get(i)||null,t,e,n,r,s)),!0}return!1}function OG(t){var e=Ap(t.target);if(e!==null){var n=lm(e);if(n!==null){if(e=n.tag,e===13){if(e=vG(n),e!==null){t.blockedOn=e,PG(t.priority,function(){TG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ES(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dk(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ik=r,n.target.dispatchEvent(r),ik=null}else return e=Q_(n),e!==null&&BM(e),t.blockedOn=n,!1;e.shift()}return!0}function r6(t,e,n){ES(t)&&n.delete(e)}function ile(){uk=!1,Yh!==null&&ES(Yh)&&(Yh=null),Qh!==null&&ES(Qh)&&(Qh=null),Jh!==null&&ES(Jh)&&(Jh=null),JE.forEach(r6),ZE.forEach(r6)}function Zb(t,e){t.blockedOn===e&&(t.blockedOn=null,uk||(uk=!0,na.unstable_scheduleCallback(na.unstable_NormalPriority,ile)))}function XE(t){function e(s){return Zb(s,t)}if(0<aA.length){Zb(aA[0],t);for(var n=1;n<aA.length;n++){var r=aA[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Yh!==null&&Zb(Yh,t),Qh!==null&&Zb(Qh,t),Jh!==null&&Zb(Jh,t),JE.forEach(e),ZE.forEach(e),n=0;n<rh.length;n++)r=rh[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rh.length&&(n=rh[0],n.blockedOn===null);)OG(n),n.blockedOn===null&&rh.shift()}var Zy=Ed.ReactCurrentBatchConfig,Dx=!0;function ole(t,e,n,r){var s=On,i=Zy.transition;Zy.transition=null;try{On=1,FM(t,e,n,r)}finally{On=s,Zy.transition=i}}function ale(t,e,n,r){var s=On,i=Zy.transition;Zy.transition=null;try{On=4,FM(t,e,n,r)}finally{On=s,Zy.transition=i}}function FM(t,e,n,r){if(Dx){var s=dk(t,e,n,r);if(s===null)KR(t,e,r,Mx,n),n6(t,r);else if(sle(s,t,e,n,r))r.stopPropagation();else if(n6(t,r),e&4&&-1<rle.indexOf(t)){for(;s!==null;){var i=Q_(s);if(i!==null&&NG(i),i=dk(t,e,n,r),i===null&&KR(t,e,r,Mx,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else KR(t,e,r,null,n)}}var Mx=null;function dk(t,e,n,r){if(Mx=null,t=LM(r),t=Ap(t),t!==null)if(e=lm(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vG(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mx=t,null}function kG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Kce()){case UM:return 1;case AG:return 4;case Ox:case Yce:return 16;case SG:return 536870912;default:return 16}default:return 16}}var Lh=null,jM=null,CS=null;function DG(){if(CS)return CS;var t,e=jM,n=e.length,r,s="value"in Lh?Lh.value:Lh.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return CS=s.slice(t,1<r?1-r:void 0)}function _S(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cA(){return!0}function s6(){return!1}function oa(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?cA:s6,this.isPropagationStopped=s6,this}return Ar(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cA)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cA)},persist:function(){},isPersistent:cA}),e}var ub={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},WM=oa(ub),Y_=Ar({},ub,{view:0,detail:0}),cle=oa(Y_),BR,FR,Xb,AN=Ar({},Y_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xb&&(Xb&&t.type==="mousemove"?(BR=t.screenX-Xb.screenX,FR=t.screenY-Xb.screenY):FR=BR=0,Xb=t),BR)},movementY:function(t){return"movementY"in t?t.movementY:FR}}),i6=oa(AN),lle=Ar({},AN,{dataTransfer:0}),ule=oa(lle),dle=Ar({},Y_,{relatedTarget:0}),jR=oa(dle),hle=Ar({},ub,{animationName:0,elapsedTime:0,pseudoElement:0}),fle=oa(hle),ple=Ar({},ub,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gle=oa(ple),mle=Ar({},ub,{data:0}),o6=oa(mle),yle={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ble={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vle(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ble[t])?!!e[t]:!1}function zM(){return vle}var Ele=Ar({},Y_,{key:function(t){if(t.key){var e=yle[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_S(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wle[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zM,charCode:function(t){return t.type==="keypress"?_S(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_S(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cle=oa(Ele),_le=Ar({},AN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),a6=oa(_le),Ale=Ar({},Y_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zM}),Sle=oa(Ale),xle=Ar({},ub,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ile=oa(xle),Nle=Ar({},AN,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Tle=oa(Nle),Rle=[9,13,27,32],HM=ud&&"CompositionEvent"in window,lE=null;ud&&"documentMode"in document&&(lE=document.documentMode);var Ple=ud&&"TextEvent"in window&&!lE,MG=ud&&(!HM||lE&&8<lE&&11>=lE),c6=" ",l6=!1;function LG(t,e){switch(t){case"keyup":return Rle.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UG(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xy=!1;function Ole(t,e){switch(t){case"compositionend":return UG(e);case"keypress":return e.which!==32?null:(l6=!0,c6);case"textInput":return t=e.data,t===c6&&l6?null:t;default:return null}}function kle(t,e){if(xy)return t==="compositionend"||!HM&&LG(t,e)?(t=DG(),CS=jM=Lh=null,xy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MG&&e.locale!=="ko"?null:e.data;default:return null}}var Dle={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Dle[t.type]:e==="textarea"}function $G(t,e,n,r){gG(r),e=Lx(e,"onChange"),0<e.length&&(n=new WM("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var uE=null,eC=null;function Mle(t){YG(t,0)}function SN(t){var e=Ty(t);if(cG(e))return t}function Lle(t,e){if(t==="change")return e}var BG=!1;if(ud){var WR;if(ud){var zR="oninput"in document;if(!zR){var d6=document.createElement("div");d6.setAttribute("oninput","return;"),zR=typeof d6.oninput=="function"}WR=zR}else WR=!1;BG=WR&&(!document.documentMode||9<document.documentMode)}function h6(){uE&&(uE.detachEvent("onpropertychange",FG),eC=uE=null)}function FG(t){if(t.propertyName==="value"&&SN(eC)){var e=[];$G(e,eC,t,LM(t)),bG(Mle,e)}}function Ule(t,e,n){t==="focusin"?(h6(),uE=e,eC=n,uE.attachEvent("onpropertychange",FG)):t==="focusout"&&h6()}function $le(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return SN(eC)}function Ble(t,e){if(t==="click")return SN(e)}function Fle(t,e){if(t==="input"||t==="change")return SN(e)}function jle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wc=typeof Object.is=="function"?Object.is:jle;function tC(t,e){if(Wc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!V2.call(e,s)||!Wc(t[s],e[s]))return!1}return!0}function f6(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p6(t,e){var n=f6(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f6(n)}}function jG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function WG(){for(var t=window,e=Tx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tx(t.document)}return e}function GM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Wle(t){var e=WG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jG(n.ownerDocument.documentElement,n)){if(r!==null&&GM(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=p6(n,i);var o=p6(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zle=ud&&"documentMode"in document&&11>=document.documentMode,Iy=null,hk=null,dE=null,fk=!1;function g6(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fk||Iy==null||Iy!==Tx(r)||(r=Iy,"selectionStart"in r&&GM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dE&&tC(dE,r)||(dE=r,r=Lx(hk,"onSelect"),0<r.length&&(e=new WM("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Iy)))}function lA(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ny={animationend:lA("Animation","AnimationEnd"),animationiteration:lA("Animation","AnimationIteration"),animationstart:lA("Animation","AnimationStart"),transitionend:lA("Transition","TransitionEnd")},HR={},zG={};ud&&(zG=document.createElement("div").style,"AnimationEvent"in window||(delete Ny.animationend.animation,delete Ny.animationiteration.animation,delete Ny.animationstart.animation),"TransitionEvent"in window||delete Ny.transitionend.transition);function xN(t){if(HR[t])return HR[t];if(!Ny[t])return t;var e=Ny[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zG)return HR[t]=e[n];return t}var HG=xN("animationend"),GG=xN("animationiteration"),qG=xN("animationstart"),VG=xN("transitionend"),KG=new Map,m6="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kf(t,e){KG.set(t,e),cm(e,[t])}for(var GR=0;GR<m6.length;GR++){var qR=m6[GR],Hle=qR.toLowerCase(),Gle=qR[0].toUpperCase()+qR.slice(1);kf(Hle,"on"+Gle)}kf(HG,"onAnimationEnd");kf(GG,"onAnimationIteration");kf(qG,"onAnimationStart");kf("dblclick","onDoubleClick");kf("focusin","onFocus");kf("focusout","onBlur");kf(VG,"onTransitionEnd");yw("onMouseEnter",["mouseout","mouseover"]);yw("onMouseLeave",["mouseout","mouseover"]);yw("onPointerEnter",["pointerout","pointerover"]);yw("onPointerLeave",["pointerout","pointerover"]);cm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cm("onBeforeInput",["compositionend","keypress","textInput","paste"]);cm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qle=new Set("cancel close invalid load scroll toggle".split(" ").concat(kv));function y6(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Hce(r,e,void 0,t),t.currentTarget=null}function YG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;y6(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;y6(s,a,l),i=c}}}if(Px)throw t=ck,Px=!1,ck=null,t}function ar(t,e){var n=e[wk];n===void 0&&(n=e[wk]=new Set);var r=t+"__bubble";n.has(r)||(QG(e,t,2,!1),n.add(r))}function VR(t,e,n){var r=0;e&&(r|=4),QG(n,t,r,e)}var uA="_reactListening"+Math.random().toString(36).slice(2);function nC(t){if(!t[uA]){t[uA]=!0,rG.forEach(function(n){n!=="selectionchange"&&(qle.has(n)||VR(n,!1,t),VR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[uA]||(e[uA]=!0,VR("selectionchange",!1,e))}}function QG(t,e,n,r){switch(kG(e)){case 1:var s=ole;break;case 4:s=ale;break;default:s=FM}n=s.bind(null,e,n,t),s=void 0,!ak||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function KR(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ap(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}bG(function(){var l=i,u=LM(n),d=[];e:{var h=KG.get(t);if(h!==void 0){var f=WM,p=t;switch(t){case"keypress":if(_S(n)===0)break e;case"keydown":case"keyup":f=Cle;break;case"focusin":p="focus",f=jR;break;case"focusout":p="blur",f=jR;break;case"beforeblur":case"afterblur":f=jR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=i6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=ule;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Sle;break;case HG:case GG:case qG:f=fle;break;case VG:f=Ile;break;case"scroll":f=cle;break;case"wheel":f=Tle;break;case"copy":case"cut":case"paste":f=gle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=a6}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,y!==null&&(A=QE(b,y),A!=null&&g.push(rC(b,A,v)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==ik&&(p=n.relatedTarget||n.fromElement)&&(Ap(p)||p[dd]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?Ap(p):null,p!==null&&(w=lm(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=i6,A="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=a6,A="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:Ty(f),v=p==null?h:Ty(p),h=new g(A,b+"leave",f,n,u),h.target=w,h.relatedTarget=v,A=null,Ap(u)===l&&(g=new g(y,b+"enter",p,n,u),g.target=v,g.relatedTarget=w,A=g),w=A,f&&p)t:{for(g=f,y=p,b=0,v=g;v;v=Um(v))b++;for(v=0,A=y;A;A=Um(A))v++;for(;0<b-v;)g=Um(g),b--;for(;0<v-b;)y=Um(y),v--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=Um(g),y=Um(y)}g=null}else g=null;f!==null&&w6(d,h,f,g,!1),p!==null&&w!==null&&w6(d,w,p,g,!0)}}e:{if(h=l?Ty(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=Lle;else if(u6(h))if(BG)_=Fle;else{_=$le;var I=Ule}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=Ble);if(_&&(_=_(t,l))){$G(d,_,n,u);break e}I&&I(t,h,l),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&ek(h,"number",h.value)}switch(I=l?Ty(l):window,t){case"focusin":(u6(I)||I.contentEditable==="true")&&(Iy=I,hk=l,dE=null);break;case"focusout":dE=hk=Iy=null;break;case"mousedown":fk=!0;break;case"contextmenu":case"mouseup":case"dragend":fk=!1,g6(d,n,u);break;case"selectionchange":if(zle)break;case"keydown":case"keyup":g6(d,n,u)}var x;if(HM)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else xy?LG(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(MG&&n.locale!=="ko"&&(xy||N!=="onCompositionStart"?N==="onCompositionEnd"&&xy&&(x=DG()):(Lh=u,jM="value"in Lh?Lh.value:Lh.textContent,xy=!0)),I=Lx(l,N),0<I.length&&(N=new o6(N,t,null,n,u),d.push({event:N,listeners:I}),x?N.data=x:(x=UG(n),x!==null&&(N.data=x)))),(x=Ple?Ole(t,n):kle(t,n))&&(l=Lx(l,"onBeforeInput"),0<l.length&&(u=new o6("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}YG(d,e)})}function rC(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lx(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=QE(t,n),i!=null&&r.unshift(rC(t,i,s)),i=QE(t,e),i!=null&&r.push(rC(t,i,s))),t=t.return}return r}function Um(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function w6(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=QE(n,i),c!=null&&o.unshift(rC(n,c,a))):s||(c=QE(n,i),c!=null&&o.push(rC(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Vle=/\r\n?/g,Kle=/\u0000|\uFFFD/g;function b6(t){return(typeof t=="string"?t:""+t).replace(Vle,`
`).replace(Kle,"")}function dA(t,e,n){if(e=b6(e),b6(t)!==e&&n)throw Error(Ce(425))}function Ux(){}var pk=null,gk=null;function mk(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yk=typeof setTimeout=="function"?setTimeout:void 0,Yle=typeof clearTimeout=="function"?clearTimeout:void 0,v6=typeof Promise=="function"?Promise:void 0,Qle=typeof queueMicrotask=="function"?queueMicrotask:typeof v6<"u"?function(t){return v6.resolve(null).then(t).catch(Jle)}:yk;function Jle(t){setTimeout(function(){throw t})}function YR(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),XE(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);XE(e)}function Zh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function E6(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var db=Math.random().toString(36).slice(2),kl="__reactFiber$"+db,sC="__reactProps$"+db,dd="__reactContainer$"+db,wk="__reactEvents$"+db,Zle="__reactListeners$"+db,Xle="__reactHandles$"+db;function Ap(t){var e=t[kl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dd]||n[kl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=E6(t);t!==null;){if(n=t[kl])return n;t=E6(t)}return e}t=n,n=t.parentNode}return null}function Q_(t){return t=t[kl]||t[dd],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ty(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ce(33))}function IN(t){return t[sC]||null}var bk=[],Ry=-1;function Df(t){return{current:t}}function lr(t){0>Ry||(t.current=bk[Ry],bk[Ry]=null,Ry--)}function sr(t,e){Ry++,bk[Ry]=t.current,t.current=e}var vf={},gi=Df(vf),vo=Df(!1),Ng=vf;function ww(t,e){var n=t.type.contextTypes;if(!n)return vf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Eo(t){return t=t.childContextTypes,t!=null}function $x(){lr(vo),lr(gi)}function C6(t,e,n){if(gi.current!==vf)throw Error(Ce(168));sr(gi,e),sr(vo,n)}function JG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ce(108,Uce(t)||"Unknown",s));return Ar({},n,r)}function Bx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vf,Ng=gi.current,sr(gi,t),sr(vo,vo.current),!0}function _6(t,e,n){var r=t.stateNode;if(!r)throw Error(Ce(169));n?(t=JG(t,e,Ng),r.__reactInternalMemoizedMergedChildContext=t,lr(vo),lr(gi),sr(gi,t)):lr(vo),sr(vo,n)}var xu=null,NN=!1,QR=!1;function ZG(t){xu===null?xu=[t]:xu.push(t)}function eue(t){NN=!0,ZG(t)}function Mf(){if(!QR&&xu!==null){QR=!0;var t=0,e=On;try{var n=xu;for(On=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xu=null,NN=!1}catch(s){throw xu!==null&&(xu=xu.slice(t+1)),_G(UM,Mf),s}finally{On=e,QR=!1}}return null}var Py=[],Oy=0,Fx=null,jx=0,La=[],Ua=0,Tg=null,Vu=1,Ku="";function ip(t,e){Py[Oy++]=jx,Py[Oy++]=Fx,Fx=t,jx=e}function XG(t,e,n){La[Ua++]=Vu,La[Ua++]=Ku,La[Ua++]=Tg,Tg=t;var r=Vu;t=Ku;var s=32-$c(r)-1;r&=~(1<<s),n+=1;var i=32-$c(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Vu=1<<32-$c(e)+s|n<<s|r,Ku=i+t}else Vu=1<<i|n<<s|r,Ku=t}function qM(t){t.return!==null&&(ip(t,1),XG(t,1,0))}function VM(t){for(;t===Fx;)Fx=Py[--Oy],Py[Oy]=null,jx=Py[--Oy],Py[Oy]=null;for(;t===Tg;)Tg=La[--Ua],La[Ua]=null,Ku=La[--Ua],La[Ua]=null,Vu=La[--Ua],La[Ua]=null}var Xo=null,Yo=null,mr=!1,xc=null;function eq(t,e){var n=Ba(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function A6(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xo=t,Yo=Zh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xo=t,Yo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Tg!==null?{id:Vu,overflow:Ku}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ba(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xo=t,Yo=null,!0):!1;default:return!1}}function vk(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ek(t){if(mr){var e=Yo;if(e){var n=e;if(!A6(t,e)){if(vk(t))throw Error(Ce(418));e=Zh(n.nextSibling);var r=Xo;e&&A6(t,e)?eq(r,n):(t.flags=t.flags&-4097|2,mr=!1,Xo=t)}}else{if(vk(t))throw Error(Ce(418));t.flags=t.flags&-4097|2,mr=!1,Xo=t}}}function S6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xo=t}function hA(t){if(t!==Xo)return!1;if(!mr)return S6(t),mr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mk(t.type,t.memoizedProps)),e&&(e=Yo)){if(vk(t))throw tq(),Error(Ce(418));for(;e;)eq(t,e),e=Zh(e.nextSibling)}if(S6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yo=Zh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yo=null}}else Yo=Xo?Zh(t.stateNode.nextSibling):null;return!0}function tq(){for(var t=Yo;t;)t=Zh(t.nextSibling)}function bw(){Yo=Xo=null,mr=!1}function KM(t){xc===null?xc=[t]:xc.push(t)}var tue=Ed.ReactCurrentBatchConfig;function ev(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var r=n.stateNode}if(!r)throw Error(Ce(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,t))}return t}function fA(t,e){throw t=Object.prototype.toString.call(e),Error(Ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function x6(t){var e=t._init;return e(t._payload)}function nq(t){function e(y,b){if(t){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=nf(y,b),y.index=0,y.sibling=null,y}function i(y,b,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,v,A){return b===null||b.tag!==6?(b=rP(v,y.mode,A),b.return=y,b):(b=s(b,v),b.return=y,b)}function c(y,b,v,A){var _=v.type;return _===Sy?u(y,b,v.props.children,A,v.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Jd&&x6(_)===b.type)?(A=s(b,v.props),A.ref=ev(y,b,v),A.return=y,A):(A=RS(v.type,v.key,v.props,null,y.mode,A),A.ref=ev(y,b,v),A.return=y,A)}function l(y,b,v,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=sP(v,y.mode,A),b.return=y,b):(b=s(b,v.children||[]),b.return=y,b)}function u(y,b,v,A,_){return b===null||b.tag!==7?(b=gg(v,y.mode,A,_),b.return=y,b):(b=s(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=rP(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case nA:return v=RS(b.type,b.key,b.props,null,y.mode,v),v.ref=ev(y,null,b),v.return=y,v;case Ay:return b=sP(b,y.mode,v),b.return=y,b;case Jd:var A=b._init;return d(y,A(b._payload),v)}if(Pv(b)||Yb(b))return b=gg(b,y.mode,v,null),b.return=y,b;fA(y,b)}return null}function h(y,b,v,A){var _=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:a(y,b,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case nA:return v.key===_?c(y,b,v,A):null;case Ay:return v.key===_?l(y,b,v,A):null;case Jd:return _=v._init,h(y,b,_(v._payload),A)}if(Pv(v)||Yb(v))return _!==null?null:u(y,b,v,A,null);fA(y,v)}return null}function f(y,b,v,A,_){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(v)||null,a(b,y,""+A,_);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case nA:return y=y.get(A.key===null?v:A.key)||null,c(b,y,A,_);case Ay:return y=y.get(A.key===null?v:A.key)||null,l(b,y,A,_);case Jd:var I=A._init;return f(y,b,v,I(A._payload),_)}if(Pv(A)||Yb(A))return y=y.get(v)||null,u(b,y,A,_,null);fA(b,A)}return null}function p(y,b,v,A){for(var _=null,I=null,x=b,N=b=0,S=null;x!==null&&N<v.length;N++){x.index>N?(S=x,x=null):S=x.sibling;var O=h(y,x,v[N],A);if(O===null){x===null&&(x=S);break}t&&x&&O.alternate===null&&e(y,x),b=i(O,b,N),I===null?_=O:I.sibling=O,I=O,x=S}if(N===v.length)return n(y,x),mr&&ip(y,N),_;if(x===null){for(;N<v.length;N++)x=d(y,v[N],A),x!==null&&(b=i(x,b,N),I===null?_=x:I.sibling=x,I=x);return mr&&ip(y,N),_}for(x=r(y,x);N<v.length;N++)S=f(x,y,N,v[N],A),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?N:S.key),b=i(S,b,N),I===null?_=S:I.sibling=S,I=S);return t&&x.forEach(function(P){return e(y,P)}),mr&&ip(y,N),_}function g(y,b,v,A){var _=Yb(v);if(typeof _!="function")throw Error(Ce(150));if(v=_.call(v),v==null)throw Error(Ce(151));for(var I=_=null,x=b,N=b=0,S=null,O=v.next();x!==null&&!O.done;N++,O=v.next()){x.index>N?(S=x,x=null):S=x.sibling;var P=h(y,x,O.value,A);if(P===null){x===null&&(x=S);break}t&&x&&P.alternate===null&&e(y,x),b=i(P,b,N),I===null?_=P:I.sibling=P,I=P,x=S}if(O.done)return n(y,x),mr&&ip(y,N),_;if(x===null){for(;!O.done;N++,O=v.next())O=d(y,O.value,A),O!==null&&(b=i(O,b,N),I===null?_=O:I.sibling=O,I=O);return mr&&ip(y,N),_}for(x=r(y,x);!O.done;N++,O=v.next())O=f(x,y,N,O.value,A),O!==null&&(t&&O.alternate!==null&&x.delete(O.key===null?N:O.key),b=i(O,b,N),I===null?_=O:I.sibling=O,I=O);return t&&x.forEach(function(F){return e(y,F)}),mr&&ip(y,N),_}function w(y,b,v,A){if(typeof v=="object"&&v!==null&&v.type===Sy&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case nA:e:{for(var _=v.key,I=b;I!==null;){if(I.key===_){if(_=v.type,_===Sy){if(I.tag===7){n(y,I.sibling),b=s(I,v.props.children),b.return=y,y=b;break e}}else if(I.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Jd&&x6(_)===I.type){n(y,I.sibling),b=s(I,v.props),b.ref=ev(y,I,v),b.return=y,y=b;break e}n(y,I);break}else e(y,I);I=I.sibling}v.type===Sy?(b=gg(v.props.children,y.mode,A,v.key),b.return=y,y=b):(A=RS(v.type,v.key,v.props,null,y.mode,A),A.ref=ev(y,b,v),A.return=y,y=A)}return o(y);case Ay:e:{for(I=v.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(y,b.sibling),b=s(b,v.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=sP(v,y.mode,A),b.return=y,y=b}return o(y);case Jd:return I=v._init,w(y,b,I(v._payload),A)}if(Pv(v))return p(y,b,v,A);if(Yb(v))return g(y,b,v,A);fA(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,v),b.return=y,y=b):(n(y,b),b=rP(v,y.mode,A),b.return=y,y=b),o(y)):n(y,b)}return w}var vw=nq(!0),rq=nq(!1),Wx=Df(null),zx=null,ky=null,YM=null;function QM(){YM=ky=zx=null}function JM(t){var e=Wx.current;lr(Wx),t._currentValue=e}function Ck(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xy(t,e){zx=t,YM=ky=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wo=!0),t.firstContext=null)}function Ha(t){var e=t._currentValue;if(YM!==t)if(t={context:t,memoizedValue:e,next:null},ky===null){if(zx===null)throw Error(Ce(308));ky=t,zx.dependencies={lanes:0,firstContext:t}}else ky=ky.next=t;return e}var Sp=null;function ZM(t){Sp===null?Sp=[t]:Sp.push(t)}function sq(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ZM(e)):(n.next=s.next,s.next=n),e.interleaved=n,hd(t,r)}function hd(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zd=!1;function XM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iq(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,hn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,hd(t,n)}return s=r.interleaved,s===null?(e.next=e,ZM(r)):(e.next=s.next,s.next=e),r.interleaved=e,hd(t,n)}function AS(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$M(t,n)}}function I6(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Hx(t,e,n,r){var s=t.updateQueue;Zd=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Ar({},d,h);break e;case 2:Zd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Pg|=o,t.lanes=o,t.memoizedState=d}}function N6(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ce(191,s));s.call(r)}}}var J_={},Wl=Df(J_),iC=Df(J_),oC=Df(J_);function xp(t){if(t===J_)throw Error(Ce(174));return t}function eL(t,e){switch(sr(oC,e),sr(iC,t),sr(Wl,J_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nk(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nk(e,t)}lr(Wl),sr(Wl,e)}function Ew(){lr(Wl),lr(iC),lr(oC)}function oq(t){xp(oC.current);var e=xp(Wl.current),n=nk(e,t.type);e!==n&&(sr(iC,t),sr(Wl,n))}function tL(t){iC.current===t&&(lr(Wl),lr(iC))}var br=Df(0);function Gx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var JR=[];function nL(){for(var t=0;t<JR.length;t++)JR[t]._workInProgressVersionPrimary=null;JR.length=0}var SS=Ed.ReactCurrentDispatcher,ZR=Ed.ReactCurrentBatchConfig,Rg=0,_r=null,es=null,bs=null,qx=!1,hE=!1,aC=0,nue=0;function ri(){throw Error(Ce(321))}function rL(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wc(t[n],e[n]))return!1;return!0}function sL(t,e,n,r,s,i){if(Rg=i,_r=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,SS.current=t===null||t.memoizedState===null?oue:aue,t=n(r,s),hE){i=0;do{if(hE=!1,aC=0,25<=i)throw Error(Ce(301));i+=1,bs=es=null,e.updateQueue=null,SS.current=cue,t=n(r,s)}while(hE)}if(SS.current=Vx,e=es!==null&&es.next!==null,Rg=0,bs=es=_r=null,qx=!1,e)throw Error(Ce(300));return t}function iL(){var t=aC!==0;return aC=0,t}function dl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bs===null?_r.memoizedState=bs=t:bs=bs.next=t,bs}function Ga(){if(es===null){var t=_r.alternate;t=t!==null?t.memoizedState:null}else t=es.next;var e=bs===null?_r.memoizedState:bs.next;if(e!==null)bs=e,es=t;else{if(t===null)throw Error(Ce(310));es=t,t={memoizedState:es.memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},bs===null?_r.memoizedState=bs=t:bs=bs.next=t}return bs}function cC(t,e){return typeof e=="function"?e(t):e}function XR(t){var e=Ga(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var r=es,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Rg&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,_r.lanes|=u,Pg|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Wc(r,e.memoizedState)||(wo=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,_r.lanes|=i,Pg|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function eP(t){var e=Ga(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Wc(i,e.memoizedState)||(wo=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function aq(){}function cq(t,e){var n=_r,r=Ga(),s=e(),i=!Wc(r.memoizedState,s);if(i&&(r.memoizedState=s,wo=!0),r=r.queue,oL(dq.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||bs!==null&&bs.memoizedState.tag&1){if(n.flags|=2048,lC(9,uq.bind(null,n,r,s,e),void 0,null),Is===null)throw Error(Ce(349));Rg&30||lq(n,e,s)}return s}function lq(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_r.updateQueue,e===null?(e={lastEffect:null,stores:null},_r.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uq(t,e,n,r){e.value=n,e.getSnapshot=r,hq(e)&&fq(t)}function dq(t,e,n){return n(function(){hq(e)&&fq(t)})}function hq(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wc(t,n)}catch{return!0}}function fq(t){var e=hd(t,1);e!==null&&Bc(e,t,1,-1)}function T6(t){var e=dl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cC,lastRenderedState:t},e.queue=t,t=t.dispatch=iue.bind(null,_r,t),[e.memoizedState,t]}function lC(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_r.updateQueue,e===null?(e={lastEffect:null,stores:null},_r.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function pq(){return Ga().memoizedState}function xS(t,e,n,r){var s=dl();_r.flags|=t,s.memoizedState=lC(1|e,n,void 0,r===void 0?null:r)}function TN(t,e,n,r){var s=Ga();r=r===void 0?null:r;var i=void 0;if(es!==null){var o=es.memoizedState;if(i=o.destroy,r!==null&&rL(r,o.deps)){s.memoizedState=lC(e,n,i,r);return}}_r.flags|=t,s.memoizedState=lC(1|e,n,i,r)}function R6(t,e){return xS(8390656,8,t,e)}function oL(t,e){return TN(2048,8,t,e)}function gq(t,e){return TN(4,2,t,e)}function mq(t,e){return TN(4,4,t,e)}function yq(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wq(t,e,n){return n=n!=null?n.concat([t]):null,TN(4,4,yq.bind(null,e,t),n)}function aL(){}function bq(t,e){var n=Ga();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rL(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vq(t,e){var n=Ga();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rL(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Eq(t,e,n){return Rg&21?(Wc(n,e)||(n=xG(),_r.lanes|=n,Pg|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wo=!0),t.memoizedState=n)}function rue(t,e){var n=On;On=n!==0&&4>n?n:4,t(!0);var r=ZR.transition;ZR.transition={};try{t(!1),e()}finally{On=n,ZR.transition=r}}function Cq(){return Ga().memoizedState}function sue(t,e,n){var r=tf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_q(t))Aq(e,n);else if(n=sq(t,e,n,r),n!==null){var s=Ui();Bc(n,t,r,s),Sq(n,e,r)}}function iue(t,e,n){var r=tf(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_q(t))Aq(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Wc(a,o)){var c=e.interleaved;c===null?(s.next=s,ZM(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=sq(t,e,s,r),n!==null&&(s=Ui(),Bc(n,t,r,s),Sq(n,e,r))}}function _q(t){var e=t.alternate;return t===_r||e!==null&&e===_r}function Aq(t,e){hE=qx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Sq(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$M(t,n)}}var Vx={readContext:Ha,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},oue={readContext:Ha,useCallback:function(t,e){return dl().memoizedState=[t,e===void 0?null:e],t},useContext:Ha,useEffect:R6,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xS(4194308,4,yq.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xS(4194308,4,t,e)},useInsertionEffect:function(t,e){return xS(4,2,t,e)},useMemo:function(t,e){var n=dl();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dl();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sue.bind(null,_r,t),[r.memoizedState,t]},useRef:function(t){var e=dl();return t={current:t},e.memoizedState=t},useState:T6,useDebugValue:aL,useDeferredValue:function(t){return dl().memoizedState=t},useTransition:function(){var t=T6(!1),e=t[0];return t=rue.bind(null,t[1]),dl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_r,s=dl();if(mr){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=e(),Is===null)throw Error(Ce(349));Rg&30||lq(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,R6(dq.bind(null,r,i,t),[t]),r.flags|=2048,lC(9,uq.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=dl(),e=Is.identifierPrefix;if(mr){var n=Ku,r=Vu;n=(r&~(1<<32-$c(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=aC++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nue++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aue={readContext:Ha,useCallback:bq,useContext:Ha,useEffect:oL,useImperativeHandle:wq,useInsertionEffect:gq,useLayoutEffect:mq,useMemo:vq,useReducer:XR,useRef:pq,useState:function(){return XR(cC)},useDebugValue:aL,useDeferredValue:function(t){var e=Ga();return Eq(e,es.memoizedState,t)},useTransition:function(){var t=XR(cC)[0],e=Ga().memoizedState;return[t,e]},useMutableSource:aq,useSyncExternalStore:cq,useId:Cq,unstable_isNewReconciler:!1},cue={readContext:Ha,useCallback:bq,useContext:Ha,useEffect:oL,useImperativeHandle:wq,useInsertionEffect:gq,useLayoutEffect:mq,useMemo:vq,useReducer:eP,useRef:pq,useState:function(){return eP(cC)},useDebugValue:aL,useDeferredValue:function(t){var e=Ga();return es===null?e.memoizedState=t:Eq(e,es.memoizedState,t)},useTransition:function(){var t=eP(cC)[0],e=Ga().memoizedState;return[t,e]},useMutableSource:aq,useSyncExternalStore:cq,useId:Cq,unstable_isNewReconciler:!1};function gc(t,e){if(t&&t.defaultProps){e=Ar({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _k(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ar({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var RN={isMounted:function(t){return(t=t._reactInternals)?lm(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ui(),s=tf(t),i=Xu(r,s);i.payload=e,n!=null&&(i.callback=n),e=Xh(t,i,s),e!==null&&(Bc(e,t,s,r),AS(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ui(),s=tf(t),i=Xu(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Xh(t,i,s),e!==null&&(Bc(e,t,s,r),AS(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ui(),r=tf(t),s=Xu(n,r);s.tag=2,e!=null&&(s.callback=e),e=Xh(t,s,r),e!==null&&(Bc(e,t,r,n),AS(e,t,r))}};function P6(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!tC(n,r)||!tC(s,i):!0}function xq(t,e,n){var r=!1,s=vf,i=e.contextType;return typeof i=="object"&&i!==null?i=Ha(i):(s=Eo(e)?Ng:gi.current,r=e.contextTypes,i=(r=r!=null)?ww(t,s):vf),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=RN,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function O6(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&RN.enqueueReplaceState(e,e.state,null)}function Ak(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},XM(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ha(i):(i=Eo(e)?Ng:gi.current,s.context=ww(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(_k(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&RN.enqueueReplaceState(s,s.state,null),Hx(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Cw(t,e){try{var n="",r=e;do n+=Lce(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function tP(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sk(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lue=typeof WeakMap=="function"?WeakMap:Map;function Iq(t,e,n){n=Xu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Yx||(Yx=!0,Mk=r),Sk(t,e)},n}function Nq(t,e,n){n=Xu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Sk(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Sk(t,e),typeof r!="function"&&(ef===null?ef=new Set([this]):ef.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function k6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lue;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=_ue.bind(null,t,e,n),e.then(t,t))}function D6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function M6(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xu(-1,1),e.tag=2,Xh(n,e,1))),n.lanes|=1),t)}var uue=Ed.ReactCurrentOwner,wo=!1;function Si(t,e,n,r){e.child=t===null?rq(e,null,n,r):vw(e,t.child,n,r)}function L6(t,e,n,r,s){n=n.render;var i=e.ref;return Xy(e,s),r=sL(t,e,n,r,i,s),n=iL(),t!==null&&!wo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fd(t,e,s)):(mr&&n&&qM(e),e.flags|=1,Si(t,e,r,s),e.child)}function U6(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!gL(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Tq(t,e,i,r,s)):(t=RS(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:tC,n(o,r)&&t.ref===e.ref)return fd(t,e,s)}return e.flags|=1,t=nf(i,r),t.ref=e.ref,t.return=e,e.child=t}function Tq(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(tC(i,r)&&t.ref===e.ref)if(wo=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wo=!0);else return e.lanes=t.lanes,fd(t,e,s)}return xk(t,e,n,r,s)}function Rq(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},sr(My,Ho),Ho|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,sr(My,Ho),Ho|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,sr(My,Ho),Ho|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,sr(My,Ho),Ho|=r;return Si(t,e,s,n),e.child}function Pq(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xk(t,e,n,r,s){var i=Eo(n)?Ng:gi.current;return i=ww(e,i),Xy(e,s),n=sL(t,e,n,r,i,s),r=iL(),t!==null&&!wo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fd(t,e,s)):(mr&&r&&qM(e),e.flags|=1,Si(t,e,n,s),e.child)}function $6(t,e,n,r,s){if(Eo(n)){var i=!0;Bx(e)}else i=!1;if(Xy(e,s),e.stateNode===null)IS(t,e),xq(e,n,r),Ak(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ha(l):(l=Eo(n)?Ng:gi.current,l=ww(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&O6(e,o,r,l),Zd=!1;var h=e.memoizedState;o.state=h,Hx(e,r,o,s),c=e.memoizedState,a!==r||h!==c||vo.current||Zd?(typeof u=="function"&&(_k(e,n,u,r),c=e.memoizedState),(a=Zd||P6(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,iq(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:gc(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ha(c):(c=Eo(n)?Ng:gi.current,c=ww(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&O6(e,o,r,c),Zd=!1,h=e.memoizedState,o.state=h,Hx(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||vo.current||Zd?(typeof f=="function"&&(_k(e,n,f,r),p=e.memoizedState),(l=Zd||P6(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ik(t,e,n,r,i,s)}function Ik(t,e,n,r,s,i){Pq(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&_6(e,n,!1),fd(t,e,i);r=e.stateNode,uue.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=vw(e,t.child,null,i),e.child=vw(e,null,a,i)):Si(t,e,a,i),e.memoizedState=r.state,s&&_6(e,n,!0),e.child}function Oq(t){var e=t.stateNode;e.pendingContext?C6(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C6(t,e.context,!1),eL(t,e.containerInfo)}function B6(t,e,n,r,s){return bw(),KM(s),e.flags|=256,Si(t,e,n,r),e.child}var Nk={dehydrated:null,treeContext:null,retryLane:0};function Tk(t){return{baseLanes:t,cachePool:null,transitions:null}}function kq(t,e,n){var r=e.pendingProps,s=br.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),sr(br,s&1),t===null)return Ek(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=kN(o,r,0,null),t=gg(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Tk(n),e.memoizedState=Nk,t):cL(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return due(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=nf(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=nf(a,i):(i=gg(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Tk(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Nk,r}return i=t.child,t=i.sibling,r=nf(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cL(t,e){return e=kN({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pA(t,e,n,r){return r!==null&&KM(r),vw(e,t.child,null,n),t=cL(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function due(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=tP(Error(Ce(422))),pA(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=kN({mode:"visible",children:r.children},s,0,null),i=gg(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&vw(e,t.child,null,o),e.child.memoizedState=Tk(o),e.memoizedState=Nk,i);if(!(e.mode&1))return pA(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ce(419)),r=tP(i,r,void 0),pA(t,e,o,r)}if(a=(o&t.childLanes)!==0,wo||a){if(r=Is,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hd(t,s),Bc(r,t,s,-1))}return pL(),r=tP(Error(Ce(421))),pA(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Aue.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Yo=Zh(s.nextSibling),Xo=e,mr=!0,xc=null,t!==null&&(La[Ua++]=Vu,La[Ua++]=Ku,La[Ua++]=Tg,Vu=t.id,Ku=t.overflow,Tg=e),e=cL(e,r.children),e.flags|=4096,e)}function F6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ck(t.return,e,n)}function nP(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Dq(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Si(t,e,r.children,n),r=br.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F6(t,n,e);else if(t.tag===19)F6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(sr(br,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Gx(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),nP(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Gx(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}nP(e,!0,n,null,i);break;case"together":nP(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function IS(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fd(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Pg|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ce(153));if(e.child!==null){for(t=e.child,n=nf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=nf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hue(t,e,n){switch(e.tag){case 3:Oq(e),bw();break;case 5:oq(e);break;case 1:Eo(e.type)&&Bx(e);break;case 4:eL(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;sr(Wx,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(sr(br,br.current&1),e.flags|=128,null):n&e.child.childLanes?kq(t,e,n):(sr(br,br.current&1),t=fd(t,e,n),t!==null?t.sibling:null);sr(br,br.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Dq(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),sr(br,br.current),r)break;return null;case 22:case 23:return e.lanes=0,Rq(t,e,n)}return fd(t,e,n)}var Mq,Rk,Lq,Uq;Mq=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rk=function(){};Lq=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,xp(Wl.current);var i=null;switch(n){case"input":s=Z2(t,s),r=Z2(t,r),i=[];break;case"select":s=Ar({},s,{value:void 0}),r=Ar({},r,{value:void 0}),i=[];break;case"textarea":s=tk(t,s),r=tk(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ux)}rk(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(KE.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(KE.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&ar("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};Uq=function(t,e,n,r){n!==r&&(e.flags|=4)};function tv(t,e){if(!mr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function si(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fue(t,e,n){var r=e.pendingProps;switch(VM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return si(e),null;case 1:return Eo(e.type)&&$x(),si(e),null;case 3:return r=e.stateNode,Ew(),lr(vo),lr(gi),nL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hA(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xc!==null&&($k(xc),xc=null))),Rk(t,e),si(e),null;case 5:tL(e);var s=xp(oC.current);if(n=e.type,t!==null&&e.stateNode!=null)Lq(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ce(166));return si(e),null}if(t=xp(Wl.current),hA(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[kl]=e,r[sC]=i,t=(e.mode&1)!==0,n){case"dialog":ar("cancel",r),ar("close",r);break;case"iframe":case"object":case"embed":ar("load",r);break;case"video":case"audio":for(s=0;s<kv.length;s++)ar(kv[s],r);break;case"source":ar("error",r);break;case"img":case"image":case"link":ar("error",r),ar("load",r);break;case"details":ar("toggle",r);break;case"input":YB(r,i),ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ar("invalid",r);break;case"textarea":JB(r,i),ar("invalid",r)}rk(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&dA(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&dA(r.textContent,a,t),s=["children",""+a]):KE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ar("scroll",r)}switch(n){case"input":rA(r),QB(r,i,!0);break;case"textarea":rA(r),ZB(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ux)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=dG(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[kl]=e,t[sC]=r,Mq(t,e,!1,!1),e.stateNode=t;e:{switch(o=sk(n,r),n){case"dialog":ar("cancel",t),ar("close",t),s=r;break;case"iframe":case"object":case"embed":ar("load",t),s=r;break;case"video":case"audio":for(s=0;s<kv.length;s++)ar(kv[s],t);s=r;break;case"source":ar("error",t),s=r;break;case"img":case"image":case"link":ar("error",t),ar("load",t),s=r;break;case"details":ar("toggle",t),s=r;break;case"input":YB(t,r),s=Z2(t,r),ar("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ar({},r,{value:void 0}),ar("invalid",t);break;case"textarea":JB(t,r),s=tk(t,r),ar("invalid",t);break;default:s=r}rk(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?pG(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&hG(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&YE(t,c):typeof c=="number"&&YE(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(KE.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ar("scroll",t):c!=null&&OM(t,i,c,o))}switch(n){case"input":rA(t),QB(t,r,!1);break;case"textarea":rA(t),ZB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bf(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Yy(t,!!r.multiple,i,!1):r.defaultValue!=null&&Yy(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ux)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return si(e),null;case 6:if(t&&e.stateNode!=null)Uq(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ce(166));if(n=xp(oC.current),xp(Wl.current),hA(e)){if(r=e.stateNode,n=e.memoizedProps,r[kl]=e,(i=r.nodeValue!==n)&&(t=Xo,t!==null))switch(t.tag){case 3:dA(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dA(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kl]=e,e.stateNode=r}return si(e),null;case 13:if(lr(br),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(mr&&Yo!==null&&e.mode&1&&!(e.flags&128))tq(),bw(),e.flags|=98560,i=!1;else if(i=hA(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ce(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ce(317));i[kl]=e}else bw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;si(e),i=!1}else xc!==null&&($k(xc),xc=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||br.current&1?is===0&&(is=3):pL())),e.updateQueue!==null&&(e.flags|=4),si(e),null);case 4:return Ew(),Rk(t,e),t===null&&nC(e.stateNode.containerInfo),si(e),null;case 10:return JM(e.type._context),si(e),null;case 17:return Eo(e.type)&&$x(),si(e),null;case 19:if(lr(br),i=e.memoizedState,i===null)return si(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)tv(i,!1);else{if(is!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gx(t),o!==null){for(e.flags|=128,tv(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return sr(br,br.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fr()>_w&&(e.flags|=128,r=!0,tv(i,!1),e.lanes=4194304)}else{if(!r)if(t=Gx(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tv(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!mr)return si(e),null}else 2*Fr()-i.renderingStartTime>_w&&n!==1073741824&&(e.flags|=128,r=!0,tv(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fr(),e.sibling=null,n=br.current,sr(br,r?n&1|2:n&1),e):(si(e),null);case 22:case 23:return fL(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ho&1073741824&&(si(e),e.subtreeFlags&6&&(e.flags|=8192)):si(e),null;case 24:return null;case 25:return null}throw Error(Ce(156,e.tag))}function pue(t,e){switch(VM(e),e.tag){case 1:return Eo(e.type)&&$x(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ew(),lr(vo),lr(gi),nL(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tL(e),null;case 13:if(lr(br),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ce(340));bw()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lr(br),null;case 4:return Ew(),null;case 10:return JM(e.type._context),null;case 22:case 23:return fL(),null;case 24:return null;default:return null}}var gA=!1,fi=!1,gue=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Dy(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Or(t,e,r)}else n.current=null}function Pk(t,e,n){try{n()}catch(r){Or(t,e,r)}}var j6=!1;function mue(t,e){if(pk=Dx,t=WG(),GM(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gk={focusedElem:t,selectionRange:n},Dx=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){e=Ke;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:gc(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(A){Or(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}return p=j6,j6=!1,p}function fE(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Pk(e,n,i)}s=s.next}while(s!==r)}}function PN(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ok(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $q(t){var e=t.alternate;e!==null&&(t.alternate=null,$q(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kl],delete e[sC],delete e[wk],delete e[Zle],delete e[Xle])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bq(t){return t.tag===5||t.tag===3||t.tag===4}function W6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bq(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ux));else if(r!==4&&(t=t.child,t!==null))for(kk(t,e,n),t=t.sibling;t!==null;)kk(t,e,n),t=t.sibling}function Dk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dk(t,e,n),t=t.sibling;t!==null;)Dk(t,e,n),t=t.sibling}var $s=null,Sc=!1;function Id(t,e,n){for(n=n.child;n!==null;)Fq(t,e,n),n=n.sibling}function Fq(t,e,n){if(jl&&typeof jl.onCommitFiberUnmount=="function")try{jl.onCommitFiberUnmount(_N,n)}catch{}switch(n.tag){case 5:fi||Dy(n,e);case 6:var r=$s,s=Sc;$s=null,Id(t,e,n),$s=r,Sc=s,$s!==null&&(Sc?(t=$s,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$s.removeChild(n.stateNode));break;case 18:$s!==null&&(Sc?(t=$s,n=n.stateNode,t.nodeType===8?YR(t.parentNode,n):t.nodeType===1&&YR(t,n),XE(t)):YR($s,n.stateNode));break;case 4:r=$s,s=Sc,$s=n.stateNode.containerInfo,Sc=!0,Id(t,e,n),$s=r,Sc=s;break;case 0:case 11:case 14:case 15:if(!fi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Pk(n,e,o),s=s.next}while(s!==r)}Id(t,e,n);break;case 1:if(!fi&&(Dy(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Or(n,e,a)}Id(t,e,n);break;case 21:Id(t,e,n);break;case 22:n.mode&1?(fi=(r=fi)||n.memoizedState!==null,Id(t,e,n),fi=r):Id(t,e,n);break;default:Id(t,e,n)}}function z6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gue),e.forEach(function(r){var s=Sue.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ic(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:$s=a.stateNode,Sc=!1;break e;case 3:$s=a.stateNode.containerInfo,Sc=!0;break e;case 4:$s=a.stateNode.containerInfo,Sc=!0;break e}a=a.return}if($s===null)throw Error(Ce(160));Fq(i,o,s),$s=null,Sc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Or(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jq(e,t),e=e.sibling}function jq(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ic(e,t),tl(t),r&4){try{fE(3,t,t.return),PN(3,t)}catch(g){Or(t,t.return,g)}try{fE(5,t,t.return)}catch(g){Or(t,t.return,g)}}break;case 1:ic(e,t),tl(t),r&512&&n!==null&&Dy(n,n.return);break;case 5:if(ic(e,t),tl(t),r&512&&n!==null&&Dy(n,n.return),t.flags&32){var s=t.stateNode;try{YE(s,"")}catch(g){Or(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&lG(s,i),sk(a,o);var l=sk(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?pG(s,d):u==="dangerouslySetInnerHTML"?hG(s,d):u==="children"?YE(s,d):OM(s,u,d,l)}switch(a){case"input":X2(s,i);break;case"textarea":uG(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Yy(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Yy(s,!!i.multiple,i.defaultValue,!0):Yy(s,!!i.multiple,i.multiple?[]:"",!1))}s[sC]=i}catch(g){Or(t,t.return,g)}}break;case 6:if(ic(e,t),tl(t),r&4){if(t.stateNode===null)throw Error(Ce(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Or(t,t.return,g)}}break;case 3:if(ic(e,t),tl(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{XE(e.containerInfo)}catch(g){Or(t,t.return,g)}break;case 4:ic(e,t),tl(t);break;case 13:ic(e,t),tl(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dL=Fr())),r&4&&z6(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(fi=(l=fi)||u,ic(e,t),fi=l):ic(e,t),tl(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ke=t,u=t.child;u!==null;){for(d=Ke=u;Ke!==null;){switch(h=Ke,f=h.child,h.tag){case 0:case 11:case 14:case 15:fE(4,h,h.return);break;case 1:Dy(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Or(r,n,g)}}break;case 5:Dy(h,h.return);break;case 22:if(h.memoizedState!==null){G6(d);continue}}f!==null?(f.return=h,Ke=f):G6(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=fG("display",o))}catch(g){Or(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Or(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ic(e,t),tl(t),r&4&&z6(t);break;case 21:break;default:ic(e,t),tl(t)}}function tl(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Bq(n)){var r=n;break e}n=n.return}throw Error(Ce(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(YE(s,""),r.flags&=-33);var i=W6(t);Dk(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=W6(t);kk(t,a,o);break;default:throw Error(Ce(161))}}catch(c){Or(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yue(t,e,n){Ke=t,Wq(t)}function Wq(t,e,n){for(var r=(t.mode&1)!==0;Ke!==null;){var s=Ke,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||gA;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||fi;a=gA;var l=fi;if(gA=o,(fi=c)&&!l)for(Ke=s;Ke!==null;)o=Ke,c=o.child,o.tag===22&&o.memoizedState!==null?q6(s):c!==null?(c.return=o,Ke=c):q6(s);for(;i!==null;)Ke=i,Wq(i),i=i.sibling;Ke=s,gA=a,fi=l}H6(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ke=i):H6(t)}}function H6(t){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fi||PN(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!fi)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:gc(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&N6(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}N6(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&XE(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}fi||e.flags&512&&Ok(e)}catch(h){Or(e,e.return,h)}}if(e===t){Ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function G6(t){for(;Ke!==null;){var e=Ke;if(e===t){Ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function q6(t){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{PN(4,e)}catch(c){Or(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Or(e,s,c)}}var i=e.return;try{Ok(e)}catch(c){Or(e,i,c)}break;case 5:var o=e.return;try{Ok(e)}catch(c){Or(e,o,c)}}}catch(c){Or(e,e.return,c)}if(e===t){Ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ke=a;break}Ke=e.return}}var wue=Math.ceil,Kx=Ed.ReactCurrentDispatcher,lL=Ed.ReactCurrentOwner,Wa=Ed.ReactCurrentBatchConfig,hn=0,Is=null,Kr=null,Hs=0,Ho=0,My=Df(0),is=0,uC=null,Pg=0,ON=0,uL=0,pE=null,po=null,dL=0,_w=1/0,_u=null,Yx=!1,Mk=null,ef=null,mA=!1,Uh=null,Qx=0,gE=0,Lk=null,NS=-1,TS=0;function Ui(){return hn&6?Fr():NS!==-1?NS:NS=Fr()}function tf(t){return t.mode&1?hn&2&&Hs!==0?Hs&-Hs:tue.transition!==null?(TS===0&&(TS=xG()),TS):(t=On,t!==0||(t=window.event,t=t===void 0?16:kG(t.type)),t):1}function Bc(t,e,n,r){if(50<gE)throw gE=0,Lk=null,Error(Ce(185));K_(t,n,r),(!(hn&2)||t!==Is)&&(t===Is&&(!(hn&2)&&(ON|=n),is===4&&sh(t,Hs)),Co(t,r),n===1&&hn===0&&!(e.mode&1)&&(_w=Fr()+500,NN&&Mf()))}function Co(t,e){var n=t.callbackNode;tle(t,e);var r=kx(t,t===Is?Hs:0);if(r===0)n!==null&&t6(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&t6(n),e===1)t.tag===0?eue(V6.bind(null,t)):ZG(V6.bind(null,t)),Qle(function(){!(hn&6)&&Mf()}),n=null;else{switch(IG(r)){case 1:n=UM;break;case 4:n=AG;break;case 16:n=Ox;break;case 536870912:n=SG;break;default:n=Ox}n=Qq(n,zq.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zq(t,e){if(NS=-1,TS=0,hn&6)throw Error(Ce(327));var n=t.callbackNode;if(e0()&&t.callbackNode!==n)return null;var r=kx(t,t===Is?Hs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Jx(t,r);else{e=r;var s=hn;hn|=2;var i=Gq();(Is!==t||Hs!==e)&&(_u=null,_w=Fr()+500,pg(t,e));do try{Eue();break}catch(a){Hq(t,a)}while(!0);QM(),Kx.current=i,hn=s,Kr!==null?e=0:(Is=null,Hs=0,e=is)}if(e!==0){if(e===2&&(s=lk(t),s!==0&&(r=s,e=Uk(t,s))),e===1)throw n=uC,pg(t,0),sh(t,r),Co(t,Fr()),n;if(e===6)sh(t,r);else{if(s=t.current.alternate,!(r&30)&&!bue(s)&&(e=Jx(t,r),e===2&&(i=lk(t),i!==0&&(r=i,e=Uk(t,i))),e===1))throw n=uC,pg(t,0),sh(t,r),Co(t,Fr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ce(345));case 2:op(t,po,_u);break;case 3:if(sh(t,r),(r&130023424)===r&&(e=dL+500-Fr(),10<e)){if(kx(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ui(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yk(op.bind(null,t,po,_u),e);break}op(t,po,_u);break;case 4:if(sh(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-$c(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wue(r/1960))-r,10<r){t.timeoutHandle=yk(op.bind(null,t,po,_u),r);break}op(t,po,_u);break;case 5:op(t,po,_u);break;default:throw Error(Ce(329))}}}return Co(t,Fr()),t.callbackNode===n?zq.bind(null,t):null}function Uk(t,e){var n=pE;return t.current.memoizedState.isDehydrated&&(pg(t,e).flags|=256),t=Jx(t,e),t!==2&&(e=po,po=n,e!==null&&$k(e)),t}function $k(t){po===null?po=t:po.push.apply(po,t)}function bue(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Wc(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sh(t,e){for(e&=~uL,e&=~ON,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$c(e),r=1<<n;t[n]=-1,e&=~r}}function V6(t){if(hn&6)throw Error(Ce(327));e0();var e=kx(t,0);if(!(e&1))return Co(t,Fr()),null;var n=Jx(t,e);if(t.tag!==0&&n===2){var r=lk(t);r!==0&&(e=r,n=Uk(t,r))}if(n===1)throw n=uC,pg(t,0),sh(t,e),Co(t,Fr()),n;if(n===6)throw Error(Ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,op(t,po,_u),Co(t,Fr()),null}function hL(t,e){var n=hn;hn|=1;try{return t(e)}finally{hn=n,hn===0&&(_w=Fr()+500,NN&&Mf())}}function Og(t){Uh!==null&&Uh.tag===0&&!(hn&6)&&e0();var e=hn;hn|=1;var n=Wa.transition,r=On;try{if(Wa.transition=null,On=1,t)return t()}finally{On=r,Wa.transition=n,hn=e,!(hn&6)&&Mf()}}function fL(){Ho=My.current,lr(My)}function pg(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Yle(n)),Kr!==null)for(n=Kr.return;n!==null;){var r=n;switch(VM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$x();break;case 3:Ew(),lr(vo),lr(gi),nL();break;case 5:tL(r);break;case 4:Ew();break;case 13:lr(br);break;case 19:lr(br);break;case 10:JM(r.type._context);break;case 22:case 23:fL()}n=n.return}if(Is=t,Kr=t=nf(t.current,null),Hs=Ho=e,is=0,uC=null,uL=ON=Pg=0,po=pE=null,Sp!==null){for(e=0;e<Sp.length;e++)if(n=Sp[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Sp=null}return t}function Hq(t,e){do{var n=Kr;try{if(QM(),SS.current=Vx,qx){for(var r=_r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qx=!1}if(Rg=0,bs=es=_r=null,hE=!1,aC=0,lL.current=null,n===null||n.return===null){is=1,uC=e,Kr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Hs,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=D6(o);if(f!==null){f.flags&=-257,M6(f,o,a,i,e),f.mode&1&&k6(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){k6(i,l,e),pL();break e}c=Error(Ce(426))}}else if(mr&&a.mode&1){var w=D6(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),M6(w,o,a,i,e),KM(Cw(c,a));break e}}i=c=Cw(c,a),is!==4&&(is=2),pE===null?pE=[i]:pE.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Iq(i,c,e);I6(i,y);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ef===null||!ef.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=Nq(i,a,e);I6(i,A);break e}}i=i.return}while(i!==null)}Vq(n)}catch(_){e=_,Kr===n&&n!==null&&(Kr=n=n.return);continue}break}while(!0)}function Gq(){var t=Kx.current;return Kx.current=Vx,t===null?Vx:t}function pL(){(is===0||is===3||is===2)&&(is=4),Is===null||!(Pg&268435455)&&!(ON&268435455)||sh(Is,Hs)}function Jx(t,e){var n=hn;hn|=2;var r=Gq();(Is!==t||Hs!==e)&&(_u=null,pg(t,e));do try{vue();break}catch(s){Hq(t,s)}while(!0);if(QM(),hn=n,Kx.current=r,Kr!==null)throw Error(Ce(261));return Is=null,Hs=0,is}function vue(){for(;Kr!==null;)qq(Kr)}function Eue(){for(;Kr!==null&&!qce();)qq(Kr)}function qq(t){var e=Yq(t.alternate,t,Ho);t.memoizedProps=t.pendingProps,e===null?Vq(t):Kr=e,lL.current=null}function Vq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pue(n,e),n!==null){n.flags&=32767,Kr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{is=6,Kr=null;return}}else if(n=fue(n,e,Ho),n!==null){Kr=n;return}if(e=e.sibling,e!==null){Kr=e;return}Kr=e=t}while(e!==null);is===0&&(is=5)}function op(t,e,n){var r=On,s=Wa.transition;try{Wa.transition=null,On=1,Cue(t,e,n,r)}finally{Wa.transition=s,On=r}return null}function Cue(t,e,n,r){do e0();while(Uh!==null);if(hn&6)throw Error(Ce(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ce(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(nle(t,i),t===Is&&(Kr=Is=null,Hs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mA||(mA=!0,Qq(Ox,function(){return e0(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wa.transition,Wa.transition=null;var o=On;On=1;var a=hn;hn|=4,lL.current=null,mue(t,n),jq(n,t),Wle(gk),Dx=!!pk,gk=pk=null,t.current=n,yue(n),Vce(),hn=a,On=o,Wa.transition=i}else t.current=n;if(mA&&(mA=!1,Uh=t,Qx=s),i=t.pendingLanes,i===0&&(ef=null),Qce(n.stateNode),Co(t,Fr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Yx)throw Yx=!1,t=Mk,Mk=null,t;return Qx&1&&t.tag!==0&&e0(),i=t.pendingLanes,i&1?t===Lk?gE++:(gE=0,Lk=t):gE=0,Mf(),null}function e0(){if(Uh!==null){var t=IG(Qx),e=Wa.transition,n=On;try{if(Wa.transition=null,On=16>t?16:t,Uh===null)var r=!1;else{if(t=Uh,Uh=null,Qx=0,hn&6)throw Error(Ce(331));var s=hn;for(hn|=4,Ke=t.current;Ke!==null;){var i=Ke,o=i.child;if(Ke.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ke=l;Ke!==null;){var u=Ke;switch(u.tag){case 0:case 11:case 15:fE(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ke=d;else for(;Ke!==null;){u=Ke;var h=u.sibling,f=u.return;if($q(u),u===l){Ke=null;break}if(h!==null){h.return=f,Ke=h;break}Ke=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ke=o;else e:for(;Ke!==null;){if(i=Ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fE(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ke=y;break e}Ke=i.return}}var b=t.current;for(Ke=b;Ke!==null;){o=Ke;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ke=v;else e:for(o=b;Ke!==null;){if(a=Ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:PN(9,a)}}catch(_){Or(a,a.return,_)}if(a===o){Ke=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Ke=A;break e}Ke=a.return}}if(hn=s,Mf(),jl&&typeof jl.onPostCommitFiberRoot=="function")try{jl.onPostCommitFiberRoot(_N,t)}catch{}r=!0}return r}finally{On=n,Wa.transition=e}}return!1}function K6(t,e,n){e=Cw(n,e),e=Iq(t,e,1),t=Xh(t,e,1),e=Ui(),t!==null&&(K_(t,1,e),Co(t,e))}function Or(t,e,n){if(t.tag===3)K6(t,t,n);else for(;e!==null;){if(e.tag===3){K6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ef===null||!ef.has(r))){t=Cw(n,t),t=Nq(e,t,1),e=Xh(e,t,1),t=Ui(),e!==null&&(K_(e,1,t),Co(e,t));break}}e=e.return}}function _ue(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ui(),t.pingedLanes|=t.suspendedLanes&n,Is===t&&(Hs&n)===n&&(is===4||is===3&&(Hs&130023424)===Hs&&500>Fr()-dL?pg(t,0):uL|=n),Co(t,e)}function Kq(t,e){e===0&&(t.mode&1?(e=oA,oA<<=1,!(oA&130023424)&&(oA=4194304)):e=1);var n=Ui();t=hd(t,e),t!==null&&(K_(t,e,n),Co(t,n))}function Aue(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Kq(t,n)}function Sue(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(e),Kq(t,n)}var Yq;Yq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vo.current)wo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wo=!1,hue(t,e,n);wo=!!(t.flags&131072)}else wo=!1,mr&&e.flags&1048576&&XG(e,jx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;IS(t,e),t=e.pendingProps;var s=ww(e,gi.current);Xy(e,n),s=sL(null,e,r,t,s,n);var i=iL();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Eo(r)?(i=!0,Bx(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,XM(e),s.updater=RN,e.stateNode=s,s._reactInternals=e,Ak(e,r,t,n),e=Ik(null,e,r,!0,i,n)):(e.tag=0,mr&&i&&qM(e),Si(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(IS(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Iue(r),t=gc(r,t),s){case 0:e=xk(null,e,r,t,n);break e;case 1:e=$6(null,e,r,t,n);break e;case 11:e=L6(null,e,r,t,n);break e;case 14:e=U6(null,e,r,gc(r.type,t),n);break e}throw Error(Ce(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gc(r,s),xk(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gc(r,s),$6(t,e,r,s,n);case 3:e:{if(Oq(e),t===null)throw Error(Ce(387));r=e.pendingProps,i=e.memoizedState,s=i.element,iq(t,e),Hx(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Cw(Error(Ce(423)),e),e=B6(t,e,r,n,s);break e}else if(r!==s){s=Cw(Error(Ce(424)),e),e=B6(t,e,r,n,s);break e}else for(Yo=Zh(e.stateNode.containerInfo.firstChild),Xo=e,mr=!0,xc=null,n=rq(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bw(),r===s){e=fd(t,e,n);break e}Si(t,e,r,n)}e=e.child}return e;case 5:return oq(e),t===null&&Ek(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,mk(r,s)?o=null:i!==null&&mk(r,i)&&(e.flags|=32),Pq(t,e),Si(t,e,o,n),e.child;case 6:return t===null&&Ek(e),null;case 13:return kq(t,e,n);case 4:return eL(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vw(e,null,r,n):Si(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gc(r,s),L6(t,e,r,s,n);case 7:return Si(t,e,e.pendingProps,n),e.child;case 8:return Si(t,e,e.pendingProps.children,n),e.child;case 12:return Si(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,sr(Wx,r._currentValue),r._currentValue=o,i!==null)if(Wc(i.value,o)){if(i.children===s.children&&!vo.current){e=fd(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Xu(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ck(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ck(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Si(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Xy(e,n),s=Ha(s),r=r(s),e.flags|=1,Si(t,e,r,n),e.child;case 14:return r=e.type,s=gc(r,e.pendingProps),s=gc(r.type,s),U6(t,e,r,s,n);case 15:return Tq(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:gc(r,s),IS(t,e),e.tag=1,Eo(r)?(t=!0,Bx(e)):t=!1,Xy(e,n),xq(e,r,s),Ak(e,r,s,n),Ik(null,e,r,!0,t,n);case 19:return Dq(t,e,n);case 22:return Rq(t,e,n)}throw Error(Ce(156,e.tag))};function Qq(t,e){return _G(t,e)}function xue(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ba(t,e,n,r){return new xue(t,e,n,r)}function gL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Iue(t){if(typeof t=="function")return gL(t)?1:0;if(t!=null){if(t=t.$$typeof,t===DM)return 11;if(t===MM)return 14}return 2}function nf(t,e){var n=t.alternate;return n===null?(n=Ba(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function RS(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")gL(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Sy:return gg(n.children,s,i,e);case kM:o=8,s|=8;break;case K2:return t=Ba(12,n,e,s|2),t.elementType=K2,t.lanes=i,t;case Y2:return t=Ba(13,n,e,s),t.elementType=Y2,t.lanes=i,t;case Q2:return t=Ba(19,n,e,s),t.elementType=Q2,t.lanes=i,t;case oG:return kN(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sG:o=10;break e;case iG:o=9;break e;case DM:o=11;break e;case MM:o=14;break e;case Jd:o=16,r=null;break e}throw Error(Ce(130,t==null?t:typeof t,""))}return e=Ba(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function gg(t,e,n,r){return t=Ba(7,t,r,e),t.lanes=n,t}function kN(t,e,n,r){return t=Ba(22,t,r,e),t.elementType=oG,t.lanes=n,t.stateNode={isHidden:!1},t}function rP(t,e,n){return t=Ba(6,t,null,e),t.lanes=n,t}function sP(t,e,n){return e=Ba(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Nue(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$R(0),this.expirationTimes=$R(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$R(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mL(t,e,n,r,s,i,o,a,c){return t=new Nue(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ba(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},XM(i),t}function Tue(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ay,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Jq(t){if(!t)return vf;t=t._reactInternals;e:{if(lm(t)!==t||t.tag!==1)throw Error(Ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Eo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ce(171))}if(t.tag===1){var n=t.type;if(Eo(n))return JG(t,n,e)}return e}function Zq(t,e,n,r,s,i,o,a,c){return t=mL(n,r,!0,t,s,i,o,a,c),t.context=Jq(null),n=t.current,r=Ui(),s=tf(n),i=Xu(r,s),i.callback=e??null,Xh(n,i,s),t.current.lanes=s,K_(t,s,r),Co(t,r),t}function DN(t,e,n,r){var s=e.current,i=Ui(),o=tf(s);return n=Jq(n),e.context===null?e.context=n:e.pendingContext=n,e=Xu(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xh(s,e,o),t!==null&&(Bc(t,s,o,i),AS(t,s,o)),o}function Zx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Y6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yL(t,e){Y6(t,e),(t=t.alternate)&&Y6(t,e)}function Rue(){return null}var Xq=typeof reportError=="function"?reportError:function(t){console.error(t)};function wL(t){this._internalRoot=t}MN.prototype.render=wL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ce(409));DN(t,e,null,null)};MN.prototype.unmount=wL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Og(function(){DN(null,t,null,null)}),e[dd]=null}};function MN(t){this._internalRoot=t}MN.prototype.unstable_scheduleHydration=function(t){if(t){var e=RG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rh.length&&e!==0&&e<rh[n].priority;n++);rh.splice(n,0,t),n===0&&OG(t)}};function bL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function LN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Q6(){}function Pue(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=Zx(o);i.call(l)}}var o=Zq(e,r,t,0,null,!1,!1,"",Q6);return t._reactRootContainer=o,t[dd]=o.current,nC(t.nodeType===8?t.parentNode:t),Og(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Zx(c);a.call(l)}}var c=mL(t,0,!1,null,null,!1,!1,"",Q6);return t._reactRootContainer=c,t[dd]=c.current,nC(t.nodeType===8?t.parentNode:t),Og(function(){DN(e,c,n,r)}),c}function UN(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Zx(o);a.call(c)}}DN(e,o,t,s)}else o=Pue(n,e,t,s,r);return Zx(o)}NG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ov(e.pendingLanes);n!==0&&($M(e,n|1),Co(e,Fr()),!(hn&6)&&(_w=Fr()+500,Mf()))}break;case 13:Og(function(){var r=hd(t,1);if(r!==null){var s=Ui();Bc(r,t,1,s)}}),yL(t,1)}};BM=function(t){if(t.tag===13){var e=hd(t,134217728);if(e!==null){var n=Ui();Bc(e,t,134217728,n)}yL(t,134217728)}};TG=function(t){if(t.tag===13){var e=tf(t),n=hd(t,e);if(n!==null){var r=Ui();Bc(n,t,e,r)}yL(t,e)}};RG=function(){return On};PG=function(t,e){var n=On;try{return On=t,e()}finally{On=n}};ok=function(t,e,n){switch(e){case"input":if(X2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=IN(r);if(!s)throw Error(Ce(90));cG(r),X2(r,s)}}}break;case"textarea":uG(t,n);break;case"select":e=n.value,e!=null&&Yy(t,!!n.multiple,e,!1)}};yG=hL;wG=Og;var Oue={usingClientEntryPoint:!1,Events:[Q_,Ty,IN,gG,mG,hL]},nv={findFiberByHostInstance:Ap,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kue={bundleType:nv.bundleType,version:nv.version,rendererPackageName:nv.rendererPackageName,rendererConfig:nv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ed.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=EG(t),t===null?null:t.stateNode},findFiberByHostInstance:nv.findFiberByHostInstance||Rue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yA.isDisabled&&yA.supportsFiber)try{_N=yA.inject(kue),jl=yA}catch{}}ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oue;ia.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bL(e))throw Error(Ce(200));return Tue(t,e,null,n)};ia.createRoot=function(t,e){if(!bL(t))throw Error(Ce(299));var n=!1,r="",s=Xq;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=mL(t,1,!1,null,null,n,!1,r,s),t[dd]=e.current,nC(t.nodeType===8?t.parentNode:t),new wL(e)};ia.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ce(188)):(t=Object.keys(t).join(","),Error(Ce(268,t)));return t=EG(e),t=t===null?null:t.stateNode,t};ia.flushSync=function(t){return Og(t)};ia.hydrate=function(t,e,n){if(!LN(e))throw Error(Ce(200));return UN(null,t,e,!0,n)};ia.hydrateRoot=function(t,e,n){if(!bL(t))throw Error(Ce(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Xq;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Zq(e,null,t,1,n??null,s,!1,i,o),t[dd]=e.current,nC(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new MN(e)};ia.render=function(t,e,n){if(!LN(e))throw Error(Ce(200));return UN(null,t,e,!1,n)};ia.unmountComponentAtNode=function(t){if(!LN(t))throw Error(Ce(40));return t._reactRootContainer?(Og(function(){UN(null,null,t,!1,function(){t._reactRootContainer=null,t[dd]=null})}),!0):!1};ia.unstable_batchedUpdates=hL;ia.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!LN(n))throw Error(Ce(200));if(t==null||t._reactInternals===void 0)throw Error(Ce(38));return UN(t,e,n,!1,r)};ia.version="18.3.1-next-f1338f8080-20240426";function eV(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eV)}catch(t){console.error(t)}}eV(),eG.exports=ia;var vL=eG.exports,J6=vL;q2.createRoot=J6.createRoot,q2.hydrateRoot=J6.hydrateRoot;const Due="_verified_lvyh0_1",EL={verified:Due},Mue=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:EL.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),Lue=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:EL.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Uue=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:EL.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function tV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=tV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function rf(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=tV(t))&&(r&&(r+=" "),r+=e);return r}const $ue="_root_98iqw_1",Bue="_article_98iqw_21",Z6={root:$ue,article:Bue},CL=({className:t,children:e})=>m.jsx("div",{className:rf("react-tweet-theme",Z6.root,t),children:m.jsx("article",{className:Z6.article,children:e})}),nV=t=>m.jsx("img",{...t}),Fue="_header_nqq4j_1",jue="_avatar_nqq4j_11",Wue="_avatarOverflow_nqq4j_16",zue="_avatarSquare_nqq4j_23",Hue="_avatarShadow_nqq4j_26",Gue="_author_nqq4j_37",que="_authorLink_nqq4j_44",Vue="_authorVerified_nqq4j_53",Kue="_authorLinkText_nqq4j_56",Yue="_authorMeta_nqq4j_63",Que="_authorFollow_nqq4j_66",Jue="_username_nqq4j_69",Zue="_follow_nqq4j_74",Xue="_separator_nqq4j_82",ede="_brand_nqq4j_86",tde="_twitterIcon_nqq4j_90",Ts={header:Fue,avatar:jue,avatarOverflow:Wue,avatarSquare:zue,avatarShadow:Hue,author:Gue,authorLink:que,authorVerified:Vue,authorLinkText:Kue,authorMeta:Yue,authorFollow:Que,username:Jue,follow:Zue,separator:Xue,brand:ede,twitterIcon:tde},nde="_verifiedOld_lcna5_1",rde="_verifiedBlue_lcna5_4",sde="_verifiedGovernment_lcna5_7",iP={verifiedOld:nde,verifiedBlue:rde,verifiedGovernment:sde},rV=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(Mue,{}),s=iP.verifiedBlue;if(n)switch(t.is_blue_verified||(s=iP.verifiedOld),t.verified_type){case"Government":r=m.jsx(Uue,{}),s=iP.verifiedGovernment;break;case"Business":r=m.jsx(Lue,{}),s=null;break}return n?m.jsx("div",{className:rf(e,s),children:r}):null},ide=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:nV,{user:s}=t;return m.jsxs("div",{className:Ts.header,children:[m.jsxs("a",{href:t.url,className:Ts.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:rf(Ts.avatarOverflow,s.profile_image_shape==="Square"&&Ts.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:Ts.avatarOverflow,children:m.jsx("div",{className:Ts.avatarShadow})})]}),m.jsxs("div",{className:Ts.author,children:[m.jsxs("a",{href:t.url,className:Ts.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Ts.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(rV,{user:s,className:Ts.authorVerified})]}),m.jsxs("div",{className:Ts.authorMeta,children:[m.jsx("a",{href:t.url,className:Ts.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:Ts.authorFollow,children:[m.jsx("span",{className:Ts.separator,children:"·"}),m.jsx("a",{href:s.follow_url,className:Ts.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:Ts.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Ts.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},ode="_root_1ec15_1",ade={root:ode},cde=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:ade.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),lde="_root_eihfa_1",ude={root:lde},dde=({href:t,children:e})=>m.jsx("a",{href:t,className:ude.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),hde="_root_1xq52_1",fde={root:hde},pde=({tweet:t})=>m.jsx("p",{className:fde.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(dde,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),X6=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,sV=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,gde=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,mde=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,yde=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,wde=t=>`https://x.com/hashtag/${t.text}`,bde=t=>`https://x.com/search?q=%24${t.text}`,vde=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,iV=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},Ede=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},Cde=t=>{const e=Ede(t);return e.length>1?e[1]:e[0]},Bk=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function e8(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return rv(n,"hashtag",t.entities.hashtags),rv(n,"mention",t.entities.user_mentions),rv(n,"url",t.entities.urls),rv(n,"symbol",t.entities.symbols),t.entities.media&&rv(n,"media",t.entities.media),_de(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:wde(r),text:s});case"mention":return Object.assign(r,{href:sV(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:bde(r),text:s});default:return Object.assign(r,{text:s})}})}function rv(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function _de(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const Ade=t=>({...t,url:X6(t),user:{...t.user,url:sV(t),follow_url:yde(t)},like_url:gde(t),reply_url:mde(t),in_reply_to_url:t.in_reply_to_screen_name?vde(t):void 0,entities:e8(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:X6(t.quoted_tweet),entities:e8(t.quoted_tweet)}:void 0}),Sde="_root_g9tkv_1",xde="_rounded_g9tkv_6",Ide="_mediaWrapper_g9tkv_10",Nde="_grid2Columns_g9tkv_17",Tde="_grid3_g9tkv_20",Rde="_grid2x2_g9tkv_23",Pde="_mediaContainer_g9tkv_26",Ode="_mediaLink_g9tkv_34",kde="_skeleton_g9tkv_38",Dde="_image_g9tkv_43",Do={root:Sde,rounded:xde,mediaWrapper:Ide,grid2Columns:Nde,grid3:Tde,grid2x2:Rde,mediaContainer:Pde,mediaLink:Ode,skeleton:kde,image:Dde},Mde="_anchor_fp31d_1",Lde="_videoButton_fp31d_17",Ude="_videoButtonIcon_fp31d_35",$de="_watchOnTwitter_fp31d_44",Bde="_viewReplies_fp31d_60",$m={anchor:Mde,videoButton:Lde,videoButtonIcon:Ude,watchOnTwitter:$de,viewReplies:Bde},Fde=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=Cde(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:Do.image,poster:iV(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:$m.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:$m.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:$m.watchOnTwitter,children:m.jsx("a",{href:t.url,className:$m.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:rf($m.anchor,$m.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},jde=t=>m.jsx("img",{...t}),t8=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},oV=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:jde;return m.jsx("div",{className:rf(Do.root,!n&&Do.rounded),children:m.jsx("div",{className:rf(Do.mediaWrapper,o>1&&Do.grid2Columns,o===3&&Do.grid3,o>4&&Do.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(D.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:rf(Do.mediaContainer,Do.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Do.skeleton,style:t8(l,o)}),m.jsx(c,{src:iV(l,"small"),alt:l.ext_alt_text||"Image",className:Do.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:Do.mediaContainer,children:[m.jsx("div",{className:Do.skeleton,style:t8(l,o)}),m.jsx(Fde,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},Wde={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},zde=new Intl.DateTimeFormat("en-US",Wde),Hde=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},Gde=t=>{const e=Hde(zde.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},qde="_root_i24yn_1",Vde={root:qde},Kde=({tweet:t})=>{const e=new Date(t.created_at),n=Gde(e);return m.jsx("a",{className:Vde.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},Yde="_info_19qcj_1",Qde="_infoLink_19qcj_10",Jde="_infoIcon_19qcj_30",oP={info:Yde,infoLink:Qde,infoIcon:Jde},Zde=({tweet:t})=>m.jsxs("div",{className:oP.info,children:[m.jsx(Kde,{tweet:t}),m.jsx("a",{className:oP.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:oP.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),Xde="_actions_n2anf_1",ehe="_like_n2anf_13",the="_reply_n2anf_14",nhe="_copy_n2anf_15",rhe="_likeIconWrapper_n2anf_27",she="_likeCount_n2anf_30",ihe="_replyIconWrapper_n2anf_35",ohe="_copyIconWrapper_n2anf_36",ahe="_likeIcon_n2anf_27",che="_replyIcon_n2anf_35",lhe="_copyIcon_n2anf_36",uhe="_replyText_n2anf_56",dhe="_copyText_n2anf_57",co={actions:Xde,like:ehe,reply:the,copy:nhe,likeIconWrapper:rhe,likeCount:she,replyIconWrapper:ihe,copyIconWrapper:ohe,likeIcon:ahe,replyIcon:che,copyIcon:lhe,replyText:uhe,copyText:dhe},hhe=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:co.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:co.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:co.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:co.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:co.copyText,children:e?"Copied!":"Copy link"})]})},fhe=({tweet:t})=>{const e=Bk(t.favorite_count);return m.jsxs("div",{className:co.actions,children:[m.jsxs("a",{className:co.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:co.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:co.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:co.likeCount,children:e})]}),m.jsxs("a",{className:co.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:co.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:co.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:co.replyText,children:"Reply"})]}),m.jsx(hhe,{tweet:t})]})},phe="_replies_1cutb_1",ghe="_link_1cutb_4",mhe="_text_1cutb_23",aP={replies:phe,link:ghe,text:mhe},yhe=({tweet:t})=>m.jsx("div",{className:aP.replies,children:m.jsx("a",{className:aP.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:aP.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${Bk(t.conversation_count)} reply`:`Read ${Bk(t.conversation_count)} replies`})})}),whe="_root_q5799_1",bhe="_article_q5799_16",n8={root:whe,article:bhe},vhe=({tweet:t,children:e})=>m.jsx("div",{className:n8.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:n8.article,children:e})}),Ehe="_header_r31i5_1",Che="_avatar_r31i5_11",_he="_avatarSquare_r31i5_17",Ahe="_author_r31i5_21",She="_authorText_r31i5_26",xhe="_username_r31i5_33",Vf={header:Ehe,avatar:Che,avatarSquare:_he,author:Ahe,authorText:She,username:xhe},Ihe=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Vf.header,children:[m.jsx("a",{href:t.url,className:Vf.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:rf(Vf.avatarOverflow,e.profile_image_shape==="Square"&&Vf.avatarSquare),children:m.jsx(nV,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Vf.author,children:[m.jsx("div",{className:Vf.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(rV,{user:e}),m.jsx("div",{className:Vf.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},Nhe="_root_175ot_1",The={root:Nhe},Rhe=({tweet:t})=>m.jsx("p",{className:The.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Phe=({tweet:t})=>{var e;return m.jsxs(vhe,{tweet:t,children:[m.jsx(Ihe,{tweet:t}),m.jsx(Rhe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(oV,{quoted:!0,tweet:t}):null]})},Ohe=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>Ade(t),[t]);return m.jsxs(CL,{children:[m.jsx(ide,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(cde,{tweet:r}),m.jsx(pde,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(oV,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(Phe,{tweet:r.quoted_tweet}),m.jsx(Zde,{tweet:r}),m.jsx(fhe,{tweet:r}),m.jsx(yhe,{tweet:r})]})},khe="_root_16yxa_1",Dhe={root:khe},Mhe=t=>m.jsx(CL,{children:m.jsxs("div",{className:Dhe.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found…"})]})}),Lhe="_skeleton_oi7hr_1",Uhe={skeleton:Lhe},wA=({style:t})=>m.jsx("span",{className:Uhe.skeleton,style:t}),$he="_root_17qqv_1",Bhe={root:$he},Fhe=()=>m.jsxs(CL,{className:Bhe.root,children:[m.jsx(wA,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(wA,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(wA,{style:{height:"2rem"}}),m.jsx(wA,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var aV={exports:{}},cV={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw=D;function jhe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Whe=typeof Object.is=="function"?Object.is:jhe,zhe=Aw.useState,Hhe=Aw.useEffect,Ghe=Aw.useLayoutEffect,qhe=Aw.useDebugValue;function Vhe(t,e){var n=e(),r=zhe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Ghe(function(){s.value=n,s.getSnapshot=e,cP(s)&&i({inst:s})},[t,n,e]),Hhe(function(){return cP(s)&&i({inst:s}),t(function(){cP(s)&&i({inst:s})})},[t]),qhe(n),n}function cP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Whe(t,n)}catch{return!0}}function Khe(t,e){return e()}var Yhe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Khe:Vhe;cV.useSyncExternalStore=Aw.useSyncExternalStore!==void 0?Aw.useSyncExternalStore:Yhe;aV.exports=cV;var lV=aV.exports;const uV=0,dV=1,hV=2,r8=3;var s8=Object.prototype.hasOwnProperty;function Fk(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Fk(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(s8.call(t,n)&&++r&&!s8.call(e,n)||!(n in e)||!Fk(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const zu=new WeakMap,$h=()=>{},Ni=$h(),jk=Object,dn=t=>t===Ni,Dl=t=>typeof t=="function",Ef=(t,e)=>({...t,...e}),fV=t=>Dl(t.then),lP={},bA={},_L="undefined",Z_=typeof window!=_L,Wk=typeof document!=_L,Qhe=Z_&&"Deno"in window,Jhe=()=>Z_&&typeof window.requestAnimationFrame!=_L,pV=(t,e)=>{const n=zu.get(t);return[()=>!dn(e)&&t.get(e)||lP,r=>{if(!dn(e)){const s=t.get(e);e in bA||(bA[e]=s),n[5](e,Ef(s,r),s||lP)}},n[6],()=>!dn(e)&&e in bA?bA[e]:!dn(e)&&t.get(e)||lP]};let zk=!0;const Zhe=()=>zk,[Hk,Gk]=Z_&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[$h,$h],Xhe=()=>{const t=Wk&&document.visibilityState;return dn(t)||t!=="hidden"},efe=t=>(Wk&&document.addEventListener("visibilitychange",t),Hk("focus",t),()=>{Wk&&document.removeEventListener("visibilitychange",t),Gk("focus",t)}),tfe=t=>{const e=()=>{zk=!0,t()},n=()=>{zk=!1};return Hk("online",e),Hk("offline",n),()=>{Gk("online",e),Gk("offline",n)}},nfe={isOnline:Zhe,isVisible:Xhe},rfe={initFocus:efe,initReconnect:tfe},i8=!Zo.useId,dC=!Z_||Qhe,sfe=t=>Jhe()?window.requestAnimationFrame(t):setTimeout(t,1),uP=dC?D.useEffect:D.useLayoutEffect,dP=typeof navigator<"u"&&navigator.connection,o8=!dC&&dP&&(["slow-2g","2g"].includes(dP.effectiveType)||dP.saveData),vA=new WeakMap,ife=t=>jk.prototype.toString.call(t),hP=(t,e)=>t===`[object ${e}]`;let ofe=0;const qk=t=>{const e=typeof t,n=ife(t),r=hP(n,"Date"),s=hP(n,"RegExp"),i=hP(n,"Object");let o,a;if(jk(t)===t&&!r&&!s){if(o=vA.get(t),o)return o;if(o=++ofe+"~",vA.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=qk(t[a])+",";vA.set(t,o)}if(i){o="#";const c=jk.keys(t).sort();for(;!dn(a=c.pop());)dn(t[a])||(o+=a+":"+qk(t[a])+",");vA.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},AL=t=>{if(Dl(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?qk(t):"",[t,e]};let afe=0;const Vk=()=>++afe;async function gV(...t){const[e,n,r,s]=t,i=Ef({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Dl(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=AL(h);if(!f)return;const[p,g]=pV(e,f),[w,y,b,v]=zu.get(e),A=()=>{const B=w[f];return(Dl(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],B&&B[0])?B[0](hV).then(()=>p().data):p().data};if(t.length<3)return A();let _=r,I,x=!1;const N=Vk();y[f]=[N,0];const S=!dn(c),O=p(),P=O.data,F=O._c,G=dn(F)?P:F;if(S&&(c=Dl(c)?c(G,P):c,g({data:c,_c:G})),Dl(_))try{_=_(G)}catch(B){I=B,x=!0}if(_&&fV(_))if(_=await _.catch(B=>{I=B,x=!0}),N!==y[f][0]){if(x)throw I;return _}else x&&S&&l(I)&&(o=!0,g({data:G,_c:Ni}));if(o&&!x)if(Dl(o)){const B=o(_,G);g({data:B,error:Ni,_c:Ni})}else g({data:_,error:Ni,_c:Ni});if(y[f][1]=Vk(),Promise.resolve(A()).then(()=>{g({_c:Ni})}),x){if(u)throw I;return}return _}}const a8=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},cfe=(t,e)=>{if(!zu.has(t)){const n=Ef(rfe,e),r=Object.create(null),s=gV.bind(Ni,t);let i=$h;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!zu.has(t)&&(zu.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!dC)){const u=n.initFocus(setTimeout.bind(Ni,a8.bind(Ni,r,uV))),d=n.initReconnect(setTimeout.bind(Ni,a8.bind(Ni,r,dV)));i=()=>{u&&u(),d&&d(),zu.delete(t)}}};return l(),[t,s,l,i]}return[t,zu.get(t)[4]]},lfe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!dn(i)&&o>i||setTimeout(r,a,s)},ufe=Fk,[mV,dfe]=cfe(new Map),hfe=Ef({onLoadingSlow:$h,onSuccess:$h,onError:$h,onErrorRetry:lfe,onDiscarded:$h,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:o8?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:o8?5e3:3e3,compare:ufe,isPaused:()=>!1,cache:mV,mutate:dfe,fallback:{}},nfe),ffe=(t,e)=>{const n=Ef(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Ef(s,o))}return n},pfe=D.createContext({}),gfe="$inf$",yV=Z_&&window.__SWR_DEVTOOLS_USE__,mfe=yV?window.__SWR_DEVTOOLS_USE__:[],yfe=()=>{yV&&(window.__SWR_DEVTOOLS_REACT__=Zo)},wfe=t=>Dl(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],bfe=()=>Ef(hfe,D.useContext(pfe)),vfe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=AL(e),[,,,a]=zu.get(mV);if(o.startsWith(gfe))return n(...i);const c=a[o];return dn(c)?n(...i):(delete a[o],c)}),r),Efe=mfe.concat(vfe),Cfe=t=>function(...n){const r=bfe(),[s,i,o]=wfe(n),a=ffe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(Efe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},_fe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};yfe();const fP=Zo.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),pP={dedupe:!0},Afe=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=zu.get(r),[y,b]=AL(t),v=D.useRef(!1),A=D.useRef(!1),_=D.useRef(y),I=D.useRef(e),x=D.useRef(n),N=()=>x.current,S=()=>N().isVisible()&&N().isOnline(),[O,P,F,G]=pV(r,y),B=D.useRef({}).current,T=dn(o)?dn(n.fallback)?Ni:n.fallback[y]:o,R=(X,ce)=>{for(const Ee in B){const ge=Ee;if(ge==="data"){if(!s(X[ge],ce[ge])&&(!dn(X[ge])||!s(ae,ce[ge])))return!1}else if(ce[ge]!==X[ge])return!1}return!0},$=D.useMemo(()=>{const X=!y||!e?!1:dn(a)?N().isPaused()||i?!1:c!==!1:a,ce=At=>{const Ct=Ef(At);return delete Ct._k,X?{isValidating:!0,isLoading:!0,...Ct}:Ct},Ee=O(),ge=G(),ve=ce(Ee),Xe=Ee===ge?ve:ce(ge);let st=ve;return[()=>{const At=ce(O());return R(At,st)?(st.data=At.data,st.isLoading=At.isLoading,st.isValidating=At.isValidating,st.error=At.error,st):(st=At,At)},()=>Xe]},[r,y]),k=lV.useSyncExternalStore(D.useCallback(X=>F(y,(ce,Ee)=>{R(Ee,ce)||X()}),[r,y]),$[0],$[1]),M=!v.current,W=f[y]&&f[y].length>0,K=k.data,ne=dn(K)?T&&fV(T)?fP(T):T:K,le=k.error,oe=D.useRef(ne),ae=h?dn(K)?dn(oe.current)?ne:oe.current:K:ne,ue=W&&!dn(le)?!1:M&&!dn(a)?a:N().isPaused()?!1:i?dn(ne)?!1:c:dn(ne)||c,et=!!(y&&e&&M&&ue),Se=dn(k.isValidating)?et:k.isValidating,Me=dn(k.isLoading)?et:k.isLoading,rt=D.useCallback(async X=>{const ce=I.current;if(!y||!ce||A.current||N().isPaused())return!1;let Ee,ge,ve=!0;const Xe=X||{},st=!g[y]||!Xe.dedupe,At=()=>i8?!A.current&&y===_.current&&v.current:y===_.current,Ct={isValidating:!1,isLoading:!1},Vn=()=>{P(Ct)},Rt=()=>{const Bt=g[y];Bt&&Bt[1]===ge&&delete g[y]},Gr={isValidating:!0};dn(O().data)&&(Gr.isLoading=!0);try{if(st&&(P(Gr),n.loadingTimeout&&dn(O().data)&&setTimeout(()=>{ve&&At()&&N().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[ce(b),Vk()]),[Ee,ge]=g[y],Ee=await Ee,st&&setTimeout(Rt,n.dedupingInterval),!g[y]||g[y][1]!==ge)return st&&At()&&N().onDiscarded(y),!1;Ct.error=Ni;const Bt=p[y];if(!dn(Bt)&&(ge<=Bt[0]||ge<=Bt[1]||Bt[1]===0))return Vn(),st&&At()&&N().onDiscarded(y),!1;const zn=O().data;Ct.data=s(zn,Ee)?zn:Ee,st&&At()&&N().onSuccess(Ee,y,n)}catch(Bt){Rt();const zn=N(),{shouldRetryOnError:Sr}=zn;zn.isPaused()||(Ct.error=Bt,st&&At()&&(zn.onError(Bt,y,zn),(Sr===!0||Dl(Sr)&&Sr(Bt))&&(!N().revalidateOnFocus||!N().revalidateOnReconnect||S())&&zn.onErrorRetry(Bt,y,zn,Gi=>{const Jc=f[y];Jc&&Jc[0]&&Jc[0](r8,Gi)},{retryCount:(Xe.retryCount||0)+1,dedupe:!0})))}return ve=!1,Vn(),!0},[y,r]),Tt=D.useCallback((...X)=>gV(r,_.current,...X),[]);if(uP(()=>{I.current=e,x.current=n,dn(K)||(oe.current=K)}),uP(()=>{if(!y)return;const X=rt.bind(Ni,pP);let ce=0;N().revalidateOnFocus&&(ce=Date.now()+N().focusThrottleInterval);const ge=_fe(y,f,(ve,Xe={})=>{if(ve==uV){const st=Date.now();N().revalidateOnFocus&&st>ce&&S()&&(ce=st+N().focusThrottleInterval,X())}else if(ve==dV)N().revalidateOnReconnect&&S()&&X();else{if(ve==hV)return rt();if(ve==r8)return rt(Xe)}});return A.current=!1,_.current=y,v.current=!0,P({_k:b}),ue&&(g[y]||(dn(ne)||dC?X():sfe(X))),()=>{A.current=!0,ge()}},[y]),uP(()=>{let X;function ce(){const ge=Dl(l)?l(O().data):l;ge&&X!==-1&&(X=setTimeout(Ee,ge))}function Ee(){!O().error&&(u||N().isVisible())&&(d||N().isOnline())?rt(pP).then(ce):ce()}return ce(),()=>{X&&(clearTimeout(X),X=-1)}},[l,u,d,y]),D.useDebugValue(ae),i&&dn(ne)&&y){if(!i8&&dC)throw new Error("Fallback data is required when using Suspense in SSR.");I.current=e,x.current=n,A.current=!1;const X=w[y];if(!dn(X)){const ce=Tt(X);fP(ce)}if(dn(le)){const ce=rt(pP);dn(ae)||(ce.status="fulfilled",ce.value=!0),fP(ce)}else throw le}return{mutate:Tt,get data(){return B.data=!0,ae},get error(){return B.error=!0,le},get isValidating(){return B.isValidating=!0,Se},get isLoading(){return B.isLoading=!0,Me}}},c8=Cfe(Afe);class Sfe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const xfe=c8.default||c8,Ife="https://react-tweet.vercel.app";async function Nfe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new Sfe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const Tfe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=xfe(()=>e||t?[e||t&&`${Ife}/api/tweet/${t}`,n]:null,Nfe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},Rfe=({id:t,apiUrl:e,fallback:n=m.jsx(Fhe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=Tfe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||Mhe;return m.jsx(l,{error:i?i(a):a})}return m.jsx(Ohe,{tweet:o,components:r})};var $N={exports:{}},wV={},bV={exports:{}},Pfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ofe=Pfe,kfe=Ofe;function vV(){}function EV(){}EV.resetWarningCache=vV;var Dfe=function(){function t(r,s,i,o,a,c){if(c!==kfe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:EV,resetWarningCache:vV};return n.PropTypes=n,n};bV.exports=Dfe();var CV=bV.exports,Kk={exports:{}};function _V(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=_V(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function l8(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=_V(t))&&(r&&(r+=" "),r+=e);return r}Kk.exports=l8,Kk.exports.clsx=l8;var Mfe=Kk.exports,$r={},su={};Object.defineProperty(su,"__esModule",{value:!0});su.dontSetMe=Ffe;su.findInArray=Lfe;su.int=Bfe;su.isFunction=Ufe;su.isNum=$fe;function Lfe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Ufe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function $fe(t){return typeof t=="number"&&!isNaN(t)}function Bfe(t){return parseInt(t,10)}function Ffe(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var um={};Object.defineProperty(um,"__esModule",{value:!0});um.browserPrefixToKey=SV;um.browserPrefixToStyle=jfe;um.default=void 0;um.getPrefix=AV;const gP=["Moz","Webkit","O","ms"];function AV(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<gP.length;s++)if(SV(t,gP[s])in e)return gP[s];return""}function SV(t,e){return e?`${e}${Wfe(t)}`:t}function jfe(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Wfe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}um.default=AV();Object.defineProperty($r,"__esModule",{value:!0});$r.addClassName=NV;$r.addEvent=Hfe;$r.addUserSelectStyles=tpe;$r.createCSSTransform=Jfe;$r.createSVGTransform=Zfe;$r.getTouch=Xfe;$r.getTouchIdentifier=epe;$r.getTranslation=SL;$r.innerHeight=Kfe;$r.innerWidth=Yfe;$r.matchesSelector=IV;$r.matchesSelectorAndParentsTo=zfe;$r.offsetXYFromParent=Qfe;$r.outerHeight=qfe;$r.outerWidth=Vfe;$r.removeClassName=TV;$r.removeEvent=Gfe;$r.scheduleRemoveUserSelectStyles=npe;var ea=su,u8=xV(um);function xV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(xV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let EA="";function IV(t,e){return EA||(EA=(0,ea.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,ea.isFunction)(t[n])})),(0,ea.isFunction)(t[EA])?t[EA](e):!1}function zfe(t,e,n){let r=t;do{if(IV(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Hfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Gfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function qfe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ea.int)(n.borderTopWidth),e+=(0,ea.int)(n.borderBottomWidth),e}function Vfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ea.int)(n.borderLeftWidth),e+=(0,ea.int)(n.borderRightWidth),e}function Kfe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ea.int)(n.paddingTop),e-=(0,ea.int)(n.paddingBottom),e}function Yfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ea.int)(n.paddingLeft),e-=(0,ea.int)(n.paddingRight),e}function Qfe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Jfe(t,e){const n=SL(t,e,"px");return{[(0,u8.browserPrefixToKey)("transform",u8.default)]:n}}function Zfe(t,e){return SL(t,e,"")}function SL(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function Xfe(t,e){return t.targetTouches&&(0,ea.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,ea.findInArray)(t.changedTouches,n=>e===n.identifier)}function epe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function tpe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&NV(t.body,"react-draggable-transparent-selection")}function npe(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{d8(t)}):d8(t)}function d8(t){if(t)try{if(t.body&&TV(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function NV(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function TV(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.canDragX=ipe;iu.canDragY=ope;iu.createCoreData=cpe;iu.createDraggableData=lpe;iu.getBoundPosition=rpe;iu.getControlPosition=ape;iu.snapToGrid=spe;var Mo=su,Ly=$r;function rpe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:upe(r);const s=xL(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,Mo.int)(u.paddingLeft)+(0,Mo.int)(l.marginLeft),top:-s.offsetTop+(0,Mo.int)(u.paddingTop)+(0,Mo.int)(l.marginTop),right:(0,Ly.innerWidth)(c)-(0,Ly.outerWidth)(s)-s.offsetLeft+(0,Mo.int)(u.paddingRight)-(0,Mo.int)(l.marginRight),bottom:(0,Ly.innerHeight)(c)-(0,Ly.outerHeight)(s)-s.offsetTop+(0,Mo.int)(u.paddingBottom)-(0,Mo.int)(l.marginBottom)}}return(0,Mo.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Mo.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Mo.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Mo.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function spe(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function ipe(t){return t.props.axis==="both"||t.props.axis==="x"}function ope(t){return t.props.axis==="both"||t.props.axis==="y"}function ape(t,e,n){const r=typeof e=="number"?(0,Ly.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=xL(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Ly.offsetXYFromParent)(r||t,i,n.props.scale)}function cpe(t,e,n){const r=!(0,Mo.isNum)(t.lastX),s=xL(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function lpe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function upe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function xL(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var BN={},FN={};Object.defineProperty(FN,"__esModule",{value:!0});FN.default=dpe;function dpe(){}Object.defineProperty(BN,"__esModule",{value:!0});BN.default=void 0;var mP=RV(D),bi=IL(CV),hpe=IL(vL),ii=$r,Nd=iu,yP=su,sv=IL(FN);function IL(t){return t&&t.__esModule?t:{default:t}}function RV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(RV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function Ei(t,e,n){return(e=fpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fpe(t){var e=ppe(t,"string");return typeof e=="symbol"?e:e+""}function ppe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const dc={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Td=dc.mouse,jN=class extends mP.Component{constructor(){super(...arguments),Ei(this,"dragging",!1),Ei(this,"lastX",NaN),Ei(this,"lastY",NaN),Ei(this,"touchIdentifier",null),Ei(this,"mounted",!1),Ei(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,ii.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,ii.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,ii.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,Nd.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,Nd.createCoreData)(this,o,a);(0,sv.default)("DraggableCore: handleDragStart: %j",c),(0,sv.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,ii.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,ii.addEvent)(r,Td.move,this.handleDrag),(0,ii.addEvent)(r,Td.stop,this.handleDragStop))}),Ei(this,"handleDrag",e=>{const n=(0,Nd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,Nd.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,Nd.createCoreData)(this,r,s);if((0,sv.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),Ei(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Nd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,Nd.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,Nd.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,ii.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,sv.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,sv.default)("DraggableCore: Removing handlers"),(0,ii.removeEvent)(a.ownerDocument,Td.move,this.handleDrag),(0,ii.removeEvent)(a.ownerDocument,Td.stop,this.handleDragStop))}),Ei(this,"onMouseDown",e=>(Td=dc.mouse,this.handleDragStart(e))),Ei(this,"onMouseUp",e=>(Td=dc.mouse,this.handleDragStop(e))),Ei(this,"onTouchStart",e=>(Td=dc.touch,this.handleDragStart(e))),Ei(this,"onTouchEnd",e=>(Td=dc.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,ii.addEvent)(e,dc.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,ii.removeEvent)(n,dc.mouse.move,this.handleDrag),(0,ii.removeEvent)(n,dc.touch.move,this.handleDrag),(0,ii.removeEvent)(n,dc.mouse.stop,this.handleDragStop),(0,ii.removeEvent)(n,dc.touch.stop,this.handleDragStop),(0,ii.removeEvent)(e,dc.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,ii.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:hpe.default.findDOMNode(this)}render(){return mP.cloneElement(mP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};BN.default=jN;Ei(jN,"displayName","DraggableCore");Ei(jN,"propTypes",{allowAnyClick:bi.default.bool,allowMobileScroll:bi.default.bool,children:bi.default.node.isRequired,disabled:bi.default.bool,enableUserSelectHack:bi.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:bi.default.arrayOf(bi.default.number),handle:bi.default.string,cancel:bi.default.string,nodeRef:bi.default.object,onStart:bi.default.func,onDrag:bi.default.func,onStop:bi.default.func,onMouseDown:bi.default.func,scale:bi.default.number,className:yP.dontSetMe,style:yP.dontSetMe,transform:yP.dontSetMe});Ei(jN,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(D),n=u(CV),r=u(vL),s=Mfe,i=$r,o=iu,a=su,c=u(BN),l=u(FN);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,b){if(typeof WeakMap=="function")var v=new WeakMap,A=new WeakMap;return(d=function(_,I){if(!I&&_&&_.__esModule)return _;var x,N,S={__proto__:null,default:_};if(_===null||typeof _!="object"&&typeof _!="function")return S;if(x=I?A:v){if(x.has(_))return x.get(_);x.set(_,S)}for(const O in _)O!=="default"&&{}.hasOwnProperty.call(_,O)&&((N=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(_,O))&&(N.get||N.set)?x(S,O,N):S[O]=_[O]);return S})(y,b)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var b=1;b<arguments.length;b++){var v=arguments[b];for(var A in v)({}).hasOwnProperty.call(v,A)&&(y[A]=v[A])}return y},h.apply(null,arguments)}function f(y,b,v){return(b=p(b))in y?Object.defineProperty(y,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):y[b]=v,y}function p(y){var b=g(y,"string");return typeof b=="symbol"?b:b+""}function g(y,b){if(typeof y!="object"||!y)return y;var v=y[Symbol.toPrimitive];if(v!==void 0){var A=v.call(y,b);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}class w extends e.Component{static getDerivedStateFromProps(b,v){let{position:A}=b,{prevPropsPosition:_}=v;return A&&(!_||A.x!==_.x||A.y!==_.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:_}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(b){super(b),f(this,"onDragStart",(v,A)=>{if((0,l.default)("Draggable: onDragStart: %j",A),this.props.onStart(v,(0,o.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,A)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",A);const _=(0,o.createDraggableData)(this,A),I={x:_.x,y:_.y,slackX:0,slackY:0};if(this.props.bounds){const{x:N,y:S}=I;I.x+=this.state.slackX,I.y+=this.state.slackY;const[O,P]=(0,o.getBoundPosition)(this,I.x,I.y);I.x=O,I.y=P,I.slackX=this.state.slackX+(N-I.x),I.slackY=this.state.slackY+(S-I.y),_.x=I.x,_.y=I.y,_.deltaX=I.x-this.state.x,_.deltaY=I.y-this.state.y}if(this.props.onDrag(v,_)===!1)return!1;this.setState(I)}),f(this,"onDragStop",(v,A)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,A))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",A);const I={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:N,y:S}=this.props.position;I.x=N,I.y=S}this.setState(I)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,v;return((v=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:v,children:A,defaultPosition:_,defaultClassName:I,defaultClassNameDragging:x,defaultClassNameDragged:N,position:S,positionOffset:O,scale:P,...F}=this.props;let G={},B=null;const R=!!!S||this.state.dragging,$=S||_,k={x:(0,o.canDragX)(this)&&R?this.state.x:$.x,y:(0,o.canDragY)(this)&&R?this.state.y:$.y};this.state.isElementSVG?B=(0,i.createSVGTransform)(k,O):G=(0,i.createCSSTransform)(k,O);const M=(0,s.clsx)(A.props.className||"",I,{[x]:this.state.dragging,[N]:this.state.dragged});return e.createElement(c.default,h({},F,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(A),{className:M,style:{...A.props.style,...G},transform:B}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(wV);const{default:PV,DraggableCore:gpe}=wV;$N.exports=PV;$N.exports.default=PV;$N.exports.DraggableCore=gpe;var mpe=$N.exports;const X_=im(mpe);function Cr(){return Cr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cr.apply(null,arguments)}function OV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var kV={exports:{}},Dn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ns=typeof Symbol=="function"&&Symbol.for,NL=Ns?Symbol.for("react.element"):60103,TL=Ns?Symbol.for("react.portal"):60106,WN=Ns?Symbol.for("react.fragment"):60107,zN=Ns?Symbol.for("react.strict_mode"):60108,HN=Ns?Symbol.for("react.profiler"):60114,GN=Ns?Symbol.for("react.provider"):60109,qN=Ns?Symbol.for("react.context"):60110,RL=Ns?Symbol.for("react.async_mode"):60111,VN=Ns?Symbol.for("react.concurrent_mode"):60111,KN=Ns?Symbol.for("react.forward_ref"):60112,YN=Ns?Symbol.for("react.suspense"):60113,ype=Ns?Symbol.for("react.suspense_list"):60120,QN=Ns?Symbol.for("react.memo"):60115,JN=Ns?Symbol.for("react.lazy"):60116,wpe=Ns?Symbol.for("react.block"):60121,bpe=Ns?Symbol.for("react.fundamental"):60117,vpe=Ns?Symbol.for("react.responder"):60118,Epe=Ns?Symbol.for("react.scope"):60119;function aa(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case NL:switch(t=t.type,t){case RL:case VN:case WN:case HN:case zN:case YN:return t;default:switch(t=t&&t.$$typeof,t){case qN:case KN:case JN:case QN:case GN:return t;default:return e}}case TL:return e}}}function DV(t){return aa(t)===VN}Dn.AsyncMode=RL;Dn.ConcurrentMode=VN;Dn.ContextConsumer=qN;Dn.ContextProvider=GN;Dn.Element=NL;Dn.ForwardRef=KN;Dn.Fragment=WN;Dn.Lazy=JN;Dn.Memo=QN;Dn.Portal=TL;Dn.Profiler=HN;Dn.StrictMode=zN;Dn.Suspense=YN;Dn.isAsyncMode=function(t){return DV(t)||aa(t)===RL};Dn.isConcurrentMode=DV;Dn.isContextConsumer=function(t){return aa(t)===qN};Dn.isContextProvider=function(t){return aa(t)===GN};Dn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===NL};Dn.isForwardRef=function(t){return aa(t)===KN};Dn.isFragment=function(t){return aa(t)===WN};Dn.isLazy=function(t){return aa(t)===JN};Dn.isMemo=function(t){return aa(t)===QN};Dn.isPortal=function(t){return aa(t)===TL};Dn.isProfiler=function(t){return aa(t)===HN};Dn.isStrictMode=function(t){return aa(t)===zN};Dn.isSuspense=function(t){return aa(t)===YN};Dn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===WN||t===VN||t===HN||t===zN||t===YN||t===ype||typeof t=="object"&&t!==null&&(t.$$typeof===JN||t.$$typeof===QN||t.$$typeof===GN||t.$$typeof===qN||t.$$typeof===KN||t.$$typeof===bpe||t.$$typeof===vpe||t.$$typeof===Epe||t.$$typeof===wpe)};Dn.typeOf=aa;kV.exports=Dn;var Cpe=kV.exports,PL=Cpe,_pe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Ape={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Spe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},OL={};OL[PL.ForwardRef]=Spe;OL[PL.Memo]=MV;function h8(t){return PL.isMemo(t)?MV:OL[t.$$typeof]||_pe}var xpe=Object.defineProperty,Ipe=Object.getOwnPropertyNames,f8=Object.getOwnPropertySymbols,Npe=Object.getOwnPropertyDescriptor,Tpe=Object.getPrototypeOf,p8=Object.prototype;function LV(t,e,n){if(typeof e!="string"){if(p8){var r=Tpe(e);r&&r!==p8&&LV(t,r,n)}var s=Ipe(e);f8&&(s=s.concat(f8(e)));for(var i=h8(t),o=h8(e),a=0;a<s.length;++a){var c=s[a];if(!Ape[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=Npe(e,c);try{xpe(t,c,l)}catch{}}}}return t}var Rpe=LV;const Ppe=im(Rpe);var UV={};Object.defineProperty(UV,"__esModule",{value:!0});UV.default=Ope;function Ope(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function CA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xx(){return Xx=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xx.apply(this,arguments)}function kpe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Rd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dpe(t){var e=function(n){kpe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,CA(Rd(Rd(i)),"cachedTheme",void 0),CA(Rd(Rd(i)),"lastOuterTheme",void 0),CA(Rd(Rd(i)),"lastTheme",void 0),CA(Rd(Rd(i)),"renderProvider",function(l){var u=i.props.children;return Zo.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?Xx({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Zo.createElement(t.Consumer,null,this.renderProvider):null},r}(Zo.Component);return e}function Mpe(t){return function(n){var r=Zo.forwardRef(function(s,i){return Zo.createElement(t.Consumer,null,function(o){return Zo.createElement(n,Xx({theme:o,ref:i},s))})});return Ppe(r,n),r}}function Lpe(t){var e=function(){var r=Zo.useContext(t);return r};return e}function Upe(t){return{context:t,withTheme:Mpe(t),useTheme:Lpe(t),ThemeProvider:Dpe(t)}}var $V=D.createContext();Upe($V);var g8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hb=(typeof window>"u"?"undefined":g8(window))==="object"&&(typeof document>"u"?"undefined":g8(document))==="object"&&document.nodeType===9;function hC(t){"@babel/helpers - typeof";return hC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hC(t)}function $pe(t,e){if(hC(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Bpe(t){var e=$pe(t,"string");return hC(e)=="symbol"?e:e+""}function Fpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bpe(r.key),r)}}function kL(t,e,n){return e&&Fpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yk(t,e){return Yk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Yk(t,e)}function BV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Yk(t,e)}function m8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var jpe={}.constructor;function Qk(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(Qk);if(t.constructor!==jpe)return t;var e={};for(var n in t)e[n]=Qk(t[n]);return e}function ZN(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=Qk(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var y8=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},mg=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=y8(e[r]," ");else n=y8(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function fb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function iv(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function fC(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=fb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=iv(f+":"+u+mg(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=iv(g+":"+u+mg(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=iv(y+":"+u+mg(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),iv(""+t+u+"{"+r,o)+iv("}",o))}var Wpe=/([[\].#*$><+~=|^:(),"'`\s])/g,w8=typeof CSS<"u"&&CSS.escape,DL=function(t){return w8?w8(t):t.replace(Wpe,"\\$1")},FV=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),Jk=function(t){BV(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(m8(m8(o)),l),o.selectorText="."+DL(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=mg(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Cr({},s,{allowEmpty:!0}):s;return fC(this.selectorText,this.style,a)},kL(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(FV),zpe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new Jk(e,n,r)}},wP={indent:1,children:!0},Hpe=/@([\w-]+)/,Gpe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Hpe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new XN(Cr({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=wP);var s=fb(r),i=s.linebreak;if(r.indent==null&&(r.indent=wP.indent),r.children==null&&(r.children=wP.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),qpe=/@container|@media|@supports\s+/,Vpe={onCreateRule:function(e,n,r){return qpe.test(e)?new Gpe(e,n,r):null}},bP={indent:1,children:!0},Kpe=/@keyframes\s+([\w-]+)/,Zk=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Kpe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:DL(c(this,a)),this.rules=new XN(Cr({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Cr({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=bP);var s=fb(r),i=s.linebreak;if(r.indent==null&&(r.indent=bP.indent),r.children==null&&(r.children=bP.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Ype=/@keyframes\s+/,Qpe=/\$([\w-]+)/g,Xk=function(e,n){return typeof e=="string"?e.replace(Qpe,function(r,s){return s in n?n[s]:r}):e},b8=function(e,n,r){var s=e[n],i=Xk(s,r);i!==s&&(e[n]=i)},Jpe={onCreateRule:function(e,n,r){return typeof e=="string"&&Ype.test(e)?new Zk(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&b8(e,"animation-name",r.keyframes),"animation"in e&&b8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return Xk(e,s.keyframes);case"animation-name":return Xk(e,s.keyframes);default:return e}}},Zpe=function(t){BV(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Cr({},s,{allowEmpty:!0}):s;return fC(this.key,this.style,a)},e}(FV),Xpe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new Zpe(e,n,r):null}},ege=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=fb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=fC(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return fC(this.at,this.style,r)},t}(),tge=/@font-face/,nge={onCreateRule:function(e,n,r){return tge.test(e)?new ege(e,n,r):null}},rge=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return fC(this.key,this.style,r)},t}(),sge={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new rge(e,n,r):null}},ige=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),oge={"@charset":!0,"@import":!0,"@namespace":!0},age={onCreateRule:function(e,n,r){return e in oge?new ige(e,n,r):null}},v8=[zpe,Vpe,Jpe,Xpe,nge,sge,age],cge={process:!0},E8={force:!0,process:!0},XN=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Cr({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+DL(this.classes[p]));var g=ZN(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Cr({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof Jk?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof Zk&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof Jk?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof Zk&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=cge);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,E8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,E8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=fb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),jV=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Cr({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new XN(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),lge=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),uge=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=OV(s,["attached"]),a=fb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},kL(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),mE=new uge,eD=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),tD="2f1acc6c3a606b082e5eef5e54414ffb";eD[tD]==null&&(eD[tD]=0);var C8=eD[tD]++,_8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+C8+a+n:c+i.key+"-"+C8+(a?"-"+a:"")+"-"+n};return r},WV=function(e){var n;return function(){return n||(n=e()),n}},dge=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},hge=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=mg(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},fge=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},pge=function(e,n){return e.selectorText=n,e.selectorText===n},zV=WV(function(){return document.querySelector("head")});function gge(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function mge(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function yge(t){for(var e=zV(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function wge(t){var e=mE.registry;if(e.length>0){var n=gge(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=mge(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=yge(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function bge(t,e){var n=e.insertionPoint,r=wge(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}zV().appendChild(t)}var vge=WV(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),A8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},S8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},Ege=function(){var e=document.createElement("style");return e.textContent=`
`,e},Cge=function(){function t(n){this.getPropertyValue=dge,this.setProperty=hge,this.removeProperty=fge,this.setSelector=pge,this.hasInsertedRules=!1,this.cssRules=[],n&&mE.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||Ege(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=vge();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){bge(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=S8(i,s);if(a=A8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=S8(i,s),d=A8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof jV&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),_ge=0,Age=function(){function t(n){this.id=_ge++,this.version="10.10.0",this.plugins=new lge,this.options={id:{minify:!1},createGenerateId:_8,Renderer:hb?Cge:null,plugins:[]},this.generateId=_8({minify:!1});for(var r=0;r<v8.length;r++)this.plugins.use(v8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Cr({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=mE.index===0?0:mE.index+1);var a=new jV(r,Cr({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),mE.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Cr({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=ZN(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),HV=function(e){return new Age(e)},x8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},kL(t,[{key:"size",get:function(){return this.length}}]),t}(),ML=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function GV(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=GV(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */HV();var qV=Date.now(),vP="fnValues"+qV,EP="fnStyle"+ ++qV,Sge=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=ZN(n,{},s);return i[EP]=r,i},onProcessStyle:function(n,r){if(vP in r||EP in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[vP]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[EP];a&&(o.style=a(n)||{});var c=o[vP];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function xge(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var py;typeof self<"u"?py=self:typeof window<"u"?py=window:typeof global<"u"?py=global:typeof module<"u"?py=module:py=Function("return this")();var I8=xge(py),N8=function(e){return e&&e[I8]&&e===e[I8]()},Ige=function(e){return{onCreateRule:function(r,s,i){if(!N8(s))return null;var o=s,a=ZN(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!N8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},Nge=/;\n/,Tge=function(e){for(var n={},r=e.split(Nge),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},Rge=function(e){typeof e.style=="string"&&(e.style=Tge(e.style))};function Pge(){return{onProcessRule:Rge}}var sf="@global",nD="@global ",Oge=function(){function t(n,r,s){this.type="global",this.at=sf,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new XN(Cr({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),kge=function(){function t(n,r,s){this.type="global",this.at=sf,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(nD.length);this.rule=s.jss.createRule(i,r,Cr({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),Dge=/\s*,\s*/g;function VV(t,e){for(var n=t.split(Dge),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function Mge(t,e){var n=t.options,r=t.style,s=r?r[sf]:null;if(s){for(var i in s)e.addRule(i,s[i],Cr({},n,{selector:VV(i,t.selector)}));delete r[sf]}}function Lge(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,sf.length)!==sf)){var i=VV(s.substr(sf.length),t.selector);e.addRule(i,r[s],Cr({},n,{selector:i})),delete r[s]}}function Uge(){function t(n,r,s){if(!n)return null;if(n===sf)return new Oge(n,r,s);if(n[0]==="@"&&n.substr(0,nD.length)===nD)return new kge(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(Mge(n,r),Lge(n,r))}return{onCreateRule:t,onProcessRule:e}}var PS=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},CP="extendCurrValue"+Date.now();function $ge(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Ip(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Cr({},t,{extend:l}):t.extend[c];Ip(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Ip(t.extend.extend,e,n,r);continue}if(PS(t.extend[d])){d in r||(r[d]={}),Ip(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function Bge(t,e,n,r){for(var s in t)if(s!=="extend"){if(PS(r[s])&&PS(t[s])){Ip(t[s],e,n,r[s]);continue}if(PS(t[s])){r[s]=Ip(t[s],e,n);continue}r[s]=t[s]}}function Ip(t,e,n,r){return r===void 0&&(r={}),$ge(t,e,n,r),Bge(t,e,n,r),r}function Fge(){function t(n,r,s){return"extend"in n?Ip(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[CP])s.prop(i,null);return s[CP]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[CP]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var T8=/\s*,\s*/g,jge=/&/g,Wge=/\$([\w-]+)/g;function zge(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(T8),a=s.split(T8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(jge,u):u+" "+h}return c}function n(s,i,o){if(o)return Cr({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Cr({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Wge,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Cr({},l,{selector:p})):c.addRule(g,s[d],Cr({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function rD(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=rD(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return rD(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function Hge(){function t(e,n){return"composes"in e&&(rD(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Gge=/[A-Z]/g,qge=/^ms-/,_P={};function Vge(t){return"-"+t.toLowerCase()}function KV(t){if(_P.hasOwnProperty(t))return _P[t];var e=t.replace(Gge,Vge);return _P[t]=qge.test(e)?"-"+e:e}function eI(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:KV(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(eI):e.fallbacks=eI(t.fallbacks)),e}function Kge(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=eI(n[r]);return n}return eI(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=KV(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var de=ML&&CSS?CSS.px:"px",_A=ML&&CSS?CSS.ms:"ms",Bm=ML&&CSS?CSS.percent:"%",Yge={"animation-delay":_A,"animation-duration":_A,"background-position":de,"background-position-x":de,"background-position-y":de,"background-size":de,border:de,"border-bottom":de,"border-bottom-left-radius":de,"border-bottom-right-radius":de,"border-bottom-width":de,"border-left":de,"border-left-width":de,"border-radius":de,"border-right":de,"border-right-width":de,"border-top":de,"border-top-left-radius":de,"border-top-right-radius":de,"border-top-width":de,"border-width":de,"border-block":de,"border-block-end":de,"border-block-end-width":de,"border-block-start":de,"border-block-start-width":de,"border-block-width":de,"border-inline":de,"border-inline-end":de,"border-inline-end-width":de,"border-inline-start":de,"border-inline-start-width":de,"border-inline-width":de,"border-start-start-radius":de,"border-start-end-radius":de,"border-end-start-radius":de,"border-end-end-radius":de,margin:de,"margin-bottom":de,"margin-left":de,"margin-right":de,"margin-top":de,"margin-block":de,"margin-block-end":de,"margin-block-start":de,"margin-inline":de,"margin-inline-end":de,"margin-inline-start":de,padding:de,"padding-bottom":de,"padding-left":de,"padding-right":de,"padding-top":de,"padding-block":de,"padding-block-end":de,"padding-block-start":de,"padding-inline":de,"padding-inline-end":de,"padding-inline-start":de,"mask-position-x":de,"mask-position-y":de,"mask-size":de,height:de,width:de,"min-height":de,"max-height":de,"min-width":de,"max-width":de,bottom:de,left:de,top:de,right:de,inset:de,"inset-block":de,"inset-block-end":de,"inset-block-start":de,"inset-inline":de,"inset-inline-end":de,"inset-inline-start":de,"box-shadow":de,"text-shadow":de,"column-gap":de,"column-rule":de,"column-rule-width":de,"column-width":de,"font-size":de,"font-size-delta":de,"letter-spacing":de,"text-decoration-thickness":de,"text-indent":de,"text-stroke":de,"text-stroke-width":de,"word-spacing":de,motion:de,"motion-offset":de,outline:de,"outline-offset":de,"outline-width":de,perspective:de,"perspective-origin-x":Bm,"perspective-origin-y":Bm,"transform-origin":Bm,"transform-origin-x":Bm,"transform-origin-y":Bm,"transform-origin-z":Bm,"transition-delay":_A,"transition-duration":_A,"vertical-align":de,"flex-basis":de,"shape-margin":de,size:de,gap:de,grid:de,"grid-gap":de,"row-gap":de,"grid-row-gap":de,"grid-column-gap":de,"grid-template-rows":de,"grid-template-columns":de,"grid-auto-rows":de,"grid-auto-columns":de,"box-shadow-x":de,"box-shadow-y":de,"box-shadow-blur":de,"box-shadow-spread":de,"font-line-height":de,"text-shadow-x":de,"text-shadow-y":de,"text-shadow-blur":de};function YV(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var Qge=YV(Yge);function yE(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=yE(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=yE(s,e[s],n);else for(var i in e)e[i]=yE(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||Qge[t];return o&&!(e===0&&o===de)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Jge(t){t===void 0&&(t={});var e=YV(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=yE(o,s[o],e);return s}function r(s,i){return yE(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var Zge={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},Xge={position:!0,size:!0},AA={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},AP={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function eme(t,e,n){return t.map(function(r){return JV(r,e,n,!1,!0)})}function QV(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?QV(t[0],e,n,r):typeof t[0]=="object"?eme(t,e,r):[t]}function JV(t,e,n,r,s){if(!(AA[e]||AP[e]))return[];var i=[];if(AP[e]&&(t=tme(t,n,AP[e],r)),Object.keys(t).length)for(var o in AA[e]){if(t[o]){Array.isArray(t[o])?i.push(Xge[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}AA[e][o]!=null&&i.push(AA[e][o])}return!i.length||s?i:[i]}function tme(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=pC((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function pC(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=pC(t.fallbacks[i],e,!0);continue}t[r]=QV(s,r,Zge,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=pC(t.fallbacks,e,!0);continue}t[r]=JV(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function nme(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=pC(e[r],n);return e}return pC(e,n)}return{onProcessStyle:t}}function sD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function rme(t){if(Array.isArray(t))return sD(t)}function sme(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ime(t,e){if(t){if(typeof t=="string")return sD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sD(t,e):void 0}}function ome(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ame(t){return rme(t)||sme(t)||ime(t)||ome()}var Dv="",iD="",ZV="",XV="",cme=hb&&"ontouchstart"in document.documentElement;if(hb){var SP={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},lme=document.createElement("p"),xP=lme.style,ume="Transform";for(var IP in SP)if(IP+ume in xP){Dv=IP,iD=SP[IP];break}Dv==="Webkit"&&"msHyphens"in xP&&(Dv="ms",iD=SP.ms,XV="edge"),Dv==="Webkit"&&"-apple-trailing-word"in xP&&(ZV="apple")}var Ut={js:Dv,css:iD,vendor:ZV,browser:XV,isTouch:cme};function dme(t){return t[1]==="-"||Ut.js==="ms"?t:"@"+Ut.css+"keyframes"+t.substr(10)}var hme={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Ut.js==="ms"?"-webkit-"+e:Ut.css+e}},fme={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Ut.js==="Webkit"?Ut.css+"print-"+e:e}},pme=/[-\s]+(.)?/g;function gme(t,e){return e?e.toUpperCase():""}function LL(t){return t.replace(pme,gme)}function Cf(t){return LL("-"+t)}var mme={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Ut.js==="Webkit"){var r="mask-image";if(LL(r)in n)return e;if(Ut.js+Cf(r)in n)return Ut.css+e}return e}},yme={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Ut.vendor==="apple"&&!Ut.isTouch?Ut.css+e:e}},wme={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Ut.css+e}},bme={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Ut.css+e}},vme={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Ut.js==="Webkit"||Ut.js==="ms"&&Ut.browser!=="edge"?Ut.css+e:e}},Eme={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Ut.js==="Moz"||Ut.js==="ms"||Ut.vendor==="apple"?Ut.css+e:e}},Cme={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Ut.js==="Webkit"){var r="WebkitColumn"+Cf(e);return r in n?Ut.css+"column-"+e:!1}if(Ut.js==="Moz"){var s="page"+Cf(e);return s in n?"page-"+e:!1}return!1}},_me={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Ut.js==="Moz")return e;var r=e.replace("-inline","");return Ut.js+Cf(r)in n?Ut.css+r:!1}},Ame={supportedProperty:function(e,n){return LL(e)in n?e:!1}},Sme={supportedProperty:function(e,n){var r=Cf(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Ut.js+r in n?Ut.css+e:Ut.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},xme={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Ut.js==="ms"?""+Ut.css+e:e}},Ime={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Ut.js==="ms"?Ut.css+"scroll-chaining":e}},Nme={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Tme={supportedProperty:function(e,n){var r=Nme[e];return r&&Ut.js+Cf(r)in n?Ut.css+r:!1}},eK={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Rme=Object.keys(eK),Pme=function(e){return Ut.css+e},Ome={supportedProperty:function(e,n,r){var s=r.multiple;if(Rme.indexOf(e)>-1){var i=eK[e];if(!Array.isArray(i))return Ut.js+Cf(i)in n?Ut.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Ut.js+Cf(i[0])in n))return!1;return i.map(Pme)}return!1}},tK=[hme,fme,mme,yme,wme,bme,vme,Eme,Cme,_me,Ame,Sme,xme,Ime,Tme,Ome],R8=tK.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),kme=tK.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,ame(e.noPrefill)),t},[]),Mv,fp={};if(hb){Mv=document.createElement("p");var NP=window.getComputedStyle(document.documentElement,"");for(var TP in NP)isNaN(TP)||(fp[NP[TP]]=NP[TP]);kme.forEach(function(t){return delete fp[t]})}function oD(t,e){if(e===void 0&&(e={}),!Mv)return t;if(fp[t]!=null)return fp[t];(t==="transition"||t==="transform")&&(e[t]=t in Mv.style);for(var n=0;n<R8.length&&(fp[t]=R8[n](t,Mv.style,e),!fp[t]);n++);try{Mv.style[t]=""}catch{return!1}return fp[t]}var Fm={},Dme={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Mme=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Vd;function Lme(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?oD(e):", "+oD(n);return r||e||n}hb&&(Vd=document.createElement("p"));function P8(t,e){var n=e;if(!Vd||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Fm[r]!=null)return Fm[r];try{Vd.style[t]=n}catch{return Fm[r]=!1,!1}if(Dme[t])n=n.replace(Mme,Lme);else if(Vd.style[t]===""&&(n=Ut.css+n,n==="-ms-flex"&&(Vd.style[t]="-ms-flexbox"),Vd.style[t]=n,Vd.style[t]===""))return Fm[r]=!1,!1;return Vd.style[t]="",Fm[r]=n,Fm[r]}function Ume(){function t(s){if(s.type==="keyframes"){var i=s;i.at=dme(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=oD(i);c&&c!==i&&(a=!0);var l=!1,u=P8(c,mg(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return P8(i,mg(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function $me(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var Bme=function(e){return e===void 0&&(e={}),{plugins:[Sge(),Ige(e.observable),Pge(),Uge(),Fge(),zge(),Hge(),Kge(),Jge(e.defaultUnit),nme(),Ume(),$me()]}},Fme=Number.MIN_SAFE_INTEGER||-1e9,jme=function(){return Fme++},Wme=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!hb}),O8=new Map,UL=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new x8),r[n];var s=O8.get(n);return s||(s=new x8,O8.set(n,s)),s},k8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=UL(r,s);o.manage(i),r.registry&&r.registry.add(n)}},zme=function(e){if(e.sheet){var n=UL(e.context,e.index);n.unmanage(e.theme)}},Hme=HV(Bme()),nK=new WeakMap,rK=function(e){return nK.get(e)},Gme=function(e,n){nK.set(e,n)},qme=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function Vme(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Cr({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Kme=function(e){if(!e.context.disableStylesGeneration){var n=UL(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||Hme,i=qme(e),o=GV(i),a=s.createStyleSheet(i,Vme(e,o!==null));return Gme(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Yme=function(e,n){for(var r in n)e.deleteRule(n[r])},Qme=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},Jme=function(e,n){var r=rK(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},Zme=function(e,n){if(!n)return e.classes;var r=rK(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function D8(t){return t?D.useEffect:Zo.useInsertionEffect||D.useLayoutEffect}var RP={},Kc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?jme():s,o=r.theming,a=r.name,c=OV(r,["index","theming","name"]),l=o&&o.context||$V,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||RP},d={};return function(f){var p=D.useRef(!0),g=D.useContext(Wme),w=u(f&&f.theme),y=D.useMemo(function(){var _=Kme({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return _&&g.isSSR&&k8({index:i,context:g,sheet:_,theme:w}),[_,_?Jme(_,f):null]},[g,w]),b=y[0],v=y[1];D8(g.isSSR)(function(){b&&v&&!p.current&&Qme(f,b,v)},[f]),D8(g.isSSR)(function(){return b&&k8({index:i,context:g,sheet:b,theme:w}),function(){b&&(zme({index:i,context:g,sheet:b,theme:w}),v&&Yme(b,v))}},[b]);var A=D.useMemo(function(){return b&&v?Zme(b,v):d},[b,v]);return D.useDebugValue(A),D.useDebugValue(w===RP?"No theme":w),D.useEffect(function(){p.current=!1}),A}};const Xme=Kc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function PP({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=Xme(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(X_,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const eye=Kc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function Ca({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=eye({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return m.jsx(X_,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const OP=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],tye=80,nye=80,rye=10,sye=10,iye=10,oye=10,aye=({onIconClick:t})=>{const e=OP.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:iye+d*(tye+rye),y:oye+u*(nye+sye)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(PP,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(Ca,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:OP.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(PP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(Ca,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:OP.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(PP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},cye=Kc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),lye=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=cye({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function sK(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function $L(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function iK(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function BL(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function oK(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function aK(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana collection:",t);const i={lawbstation:"9CU9LUX7UWkBEG4oP8YrgDUkNJKNHLt2wGdVfX6NY4EY",lawbnexus:"AfXkPjcfTWHz9WDjvXxZBkHSWQ1H7xsg7jT2fFLkAAi"}[t];if(!i)return console.log("No collection mint found for collection:",t),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]};const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByGroup",params:{groupKey:"collection",groupValue:i,page:1,limit:e}})});if(!o.ok)throw console.log("Helius DAS API response status:",o.status),console.log("Helius DAS API response text:",await o.text()),new Error(`Helius DAS API error: ${o.statusText}`);const a=await o.json();if(console.log("Helius DAS API response:",a),a.error)throw new Error(`Helius DAS API error: ${a.error.message}`);const l=(((r=a.result)==null?void 0:r.items)||[]).map(u=>{var d,h,f,p,g,w,y,b,v,A,_,I,x,N,S,O,P,F,G,B,T,R,$,k,M,W,K,ne,le,oe;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(w=u.content)==null?void 0:w.metadata)==null?void 0:y.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(_=u.mint)==null?void 0:_.slice(0,8)}`,image_url:((N=(x=(I=u.content)==null?void 0:I.files)==null?void 0:x[0])==null?void 0:N.uri)||((O=(S=u.content)==null?void 0:S.metadata)==null?void 0:O.image)||"",owner_of:"",block_minted:0,contract_type:"SOL",description:((F=(P=u.content)==null?void 0:P.metadata)==null?void 0:F.description)||"",image:((T=(B=(G=u.content)==null?void 0:G.files)==null?void 0:B[0])==null?void 0:T.uri)||(($=(R=u.content)==null?void 0:R.metadata)==null?void 0:$.image)||"",image_url_shrunk:((W=(M=(k=u.content)==null?void 0:k.files)==null?void 0:M[0])==null?void 0:W.uri)||((ne=(K=u.content)==null?void 0:K.metadata)==null?void 0:ne.image)||"",animation_url:((oe=(le=u.content)==null?void 0:le.metadata)==null?void 0:oe.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs from Helius:",s),s}}async function uye(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana owner:",t);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByOwner",params:{ownerAddress:t,page:1,limit:e}})});if(!s.ok)throw console.log("Helius DAS API response status:",s.status),console.log("Helius DAS API response text:",await s.text()),new Error(`Helius DAS API error: ${s.statusText}`);const i=await s.json();if(console.log("Helius DAS API owner response:",i),i.error)throw new Error(`Helius DAS API error: ${i.error.message}`);const o=((r=i.result)==null?void 0:r.items)||[],a={lawbstation:"6cz67ciatfhDaxyWw3rdC9rZHXAxQvYnq5qkqmnG3G1Q",lawbnexus:"35pjVXpTg2PCdBZ1zdUckNfnAxULJQBRSjWLXREo6692"},l=o.filter(u=>{const d=u.mintAuthority||u.authority;return d&&Object.values(a).includes(d)}).slice(0,e).map(u=>{var d,h,f,p,g,w,y,b,v,A,_,I,x,N,S,O,P,F,G,B,T,R,$,k,M,W,K,ne,le,oe,ae,ue;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(w=u.content)==null?void 0:w.metadata)==null?void 0:y.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(_=u.mint)==null?void 0:_.slice(0,8)}`,image_url:((N=(x=(I=u.content)==null?void 0:I.files)==null?void 0:x[0])==null?void 0:N.uri)||((O=(S=u.content)==null?void 0:S.metadata)==null?void 0:O.image)||"",owner_of:t,block_minted:0,contract_type:"SOL",description:((F=(P=u.content)==null?void 0:P.metadata)==null?void 0:F.description)||"",image:((T=(B=(G=u.content)==null?void 0:G.files)==null?void 0:B[0])==null?void 0:T.uri)||(($=(R=u.content)==null?void 0:R.metadata)==null?void 0:$.image)||"",image_url_shrunk:((W=(M=(k=u.content)==null?void 0:k.files)==null?void 0:M[0])==null?void 0:W.uri)||((ne=(K=u.content)==null?void 0:K.metadata)==null?void 0:ne.image)||"",animation_url:((oe=(le=u.content)==null?void 0:le.metadata)==null?void 0:oe.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:((ue=(ae=u.grouping)==null?void 0:ae.find(et=>et.group_key==="collection"))==null?void 0:ue.group_value)||"",num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs by owner from Helius:",s),s}}const cK="2.32.0";let ov={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${cK}`},pe=class aD extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof aD?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof aD&&n.cause.docsPath||n.docsPath,i=(a=ov.getDocsUrl)==null?void 0:a.call(ov,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...ov.version?[`Version: ${ov.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=cK}walk(e){return lK(this,e)}};function lK(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?lK(t.cause,e):e?null:t}let uK=class extends pe{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class dye extends pe{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class hye extends pe{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let fye=class extends pe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},dK=class extends pe{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},hK=class extends pe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class M8 extends pe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function pb(t,{dir:e,size:n=32}={}){return typeof t=="string"?of(t,{dir:e,size:n}):pye(t,{dir:e,size:n})}function of(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new hK({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function pye(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new hK({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Yl(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Mr(t){return Yl(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function zl(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const gye=new TextEncoder;function gb(t,e={}){return typeof t=="number"||typeof t=="bigint"?yye(t,e):typeof t=="boolean"?mye(t,e):Yl(t)?qa(t,e):yg(t,e)}function mye(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ja(n,{size:e.size}),pb(n,{size:e.size})):n}const au={zero:48,nine:57,A:65,F:70,a:97,f:102};function L8(t){if(t>=au.zero&&t<=au.nine)return t-au.zero;if(t>=au.A&&t<=au.F)return t-(au.A-10);if(t>=au.a&&t<=au.f)return t-(au.a-10)}function qa(t,e={}){let n=t;e.size&&(Ja(n,{size:e.size}),n=pb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=L8(r.charCodeAt(a++)),l=L8(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new pe(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function yye(t,e){const n=nt(t,e);return qa(n)}function yg(t,e={}){const n=gye.encode(t);return typeof e.size=="number"?(Ja(n,{size:e.size}),pb(n,{dir:"right",size:e.size})):n}function Ja(t,{size:e}){if(Mr(t)>e)throw new fye({givenSize:Mr(t),maxSize:e})}function ra(t,e={}){const{signed:n}=e;e.size&&Ja(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function wye(t,e={}){let n=t;if(e.size&&(Ja(n,{size:e.size}),n=zl(n)),zl(n)==="0x00")return!1;if(zl(n)==="0x01")return!0;throw new hye(n)}function zc(t,e={}){return Number(ra(t,e))}function fK(t,e={}){let n=qa(t);return e.size&&(Ja(n,{size:e.size}),n=zl(n,{dir:"right"})),new TextDecoder().decode(n)}const bye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Va(t,e={}){return typeof t=="number"||typeof t=="bigint"?nt(t,e):typeof t=="string"?Sw(t,e):typeof t=="boolean"?pK(t,e):ls(t,e)}function pK(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ja(n,{size:e.size}),pb(n,{size:e.size})):n}function ls(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=bye[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ja(r,{size:e.size}),pb(r,{dir:"right",size:e.size})):r}function nt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new uK({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?pb(a,{size:r}):a}const vye=new TextEncoder;function Sw(t,e={}){const n=vye.encode(t);return ls(n,e)}async function Eye(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:nt(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Hc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new Dye(t.type);return`${t.name}(${eT(t.inputs,{includeName:e})})`}function eT(t,{includeName:e=!1}={}){return t?t.map(n=>Cye(n,{includeName:e})).join(e?", ":","):""}function Cye(t,{includeName:e}){return t.type.startsWith("tuple")?`(${eT(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class _ye extends pe{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class U8 extends pe{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class gK extends pe{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${eT(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class e1 extends pe{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Aye extends pe{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Sye extends pe{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Mr(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class xye extends pe{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Iye extends pe{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class $8 extends pe{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class mK extends pe{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Nye extends pe{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class yK extends pe{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class B8 extends pe{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class xw extends pe{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class wK extends pe{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Tye extends pe{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class Rye extends pe{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Hc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Hc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Pye=class extends pe{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class gC extends pe{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${eT(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class tT extends pe{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Hc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class Oye extends pe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class kye extends pe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let bK=class extends pe{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class Dye extends pe{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function Ka(t){return typeof t[0]=="string"?mb(t):Mye(t)}function Mye(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function mb(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let _f=class extends pe{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},nT=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const SA=BigInt(2**32-1),F8=BigInt(32);function Lye(t,e=!1){return e?{h:Number(t&SA),l:Number(t>>F8&SA)}:{h:Number(t>>F8&SA)|0,l:Number(t&SA)|0}}function Uye(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=Lye(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const $ye=(t,e,n)=>t<<n|e>>>32-n,Bye=(t,e,n)=>e<<n|t>>>32-n,Fye=(t,e,n)=>e<<n-32|t>>>64-n,jye=(t,e,n)=>t<<n-32|e>>>64-n,jm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function FL(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function mC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Gc(t,...e){if(!FL(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Wye(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");mC(t.outputLen),mC(t.blockLen)}function Iw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vK(t,e){Gc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function zye(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Nw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function kP(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function nl(t,e){return t<<32-e|t>>>e}const Hye=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Gye(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function qye(t){for(let e=0;e<t.length;e++)t[e]=Gye(t[e]);return t}const j8=Hye?t=>t:qye,EK=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Vye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function yC(t){if(Gc(t),EK)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Vye[t[n]];return e}const cu={_0:48,_9:57,A:65,F:70,a:97,f:102};function W8(t){if(t>=cu._0&&t<=cu._9)return t-cu._0;if(t>=cu.A&&t<=cu.F)return t-(cu.A-10);if(t>=cu.a&&t<=cu.f)return t-(cu.a-10)}function jL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(EK)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=W8(t.charCodeAt(i)),a=W8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Kye(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function t1(t){return typeof t=="string"&&(t=Kye(t)),Gc(t),t}function Np(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Gc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let WL=class{};function CK(t){const e=r=>t().update(t1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Yye(t){const e=(r,s)=>t(s).update(t1(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Qye(t=32){if(jm&&typeof jm.getRandomValues=="function")return jm.getRandomValues(new Uint8Array(t));if(jm&&typeof jm.randomBytes=="function")return Uint8Array.from(jm.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Jye=BigInt(0),av=BigInt(1),Zye=BigInt(2),Xye=BigInt(7),e0e=BigInt(256),t0e=BigInt(113),_K=[],AK=[],SK=[];for(let t=0,e=av,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],_K.push(2*(5*r+n)),AK.push((t+1)*(t+2)/2%64);let s=Jye;for(let i=0;i<7;i++)e=(e<<av^(e>>Xye)*t0e)%e0e,e&Zye&&(s^=av<<(av<<BigInt(i))-av);SK.push(s)}const xK=Uye(SK,!0),n0e=xK[0],r0e=xK[1],z8=(t,e,n)=>n>32?Fye(t,e,n):$ye(t,e,n),H8=(t,e,n)=>n>32?jye(t,e,n):Bye(t,e,n);function IK(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=z8(l,u,1)^n[a],h=H8(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=AK[o],c=z8(s,i,a),l=H8(s,i,a),u=_K[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=n0e[r],t[1]^=r0e[r]}Nw(n)}let zL=class NK extends WL{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,mC(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=zye(this.state)}clone(){return this._cloneInto()}keccak(){j8(this.state32),IK(this.state32,this.rounds),j8(this.state32),this.posOut=0,this.pos=0}update(e){Iw(this),e=t1(e),Gc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Iw(this,!1),Gc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return mC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(vK(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Nw(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new NK(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Lf=(t,e,n)=>CK(()=>new zL(e,t,n)),s0e=Lf(6,144,224/8),i0e=Lf(6,136,256/8),o0e=Lf(6,104,384/8),a0e=Lf(6,72,512/8),c0e=Lf(1,144,224/8),HL=Lf(1,136,256/8),l0e=Lf(1,104,384/8),u0e=Lf(1,72,512/8),TK=(t,e,n)=>Yye((r={})=>new zL(e,t,r.dkLen===void 0?n:r.dkLen,!0)),d0e=TK(31,168,128/8),h0e=TK(31,136,256/8),pVe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:zL,keccakP:IK,keccak_224:c0e,keccak_256:HL,keccak_384:l0e,keccak_512:u0e,sha3_224:s0e,sha3_256:i0e,sha3_384:o0e,sha3_512:a0e,shake128:d0e,shake256:h0e},Symbol.toStringTag,{value:"Module"}));function zs(t,e){const n=e||"hex",r=HL(Yl(t,{strict:!1})?gb(t):t);return n==="bytes"?r:Va(r)}const DP=new nT(8192);function n1(t,e){if(DP.has(`${t}.${e}`))return DP.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=zs(yg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return DP.set(`${t}.${e}`,i),i}function Yu(t,e){if(!Ya(t,{strict:!1}))throw new _f({address:t});return n1(t,e)}const f0e=/^0x[a-fA-F0-9]{40}$/,MP=new nT(8192);function Ya(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(MP.has(r))return MP.get(r);const s=f0e.test(t)?t.toLowerCase()===t?!0:n?n1(t)===t:!0:!1;return MP.set(r,s),s}function Tw(t,e,n,{strict:r}={}){return Yl(t,{strict:!1})?tI(t,e,n,{strict:r}):OK(t,e,n,{strict:r})}function RK(t,e){if(typeof e=="number"&&e>0&&e>Mr(t)-1)throw new dK({offset:e,position:"start",size:Mr(t)})}function PK(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Mr(t)!==n-e)throw new dK({offset:n,position:"end",size:Mr(t)})}function OK(t,e,n,{strict:r}={}){RK(t,e);const s=t.slice(e,n);return r&&PK(s,e,n),s}function tI(t,e,n,{strict:r}={}){RK(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&PK(s,e,n),s}const p0e=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,kK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Uf(t,e){if(t.length!==e.length)throw new xye({expectedLength:t.length,givenLength:e.length});const n=g0e({params:t,values:e}),r=qL(n);return r.length===0?"0x":r}function g0e({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(GL({param:t[r],value:e[r]}));return n}function GL({param:t,value:e}){const n=VL(t.type);if(n){const[r,s]=n;return y0e(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return C0e(e,{param:t});if(t.type==="address")return m0e(e);if(t.type==="bool")return b0e(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=kK.exec(t.type)??[];return v0e(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return w0e(e,{param:t});if(t.type==="string")return E0e(e);throw new Oye(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function qL(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Mr(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(nt(e+s,{size:32})),r.push(a),s+=Mr(a)):n.push(a)}return Ka([...n,...r])}function m0e(t){if(!Ya(t))throw new _f({address:t});return{dynamic:!1,encoded:of(t.toLowerCase())}}function y0e(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new bK(t);if(!r&&t.length!==e)throw new Aye({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=GL({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=qL(i);if(r){const a=nt(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Ka([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Ka(i.map(({encoded:o})=>o))}}function w0e(t,{param:e}){const[,n]=e.type.split("bytes"),r=Mr(t);if(!n){let s=t;return r%32!==0&&(s=of(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Ka([of(nt(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Sye({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:of(t,{dir:"right"})}}function b0e(t){if(typeof t!="boolean")throw new pe(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:of(pK(t))}}function v0e(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new uK({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:nt(t,{size:32,signed:e})}}function E0e(t){const e=Sw(t),n=Math.ceil(Mr(e)/32),r=[];for(let s=0;s<n;s++)r.push(of(Tw(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ka([of(nt(Mr(e),{size:32})),...r])}}function C0e(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=GL({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?qL(r):Ka(r.map(({encoded:s})=>s))}}function VL(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const LP="/docs/contract/encodeDeployData";function rT(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new _ye({docsPath:LP});if(!("inputs"in s))throw new U8({docsPath:LP});if(!s.inputs||s.inputs.length===0)throw new U8({docsPath:LP});const i=Uf(s.inputs,n);return mb([r,i])}function Ur(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class dm extends pe{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class OS extends pe{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function _0e(t){const e=zs(`0x${t.substring(4)}`).substring(26);return n1(`0x${e}`)}const A0e="modulepreload",S0e=function(t){return"/"+t},G8={},hi=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=S0e(c),c in G8)return;G8[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":A0e,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function x0e({hash:t,signature:e}){const n=Yl(t)?t:Va(t),{secp256k1:r}=await hi(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>WCe);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=q8(f);return new r.Signature(ra(l),ra(u)).addRecoveryBit(p)}const o=Yl(e)?e:Va(e);if(Mr(o)!==65)throw new Error("invalid signature length");const a=zc(`0x${o.slice(130)}`),c=q8(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function q8(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function DK({hash:t,signature:e}){return _0e(await x0e({hash:t,signature:e}))}class V8 extends pe{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class MK extends pe{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class I0e extends pe{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const N0e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new I0e({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new MK({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new V8({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new V8({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function KL(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(N0e);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function T0e(t,e="hex"){const n=LK(t),r=KL(new Uint8Array(n.length));return n.encode(r),e==="hex"?ls(r.bytes):r.bytes}function LK(t){return Array.isArray(t)?R0e(t.map(e=>LK(e))):P0e(t)}function R0e(t){const e=t.reduce((s,i)=>s+i.length,0),n=UK(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function P0e(t){const e=typeof t=="string"?qa(t):t,n=UK(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function UK(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new pe("Length is too large.")}function O0e(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=zs(mb(["0x05",T0e([e?nt(e):"0x",s,n?nt(n):"0x"])]));return r==="bytes"?qa(i):i}async function $K(t){const{authorization:e,signature:n}=t;return DK({hash:O0e(e),signature:n??e})}class cD extends pe{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class k0e extends pe{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class D0e extends pe{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class BK extends pe{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function FK({chain:t,currentChainId:e}){if(!t)throw new D0e;if(e!==t.id)throw new k0e({chain:t,currentChainId:e})}const M0e={gwei:9,wei:18},L0e={ether:-9,wei:9},U0e={ether:-18,gwei:-9};function hm(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function _o(t,e="wei"){return hm(t,L0e[e])}class Tp extends pe{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Tp,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Tp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class nI extends pe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${_o(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(nI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class lD extends pe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${_o(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(lD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class uD extends pe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(uD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class dD extends pe{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(dD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class hD extends pe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(hD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class fD extends pe{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(fD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class pD extends pe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(pD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class gD extends pe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(gD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class mD extends pe{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(mD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class rI extends pe{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${_o(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${_o(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(rI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class r1 extends pe{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function YL(t,e="wei"){return hm(t,M0e[e])}function s1(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class $0e extends pe{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class B0e extends pe{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",s1(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class F0e extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=s1({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${YL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${_o(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${_o(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${_o(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class jK extends pe{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class WK extends pe{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class j0e extends pe{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const as=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),W0e=t=>t,QL=t=>t;class wE extends pe{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${QL(o)}`,e&&`Request body: ${as(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class JL extends pe{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${QL(r)}`,`Request body: ${as(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class K8 extends pe{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${QL(n)}`,`Request body: ${as(e)}`],name:"TimeoutError"})}}const z0e=-1;class No extends pe{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof JL?e.code:n??z0e}}class ca extends No{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class wC extends No{constructor(e){super(e,{code:wC.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(wC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class bC extends No{constructor(e){super(e,{code:bC.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(bC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class vC extends No{constructor(e,{method:n}={}){super(e,{code:vC.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(vC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class EC extends No{constructor(e){super(e,{code:EC.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(EC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class kg extends No{constructor(e){super(e,{code:kg.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(kg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Dg extends No{constructor(e){super(e,{code:Dg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Dg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class CC extends No{constructor(e){super(e,{code:CC.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(CC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class af extends No{constructor(e){super(e,{code:af.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(af,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Rw extends No{constructor(e){super(e,{code:Rw.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Rw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Rp extends No{constructor(e,{method:n}={}){super(e,{code:Rp.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Rp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Pw extends No{constructor(e){super(e,{code:Pw.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Pw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class _C extends No{constructor(e){super(e,{code:_C.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(_C,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Xr extends ca{constructor(e){super(e,{code:Xr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Xr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class AC extends ca{constructor(e){super(e,{code:AC.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(AC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class SC extends ca{constructor(e,{method:n}={}){super(e,{code:SC.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(SC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class xC extends ca{constructor(e){super(e,{code:xC.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(xC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class IC extends ca{constructor(e){super(e,{code:IC.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(IC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ql extends ca{constructor(e){super(e,{code:Ql.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ql,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Ow extends ca{constructor(e){super(e,{code:Ow.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Ow,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class NC extends ca{constructor(e){super(e,{code:NC.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(NC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class TC extends ca{constructor(e){super(e,{code:TC.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(TC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class RC extends ca{constructor(e){super(e,{code:RC.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(RC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class PC extends ca{constructor(e){super(e,{code:PC.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(PC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class OC extends ca{constructor(e){super(e,{code:OC.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(OC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class kw extends ca{constructor(e){super(e,{code:kw.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(kw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class H0e extends No{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function sT(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof pe?t.walk(s=>(s==null?void 0:s.code)===Tp.code):t;return r instanceof pe?new Tp({cause:t,message:r.details}):Tp.nodeMessage.test(n)?new Tp({cause:t,message:t.details}):nI.nodeMessage.test(n)?new nI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):lD.nodeMessage.test(n)?new lD({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):uD.nodeMessage.test(n)?new uD({cause:t,nonce:e==null?void 0:e.nonce}):dD.nodeMessage.test(n)?new dD({cause:t,nonce:e==null?void 0:e.nonce}):hD.nodeMessage.test(n)?new hD({cause:t,nonce:e==null?void 0:e.nonce}):fD.nodeMessage.test(n)?new fD({cause:t}):pD.nodeMessage.test(n)?new pD({cause:t,gas:e==null?void 0:e.gas}):gD.nodeMessage.test(n)?new gD({cause:t,gas:e==null?void 0:e.gas}):mD.nodeMessage.test(n)?new mD({cause:t}):rI.nodeMessage.test(n)?new rI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new r1({cause:t})}function zK(t,{docsPath:e,...n}){const r=(()=>{const s=sT(t,n);return s instanceof r1?t:s})();return new F0e(r,{docsPath:e,...n})}function iT(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const G0e={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function yb(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=q0e(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>ls(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=nt(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=nt(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=nt(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=nt(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=nt(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=nt(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=G0e[t.type]),typeof t.value<"u"&&(e.value=nt(t.value)),e}function q0e(t){return t.map(e=>({address:e.address,r:e.r?nt(BigInt(e.r)):e.r,s:e.s?nt(BigInt(e.s)):e.s,chainId:nt(e.chainId),nonce:nt(e.nonce),...typeof e.yParity<"u"?{yParity:nt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:nt(e.v)}:{}}))}function ut(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const V0e=2n**256n-1n;function fm(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Ur(e):void 0;if(o&&!Ya(o.address))throw new _f({address:o.address});if(i&&!Ya(i))throw new _f({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new $0e;if(r&&r>V0e)throw new nI({maxFeePerGas:r});if(s&&r&&s>r)throw new rI({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function wb(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return zc(e)}class K0e extends pe{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class ZL extends pe{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Y0e extends pe{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${_o(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class HK extends pe{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const GK={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function qK(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?zc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?zc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?GK[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=Q0e(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function Q0e(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function VK(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:qK(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Bl(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?nt(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new HK({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||VK)(c)}async function XL(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function J0e(t,e){return KK(t,e)}async function KK(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await ut(t,Bl,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return ra(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):ut(t,Bl,"getBlock")({}),ut(t,XL,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new ZL;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function Z0e(t,e){return yD(t,e)}async function yD(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new K0e;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await ut(t,Bl,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new ZL;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await KK(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await ut(t,XL,"getGasPrice")({}))}}class X0e extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=s1({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${YL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${_o(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${_o(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${_o(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function ewe(t,{docsPath:e,...n}){const r=(()=>{const s=sT(t,n);return s instanceof r1?t:s})();return new X0e(r,{docsPath:e,...n})}class twe extends pe{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class nwe extends pe{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Y8(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function rwe(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=Y8(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=Y8(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Q8(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new M8({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new M8({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function swe(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=nt(e)),n!==void 0&&(o.nonce=nt(n)),r!==void 0&&(o.state=Q8(r)),s!==void 0){if(o.state)throw new nwe;o.stateDiff=Q8(s)}return o}function eU(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Ya(n,{strict:!1}))throw new _f({address:n});if(e[n])throw new twe({address:n});e[n]=swe(r)}return e}async function tU(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?nt(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function oT(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Ur(n):void 0;try{let B=function(R){const{block:$,request:k,rpcStateOverride:M}=R;return t.request({method:"eth_estimateGas",params:M?[k,$??"latest",M]:$?[k,$]:[k]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,value:A,stateOverride:_,...I}=await i1(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),N=(typeof d=="bigint"?nt(d):void 0)||h,S=eU(_),O=await(async()=>{if(I.to)return I.to;if(c&&c.length>0)return await $K({authorization:c[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`")})})();fm(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,G=(P||yb)({...iT(I,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:O,value:A});let T=BigInt(await B({block:N,request:G,rpcStateOverride:S}));if(c){const R=await tU(t,{address:G.from}),$=await Promise.all(c.map(async k=>{const{address:M}=k,W=await B({block:N,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:M,value:nt(R)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(W)}));T+=$.reduce((k,M)=>k+M,0n)}return T}catch(a){throw ewe(a,{...e,account:r,chain:t.chain})}}async function nU(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?nt(r):n]},{dedupe:!!r});return zc(s)}function YK(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>qa(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>ls(i))}function QK(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>qa(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>qa(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>ls(o))}function iwe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function owe(t,e,n){return t&e^~t&n}function awe(t,e,n){return t&e^t&n^e&n}class cwe extends WL{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=kP(this.buffer)}update(e){Iw(this),e=t1(e),Gc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=kP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Iw(this),vK(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Nw(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;iwe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=kP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Pd=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lwe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Od=new Uint32Array(64);let uwe=class extends cwe{constructor(e=32){super(64,e,8,!1),this.A=Pd[0]|0,this.B=Pd[1]|0,this.C=Pd[2]|0,this.D=Pd[3]|0,this.E=Pd[4]|0,this.F=Pd[5]|0,this.G=Pd[6]|0,this.H=Pd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Od[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Od[d-15],f=Od[d-2],p=nl(h,7)^nl(h,18)^h>>>3,g=nl(f,17)^nl(f,19)^f>>>10;Od[d]=g+Od[d-7]+p+Od[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=nl(a,6)^nl(a,11)^nl(a,25),f=u+h+owe(a,c,l)+lwe[d]+Od[d]|0,g=(nl(r,2)^nl(r,13)^nl(r,22))+awe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Nw(Od)}destroy(){this.set(0,0,0,0,0,0,0,0),Nw(this.buffer)}};const JK=CK(()=>new uwe),dwe=JK;function hwe(t,e){return dwe(Yl(t,{strict:!1})?gb(t):t)}function fwe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=hwe(e);return s.set([n],0),r==="bytes"?s:ls(s)}function pwe(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(fwe({commitment:i,to:r,version:n}));return s}const J8=6,ZK=32,rU=4096,XK=ZK*rU,Z8=XK*J8-1-1*rU*J8;class gwe extends pe{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class mwe extends pe{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function ywe(t){const e=typeof t.data=="string"?qa(t.data):t.data,n=Mr(e);if(!n)throw new mwe;if(n>Z8)throw new gwe({maxSize:Z8,size:n});const r=[];let s=!0,i=0;for(;s;){const o=KL(new Uint8Array(XK));let a=0;for(;a<rU;){const c=e.slice(i,i+(ZK-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>ls(o.bytes))}function wwe(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??ywe({data:e}),i=t.commitments??YK({blobs:s,kzg:n,to:r}),o=t.proofs??QK({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function bwe(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new B0e({transaction:t})}const eY=["blobVersionedHashes","chainId","fees","gas","nonce","type"],X8=new Map;async function i1(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=eY,type:u}=e,d=n&&Ur(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await ut(t,Bl,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await ut(t,wb,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await ut(t,nU,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=YK({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=pwe({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=QK({blobs:r,commitments:y,kzg:o}),v=wwe({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=bwe(h)}catch{let y=X8.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",X8.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await yD(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new Y0e({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new ZL;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await yD(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await ut(t,oT,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),fm(h),delete h.parameters,h}async function sU(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const UP=new nT(128);async function o1(t,e){var b,v,A,_;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new dm({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?Ur(n):null;try{fm(e);const I=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await $K({authorization:i[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let x;r!==null&&(x=await ut(t,wb,"getChainId")({}),FK({currentChainId:x,chain:r}));const N=(A=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:A.format,O=(N||yb)({...iT(w,{format:N}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:I,type:p,value:g}),P=UP.get(t.uid),F=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:F,params:[O]},{retryCount:0})}catch(G){if(P===!1)throw G;const B=G;if(B.name==="InvalidInputRpcError"||B.name==="InvalidParamsRpcError"||B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(T=>(UP.set(t.uid,!0),T)).catch(T=>{const R=T;throw R.name==="MethodNotFoundRpcError"||R.name==="MethodNotSupportedRpcError"?(UP.set(t.uid,!1),B):R});throw B}}if((y==null?void 0:y.type)==="local"){const x=await ut(t,i1,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...eY,"sidecars"],type:p,value:g,...w,to:I}),N=(_=r==null?void 0:r.serializers)==null?void 0:_.transaction,S=await y.signTransaction(x,{serializer:N});return await ut(t,sU,"sendRawTransaction")({serializedTransaction:S})}throw(y==null?void 0:y.type)==="smart"?new OS({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new OS({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(I){throw I instanceof OS?I:zK(I,{...e,account:y,chain:e.chain||void 0})}}function vwe(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=rT({abi:n,args:r,bytecode:s});return o1(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const wD=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],bD=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],tY=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],nY=[...tY,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Ewe=[...tY,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],e4=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],t4=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],n4=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function Cwe(t,e={}){typeof e.size<"u"&&Ja(t,{size:e.size});const n=ls(t,e);return ra(n,e)}function _we(t,e={}){let n=t;if(typeof e.size<"u"&&(Ja(n,{size:e.size}),n=zl(n)),n.length>1||n[0]>1)throw new dye(n);return!!n[0]}function ed(t,e={}){typeof e.size<"u"&&Ja(t,{size:e.size});const n=ls(t,e);return zc(n,e)}function Awe(t,e={}){let n=t;return typeof e.size<"u"&&(Ja(n,{size:e.size}),n=zl(n,{dir:"right"})),new TextDecoder().decode(n)}function a1(t,e){const n=typeof e=="string"?qa(e):e,r=KL(n);if(Mr(n)===0&&t.length>0)throw new e1;if(Mr(e)&&Mr(e)<32)throw new gK({data:typeof e=="string"?e:ls(e),params:t,size:Mr(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=t0(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function t0(t,e,{staticPosition:n}){const r=VL(e.type);if(r){const[s,i]=r;return xwe(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Rwe(t,e,{staticPosition:n});if(e.type==="address")return Swe(t);if(e.type==="bool")return Iwe(t);if(e.type.startsWith("bytes"))return Nwe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Twe(t,e);if(e.type==="string")return Pwe(t,{staticPosition:n});throw new kye(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const r4=32,vD=32;function Swe(t){const e=t.readBytes(32);return[n1(ls(OK(e,-20))),32]}function xwe(t,e,{length:n,staticPosition:r}){if(!n){const o=ed(t.readBytes(vD)),a=r+o,c=a+r4;t.setPosition(a);const l=ed(t.readBytes(r4)),u=kC(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=t0(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(kC(e)){const o=ed(t.readBytes(vD)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=t0(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=t0(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Iwe(t){return[_we(t.readBytes(32),{size:32}),32]}function Nwe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=ed(t.readBytes(32));t.setPosition(n+o);const a=ed(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[ls(c),32]}return[ls(t.readBytes(Number.parseInt(s),32)),32]}function Twe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?Cwe(s,{signed:n}):ed(s,{signed:n}),32]}function Rwe(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(kC(e)){const o=ed(t.readBytes(vD)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=t0(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=t0(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function Pwe(t,{staticPosition:e}){const n=ed(t.readBytes(32)),r=e+n;t.setPosition(r);const s=ed(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Awe(zl(i));return t.setPosition(e+32),[o,32]}function kC(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(kC);const n=VL(t.type);return!!(n&&kC({...t,type:n[1]}))}const Owe=t=>zs(gb(t));function kwe(t){return Owe(t)}const Dwe="1.0.8";let la=class ED extends Error{constructor(e,n={}){var o;const r=n.cause instanceof ED?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof ED&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Dwe}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Cd(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const rY=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,sY=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,iY=/^\(.+?\).*?$/,s4=/^tuple(?<array>(\[(\d*)\])*)$/;function CD(t){let e=t.type;if(s4.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=CD(i),s<n-1&&(e+=", ")}const r=Cd(s4,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,CD({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function cv(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=CD(s),r!==n-1&&(e+=", ")}return e}function sI(t){var e;return t.type==="function"?`function ${t.name}(${cv(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${cv(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${cv(t.inputs)})`:t.type==="error"?`error ${t.name}(${cv(t.inputs)})`:t.type==="constructor"?`constructor(${cv(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const oY=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Mwe(t){return oY.test(t)}function Lwe(t){return Cd(oY,t)}const aY=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Uwe(t){return aY.test(t)}function $we(t){return Cd(aY,t)}const cY=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Bwe(t){return cY.test(t)}function Fwe(t){return Cd(cY,t)}const lY=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function iU(t){return lY.test(t)}function jwe(t){return Cd(lY,t)}const uY=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Wwe(t){return uY.test(t)}function zwe(t){return Cd(uY,t)}const dY=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Hwe(t){return dY.test(t)}function Gwe(t){return Cd(dY,t)}const qwe=/^receive\(\) external payable$/;function Vwe(t){return qwe.test(t)}const Kwe=new Set(["indexed"]),_D=new Set(["calldata","memory","storage"]);class Ywe extends la{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Qwe extends la{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Jwe extends la{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Zwe extends la{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Xwe extends la{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class ebe extends la{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class tbe extends la{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class nbe extends la{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class bb extends la{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class rbe extends la{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class sbe extends la{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class ibe extends la{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class obe extends la{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function abe(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const $P=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function AD(t,e={}){if(Bwe(t))return cbe(t,e);if(Uwe(t))return lbe(t,e);if(Mwe(t))return ube(t,e);if(Wwe(t))return dbe(t,e);if(Hwe(t))return hbe(t);if(Vwe(t))return{type:"receive",stateMutability:"payable"};throw new rbe({signature:t})}function cbe(t,e={}){const n=Fwe(t);if(!n)throw new bb({signature:t,type:"function"});const r=Pc(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Mg(r[a],{modifiers:_D,structs:e,type:"function"}));const o=[];if(n.returns){const a=Pc(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Mg(a[l],{modifiers:_D,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function lbe(t,e={}){const n=$we(t);if(!n)throw new bb({signature:t,type:"event"});const r=Pc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Mg(r[o],{modifiers:Kwe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function ube(t,e={}){const n=Lwe(t);if(!n)throw new bb({signature:t,type:"error"});const r=Pc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Mg(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function dbe(t,e={}){const n=zwe(t);if(!n)throw new bb({signature:t,type:"constructor"});const r=Pc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Mg(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function hbe(t){const e=Gwe(t);if(!e)throw new bb({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const fbe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,pbe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,gbe=/^u?int$/;function Mg(t,e){var d,h;const n=abe(t,e==null?void 0:e.type,e==null?void 0:e.structs);if($P.has(n))return $P.get(n);const r=iY.test(t),s=Cd(r?pbe:fbe,t);if(!s)throw new Zwe({param:t});if(s.name&&ybe(s.name))throw new Xwe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Pc(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(Mg(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(gbe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!hY(c))throw new Jwe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new ebe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(_D.has(s.modifier)&&!wbe(c,!!s.array))throw new tbe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return $P.set(n,u),u}function Pc(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Pc(a,[...e,n.trim()]):Pc(a,e,`${n}${o}`,r);case"(":return Pc(a,e,`${n}${o}`,r+1);case")":return Pc(a,e,`${n}${o}`,r-1);default:return Pc(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new obe({current:n,depth:r});return e.push(n.trim()),e}function hY(t){return t==="address"||t==="bool"||t==="function"||t==="string"||rY.test(t)||sY.test(t)}const mbe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function ybe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||rY.test(t)||sY.test(t)||mbe.test(t)}function wbe(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function fY(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!iU(a))continue;const c=jwe(a);if(!c)throw new bb({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Mg(p,{type:"struct"});u.push(g)}if(!u.length)throw new sbe({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=pY(c,e)}return r}const bbe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function pY(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(iY.test(o.type))r.push(o);else{const c=Cd(bbe,o.type);if(!(c!=null&&c.type))throw new nbe({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new ibe({type:u});r.push({...o,type:`tuple${l??""}`,components:pY(e[u]??[],e,new Set([...n,u]))})}else if(hY(u))r.push(o);else throw new Qwe({type:u})}}return r}function gY(t){const e=fY(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];iU(i)||n.push(AD(i,e))}return n}function i4(t){let e;if(typeof t=="string")e=AD(t);else{const n=fY(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!iU(i)){e=AD(i,n);break}}}if(!e)throw new Ywe({signature:t});return e}function vbe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new pe("Unable to normalize signature.");return s}const Ebe=t=>{const e=typeof t=="string"?t:sI(t);return vbe(e)};function mY(t){return kwe(Ebe(t))}const aT=mY,c1=t=>Tw(mY(t),0,4);function pm(t){const{abi:e,args:n=[],name:r}=t,s=Yl(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?c1(a)===r:a.type==="event"?aT(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?SD(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=yY(a.inputs,o.inputs,n);if(l)throw new Rye({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function SD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ya(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>SD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>SD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function yY(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return yY(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ya(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ya(n[r],{strict:!1}):!1)return o}}const BP="/docs/contract/decodeFunctionResult";function gm(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=pm({abi:e,args:n,name:r});if(!a)throw new xw(r,{docsPath:BP});i=a}if(i.type!=="function")throw new xw(void 0,{docsPath:BP});if(!i.outputs)throw new wK(i.name,{docsPath:BP});const o=a1(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const o4="/docs/contract/encodeFunctionData";function Cbe(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=pm({abi:e,args:n,name:r});if(!i)throw new xw(r,{docsPath:o4});s=i}if(s.type!=="function")throw new xw(void 0,{docsPath:o4});return{abi:[s],functionName:c1(Hc(s))}}function Za(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:Cbe(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Uf(s.inputs,e??[]):void 0;return mb([i,o??"0x"])}function vb({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new cD({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new cD({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const wY={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},bY={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},_be={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Abe(t){const{abi:e,data:n}=t,r=Tw(n,0,4);if(r==="0x")throw new e1;const i=[...e||[],bY,_be].find(o=>o.type==="error"&&r===c1(Hc(o)));if(!i)throw new mK(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?a1(i.inputs,Tw(n,4)):void 0,errorName:i.name}}function vY({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?as(e[i]):e[i]}`).join(", ")})`}class EY extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?Ur(n):void 0;let g=s1({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${YL(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${_o(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${_o(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${_o(l)} gwei`,nonce:u});f&&(g+=`
${rwe(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class CY extends pe{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=pm({abi:n,args:r,name:o}),l=c?vY({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Hc(c,{includeName:!0}):void 0,d=s1({address:s&&W0e(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class xD extends pe{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Abe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=wY[f]}else{const f=u?Hc(u,{includeName:!0}):void 0,p=u&&h?vY({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof mK&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class Sbe extends pe{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class xbe extends pe{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class cT extends pe{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function oU(t,e){var r,s,i,o,a,c;if(!(t instanceof pe))return!1;const n=t.walk(l=>l instanceof xD);return n instanceof xD?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===wY[50]):!1}function Ibe(t){const{abi:e,data:n}=t,r=Tw(n,0,4),s=e.find(i=>i.type==="function"&&r===c1(Hc(i)));if(!s)throw new Tye(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?a1(s.inputs,Tw(n,4)):void 0}}const FP="/docs/contract/encodeErrorResult";function a4(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=pm({abi:e,args:r,name:n});if(!c)throw new $8(n,{docsPath:FP});s=c}if(s.type!=="error")throw new $8(void 0,{docsPath:FP});const i=Hc(s),o=c1(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Iye(s.name,{docsPath:FP});a=Uf(s.inputs,r)}return mb([o,a])}const jP="/docs/contract/encodeFunctionResult";function Nbe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=pm({abi:e,name:n});if(!o)throw new xw(n,{docsPath:jP});s=o}if(s.type!=="function")throw new xw(void 0,{docsPath:jP});if(!s.outputs)throw new wK(s.name,{docsPath:jP});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new bK(r)})();return Uf(s.outputs,i)}const aU="x-batch-gateway:true";async function Tbe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=Ibe({abi:bD,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(aU)?await Tbe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=Rbe(c)}})),Nbe({abi:bD,functionName:"query",result:[s,i]})}function Rbe(t){return t.name==="HttpRequestError"&&t.status?a4({abi:bD,errorName:"HttpError",args:[t.status,t.shortMessage]}):a4({abi:[bY],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function _Y(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Yl(e)?e:null}function kS(t){let e=new Uint8Array(32).fill(0);if(!t)return ls(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=_Y(n[r]),i=s?gb(s):zs(yg(n[r]),"bytes");e=zs(Ka([e,i]),"bytes")}return ls(e)}function Pbe(t){return`[${t.slice(2)}]`}function Obe(t){const e=new Uint8Array(32).fill(0);return t?_Y(t)||zs(yg(t)):ls(e)}function lT(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(yg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=yg(s[i]);o.byteLength>255&&(o=yg(Pbe(Obe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const kbe=3;function Lg(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof cT?t:t instanceof pe?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof e1?new Sbe({functionName:i}):[kbe,kg.code].includes(c)&&(l||u||d||h)?new xD({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof JL?u:h??d}):t;return new CY(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cU=BigInt(0),ID=BigInt(1);function iI(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function xA(t){const e=t.toString(16);return e.length&1?"0"+e:e}function AY(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?cU:BigInt("0x"+t)}function uT(t){return AY(yC(t))}function SY(t){return Gc(t),AY(yC(Uint8Array.from(t).reverse()))}function lU(t,e){return jL(t.toString(16).padStart(e*2,"0"))}function xY(t,e){return lU(t,e).reverse()}function xa(t,e,n){let r;if(typeof e=="string")try{r=jL(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(FL(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const WP=t=>typeof t=="bigint"&&cU<=t;function Dbe(t,e,n){return WP(t)&&WP(e)&&WP(n)&&e<=t&&t<n}function Mbe(t,e,n,r){if(!Dbe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Lbe(t){let e;for(e=0;t>cU;t>>=ID,e+=1);return e}const dT=t=>(ID<<BigInt(t))-ID;function Ube(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return Np(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function uU(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function c4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const $be="0.1.1";function Bbe(){return $be}let Hr=class ND extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof ND){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof ND&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Bbe()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return IY(this,e)}};function IY(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?IY(t.cause,e):e?null:t}const Fbe="#__bigint";function jbe(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+Fbe:s,n)}function Wbe(t,e){if(u4(t)>e)throw new Zbe({givenSize:u4(t),maxSize:e})}const lu={zero:48,nine:57,A:65,F:70,a:97,f:102};function l4(t){if(t>=lu.zero&&t<=lu.nine)return t-lu.zero;if(t>=lu.A&&t<=lu.F)return t-(lu.A-10);if(t>=lu.a&&t<=lu.f)return t-(lu.a-10)}function zbe(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new Xbe({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function dU(t,e){if(Qa(t)>e)throw new sve({givenSize:Qa(t),maxSize:e})}function Hbe(t,e){if(typeof e=="number"&&e>0&&e>Qa(t)-1)throw new OY({offset:e,position:"start",size:Qa(t)})}function Gbe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Qa(t)!==n-e)throw new OY({offset:n,position:"end",size:Qa(t)})}function NY(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new ive({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const qbe=new TextEncoder;function Vbe(t){return t instanceof Uint8Array?t:typeof t=="string"?Ybe(t):Kbe(t)}function Kbe(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Ybe(t,e={}){const{size:n}=e;let r=t;n&&(dU(t,n),r=$g(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=l4(s.charCodeAt(c++)),u=l4(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new Hr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function Qbe(t,e={}){const{size:n}=e,r=qbe.encode(t);return typeof n=="number"?(Wbe(r,n),Jbe(r,n)):r}function Jbe(t,e){return zbe(t,{dir:"right",size:e})}function u4(t){return t.length}let Zbe=class extends Hr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Xbe=class extends Hr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const eve=new TextEncoder,tve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function nve(t,e={}){const{strict:n=!1}=e;if(!t)throw new d4(t);if(typeof t!="string")throw new d4(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new h4(t);if(!t.startsWith("0x"))throw new h4(t)}function Jl(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function TY(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(dU(n,e.size),Ug(n,e.size)):n}function RY(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=tve[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(dU(r,e.size),$g(r,e.size)):r}function Ti(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new PY({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ug(c,r):c}function hU(t,e={}){return RY(eve.encode(t),e)}function Ug(t,e){return NY(t,{dir:"left",size:e})}function $g(t,e){return NY(t,{dir:"right",size:e})}function fU(t,e,n,r={}){const{strict:s}=r;Hbe(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Gbe(i,e,n),i}function Qa(t){return Math.ceil((t.length-2)/2)}function rve(t,e={}){const{strict:n=!1}=e;try{return nve(t,{strict:n}),!0}catch{return!1}}let PY=class extends Hr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class d4 extends Hr{constructor(e){super(`Value \`${typeof e=="object"?jbe(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class h4 extends Hr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let sve=class extends Hr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class OY extends Hr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let ive=class extends Hr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function ove(t){return{address:t.address,amount:Ti(t.amount),index:Ti(t.index),validatorIndex:Ti(t.validatorIndex)}}function kY(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Ti(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Ti(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Ti(t.gasLimit)},...typeof t.number=="bigint"&&{number:Ti(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Ti(t.prevRandao)},...typeof t.time=="bigint"&&{time:Ti(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(ove)}}}const ave="0x82ad56cb",DY="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",cve="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",lve="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function MY(t,{docsPath:e,...n}){const r=(()=>{const s=sT(t,n);return s instanceof r1?t:s})();return new EY(r,{docsPath:e,...n})}function pU(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const zP=new Map;function LY({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>zP.delete(e),a=()=>c().map(({args:u})=>u),c=()=>zP.get(e)||[],l=u=>zP.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=pU();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function l1(t,e){var G,B,T,R;const{account:n=t.account,authorizationList:r,batch:s=!!((G=t.batch)!=null&&G.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:A,value:_,stateOverride:I,...x}=e,N=n?Ur(n):void 0;if(u&&(h||f))throw new pe("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new pe("Cannot provide both `code` & `to` as parameters.");const S=u&&d,O=h&&f&&A&&d,P=S||O,F=S?hve({code:u,data:d}):O?fve({data:d,factory:h,factoryData:f,to:A}):d;try{fm(e);const k=(typeof i=="bigint"?nt(i):void 0)||o,M=l?kY(l):void 0,W=eU(I),K=(R=(T=(B=t.chain)==null?void 0:B.formatters)==null?void 0:T.transactionRequest)==null?void 0:R.format,le=(K||yb)({...iT(x,{format:K}),from:N==null?void 0:N.address,accessList:a,authorizationList:r,blobs:c,data:F,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:P?void 0:A,value:_});if(s&&uve({request:le})&&!W&&!M)try{return await dve(t,{...le,blockNumber:i,blockTag:o})}catch(ue){if(!(ue instanceof BK)&&!(ue instanceof cD))throw ue}const oe=(()=>{const ue=[le,k];return W&&M?[...ue,W,M]:W?[...ue,W]:M?[...ue,{},M]:ue})(),ae=await t.request({method:"eth_call",params:oe});return ae==="0x"?{data:void 0}:{data:ae}}catch($){const k=pve($),{offchainLookup:M,offchainLookupSignature:W}=await hi(async()=>{const{offchainLookup:K,offchainLookupSignature:ne}=await import("./ccip-Mv6xV7eX.js");return{offchainLookup:K,offchainLookupSignature:ne}},[]);if(t.ccipRead!==!1&&(k==null?void 0:k.slice(0,10))===W&&A)return{data:await M(t,{data:k,to:A})};throw P&&(k==null?void 0:k.slice(0,10))==="0x101bb98d"?new xbe({factory:h}):MY($,{...e,account:N,chain:t.chain})}}function uve({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(ave)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function dve(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new BK;l=vb({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?nt(s):void 0)||i,{schedule:h}=LY({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async w=>{const y=w.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),b=Za({abi:wD,args:[y],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return gm({abi:wD,args:[y],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new cT({data:f});return f==="0x"?{data:void 0}:{data:f}}function hve(t){const{code:e,data:n}=t;return rT({abi:gY(["constructor(bytes, bytes)"]),bytecode:DY,args:[e,n]})}function fve(t){const{data:e,factory:n,factoryData:r,to:s}=t;return rT({abi:gY(["constructor(address, bytes, address, bytes)"]),bytecode:cve,args:[s,e,n,r]})}function pve(t){var n;if(!(t instanceof pe))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Zl(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Za({abi:n,args:s,functionName:i});try{const{data:c}=await ut(t,l1,"call")({...o,data:a,to:r});return gm({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Lg(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function gve(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return vb({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Za({abi:t4,functionName:"addr",...s!=null?{args:[kS(i),BigInt(s)]}:{args:[kS(i)]}}),h={address:l,abi:nY,functionName:"resolve",args:[Va(lT(i)),d,o??[aU]],blockNumber:n,blockTag:r},p=await ut(t,Zl,"readContract")(h);if(p[0]==="0x")return null;const g=gm({abi:t4,args:s!=null?[kS(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||zl(g)==="0x00"?null:g}catch(d){if(a)throw d;if(oU(d,"resolve"))return null;throw d}}class mve extends pe{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class lv extends pe{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class gU extends pe{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class yve extends pe{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const wve=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,bve=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,vve=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,Eve=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function Cve(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function f4(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function UY({uri:t,gatewayUrls:e}){const n=vve.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=f4(e==null?void 0:e.ipfs,"https://ipfs.io"),s=f4(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(wve),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||bve.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(Eve,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new gU({uri:t})}function $Y(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new mve({data:t});return t.image||t.image_url||t.image_data}async function _ve({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await mU({gatewayUrls:t,uri:$Y(n)})}catch{throw new gU({uri:e})}}async function mU({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=UY({uri:e,gatewayUrls:t});if(r||await Cve(n))return n;throw new gU({uri:e})}function Ave(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new lv({reason:"Only EIP-155 supported"});if(!o)throw new lv({reason:"Chain ID not found"});if(!c)throw new lv({reason:"Contract address not found"});if(!s)throw new lv({reason:"Token ID not found"});if(!a)throw new lv({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function Sve(t,{nft:e}){if(e.namespace==="erc721")return Zl(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Zl(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new yve({namespace:e.namespace})}async function xve(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?Ive(t,{gatewayUrls:e,record:n}):mU({uri:n,gatewayUrls:e})}async function Ive(t,{gatewayUrls:e,record:n}){const r=Ave(n),s=await Sve(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=UY({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return mU({uri:$Y(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),_ve({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function BY(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return vb({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:nY,functionName:"resolve",args:[Va(lT(i)),Za({abi:e4,functionName:"text",args:[kS(i),s]}),o??[aU]],blockNumber:n,blockTag:r},f=await ut(t,Zl,"readContract")(d);if(f[0]==="0x")return null;const p=gm({abi:e4,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(oU(d,"resolve"))return null;throw d}}async function Nve(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await ut(t,BY,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await xve(t,{record:c,gatewayUrls:r})}catch{return null}}async function FY(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=vb({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:Ewe,functionName:"reverse",args:[Va(lT(c))],blockNumber:n,blockTag:r},u=ut(t,Zl,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(oU(l,"reverse"))return null;throw l}}async function Tve(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return vb({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await ut(t,Zl,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Va(lT(s))],blockNumber:n,blockTag:r});return c}async function jY(t,e){var w,y,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?Ur(n):void 0;try{fm(e);const A=(typeof r=="bigint"?nt(r):void 0)||s,_=(b=(y=(w=t.chain)==null?void 0:w.formatters)==null?void 0:y.transactionRequest)==null?void 0:b.format,x=(_||yb)({...iT(p,{format:_}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),N=await t.request({method:"eth_createAccessList",params:[x,A]});return{accessList:N.accessList,gasUsed:BigInt(N.gasUsed)}}catch(v){throw MY(v,{...e,account:g,chain:t.chain})}}function hT(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function Rve(t){const e=hT(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class Pve extends pe{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const p4="/docs/contract/encodeEventTopics";function u1(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=pm({abi:e,name:n});if(!l)throw new B8(n,{docsPath:p4});s=l}if(s.type!=="event")throw new B8(void 0,{docsPath:p4});const i=Hc(s),o=aT(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>g4({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?g4({param:d,value:u[h]}):null))??[])}return[o,...a]}function g4({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return zs(gb(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new Pve(t.type);return Uf([t],[e])}async function WY(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=hT(t,{method:"eth_newFilter"}),u=i?u1({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?nt(o):o,toBlock:typeof c=="bigint"?nt(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function zY(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=hT(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>u1({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?nt(i):i,toBlock:typeof a=="bigint"?nt(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function HY(t){const e=hT(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Ove(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Za({abi:n,args:s,functionName:i});try{return await ut(t,oT,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Ur(a.account):void 0;throw Lg(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function kve(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const Dve=new Map,Mve=new Map;function Lve(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Dve),r=e(t,Mve);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Uve(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Lve(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const $ve=t=>`blockNumber.${t}`;async function d1(t,{cacheTime:e=t.cacheTime}={}){const n=await Uve(()=>t.request({method:"eth_blockNumber"}),{cacheKey:$ve(t.uid),cacheTime:e});return BigInt(n)}async function Bve(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?nt(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),zc(i)}async function m4(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?nt(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function fT(t,e){if(!Ya(t,{strict:!1}))throw new _f({address:t});if(!Ya(e,{strict:!1}))throw new _f({address:e});return t.toLowerCase()===e.toLowerCase()}const y4="/docs/contract/decodeEventLog";function yU(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new Nye({docsPath:y4});const c=e.find(g=>g.type==="event"&&o===aT(Hc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new yK(o,{docsPath:y4});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,y]=f[g],b=a[g];if(!b)throw new tT({abiItem:c,param:w});h[d?y:w.name||y]=Fve({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=a1(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof gK||g instanceof MK?new gC({abiItem:c,data:n,params:p,size:Mr(n)}):g}else if(i)throw new gC({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Fve({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(a1([t],e)||[])[0]}function wU(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===aT(u));if(!c)return null;const l=yU({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!jve({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof yK)return null;if(c instanceof gC||c instanceof tT){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function jve(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?fT(o,a):i.type==="string"||i.type==="bytes"?zs(gb(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function pd(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function bU(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>u1({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?nt(r):r,toBlock:typeof s=="bigint"?nt(s):s}]});const f=h.map(p=>pd(p));return u?wU({abi:u,args:a,logs:f,strict:l}):f}async function GY(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?pm({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return ut(t,bU,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class Wve extends pe{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function zve(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await ut(t,Zl,"readContract")({abi:Hve,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new Wve({address:n}):o}}const Hve=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Gve(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function qve(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?nt(n):void 0,o=await t.request({method:"eth_feeHistory",params:[nt(e),i||r,s]},{dedupe:!!i});return Gve(o)}async function pT(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>pd(i));return!("abi"in e)||!e.abi?s:wU({abi:e.abi,logs:s,strict:n})}async function Vve(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>pd(i));return e.abi?wU({abi:e.abi,logs:s,strict:n}):s}async function Kve(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?nt(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function gT(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?nt(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,nt(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,nt(i)]},{dedupe:!!a}),!c)throw new jK({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||qK)(c)}async function Yve(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([ut(t,d1,"getBlockNumber")({}),e?ut(t,gT,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const qY={"0x0":"reverted","0x1":"success"};function Qve(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>pd(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?zc(t.transactionIndex):null,status:t.status?qY[t.status]:null,type:t.type?GK[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function TD(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new WK({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Qve)(n)}async function VY(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=vb({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:A,args:_,functionName:I}=l[b];try{const x=Za({abi:v,args:_,functionName:I});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:A}]}catch(x){const N=Lg(x,{abi:v,address:A,args:_,docsPath:"/docs/contract/multicall",functionName:I,sender:n});if(!r)throw N;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(b=>ut(t,Zl,"readContract")({abi:wD,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let _=0;_<h[b].length;_++)w.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let _=0;_<A.length;_++){const{returnData:I,success:x}=A[_],{callData:N}=h[b][_],{abi:S,address:O,functionName:P,args:F}=l[w.length];try{if(N==="0x")throw new e1;if(!x)throw new cT({data:I});const G=gm({abi:S,args:F,data:I,functionName:P});w.push(r?{result:G,status:"success"}:G)}catch(G){const B=Lg(G,{abi:S,address:O,args:F,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw B;w.push({error:B,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new pe("multicall results mismatch");return w}async function RD(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?kY(h.blockOverrides):void 0,p=h.calls.map(w=>{const y=w,b=y.account?Ur(y.account):void 0,v=y.abi?Za(y):y.data,A={...y,data:y.dataSuffix?Ka([v||"0x",y.dataSuffix]):v,from:y.from??(b==null?void 0:b.address)};return fm(A),yb(A)}),g=h.stateOverrides?eU(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?nt(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...VK(h),calls:h.calls.map((p,g)=>{var O,P;const{abi:w,args:y,functionName:b,to:v}=s[f].calls[g],A=((O=p.error)==null?void 0:O.data)??p.returnData,_=BigInt(p.gasUsed),I=(P=p.logs)==null?void 0:P.map(F=>pd(F)),x=p.status==="0x1"?"success":"failure",N=w&&x==="success"&&A!=="0x"?gm({abi:w,data:A,functionName:b}):null,S=(()=>{var G;if(x==="success")return;let F;if(((G=p.error)==null?void 0:G.data)==="0x"?F=new e1:p.error&&(F=new cT(p.error)),!!F)return Lg(F,{abi:w??[],address:v??"0x",args:y,functionName:b??"<unknown>"})})();return{data:A,gasUsed:_,logs:I,status:x,...x==="success"?{result:N}:{error:S}}})}))}catch(c){const l=c,u=sT(l,{});throw u instanceof r1?l:u}}function KY(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=HL(Vbe(t));return n==="Bytes"?r:RY(r)}let Jve=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Zve={checksum:new Jve(8192)},HP=Zve.checksum,Xve=/^0x[a-fA-F0-9]{40}$/;function mT(t,e={}){const{strict:n=!0}=e;if(!Xve.test(t))throw new w4({address:t,cause:new tEe});if(n){if(t.toLowerCase()===t)return;if(eEe(t)!==t)throw new w4({address:t,cause:new nEe})}}function eEe(t){if(HP.has(t))return HP.get(t);mT(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=KY(Qbe(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return HP.set(t,s),s}function PD(t,e={}){const{strict:n=!0}=e??{};try{return mT(t,{strict:n}),!0}catch{return!1}}class w4 extends Hr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class tEe extends Hr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class nEe extends Hr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function OD(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Hr("Unable to normalize signature.");return s}function kD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return PD(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>kD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>kD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function YY(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return YY(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?PD(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?PD(n[r],{strict:!1}):!1)return o}}function QY(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?i4(t):t;return{...r,...n?{hash:Uy(r)}:{}}}function rEe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=rve(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?JY(l)===fU(e,0,4):l.type==="event"?Uy(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new DD({name:e});if(o.length===1)return{...o[0],...s?{hash:Uy(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:Uy(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?kD(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=YY(l.inputs,a.inputs,r);if(d)throw new iEe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new DD({name:e});return{...c,...s?{hash:Uy(c)}:{}}}function JY(t){return fU(Uy(t),0,4)}function sEe(t){const e=typeof t=="string"?t:sI(t);return OD(e)}function Uy(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:KY(hU(sEe(t)))}class iEe extends Hr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${OD(sI(e.abiItem))}\`, and`,`\`${n.type}\` in \`${OD(sI(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class DD extends Hr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const oEe=/^(.*)\[([0-9]*)\]$/,aEe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,ZY=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function cEe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(vU({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function vU({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=mEe(r.type);if(s){const[i,o]=s;return uEe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return gEe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return lEe(n,{checksum:t});if(r.type==="bool")return hEe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=ZY.exec(r.type)??[];return fEe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return dEe(n,{type:r.type});if(r.type==="string")return pEe(n);throw new nQ(r.type)}function EU(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Qa(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ti(e+s,{size:32})),r.push(a),s+=Qa(a)):n.push(a)}return Jl(...n,...r)}function lEe(t,e){const{checksum:n=!1}=e;return mT(t,{strict:n}),{dynamic:!1,encoded:Ug(t.toLowerCase())}}function uEe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new wEe(t);if(!i&&t.length!==r)throw new yEe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=vU({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=EU(a);if(i){const l=Ti(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Jl(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Jl(...a.map(({encoded:c})=>c))}}function dEe(t,{type:e}){const[,n]=e.split("bytes"),r=Qa(t);if(!n){let s=t;return r%32!==0&&(s=$g(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Jl(Ug(Ti(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new eQ({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:$g(t)}}function hEe(t){if(typeof t!="boolean")throw new Hr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Ug(TY(t))}}function fEe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new PY({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ti(t,{size:32,signed:e})}}function pEe(t){const e=hU(t),n=Math.ceil(Qa(e)/32),r=[];for(let s=0;s<n;s++)r.push($g(fU(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Jl($g(Ti(Qa(e),{size:32})),...r)}}function gEe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=vU({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?EU(i):Jl(...i.map(({encoded:o})=>o))}}function mEe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function XY(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new tQ({expectedLength:t.length,givenLength:e.length});const s=cEe({checksumAddress:r,parameters:t,values:e}),i=EU(s);return i.length===0?"0x":i}function MD(t,e){if(t.length!==e.length)throw new tQ({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(MD.encode(s,i))}return Jl(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return mT(c),Ug(c.toLowerCase(),s?32:0)}if(n==="string")return hU(r);if(n==="bytes")return r;if(n==="bool")return Ug(TY(r),s?32:1);const i=n.match(ZY);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return Ti(r,{size:s?32:d,signed:l==="int"})}const o=n.match(aEe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new eQ({expectedSize:Number.parseInt(l),value:r});return $g(r,s?32:0)}const a=n.match(oEe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Jl(...u)}throw new nQ(n)}t.encode=e})(MD||(MD={}));class yEe extends Hr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class eQ extends Hr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Qa(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class tQ extends Hr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class wEe extends Hr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class nQ extends Hr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function bEe(t,e){var s;const{bytecode:n,args:r}=e;return Jl(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?XY(t.inputs,r):"0x")}function vEe(t){return QY(t)}function EEe(t,...e){const{overloads:n}=t,r=n?CEe([t,...n],t.name,{args:e[0]}):t,s=_Ee(r),i=e.length>0?XY(r.inputs,e[0]):void 0;return i?Jl(s,i):s}function Wm(t,e={}){return QY(t,e)}function CEe(t,e,n){const r=rEe(t,e,n);if(r.type!=="function")throw new DD({name:e,type:"function"});return r}function _Ee(t){return JY(t)}const AEe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",rl="0x0000000000000000000000000000000000000000",IA=new nT(8192);function SEe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(IA.get(n))return IA.get(n);const r=t().finally(()=>IA.delete(n));return IA.set(n,r),r}async function oI(t){return new Promise(e=>setTimeout(e,t))}function aI(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await oI(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function xEe(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Rp(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Rp(new Error("method not supported"),{method:l});const u=s?Sw(`${c}.${as(n)}`):void 0;return SEe(()=>aI(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case wC.code:throw new wC(f);case bC.code:throw new bC(f);case vC.code:throw new vC(f,{method:n.method});case EC.code:throw new EC(f);case kg.code:throw new kg(f);case Dg.code:throw new Dg(f);case CC.code:throw new CC(f);case af.code:throw new af(f);case Rw.code:throw new Rw(f);case Rp.code:throw new Rp(f,{method:n.method});case Pw.code:throw new Pw(f);case _C.code:throw new _C(f);case Xr.code:throw new Xr(f);case AC.code:throw new AC(f);case SC.code:throw new SC(f);case xC.code:throw new xC(f);case IC.code:throw new IC(f);case Ql.code:throw new Ql(f);case Ow.code:throw new Ow(f);case NC.code:throw new NC(f);case TC.code:throw new TC(f);case RC.code:throw new RC(f);case PC.code:throw new PC(f);case OC.code:throw new OC(f);case kw.code:throw new kw(f);case 5e3:throw new Xr(f);default:throw h instanceof pe?h:new H0e(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof wE){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>IEe(h)}),{enabled:s,id:u})}}function IEe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Pw.code||t.code===kg.code:t instanceof wE&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function rQ(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function sQ(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function NEe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const b4=NEe();function TEe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await sQ(async({signal:p})=>{const g={...a,body:Array.isArray(r)?as(r.map(v=>({jsonrpc:"2.0",id:v.id??b4.take(),...v}))):as({jsonrpc:"2.0",id:r.id??b4.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),y=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new K8({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new wE({body:r,details:as(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof wE||h instanceof K8?h:new wE({body:r,cause:h,url:t})}}}}class REe extends pe{constructor({domain:e}){super(`Invalid domain "${as(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class PEe extends pe{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class OEe extends pe{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function kEe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:uQ({domain:e}),...t.types};lQ({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(DEe({domain:e,types:s})),r!=="EIP712Domain"&&i.push(iQ({data:n,primaryType:r,types:s})),zs(Ka(i))}function DEe({domain:t,types:e}){return iQ({data:t,primaryType:"EIP712Domain",types:e})}function iQ({data:t,primaryType:e,types:n}){const r=oQ({data:t,primaryType:e,types:n});return zs(r)}function oQ({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[MEe({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=cQ({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Uf(r,s)}function MEe({primaryType:t,types:e}){const n=Va(LEe({primaryType:t,types:e}));return zs(n)}function LEe({primaryType:t,types:e}){let n="";const r=aQ({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function aQ({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])aQ({primaryType:i.type,types:e},n);return n}function cQ({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},zs(oQ({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},zs(r)];if(n==="string")return[{type:"bytes32"},zs(Va(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>cQ({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},zs(Uf(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function UEe(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return as({domain:o,message:a,primaryType:r,types:s})}function lQ(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(kK);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,y]=h;nt(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!Ya(d))throw new _f({address:d});const f=u.match(p0e);if(f){const[g,w]=f;if(w&&Mr(d)!==Number.parseInt(w))throw new Pye({expectedSize:Number.parseInt(w),givenSize:Mr(d)})}const p=s[u];p&&($Ee(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new REe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new PEe({primaryType:r,types:s})}function uQ({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function $Ee(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new OEe({type:t})}const BEe=`Ethereum Signed Message:
`;function FEe(t){const e=typeof t=="string"?Sw(t):typeof t.raw=="string"?t.raw:ls(t.raw),n=Sw(`${BEe}${Mr(e)}`);return Ka([n,e])}function dQ(t,e){return zs(FEe(t),e)}const hQ="0x6492649264926492649264926492649264926492649264926492649264926492";function jEe(t){return tI(t,-32)===hQ}function WEe(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=mb([Uf([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),hQ]);return s==="hex"?i:qa(i)}class zEe extends pe{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function HEe(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new zEe({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const GEe="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function qEe(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Ur(e.account):void 0;if(o&&!l)throw new pe("`account` is required when `traceAssetChanges` is true");const u=l?bEe(vEe("constructor(bytes, bytes)"),{bytecode:DY,args:[GEe,EEe(Wm("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async k=>{if(!k.data&&!k.abi)return;const{accessList:M}=await jY(t,{account:l.address,...k,data:k.abi?Za(k):k.data});return M.map(({address:W,storageKeys:K})=>K.length>0?W:null)})).then(k=>k.flat().filter(Boolean)):[],h=await RD(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((k,M)=>({abi:[Wm("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:rl,nonce:M})),stateOverrides:[{address:rl,nonce:0}]}]:[],{calls:[...s,{}].map(k=>({...k,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((k,M)=>({abi:[Wm("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:rl,nonce:M})),stateOverrides:[{address:rl,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[Wm("function decimals() returns (uint256)")],functionName:"decimals",from:rl,nonce:M})),stateOverrides:[{address:rl,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[Wm("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:rl,nonce:M})),stateOverrides:[{address:rl,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[Wm("function symbol() returns (string)")],functionName:"symbol",from:rl,nonce:M})),stateOverrides:[{address:rl,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,w,y,b,v,A]=o?h:[],{calls:_,...I}=f,x=_.slice(0,-1)??[],N=(p==null?void 0:p.calls)??[],S=(g==null?void 0:g.calls)??[],O=[...N,...S].map(k=>k.status==="success"?ra(k.data):null),P=(w==null?void 0:w.calls)??[],F=(y==null?void 0:y.calls)??[],G=[...P,...F].map(k=>k.status==="success"?ra(k.data):null),B=((b==null?void 0:b.calls)??[]).map(k=>k.status==="success"?k.result:null),T=((A==null?void 0:A.calls)??[]).map(k=>k.status==="success"?k.result:null),R=((v==null?void 0:v.calls)??[]).map(k=>k.status==="success"?k.result:null),$=[];for(const[k,M]of G.entries()){const W=O[k];if(typeof M!="bigint"||typeof W!="bigint")continue;const K=B[k-1],ne=T[k-1],le=R[k-1],oe=k===0?{address:AEe,decimals:18,symbol:"ETH"}:{address:d[k-1],decimals:le||K?Number(K??1):void 0,symbol:ne??void 0};$.some(ae=>ae.token.address===oe.address)||$.push({token:oe,value:{pre:W,post:M,diff:M-W}})}return{assetChanges:$,block:I,results:x}}const GP=new Map,v4=new Map;let VEe=0;function gd(t,e,n){const r=++VEe,s=()=>GP.get(t)||[],i=()=>{const u=s();GP.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=v4.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(GP.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&v4.set(t,l),o}function Eb(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await oI(c);const l=async()=>{s&&(await t({unpoll:i}),await oI(r),l())};l()})(),i}function KEe(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=as(["watchBlocks",t.uid,e,n,r,u,c]);return gd(p,{onBlock:s,onError:i},g=>Eb(async()=>{var w;try{const y=await ut(t,Bl,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<y.number;b++){const v=await ut(t,Bl,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(g.onBlock(y,d),d=y)}catch(y){(w=g.onError)==null||w.call(g,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,w=()=>p=!1;return(async()=>{try{r&&ut(t,Bl,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:b}=await y.subscribe({params:["newHeads"],async onData(v){var _;if(!p)return;const A=await ut(t,Bl,"getBlock")({blockNumber:(_=v.result)==null?void 0:_.number,includeTransactions:u}).catch(()=>{});p&&(s(A,d),g=!1,d=A)},onError(v){i==null||i(v)}});w=b,p||w()}catch(y){i==null||i(y)}})(),()=>w()})()}function fQ(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=as(["watchBlockNumber",t.uid,e,n,o]);return gd(d,{onBlockNumber:r,onError:s},h=>Eb(async()=>{var f;try{const p=await ut(t,d1,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=as(["watchBlockNumber",t.uid,e,n]);return gd(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(y){var v;if(!f)return;const b=ra((v=y.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function yT(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function YEe(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=as(["watchEvent",e,n,r,t.uid,s,u,o]);return gd(w,{onLogs:c,onError:a},y=>{let b;o!==void 0&&(b=o-1n);let v,A=!1;const _=Eb(async()=>{var I;if(!A){try{v=await ut(t,zY,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}A=!0;return}try{let x;if(v)x=await ut(t,pT,"getFilterChanges")({filter:v});else{const N=await ut(t,d1,"getBlockNumber")({});b&&b!==N?x=await ut(t,bU,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:N}):x=[],b=N}if(x.length===0)return;if(r)y.onLogs(x);else for(const N of x)y.onLogs([N])}catch(x){v&&x instanceof Dg&&(A=!1),(I=y.onError)==null||I.call(y,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await ut(t,yT,"uninstallFilter")({filter:v}),_()}})})():(()=>{let w=!0,y=()=>w=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const I=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return I?I.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let A=[];v&&(A=[v.flatMap(x=>u1({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:_}=await b.subscribe({params:["logs",{address:e,topics:A}],onData(I){var N;if(!w)return;const x=I.result;try{const{eventName:S,args:O}=yU({abi:v??[],data:x.data,topics:x.topics,strict:f}),P=pd(x,{args:O,eventName:S});c([P])}catch(S){let O,P;if(S instanceof gC||S instanceof tT){if(d)return;O=S.abiItem.name,P=(N=S.abiItem.inputs)==null?void 0:N.some(G=>!("name"in G&&G.name))}const F=pd(x,{args:P?[]:{},eventName:O});c([F])}},onError(I){a==null||a(I)}});y=_,w||y()}catch(b){a==null||a(b)}})(),()=>y()})()}function pQ(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=as(["watchPendingTransactions",t.uid,e,i]);return gd(l,{onTransactions:r,onError:n},u=>{let d;const h=Eb(async()=>{var f;try{if(!d)try{d=await ut(t,HY,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await ut(t,pT,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await ut(t,yT,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function QEe(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>n1(r))}async function JEe(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function ZEe(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Ur(n):void 0,i=r?[s==null?void 0:s.address,[nt(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const gQ="0x5792579257925792579257925792579257925792579257925792579257925792",mQ=nt(0,{size:32});async function XEe(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Ur(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Za({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Ka([p,f.dataSuffix]):p,to:f.to,value:f.value?nt(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:nt(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Ow(new pe(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new kw(new pe(y,{details:y}))}const p=[];for(const y of d){const b=o1(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?ra(y.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const w=g.map(y=>y.status==="fulfilled"?y.value:mQ);return{id:Ka([...w,nt(s.id,{size:32}),gQ])}}throw zK(h,{...e,account:u,chain:e.chain})}}async function yQ(t,e){async function n(u){if(u.endsWith(gQ.slice(2))){const h=zl(tI(u,-64,-32)),f=tI(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>mQ.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:zc(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?zc(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:ra(u.blockNumber),gasUsed:ra(u.gasUsed),status:qY[u.status]})))??[],statusCode:l,status:c,version:o}}async function eCe(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function tCe(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=as(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=pU();let u;const d=gd(o,{resolve:c,reject:l},h=>{const f=Eb(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await yQ(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new nCe({id:n}))},i):void 0,await a}class nCe extends pe{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function rCe(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function sCe(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?zc(t.nonce):void 0,storageProof:t.storageProof?rCe(t.storageProof):void 0}}async function iCe(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?nt(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return sCe(a)}async function wQ(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=as(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:y}=pU(),b=a?setTimeout(()=>{p(),f(),y(new j0e({hash:n}))},a):void 0;return f=gd(c,{onReplaced:r,resolve:w,reject:y},v=>{p=ut(t,fQ,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const _=x=>{clearTimeout(b),p(),x(),f()};let I=A;if(!h)try{if(d){if(e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;_(()=>v.resolve(d));return}if(l||(h=!0,await aI(async()=>{l=await ut(t,gT,"getTransaction")({hash:n}),l.blockNumber&&(I=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await ut(t,TD,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;_(()=>v.resolve(d))}catch(x){if(x instanceof jK||x instanceof WK){if(!l){h=!1;return}try{u=l,h=!0;const N=await aI(()=>ut(t,Bl,"getBlock")({blockNumber:I,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof HK});h=!1;const S=N.transactions.find(({from:P,nonce:F})=>P===u.from&&F===u.nonce);if(!S||(d=await ut(t,TD,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e)))return;let O="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?O="repriced":S.from===S.to&&S.value===0n&&(O="cancelled"),_(()=>{var P;(P=v.onReplaced)==null||P.call(v,{reason:O,replacedTransaction:u,transaction:S,transactionReceipt:d}),v.resolve(d)})}catch(N){_(()=>v.reject(N))}}else _(()=>v.reject(x))}}})}),g}async function oCe(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Yu(n))}async function aCe(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function bQ(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new dm({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Ur(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Ur(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await ut(t,wb,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await ut(t,nU,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&fT(o.address,i.address))&&(a.nonce+=1)),a}async function cCe(t,e){const{account:n=t.account}=e;if(!n)throw new dm({docsPath:"/docs/eip7702/signAuthorization"});const r=Ur(n);if(!r.signAuthorization)throw new OS({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await bQ(t,e);return r.signAuthorization(s)}async function lCe(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new dm({docsPath:"/docs/actions/wallet/signTransaction"});const i=Ur(n);fm({account:i,...e});const o=await ut(t,wb,"getChainId")({});r!==null&&FK({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||yb;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:nt(o),from:i.address}]},{retryCount:0})}async function vQ(t,{account:e=t.account,message:n}){if(!e)throw new dm({docsPath:"/docs/actions/wallet/signMessage"});const r=Ur(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Sw(n):n.raw instanceof Uint8Array?Va(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function uCe(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new dm({docsPath:"/docs/actions/wallet/signTypedData"});const o=Ur(n),a={EIP712Domain:uQ({domain:r}),...e.types};if(lQ({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=UEe({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function dCe(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Ur(a.account):t.account,l=Za({abi:n,args:s,functionName:o});try{const{data:u}=await ut(t,l1,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=gm({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw Lg(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function hCe(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(e)}]},{retryCount:0})}let EQ=class extends WL{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Wye(e);const r=t1(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Nw(i)}update(e){return Iw(this),this.iHash.update(e),this}digestInto(e){Iw(this),Gc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const CQ=(t,e,n)=>new EQ(t,e).update(n).digest();CQ.create=(t,e)=>new EQ(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bo=BigInt(0),$i=BigInt(1),Pp=BigInt(2),fCe=BigInt(3),_Q=BigInt(4),AQ=BigInt(5),SQ=BigInt(8);function Da(t,e){const n=t%e;return n>=bo?n:e+n}function pa(t,e,n){let r=t;for(;e-- >bo;)r*=r,r%=n;return r}function E4(t,e){if(t===bo)throw new Error("invert: expected non-zero number");if(e<=bo)throw new Error("invert: expected positive modulus, got "+e);let n=Da(t,e),r=e,s=bo,i=$i;for(;n!==bo;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==$i)throw new Error("invert: does not exist");return Da(s,e)}function xQ(t,e){const n=(t.ORDER+$i)/_Q,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function pCe(t,e){const n=(t.ORDER-AQ)/SQ,r=t.mul(e,Pp),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Pp),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function gCe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-$i,n=0;for(;e%Pp===bo;)e/=Pp,n++;let r=Pp;const s=wT(t);for(;C4(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return xQ;let i=s.pow(r,e);const o=(e+$i)/Pp;return function(c,l){if(c.is0(l))return l;if(C4(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=$i<<BigInt(u-p-1),y=c.pow(d,w);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function mCe(t){return t%_Q===fCe?xQ:t%SQ===AQ?pCe:gCe(t)}const yCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=yCe.reduce((r,s)=>(r[s]="function",r),e);return uU(t,n),t}function bCe(t,e,n){if(n<bo)throw new Error("invalid exponent, negatives unsupported");if(n===bo)return t.ONE;if(n===$i)return e;let r=t.ONE,s=e;for(;n>bo;)n&$i&&(r=t.mul(r,s)),s=t.sqr(s),n>>=$i;return r}function IQ(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function C4(t,e){const n=(t.ORDER-$i)/Pp,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function vCe(t,e){e!==void 0&&mC(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function wT(t,e,n=!1,r={}){if(t<=bo)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=vCe(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:dT(o),ZERO:bo,ONE:$i,create:u=>Da(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return bo<=u&&u<t},is0:u=>u===bo,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&$i)===$i,neg:u=>Da(-u,t),eql:(u,d)=>u===d,sqr:u=>Da(u*u,t),add:(u,d)=>Da(u+d,t),sub:(u,d)=>Da(u-d,t),mul:(u,d)=>Da(u*d,t),pow:(u,d)=>bCe(l,u,d),div:(u,d)=>Da(u*E4(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>E4(u,t),sqrt:i||(u=>(c||(c=mCe(t)),c(l,u))),toBytes:u=>n?xY(u,a):lU(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?SY(u):uT(u)},invertBatch:u=>IQ(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function NQ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function TQ(t){const e=NQ(t);return e+Math.ceil(e/2)}function ECe(t,e,n=!1){const r=t.length,s=NQ(e),i=TQ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?SY(t):uT(t),a=Da(o,e-$i)+$i;return n?xY(a,s):lU(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dw=BigInt(0),Op=BigInt(1);function bE(t,e){const n=e.negate();return t?n:e}function CCe(t,e,n){const r=o=>o.pz,s=IQ(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function RQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function qP(t,e){RQ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=dT(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function _4(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Op);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function _Ce(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function ACe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const VP=new WeakMap,PQ=new WeakMap;function KP(t){return PQ.get(t)||1}function A4(t){if(t!==Dw)throw new Error("invalid wNAF")}function SCe(t,e){return{constTimeNegate:bE,hasPrecomputes(n){return KP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Dw;)r&Op&&(s=s.add(i)),i=i.double(),r>>=Op;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=qP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=qP(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=_4(s,c,a);s=l,d?o=o.add(bE(f,r[p])):i=i.add(bE(h,r[u]))}return A4(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=qP(n,e);for(let a=0;a<o.windows&&s!==Dw;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=_4(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return A4(s),i},getPrecomputes(n,r,s){let i=VP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),VP.set(r,i))),i},wNAFCached(n,r,s){const i=KP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=KP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){RQ(r,e),PQ.set(n,r),VP.delete(n)}}}function xCe(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Dw||r>Dw;)n&Op&&(i=i.add(s)),r&Op&&(o=o.add(s)),s=s.double(),n>>=Op,r>>=Op;return{p1:i,p2:o}}function ICe(t,e,n,r){_Ce(n,t),ACe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=Lbe(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=dT(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function S4(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return wCe(e),e}else return wT(t)}function NCe(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Dw))throw new Error(`CURVE.${a} must be positive bigint`)}const r=S4(e.p,n.Fp),s=S4(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function x4(t){t.lowS!==void 0&&iI("lowS",t.lowS),t.prehash!==void 0&&iI("prehash",t.prehash)}class TCe extends Error{constructor(e=""){super(e)}}const Iu={Err:TCe,_tlv:{encode:(t,e)=>{const{Err:n}=Iu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=xA(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?xA(s.length/2|128):"";return xA(t)+i+s+e},decode(t,e){const{Err:n}=Iu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Iu;if(t<vE)throw new e("integer: negative integers are not allowed");let n=xA(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Iu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return uT(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Iu,s=xa("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Iu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},vE=BigInt(0),EE=BigInt(1),RCe=BigInt(2),NA=BigInt(3),PCe=BigInt(4);function OCe(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function OQ(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=xa("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function kCe(t,e={}){const{Fp:n,Fn:r}=NCe("weierstrass",t,e),{h:s,n:i}=t;uU(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(N,S,O){const{x:P,y:F}=S.toAffine(),G=n.toBytes(P);if(iI("isCompressed",O),O){a();const B=!n.isOdd(F);return Np(kQ(B),G)}else return Np(Uint8Array.of(4),G,n.toBytes(F))}function l(N){Gc(N);const S=n.BYTES,O=S+1,P=2*S+1,F=N.length,G=N[0],B=N.subarray(1);if(F===O&&(G===2||G===3)){const T=n.fromBytes(B);if(!n.isValid(T))throw new Error("bad point: is not on curve, wrong x");const R=h(T);let $;try{$=n.sqrt(R)}catch(W){const K=W instanceof Error?": "+W.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}a();const k=n.isOdd($);return(G&1)===1!==k&&($=n.neg($)),{x:T,y:$}}else if(F===P&&G===4){const T=n.fromBytes(B.subarray(S*0,S*1)),R=n.fromBytes(B.subarray(S*1,S*2));if(!f(T,R))throw new Error("bad point: is not on curve");return{x:T,y:R}}else throw new Error(`bad point: got length ${F}, expected compressed=${O} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=OCe(n,t.a,t.b);function f(N,S){const O=n.sqr(S),P=h(N);return n.eql(O,P)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,NA),PCe),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(N,S,O=!1){if(!n.isValid(S)||O&&n.is0(S))throw new Error(`bad point coordinate ${N}`);return S}function y(N){if(!(N instanceof _))throw new Error("ProjectivePoint expected")}const b=c4((N,S)=>{const{px:O,py:P,pz:F}=N;if(n.eql(F,n.ONE))return{x:O,y:P};const G=N.is0();S==null&&(S=G?n.ONE:n.inv(F));const B=n.mul(O,S),T=n.mul(P,S),R=n.mul(F,S);if(G)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:B,y:T}}),v=c4(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:S,y:O}=N.toAffine();if(!n.isValid(S)||!n.isValid(O))throw new Error("bad point: x or y not field elements");if(!f(S,O))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(N,S,O,P,F){return O=new _(n.mul(O.px,N),O.py,O.pz),S=bE(P,S),O=bE(F,O),S.add(O)}class _{constructor(S,O,P){this.px=w("x",S),this.py=w("y",O,!0),this.pz=w("z",P),Object.freeze(this)}static fromAffine(S){const{x:O,y:P}=S||{};if(!S||!n.isValid(O)||!n.isValid(P))throw new Error("invalid affine point");if(S instanceof _)throw new Error("projective point not allowed");return n.is0(O)&&n.is0(P)?_.ZERO:new _(O,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return CCe(_,"pz",S)}static fromBytes(S){return Gc(S),_.fromHex(S)}static fromHex(S){const O=_.fromAffine(d(xa("pointHex",S)));return O.assertValidity(),O}static fromPrivateKey(S){const O=OQ(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return _.BASE.multiply(O(S))}static msm(S,O){return ICe(_,r,S,O)}precompute(S=8,O=!0){return x.setWindowSize(this,S),O||this.multiply(NA),this}_setWindowSize(S){this.precompute(S)}assertValidity(){v(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){y(S);const{px:O,py:P,pz:F}=this,{px:G,py:B,pz:T}=S,R=n.eql(n.mul(O,T),n.mul(G,F)),$=n.eql(n.mul(P,T),n.mul(B,F));return R&&$}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:O}=t,P=n.mul(O,NA),{px:F,py:G,pz:B}=this;let T=n.ZERO,R=n.ZERO,$=n.ZERO,k=n.mul(F,F),M=n.mul(G,G),W=n.mul(B,B),K=n.mul(F,G);return K=n.add(K,K),$=n.mul(F,B),$=n.add($,$),T=n.mul(S,$),R=n.mul(P,W),R=n.add(T,R),T=n.sub(M,R),R=n.add(M,R),R=n.mul(T,R),T=n.mul(K,T),$=n.mul(P,$),W=n.mul(S,W),K=n.sub(k,W),K=n.mul(S,K),K=n.add(K,$),$=n.add(k,k),k=n.add($,k),k=n.add(k,W),k=n.mul(k,K),R=n.add(R,k),W=n.mul(G,B),W=n.add(W,W),k=n.mul(W,K),T=n.sub(T,k),$=n.mul(W,M),$=n.add($,$),$=n.add($,$),new _(T,R,$)}add(S){y(S);const{px:O,py:P,pz:F}=this,{px:G,py:B,pz:T}=S;let R=n.ZERO,$=n.ZERO,k=n.ZERO;const M=t.a,W=n.mul(t.b,NA);let K=n.mul(O,G),ne=n.mul(P,B),le=n.mul(F,T),oe=n.add(O,P),ae=n.add(G,B);oe=n.mul(oe,ae),ae=n.add(K,ne),oe=n.sub(oe,ae),ae=n.add(O,F);let ue=n.add(G,T);return ae=n.mul(ae,ue),ue=n.add(K,le),ae=n.sub(ae,ue),ue=n.add(P,F),R=n.add(B,T),ue=n.mul(ue,R),R=n.add(ne,le),ue=n.sub(ue,R),k=n.mul(M,ae),R=n.mul(W,le),k=n.add(R,k),R=n.sub(ne,k),k=n.add(ne,k),$=n.mul(R,k),ne=n.add(K,K),ne=n.add(ne,K),le=n.mul(M,le),ae=n.mul(W,ae),ne=n.add(ne,le),le=n.sub(K,le),le=n.mul(M,le),ae=n.add(ae,le),K=n.mul(ne,ae),$=n.add($,K),K=n.mul(ue,ae),R=n.mul(oe,R),R=n.sub(R,K),K=n.mul(oe,ne),k=n.mul(ue,k),k=n.add(k,K),new _(R,$,k)}subtract(S){return this.add(S.negate())}is0(){return this.equals(_.ZERO)}multiply(S){const{endo:O}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let P,F;const G=B=>x.wNAFCached(this,B,_.normalizeZ);if(O){const{k1neg:B,k1:T,k2neg:R,k2:$}=O.splitScalar(S),{p:k,f:M}=G(T),{p:W,f:K}=G($);F=M.add(K),P=A(O.beta,k,W,B,R)}else{const{p:B,f:T}=G(S);P=B,F=T}return _.normalizeZ([P,F])[0]}multiplyUnsafe(S){const{endo:O}=e,P=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===vE||P.is0())return _.ZERO;if(S===EE)return P;if(x.hasPrecomputes(this))return this.multiply(S);if(O){const{k1neg:F,k1:G,k2neg:B,k2:T}=O.splitScalar(S),{p1:R,p2:$}=xCe(_,P,G,T);return A(O.beta,R,$,F,B)}else return x.wNAFCachedUnsafe(P,S)}multiplyAndAddUnsafe(S,O,P){const F=this.multiplyUnsafe(O).add(S.multiplyUnsafe(P));return F.is0()?void 0:F}toAffine(S){return b(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===EE?!0:S?S(_,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===EE?this:S?S(_,this):this.multiplyUnsafe(s)}toBytes(S=!0){return iI("isCompressed",S),this.assertValidity(),u(_,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return yC(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=r;const I=r.BITS,x=SCe(_,e.endo?Math.ceil(I/2):I);return _}function kQ(t){return Uint8Array.of(t?2:3)}function DCe(t,e,n={}){uU(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Qye,s=e.hmac||((P,...F)=>CQ(e.hash,P,Np(...F))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const F=a>>EE;return P>F}function u(P){return l(P)?o.neg(P):P}function d(P,F){if(!o.isValidNot0(F))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class h{constructor(F,G,B){d("r",F),d("s",G),this.r=F,this.s=G,B!=null&&(this.recovery=B),Object.freeze(this)}static fromCompact(F){const G=o.BYTES,B=xa("compactSignature",F,G*2);return new h(o.fromBytes(B.subarray(0,G)),o.fromBytes(B.subarray(G,G*2)))}static fromDER(F){const{r:G,s:B}=Iu.toSig(xa("DER",F));return new h(G,B)}assertValidity(){}addRecoveryBit(F){return new h(this.r,this.s,F)}recoverPublicKey(F){const G=i.ORDER,{r:B,s:T,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(a*RCe<G&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const k=R===2||R===3?B+a:B;if(!i.isValid(k))throw new Error("recovery id 2 or 3 invalid");const M=i.toBytes(k),W=t.fromHex(Np(kQ((R&1)===0),M)),K=o.inv(k),ne=v(xa("msgHash",F)),le=o.create(-ne*K),oe=o.create(T*K),ae=t.BASE.multiplyUnsafe(le).add(W.multiplyUnsafe(oe));if(ae.is0())throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(F){if(F==="compact")return Np(o.toBytes(this.r),o.toBytes(this.s));if(F==="der")return jL(Iu.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return yC(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return yC(this.toBytes("compact"))}}const f=OQ(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=a;return ECe(r(TQ(P)),P)},precompute(P=8,F=t.BASE){return F.precompute(P,!1)}};function g(P,F=!0){return t.fromPrivateKey(P).toBytes(F)}function w(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const G=xa("key",P).length,B=i.BYTES,T=B+1,R=2*B+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===T))return G===T||G===R}function y(P,F,G=!0){if(w(P)===!0)throw new Error("first arg must be private key");if(w(F)===!1)throw new Error("second arg must be public key");return t.fromHex(F).multiply(f(P)).toBytes(G)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const F=uT(P),G=P.length*8-c;return G>0?F>>BigInt(G):F},v=e.bits2int_modN||function(P){return o.create(b(P))},A=dT(c);function _(P){return Mbe("num < 2^"+c,P,vE,A),o.toBytes(P)}function I(P,F,G=x){if(["recovered","canonical"].some(oe=>oe in G))throw new Error("sign() legacy options not supported");const{hash:B}=e;let{lowS:T,prehash:R,extraEntropy:$}=G;T==null&&(T=!0),P=xa("msgHash",P),x4(G),R&&(P=xa("prehashed msgHash",B(P)));const k=v(P),M=f(F),W=[_(M),_(k)];if($!=null&&$!==!1){const oe=$===!0?r(i.BYTES):$;W.push(xa("extraEntropy",oe))}const K=Np(...W),ne=k;function le(oe){const ae=b(oe);if(!o.isValidNot0(ae))return;const ue=o.inv(ae),et=t.BASE.multiply(ae).toAffine(),Se=o.create(et.x);if(Se===vE)return;const Me=o.create(ue*o.create(ne+Se*M));if(Me===vE)return;let rt=(et.x===Se?0:2)|Number(et.y&EE),Tt=Me;return T&&l(Me)&&(Tt=u(Me),rt^=1),new h(Se,Tt,rt)}return{seed:K,k2sig:le}}const x={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function S(P,F,G=x){const{seed:B,k2sig:T}=I(P,F,G);return Ube(e.hash.outputLen,o.BYTES,s)(B,T)}t.BASE.precompute(8);function O(P,F,G,B=N){const T=P;F=xa("msgHash",F),G=xa("publicKey",G),x4(B);const{lowS:R,prehash:$,format:k}=B;if("strict"in B)throw new Error("options.strict was renamed to lowS");if(k!==void 0&&!["compact","der","js"].includes(k))throw new Error('format must be "compact", "der" or "js"');const M=typeof T=="string"||FL(T),W=!M&&!k&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!M&&!W)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let K,ne;try{if(W)if(k===void 0||k==="js")K=new h(T.r,T.s);else throw new Error("invalid format");if(M){try{k!=="compact"&&(K=h.fromDER(T))}catch(Tt){if(!(Tt instanceof Iu.Err))throw Tt}!K&&k!=="der"&&(K=h.fromCompact(T))}ne=t.fromHex(G)}catch{return!1}if(!K||R&&K.hasHighS())return!1;$&&(F=e.hash(F));const{r:le,s:oe}=K,ae=v(F),ue=o.inv(oe),et=o.create(ae*ue),Se=o.create(le*ue),Me=t.BASE.multiplyUnsafe(et).add(ne.multiplyUnsafe(Se));return Me.is0()?!1:o.create(Me.x)===le}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:S,verify:O,utils:p,Point:t,Signature:h})}function MCe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=wT(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function LCe(t){const{CURVE:e,curveOpts:n}=MCe(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function UCe(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function $Ce(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=LCe(t),s=kCe(e,n),i=DCe(s,r,n);return UCe(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function BCe(t,e){const n=r=>$Ce({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cI={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const FCe=BigInt(1),LD=BigInt(2),I4=(t,e)=>(t+e/LD)/e;function jCe(t){const e=cI.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=pa(u,n,e)*u%e,h=pa(d,n,e)*u%e,f=pa(h,LD,e)*l%e,p=pa(f,s,e)*f%e,g=pa(p,i,e)*p%e,w=pa(g,a,e)*g%e,y=pa(w,c,e)*w%e,b=pa(y,a,e)*g%e,v=pa(b,n,e)*u%e,A=pa(v,o,e)*p%e,_=pa(A,r,e)*l%e,I=pa(_,LD,e);if(!UD.eql(UD.sqr(I),t))throw new Error("Cannot find square root");return I}const UD=wT(cI.p,void 0,void 0,{sqrt:jCe}),DQ=BCe({...cI,Fp:UD,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=cI.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-FCe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=I4(i*t,e),c=I4(-r*t,e);let l=Da(t-a*n-c*s,e),u=Da(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},JK),WCe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:DQ},Symbol.toStringTag,{value:"Module"}));function zCe({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new DQ.Signature(ra(t),ra(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:qa(o)}async function CU(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Yl(o)?o:typeof o=="object"&&"r"in o&&"s"in o?zCe(o):ls(o),u=await(async()=>!r&&!s||jEe(l)?l:WEe({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Za({abi:n4,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:rT({abi:n4,args:[n,i,u],bytecode:lve}),...c},{data:g}=await ut(t,l1,"call")(p);return wye(g??"0x0")}catch(p){try{if(fT(Yu(n),await DK({hash:i,signature:o})))return!0}catch{}if(p instanceof EY)return!1;throw p}}async function HCe(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=dQ(n);return CU(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function GCe(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=kEe({message:o,primaryType:a,types:c,domain:l});return CU(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function qCe(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function VCe(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,y=as(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return gd(y,{onLogs:l,onError:c},b=>{let v;a!==void 0&&(v=a-1n);let A,_=!1;const I=Eb(async()=>{var x;if(!_){try{A=await ut(t,WY,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}_=!0;return}try{let N;if(A)N=await ut(t,pT,"getFilterChanges")({filter:A});else{const S=await ut(t,d1,"getBlockNumber")({});v&&v<S?N=await ut(t,GY,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:S,strict:w}):N=[],v=S}if(N.length===0)return;if(i)b.onLogs(N);else for(const S of N)b.onLogs([S])}catch(N){A&&N instanceof Dg&&(_=!1),(x=b.onError)==null||x.call(b,N)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await ut(t,yT,"uninstallFilter")({filter:A}),I()}})})():(()=>{const w=h??!1,y=as(["watchContractEvent",r,s,i,t.uid,o,d,w]);let b=!0,v=()=>b=!1;return gd(y,{onLogs:l,onError:c},A=>((async()=>{try{const _=(()=>{if(t.transport.type==="fallback"){const N=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return N?N.value:t.transport}return t.transport})(),I=o?u1({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await _.subscribe({params:["logs",{address:r,topics:I}],onData(N){var O;if(!b)return;const S=N.result;try{const{eventName:P,args:F}=yU({abi:n,data:S.data,topics:S.topics,strict:h}),G=pd(S,{args:F,eventName:P});A.onLogs([G])}catch(P){let F,G;if(P instanceof gC||P instanceof tT){if(h)return;F=P.abiItem.name,G=(O=P.abiItem.inputs)==null?void 0:O.some(T=>!("name"in T&&T.name))}const B=pd(S,{args:G?[]:{},eventName:F});A.onLogs([B])}},onError(N){var S;(S=A.onError)==null||S.call(A,N)}});v=x,b||v()}catch(_){c==null||c(_)}})(),()=>v()))})()}async function MQ(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new dm({docsPath:"/docs/contract/writeContract"});const l=r?Ur(r):null,u=Za({abi:n,args:i,functionName:a});try{return await ut(t,o1,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Lg(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function ta(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const DS="2.17.3",KCe=()=>`@wagmi/core@${DS}`;var LQ=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},lI,UQ;let _d=class $D extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return KCe()}constructor(e,n={}){var i;super(),lI.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof $D?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof $D&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return LQ(this,lI,"m",UQ).call(this,this,e)}};lI=new WeakSet,UQ=function t(e,n){return n!=null&&n(e)?e:e.cause?LQ(this,lI,"m",t).call(this,e.cause,n):e};class DC extends _d{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class YCe extends _d{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class QCe extends _d{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class JCe extends _d{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class ZCe extends _d{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class XCe extends _d{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function MS(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new YCe;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const BD=256;let TA=BD,RA;function $Q(t=11){if(!RA||TA+t>BD*2){RA="",TA=0;for(let e=0;e<BD;e++)RA+=(256+Math.random()*256|0).toString(16).substring(1)}return RA.substring(TA,TA+++t)}function BQ(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Ur(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:$Q()};function y(b){return v=>{const A=v(b);for(const I in w)delete A[I];const _={...b,...A};return Object.assign(_,{extend:y(_)})}}return Object.assign(w,{extend:y(w)})}function _U({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=$Q();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:xEe(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function e_e(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>_U({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function uI(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=t_e,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=_U({key:n,name:r,async request({method:g,params:w}){let y;const b=async(v=0)=>{const A=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const _=await A.request({method:g,params:w});return f({method:g,params:w,response:_,transport:A,status:"success"}),_}catch(_){if(f({error:_,method:g,params:w,transport:A,status:"error"}),i(_)||v===h.length-1||(y??(y=h.slice(v+1).some(I=>{const{include:x,exclude:N}=I({chain:c}).config.methods||{};return x?x.includes(g):N?!N.includes(g):!0})),!y))throw _;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};n_e({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function t_e(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===Rw.code||t.code===Xr.code||Tp.nodeMessage.test(t.message)||t.code===5e3))}function n_e({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,v;try{await(r?r({transport:w}):w.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-y,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const y=u.map(I=>I[w].latency),v=1-y.reduce((I,x)=>I+x,0)/y.length/f,A=u.map(I=>I[w].success),_=A.reduce((I,x)=>I+x,0)/A.length;return _===0?[0,w]:[l*v+c*_,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await oI(e),d()};d()}class r_e extends pe{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Fa(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new r_e;const v=TEe(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return _U({key:s,methods:i,name:o,async request({method:A,params:_}){const I={method:A,params:_},{schedule:x}=LY({id:b,wait:g,shouldSplitBatch(P){return P.length>p},fn:P=>v.request({body:P}),sort:(P,F)=>P.id-F.id}),N=async P=>n?x(P):[await v.request({body:P})],[{error:S,result:O}]=await N(I);if(u)return{error:S,result:O};if(S)throw new JL({body:I,error:S,url:b});return O},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function s_e(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(i_e))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(o_e))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const i_e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,o_e=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function a_e(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Ya(r.address,{strict:!1})||e&&!fT(r.address,e))return!1}catch{return!1}return!0}async function c_e(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=s_e(s);if(!u.address||!a_e({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=dQ(s);return CU(t,{address:u.address,hash:h,signature:a,...l})}function l_e(t){return{call:e=>l1(t,e),createAccessList:e=>jY(t,e),createBlockFilter:()=>Rve(t),createContractEventFilter:e=>WY(t,e),createEventFilter:e=>zY(t,e),createPendingTransactionFilter:()=>HY(t),estimateContractGas:e=>Ove(t,e),estimateGas:e=>oT(t,e),getBalance:e=>tU(t,e),getBlobBaseFee:()=>kve(t),getBlock:e=>Bl(t,e),getBlockNumber:e=>d1(t,e),getBlockTransactionCount:e=>Bve(t,e),getBytecode:e=>m4(t,e),getChainId:()=>wb(t),getCode:e=>m4(t,e),getContractEvents:e=>GY(t,e),getEip712Domain:e=>zve(t,e),getEnsAddress:e=>gve(t,e),getEnsAvatar:e=>Nve(t,e),getEnsName:e=>FY(t,e),getEnsResolver:e=>Tve(t,e),getEnsText:e=>BY(t,e),getFeeHistory:e=>qve(t,e),estimateFeesPerGas:e=>Z0e(t,e),getFilterChanges:e=>pT(t,e),getFilterLogs:e=>Vve(t,e),getGasPrice:()=>XL(t),getLogs:e=>bU(t,e),getProof:e=>iCe(t,e),estimateMaxPriorityFeePerGas:e=>J0e(t,e),getStorageAt:e=>Kve(t,e),getTransaction:e=>gT(t,e),getTransactionConfirmations:e=>Yve(t,e),getTransactionCount:e=>nU(t,e),getTransactionReceipt:e=>TD(t,e),multicall:e=>VY(t,e),prepareTransactionRequest:e=>i1(t,e),readContract:e=>Zl(t,e),sendRawTransaction:e=>sU(t,e),simulate:e=>RD(t,e),simulateBlocks:e=>RD(t,e),simulateCalls:e=>qEe(t,e),simulateContract:e=>dCe(t,e),verifyMessage:e=>HCe(t,e),verifySiweMessage:e=>c_e(t,e),verifyTypedData:e=>GCe(t,e),uninstallFilter:e=>yT(t,e),waitForTransactionReceipt:e=>wQ(t,e),watchBlocks:e=>KEe(t,e),watchBlockNumber:e=>fQ(t,e),watchContractEvent:e=>VCe(t,e),watchEvent:e=>YEe(t,e),watchPendingTransactions:e=>pQ(t,e)}}function u_e(t){return{addChain:e=>Eye(t,e),deployContract:e=>vwe(t,e),getAddresses:()=>QEe(t),getCallsStatus:e=>yQ(t,e),getCapabilities:e=>ZEe(t,e),getChainId:()=>wb(t),getPermissions:()=>JEe(t),prepareAuthorization:e=>bQ(t,e),prepareTransactionRequest:e=>i1(t,e),requestAddresses:()=>oCe(t),requestPermissions:e=>aCe(t,e),sendCalls:e=>XEe(t,e),sendRawTransaction:e=>sU(t,e),sendTransaction:e=>o1(t,e),showCallsStatus:e=>eCe(t,e),signAuthorization:e=>cCe(t,e),signMessage:e=>vQ(t,e),signTransaction:e=>lCe(t,e),signTypedData:e=>uCe(t,e),switchChain:e=>hCe(t,e),waitForCallsStatus:e=>tCe(t,e),watchAsset:e=>qCe(t,e),writeContract:e=>MQ(t,e)}}async function h1(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new XCe({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new QCe;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new ZCe({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Ur(e.account??n.accounts[0]);if(o&&(o.address=Yu(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new JCe({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return BQ({account:o,chain:a,name:"Connector Client",transport:l=>e_e(c)({...l,retryCount:0})})}async function FD(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function d_e(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await h1(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return ta(o,oT,"estimateGas")({...s,account:i})}function FQ(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(U0e[t])}function n0(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function h_e(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return ta(o,VY,"multicall")({allowFailure:n,contracts:s,...i})}function jQ(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ta(s,Zl,"readContract")(r)}async function f_e(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>h_e(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof CY)throw c;const l=()=>o.map(u=>jQ(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function WQ(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await N4(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await N4(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=fK(zl(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await ta(c,tU,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:hm(u,FQ(a)),symbol:d.nativeCurrency.symbol,value:u}}async function N4(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await f_e(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=hm(c??"0",FQ(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function T4(t){return t.state.chainId}function Af(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Af(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Af(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let YP=[];function R4(t){const e=t.chains;return Af(YP,e)?YP:(YP=e,e)}function p_e(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let PA=[];function mc(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Af(PA,e)?PA:(PA=e,e)}let QP=[];function P4(t){const e=t.connectors;return Af(QP,e)?QP:(QP=e,e)}function g_e(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return ta(s,FY,"getEnsName")(r)}function jD(t,e={}){const n=p_e(t,e);return n==null?void 0:n.extend(l_e)}async function m_e(t,e={}){return(await h1(t,e)).extend(u_e)}async function y_e(t,e){const{account:n,chainId:r,...s}=e,i=n??n0(t).address,o=t.getClient({chainId:r});return ta(o,i1,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let JP=!1;async function WD(t,e={}){var l,u;if(JP)return[];JP=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),JP=!1,a}async function w_e(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await h1(t,{account:n??void 0,chainId:r,connector:s}),await ta(o,o1,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function b_e(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await h1(t,{account:n,connector:r}),ta(i,vQ,"signMessage")({...s,...n?{account:n}:{}})}class Xd extends _d{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class v_e extends _d{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function zD(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new v_e({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new DC;return t.setState(a=>({...a,chainId:r})),i}function zQ(t,e){const{onChange:n}=e;return t.subscribe(()=>n0(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Af(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function E_e(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function HQ(t,e){const{onChange:n}=e;return t.subscribe(()=>mc(t),n,{equalityFn:Af})}function GQ(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function C_e(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=ta(l,pQ,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function __e(t,e){const{onChange:n}=e;return t.subscribe(()=>jD(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function qQ(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await ta(i,wQ,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await ta(i,gT,"getTransaction")({hash:a.transactionHash}),d=await ta(i,l1,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?fK(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function VQ(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await h1(t,{account:n??void 0,chainId:r,connector:s}),await ta(o,MQ,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function _Ve(t){return t}bT.type="injected";function bT(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...A_e[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:bT.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,y,b;const d=await this.getProvider();if(!d)throw new Xd;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(A=>Yu(A)),h.length>0&&(h=await this.getAccounts())}catch(v){const A=v;if(A.code===Xr.code)throw new Xr(A);if(A.code===af.code)throw A}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(_=>Yu(_))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const A=await this.switchChain({chainId:l}).catch(_=>{if(_.code===Xr.code)throw _;return{id:v}});v=(A==null?void 0:A.id)??v}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const A=v;throw A.code===Xr.code?new Xr(A):A.code===af.code?new af(A):A}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Xd;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await sQ(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Xd;return(await l.request({method:"eth_accounts"})).map(d=>Yu(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Xd;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=LS(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new Xd}return!!(await aI(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,y;const d=await this.getProvider();if(!d)throw new Xd;const h=c.chains.find(b=>b.id===u);if(!h)throw new Ql(new DC);const f=new Promise(b=>{const v=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,..._}=h.blockExplorers??{};let I;l!=null&&l.blockExplorerUrls?I=l.blockExplorerUrls:A&&(I=[A.url,...Object.values(_).map(S=>S.url)]);let x;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?x=l.rpcUrls:x=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const N={blockExplorerUrls:I,chainId:nt(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Xr(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new Xr(A)}throw v.code===Xr.code?new Xr(v):new Ql(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Yu(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const A_e={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:LS(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return LS(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:LS(t,"isPhantom")}}};function LS(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function S_e(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function x_e(){const t=new Set;let e=[];const n=()=>S_e(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const I_e=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},N_e=I_e;function T_e(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const HD=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return HD(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return HD(r)(n)}}}},R_e=(t,e)=>(n,r,s)=>{let i={storage:T_e(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return HD(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[A,_]=b;if(f=i.merge(_,(v=r())!=null?v:h),n(f,!0),A)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},P_e=R_e,O4=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},ZP=t=>t?O4(t):O4;var KQ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,b,v;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(v=1,b=new Array(y-1);v<y;v++)b[v-1]=arguments[v];w.fn.apply(w.context,b)}else{var A=w.length,_;for(v=0;v<A;v++)switch(w[v].once&&this.removeListener(l,w[v].fn,void 0,!0),y){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,u);break;case 3:w[v].fn.call(w[v].context,u,d);break;case 4:w[v].fn.call(w[v].context,u,d,h);break;default:if(!b)for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];w[v].fn.apply(w[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(KQ);var O_e=KQ.exports;const k_e=im(O_e);class D_e{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new k_e})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function M_e(t){return new D_e(t)}function L_e(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function k4(t,e){return t.slice(0,e).join(".")||"."}function D4(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function U_e(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=D4(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=D4(s,c);if(u!==0)return r?e.call(this,a,c,k4(i,u)):`[ref=${k4(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function $_e(t,e,n,r){return JSON.stringify(t,U_e((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function B_e(t){const{deserialize:e=L_e,key:n="wagmi",serialize:r=$_e,storage:s=YQ}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const YQ={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function F_e(){const t=typeof window<"u"&&window.localStorage?window.localStorage:YQ;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const GD=256;let OA=GD,kA;function j_e(t=11){if(!kA||OA+t>GD*2){kA="",OA=0;for(let e=0;e<GD;e++)kA+=(256+Math.random()*256|0).toString(16).substring(1)}return kA.substring(OA,OA+++t)}function QQ(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=B_e({storage:F_e()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?x_e():void 0,a=ZP(()=>i.chains),c=ZP(()=>{const _=[],I=new Set;for(const x of i.connectors??[]){const N=l(x);if(_.push(N),!s&&N.rdns){const S=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const O of S)I.add(O)}}if(!s&&o){const x=o.getProviders();for(const N of x)I.has(N.info.rdns)||_.push(l(u(N)))}return _});function l(_){var N;const I=M_e(j_e()),x={..._({emitter:I,chains:a.getState(),storage:n,transports:i.transports}),emitter:I,uid:I.uid};return I.on("connect",v),(N=x.setup)==null||N.call(x),x}function u(_){const{info:I}=_,x=_.provider;return bT({target:{...I,id:I.rdns,provider:x}})}const d=new Map;function h(_={}){const I=_.chainId??w.getState().chainId,x=a.getState().find(S=>S.id===I);if(_.chainId&&!x)throw new DC;{const S=d.get(w.getState().chainId);if(S&&!x)return S;if(!x)throw new DC}{const S=d.get(I);if(S)return S}let N;if(i.client)N=i.client({chain:x});else{const S=x.id,O=a.getState().map(G=>G.id),P={},F=Object.entries(i);for(const[G,B]of F)if(!(G==="chains"||G==="client"||G==="connectors"||G==="transports"))if(typeof B=="object")if(S in B)P[G]=B[S];else{if(O.some(R=>R in B))continue;P[G]=B}else P[G]=B;N=BQ({...P,chain:x,batch:P.batch??{multicall:!0},transport:G=>i.transports[S]({...G,connectors:c})})}return d.set(I,N),N}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";DS.startsWith(g)?p=Number.parseInt(DS.replace(g,"")):p=Number.parseInt(DS.split(".")[0]??"0");const w=ZP(N_e(n?P_e(f,{migrate(_,I){if(I===p)return _;const x=f(),N=y(_,x.chainId);return{...x,chainId:N}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([I,x])=>{const{id:N,name:S,type:O,uid:P}=x.connector;return[I,{...x,connector:{id:N,name:S,type:O,uid:P}}]})},chainId:_.chainId,current:_.current}},merge(_,I){typeof _=="object"&&_&&"status"in _&&delete _.status;const x=y(_,I.chainId);return{...I,..._,chainId:x}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(_,I){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(x=>x.id===_.chainId)?_.chainId:I}r&&w.subscribe(({connections:_,current:I})=>{var x;return I?(x=_.get(I))==null?void 0:x.chainId:void 0},_=>{if(a.getState().some(x=>x.id===_))return w.setState(x=>({...x,chainId:_??x.chainId}))}),o==null||o.subscribe(_=>{const I=new Set,x=new Set;for(const S of c.getState())if(I.add(S.id),S.rdns){const O=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const P of O)x.add(P)}const N=[];for(const S of _){if(x.has(S.info.rdns))continue;const O=l(u(S));I.has(O.id)||N.push(O)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...N],!0)});function b(_){w.setState(I=>{const x=I.connections.get(_.uid);return x?{...I,connections:new Map(I.connections).set(_.uid,{accounts:_.accounts??x.accounts,chainId:_.chainId??x.chainId,connector:x.connector})}:I})}function v(_){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(I=>{const x=c.getState().find(N=>N.uid===_.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",b),x.emitter.listenerCount("change")||x.emitter.on("change",b),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...I,connections:new Map(I.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:x}),current:_.uid,status:"connected"}):I})}function A(_){w.setState(I=>{const x=I.connections.get(_.uid);if(x){const S=x.connector;S.emitter.listenerCount("change")&&x.connector.emitter.off("change",b),S.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),S.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(I.connections.delete(_.uid),I.connections.size===0)return{...I,connections:new Map,current:null,status:"disconnected"};const N=I.connections.values().next().value;return{...I,connections:new Map(I.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(_){let I;typeof _=="function"?I=_(w.getState()):I=_;const x=f();typeof I!="object"&&(I=x),Object.keys(x).some(S=>!(S in I))&&(I=x),w.setState(I,!0)},subscribe(_,I,x){return w.subscribe(_,I,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(_){const I=typeof _=="function"?_(a.getState()):_;if(I.length!==0)return a.setState(I,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:l,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:b,connect:v,disconnect:A}}}}function W_e(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?WD(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function z_e(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=W_e(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const JQ=D.createContext(void 0);function H_e(t){const{children:e,config:n}=t,r={value:n};return D.createElement(z_e,t,D.createElement(JQ.Provider,r,e))}const G_e="2.15.6",q_e=()=>`wagmi@${G_e}`;let V_e=class extends _d{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return q_e()}};class K_e extends V_e{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function zi(t={}){const e=t.config??D.useContext(JQ);if(!e)throw new K_e;return e}function Y_e(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var ZQ={exports:{}},XQ={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT=D,Q_e=lV;function J_e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Z_e=typeof Object.is=="function"?Object.is:J_e,X_e=Q_e.useSyncExternalStore,e1e=vT.useRef,t1e=vT.useEffect,n1e=vT.useMemo,r1e=vT.useDebugValue;XQ.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=e1e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=n1e(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,Z_e(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=X_e(t,i[0],i[1]);return t1e(function(){o.hasValue=!0,o.value=a},[a]),r1e(a),a};ZQ.exports=XQ;var eJ=ZQ.exports;const XP=t=>typeof t=="object"&&!Array.isArray(t);function s1e(t,e,n=e,r=Af){const s=D.useRef([]),i=eJ.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(XP(o)&&XP(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(XP(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function Cb(t={}){const e=zi(t);return s1e(n=>zQ(e,{onChange:n}),()=>n0(e))}var _b=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Bg=typeof window>"u"||"Deno"in globalThis;function Ii(){}function i1e(t,e){return typeof t=="function"?t(e):t}function qD(t){return typeof t=="number"&&t>=0&&t!==1/0}function tJ(t,e){return Math.max(t+(e||0)-Date.now(),0)}function cf(t,e){return typeof t=="function"?t(e):t}function Ma(t,e){return typeof t=="function"?t(e):t}function M4(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==AU(o,e.options))return!1}else if(!MC(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function L4(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Fg(e.options.mutationKey)!==Fg(i))return!1}else if(!MC(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function AU(t,e){return((e==null?void 0:e.queryKeyHashFn)||Fg)(t)}function Fg(t){return JSON.stringify(t,(e,n)=>VD(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function MC(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>MC(t[n],e[n])):!1}function SU(t,e){if(t===e)return t;const n=U4(t)&&U4(e);if(n||VD(t)&&VD(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=SU(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function dI(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function U4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function VD(t){if(!$4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!$4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function $4(t){return Object.prototype.toString.call(t)==="[object Object]"}function o1e(t){return new Promise(e=>{setTimeout(e,t)})}function KD(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?SU(t,e):e}function a1e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function c1e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var xU=Symbol();function nJ(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===xU?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function rJ(t,e){return typeof t=="function"?t(...e):!!t}var Bp,ch,f0,tz,l1e=(tz=class extends _b{constructor(){super();Q(this,Bp);Q(this,ch);Q(this,f0);L(this,f0,e=>{if(!Bg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){C(this,ch)||this.setEventListener(C(this,f0))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,ch))==null||e.call(this),L(this,ch,void 0))}setEventListener(e){var n;L(this,f0,e),(n=C(this,ch))==null||n.call(this),L(this,ch,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){C(this,Bp)!==e&&(L(this,Bp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof C(this,Bp)=="boolean"?C(this,Bp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Bp=new WeakMap,ch=new WeakMap,f0=new WeakMap,tz),IU=new l1e,p0,lh,g0,nz,u1e=(nz=class extends _b{constructor(){super();Q(this,p0,!0);Q(this,lh);Q(this,g0);L(this,g0,e=>{if(!Bg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){C(this,lh)||this.setEventListener(C(this,g0))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,lh))==null||e.call(this),L(this,lh,void 0))}setEventListener(e){var n;L(this,g0,e),(n=C(this,lh))==null||n.call(this),L(this,lh,e(this.setOnline.bind(this)))}setOnline(e){C(this,p0)!==e&&(L(this,p0,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return C(this,p0)}},p0=new WeakMap,lh=new WeakMap,g0=new WeakMap,nz),hI=new u1e;function YD(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function d1e(t){return Math.min(1e3*2**t,3e4)}function sJ(t){return(t??"online")==="online"?hI.isOnline():!0}var iJ=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function eO(t){return t instanceof iJ}function oJ(t){let e=!1,n=0,r=!1,s;const i=YD(),o=g=>{var w;r||(h(new iJ(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>IU.isFocused()&&(t.networkMode==="always"||hI.isOnline())&&t.canRun(),u=()=>sJ(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=y=>{(r||l())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var I;if(r)return;const b=t.retry??(Bg?0:3),v=t.retryDelay??d1e,A=typeof v=="function"?v(n,y):v,_=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!_){h(y);return}n++,(I=t.onFail)==null||I.call(t,n,y),o1e(A).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var h1e=t=>setTimeout(t,0);function f1e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=h1e;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var rs=f1e(),Fp,rz,aJ=(rz=class{constructor(){Q(this,Fp)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qD(this.gcTime)&&L(this,Fp,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Bg?1/0:5*60*1e3))}clearGcTimeout(){C(this,Fp)&&(clearTimeout(C(this,Fp)),L(this,Fp,void 0))}},Fp=new WeakMap,rz),m0,jp,Ia,Wp,ci,__,zp,wc,Eu,sz,p1e=(sz=class extends aJ{constructor(e){super();Q(this,wc);Q(this,m0);Q(this,jp);Q(this,Ia);Q(this,Wp);Q(this,ci);Q(this,__);Q(this,zp);L(this,zp,!1),L(this,__,e.defaultOptions),this.setOptions(e.options),this.observers=[],L(this,Wp,e.client),L(this,Ia,C(this,Wp).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,L(this,m0,g1e(this.options)),this.state=e.state??C(this,m0),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=C(this,ci))==null?void 0:e.promise}setOptions(e){this.options={...C(this,__),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,Ia).remove(this)}setData(e,n){const r=KD(this.state.data,e,this.options);return he(this,wc,Eu).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){he(this,wc,Eu).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=C(this,ci))==null?void 0:r.promise;return(s=C(this,ci))==null||s.cancel(e),n?n.then(Ii).catch(Ii):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,m0))}isActive(){return this.observers.some(e=>Ma(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xU||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>cf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!tJ(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=C(this,ci))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=C(this,ci))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),C(this,Ia).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(C(this,ci)&&(C(this,zp)?C(this,ci).cancel({revert:!0}):C(this,ci).cancelRetry()),this.scheduleGc()),C(this,Ia).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||he(this,wc,Eu).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(C(this,ci))return C(this,ci).continueRetry(),C(this,ci).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(L(this,zp,!0),r.signal)})},i=()=>{const h=nJ(this.options,n),p=(()=>{const g={client:C(this,Wp),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return L(this,zp,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:C(this,Wp),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),L(this,jp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&he(this,wc,Eu).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;eO(h)&&h.silent||he(this,wc,Eu).call(this,{type:"error",error:h}),eO(h)||((p=(f=C(this,Ia).config).onError)==null||p.call(f,h,this),(w=(g=C(this,Ia).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return L(this,ci,oJ({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=C(this,Ia).config).onSuccess)==null||p.call(f,h,this),(w=(g=C(this,Ia).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{he(this,wc,Eu).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{he(this,wc,Eu).call(this,{type:"pause"})},onContinue:()=>{he(this,wc,Eu).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),C(this,ci).start()}},m0=new WeakMap,jp=new WeakMap,Ia=new WeakMap,Wp=new WeakMap,ci=new WeakMap,__=new WeakMap,zp=new WeakMap,wc=new WeakSet,Eu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...cJ(r.data,this.options),fetchMeta:e.meta??null};case"success":return L(this,jp,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return eO(s)&&s.revert&&C(this,jp)?{...C(this,jp),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),rs.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),C(this,Ia).notify({query:this,type:"updated",action:e})})},sz);function cJ(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sJ(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function g1e(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var gl,iz,m1e=(iz=class extends _b{constructor(e={}){super();Q(this,gl);this.config=e,L(this,gl,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??AU(s,n);let o=this.get(i);return o||(o=new p1e({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){C(this,gl).has(e.queryHash)||(C(this,gl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=C(this,gl).get(e.queryHash);n&&(e.destroy(),n===e&&C(this,gl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){rs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return C(this,gl).get(e)}getAll(){return[...C(this,gl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>M4(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>M4(e,r)):n}notify(e){rs.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){rs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){rs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},gl=new WeakMap,iz),ml,Ci,Hp,yl,Kd,oz,y1e=(oz=class extends aJ{constructor(e){super();Q(this,yl);Q(this,ml);Q(this,Ci);Q(this,Hp);this.mutationId=e.mutationId,L(this,Ci,e.mutationCache),L(this,ml,[]),this.state=e.state||lJ(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){C(this,ml).includes(e)||(C(this,ml).push(e),this.clearGcTimeout(),C(this,Ci).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){L(this,ml,C(this,ml).filter(n=>n!==e)),this.scheduleGc(),C(this,Ci).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){C(this,ml).length||(this.state.status==="pending"?this.scheduleGc():C(this,Ci).remove(this))}continue(){var e;return((e=C(this,Hp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,y,b,v,A,_,I,x,N;const n=()=>{he(this,yl,Kd).call(this,{type:"continue"})};L(this,Hp,oJ({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,O)=>{he(this,yl,Kd).call(this,{type:"failed",failureCount:S,error:O})},onPause:()=>{he(this,yl,Kd).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,Ci).canRun(this)}));const r=this.state.status==="pending",s=!C(this,Hp).canStart();try{if(r)n();else{he(this,yl,Kd).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=C(this,Ci).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));O!==this.state.context&&he(this,yl,Kd).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const S=await C(this,Hp).start();return await((u=(l=C(this,Ci).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=C(this,Ci).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,S,null,e,this.state.context)),he(this,yl,Kd).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(y=C(this,Ci).config).onError)==null?void 0:b.call(y,S,e,this.state.context,this)),await((A=(v=this.options).onError)==null?void 0:A.call(v,S,e,this.state.context)),await((I=(_=C(this,Ci).config).onSettled)==null?void 0:I.call(_,void 0,S,this.state.variables,this.state.context,this)),await((N=(x=this.options).onSettled)==null?void 0:N.call(x,void 0,S,e,this.state.context)),S}finally{he(this,yl,Kd).call(this,{type:"error",error:S})}}finally{C(this,Ci).runNext(this)}}},ml=new WeakMap,Ci=new WeakMap,Hp=new WeakMap,yl=new WeakSet,Kd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),rs.batch(()=>{C(this,ml).forEach(r=>{r.onMutationUpdate(e)}),C(this,Ci).notify({mutation:this,type:"updated",action:e})})},oz);function lJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ru,bc,A_,az,w1e=(az=class extends _b{constructor(e={}){super();Q(this,Ru);Q(this,bc);Q(this,A_);this.config=e,L(this,Ru,new Set),L(this,bc,new Map),L(this,A_,0)}build(e,n,r){const s=new y1e({mutationCache:this,mutationId:++xd(this,A_)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){C(this,Ru).add(e);const n=DA(e);if(typeof n=="string"){const r=C(this,bc).get(n);r?r.push(e):C(this,bc).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(C(this,Ru).delete(e)){const n=DA(e);if(typeof n=="string"){const r=C(this,bc).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&C(this,bc).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=DA(e);if(typeof n=="string"){const r=C(this,bc).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=DA(e);if(typeof n=="string"){const s=(r=C(this,bc).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rs.batch(()=>{C(this,Ru).forEach(e=>{this.notify({type:"removed",mutation:e})}),C(this,Ru).clear(),C(this,bc).clear()})}getAll(){return Array.from(C(this,Ru))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>L4(n,r))}findAll(e={}){return this.getAll().filter(n=>L4(e,n))}notify(e){rs.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return rs.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ii))))}},Ru=new WeakMap,bc=new WeakMap,A_=new WeakMap,az);function DA(t){var e;return(e=t.options.scope)==null?void 0:e.id}function B4(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=nJ(e.options,e.fetchOptions),b=async(v,A,_)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:A,direction:_?"backward":"forward",meta:e.options.meta};return w(P),P})(),N=await y(x),{maxPages:S}=e.options,O=_?c1e:a1e;return{pages:O(v.pages,N,S),pageParams:O(v.pageParams,A,S)}};if(s&&i.length){const v=s==="backward",A=v?b1e:F4,_={pages:i,pageParams:o},I=A(r,_);a=await b(_,I,v)}else{const v=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:F4(r,a);if(c>0&&A==null)break;a=await b(a,A),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function F4(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function b1e(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Rr,uh,dh,y0,w0,hh,b0,v0,cz,v1e=(cz=class{constructor(t={}){Q(this,Rr);Q(this,uh);Q(this,dh);Q(this,y0);Q(this,w0);Q(this,hh);Q(this,b0);Q(this,v0);L(this,Rr,t.queryCache||new m1e),L(this,uh,t.mutationCache||new w1e),L(this,dh,t.defaultOptions||{}),L(this,y0,new Map),L(this,w0,new Map),L(this,hh,0)}mount(){xd(this,hh)._++,C(this,hh)===1&&(L(this,b0,IU.subscribe(async t=>{t&&(await this.resumePausedMutations(),C(this,Rr).onFocus())})),L(this,v0,hI.subscribe(async t=>{t&&(await this.resumePausedMutations(),C(this,Rr).onOnline())})))}unmount(){var t,e;xd(this,hh)._--,C(this,hh)===0&&((t=C(this,b0))==null||t.call(this),L(this,b0,void 0),(e=C(this,v0))==null||e.call(this),L(this,v0,void 0))}isFetching(t){return C(this,Rr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return C(this,uh).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=C(this,Rr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=C(this,Rr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(cf(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return C(this,Rr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=C(this,Rr).get(r.queryHash),i=s==null?void 0:s.state.data,o=i1e(e,i);if(o!==void 0)return C(this,Rr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return rs.batch(()=>C(this,Rr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=C(this,Rr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=C(this,Rr);rs.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=C(this,Rr);return rs.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=rs.batch(()=>C(this,Rr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Ii).catch(Ii)}invalidateQueries(t,e={}){return rs.batch(()=>(C(this,Rr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=rs.batch(()=>C(this,Rr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ii)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ii)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=C(this,Rr).build(this,e);return n.isStaleByTime(cf(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ii).catch(Ii)}fetchInfiniteQuery(t){return t.behavior=B4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ii).catch(Ii)}ensureInfiniteQueryData(t){return t.behavior=B4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return hI.isOnline()?C(this,uh).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,Rr)}getMutationCache(){return C(this,uh)}getDefaultOptions(){return C(this,dh)}setDefaultOptions(t){L(this,dh,t)}setQueryDefaults(t,e){C(this,y0).set(Fg(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...C(this,y0).values()],n={};return e.forEach(r=>{MC(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){C(this,w0).set(Fg(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...C(this,w0).values()],n={};return e.forEach(r=>{MC(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...C(this,dh).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=AU(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===xU&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...C(this,dh).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){C(this,Rr).clear(),C(this,uh).clear()}},Rr=new WeakMap,uh=new WeakMap,dh=new WeakMap,y0=new WeakMap,w0=new WeakMap,hh=new WeakMap,b0=new WeakMap,v0=new WeakMap,cz),so,nn,S_,_i,Gp,E0,fh,ph,x_,C0,_0,qp,Vp,gh,A0,In,Lv,QD,JD,ZD,XD,e3,t3,n3,uJ,lz,E1e=(lz=class extends _b{constructor(e,n){super();Q(this,In);Q(this,so);Q(this,nn);Q(this,S_);Q(this,_i);Q(this,Gp);Q(this,E0);Q(this,fh);Q(this,ph);Q(this,x_);Q(this,C0);Q(this,_0);Q(this,qp);Q(this,Vp);Q(this,gh);Q(this,A0,new Set);this.options=n,L(this,so,e),L(this,ph,null),L(this,fh,YD()),this.options.experimental_prefetchInRender||C(this,fh).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(C(this,nn).addObserver(this),j4(C(this,nn),this.options)?he(this,In,Lv).call(this):this.updateResult(),he(this,In,XD).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return r3(C(this,nn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return r3(C(this,nn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,he(this,In,e3).call(this),he(this,In,t3).call(this),C(this,nn).removeObserver(this)}setOptions(e){const n=this.options,r=C(this,nn);if(this.options=C(this,so).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ma(this.options.enabled,C(this,nn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");he(this,In,n3).call(this),C(this,nn).setOptions(this.options),n._defaulted&&!dI(this.options,n)&&C(this,so).getQueryCache().notify({type:"observerOptionsUpdated",query:C(this,nn),observer:this});const s=this.hasListeners();s&&W4(C(this,nn),r,this.options,n)&&he(this,In,Lv).call(this),this.updateResult(),s&&(C(this,nn)!==r||Ma(this.options.enabled,C(this,nn))!==Ma(n.enabled,C(this,nn))||cf(this.options.staleTime,C(this,nn))!==cf(n.staleTime,C(this,nn)))&&he(this,In,QD).call(this);const i=he(this,In,JD).call(this);s&&(C(this,nn)!==r||Ma(this.options.enabled,C(this,nn))!==Ma(n.enabled,C(this,nn))||i!==C(this,gh))&&he(this,In,ZD).call(this,i)}getOptimisticResult(e){const n=C(this,so).getQueryCache().build(C(this,so),e),r=this.createResult(n,e);return _1e(this,r)&&(L(this,_i,r),L(this,E0,this.options),L(this,Gp,C(this,nn).state)),r}getCurrentResult(){return C(this,_i)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){C(this,A0).add(e)}getCurrentQuery(){return C(this,nn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=C(this,so).defaultQueryOptions(e),r=C(this,so).getQueryCache().build(C(this,so),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return he(this,In,Lv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),C(this,_i)))}createResult(e,n){var S;const r=C(this,nn),s=this.options,i=C(this,_i),o=C(this,Gp),a=C(this,E0),l=e!==r?e.state:C(this,S_),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const O=this.hasListeners(),P=!O&&j4(e,n),F=O&&W4(e,r,n,s);(P||F)&&(d={...d,...cJ(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let O;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,y=!0):O=typeof n.placeholderData=="function"?n.placeholderData((S=C(this,_0))==null?void 0:S.state.data,C(this,_0)):n.placeholderData,O!==void 0&&(w="success",f=KD(i==null?void 0:i.data,O,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===C(this,x_))f=C(this,C0);else try{L(this,x_,n.select),f=n.select(f),f=KD(i==null?void 0:i.data,f,n),L(this,C0,f),L(this,ph,null)}catch(O){L(this,ph,O)}C(this,ph)&&(p=C(this,ph),f=C(this,C0),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",v=w==="pending",A=w==="error",_=v&&b,I=f!==void 0,N={status:w,fetchStatus:d.fetchStatus,isPending:v,isSuccess:w==="success",isError:A,isInitialLoading:_,isLoading:_,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:A&&!I,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&I,isStale:NU(e,n),refetch:this.refetch,promise:C(this,fh),isEnabled:Ma(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const O=G=>{N.status==="error"?G.reject(N.error):N.data!==void 0&&G.resolve(N.data)},P=()=>{const G=L(this,fh,N.promise=YD());O(G)},F=C(this,fh);switch(F.status){case"pending":e.queryHash===r.queryHash&&O(F);break;case"fulfilled":(N.status==="error"||N.data!==F.value)&&P();break;case"rejected":(N.status!=="error"||N.error!==F.reason)&&P();break}}return N}updateResult(){const e=C(this,_i),n=this.createResult(C(this,nn),this.options);if(L(this,Gp,C(this,nn).state),L(this,E0,this.options),C(this,Gp).data!==void 0&&L(this,_0,C(this,nn)),dI(n,e))return;L(this,_i,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!C(this,A0).size)return!0;const o=new Set(i??C(this,A0));return this.options.throwOnError&&o.add("error"),Object.keys(C(this,_i)).some(a=>{const c=a;return C(this,_i)[c]!==e[c]&&o.has(c)})};he(this,In,uJ).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&he(this,In,XD).call(this)}},so=new WeakMap,nn=new WeakMap,S_=new WeakMap,_i=new WeakMap,Gp=new WeakMap,E0=new WeakMap,fh=new WeakMap,ph=new WeakMap,x_=new WeakMap,C0=new WeakMap,_0=new WeakMap,qp=new WeakMap,Vp=new WeakMap,gh=new WeakMap,A0=new WeakMap,In=new WeakSet,Lv=function(e){he(this,In,n3).call(this);let n=C(this,nn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ii)),n},QD=function(){he(this,In,e3).call(this);const e=cf(this.options.staleTime,C(this,nn));if(Bg||C(this,_i).isStale||!qD(e))return;const r=tJ(C(this,_i).dataUpdatedAt,e)+1;L(this,qp,setTimeout(()=>{C(this,_i).isStale||this.updateResult()},r))},JD=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(C(this,nn)):this.options.refetchInterval)??!1},ZD=function(e){he(this,In,t3).call(this),L(this,gh,e),!(Bg||Ma(this.options.enabled,C(this,nn))===!1||!qD(C(this,gh))||C(this,gh)===0)&&L(this,Vp,setInterval(()=>{(this.options.refetchIntervalInBackground||IU.isFocused())&&he(this,In,Lv).call(this)},C(this,gh)))},XD=function(){he(this,In,QD).call(this),he(this,In,ZD).call(this,he(this,In,JD).call(this))},e3=function(){C(this,qp)&&(clearTimeout(C(this,qp)),L(this,qp,void 0))},t3=function(){C(this,Vp)&&(clearInterval(C(this,Vp)),L(this,Vp,void 0))},n3=function(){const e=C(this,so).getQueryCache().build(C(this,so),this.options);if(e===C(this,nn))return;const n=C(this,nn);L(this,nn,e),L(this,S_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},uJ=function(e){rs.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(C(this,_i))}),C(this,so).getQueryCache().notify({query:C(this,nn),type:"observerResultsUpdated"})})},lz);function C1e(t,e){return Ma(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function j4(t,e){return C1e(t,e)||t.state.data!==void 0&&r3(t,e,e.refetchOnMount)}function r3(t,e,n){if(Ma(e.enabled,t)!==!1&&cf(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&NU(t,e)}return!1}function W4(t,e,n,r){return(t!==e||Ma(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&NU(t,n)}function NU(t,e){return Ma(e.enabled,t)!==!1&&t.isStaleByTime(cf(e.staleTime,t))}function _1e(t,e){return!dI(t.getCurrentResult(),e)}var mh,yh,io,Pu,ad,US,s3,uz,A1e=(uz=class extends _b{constructor(n,r){super();Q(this,ad);Q(this,mh);Q(this,yh);Q(this,io);Q(this,Pu);L(this,mh,n),this.setOptions(r),this.bindMethods(),he(this,ad,US).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=C(this,mh).defaultMutationOptions(n),dI(this.options,r)||C(this,mh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:C(this,io),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Fg(r.mutationKey)!==Fg(this.options.mutationKey)?this.reset():((s=C(this,io))==null?void 0:s.state.status)==="pending"&&C(this,io).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=C(this,io))==null||n.removeObserver(this)}onMutationUpdate(n){he(this,ad,US).call(this),he(this,ad,s3).call(this,n)}getCurrentResult(){return C(this,yh)}reset(){var n;(n=C(this,io))==null||n.removeObserver(this),L(this,io,void 0),he(this,ad,US).call(this),he(this,ad,s3).call(this)}mutate(n,r){var s;return L(this,Pu,r),(s=C(this,io))==null||s.removeObserver(this),L(this,io,C(this,mh).getMutationCache().build(C(this,mh),this.options)),C(this,io).addObserver(this),C(this,io).execute(n)}},mh=new WeakMap,yh=new WeakMap,io=new WeakMap,Pu=new WeakMap,ad=new WeakSet,US=function(){var r;const n=((r=C(this,io))==null?void 0:r.state)??lJ();L(this,yh,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},s3=function(n){rs.batch(()=>{var r,s,i,o,a,c,l,u;if(C(this,Pu)&&this.hasListeners()){const d=C(this,yh).variables,h=C(this,yh).context;(n==null?void 0:n.type)==="success"?((s=(r=C(this,Pu)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=C(this,Pu)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=C(this,Pu)).onError)==null||c.call(a,n.error,d,h),(u=(l=C(this,Pu)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(C(this,yh))})})},uz);function S1e(t,e){return SU(t,e)}function x1e(t){return JSON.stringify(t,(e,n)=>I1e(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function I1e(t){if(!z4(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!z4(n)||!n.hasOwnProperty("isPrototypeOf"))}function z4(t){return Object.prototype.toString.call(t)==="[object Object]"}function f1(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:v,enabled:A,notifyOnChangeProps:_,placeholderData:I,refetchInterval:x,refetchIntervalInBackground:N,refetchOnMount:S,refetchOnReconnect:O,refetchOnWindowFocus:P,retryOnMount:F,select:G,staleTime:B,suspense:T,throwOnError:R,config:$,connector:k,query:M,...W}=t;return W}function N1e(t){return{mutationFn(e){return MS(t,e)},mutationKey:["connect"]}}function T1e(t){return{mutationFn(e){return FD(t,e)},mutationKey:["disconnect"]}}function R1e(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return await WQ(t,{...i,address:r})??null},queryKey:P1e(e)}}function P1e(t={}){return["balance",f1(t)]}function O1e(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return g_e(t,{...i,address:r})},queryKey:k1e(e)}}function k1e(t={}){return["ensName",f1(t)]}function D1e(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return m_e(t,{...o,connector:r})},queryKey:M1e(e)}}function M1e(t={}){const{connector:e,...n}=t;return["walletClient",{...f1(n),connectorUid:e==null?void 0:e.uid}]}function L1e(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return jQ(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:U1e(e)}}function U1e(t={}){const{abi:e,...n}=t;return["readContract",f1(n)]}function $1e(t){return{mutationFn(e){return zD(t,e)},mutationKey:["switchChain"]}}function B1e(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return qQ(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:F1e(e)}}function F1e(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",f1(n)]}function j1e(t){return{mutationFn(e){return VQ(t,e)},mutationKey:["writeContract"]}}var dJ=D.createContext(void 0),TU=t=>{const e=D.useContext(dJ);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},W1e=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(dJ.Provider,{value:t,children:e})),hJ=D.createContext(!1),z1e=()=>D.useContext(hJ);hJ.Provider;function H1e(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var G1e=D.createContext(H1e()),q1e=()=>D.useContext(G1e),V1e=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},K1e=t=>{D.useEffect(()=>{t.clearReset()},[t])},Y1e=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||rJ(n,[t.error,r])),Q1e=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},J1e=(t,e)=>t.isLoading&&t.isFetching&&!e,Z1e=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,H4=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function X1e(t,e,n){var d,h,f,p,g;const r=z1e(),s=q1e(),i=TU(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",Q1e(o),V1e(o,s),K1e(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(w=>{const y=u?c.subscribe(rs.batchCalls(w)):Ii;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),Z1e(o,l))throw H4(o,c,s);if(Y1e({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Bg&&J1e(l,r)){const w=a?H4(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(Ii).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function eAe(t,e){return X1e(t,E1e)}function ET(t,e){const n=TU(),[r]=D.useState(()=>new A1e(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(rs.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(Ii)},[r]);if(s.error&&rJ(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function p1(t){const e=eAe({...t,queryKeyHashFn:x1e});return e.queryKey=t.queryKey,e}function Xa(t={}){const e=zi(t);return D.useSyncExternalStore(n=>E_e(e,{onChange:n}),()=>T4(e),()=>T4(e))}function tAe(t={}){const{address:e,query:n={}}=t,r=zi(t),s=Xa({config:r}),i=R1e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return p1({...n,...i,enabled:o})}function nAe(t={}){const e=zi(t);return D.useSyncExternalStore(n=>Y_e(e,{onChange:n}),()=>R4(e),()=>R4(e))}function rAe(t={}){const e=zi(t);return D.useSyncExternalStore(n=>GQ(e,{onChange:n}),()=>P4(e),()=>P4(e))}function sAe(t={}){const{mutation:e}=t,n=zi(t),r=N1e(n),{mutate:s,mutateAsync:i,...o}=ET({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:rAe({config:n})}}function iAe(t={}){const e=zi(t);return D.useSyncExternalStore(n=>HQ(e,{onChange:n}),()=>mc(e),()=>mc(e))}function oAe(t={}){const{mutation:e}=t,n=zi(t),r=T1e(n),{mutate:s,mutateAsync:i,...o}=ET({...e,...r});return{...o,connectors:iAe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function aAe(t={}){const{address:e,query:n={}}=t,r=zi(t),s=Xa({config:r}),i=O1e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return p1({...n,...i,enabled:o})}function cAe(t={}){const e=zi(t);return eJ.useSyncExternalStoreWithSelector(n=>__e(e,{onChange:n}),()=>jD(e,t),()=>jD(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function CE(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=zi(t),a=Xa({config:o}),c=L1e(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return p1({...s,...c,enabled:l,structuralSharing:s.structuralSharing??S1e})}function RU(t={}){const{mutation:e}=t,n=zi(t),r=$1e(n),{mutate:s,mutateAsync:i,...o}=ET({...e,...r});return{...o,chains:nAe({config:n}),switchChain:s,switchChainAsync:i}}function lAe(t={}){const{query:e={},...n}=t,r=zi(n),s=TU(),{address:i,connector:o,status:a}=Cb({config:r}),c=Xa({config:r}),l=t.connector??o,{queryKey:u,...d}=D1e(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),p1({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function Uv(t={}){const{hash:e,query:n={}}=t,r=zi(t),s=Xa({config:r}),i=B1e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return p1({...n,...i,enabled:o})}function $v(t={}){const{mutation:e}=t,n=zi(t),r=j1e(n),{mutate:s,mutateAsync:i,...o}=ET({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const fI=rQ({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),Qo=rQ({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),uAe=Kc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),dAe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=uAe({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),[w,y]=D.useState(null),b=Xa(),{switchChain:v}=RU();D.useEffect(()=>{t&&r&&A()},[t,r]);const A=async()=>{if(l(!0),g(null),b!==Qo.id){g(`Please switch to Ethereum mainnet to mint Pixelawbs. Current network: ${b}`),l(!1);return}try{const S=await sK(r);a(S);const O={};S.forEach(P=>{O[P.id]=0}),f(O)}catch(S){g(S.message)}finally{l(!1)}},_=(S,O)=>{f(P=>({...P,[S]:Math.max(0,O)}))},I=async()=>{const S=Object.entries(h).filter(([,O])=>O>0).map(([O,P])=>({id:O,quantity:P}));if(S.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}if(b!==Qo.id){g("Please switch to Ethereum mainnet to mint Pixelawbs");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const O=await iK(r,S);if(console.log("Mint API result:",O),O.success&&O.mintTransaction){console.log("Got mint transaction:",O.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const P=await w.sendTransaction({to:O.mintTransaction.to,value:BigInt(O.mintTransaction.value),data:O.mintTransaction.data});console.log("Transaction sent successfully:",P),alert(`NFT Minted Successfully: Transaction Hash - ${P}`),e()}catch(P){console.error("Transaction sending failed:",P),g("Transaction failed: "+P.message)}}else throw new Error(O.message||"Could not retrieve minting transaction.")}catch(O){console.error("Minting failed:",O),g("Minting failed: "+O.message)}finally{d(!1)}},x=(S,O)=>`${parseFloat(S)} ${O}`,N=()=>{n&&n()};return t?m.jsx(X_,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsxs("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:[p,b!==Qo.id&&m.jsx("div",{style:{marginTop:"10px"},children:m.jsx("button",{onClick:()=>v({chainId:Qo.id}),style:{backgroundColor:"#008000",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Switch to Ethereum"})})]}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(S=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:S.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",x(S.token_price,S.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",S.wallet_limit===4294967295?"Unlimited":S.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:S.wallet_limit===4294967295?999:S.wallet_limit,value:h[S.id]||0,onChange:O=>_(S.id,parseInt(O.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},S.id))]}),m.jsx("button",{onClick:()=>void I(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},fJ=t=>[t.image_url,t.image,t.image_url_shrunk,t.old_image_url].filter(Boolean)[0]||"",pJ=({src:t,alt:e,style:n})=>{const[r,s]=D.useState(t),[i,o]=D.useState(!1),[a,c]=D.useState(0);D.useEffect(()=>{s(t),o(!1),c(0)},[t]);const l=()=>{a===0?(s(t),c(1)):a===1?(s(`https://images.weserv.nl/?url=${encodeURIComponent(t)}`),c(2)):o(!0)};return i?m.jsx("div",{style:{...n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",width:(n==null?void 0:n.width)||"100%",height:(n==null?void 0:n.height)||"150px"},children:"Image not available"}):m.jsx("img",{src:r,alt:e,style:n,crossOrigin:a===0?"anonymous":void 0,onError:l})},hAe=Kc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),fAe=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},pAe=({nft:t,onClose:e})=>{const n=hAe(),r=D.useRef(null),s=fAe(t.attributes);return m.jsx(X_,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx(pJ,{src:fJ(t),alt:t.name,style:{width:"100%",height:"auto",marginBottom:"10px"}}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},gAe=Symbol(),G4=Object.getPrototypeOf,i3=new WeakMap,mAe=t=>t&&(i3.has(t)?i3.get(t):G4(t)===Object.prototype||G4(t)===Array.prototype),yAe=t=>mAe(t)&&t[gAe]||null,q4=(t,e=!0)=>{i3.set(t,e)},pI={},tO=t=>typeof t=="object"&&t!==null,eh=new WeakMap,Bv=new WeakSet,wAe=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>tO(l)&&!Bv.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return q4(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:w,configurable:!0};if(Bv.has(g))q4(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(eh.has(g)){const[b,v]=eh.get(g);y.value=i(b,v(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!tO(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,O=++a[0])=>{d!==O&&(d=O,h.forEach(P=>P(S,O)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,y.forEach(([O])=>{const P=O[1](S);P>d&&(d=P)})),d),w=S=>(O,P)=>{const F=[...O];F[1]=[S,...F[1]],f(F,P)},y=new Map,b=(S,O)=>{if((pI?"production":void 0)!=="production"&&y.has(S))throw new Error("prop listener already exists");if(h.size){const P=O[3](w(S));y.set(S,[O,P])}else y.set(S,[O])},v=S=>{var O;const P=y.get(S);P&&(y.delete(S),(O=P[1])==null||O.call(P))},A=S=>(h.add(S),h.size===1&&y.forEach(([P,F],G)=>{if((pI?"production":void 0)!=="production"&&F)throw new Error("remove already exists");const B=P[3](w(G));y.set(G,[P,B])}),()=>{h.delete(S),h.size===0&&y.forEach(([P,F],G)=>{F&&(F(),y.set(G,[P]))})}),_=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(_,{deleteProperty(S,O){const P=Reflect.get(S,O);v(O);const F=Reflect.deleteProperty(S,O);return F&&f(["delete",[O],P]),F},set(S,O,P,F){const G=Reflect.has(S,O),B=Reflect.get(S,O,F);if(G&&(t(B,P)||o.has(P)&&t(B,o.get(P))))return!0;v(O),tO(P)&&(P=yAe(P)||P);let T=P;if(P instanceof Promise)P.then(R=>{P.status="fulfilled",P.value=R,f(["resolve",[O],R])}).catch(R=>{P.status="rejected",P.reason=R,f(["reject",[O],R])});else{!eh.has(P)&&n(P)&&(T=c(P));const R=!Bv.has(T)&&eh.get(T);R&&b(O,R)}return Reflect.set(S,O,T,F),f(["set",[O],P,B]),!0}});o.set(l,x);const N=[_,g,i,A];return eh.set(x,N),Reflect.ownKeys(l).forEach(S=>{const O=Object.getOwnPropertyDescriptor(l,S);"value"in O&&(x[S]=l[S],delete O.value,delete O.writable),Object.defineProperty(_,S,O)}),x})=>[c,eh,Bv,t,e,n,r,s,i,o,a],[bAe]=wAe();function ur(t={}){return bAe(t)}function mi(t,e,n){const r=eh.get(t);(pI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function LC(t,e){const n=eh.get(t);(pI?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function jg(t){return Bv.add(t),t}function wi(t,e,n,r){let s=t[e];return mi(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function vAe(t){const e=ur({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var V4={};const We={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof V4<"u"?V4.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},gJ={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=We.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var EAe=20,CAe=1,Wg=1e6,K4=1e6,_Ae=-7,AAe=21,SAe=!1,g1="[big.js] ",mm=g1+"Invalid ",CT=mm+"decimal places",xAe=mm+"rounding mode",mJ=g1+"Division by zero",kn={},Hl=void 0,IAe=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function yJ(){function t(e){var n=this;if(!(n instanceof t))return e===Hl?yJ():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(mm+"value");e=e===0&&1/e<0?"-0":String(e)}NAe(n,e)}n.constructor=t}return t.prototype=kn,t.DP=EAe,t.RM=CAe,t.NE=_Ae,t.PE=AAe,t.strict=SAe,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function NAe(t,e){var n,r,s;if(!IAe.test(e))throw Error(mm+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function ym(t,e,n,r){var s=t.c;if(n===Hl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(xAe);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Hl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Hl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function wm(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}kn.abs=function(){var t=new this.constructor(this);return t.s=1,t};kn.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};kn.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Wg)throw Error(CT);if(!s[0])throw Error(mJ);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,y=t,b=y.c=[],v=0,A=o+(y.e=e.e-t.e)+1;for(y.s=i,i=A<0?0:A,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Hl)&&i--);return!b[0]&&v!=1&&(b.shift(),y.e--,A--),v>A&&ym(y,A,n.RM,g[0]!==Hl),y};kn.eq=function(t){return this.cmp(t)===0};kn.gt=function(t){return this.cmp(t)>0};kn.gte=function(t){return this.cmp(t)>-1};kn.lt=function(t){return this.cmp(t)<0};kn.lte=function(t){return this.cmp(t)<1};kn.minus=kn.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};kn.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(mJ);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};kn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};kn.plus=kn.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};kn.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-K4||t>K4)throw Error(mm+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};kn.prec=function(t,e){if(t!==~~t||t<1||t>Wg)throw Error(mm+"precision");return ym(new this.constructor(this),t,e)};kn.round=function(t,e){if(t===Hl)t=0;else if(t!==~~t||t<-Wg||t>Wg)throw Error(CT);return ym(new this.constructor(this),t+this.e+1,e)};kn.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(g1+"No square root");i=Math.sqrt(+wm(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return ym(t,(s.DP-=4)+t.e+1,s.RM)};kn.times=kn.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};kn.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Hl){if(t!==~~t||t<0||t>Wg)throw Error(CT);for(n=ym(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return wm(n,!0,!!r)};kn.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Hl){if(t!==~~t||t<0||t>Wg)throw Error(CT);for(n=ym(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return wm(n,!1,!!r)};kn[Symbol.for("nodejs.util.inspect.custom")]=kn.toJSON=kn.toString=function(){var t=this,e=t.constructor;return wm(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};kn.toNumber=function(){var t=+wm(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(g1+"Imprecise conversion");return t};kn.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Hl){if(t!==~~t||t<1||t>Wg)throw Error(mm+"precision");for(n=ym(new r(n),t,e);n.c.length<t;)n.c.push(0)}return wm(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};kn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(g1+"valueOf disallowed");return wm(t,t.e<=e.NE||t.e>=e.PE,!0)};var Ml=yJ();const TAe={bigNumber(t){return t?new Ml(t):new Ml(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ml(0);const n=new Ml(t),r=new Ml(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},RAe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],PAe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],OAe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],kAe={getERC20Abi:t=>We.USDT_CONTRACT_ADDRESSES.includes(t)?OAe:RAe,getSwapAbi:()=>PAe},kd={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Dt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function nO(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const It={setItem(t,e){Fv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Fv())return localStorage.getItem(t)||void 0},removeItem(t){Fv()&&localStorage.removeItem(t)},clear(){Fv()&&localStorage.clear()}};function Fv(){return typeof window<"u"&&typeof localStorage<"u"}function Qu(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var Y4={};const rO=(typeof process<"u"&&typeof Y4<"u"?Y4.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",wJ=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],DAe="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Bn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:rO,SECURE_SITE_DASHBOARD:`${rO}/dashboard`,SECURE_SITE_FAVICON:`${rO}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Qe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Qe.getActiveNamespace(),e=Qe.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{It.setItem(Dt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=It.getItem(Dt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{It.removeItem(Dt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{It.setItem(Dt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{It.setItem(Dt.ACTIVE_CAIP_NETWORK_ID,t),Qe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return It.getItem(Dt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{It.removeItem(Dt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=nO(t);It.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Qe.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),It.setItem(Dt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=It.getItem(Dt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=nO(t);It.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return It.getItem(Dt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=nO(t);return It.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{It.setItem(Dt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return It.getItem(Dt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{It.removeItem(Dt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return It.getItem(Dt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=It.getItem(Dt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{It.setItem(Dt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return It.getItem(Dt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=It.getItem(Dt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));It.setItem(Dt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Qe.getConnectedNamespaces();e.includes(t)||(e.push(t),Qe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Qe.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Qe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return It.getItem(Dt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{It.setItem(Dt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{It.removeItem(Dt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=It.getItem(Dt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Qe.getBalanceCache();It.setItem(Dt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Qe.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Qe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Qe.getBalanceCache();e[t.caipAddress]=t,It.setItem(Dt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=It.getItem(Dt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Qe.getBalanceCache();It.setItem(Dt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Qe.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Qe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Qe.getNativeBalanceCache();e[t.caipAddress]=t,It.setItem(Dt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=It.getItem(Dt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Qe.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Qe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Qe.getEnsCache();e[t.address]=t,It.setItem(Dt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Qe.getEnsCache();It.setItem(Dt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=It.getItem(Dt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Qe.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Qe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Qe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},It.setItem(Dt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Qe.getIdentityCache();It.setItem(Dt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{It.removeItem(Dt.PORTFOLIO_CACHE),It.removeItem(Dt.NATIVE_BALANCE_CACHE),It.removeItem(Dt.ENS_CACHE),It.removeItem(Dt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{It.setItem(Dt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=It.getItem(Dt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Qe.getConnections(),[e]:t};It.setItem(Dt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=It.getItem(Dt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},at={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return at.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Bn.TEN_SEC_MS:!0},isAllowedRetry(t,e=Bn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(at.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Bn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(at.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!at.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Qe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,at.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return We.W3M_API_URL},getBlockchainApiUrl(){return We.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return We.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Bn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in We.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function uv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let m1=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await uv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await uv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await uv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await uv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await uv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const MAe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Bn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(at.isTelegram()){if(at.isIos())return t.filter(e=>e!=="google");if(at.isMac())return t.filter(e=>e!=="x");if(at.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ht=ur({features:Bn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Bn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),be={state:ht,subscribeKey(t,e){return wi(ht,t,e)},setOptions(t){Object.assign(ht,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...ht.remoteFeatures,...t};ht.remoteFeatures=e,(n=ht.remoteFeatures)!=null&&n.socials&&(ht.remoteFeatures.socials=MAe.filterSocialsByPlatform(ht.remoteFeatures.socials))},setFeatures(t){if(!t)return;ht.features||(ht.features=Bn.DEFAULT_FEATURES);const e={...ht.features,...t};ht.features=e},setProjectId(t){ht.projectId=t},setCustomRpcUrls(t){ht.customRpcUrls=t},setAllWallets(t){ht.allWallets=t},setIncludeWalletIds(t){ht.includeWalletIds=t},setExcludeWalletIds(t){ht.excludeWalletIds=t},setFeaturedWalletIds(t){ht.featuredWalletIds=t},setTokens(t){ht.tokens=t},setTermsConditionsUrl(t){ht.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ht.privacyPolicyUrl=t},setCustomWallets(t){ht.customWallets=t},setIsSiweEnabled(t){ht.isSiweEnabled=t},setIsUniversalProvider(t){ht.isUniversalProvider=t},setSdkVersion(t){ht.sdkVersion=t},setMetadata(t){ht.metadata=t},setDisableAppend(t){ht.disableAppend=t},setEIP6963Enabled(t){ht.enableEIP6963=t},setDebug(t){ht.debug=t},setEnableWalletConnect(t){ht.enableWalletConnect=t},setEnableWalletGuide(t){ht.enableWalletGuide=t},setEnableAuthLogger(t){ht.enableAuthLogger=t},setEnableWallets(t){ht.enableWallets=t},setPreferUniversalLinks(t){ht.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){ht.hasMultipleAddresses=t},setSIWX(t){ht.siwx=t},setConnectMethodsOrder(t){ht.features={...ht.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ht.features={...ht.features,walletFeaturesOrder:t}},setSocialsOrder(t){ht.remoteFeatures={...ht.remoteFeatures,socials:t}},setCollapseWallets(t){ht.features={...ht.features,collapseWallets:t}},setEnableEmbedded(t){ht.enableEmbedded=t},setAllowUnsupportedChain(t){ht.allowUnsupportedChain=t},setManualWCControl(t){ht.manualWCControl=t},setEnableNetworkSwitch(t){ht.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ht.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ht.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ht.universalProviderConfigOverride},getSnapshot(){return LC(ht)}},LAe=Object.freeze({enabled:!0,events:[]}),UAe=new m1({baseUrl:at.getAnalyticsUrl(),clientId:null}),$Ae=5,BAe=60*1e3,Dd=ur({...LAe}),FAe={state:Dd,subscribeKey(t,e){return wi(Dd,t,e)},async sendError(t,e){if(!Dd.enabled)return;const n=Date.now();if(Dd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<BAe}).length>=$Ae)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Dd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=be.state;await UAe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:at.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Dd.enabled=!0},disable(){Dd.enabled=!1},clearEvents(){Dd.events=[]}};let o3=class a3 extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,a3.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,a3):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function Q4(t,e){const n=t instanceof o3?t:new o3(t instanceof Error?t.message:String(t),e,t);throw FAe.sendError(n,n.category),n}function ua(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return Q4(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return Q4(a,e)}},n[r]=i}else n[r]=s}),n}const Nl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},jAe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Nl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Nl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Nl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Nl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===We.CHAIN.SOLANA&&t===Nl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Nl.COINBASE.url}/dapp?cb_url=${r}`)}},Ro=ur({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),WAe={state:Ro,subscribeNetworkImages(t){return mi(Ro.networkImages,()=>t(Ro.networkImages))},subscribeKey(t,e){return wi(Ro,t,e)},subscribe(t){return mi(Ro,()=>t(Ro))},setWalletImage(t,e){Ro.walletImages[t]=e},setNetworkImage(t,e){Ro.networkImages[t]=e},setChainImage(t,e){Ro.chainImages[t]=e},setConnectorImage(t,e){Ro.connectorImages={...Ro.connectorImages,[t]:e}},setTokenImage(t,e){Ro.tokenImages[t]=e},setCurrencyImage(t,e){Ro.currencyImages[t]=e}},Ic=ua(WAe),zAe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},sO=ur({networkImagePromises:{}}),bJ={async fetchWalletImage(t){if(t)return await ct._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(sO.networkImagePromises[t]||(sO.networkImagePromises[t]=ct._fetchNetworkImage(t)),await sO.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Ic.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Ic.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Ic.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Ic.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Ic.state.connectorImages[t.imageId]},getChainImage(t){return Ic.state.networkImages[zAe[t]]}},Md=ur({message:"",variant:"info",open:!1}),HAe={state:Md,subscribeKey(t,e){return wi(Md,t,e)},open(t,e){const{debug:n}=be.state,{shortMessage:r,longMessage:s}=t;n&&(Md.message=r,Md.variant=e,Md.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Md.open=!1,Md.message="",Md.variant="info"}},Ll=ua(HAe),GAe=at.getAnalyticsUrl(),qAe=new m1({baseUrl:GAe,clientId:null}),VAe=["MODAL_CREATED"],uu=ur({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),yr={state:uu,subscribe(t){return mi(uu,()=>t(uu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=be.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ye.state.address;if(VAe.includes(t.data.event)||typeof window>"u")return;await qAe.post({path:"/e",params:yr.getSdkProperties(),body:{eventId:at.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),uu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===We.HTTP_STATUS_CODES.FORBIDDEN&&!uu.reportedErrors.FORBIDDEN&&(Ll.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Fv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),uu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;uu.timestamp=Date.now(),uu.data=t,(e=be.state.features)!=null&&e.analytics&&yr._sendAnalyticsEvent(uu)}},KAe=at.getApiUrl(),qi=new m1({baseUrl:KAe,clientId:null}),YAe=40,J4=4,QAe=20,Mt=ur({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ct={state:Mt,subscribeKey(t,e){return wi(Mt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=be.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return be.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${qi.baseUrl}/getWalletImage/${t}`,n=await qi.getBlob({path:e,params:ct._getSdkProperties()});Ic.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${qi.baseUrl}/public/getAssetImage/${t}`,n=await qi.getBlob({path:e,params:ct._getSdkProperties()});Ic.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${qi.baseUrl}/public/getAssetImage/${t}`,n=await qi.getBlob({path:e,params:ct._getSdkProperties()});Ic.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${qi.baseUrl}/public/getCurrencyImage/${t}`,n=await qi.getBlob({path:e,params:ct._getSdkProperties()});Ic.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${qi.baseUrl}/public/getTokenImage/${t}`,n=await qi.getBlob({path:e,params:ct._getSdkProperties()});Ic.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return at.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Nl.COINBASE.id?!0:H.state.activeChain==="solana"&&(n.id===Nl.SOLFLARE.id||n.id===Nl.PHANTOM.id)):t},async fetchProjectConfig(){return(await qi.get({path:"/appkit/v1/config",params:ct._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await qi.get({path:"/projects/v1/origins",params:ct._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=H.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!bJ.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>ct._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=je.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>ct._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ct._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ct._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];ct._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Nl).map(o=>o.id));const r=await qi.get({path:"/getWallets",params:{...ct._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:ct._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=be.state;if(t!=null&&t.length){const e={...ct._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??J4,include:t},{data:n}=await ct.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ct._fetchWalletImage(i))),Mt.featured=r,Mt.allFeatured=r}},async fetchRecommendedWallets(){try{Mt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=be.state,r=[...e??[],...n??[]].filter(Boolean),s=H.getRequestedCaipNetworkIds().join(","),i={page:1,entries:J4,include:t,exclude:r,chains:s},{data:o,count:a}=await ct.fetchWallets(i),c=Qe.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>ct._fetchWalletImage(d))),Mt.recommended=o,Mt.allRecommended=o,Mt.count=a??0}catch{}finally{Mt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=be.state,s=H.getRequestedCaipNetworkIds().join(","),i=[...Mt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:YAe,include:e,exclude:i,chains:s},{data:a,count:c}=await ct.fetchWallets(o),l=a.slice(0,QAe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ct._fetchWalletImage(u))),Mt.wallets=at.uniqueBy([...Mt.wallets,...ct._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Mt.count=c>Mt.count?c:Mt.count,Mt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await ct.fetchWallets(e);n&&n.forEach(r=>{Mt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=be.state,s=H.getRequestedCaipNetworkIds().join(",");Mt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await ct.fetchWallets(i);yr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ct._fetchWalletImage(c)),at.wait(300)]),Mt.search=ct._filterOutExtensions(o)},initPromise(t,e){const n=Mt.promises[t];return n||(Mt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&ct.initPromise("connectorImages",ct.fetchConnectorImages),e&&ct.initPromise("featuredWallets",ct.fetchFeaturedWallets),n&&ct.initPromise("recommendedWallets",ct.fetchRecommendedWallets),r&&ct.initPromise("networkImages",ct.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=be.state.features)!=null&&t.analytics&&ct.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await qi.get({path:"/getAnalyticsConfig",params:ct._getSdkProperties()});be.setFeatures({analytics:t})}catch{be.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Mt.featured=Mt.allFeatured,Mt.recommended=Mt.allRecommended;return}const e=H.getRequestedCaipNetworkIds().join(",");Mt.featured=Mt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.recommended=Mt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.filteredWallets=Mt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Mt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Mt.featured=Mt.allFeatured,Mt.recommended=Mt.allRecommended;return}const e=H.getRequestedCaipNetworkIds().join(",");Mt.featured=Mt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.recommended=Mt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.filteredWallets=Mt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Mn=ur({view:"Connect",history:["Connect"],transactionStack:[]}),JAe={state:Mn,subscribeKey(t,e){return wi(Mn,t,e)},pushTransactionStack(t){Mn.transactionStack.push(t)},popTransactionStack(t){const e=Mn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Wt.goBack();break;case"cancel":s==null||s(),Wt.goBack();break}},push(t,e){t!==Mn.view&&(Mn.view=t,Mn.history.push(t),Mn.data=e)},reset(t,e){Mn.view=t,Mn.history=[t],Mn.data=e},replace(t,e){Mn.history.at(-1)===t||(Mn.view=t,Mn.history[Mn.history.length-1]=t,Mn.data=e)},goBack(){var r;const t=H.state.activeCaipAddress,e=Wt.state.view==="ConnectingFarcaster",n=!t&&e;if(Mn.history.length>1){Mn.history.pop();const[s]=Mn.history.slice(-1);s&&(t&&s==="Connect"?Mn.view="Account":Mn.view=s)}else _s.close();(r=Mn.data)!=null&&r.wallet&&(Mn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ye.setFarcasterUrl(void 0,H.state.activeChain);const a=je.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=LC(be.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Mn.history.length>1){Mn.history=Mn.history.slice(0,t+1);const[e]=Mn.history.slice(-1);e&&(Mn.view=e)}},goBackOrCloseModal(){Wt.state.history.length>1?Wt.goBack():_s.close()}},Wt=ua(JAe),du=ur({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),c3={state:du,subscribe(t){return mi(du,()=>t(du))},setThemeMode(t){du.themeMode=t;try{const e=je.getAuthConnector();if(e){const n=c3.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Qu(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){du.themeVariables={...du.themeVariables,...t};try{const e=je.getAuthConnector();if(e){const n=c3.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Qu(du.themeVariables,du.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return LC(du)}},lo=ua(c3),vJ={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},fn=ur({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...vJ},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),ZAe={state:fn,subscribe(t){return mi(fn,()=>{t(fn)})},subscribeKey(t,e){return wi(fn,t,e)},initialize(t){t.forEach(e=>{const n=Qe.getConnectedConnectorId(e);n&&je.setConnectorId(n,e)})},setActiveConnector(t){t&&(fn.activeConnector=jg(t))},setConnectors(t){t.filter(s=>!fn.allConnectors.some(i=>i.id===s.id&&je.getConnectorName(i.name)===je.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&fn.allConnectors.push(jg(s))});const n=je.getEnabledNamespaces(),r=je.getEnabledConnectors(n);fn.connectors=je.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(fn.filterByNamespaceMap).forEach(e=>{fn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{fn.filterByNamespaceMap[e]=!0}),je.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){fn.filterByNamespaceMap[t]=e,je.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=je.getEnabledNamespaces(),e=je.getEnabledConnectors(t),n=je.areAllNamespacesEnabled();fn.connectors=je.mergeMultiChainConnectors(e),n?ct.clearFilterByNamespaces():ct.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(fn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return fn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(fn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=je.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===We.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=je.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===We.CONNECTOR_ID.AUTH){const s=t,i=LC(be.state),o=lo.getSnapshot().themeMode,a=lo.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Qu(a,o)}),je.setConnectors([t])}else je.setConnectors([t])},getAuthConnector(t){var r;const e=t||H.state.activeChain,n=fn.connectors.find(s=>s.id===We.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return fn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return fn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return fn.allConnectors.filter(r=>r.chain===H.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=LC(be.state),r=lo.getSnapshot().themeMode,s=lo.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Qu(s,r)})},getConnectorsByNamespace(t){const e=fn.allConnectors.filter(n=>n.chain===t);return je.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=je.getConnector(t.id,t.rdns),n=H.state.activeChain;jAe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Wt.push("ConnectingExternal",{connector:e}):Wt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?je.getConnectorsByNamespace(t):je.mergeMultiChainConnectors(fn.allConnectors)},setFilterByNamespace(t){fn.filterByNamespace=t,fn.connectors=je.getConnectors(t),ct.setFilterByNamespace(t)},setConnectorId(t,e){t&&(fn.activeConnectorIds={...fn.activeConnectorIds,[e]:t},Qe.setConnectedConnectorId(e,t))},removeConnectorId(t){fn.activeConnectorIds={...fn.activeConnectorIds,[t]:void 0},Qe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return fn.activeConnectorIds[t]},isConnected(t){return t?!!fn.activeConnectorIds[t]:Object.values(fn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){fn.activeConnectorIds={...vJ}}},je=ua(ZAe);var Mw={};const XAe="https://secure.walletconnect.org/sdk",eSe=(typeof process<"u"&&typeof Mw<"u"?Mw.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||XAe,tSe=(typeof process<"u"&&typeof Mw<"u"?Mw.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",nSe=(typeof process<"u"&&typeof Mw<"u"?Mw.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ve={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Gs={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},ap=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Qr=ur({...ap}),rSe={state:Qr,subscribeKey(t,e){return wi(Qr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=at.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Qr.message=ap.message,Qr.variant=ap.variant,Qr.svg=ap.svg,Qr.open=ap.open,Qr.autoClose=ap.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ap.autoClose}){Qr.open?(Qr.open=!1,setTimeout(()=>{Qr.message=t,Qr.variant=n,Qr.svg=e,Qr.open=!0,Qr.autoClose=r},150)):(Qr.message=t,Qr.variant=n,Qr.svg=e,Qr.open=!0,Qr.autoClose=r)}},Oc=rSe,Qn=ur({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),sSe={state:Qn,subscribe(t){return mi(Qn,()=>t(Qn))},setLastNetworkInView(t){Qn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Qn.loading=!0;try{const s=await pt.fetchTransactions({account:t,cursor:Qn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=jv.filterSpamTransactions(s.data),o=jv.filterByConnectedChain(i),a=[...Qn.transactions,...o];Qn.loading=!1,e==="coinbase"?Qn.coinbaseTransactions=jv.groupTransactionsByYearAndMonth(Qn.coinbaseTransactions,s.data):(Qn.transactions=a,Qn.transactionsByYear=jv.groupTransactionsByYearAndMonth(Qn.transactionsByYear,o)),Qn.empty=a.length===0,Qn.next=s.next?s.next:void 0}catch{const i=H.state.activeChain;yr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:be.state.projectId,cursor:Qn.next,isSmartAccount:((r=Ye.state.preferredAccountTypes)==null?void 0:r[i])===Gs.ACCOUNT_TYPES.SMART_ACCOUNT}}),Oc.showError("Failed to fetch transactions"),Qn.loading=!1,Qn.empty=!0,Qn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Qn.next=void 0},resetTransactions(){Qn.transactions=[],Qn.transactionsByYear={},Qn.lastNetworkInView=void 0,Qn.loading=!1,Qn.empty=!1,Qn.next=void 0}},jv=ua(sSe,"API_ERROR"),Hn=ur({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Kf;const iSe={state:Hn,subscribeKey(t,e){return wi(Hn,t,e)},_getClient(){return Hn._client},setClient(t){Hn._client=jg(t)},async connectWalletConnect(){var t,e,n,r;if(at.isTelegram()||at.isSafari()&&at.isIos()){if(Kf){await Kf,Kf=void 0;return}if(!at.isPairingExpired(Hn==null?void 0:Hn.wcPairingExpiry)){const s=Hn.wcUri;Hn.wcUri=s;return}Kf=(e=(t=gt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),gt.state.status="connecting",await Kf,Kf=void 0,Hn.wcPairingExpiry=void 0,gt.state.status="connected"}else await((r=(n=gt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=gt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&H.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=gt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||H.state.activeChain;e&&je.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;_s.setLoading(!0,H.state.activeChain);const n=je.getAuthConnector();n&&(Ye.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Qe.setPreferredAccountTypes(Ye.state.preferredAccountTypes??{[e]:t}),await gt.reconnectExternal(n),_s.setLoading(!1,H.state.activeChain),yr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=gt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=gt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=gt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=gt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=gt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=gt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=gt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=gt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=gt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=gt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=gt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=gt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Hn.wcUri=void 0,Hn.wcPairingExpiry=void 0,Hn.wcLinking=void 0,Hn.recentWallet=void 0,Hn.status="disconnected",jv.resetTransactions(),Qe.deleteWalletConnectDeepLink()},resetUri(){Hn.wcUri=void 0,Hn.wcPairingExpiry=void 0,Kf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=gt.state;t&&Qe.setWalletConnectDeepLink(t),e&&Qe.setAppKitRecent(e),yr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Wt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Hn.wcBasic=t},setUri(t){Hn.wcUri=t,Hn.wcPairingExpiry=at.getPairingExpiry()},setWcLinking(t){Hn.wcLinking=t},setWcError(t){Hn.wcError=t,Hn.buffering=!1},setRecentWallet(t){Hn.recentWallet=t},setBuffering(t){Hn.buffering=t},setStatus(t){Hn.status=t},async disconnect(t){var e;try{await((e=gt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new o3("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Hn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(je.state.activeConnectorIds[n]===t.connectorId){const i=H.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Ye.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=je.getConnector(t.connectorId);i?gt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},gt=ua(iSe),zm=ur({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Gl={state:zm,subscribe(t){return mi(zm,()=>t(zm))},subscribeOpen(t){return wi(zm,"open",t)},set(t){Object.assign(zm,{...zm,...t})}},iO={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return hm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},Z4={async getMyTokensWithBalance(t){const e=Ye.state.address,n=H.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await pt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=iO.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await gt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await gt.walletGetAssets({account:t,chainFilter:[s]});return iO.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>iO.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:H.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Rn=ur({tokenBalances:[],loading:!1}),oSe={state:Rn,subscribe(t){return mi(Rn,()=>t(Rn))},subscribeKey(t,e){return wi(Rn,t,e)},setToken(t){t&&(Rn.token=jg(t))},setTokenAmount(t){Rn.sendTokenAmount=t},setReceiverAddress(t){Rn.receiverAddress=t},setReceiverProfileImageUrl(t){Rn.receiverProfileImageUrl=t},setReceiverProfileName(t){Rn.receiverProfileName=t},setNetworkBalanceInUsd(t){Rn.networkBalanceInUSD=t},setLoading(t){Rn.loading=t},async sendToken(){var t;try{switch(En.setLoading(!0),(t=H.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await En.sendEvmToken();return;case"solana":await En.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{En.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=H.state.activeChain,e=(n=Ye.state.preferredAccountTypes)==null?void 0:n[t];if(!En.state.sendTokenAmount||!En.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!En.state.token)throw new Error("A token is required");(r=En.state.token)!=null&&r.address?(yr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Gs.ACCOUNT_TYPES.SMART_ACCOUNT,token:En.state.token.address,amount:En.state.sendTokenAmount,network:((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await En.sendERC20Token({receiverAddress:En.state.receiverAddress,tokenAddress:En.state.token.address,sendTokenAmount:En.state.sendTokenAmount,decimals:En.state.token.quantity.decimals})):(yr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Gs.ACCOUNT_TYPES.SMART_ACCOUNT,token:En.state.token.symbol||"",amount:En.state.sendTokenAmount,network:((i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await En.sendNativeToken({receiverAddress:En.state.receiverAddress,sendTokenAmount:En.state.sendTokenAmount,decimals:En.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Rn.loading=!0;const e=(i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=H.state.activeCaipAddress,s=r?at.getPlainAddress(r):void 0;if(Rn.lastRetry&&!at.isAllowedRetry(Rn.lastRetry,30*Bn.ONE_SEC_MS))return Rn.loading=!1,[];try{if(s&&e&&n){const a=await Z4.getMyTokensWithBalance();return Rn.tokenBalances=a,Rn.lastRetry=void 0,a}}catch(a){Rn.lastRetry=Date.now(),t==null||t(a),Oc.showError("Token Balance Unavailable")}finally{Rn.loading=!1}return[]},fetchNetworkBalance(){if(Rn.tokenBalances.length===0)return;const t=Z4.mapBalancesToSwapTokens(Rn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===H.getActiveNetworkTokenAddress());e&&(Rn.networkBalanceInUSD=e?TAe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Wt.pushTransactionStack({});const e=t.receiverAddress,n=Ye.state.address,r=gt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await gt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),yr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ye.state.preferredAccountTypes)==null?void 0:i.eip155)===Gs.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=En.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=gt._getClient())==null||c.updateBalance("eip155"),En.resetSend()},async sendERC20Token(t){Wt.pushTransactionStack({onSuccess(){Wt.replace("Account")}});const e=gt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ye.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=at.getPlainAddress(t.tokenAddress);await gt.writeContract({fromAddress:Ye.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:kAe.getERC20Abi(n),chainNamespace:"eip155"}),En.resetSend()}},async sendSolanaToken(){var t;if(!En.state.sendTokenAmount||!En.state.receiverAddress)throw new Error("An amount and receiver address are required");Wt.pushTransactionStack({onSuccess(){Wt.replace("Account")}}),await gt.sendTransaction({chainNamespace:"solana",to:En.state.receiverAddress,value:En.state.sendTokenAmount}),(t=gt._getClient())==null||t.updateBalance("solana"),En.resetSend()},resetSend(){Rn.token=void 0,Rn.sendTokenAmount=void 0,Rn.receiverAddress=void 0,Rn.receiverProfileImageUrl=void 0,Rn.receiverProfileName=void 0,Rn.loading=!1,Rn.tokenBalances=[]}},En=ua(oSe),oO={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},MA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ke=ur({chains:vAe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),aSe={state:ke,subscribe(t){return mi(ke,()=>{t(ke)})},subscribeKey(t,e){return wi(ke,t,e)},subscribeChainProp(t,e,n){let r;return mi(ke.chains,()=>{var i;const s=n||ke.activeChain;if(s){const o=(i=ke.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Qe.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=be.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(ke.noAdapters=!0),ke.noAdapters||(ke.activeChain=a==null?void 0:a.namespace,ke.activeCaipNetwork=i,H.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),ke.activeChain&&Gl.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);H.state.chains.set(u,{namespace:u,networkState:ur({...MA,caipNetwork:d==null?void 0:d[0]}),accountState:ur(oO),caipNetworks:d??[],...n}),H.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(ke.activeChain===t){const r=Array.from(ke.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&H.setActiveCaipNetwork(s)}}ke.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){ke.chains.set(t.namespace,{namespace:t.namespace,networkState:{...MA,caipNetwork:r[0]},accountState:oO,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),H.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=ke.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),ke.chains.set(t.chainNamespace,{...e,caipNetworks:r}),H.setRequestedCaipNetworks(r,t.chainNamespace),je.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=ke.chains.get(t);if(n){const o=((r=ke.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&H.setActiveCaipNetwork(n.caipNetworks[0]),ke.chains.set(t,{...n,caipNetworks:a}),H.setRequestedCaipNetworks(a||[],t),a.length===0&&je.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=ke.chains.get(t);n&&(n.networkState={...n.networkState||MA,...e},ke.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=ke.chains.get(t);if(r){const s={...r.accountState||oO,...e};ke.chains.set(t,{...r,accountState:s}),(ke.chains.size===1||ke.activeChain===t)&&(e.caipAddress&&(ke.activeCaipAddress=e.caipAddress),Ye.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=ke.chains.get(t);if(n){const r={...n.networkState||MA,...e};ke.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){H.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&je.removeConnectorId(n)},setActiveNamespace(t){var r,s;ke.activeChain=t;const e=t?ke.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(ke.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,ke.activeCaipNetwork=n,H.setChainNetworkData(t,{caipNetwork:n}),Qe.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Gl.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;ke.activeChain!==t.chainNamespace&&H.setIsSwitchingNamespace(!0);const e=ke.chains.get(t.chainNamespace);ke.activeChain=t.chainNamespace,ke.activeCaipNetwork=t,H.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?ke.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:ke.activeCaipAddress=void 0,H.setAccountProp("caipAddress",ke.activeCaipAddress,t.chainNamespace),e&&Ye.replaceState(e.accountState),En.resetSend(),Gl.set({activeChain:ke.activeChain,selectedNetworkId:(i=ke.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Qe.setActiveCaipNetworkId(t.caipNetworkId),!H.checkIfSupportedNetwork(t.chainNamespace)&&be.state.enableNetworkSwitch&&!be.state.allowUnsupportedChain&&!gt.state.wcBasic&&H.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=ke.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==H.state.activeChain,n=(s=H.getNetworkData(t))==null?void 0:s.caipNetwork,r=H.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await H.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=H.state.chains.get(H.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=ke.activeCaipNetwork)==null?void 0:o.id)})),r=H.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&_s.close()}catch{Wt.goBack()}yr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||ke.activeChain,n=ke.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||ke.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=ke.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=ke.activeChain;if(e&&(n=e),!n)return;const r=(s=ke.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=ke.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=ke.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return at.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return ke.chains.forEach(e=>{const n=H.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){H.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=H.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));je.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return ke.chains.forEach(e=>{const n=H.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return ke.activeCaipNetwork},getActiveCaipAddress(){return ke.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=ke.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=H.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());H.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||ke.activeCaipNetwork,r=H.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!ke.activeChain)return!0;const e=H.getRequestedCaipNetworks(ke.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){H.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=gJ.caipNetworkIdToNumber((r=ke.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=ke.activeChain;if(!e||!t)return!1;const n=H.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=ke.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=ke.activeCaipNetwork)==null?void 0:s.id)||1,n=Bn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){_s.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ke.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Bn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){H.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");ke.activeCaipAddress=void 0,H.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),je.removeConnectorId(e)},setIsSwitchingNamespace(t){ke.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(ke.chains.forEach(s=>{We.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=ke.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=H.state.chains.get(t))==null?void 0:e.accountState:Ye.state},getNetworkData(t){var n;const e=t||ke.activeChain;if(e)return(n=H.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=H.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=je.state.filterByNamespace;return(t?[ke.chains.get(t)]:Array.from(ke.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?H.getRequestedCaipNetworks(t):H.getAllRequestedCaipNetworks()}},H=ua(aSe),cSe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},EJ=at.getBlockchainApiUrl(),Vi=ur({clientId:null,api:new m1({baseUrl:EJ,clientId:null}),supportedChains:{http:[],ws:[]}}),pt={state:Vi,async get(t){const{st:e,sv:n}=pt.getSdkProperties(),r=be.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Vi.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=be.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Vi.supportedChains.http.length||await pt.getSupportedNetworks()}catch{return!1}return Vi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await pt.get({path:"v1/supported-chains"});return Vi.supportedChains=t,t}catch{return Vi.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await pt.isNetworkSupported(e))return{avatar:"",name:""};const r=Qe.getIdentityFromCacheForAddress(t);if(r)return r;const s=await pt.get({path:`/v1/identity/${t}`,params:{sender:H.state.activeCaipAddress?at.getPlainAddress(H.state.activeCaipAddress):void 0}});return Qe.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await pt.isNetworkSupported((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?pt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await pt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?pt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await pt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await pt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Vi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:be.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await pt.isNetworkSupported((r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?pt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=pt.getSdkProperties();if(!await pt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return pt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await pt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Vi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Bn.CONVERT_SLIPPAGE_TOLERANCE},projectId:be.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=pt.getSdkProperties();if(!await pt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return pt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=pt.getSdkProperties();if(!await pt.isNetworkSupported((l=H.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Oc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Qe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await pt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Qe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await pt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await pt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ye.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await pt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await pt.isNetworkSupported((i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Vi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await pt.isNetworkSupported((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Vi.api.post({path:"/v1/generators/onrampurl",params:{projectId:be.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await pt.isNetworkSupported((e=H.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await pt.get({path:"/v1/onramp/options"})}catch{return cSe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await pt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Vi.api.post({path:"/v1/onramp/quote",params:{projectId:be.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await pt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?pt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await pt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Vi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:be.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Vi.clientId=t,Vi.api=new m1({baseUrl:EJ,clientId:t})}},ga=ur({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),lSe={state:ga,replaceState(t){t&&Object.assign(ga,jg(t))},subscribe(t){return H.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return H.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){H.setAccountProp("status",t,e)},getCaipAddress(t){return H.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?at.getPlainAddress(t):void 0;e===H.state.activeChain&&(H.state.activeCaipAddress=t),H.setAccountProp("caipAddress",t,e),H.setAccountProp("address",n,e)},setBalance(t,e,n){H.setAccountProp("balance",t,n),H.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){H.setAccountProp("profileName",t,e)},setProfileImage(t,e){H.setAccountProp("profileImage",t,e)},setUser(t,e){H.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){H.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){H.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){H.setAccountProp("currentTab",t,H.state.activeChain)},setTokenBalance(t,e){t&&H.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){H.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){H.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=H.getAccountProp("addressLabels",n)||new Map;r.set(t,e),H.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=H.getAccountProp("addressLabels",e)||new Map;n.delete(t),H.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){H.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){H.setAccountProp("preferredAccountTypes",{...ga.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){ga.preferredAccountTypes=t},setSocialProvider(t,e){t&&H.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){H.setAccountProp("socialWindow",t?jg(t):void 0,e)},setFarcasterUrl(t,e){H.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;ga.balanceLoading=!0;const e=(i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=H.state.activeCaipAddress,s=r?at.getPlainAddress(r):void 0;if(ga.lastRetry&&!at.isAllowedRetry(ga.lastRetry,30*Bn.ONE_SEC_MS))return ga.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await pt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Ye.setTokenBalance(c,n),ga.lastRetry=void 0,ga.balanceLoading=!1,c}}catch(a){ga.lastRetry=Date.now(),t==null||t(a),Oc.showError("Token Balance Unavailable")}finally{ga.balanceLoading=!1}return[]},resetAccount(t){H.resetAccount(t)}},Ye=ua(lSe),uSe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=H.state.activeCaipNetwork,r=Wt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ye.getCaipAddress(H.state.activeChain),o=t.chainNamespace!==H.state.activeChain,a=Ye.getCaipAddress(t.chainNamespace),l=je.getConnectorId(H.state.activeChain)===We.CONNECTOR_ID.AUTH,u=We.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Wt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Wt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Wt.push("SwitchNetwork",{...r,network:t})}},Ki=ur({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),dSe={state:Ki,subscribe(t){return mi(Ki,()=>t(Ki))},subscribeKey(t,e){return wi(Ki,t,e)},async open(t){var o,a;const e=Ye.state.status==="connected",n=t==null?void 0:t.namespace,r=H.state.activeChain,s=n&&n!==r,i=(o=H.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(gt.state.wcBasic?ct.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ct.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),je.setFilterByNamespace(t==null?void 0:t.namespace),_s.setLoading(!0,n),n&&s){const c=((a=H.getNetworkData(n))==null?void 0:a.caipNetwork)||H.getRequestedCaipNetworks(n)[0];c&&uSe.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=H.state.noAdapters;be.state.manualWCControl||c&&!i?at.isMobile()?Wt.reset("AllWallets"):Wt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Wt.reset(t.view,t.data):i?Wt.reset("Account"):Wt.reset("Connect")}Ki.open=!0,Gl.set({open:!0}),yr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=be.state.enableEmbedded,e=!!H.state.activeCaipAddress;Ki.open&&yr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ki.open=!1,Wt.reset("Connect"),_s.clearLoading(),t?e?Wt.replace("Account"):Wt.push("Connect"):Gl.set({open:!1}),gt.resetUri()},setLoading(t,e){e&&Ki.loadingNamespaceMap.set(e,t),Ki.loading=t,Gl.set({loading:t})},clearLoading(){Ki.loadingNamespaceMap.clear(),Ki.loading=!1},shake(){Ki.shake||(Ki.shake=!0,setTimeout(()=>{Ki.shake=!1},500))}},_s=ua(dSe),_E={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},l3={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},hSe={providers:wJ,selectedProvider:null,error:null,purchaseCurrency:_E,paymentCurrency:l3,purchaseCurrencies:[_E],paymentCurrencies:[],quotesLoading:!1},ln=ur(hSe),fSe={state:ln,subscribe(t){return mi(ln,()=>t(ln))},subscribeKey(t,e){return wi(ln,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=H.state.activeChain===We.CHAIN.SOLANA?"SOL":"USDC",n=Ye.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",DAe),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",be.state.projectId),ln.selectedProvider={...t,url:r.toString()}}else ln.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=wJ.filter(r=>e.includes(r.name));ln.providers=n}else ln.providers=[]},setPurchaseCurrency(t){ln.purchaseCurrency=t},setPaymentCurrency(t){ln.paymentCurrency=t},setPurchaseAmount(t){u3.state.purchaseAmount=t},setPaymentAmount(t){u3.state.paymentAmount=t},async getAvailableCurrencies(){const t=await pt.getOnrampOptions();ln.purchaseCurrencies=t.purchaseCurrencies,ln.paymentCurrencies=t.paymentCurrencies,ln.paymentCurrency=t.paymentCurrencies[0]||l3,ln.purchaseCurrency=t.purchaseCurrencies[0]||_E,await ct.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await ct.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;ln.quotesLoading=!0;try{const n=await pt.getOnrampQuote({purchaseCurrency:ln.purchaseCurrency,paymentCurrency:ln.paymentCurrency,amount:((t=ln.paymentAmount)==null?void 0:t.toString())||"0",network:(e=ln.purchaseCurrency)==null?void 0:e.symbol});return ln.quotesLoading=!1,ln.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return ln.error=n.message,ln.quotesLoading=!1,null}finally{ln.quotesLoading=!1}},resetState(){ln.selectedProvider=null,ln.error=null,ln.purchaseCurrency=_E,ln.paymentCurrency=l3,ln.purchaseCurrencies=[_E],ln.paymentCurrencies=[],ln.paymentAmount=void 0,ln.purchaseAmount=void 0,ln.quotesLoading=!1}},u3=ua(fSe),X4=2147483648,pSe={convertEVMChainIdToCoinType(t){if(t>=X4)throw new Error("Invalid chainId");return(X4|t)>>>0}},ma=ur({suggestions:[],loading:!1}),gSe={state:ma,subscribe(t){return mi(ma,()=>t(ma))},subscribeKey(t,e){return wi(ma,t,e)},async resolveName(t){var e,n;try{return await pt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await pt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{ma.loading=!0,ma.suggestions=[];const e=await pt.getEnsNameSuggestions(t);return ma.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],ma.suggestions}catch(e){const n=AE.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{ma.loading=!1}},async getNamesForAddress(t){try{if(!H.state.activeCaipNetwork)return[];const n=Qe.getEnsFromCacheForAddress(t);if(n)return n;const r=await pt.reverseLookupEnsName({address:t});return Qe.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=AE.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=H.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ye.state.address,r=je.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");ma.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Wt.pushTransactionStack({onCancel(){Wt.replace("RegisterAccountName")}});const i=await gt.signMessage(s);ma.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=pSe.convertEVMChainIdToCoinType(Number(o));await pt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ye.setProfileName(t,e.chainNamespace),Wt.replace("RegisterAccountNameSuccess")}catch(s){const i=AE.parseEnsApiError(s,`Error registering name ${t}`);throw Wt.replace("RegisterAccountName"),new Error(i)}finally{ma.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},AE=ua(gSe);var PU={exports:{}},r0=typeof Reflect=="object"?Reflect:null,eF=r0&&typeof r0.apply=="function"?r0.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},$S;r0&&typeof r0.ownKeys=="function"?$S=r0.ownKeys:Object.getOwnPropertySymbols?$S=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:$S=function(e){return Object.getOwnPropertyNames(e)};function mSe(t){console&&console.warn&&console.warn(t)}var CJ=Number.isNaN||function(e){return e!==e};function Wn(){Wn.init.call(this)}PU.exports=Wn;PU.exports.once=vSe;Wn.EventEmitter=Wn;Wn.prototype._events=void 0;Wn.prototype._eventsCount=0;Wn.prototype._maxListeners=void 0;var tF=10;function _T(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Wn,"defaultMaxListeners",{enumerable:!0,get:function(){return tF},set:function(t){if(typeof t!="number"||t<0||CJ(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");tF=t}});Wn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Wn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||CJ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _J(t){return t._maxListeners===void 0?Wn.defaultMaxListeners:t._maxListeners}Wn.prototype.getMaxListeners=function(){return _J(this)};Wn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")eF(c,this,n);else for(var l=c.length,u=NJ(c,l),r=0;r<l;++r)eF(u[r],this,n);return!0};function AJ(t,e,n,r){var s,i,o;if(_T(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=_J(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,mSe(a)}return t}Wn.prototype.addListener=function(e,n){return AJ(this,e,n,!1)};Wn.prototype.on=Wn.prototype.addListener;Wn.prototype.prependListener=function(e,n){return AJ(this,e,n,!0)};function ySe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function SJ(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=ySe.bind(r);return s.listener=n,r.wrapFn=s,s}Wn.prototype.once=function(e,n){return _T(n),this.on(e,SJ(this,e,n)),this};Wn.prototype.prependOnceListener=function(e,n){return _T(n),this.prependListener(e,SJ(this,e,n)),this};Wn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(_T(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():wSe(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Wn.prototype.off=Wn.prototype.removeListener;Wn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function xJ(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?bSe(s):NJ(s,s.length)}Wn.prototype.listeners=function(e){return xJ(this,e,!0)};Wn.prototype.rawListeners=function(e){return xJ(this,e,!1)};Wn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):IJ.call(t,e)};Wn.prototype.listenerCount=IJ;function IJ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Wn.prototype.eventNames=function(){return this._eventsCount>0?$S(this._events):[]};function NJ(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function wSe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function bSe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function vSe(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}TJ(t,e,i,{once:!0}),e!=="error"&&ESe(t,s,{once:!0})})}function ESe(t,e,n){typeof t.on=="function"&&TJ(t,"error",e,n)}function TJ(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ec=PU.exports;const OU=im(ec);var Ne={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var d3=function(t,e){return d3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},d3(t,e)};function CSe(t,e){d3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var h3=function(){return h3=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h3.apply(this,arguments)};function _Se(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ASe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function SSe(t,e){return function(n,r){e(n,r,t)}}function xSe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ISe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function NSe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function TSe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function RSe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function f3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function RJ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function PSe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(RJ(arguments[e]));return t}function OSe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function UC(t){return this instanceof UC?(this.v=t,this):new UC(t)}function kSe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof UC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function DSe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:UC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function MSe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof f3=="function"?f3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function LSe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function USe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function $Se(t){return t&&t.__esModule?t:{default:t}}function BSe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function FSe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const jSe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return h3},__asyncDelegator:DSe,__asyncGenerator:kSe,__asyncValues:MSe,__await:UC,__awaiter:ISe,__classPrivateFieldGet:BSe,__classPrivateFieldSet:FSe,__createBinding:TSe,__decorate:ASe,__exportStar:RSe,__extends:CSe,__generator:NSe,__importDefault:$Se,__importStar:USe,__makeTemplateObject:LSe,__metadata:xSe,__param:SSe,__read:RJ,__rest:_Se,__spread:PSe,__spreadArrays:OSe,__values:f3},Symbol.toStringTag,{value:"Module"})),AT=fz(jSe);var aO={},dv={},nF;function WSe(){if(nF)return dv;nF=1,Object.defineProperty(dv,"__esModule",{value:!0}),dv.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return dv.delay=t,dv}var Yf={},cO={},Qf={},rF;function zSe(){return rF||(rF=1,Object.defineProperty(Qf,"__esModule",{value:!0}),Qf.ONE_THOUSAND=Qf.ONE_HUNDRED=void 0,Qf.ONE_HUNDRED=100,Qf.ONE_THOUSAND=1e3),Qf}var lO={},sF;function HSe(){return sF||(sF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(lO)),lO}var iF;function PJ(){return iF||(iF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=AT;e.__exportStar(zSe(),t),e.__exportStar(HSe(),t)}(cO)),cO}var oF;function GSe(){if(oF)return Yf;oF=1,Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.fromMiliseconds=Yf.toMiliseconds=void 0;const t=PJ();function e(r){return r*t.ONE_THOUSAND}Yf.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Yf.fromMiliseconds=n,Yf}var aF;function qSe(){return aF||(aF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=AT;e.__exportStar(WSe(),t),e.__exportStar(GSe(),t)}(aO)),aO}var Hm={},cF;function VSe(){if(cF)return Hm;cF=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Hm.Watch=t,Hm.default=t,Hm}var uO={},hv={},lF;function KSe(){if(lF)return hv;lF=1,Object.defineProperty(hv,"__esModule",{value:!0}),hv.IWatch=void 0;class t{}return hv.IWatch=t,hv}var uF;function YSe(){return uF||(uF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),AT.__exportStar(KSe(),t)}(uO)),uO}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=AT;e.__exportStar(qSe(),t),e.__exportStar(VSe(),t),e.__exportStar(YSe(),t),e.__exportStar(PJ(),t)})(Ne);class bm{}let QSe=class extends bm{constructor(e){super()}};const dF=Ne.FIVE_SECONDS,vm={pulse:"heartbeat_pulse"};let JSe=class OJ extends QSe{constructor(e){super(e),this.events=new ec.EventEmitter,this.interval=dF,this.interval=(e==null?void 0:e.interval)||dF}static async init(e){const n=new OJ(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Ne.toMiliseconds(this.interval))}pulse(){this.events.emit(vm.pulse)}};const ZSe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,XSe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,exe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function txe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){nxe(t);return}return e}function nxe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function LA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!exe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(ZSe.test(t)||XSe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,txe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Em(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function kJ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Em(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let dO;function y1(){return dO||(dO=kJ("keyval-store","keyval")),dO}function hF(t,e=y1()){return e("readonly",n=>Em(n.get(t)))}function rxe(t,e,n=y1()){return n("readwrite",r=>(r.put(e,t),Em(r.transaction)))}function sxe(t,e=y1()){return e("readwrite",n=>(n.delete(t),Em(n.transaction)))}function ixe(t=y1()){return t("readwrite",e=>(e.clear(),Em(e.transaction)))}function oxe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Em(t.transaction)}function axe(t=y1()){return t("readonly",e=>{if(e.getAllKeys)return Em(e.getAllKeys());const n=[];return oxe(e,r=>n.push(r.key)).then(()=>n)})}const cxe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),lxe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function zg(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return lxe(t)}catch{return t}}function md(t){return typeof t=="string"?t:cxe(t)||""}function uxe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var dxe=hxe;function hxe(t,e,n){var r=n&&n.stringify||uxe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const fF=dxe;var gy=ql;const $C=Cxe().console||{},fxe={mapHttpRequest:UA,mapHttpResponse:UA,wrapRequestSerializer:hO,wrapResponseSerializer:hO,wrapErrorSerializer:hO,req:UA,res:UA,err:wxe};function pxe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function ql(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||$C;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=pxe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=BC),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:bxe(t)};c.levels=ql.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=BC,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=p3());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Gm(l,c,"error","log"),Gm(l,c,"fatal","error"),Gm(l,c,"warn","error"),Gm(l,c,"info","log"),Gm(l,c,"debug","log"),Gm(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,ST([p],b,y,this._stdErrSerialize)}function v(A){this._childLevel=(A._childLevel|0)+1,this.error=qm(A,p,"error"),this.fatal=qm(A,p,"fatal"),this.warn=qm(A,p,"warn"),this.info=qm(A,p,"info"),this.debug=qm(A,p,"debug"),this.trace=qm(A,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=p3([].concat(A._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}ql.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};ql.stdSerializers=fxe;ql.stdTimeFunctions=Object.assign({},{nullTime:DJ,epochTime:MJ,unixTime:vxe,isoTime:Exe});function Gm(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?BC:s[n]?s[n]:$C[n]||$C[r]||BC,gxe(t,e,n)}function gxe(t,e,n){!t.transmit&&e[n]===BC||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===$C?$C:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&ST(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,mxe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=ql.levels.values[l],d=ql.levels.values[n];if(d<u)return;yxe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:ql.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function mxe(t,e,n,r){t._serialize&&ST(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=ql.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?fF(s.shift(),s):void 0}else typeof i=="string"&&(i=fF(s.shift(),s));return i!==void 0&&(o.msg=i),o}function ST(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=ql.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function qm(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function yxe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;ST(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=p3(c)}function p3(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function wxe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function bxe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?DJ:MJ}function UA(){return{}}function hO(t){return t}function BC(){}function DJ(){return!1}function MJ(){return Date.now()}function vxe(){return Math.round(Date.now()/1e3)}function Exe(){return new Date(Date.now()).toISOString()}function Cxe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const w1=im(gy),_xe={level:"info"},b1="custom_context",kU=1e3*1024;let Axe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},pF=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Axe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},LJ=class{constructor(e,n=kU){this.level=e??"error",this.levelValue=gy.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new pF(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===gy.levels.values.error?console.error(e):n===gy.levels.values.warn?console.warn(e):n===gy.levels.values.debug?console.debug(e):n===gy.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(md({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new pF(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(md({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Sxe=class{constructor(e,n=kU){this.baseChunkLogger=new LJ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},xxe=class{constructor(e,n=kU){this.baseChunkLogger=new LJ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Ixe=Object.defineProperty,Nxe=Object.defineProperties,Txe=Object.getOwnPropertyDescriptors,gF=Object.getOwnPropertySymbols,Rxe=Object.prototype.hasOwnProperty,Pxe=Object.prototype.propertyIsEnumerable,mF=(t,e,n)=>e in t?Ixe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gI=(t,e)=>{for(var n in e||(e={}))Rxe.call(e,n)&&mF(t,n,e[n]);if(gF)for(var n of gF(e))Pxe.call(e,n)&&mF(t,n,e[n]);return t},mI=(t,e)=>Nxe(t,Txe(e));function Cm(t){return mI(gI({},t),{level:(t==null?void 0:t.level)||_xe.level})}function Oxe(t,e=b1){return t[e]||""}function kxe(t,e,n=b1){return t[n]=e,t}function To(t,e=b1){let n="";return typeof t.bindings>"u"?n=Oxe(t,e):n=t.bindings().context||"",n}function Dxe(t,e,n=b1){const r=To(t,n);return r.trim()?`${r}/${e}`:e}function Qs(t,e,n=b1){const r=Dxe(t,e,n),s=t.child({context:r});return kxe(s,r,n)}function Mxe(t){var e,n;const r=new Sxe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:w1(mI(gI({},t.opts),{level:"trace",browser:mI(gI({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Lxe(t){var e;const n=new xxe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:w1(mI(gI({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function xT(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Mxe(t):Lxe(t)}function Uxe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function UJ(t,...e){if(!Uxe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function yF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function $xe(t,e){UJ(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Vm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Bxe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function $J(t){return typeof t=="string"&&(t=Bxe(t)),UJ(t),t}let Fxe=class{clone(){return this._cloneInto()}};function jxe(t){const e=r=>t().update($J(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function BJ(t=32){if(Vm&&typeof Vm.getRandomValues=="function")return Vm.getRandomValues(new Uint8Array(t));if(Vm&&typeof Vm.randomBytes=="function")return Vm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Wxe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let zxe=class extends Fxe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=fO(this.buffer)}update(e){yF(this);const{view:n,buffer:r,blockLen:s}=this;e=$J(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=fO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){yF(this),$xe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Wxe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=fO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const $A=BigInt(2**32-1),g3=BigInt(32);function FJ(t,e=!1){return e?{h:Number(t&$A),l:Number(t>>g3&$A)}:{h:Number(t>>g3&$A)|0,l:Number(t&$A)|0}}function Hxe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=FJ(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Gxe=(t,e)=>BigInt(t>>>0)<<g3|BigInt(e>>>0),qxe=(t,e,n)=>t>>>n,Vxe=(t,e,n)=>t<<32-n|e>>>n,Kxe=(t,e,n)=>t>>>n|e<<32-n,Yxe=(t,e,n)=>t<<32-n|e>>>n,Qxe=(t,e,n)=>t<<64-n|e>>>n-32,Jxe=(t,e,n)=>t>>>n-32|e<<64-n,Zxe=(t,e)=>e,Xxe=(t,e)=>t,eIe=(t,e,n)=>t<<n|e>>>32-n,tIe=(t,e,n)=>e<<n|t>>>32-n,nIe=(t,e,n)=>e<<n-32|t>>>64-n,rIe=(t,e,n)=>t<<n-32|e>>>64-n;function sIe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const iIe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),oIe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,aIe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),cIe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,lIe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),uIe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ft={fromBig:FJ,split:Hxe,toBig:Gxe,shrSH:qxe,shrSL:Vxe,rotrSH:Kxe,rotrSL:Yxe,rotrBH:Qxe,rotrBL:Jxe,rotr32H:Zxe,rotr32L:Xxe,rotlSH:eIe,rotlSL:tIe,rotlBH:nIe,rotlBL:rIe,add:sIe,add3L:iIe,add3H:oIe,add4L:aIe,add4H:cIe,add5H:uIe,add5L:lIe},[dIe,hIe]=Ft.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Ld=new Uint32Array(80),Ud=new Uint32Array(80);let fIe=class extends zxe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Ld[v]=e.getUint32(n),Ud[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Ld[v-15]|0,_=Ud[v-15]|0,I=Ft.rotrSH(A,_,1)^Ft.rotrSH(A,_,8)^Ft.shrSH(A,_,7),x=Ft.rotrSL(A,_,1)^Ft.rotrSL(A,_,8)^Ft.shrSL(A,_,7),N=Ld[v-2]|0,S=Ud[v-2]|0,O=Ft.rotrSH(N,S,19)^Ft.rotrBH(N,S,61)^Ft.shrSH(N,S,6),P=Ft.rotrSL(N,S,19)^Ft.rotrBL(N,S,61)^Ft.shrSL(N,S,6),F=Ft.add4L(x,P,Ud[v-7],Ud[v-16]),G=Ft.add4H(F,I,O,Ld[v-7],Ld[v-16]);Ld[v]=G|0,Ud[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const A=Ft.rotrSH(d,h,14)^Ft.rotrSH(d,h,18)^Ft.rotrBH(d,h,41),_=Ft.rotrSL(d,h,14)^Ft.rotrSL(d,h,18)^Ft.rotrBL(d,h,41),I=d&f^~d&g,x=h&p^~h&w,N=Ft.add5L(b,_,x,hIe[v],Ud[v]),S=Ft.add5H(N,y,A,I,dIe[v],Ld[v]),O=N|0,P=Ft.rotrSH(r,s,28)^Ft.rotrBH(r,s,34)^Ft.rotrBH(r,s,39),F=Ft.rotrSL(r,s,28)^Ft.rotrBL(r,s,34)^Ft.rotrBL(r,s,39),G=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ft.add(l|0,u|0,S|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=Ft.add3L(O,F,B);r=Ft.add3H(T,S,P,G),s=T|0}({h:r,l:s}=Ft.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ft.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ft.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ft.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ft.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ft.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Ft.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Ft.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){Ld.fill(0),Ud.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const pIe=jxe(()=>new fIe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const DU=BigInt(0),jJ=BigInt(1),gIe=BigInt(2);function MU(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function LU(t){if(!MU(t))throw new Error("Uint8Array expected")}function pO(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const mIe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function UU(t){LU(t);let e="";for(let n=0;n<t.length;n++)e+=mIe[t[n]];return e}function WJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?DU:BigInt("0x"+t)}const hu={_0:48,_9:57,A:65,F:70,a:97,f:102};function wF(t){if(t>=hu._0&&t<=hu._9)return t-hu._0;if(t>=hu.A&&t<=hu.F)return t-(hu.A-10);if(t>=hu.a&&t<=hu.f)return t-(hu.a-10)}function zJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=wF(t.charCodeAt(i)),a=wF(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function yIe(t){return WJ(UU(t))}function BS(t){return LU(t),WJ(UU(Uint8Array.from(t).reverse()))}function HJ(t,e){return zJ(t.toString(16).padStart(e*2,"0"))}function m3(t,e){return HJ(t,e).reverse()}function fu(t,e,n){let r;if(typeof e=="string")try{r=zJ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(MU(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function bF(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];LU(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const gO=t=>typeof t=="bigint"&&DU<=t;function wIe(t,e,n){return gO(t)&&gO(e)&&gO(n)&&e<=t&&t<n}function fv(t,e,n,r){if(!wIe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function bIe(t){let e;for(e=0;t>DU;t>>=jJ,e+=1);return e}const vIe=t=>(gIe<<BigInt(t-1))-jJ,EIe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||MU(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function $U(t,e,n={}){const r=(s,i,o)=>{const a=EIe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function vF(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const As=BigInt(0),jr=BigInt(1),pp=BigInt(2),CIe=BigInt(3),y3=BigInt(4),EF=BigInt(5),CF=BigInt(8);function ts(t,e){const n=t%e;return n>=As?n:e+n}function _Ie(t,e,n){if(e<As)throw new Error("invalid exponent, negatives unsupported");if(n<=As)throw new Error("invalid modulus");if(n===jr)return As;let r=jr;for(;e>As;)e&jr&&(r=r*t%n),t=t*t%n,e>>=jr;return r}function sl(t,e,n){let r=t;for(;e-- >As;)r*=r,r%=n;return r}function _F(t,e){if(t===As)throw new Error("invert: expected non-zero number");if(e<=As)throw new Error("invert: expected positive modulus, got "+e);let n=ts(t,e),r=e,s=As,i=jr;for(;n!==As;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==jr)throw new Error("invert: does not exist");return ts(s,e)}function AIe(t){const e=(t-jr)/pp;let n,r,s;for(n=t-jr,r=0;n%pp===As;n/=pp,r++);for(s=pp;s<t&&_Ie(s,e,t)!==t-jr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+jr)/y3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+jr)/pp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,jr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function SIe(t){if(t%y3===CIe){const e=(t+jr)/y3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%CF===EF){const e=(t-EF)/CF;return function(n,r){const s=n.mul(r,pp),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,pp),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return AIe(t)}const xIe=(t,e)=>(ts(t,e)&jr)===jr,IIe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function NIe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=IIe.reduce((r,s)=>(r[s]="function",r),e);return $U(t,n)}function TIe(t,e,n){if(n<As)throw new Error("invalid exponent, negatives unsupported");if(n===As)return t.ONE;if(n===jr)return e;let r=t.ONE,s=e;for(;n>As;)n&jr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=jr;return r}function RIe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function GJ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function qJ(t,e,n=!1,r={}){if(t<=As)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=GJ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:vIe(s),ZERO:As,ONE:jr,create:c=>ts(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return As<=c&&c<t},is0:c=>c===As,isOdd:c=>(c&jr)===jr,neg:c=>ts(-c,t),eql:(c,l)=>c===l,sqr:c=>ts(c*c,t),add:(c,l)=>ts(c+l,t),sub:(c,l)=>ts(c-l,t),mul:(c,l)=>ts(c*l,t),pow:(c,l)=>TIe(a,c,l),div:(c,l)=>ts(c*_F(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>_F(c,t),sqrt:r.sqrt||(c=>(o||(o=SIe(t)),o(a,c))),invertBatch:c=>RIe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?m3(c,i):HJ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?BS(c):yIe(c)}});return Object.freeze(a)}const AF=BigInt(0),BA=BigInt(1);function mO(t,e){const n=e.negate();return t?n:e}function VJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function yO(t,e){VJ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function PIe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function OIe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const wO=new WeakMap,KJ=new WeakMap;function bO(t){return KJ.get(t)||1}function kIe(t,e){return{constTimeNegate:mO,hasPrecomputes(n){return bO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>AF;)r&BA&&(s=s.add(i)),i=i.double(),r>>=BA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=yO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=yO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=BA);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(mO(y,r[g])):a=a.add(mO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=yO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===AF)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=BA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=wO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&wO.set(r,s(i))),i},wNAFCached(n,r,s){const i=bO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=bO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){VJ(r,e),KJ.set(n,r),wO.delete(n)}}}function DIe(t,e,n,r){if(PIe(n,t),OIe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=bIe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function MIe(t){return NIe(t.Fp),$U(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...GJ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const oc=BigInt(0),Yi=BigInt(1),FA=BigInt(2),LIe=BigInt(8),UIe={zip215:!0};function $Ie(t){const e=MIe(t);return $U(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function BIe(t){const e=$Ie(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=FA<<BigInt(a*8)-Yi,u=n.create,d=qJ(e.n,e.nBitLength),h=e.uvRatio||((T,R)=>{try{return{isValid:!0,value:n.sqrt(T*n.inv(R))}}catch{return{isValid:!1,value:oc}}}),f=e.adjustScalarBytes||(T=>T),p=e.domain||((T,R,$)=>{if(pO("phflag",$),R.length||$)throw new Error("Contexts/pre-hash are not supported");return T});function g(T,R){fv("coordinate "+T,R,oc,l)}function w(T){if(!(T instanceof v))throw new Error("ExtendedPoint expected")}const y=vF((T,R)=>{const{ex:$,ey:k,ez:M}=T,W=T.is0();R==null&&(R=W?LIe:n.inv(M));const K=u($*R),ne=u(k*R),le=u(M*R);if(W)return{x:oc,y:Yi};if(le!==Yi)throw new Error("invZ was invalid");return{x:K,y:ne}}),b=vF(T=>{const{a:R,d:$}=e;if(T.is0())throw new Error("bad point: ZERO");const{ex:k,ey:M,ez:W,et:K}=T,ne=u(k*k),le=u(M*M),oe=u(W*W),ae=u(oe*oe),ue=u(ne*R),et=u(oe*u(ue+le)),Se=u(ae+u($*u(ne*le)));if(et!==Se)throw new Error("bad point: equation left != right (1)");const Me=u(k*M),rt=u(W*K);if(Me!==rt)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(R,$,k,M){this.ex=R,this.ey=$,this.ez=k,this.et=M,g("x",R),g("y",$),g("z",k),g("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof v)throw new Error("extended point not allowed");const{x:$,y:k}=R||{};return g("x",$),g("y",k),new v($,k,Yi,u($*k))}static normalizeZ(R){const $=n.invertBatch(R.map(k=>k.ez));return R.map((k,M)=>k.toAffine($[M])).map(v.fromAffine)}static msm(R,$){return DIe(v,d,R,$)}_setWindowSize(R){I.setWindowSize(this,R)}assertValidity(){b(this)}equals(R){w(R);const{ex:$,ey:k,ez:M}=this,{ex:W,ey:K,ez:ne}=R,le=u($*ne),oe=u(W*M),ae=u(k*ne),ue=u(K*M);return le===oe&&ae===ue}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:R}=e,{ex:$,ey:k,ez:M}=this,W=u($*$),K=u(k*k),ne=u(FA*u(M*M)),le=u(R*W),oe=$+k,ae=u(u(oe*oe)-W-K),ue=le+K,et=ue-ne,Se=le-K,Me=u(ae*et),rt=u(ue*Se),Tt=u(ae*Se),Jt=u(et*ue);return new v(Me,rt,Jt,Tt)}add(R){w(R);const{a:$,d:k}=e,{ex:M,ey:W,ez:K,et:ne}=this,{ex:le,ey:oe,ez:ae,et:ue}=R;if($===BigInt(-1)){const st=u((W-M)*(oe+le)),At=u((W+M)*(oe-le)),Ct=u(At-st);if(Ct===oc)return this.double();const Vn=u(K*FA*ue),Rt=u(ne*FA*ae),Gr=Rt+Vn,Bt=At+st,zn=Rt-Vn,Sr=u(Gr*Ct),Gi=u(Bt*zn),Jc=u(Gr*zn),Ff=u(Ct*Bt);return new v(Sr,Gi,Ff,Jc)}const et=u(M*le),Se=u(W*oe),Me=u(ne*k*ue),rt=u(K*ae),Tt=u((M+W)*(le+oe)-et-Se),Jt=rt-Me,X=rt+Me,ce=u(Se-$*et),Ee=u(Tt*Jt),ge=u(X*ce),ve=u(Tt*ce),Xe=u(Jt*X);return new v(Ee,ge,Xe,ve)}subtract(R){return this.add(R.negate())}wNAF(R){return I.wNAFCached(this,R,v.normalizeZ)}multiply(R){const $=R;fv("scalar",$,Yi,r);const{p:k,f:M}=this.wNAF($);return v.normalizeZ([k,M])[0]}multiplyUnsafe(R,$=v.ZERO){const k=R;return fv("scalar",k,oc,r),k===oc?_:this.is0()||k===Yi?this:I.wNAFCachedUnsafe(this,k,v.normalizeZ,$)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,r).is0()}toAffine(R){return y(this,R)}clearCofactor(){const{h:R}=e;return R===Yi?this:this.multiplyUnsafe(R)}static fromHex(R,$=!1){const{d:k,a:M}=e,W=n.BYTES;R=fu("pointHex",R,W),pO("zip215",$);const K=R.slice(),ne=R[W-1];K[W-1]=ne&-129;const le=BS(K),oe=$?l:n.ORDER;fv("pointHex.y",le,oc,oe);const ae=u(le*le),ue=u(ae-Yi),et=u(k*ae-M);let{isValid:Se,value:Me}=h(ue,et);if(!Se)throw new Error("Point.fromHex: invalid y coordinate");const rt=(Me&Yi)===Yi,Tt=(ne&128)!==0;if(!$&&Me===oc&&Tt)throw new Error("Point.fromHex: x=0 and x_0=1");return Tt!==rt&&(Me=u(-Me)),v.fromAffine({x:Me,y:le})}static fromPrivateKey(R){return S(R).point}toRawBytes(){const{x:R,y:$}=this.toAffine(),k=m3($,n.BYTES);return k[k.length-1]|=R&Yi?128:0,k}toHex(){return UU(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Yi,u(e.Gx*e.Gy)),v.ZERO=new v(oc,Yi,Yi,oc);const{BASE:A,ZERO:_}=v,I=kIe(v,a*8);function x(T){return ts(T,r)}function N(T){return x(BS(T))}function S(T){const R=n.BYTES;T=fu("private key",T,R);const $=fu("hashed private key",i(T),2*R),k=f($.slice(0,R)),M=$.slice(R,2*R),W=N(k),K=A.multiply(W),ne=K.toRawBytes();return{head:k,prefix:M,scalar:W,point:K,pointBytes:ne}}function O(T){return S(T).pointBytes}function P(T=new Uint8Array,...R){const $=bF(...R);return N(i(p($,fu("context",T),!!s)))}function F(T,R,$={}){T=fu("message",T),s&&(T=s(T));const{prefix:k,scalar:M,pointBytes:W}=S(R),K=P($.context,k,T),ne=A.multiply(K).toRawBytes(),le=P($.context,ne,W,T),oe=x(K+le*M);fv("signature.s",oe,oc,r);const ae=bF(ne,m3(oe,n.BYTES));return fu("result",ae,n.BYTES*2)}const G=UIe;function B(T,R,$,k=G){const{context:M,zip215:W}=k,K=n.BYTES;T=fu("signature",T,2*K),R=fu("message",R),$=fu("publicKey",$,K),W!==void 0&&pO("zip215",W),s&&(R=s(R));const ne=BS(T.slice(K,2*K));let le,oe,ae;try{le=v.fromHex($,W),oe=v.fromHex(T.slice(0,K),W),ae=A.multiplyUnsafe(ne)}catch{return!1}if(!W&&le.isSmallOrder())return!1;const ue=P(M,oe.toRawBytes(),le.toRawBytes(),R);return oe.add(le.multiplyUnsafe(ue)).subtract(ae).clearCofactor().equals(v.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:F,verify:B,ExtendedPoint:v,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(T=8,R=v.BASE){return R._setWindowSize(T),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const BU=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),SF=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const FIe=BigInt(1),xF=BigInt(2);BigInt(3);const jIe=BigInt(5),WIe=BigInt(8);function zIe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=BU,o=t*t%i*t%i,a=sl(o,xF,i)*o%i,c=sl(a,FIe,i)*t%i,l=sl(c,jIe,i)*c%i,u=sl(l,e,i)*l%i,d=sl(u,n,i)*u%i,h=sl(d,r,i)*d%i,f=sl(h,s,i)*h%i,p=sl(f,s,i)*h%i,g=sl(p,e,i)*l%i;return{pow_p_5_8:sl(g,xF,i)*t%i,b2:o}}function HIe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function GIe(t,e){const n=BU,r=ts(e*e*e,n),s=ts(r*r*e,n),i=zIe(t*s).pow_p_5_8;let o=ts(t*r*i,n);const a=ts(e*o*o,n),c=o,l=ts(o*SF,n),u=a===t,d=a===ts(-t,n),h=a===ts(-t*SF,n);return u&&(o=c),(d||h)&&(o=l),xIe(o,n)&&(o=ts(-o,n)),{isValid:u||d,value:o}}const qIe=qJ(BU,void 0,!0),VIe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:qIe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:WIe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:pIe,randomBytes:BJ,adjustScalarBytes:HIe,uvRatio:GIe},YJ=BIe(VIe),KIe="EdDSA",YIe="JWT",yI=".",IT="base64url",QJ="utf8",JJ="utf8",QIe=":",JIe="did",ZIe="key",IF="base58btc",XIe="z",eNe="K36",tNe=32;function FU(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ZJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?FU(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function XJ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=ZJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return FU(n)}function nNe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var _=p[y],I=0,x=v-1;(_!==0||I<w)&&x!==-1;x--,I++)_+=256*A[x]>>>0,A[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var _=0,I=b-1;(A!==0||_<y)&&I!==-1;I--,_++)A+=a*v[I]>>>0,v[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=_,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var rNe=nNe,sNe=rNe;const eZ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},iNe=t=>new TextEncoder().encode(t),oNe=t=>new TextDecoder().decode(t);let aNe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},cNe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return tZ(this,e)}},lNe=class{constructor(e){this.decoders=e}or(e){return tZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const tZ=(t,e)=>new lNe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let uNe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new aNe(e,n,r),this.decoder=new cNe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const NT=({name:t,prefix:e,encode:n,decode:r})=>new uNe(t,e,n,r),v1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=sNe(n,e);return NT({prefix:t,name:e,encode:r,decode:i=>eZ(s(i))})},dNe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},hNe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Js=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>NT({prefix:e,name:t,encode(s){return hNe(s,r,n)},decode(s){return dNe(s,r,n,t)}}),fNe=NT({prefix:"\0",name:"identity",encode:t=>oNe(t),decode:t=>iNe(t)});var pNe=Object.freeze({__proto__:null,identity:fNe});const gNe=Js({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var mNe=Object.freeze({__proto__:null,base2:gNe});const yNe=Js({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var wNe=Object.freeze({__proto__:null,base8:yNe});const bNe=v1({prefix:"9",name:"base10",alphabet:"0123456789"});var vNe=Object.freeze({__proto__:null,base10:bNe});const ENe=Js({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),CNe=Js({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var _Ne=Object.freeze({__proto__:null,base16:ENe,base16upper:CNe});const ANe=Js({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),SNe=Js({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xNe=Js({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),INe=Js({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),NNe=Js({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),TNe=Js({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),RNe=Js({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),PNe=Js({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ONe=Js({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var kNe=Object.freeze({__proto__:null,base32:ANe,base32upper:SNe,base32pad:xNe,base32padupper:INe,base32hex:NNe,base32hexupper:TNe,base32hexpad:RNe,base32hexpadupper:PNe,base32z:ONe});const DNe=v1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),MNe=v1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var LNe=Object.freeze({__proto__:null,base36:DNe,base36upper:MNe});const UNe=v1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$Ne=v1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var BNe=Object.freeze({__proto__:null,base58btc:UNe,base58flickr:$Ne});const FNe=Js({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),jNe=Js({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),WNe=Js({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),zNe=Js({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var HNe=Object.freeze({__proto__:null,base64:FNe,base64pad:jNe,base64url:WNe,base64urlpad:zNe});const nZ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),GNe=nZ.reduce((t,e,n)=>(t[n]=e,t),[]),qNe=nZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function VNe(t){return t.reduce((e,n)=>(e+=GNe[n],e),"")}function KNe(t){const e=[];for(const n of t){const r=qNe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const YNe=NT({prefix:"🚀",name:"base256emoji",encode:VNe,decode:KNe});var QNe=Object.freeze({__proto__:null,base256emoji:YNe}),JNe=rZ,NF=128,ZNe=-128,XNe=Math.pow(2,31);function rZ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=XNe;)e[n++]=t&255|NF,t/=128;for(;t&ZNe;)e[n++]=t&255|NF,t>>>=7;return e[n]=t|0,rZ.bytes=n-r+1,e}var eTe=w3,tTe=128,TF=127;function w3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw w3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&TF)<<s:(o&TF)*Math.pow(2,s),s+=7}while(o>=tTe);return w3.bytes=i-r,n}var nTe=Math.pow(2,7),rTe=Math.pow(2,14),sTe=Math.pow(2,21),iTe=Math.pow(2,28),oTe=Math.pow(2,35),aTe=Math.pow(2,42),cTe=Math.pow(2,49),lTe=Math.pow(2,56),uTe=Math.pow(2,63),dTe=function(t){return t<nTe?1:t<rTe?2:t<sTe?3:t<iTe?4:t<oTe?5:t<aTe?6:t<cTe?7:t<lTe?8:t<uTe?9:10},hTe={encode:JNe,decode:eTe,encodingLength:dTe},sZ=hTe;const RF=(t,e,n=0)=>(sZ.encode(t,e,n),e),PF=t=>sZ.encodingLength(t),b3=(t,e)=>{const n=e.byteLength,r=PF(t),s=r+PF(n),i=new Uint8Array(s+n);return RF(t,i,0),RF(n,i,r),i.set(e,s),new fTe(t,n,e,i)};let fTe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const iZ=({name:t,code:e,encode:n})=>new pTe(t,e,n);let pTe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?b3(this.code,n):n.then(r=>b3(this.code,r))}else throw Error("Unknown type, must be binary type")}};const oZ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),gTe=iZ({name:"sha2-256",code:18,encode:oZ("SHA-256")}),mTe=iZ({name:"sha2-512",code:19,encode:oZ("SHA-512")});var yTe=Object.freeze({__proto__:null,sha256:gTe,sha512:mTe});const aZ=0,wTe="identity",cZ=eZ,bTe=t=>b3(aZ,cZ(t)),vTe={code:aZ,name:wTe,encode:cZ,digest:bTe};var ETe=Object.freeze({__proto__:null,identity:vTe});new TextEncoder,new TextDecoder;const OF={...pNe,...mNe,...wNe,...vNe,..._Ne,...kNe,...LNe,...BNe,...HNe,...QNe};({...yTe,...ETe});function lZ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const kF=lZ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),vO=lZ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=ZJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),uZ={utf8:kF,"utf-8":kF,hex:OF.base16,latin1:vO,ascii:vO,binary:vO,...OF};function TT(t,e="utf8"){const n=uZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Ab(t,e="utf8"){const n=uZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?FU(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function DF(t){return zg(TT(Ab(t,IT),QJ))}function wI(t){return TT(Ab(md(t),QJ),IT)}function dZ(t){const e=Ab(eNe,IF),n=XIe+TT(XJ([e,t]),IF);return[JIe,ZIe,n].join(QIe)}function CTe(t){return TT(t,IT)}function _Te(t){return Ab(t,IT)}function ATe(t){return Ab([wI(t.header),wI(t.payload)].join(yI),JJ)}function STe(t){return[wI(t.header),wI(t.payload),CTe(t.signature)].join(yI)}function v3(t){const e=t.split(yI),n=DF(e[0]),r=DF(e[1]),s=_Te(e[2]),i=Ab(e.slice(0,2).join(yI),JJ);return{header:n,payload:r,signature:s,data:i}}function MF(t=BJ(tNe)){const e=YJ.getPublicKey(t);return{secretKey:XJ([t,e]),publicKey:e}}async function xTe(t,e,n,r,s=Ne.fromMiliseconds(Date.now())){const i={alg:KIe,typ:YIe},o=dZ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=ATe({header:i,payload:c}),u=YJ.sign(l,r.secretKey.slice(0,32));return STe({header:i,payload:c,signature:u})}var LF=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},ITe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),NTe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),TTe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),RTe=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),PTe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),OTe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,kTe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,UF=3,DTe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",OTe]],$F=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function MTe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new PTe:typeof navigator<"u"?UTe(navigator.userAgent):BTe()}function LTe(t){return t!==""&&DTe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function UTe(t){var e=LTe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new RTe;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<UF&&(s=LF(LF([],s,!0),FTe(UF-s.length),!0)):s=[];var i=s.join("."),o=$Te(t),a=kTe.exec(t);return a&&a[1]?new TTe(n,i,o,a[1]):new ITe(n,i,o)}function $Te(t){for(var e=0,n=$F.length;e<n;e++){var r=$F[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function BTe(){var t=typeof process<"u"&&process.version;return t?new NTe(process.version.slice(1)):null}function FTe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var er={};Object.defineProperty(er,"__esModule",{value:!0});er.getLocalStorage=er.getLocalStorageOrThrow=er.getCrypto=er.getCryptoOrThrow=hZ=er.getLocation=er.getLocationOrThrow=jU=er.getNavigator=er.getNavigatorOrThrow=Hg=er.getDocument=er.getDocumentOrThrow=er.getFromWindowOrThrow=er.getFromWindow=void 0;function _m(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}er.getFromWindow=_m;function Sb(t){const e=_m(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}er.getFromWindowOrThrow=Sb;function jTe(){return Sb("document")}er.getDocumentOrThrow=jTe;function WTe(){return _m("document")}var Hg=er.getDocument=WTe;function zTe(){return Sb("navigator")}er.getNavigatorOrThrow=zTe;function HTe(){return _m("navigator")}var jU=er.getNavigator=HTe;function GTe(){return Sb("location")}er.getLocationOrThrow=GTe;function qTe(){return _m("location")}var hZ=er.getLocation=qTe;function VTe(){return Sb("crypto")}er.getCryptoOrThrow=VTe;function KTe(){return _m("crypto")}er.getCrypto=KTe;function YTe(){return Sb("localStorage")}er.getLocalStorageOrThrow=YTe;function QTe(){return _m("localStorage")}er.getLocalStorage=QTe;var WU={};Object.defineProperty(WU,"__esModule",{value:!0});var fZ=WU.getWindowMetadata=void 0;const BF=er;function JTe(){let t,e;try{t=BF.getDocumentOrThrow(),e=BF.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");y+=v+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}fZ=WU.getWindowMetadata=JTe;function ZTe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let A=p-1;(b!==0||v<d)&&A!==-1;A--,v++)b+=256*g[A]>>>0,g[A]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let A=0;for(let _=f-1;(v!==0||A<h)&&_!==-1;_--,A++)v+=n*p[_]>>>0,p[_]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var XTe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const pZ=ZTe(XTe);function gZ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function SE(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=gZ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function eRe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var _=p[y],I=0,x=v-1;(_!==0||I<w)&&x!==-1;x--,I++)_+=256*A[x]>>>0,A[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var _=0,I=b-1;(A!==0||_<y)&&I!==-1;I--,_++)A+=a*v[I]>>>0,v[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=_,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var tRe=eRe,nRe=tRe;const rRe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},sRe=t=>new TextEncoder().encode(t),iRe=t=>new TextDecoder().decode(t);class oRe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class aRe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return mZ(this,e)}}class cRe{constructor(e){this.decoders=e}or(e){return mZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const mZ=(t,e)=>new cRe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class lRe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new oRe(e,n,r),this.decoder=new aRe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const RT=({name:t,prefix:e,encode:n,decode:r})=>new lRe(t,e,n,r),E1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=nRe(n,e);return RT({prefix:t,name:e,encode:r,decode:i=>rRe(s(i))})},uRe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},dRe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Zs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>RT({prefix:e,name:t,encode(s){return dRe(s,r,n)},decode(s){return uRe(s,r,n,t)}}),hRe=RT({prefix:"\0",name:"identity",encode:t=>iRe(t),decode:t=>sRe(t)}),fRe=Object.freeze(Object.defineProperty({__proto__:null,identity:hRe},Symbol.toStringTag,{value:"Module"})),pRe=Zs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),gRe=Object.freeze(Object.defineProperty({__proto__:null,base2:pRe},Symbol.toStringTag,{value:"Module"})),mRe=Zs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),yRe=Object.freeze(Object.defineProperty({__proto__:null,base8:mRe},Symbol.toStringTag,{value:"Module"})),wRe=E1({prefix:"9",name:"base10",alphabet:"0123456789"}),bRe=Object.freeze(Object.defineProperty({__proto__:null,base10:wRe},Symbol.toStringTag,{value:"Module"})),vRe=Zs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ERe=Zs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),CRe=Object.freeze(Object.defineProperty({__proto__:null,base16:vRe,base16upper:ERe},Symbol.toStringTag,{value:"Module"})),_Re=Zs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ARe=Zs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),SRe=Zs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),xRe=Zs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),IRe=Zs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),NRe=Zs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),TRe=Zs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),RRe=Zs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),PRe=Zs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),ORe=Object.freeze(Object.defineProperty({__proto__:null,base32:_Re,base32hex:IRe,base32hexpad:TRe,base32hexpadupper:RRe,base32hexupper:NRe,base32pad:SRe,base32padupper:xRe,base32upper:ARe,base32z:PRe},Symbol.toStringTag,{value:"Module"})),kRe=E1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),DRe=E1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),MRe=Object.freeze(Object.defineProperty({__proto__:null,base36:kRe,base36upper:DRe},Symbol.toStringTag,{value:"Module"})),LRe=E1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),URe=E1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),$Re=Object.freeze(Object.defineProperty({__proto__:null,base58btc:LRe,base58flickr:URe},Symbol.toStringTag,{value:"Module"})),BRe=Zs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),FRe=Zs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),jRe=Zs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),WRe=Zs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),zRe=Object.freeze(Object.defineProperty({__proto__:null,base64:BRe,base64pad:FRe,base64url:jRe,base64urlpad:WRe},Symbol.toStringTag,{value:"Module"})),yZ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),HRe=yZ.reduce((t,e,n)=>(t[n]=e,t),[]),GRe=yZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function qRe(t){return t.reduce((e,n)=>(e+=HRe[n],e),"")}function VRe(t){const e=[];for(const n of t){const r=GRe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const KRe=RT({prefix:"🚀",name:"base256emoji",encode:qRe,decode:VRe}),YRe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:KRe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const FF={...fRe,...gRe,...yRe,...bRe,...CRe,...ORe,...MRe,...$Re,...zRe,...YRe};function wZ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const jF=wZ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),EO=wZ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=gZ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),bZ={utf8:jF,"utf-8":jF,hex:FF.base16,latin1:EO,ascii:EO,binary:EO,...FF};function ja(t,e="utf8"){const n=bZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function Ao(t,e="utf8"){const n=bZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const QRe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},JRe="PARSE_ERROR",ZRe="INVALID_REQUEST",XRe="METHOD_NOT_FOUND",ePe="INVALID_PARAMS",vZ="INTERNAL_ERROR",zU="SERVER_ERROR",tPe=[-32700,-32600,-32601,-32602,-32603],xE={[JRe]:{code:-32700,message:"Parse error"},[ZRe]:{code:-32600,message:"Invalid Request"},[XRe]:{code:-32601,message:"Method not found"},[ePe]:{code:-32602,message:"Invalid params"},[vZ]:{code:-32603,message:"Internal error"},[zU]:{code:-32e3,message:"Server error"}},EZ=zU;function nPe(t){return tPe.includes(t)}function WF(t){return Object.keys(xE).includes(t)?xE[t]:xE[EZ]}function rPe(t){const e=Object.values(xE).find(n=>n.code===t);return e||xE[EZ]}function CZ(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var _Z={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var E3=function(t,e){return E3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},E3(t,e)};function sPe(t,e){E3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var C3=function(){return C3=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},C3.apply(this,arguments)};function iPe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function oPe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function aPe(t,e){return function(n,r){e(n,r,t)}}function cPe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function lPe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function uPe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function dPe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function hPe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function _3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function AZ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function fPe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(AZ(arguments[e]));return t}function pPe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function FC(t){return this instanceof FC?(this.v=t,this):new FC(t)}function gPe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof FC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function mPe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:FC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function yPe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof _3=="function"?_3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function wPe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function bPe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function vPe(t){return t&&t.__esModule?t:{default:t}}function EPe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function CPe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const _Pe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return C3},__asyncDelegator:mPe,__asyncGenerator:gPe,__asyncValues:yPe,__await:FC,__awaiter:lPe,__classPrivateFieldGet:EPe,__classPrivateFieldSet:CPe,__createBinding:dPe,__decorate:oPe,__exportStar:hPe,__extends:sPe,__generator:uPe,__importDefault:vPe,__importStar:bPe,__makeTemplateObject:wPe,__metadata:cPe,__param:aPe,__read:AZ,__rest:iPe,__spread:fPe,__spreadArrays:pPe,__values:_3},Symbol.toStringTag,{value:"Module"})),APe=fz(_Pe);var pu={},zF;function SPe(){if(zF)return pu;zF=1,Object.defineProperty(pu,"__esModule",{value:!0}),pu.isBrowserCryptoAvailable=pu.getSubtleCrypto=pu.getBrowerCrypto=void 0;function t(){return(Il==null?void 0:Il.crypto)||(Il==null?void 0:Il.msCrypto)||{}}pu.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}pu.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return pu.isBrowserCryptoAvailable=n,pu}var gu={},HF;function xPe(){if(HF)return gu;HF=1,Object.defineProperty(gu,"__esModule",{value:!0}),gu.isBrowser=gu.isNode=gu.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}gu.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}gu.isNode=e;function n(){return!t()&&!e()}return gu.isBrowser=n,gu}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=APe;e.__exportStar(SPe(),t),e.__exportStar(xPe(),t)})(_Z);function hl(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function kp(t=6){return BigInt(hl(t))}function Bh(t,e,n){return{id:n||hl(),jsonrpc:"2.0",method:t,params:e}}function PT(t,e){return{id:t,jsonrpc:"2.0",result:e}}function OT(t,e,n){return{id:t,jsonrpc:"2.0",error:IPe(e)}}function IPe(t,e){return typeof t>"u"?WF(vZ):(typeof t=="string"&&(t=Object.assign(Object.assign({},WF(zU)),{message:t})),nPe(t.code)&&(t=rPe(t.code)),t)}let NPe=class{},TPe=class extends NPe{constructor(){super()}},RPe=class extends TPe{constructor(e){super()}};const PPe="^https?:",OPe="^wss?:";function kPe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function SZ(t,e){const n=kPe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function GF(t){return SZ(t,PPe)}function qF(t){return SZ(t,OPe)}function DPe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function xZ(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function HU(t){return xZ(t)&&"method"in t}function kT(t){return xZ(t)&&(fl(t)||Oa(t))}function fl(t){return"result"in t}function Oa(t){return"error"in t}let tc=class extends RPe{constructor(e){super(e),this.events=new ec.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Bh(e.method,e.params||[],e.id||kp().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Oa(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),kT(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const MPe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),LPe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",VF=t=>t.split("?")[0],KF=10,UPe=MPe();let $Pe=class{constructor(e){if(this.url=e,this.events=new ec.EventEmitter,this.registering=!1,!qF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(md(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!qF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=_Z.isReactNative()?void 0:{rejectUnauthorized:!DPe(e)},i=new UPe(e,[],s);LPe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?zg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=OT(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return CZ(e,VF(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>KF&&this.events.setMaxListeners(KF)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${VF(this.url)}`));return this.events.emit("register_error",n),n}};var A3={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Il<"u"&&Il,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Il<"u"&&Il||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(T){return T&&DataView.prototype.isPrototypeOf(T)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(T){return T&&u.indexOf(Object.prototype.toString.call(T))>-1};function h(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(T)||T==="")throw new TypeError('Invalid character in header field name: "'+T+'"');return T.toLowerCase()}function f(T){return typeof T!="string"&&(T=String(T)),T}function p(T){var R={next:function(){var $=T.shift();return{done:$===void 0,value:$}}};return c.iterable&&(R[Symbol.iterator]=function(){return R}),R}function g(T){this.map={},T instanceof g?T.forEach(function(R,$){this.append($,R)},this):Array.isArray(T)?T.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(R){this.append(R,T[R])},this)}g.prototype.append=function(T,R){T=h(T),R=f(R);var $=this.map[T];this.map[T]=$?$+", "+R:R},g.prototype.delete=function(T){delete this.map[h(T)]},g.prototype.get=function(T){return T=h(T),this.has(T)?this.map[T]:null},g.prototype.has=function(T){return this.map.hasOwnProperty(h(T))},g.prototype.set=function(T,R){this.map[h(T)]=f(R)},g.prototype.forEach=function(T,R){for(var $ in this.map)this.map.hasOwnProperty($)&&T.call(R,this.map[$],$,this)},g.prototype.keys=function(){var T=[];return this.forEach(function(R,$){T.push($)}),p(T)},g.prototype.values=function(){var T=[];return this.forEach(function(R){T.push(R)}),p(T)},g.prototype.entries=function(){var T=[];return this.forEach(function(R,$){T.push([$,R])}),p(T)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(T){if(!T._noBody){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}}function y(T){return new Promise(function(R,$){T.onload=function(){R(T.result)},T.onerror=function(){$(T.error)}})}function b(T){var R=new FileReader,$=y(R);return R.readAsArrayBuffer(T),$}function v(T){var R=new FileReader,$=y(R),k=/charset=([A-Za-z0-9_-]+)/.exec(T.type),M=k?k[1]:"utf-8";return R.readAsText(T,M),$}function A(T){for(var R=new Uint8Array(T),$=new Array(R.length),k=0;k<R.length;k++)$[k]=String.fromCharCode(R[k]);return $.join("")}function _(T){if(T.slice)return T.slice(0);var R=new Uint8Array(T.byteLength);return R.set(new Uint8Array(T)),R.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(T){this.bodyUsed=this.bodyUsed,this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:c.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:c.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():c.arrayBuffer&&c.blob&&l(T)?(this._bodyArrayBuffer=_(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||d(T))?this._bodyArrayBuffer=_(T):this._bodyText=T=Object.prototype.toString.call(T):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var T=w(this);return T||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(T){var R=T.toUpperCase();return x.indexOf(R)>-1?R:T}function S(T,R){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var $=R.body;if(T instanceof S){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,R.headers||(this.headers=new g(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!$&&T._bodyInit!=null&&($=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new g(R.headers)),this.method=N(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in a){var W=new AbortController;return W.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&$)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody($),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var k=/([?&])_=[^&]*/;if(k.test(this.url))this.url=this.url.replace(k,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function O(T){var R=new FormData;return T.trim().split("&").forEach(function($){if($){var k=$.split("="),M=k.shift().replace(/\+/g," "),W=k.join("=").replace(/\+/g," ");R.append(decodeURIComponent(M),decodeURIComponent(W))}}),R}function P(T){var R=new g,$=T.replace(/\r?\n[\t ]+/g," ");return $.split("\r").map(function(k){return k.indexOf(`
`)===0?k.substr(1,k.length):k}).forEach(function(k){var M=k.split(":"),W=M.shift().trim();if(W){var K=M.join(":").trim();try{R.append(W,K)}catch(ne){console.warn("Response "+ne.message)}}}),R}I.call(S.prototype);function F(T,R){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new g(R.headers),this.url=R.url||"",this._initBody(T)}I.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},F.error=function(){var T=new F(null,{status:200,statusText:""});return T.ok=!1,T.status=0,T.type="error",T};var G=[301,302,303,307,308];F.redirect=function(T,R){if(G.indexOf(R)===-1)throw new RangeError("Invalid status code");return new F(null,{status:R,headers:{location:T}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(R,$){this.message=R,this.name=$;var k=Error(R);this.stack=k.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function B(T,R){return new Promise(function($,k){var M=new S(T,R);if(M.signal&&M.signal.aborted)return k(new o.DOMException("Aborted","AbortError"));var W=new XMLHttpRequest;function K(){W.abort()}W.onload=function(){var oe={statusText:W.statusText,headers:P(W.getAllResponseHeaders()||"")};M.url.indexOf("file://")===0&&(W.status<200||W.status>599)?oe.status=200:oe.status=W.status,oe.url="responseURL"in W?W.responseURL:oe.headers.get("X-Request-URL");var ae="response"in W?W.response:W.responseText;setTimeout(function(){$(new F(ae,oe))},0)},W.onerror=function(){setTimeout(function(){k(new TypeError("Network request failed"))},0)},W.ontimeout=function(){setTimeout(function(){k(new TypeError("Network request timed out"))},0)},W.onabort=function(){setTimeout(function(){k(new o.DOMException("Aborted","AbortError"))},0)};function ne(oe){try{return oe===""&&a.location.href?a.location.href:oe}catch{return oe}}if(W.open(M.method,ne(M.url),!0),M.credentials==="include"?W.withCredentials=!0:M.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&(c.blob?W.responseType="blob":c.arrayBuffer&&(W.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof g||a.Headers&&R.headers instanceof a.Headers)){var le=[];Object.getOwnPropertyNames(R.headers).forEach(function(oe){le.push(h(oe)),W.setRequestHeader(oe,f(R.headers[oe]))}),M.headers.forEach(function(oe,ae){le.indexOf(ae)===-1&&W.setRequestHeader(ae,oe)})}else M.headers.forEach(function(oe,ae){W.setRequestHeader(ae,oe)});M.signal&&(M.signal.addEventListener("abort",K),W.onreadystatechange=function(){W.readyState===4&&M.signal.removeEventListener("abort",K)}),W.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return B.polyfill=!0,a.fetch||(a.fetch=B,a.Headers=g,a.Request=S,a.Response=F),o.Headers=g,o.Request=S,o.Response=F,o.fetch=B,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(A3,A3.exports);var BPe=A3.exports;const YF=im(BPe);var FPe=Object.defineProperty,jPe=Object.defineProperties,WPe=Object.getOwnPropertyDescriptors,QF=Object.getOwnPropertySymbols,zPe=Object.prototype.hasOwnProperty,HPe=Object.prototype.propertyIsEnumerable,JF=(t,e,n)=>e in t?FPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ZF=(t,e)=>{for(var n in e||(e={}))zPe.call(e,n)&&JF(t,n,e[n]);if(QF)for(var n of QF(e))HPe.call(e,n)&&JF(t,n,e[n]);return t},XF=(t,e)=>jPe(t,WPe(e));const GPe={Accept:"application/json","Content-Type":"application/json"},qPe="POST",ej={headers:GPe,method:qPe},tj=10;let Yc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new ec.EventEmitter,this.isAvailable=!1,this.registering=!1,!GF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=md(e),r=await(await YF(this.url,XF(ZF({},ej),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!GF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=md({id:1,jsonrpc:"2.0",method:"test",params:[]});await YF(e,XF(ZF({},ej),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?zg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=OT(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return CZ(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>tj&&this.events.setMaxListeners(tj)}};const IE={getSIWX(){return be.state.siwx},async initializeIfEnabled(){var i;const t=be.state.siwx,e=H.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(H.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await _s.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),yr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=gt._getClient())==null?void 0:i.disconnect().catch(console.error)),Wt.reset("Connect"),Oc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=be.state.siwx,e=at.getPlainAddress(H.getActiveCaipAddress()),n=H.getActiveCaipNetwork(),r=gt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();je.getConnectorId(n.chainNamespace)===We.CONNECTOR_ID.AUTH&&Wt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),_s.close(),yr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!_s.state.open||Wt.state.view==="ApproveTransaction")&&await _s.open({view:"SIWXSignMessage"}),i.isSmartAccount?Oc.showError("This application might not support Smart Accounts"):Oc.showError("Signature declined"),yr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await gt.disconnect():_s.close(),Wt.reset("Connect"),yr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=be.state.siwx,e=at.getPlainAddress(H.getActiveCaipAddress()),n=H.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Wt.state.view==="ApproveTransaction",r=Wt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=IE.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=H.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Oc.showLoading("Authenticating...",{autoClose:!1}),Ye.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),yr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:IE.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),yr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:IE.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Oc.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=H.state.activeChain;return{network:((e=H.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ye.state.preferredAccountTypes)==null?void 0:n[t])===Gs.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function jA(t,e){return je.getConnectorId(t)===e}function VPe(t){const e=Array.from(H.state.chains.keys());let n=[];return t?(n.push([t,H.state.chains.get(t)]),jA(t,We.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&jA(r,We.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,H.state.chains.get(r)])}):jA(t,We.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&jA(r,We.CONNECTOR_ID.AUTH)&&n.push([r,H.state.chains.get(r)])})):n=Array.from(H.state.chains.entries()),n}const uo={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},bI={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[We.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[We.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[We.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[We.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[We.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[We.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[We.CONNECTOR_ID.INJECTED]:"Browser Wallet",[We.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[We.CONNECTOR_ID.COINBASE]:"Coinbase",[We.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[We.CONNECTOR_ID.LEDGER]:"Ledger",[We.CONNECTOR_ID.SAFE]:"Safe"}},DT={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${uo.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},KPe=new AbortController,Tl={EmbeddedWalletAbortController:KPe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${YPe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function YPe(){return typeof window<"u"}const QPe={createLogger(t,e="error"){const n=Cm({level:e}),{logger:r}=xT({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},JPe="rpc.walletconnect.org";function nj(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const CO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],my={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===JPe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:We.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${We.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return CO.includes(e)?nj(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:bI.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>my.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Fa(a.url,a.config))}),CO.includes(t.caipNetworkId)&&r.push(Fa(nj(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Fa(a))}),uI(r)},extendWagmiTransports(t,e,n){if(CO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return uI([n,Fa(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:We.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Qe.getActiveCaipNetworkId(),n=H.getAllRequestedCaipNetworks(),r=Array.from(((c=H.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},vI={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Qi=ur({providers:{...vI},providerIds:{...vI}}),Un={state:Qi,subscribeKey(t,e){return wi(Qi,t,e)},subscribe(t){return mi(Qi,()=>{t(Qi)})},subscribeProviders(t){return mi(Qi.providers,()=>t(Qi.providers))},setProvider(t,e){e&&(Qi.providers[t]=jg(e))},getProvider(t){return Qi.providers[t]},setProviderId(t,e){e&&(Qi.providerIds[t]=e)},getProviderId(t){if(t)return Qi.providerIds[t]},reset(){Qi.providers={...vI},Qi.providerIds={...vI}},resetChain(t){Qi.providers[t]=void 0,Qi.providerIds[t]=void 0}},rj={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ms={set(t,e){Ko.isClient&&localStorage.setItem(`${Ve.STORAGE_KEY}${t}`,e)},get(t){return Ko.isClient?localStorage.getItem(`${Ve.STORAGE_KEY}${t}`):null},delete(t,e){Ko.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ve.STORAGE_KEY}${t}`))}},WA=30*1e3,Ko={checkIfAllowedToTriggerEmail(){const t=Ms.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<WA){const n=Math.ceil((WA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ms.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<WA)return Math.ceil((WA-e)/1e3)}return 0},checkIfRequestExists(t){return Gs.NOT_SAFE_RPC_METHODS.includes(t.method)||Gs.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(rj.transactionHash))||(t==null?void 0:t.match(rj.signedMessage)))?Ve.RPC_RESPONSE_TYPE_TX:Ve.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Gs.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var wn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(wn||(wn={}));var S3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(S3||(S3={}));const $e=wn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ih=t=>{switch(typeof t){case"undefined":return $e.undefined;case"string":return $e.string;case"number":return isNaN(t)?$e.nan:$e.number;case"boolean":return $e.boolean;case"function":return $e.function;case"bigint":return $e.bigint;case"symbol":return $e.symbol;case"object":return Array.isArray(t)?$e.array:t===null?$e.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?$e.promise:typeof Map<"u"&&t instanceof Map?$e.map:typeof Set<"u"&&t instanceof Set?$e.set:typeof Date<"u"&&t instanceof Date?$e.date:$e.object;default:return $e.unknown}},Ae=wn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ZPe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Fc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,wn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Fc.create=t=>new Fc(t);const jC=(t,e)=>{let n;switch(t.code){case Ae.invalid_type:t.received===$e.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ae.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,wn.jsonStringifyReplacer)}`;break;case Ae.unrecognized_keys:n=`Unrecognized key(s) in object: ${wn.joinValues(t.keys,", ")}`;break;case Ae.invalid_union:n="Invalid input";break;case Ae.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${wn.joinValues(t.options)}`;break;case Ae.invalid_enum_value:n=`Invalid enum value. Expected ${wn.joinValues(t.options)}, received '${t.received}'`;break;case Ae.invalid_arguments:n="Invalid function arguments";break;case Ae.invalid_return_type:n="Invalid function return type";break;case Ae.invalid_date:n="Invalid date";break;case Ae.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:wn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ae.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ae.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ae.custom:n="Invalid input";break;case Ae.invalid_intersection_types:n="Intersection results could not be merged";break;case Ae.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ae.not_finite:n="Number must be finite";break;default:n=e.defaultError,wn.assertNever(t)}return{message:n}};let IZ=jC;function XPe(t){IZ=t}function EI(){return IZ}const CI=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},eOe=[];function Ge(t,e){const n=CI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,EI(),jC].filter(r=>!!r)});t.common.issues.push(n)}class yi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ot;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return yi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Ot;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ot=Object.freeze({status:"aborted"}),NZ=t=>({status:"dirty",value:t}),Fi=t=>({status:"valid",value:t}),x3=t=>t.status==="aborted",I3=t=>t.status==="dirty",WC=t=>t.status==="valid",_I=t=>typeof Promise<"u"&&t instanceof Promise;var lt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(lt||(lt={}));class Xl{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const sj=(t,e)=>{if(WC(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Fc(t.common.issues);return this._error=n,this._error}}};function $t(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class zt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ih(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ih(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new yi,ctx:{common:e.parent.common,data:e.data,parsedType:ih(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(_I(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ih(e)},i=this._parseSync({data:e,path:s.path,parent:s});return sj(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ih(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(_I(s)?s:Promise.resolve(s));return sj(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Ae.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new qc({schema:this,typeName:Et.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return td.create(this,this._def)}nullable(){return Vg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return jc.create(this,this._def)}promise(){return Uw.create(this,this._def)}or(e){return qC.create([this,e],this._def)}and(e){return VC.create(this,e,this._def)}transform(e){return new qc({...$t(this._def),schema:this,typeName:Et.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ZC({...$t(this._def),innerType:this,defaultValue:n,typeName:Et.ZodDefault})}brand(){return new RZ({typeName:Et.ZodBranded,type:this,...$t(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new II({...$t(this._def),innerType:this,catchValue:n,typeName:Et.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return C1.create(this,e)}readonly(){return TI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const tOe=/^c[^\s-]{8,}$/i,nOe=/^[a-z][a-z0-9]*$/,rOe=/^[0-9A-HJKMNP-TV-Z]{26}$/,sOe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,iOe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,oOe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let _O;const aOe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,cOe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,lOe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function uOe(t,e){return!!((e==="v4"||!e)&&aOe.test(t)||(e==="v6"||!e)&&cOe.test(t))}class Mc extends zt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==$e.string){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ae.invalid_type,expected:$e.string,received:i.parsedType}),Ot}const r=new yi;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ge(s,{code:Ae.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ge(s,{code:Ae.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")iOe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"email",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")_O||(_O=new RegExp(oOe,"u")),_O.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"emoji",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")sOe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"uuid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")tOe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"cuid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")nOe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"cuid2",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")rOe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"ulid",code:Ae.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ge(s,{validation:"url",code:Ae.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"regex",code:Ae.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ae.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ae.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ae.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?lOe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ae.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?uOe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"ip",code:Ae.invalid_string,message:i.message}),r.dirty()):wn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Ae.invalid_string,...lt.errToObj(r)})}_addCheck(e){return new Mc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...lt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...lt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...lt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...lt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...lt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...lt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...lt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...lt.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...lt.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...lt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...lt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...lt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...lt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...lt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...lt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...lt.errToObj(n)})}nonempty(e){return this.min(1,lt.errToObj(e))}trim(){return new Mc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Mc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Mc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Mc.create=t=>{var e;return new Mc({checks:[],typeName:Et.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...$t(t)})};function dOe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Sf extends zt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==$e.number){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ae.invalid_type,expected:$e.number,received:i.parsedType}),Ot}let r;const s=new yi;for(const i of this._def.checks)i.kind==="int"?wn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ae.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ae.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ae.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?dOe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ae.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ae.not_finite,message:i.message}),s.dirty()):wn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,s){return new Sf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(s)}]})}_addCheck(e){return new Sf({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:lt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:lt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:lt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:lt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&wn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Sf.create=t=>new Sf({checks:[],typeName:Et.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...$t(t)});class xf extends zt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==$e.bigint){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ae.invalid_type,expected:$e.bigint,received:i.parsedType}),Ot}let r;const s=new yi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ae.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ae.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ae.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):wn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,s){return new xf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(s)}]})}_addCheck(e){return new xf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}xf.create=t=>{var e;return new xf({checks:[],typeName:Et.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...$t(t)})};class zC extends zt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==$e.boolean){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ae.invalid_type,expected:$e.boolean,received:r.parsedType}),Ot}return Fi(e.data)}}zC.create=t=>new zC({typeName:Et.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...$t(t)});class Gg extends zt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==$e.date){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ae.invalid_type,expected:$e.date,received:i.parsedType}),Ot}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ae.invalid_date}),Ot}const r=new yi;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ae.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ae.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):wn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Gg({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:lt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:lt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Gg.create=t=>new Gg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Et.ZodDate,...$t(t)});class AI extends zt{_parse(e){if(this._getType(e)!==$e.symbol){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ae.invalid_type,expected:$e.symbol,received:r.parsedType}),Ot}return Fi(e.data)}}AI.create=t=>new AI({typeName:Et.ZodSymbol,...$t(t)});class HC extends zt{_parse(e){if(this._getType(e)!==$e.undefined){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ae.invalid_type,expected:$e.undefined,received:r.parsedType}),Ot}return Fi(e.data)}}HC.create=t=>new HC({typeName:Et.ZodUndefined,...$t(t)});class GC extends zt{_parse(e){if(this._getType(e)!==$e.null){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ae.invalid_type,expected:$e.null,received:r.parsedType}),Ot}return Fi(e.data)}}GC.create=t=>new GC({typeName:Et.ZodNull,...$t(t)});class Lw extends zt{constructor(){super(...arguments),this._any=!0}_parse(e){return Fi(e.data)}}Lw.create=t=>new Lw({typeName:Et.ZodAny,...$t(t)});class wg extends zt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Fi(e.data)}}wg.create=t=>new wg({typeName:Et.ZodUnknown,...$t(t)});class yd extends zt{_parse(e){const n=this._getOrReturnCtx(e);return Ge(n,{code:Ae.invalid_type,expected:$e.never,received:n.parsedType}),Ot}}yd.create=t=>new yd({typeName:Et.ZodNever,...$t(t)});class SI extends zt{_parse(e){if(this._getType(e)!==$e.undefined){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ae.invalid_type,expected:$e.void,received:r.parsedType}),Ot}return Fi(e.data)}}SI.create=t=>new SI({typeName:Et.ZodVoid,...$t(t)});class jc extends zt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==$e.array)return Ge(n,{code:Ae.invalid_type,expected:$e.array,received:n.parsedType}),Ot;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Ge(n,{code:o?Ae.too_big:Ae.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ge(n,{code:Ae.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ge(n,{code:Ae.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Xl(n,o,n.path,a)))).then(o=>yi.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Xl(n,o,n.path,a)));return yi.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new jc({...this._def,minLength:{value:e,message:lt.toString(n)}})}max(e,n){return new jc({...this._def,maxLength:{value:e,message:lt.toString(n)}})}length(e,n){return new jc({...this._def,exactLength:{value:e,message:lt.toString(n)}})}nonempty(e){return this.min(1,e)}}jc.create=(t,e)=>new jc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Et.ZodArray,...$t(e)});function yy(t){if(t instanceof wr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=td.create(yy(r))}return new wr({...t._def,shape:()=>e})}else return t instanceof jc?new jc({...t._def,type:yy(t.element)}):t instanceof td?td.create(yy(t.unwrap())):t instanceof Vg?Vg.create(yy(t.unwrap())):t instanceof eu?eu.create(t.items.map(e=>yy(e))):t}class wr extends zt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=wn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==$e.object){const l=this._getOrReturnCtx(e);return Ge(l,{code:Ae.invalid_type,expected:$e.object,received:l.parsedType}),Ot}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof yd&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Xl(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof yd){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Ge(s,{code:Ae.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Xl(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>yi.mergeObjectSync(r,l)):yi.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return lt.errToObj,new wr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=lt.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new wr({...this._def,unknownKeys:"strip"})}passthrough(){return new wr({...this._def,unknownKeys:"passthrough"})}extend(e){return new wr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new wr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Et.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new wr({...this._def,catchall:e})}pick(e){const n={};return wn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new wr({...this._def,shape:()=>n})}omit(e){const n={};return wn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new wr({...this._def,shape:()=>n})}deepPartial(){return yy(this)}partial(e){const n={};return wn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new wr({...this._def,shape:()=>n})}required(e){const n={};return wn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof td;)i=i._def.innerType;n[r]=i}}),new wr({...this._def,shape:()=>n})}keyof(){return TZ(wn.objectKeys(this.shape))}}wr.create=(t,e)=>new wr({shape:()=>t,unknownKeys:"strip",catchall:yd.create(),typeName:Et.ZodObject,...$t(e)});wr.strictCreate=(t,e)=>new wr({shape:()=>t,unknownKeys:"strict",catchall:yd.create(),typeName:Et.ZodObject,...$t(e)});wr.lazycreate=(t,e)=>new wr({shape:t,unknownKeys:"strip",catchall:yd.create(),typeName:Et.ZodObject,...$t(e)});class qC extends zt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Fc(a.ctx.common.issues));return Ge(n,{code:Ae.invalid_union,unionErrors:o}),Ot}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Fc(c));return Ge(n,{code:Ae.invalid_union,unionErrors:a}),Ot}}get options(){return this._def.options}}qC.create=(t,e)=>new qC({options:t,typeName:Et.ZodUnion,...$t(e)});const FS=t=>t instanceof YC?FS(t.schema):t instanceof qc?FS(t.innerType()):t instanceof QC?[t.value]:t instanceof If?t.options:t instanceof JC?Object.keys(t.enum):t instanceof ZC?FS(t._def.innerType):t instanceof HC?[void 0]:t instanceof GC?[null]:null;class MT extends zt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==$e.object)return Ge(n,{code:Ae.invalid_type,expected:$e.object,received:n.parsedType}),Ot;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ge(n,{code:Ae.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ot)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=FS(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new MT({typeName:Et.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...$t(r)})}}function N3(t,e){const n=ih(t),r=ih(e);if(t===e)return{valid:!0,data:t};if(n===$e.object&&r===$e.object){const s=wn.objectKeys(e),i=wn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=N3(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===$e.array&&r===$e.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=N3(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===$e.date&&r===$e.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class VC extends zt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(x3(i)||x3(o))return Ot;const a=N3(i.value,o.value);return a.valid?((I3(i)||I3(o))&&n.dirty(),{status:n.value,value:a.data}):(Ge(r,{code:Ae.invalid_intersection_types}),Ot)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}VC.create=(t,e,n)=>new VC({left:t,right:e,typeName:Et.ZodIntersection,...$t(n)});class eu extends zt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.array)return Ge(r,{code:Ae.invalid_type,expected:$e.array,received:r.parsedType}),Ot;if(r.data.length<this._def.items.length)return Ge(r,{code:Ae.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ot;!this._def.rest&&r.data.length>this._def.items.length&&(Ge(r,{code:Ae.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Xl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>yi.mergeArray(n,o)):yi.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new eu({...this._def,rest:e})}}eu.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new eu({items:t,typeName:Et.ZodTuple,rest:null,...$t(e)})};class KC extends zt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.object)return Ge(r,{code:Ae.invalid_type,expected:$e.object,received:r.parsedType}),Ot;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Xl(r,a,r.path,a)),value:o._parse(new Xl(r,r.data[a],r.path,a))});return r.common.async?yi.mergeObjectAsync(n,s):yi.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof zt?new KC({keyType:e,valueType:n,typeName:Et.ZodRecord,...$t(r)}):new KC({keyType:Mc.create(),valueType:e,typeName:Et.ZodRecord,...$t(n)})}}class xI extends zt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.map)return Ge(r,{code:Ae.invalid_type,expected:$e.map,received:r.parsedType}),Ot;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Xl(r,a,r.path,[l,"key"])),value:i._parse(new Xl(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Ot;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Ot;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}xI.create=(t,e,n)=>new xI({valueType:e,keyType:t,typeName:Et.ZodMap,...$t(n)});class qg extends zt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==$e.set)return Ge(r,{code:Ae.invalid_type,expected:$e.set,received:r.parsedType}),Ot;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ge(r,{code:Ae.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ge(r,{code:Ae.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Ot;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Xl(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new qg({...this._def,minSize:{value:e,message:lt.toString(n)}})}max(e,n){return new qg({...this._def,maxSize:{value:e,message:lt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}qg.create=(t,e)=>new qg({valueType:t,minSize:null,maxSize:null,typeName:Et.ZodSet,...$t(e)});class s0 extends zt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==$e.function)return Ge(n,{code:Ae.invalid_type,expected:$e.function,received:n.parsedType}),Ot;function r(a,c){return CI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,EI(),jC].filter(l=>!!l),issueData:{code:Ae.invalid_arguments,argumentsError:c}})}function s(a,c){return CI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,EI(),jC].filter(l=>!!l),issueData:{code:Ae.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Uw){const a=this;return Fi(async function(...c){const l=new Fc([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Fi(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Fc([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Fc([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new s0({...this._def,args:eu.create(e).rest(wg.create())})}returns(e){return new s0({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new s0({args:e||eu.create([]).rest(wg.create()),returns:n||wg.create(),typeName:Et.ZodFunction,...$t(r)})}}class YC extends zt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}YC.create=(t,e)=>new YC({getter:t,typeName:Et.ZodLazy,...$t(e)});class QC extends zt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ge(n,{received:n.data,code:Ae.invalid_literal,expected:this._def.value}),Ot}return{status:"valid",value:e.data}}get value(){return this._def.value}}QC.create=(t,e)=>new QC({value:t,typeName:Et.ZodLiteral,...$t(e)});function TZ(t,e){return new If({values:t,typeName:Et.ZodEnum,...$t(e)})}class If extends zt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ge(n,{expected:wn.joinValues(r),received:n.parsedType,code:Ae.invalid_type}),Ot}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Ge(n,{received:n.data,code:Ae.invalid_enum_value,options:r}),Ot}return Fi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return If.create(e)}exclude(e){return If.create(this.options.filter(n=>!e.includes(n)))}}If.create=TZ;class JC extends zt{_parse(e){const n=wn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==$e.string&&r.parsedType!==$e.number){const s=wn.objectValues(n);return Ge(r,{expected:wn.joinValues(s),received:r.parsedType,code:Ae.invalid_type}),Ot}if(n.indexOf(e.data)===-1){const s=wn.objectValues(n);return Ge(r,{received:r.data,code:Ae.invalid_enum_value,options:s}),Ot}return Fi(e.data)}get enum(){return this._def.values}}JC.create=(t,e)=>new JC({values:t,typeName:Et.ZodNativeEnum,...$t(e)});class Uw extends zt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==$e.promise&&n.common.async===!1)return Ge(n,{code:Ae.invalid_type,expected:$e.promise,received:n.parsedType}),Ot;const r=n.parsedType===$e.promise?n.data:Promise.resolve(n.data);return Fi(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Uw.create=(t,e)=>new Uw({type:t,typeName:Et.ZodPromise,...$t(e)});class qc extends zt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Et.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ge(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ot:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ot:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!WC(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>WC(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);wn.assertNever(s)}}qc.create=(t,e,n)=>new qc({schema:t,typeName:Et.ZodEffects,effect:e,...$t(n)});qc.createWithPreprocess=(t,e,n)=>new qc({schema:e,effect:{type:"preprocess",transform:t},typeName:Et.ZodEffects,...$t(n)});class td extends zt{_parse(e){return this._getType(e)===$e.undefined?Fi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}td.create=(t,e)=>new td({innerType:t,typeName:Et.ZodOptional,...$t(e)});class Vg extends zt{_parse(e){return this._getType(e)===$e.null?Fi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Vg.create=(t,e)=>new Vg({innerType:t,typeName:Et.ZodNullable,...$t(e)});class ZC extends zt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===$e.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ZC.create=(t,e)=>new ZC({innerType:t,typeName:Et.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$t(e)});class II extends zt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return _I(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Fc(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Fc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}II.create=(t,e)=>new II({innerType:t,typeName:Et.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$t(e)});class NI extends zt{_parse(e){if(this._getType(e)!==$e.nan){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ae.invalid_type,expected:$e.nan,received:r.parsedType}),Ot}return{status:"valid",value:e.data}}}NI.create=t=>new NI({typeName:Et.ZodNaN,...$t(t)});const hOe=Symbol("zod_brand");class RZ extends zt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class C1 extends zt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ot:i.status==="dirty"?(n.dirty(),NZ(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ot:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new C1({in:e,out:n,typeName:Et.ZodPipeline})}}class TI extends zt{_parse(e){const n=this._def.innerType._parse(e);return WC(n)&&(n.value=Object.freeze(n.value)),n}}TI.create=(t,e)=>new TI({innerType:t,typeName:Et.ZodReadonly,...$t(e)});const PZ=(t,e={},n)=>t?Lw.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Lw.create(),fOe={object:wr.lazycreate};var Et;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Et||(Et={}));const pOe=(t,e={message:`Input not instance of ${t.name}`})=>PZ(n=>n instanceof t,e),OZ=Mc.create,kZ=Sf.create,gOe=NI.create,mOe=xf.create,DZ=zC.create,yOe=Gg.create,wOe=AI.create,bOe=HC.create,vOe=GC.create,EOe=Lw.create,COe=wg.create,_Oe=yd.create,AOe=SI.create,SOe=jc.create,xOe=wr.create,IOe=wr.strictCreate,NOe=qC.create,TOe=MT.create,ROe=VC.create,POe=eu.create,OOe=KC.create,kOe=xI.create,DOe=qg.create,MOe=s0.create,LOe=YC.create,UOe=QC.create,$Oe=If.create,BOe=JC.create,FOe=Uw.create,ij=qc.create,jOe=td.create,WOe=Vg.create,zOe=qc.createWithPreprocess,HOe=C1.create,GOe=()=>OZ().optional(),qOe=()=>kZ().optional(),VOe=()=>DZ().optional(),KOe={string:t=>Mc.create({...t,coerce:!0}),number:t=>Sf.create({...t,coerce:!0}),boolean:t=>zC.create({...t,coerce:!0}),bigint:t=>xf.create({...t,coerce:!0}),date:t=>Gg.create({...t,coerce:!0})},YOe=Ot;var E=Object.freeze({__proto__:null,defaultErrorMap:jC,setErrorMap:XPe,getErrorMap:EI,makeIssue:CI,EMPTY_PATH:eOe,addIssueToContext:Ge,ParseStatus:yi,INVALID:Ot,DIRTY:NZ,OK:Fi,isAborted:x3,isDirty:I3,isValid:WC,isAsync:_I,get util(){return wn},get objectUtil(){return S3},ZodParsedType:$e,getParsedType:ih,ZodType:zt,ZodString:Mc,ZodNumber:Sf,ZodBigInt:xf,ZodBoolean:zC,ZodDate:Gg,ZodSymbol:AI,ZodUndefined:HC,ZodNull:GC,ZodAny:Lw,ZodUnknown:wg,ZodNever:yd,ZodVoid:SI,ZodArray:jc,ZodObject:wr,ZodUnion:qC,ZodDiscriminatedUnion:MT,ZodIntersection:VC,ZodTuple:eu,ZodRecord:KC,ZodMap:xI,ZodSet:qg,ZodFunction:s0,ZodLazy:YC,ZodLiteral:QC,ZodEnum:If,ZodNativeEnum:JC,ZodPromise:Uw,ZodEffects:qc,ZodTransformer:qc,ZodOptional:td,ZodNullable:Vg,ZodDefault:ZC,ZodCatch:II,ZodNaN:NI,BRAND:hOe,ZodBranded:RZ,ZodPipeline:C1,ZodReadonly:TI,custom:PZ,Schema:zt,ZodSchema:zt,late:fOe,get ZodFirstPartyTypeKind(){return Et},coerce:KOe,any:EOe,array:SOe,bigint:mOe,boolean:DZ,date:yOe,discriminatedUnion:TOe,effect:ij,enum:$Oe,function:MOe,instanceof:pOe,intersection:ROe,lazy:LOe,literal:UOe,map:kOe,nan:gOe,nativeEnum:BOe,never:_Oe,null:vOe,nullable:WOe,number:kZ,object:xOe,oboolean:VOe,onumber:qOe,optional:jOe,ostring:GOe,pipeline:HOe,preprocess:zOe,promise:FOe,record:OOe,set:DOe,strictObject:IOe,string:OZ,symbol:wOe,transformer:ij,tuple:POe,undefined:bOe,union:NOe,unknown:COe,void:AOe,NEVER:YOe,ZodIssueCode:Ae,quotelessJson:ZPe,ZodError:Fc});const Nr=E.object({message:E.string()});function ze(t){return E.literal(Ve[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const QOe=E.object({chainId:E.string().or(E.number())}),JOe=E.object({email:E.string().email()}),ZOe=E.object({otp:E.string()}),XOe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),e2e=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),t2e=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),n2e=E.object({email:E.string().email()}),r2e=E.object({otp:E.string()}),s2e=E.object({otp:E.string()}),i2e=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),o2e=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),a2e=E.object({type:E.string()}),c2e=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),l2e=E.object({url:E.string()}),u2e=E.object({userName:E.string()}),d2e=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Gs.ACCOUNT_TYPES.EOA,Gs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),h2e=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),f2e=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Gs.ACCOUNT_TYPES.EOA,Gs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),p2e=E.object({uri:E.string()}),g2e=E.object({isConnected:E.boolean()}),m2e=E.object({chainId:E.string().or(E.number())}),y2e=E.object({chainId:E.string().or(E.number())}),w2e=E.object({newEmail:E.string().email()}),b2e=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const v2e=E.object({version:E.string().optional()}),E2e=E.object({type:E.string(),address:E.string()}),C2e=E.any(),_2e=E.object({method:E.literal("eth_accounts")}),A2e=E.object({method:E.literal("eth_blockNumber")}),S2e=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),x2e=E.object({method:E.literal("eth_chainId")}),I2e=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),N2e=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),T2e=E.object({method:E.literal("eth_gasPrice")}),R2e=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),P2e=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),O2e=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),k2e=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),D2e=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),M2e=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),L2e=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),U2e=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),$2e=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),B2e=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),F2e=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),j2e=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),W2e=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),z2e=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),H2e=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),G2e=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),q2e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),V2e=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),K2e=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),Y2e=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),Q2e=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),J2e=E.object({method:E.literal("eth_newBlockFilter")}),Z2e=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),X2e=E.object({method:E.literal("eth_newPendingTransactionFilter")}),eke=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),tke=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),nke=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),oj=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),rke=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),ske=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),ike=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),oke=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),ake=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),cke=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),lke=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),uke=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),dke=E.object({method:E.literal("wallet_getCapabilities")}),hke=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),fke=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),pke=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),aj=E.object({token:E.string()}),He=E.object({id:E.string().optional()}),pv={appEvent:He.extend({type:ze("APP_SWITCH_NETWORK"),payload:QOe}).or(He.extend({type:ze("APP_CONNECT_EMAIL"),payload:JOe})).or(He.extend({type:ze("APP_CONNECT_DEVICE")})).or(He.extend({type:ze("APP_CONNECT_OTP"),payload:ZOe})).or(He.extend({type:ze("APP_CONNECT_SOCIAL"),payload:XOe})).or(He.extend({type:ze("APP_GET_FARCASTER_URI")})).or(He.extend({type:ze("APP_CONNECT_FARCASTER")})).or(He.extend({type:ze("APP_GET_USER"),payload:E.optional(e2e)})).or(He.extend({type:ze("APP_GET_SOCIAL_REDIRECT_URI"),payload:t2e})).or(He.extend({type:ze("APP_SIGN_OUT")})).or(He.extend({type:ze("APP_IS_CONNECTED"),payload:E.optional(aj)})).or(He.extend({type:ze("APP_GET_CHAIN_ID")})).or(He.extend({type:ze("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(He.extend({type:ze("APP_INIT_SMART_ACCOUNT")})).or(He.extend({type:ze("APP_SET_PREFERRED_ACCOUNT"),payload:a2e})).or(He.extend({type:ze("APP_RPC_REQUEST"),payload:oj.or(pke).or(_2e).or(A2e).or(S2e).or(x2e).or(I2e).or(N2e).or(T2e).or(R2e).or(P2e).or(O2e).or(k2e).or(D2e).or(M2e).or(L2e).or(U2e).or($2e).or(B2e).or(F2e).or(j2e).or(W2e).or(z2e).or(H2e).or(G2e).or(q2e).or(V2e).or(K2e).or(Y2e).or(Q2e).or(J2e).or(Z2e).or(X2e).or(eke).or(tke).or(nke).or(oj).or(rke).or(ske).or(ike).or(oke).or(ake).or(cke).or(uke).or(lke).or(dke).or(hke).or(fke)})).or(He.extend({type:ze("APP_UPDATE_EMAIL"),payload:n2e})).or(He.extend({type:ze("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:r2e})).or(He.extend({type:ze("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:s2e})).or(He.extend({type:ze("APP_SYNC_THEME"),payload:i2e})).or(He.extend({type:ze("APP_SYNC_DAPP_DATA"),payload:o2e})).or(He.extend({type:ze("APP_RELOAD")})),frameEvent:He.extend({type:ze("FRAME_SWITCH_NETWORK_ERROR"),payload:Nr}).or(He.extend({type:ze("FRAME_SWITCH_NETWORK_SUCCESS"),payload:y2e})).or(He.extend({type:ze("FRAME_CONNECT_EMAIL_SUCCESS"),payload:c2e})).or(He.extend({type:ze("FRAME_CONNECT_EMAIL_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:l2e})).or(He.extend({type:ze("FRAME_GET_FARCASTER_URI_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:u2e})).or(He.extend({type:ze("FRAME_CONNECT_FARCASTER_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_CONNECT_OTP_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_CONNECT_OTP_SUCCESS")})).or(He.extend({type:ze("FRAME_CONNECT_DEVICE_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_CONNECT_DEVICE_SUCCESS")})).or(He.extend({type:ze("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:d2e})).or(He.extend({type:ze("FRAME_CONNECT_SOCIAL_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_GET_USER_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_GET_USER_SUCCESS"),payload:f2e})).or(He.extend({type:ze("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:p2e})).or(He.extend({type:ze("FRAME_SIGN_OUT_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_SIGN_OUT_SUCCESS")})).or(He.extend({type:ze("FRAME_IS_CONNECTED_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_IS_CONNECTED_SUCCESS"),payload:g2e})).or(He.extend({type:ze("FRAME_GET_CHAIN_ID_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_GET_CHAIN_ID_SUCCESS"),payload:m2e})).or(He.extend({type:ze("FRAME_RPC_REQUEST_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_RPC_REQUEST_SUCCESS"),payload:C2e})).or(He.extend({type:ze("FRAME_SESSION_UPDATE"),payload:aj})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_SUCCESS"),payload:h2e})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:w2e})).or(He.extend({type:ze("FRAME_SYNC_THEME_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_SYNC_THEME_SUCCESS")})).or(He.extend({type:ze("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(He.extend({type:ze("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:b2e})).or(He.extend({type:ze("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:E2e})).or(He.extend({type:ze("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_READY"),payload:v2e})).or(He.extend({type:ze("FRAME_RELOAD_ERROR"),payload:Nr})).or(He.extend({type:ze("FRAME_RELOAD_SUCCESS")}))};function AO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let gke=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=We.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!AO(Ve.FRAME_EVENT_KEY,l))return;const u=pv.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Ko.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Ko.isClient&&window.addEventListener("message",({data:o})=>{if(!AO(Ve.FRAME_EVENT_KEY,o))return;const a=pv.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Ko.isClient&&window.addEventListener("message",({data:o})=>{if(!AO(Ve.APP_EVENT_KEY,o))return;const a=pv.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Ko.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");pv.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Ko.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");pv.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Ko.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${eSe}?projectId=${e}&chainId=${r}&version=${nSe}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},mke=class{constructor(e){var i;const n=Cm({level:tSe}),{logger:r,chunkLoggerController:s}=xT({opts:n});this.logger=Qs(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},yke=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new mke(e)),this.abortController=i,this.w3mFrame=new gke({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ms.get(Ve.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ms.get(Ve.EMAIL)}getUsername(){return Ms.get(Ve.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ve.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Ko.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ve.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ve.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ve.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ve.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ve.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ve.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ve.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ve.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ve.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ve.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ve.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ve.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Gs.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ve.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Gs.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ve.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Gs.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ve.APP_SYNC_DAPP_DATA,Ve.APP_SYNC_THEME,Ve.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ve.APP_CONNECT_EMAIL,Ve.APP_CONNECT_DEVICE,Ve.APP_CONNECT_OTP,Ve.APP_CONNECT_SOCIAL,Ve.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,A;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ms.set(Ve.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ms.set(Ve.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ms.set(Ve.EMAIL,e),Ms.set(Ve.EMAIL_LOGIN_USED_KEY,"true"),Ms.delete(Ve.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ms.delete(Ve.EMAIL_LOGIN_USED_KEY),Ms.delete(Ve.EMAIL),Ms.delete(Ve.LAST_USED_CHAIN_KEY),Ms.delete(Ve.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ms.set(Ve.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ms.get(Ve.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ms.set(Ve.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},wke=class jS{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return jS.instance||(jS.instance=new yke({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),jS.instance}};function bke(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function ps(t,...e){try{return bke(t(...e))}catch(n){return Promise.reject(n)}}function vke(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function Eke(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function WS(t){if(vke(t))return String(t);if(Eke(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return WS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const T3="base64:";function Cke(t){return typeof t=="string"?t:T3+Ske(t)}function _ke(t){return typeof t!="string"||!t.startsWith(T3)?t:Ake(t.slice(T3.length))}function Ake(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Ske(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function to(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function xke(...t){return to(t.join(":"))}function zA(t){return t=to(t),t?t+":":""}function Ike(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function Nke(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const Tke="memory",Rke=()=>{const t=new Map;return{name:Tke,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Pke(t={}){const e={mounts:{"":t.driver||Rke()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=to(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await cj(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=to(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(w);f(v).items.push({key:w,value:y,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=to(l);const{relativeKey:d,driver:h}=n(l);return ps(h.hasItem,d,u)},getItem(l,u={}){l=to(l);const{relativeKey:d,driver:h}=n(l);return ps(h.getItem,d,u).then(f=>LA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?ps(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:xke(d.base,f.key),value:LA(f.value)}))):Promise.all(d.items.map(h=>ps(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:LA(f)})))))},getItemRaw(l,u={}){l=to(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?ps(h.getItemRaw,d,u):ps(h.getItem,d,u).then(f=>_ke(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=to(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await ps(f.setItem,h,WS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return ps(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:WS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>ps(d.driver.setItem,h.relativeKey,WS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=to(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await ps(f.setItemRaw,h,u,d);else if(f.setItem)await ps(f.setItem,h,Cke(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=to(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await ps(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await ps(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=to(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await ps(h.getMeta,d,u)),!u.nativeOnly){const p=await ps(h.getItem,d+"$",u).then(g=>LA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=zA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await ps(y.driver.getKeys,y.relativeBase,u);for(const v of b){const A=y.mountpoint+to(v);h.some(_=>A.startsWith(_))||f.push(A)}h=[y.mountpoint,...h.filter(v=>!v.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||Ike(y,u.maxDepth))&&Nke(y,l))},async clear(l,u={}){l=zA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return ps(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>lj(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=zA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(cj(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=zA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await lj(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=to(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=to(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function cj(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function lj(t){typeof t.dispose=="function"&&await ps(t.dispose)}const Oke="idb-keyval";var kke=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=kJ(t.dbName,t.storeName)),{name:Oke,options:t,async hasItem(s){return!(typeof await hF(n(s),r)>"u")},async getItem(s){return await hF(n(s),r)??null},setItem(s,i){return rxe(n(s),i,r)},removeItem(s){return sxe(n(s),r)},getKeys(){return axe(r)},clear(){return ixe(r)}}};const Dke="WALLET_CONNECT_V2_INDEXED_DB",Mke="keyvaluestorage";let Lke=class{constructor(){this.indexedDb=Pke({driver:kke({dbName:Dke,storeName:Mke})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,md(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var SO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof SO<"u"&&SO.localStorage?zS.exports=SO.localStorage:typeof window<"u"&&window.localStorage?zS.exports=window.localStorage:zS.exports=new e})();function Uke(t){var e;return[t[0],zg((e=t[1])!=null?e:"")]}let $ke=class{constructor(){this.localStorage=zS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Uke)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return zg(n)}async setItem(e,n){this.localStorage.setItem(e,md(n))}async removeItem(e){this.localStorage.removeItem(e)}};const Bke="wc_storage_version",uj=1,Fke=async(t,e,n)=>{const r=Bke,s=await e.getItem(r);if(s&&s>=uj){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,uj),n(e),jke(t,o)},jke=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let Wke=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new $ke;this.storage=e;try{const n=new Lke;Fke(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var zke=Object.defineProperty,Hke=(t,e,n)=>e in t?zke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dj=(t,e,n)=>Hke(t,typeof e!="symbol"?e+"":e,n);let Gke=class extends bm{constructor(e){super(),this.opts=e,dj(this,"protocol","wc"),dj(this,"version",2)}};var qke=Object.defineProperty,Vke=(t,e,n)=>e in t?qke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kke=(t,e,n)=>Vke(t,e+"",n);let Yke=class extends bm{constructor(e,n){super(),this.core=e,this.logger=n,Kke(this,"records",new Map)}},Qke=class{constructor(e,n){this.logger=e,this.core=n}},Jke=class extends bm{constructor(e,n){super(),this.relayer=e,this.logger=n}},Zke=class extends bm{constructor(e){super()}},Xke=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},eDe=class extends bm{constructor(e,n){super(),this.relayer=e,this.logger=n}},tDe=class extends bm{constructor(e,n){super(),this.core=e,this.logger=n}},nDe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},rDe=class{constructor(e,n){this.projectId=e,this.logger=n}},sDe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var iDe=Object.defineProperty,oDe=(t,e,n)=>e in t?iDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hj=(t,e,n)=>oDe(t,typeof e!="symbol"?e+"":e,n);let aDe=class{constructor(e){this.opts=e,hj(this,"protocol","wc"),hj(this,"version",2)}},cDe=class{constructor(e){this.client=e}};function XC(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function fj(t){return XC(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const MZ="2.23.2";let gv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${MZ}`};class Kg extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Kg?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Kg&&n.cause.docsPath||n.docsPath,i=(a=gv.getDocsUrl)==null?void 0:a.call(gv,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...gv.version?[`Version: ${gv.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=MZ}walk(e){return LZ(this,e)}}function LZ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?LZ(t.cause,e):e?null:t}class UZ extends Kg{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function xb(t,{dir:e,size:n=32}={}){return typeof t=="string"?lDe(t,{dir:e,size:n}):uDe(t,{dir:e,size:n})}function lDe(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new UZ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function uDe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new UZ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class dDe extends Kg{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class hDe extends Kg{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Ib(t,{size:e}){if(fj(t)>e)throw new hDe({givenSize:fj(t),maxSize:e})}function R3(t,e={}){const{signed:n}=e;e.size&&Ib(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function fDe(t,e={}){return Number(R3(t,e))}const pDe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function P3(t,e={}){return typeof t=="number"||typeof t=="bigint"?BZ(t,e):typeof t=="string"?yDe(t,e):typeof t=="boolean"?gDe(t,e):$Z(t,e)}function gDe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ib(n,{size:e.size}),xb(n,{size:e.size})):n}function $Z(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=pDe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ib(r,{size:e.size}),xb(r,{dir:"right",size:e.size})):r}function BZ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new dDe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?xb(a,{size:r}):a}const mDe=new TextEncoder;function yDe(t,e={}){const n=mDe.encode(t);return $Z(n,e)}const wDe=new TextEncoder;function bDe(t,e={}){return typeof t=="number"||typeof t=="bigint"?EDe(t,e):typeof t=="boolean"?vDe(t,e):XC(t)?FZ(t,e):jZ(t,e)}function vDe(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ib(n,{size:e.size}),xb(n,{size:e.size})):n}const mu={zero:48,nine:57,A:65,F:70,a:97,f:102};function pj(t){if(t>=mu.zero&&t<=mu.nine)return t-mu.zero;if(t>=mu.A&&t<=mu.F)return t-(mu.A-10);if(t>=mu.a&&t<=mu.f)return t-(mu.a-10)}function FZ(t,e={}){let n=t;e.size&&(Ib(n,{size:e.size}),n=xb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=pj(r.charCodeAt(a++)),l=pj(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Kg(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function EDe(t,e){const n=BZ(t,e);return FZ(n)}function jZ(t,e={}){const n=wDe.encode(t);return typeof e.size=="number"?(Ib(n,{size:e.size}),xb(n,{dir:"right",size:e.size})):n}function RI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function CDe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function LT(t,...e){if(!CDe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function fKe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");RI(t.outputLen),RI(t.blockLen)}function gj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _De(t,e){LT(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const HA=BigInt(2**32-1),mj=BigInt(32);function ADe(t,e=!1){return e?{h:Number(t&HA),l:Number(t>>mj&HA)}:{h:Number(t>>mj&HA)|0,l:Number(t&HA)|0}}function SDe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=ADe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const xDe=(t,e,n)=>t<<n|e>>>32-n,IDe=(t,e,n)=>e<<n|t>>>32-n,NDe=(t,e,n)=>e<<n-32|t>>>64-n,TDe=(t,e,n)=>t<<n-32|e>>>64-n,Km=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function RDe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function pKe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function gKe(t,e){return t<<32-e|t>>>e}const yj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function PDe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function wj(t){for(let e=0;e<t.length;e++)t[e]=PDe(t[e])}function ODe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function WZ(t){return typeof t=="string"&&(t=ODe(t)),LT(t),t}function mKe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];LT(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let kDe=class{clone(){return this._cloneInto()}};function DDe(t){const e=r=>t().update(WZ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function wKe(t=32){if(Km&&typeof Km.getRandomValues=="function")return Km.getRandomValues(new Uint8Array(t));if(Km&&typeof Km.randomBytes=="function")return Km.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const zZ=[],HZ=[],GZ=[],MDe=BigInt(0),mv=BigInt(1),LDe=BigInt(2),UDe=BigInt(7),$De=BigInt(256),BDe=BigInt(113);for(let t=0,e=mv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],zZ.push(2*(5*r+n)),HZ.push((t+1)*(t+2)/2%64);let s=MDe;for(let i=0;i<7;i++)e=(e<<mv^(e>>UDe)*BDe)%$De,e&LDe&&(s^=mv<<(mv<<BigInt(i))-mv);GZ.push(s)}const[FDe,jDe]=SDe(GZ,!0),bj=(t,e,n)=>n>32?NDe(t,e,n):xDe(t,e,n),vj=(t,e,n)=>n>32?TDe(t,e,n):IDe(t,e,n);function WDe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=bj(l,u,1)^n[a],h=vj(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=HZ[o],c=bj(s,i,a),l=vj(s,i,a),u=zZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=FDe[r],t[1]^=jDe[r]}n.fill(0)}let zDe=class qZ extends kDe{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,RI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=RDe(this.state)}keccak(){yj||wj(this.state32),WDe(this.state32,this.rounds),yj||wj(this.state32),this.posOut=0,this.pos=0}update(e){gj(this);const{blockLen:n,state:r}=this;e=WZ(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){gj(this,!1),LT(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return RI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(_De(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new qZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const HDe=(t,e,n)=>DDe(()=>new zDe(e,t,n)),GDe=HDe(1,136,256/8);function VZ(t,e){const n=e||"hex",r=GDe(XC(t,{strict:!1})?bDe(t):t);return n==="bytes"?r:P3(r)}class qDe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const xO=new qDe(8192);function VDe(t,e){if(xO.has(`${t}.${e}`))return xO.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=VZ(jZ(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return xO.set(`${t}.${e}`,i),i}function KDe(t){const e=VZ(`0x${t.substring(4)}`).substring(26);return VDe(`0x${e}`)}async function YDe({hash:t,signature:e}){const n=XC(t)?t:P3(t),{secp256k1:r}=await hi(async()=>{const{secp256k1:o}=await import("./secp256k1-C2fyI8ex.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=Ej(f);return new r.Signature(R3(l),R3(u)).addRecoveryBit(p)}const o=XC(e)?e:P3(e),a=fDe(`0x${o.slice(130)}`),c=Ej(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Ej(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function QDe({hash:t,signature:e}){return KDe(await YDe({hash:t,signature:e}))}var JDe={};const ZDe=":";function i0(t){const[e,n]=t.split(ZDe);return{namespace:e,reference:n}}function KZ(t,e){return t.includes(":")?[t]:e.chains||[]}var XDe=Object.defineProperty,e3e=Object.defineProperties,t3e=Object.getOwnPropertyDescriptors,Cj=Object.getOwnPropertySymbols,n3e=Object.prototype.hasOwnProperty,r3e=Object.prototype.propertyIsEnumerable,_j=(t,e,n)=>e in t?XDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Aj=(t,e)=>{for(var n in e||(e={}))n3e.call(e,n)&&_j(t,n,e[n]);if(Cj)for(var n of Cj(e))r3e.call(e,n)&&_j(t,n,e[n]);return t},s3e=(t,e)=>e3e(t,t3e(e));const i3e="ReactNative",Jo={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},o3e="js";function PI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function $f(){return!Hg()&&!!jU()&&navigator.product===i3e}function a3e(){return $f()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function c3e(){return $f()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Nb(){return!PI()&&!!jU()&&!!Hg()}function _1(){return $f()?Jo.reactNative:PI()?Jo.node:Nb()?Jo.browser:Jo.unknown}function Sj(){var t;try{return $f()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function l3e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function u3e(t){var e,n;const r=YZ();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),s3e(Aj(Aj({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function YZ(){return fZ()||{name:"",description:"",url:"",icons:[""]}}function d3e(){if(_1()===Jo.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=MTe();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function h3e(){var t;const e=_1();return e===Jo.browser?[e,((t=hZ())==null?void 0:t.host)||"unknown"].join(":"):e}function QZ(t,e,n){const r=d3e(),s=h3e();return[[t,e].join("-"),[o3e,n].join("-"),r,s].join("/")}function f3e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=QZ(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=l3e(l[1]||"",d);return l[0]+"?"+h}function Dp(t,e){return t.filter(n=>e.includes(n)).length===t.length}function O3(t){return Object.fromEntries(t.entries())}function k3(t){return new Map(Object.entries(t))}function cp(t=Ne.FIVE_MINUTES,e){const n=Ne.toMiliseconds(t||Ne.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Fh(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function JZ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function p3e(t){return JZ("topic",t)}function g3e(t){return JZ("id",t)}function ZZ(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Zr(t,e){return Ne.fromMiliseconds(Date.now()+Ne.toMiliseconds(t))}function th(t){return Date.now()>=Ne.toMiliseconds(t)}function Sn(t,e){return`${t}${e?`:${e}`:""}`}function Vl(t=[],e=[]){return[...new Set([...t,...e])]}async function m3e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=y3e(i,t,e),a=_1();if(a===Jo.browser){if(!((r=Hg())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}w3e(o)}else a===Jo.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function y3e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${C3e(r,!0)}`}else s=`${s}/wc?${r}`;return s}function w3e(t){let e="_self";E3e()?e="_top":(v3e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function b3e(t,e){let n="";try{if(Nb()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function xj(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function Ij(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function GU(){return typeof process<"u"&&JDe.IS_VITEST==="true"}function v3e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function E3e(){try{return window.self!==window.top}catch{return!1}}function C3e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function XZ(t){return Buffer.from(t,"base64").toString("utf-8")}function _3e(t){return new Promise(e=>setTimeout(e,t))}function e_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function A3e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function A1(t,...e){if(!A3e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function qU(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");e_(t.outputLen),e_(t.blockLen)}function $w(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function eX(t,e){A1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const GA=BigInt(2**32-1),Nj=BigInt(32);function S3e(t,e=!1){return e?{h:Number(t&GA),l:Number(t>>Nj&GA)}:{h:Number(t>>Nj&GA)|0,l:Number(t&GA)|0}}function x3e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=S3e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const I3e=(t,e,n)=>t<<n|e>>>32-n,N3e=(t,e,n)=>e<<n|t>>>32-n,T3e=(t,e,n)=>e<<n-32|t>>>64-n,R3e=(t,e,n)=>t<<n-32|e>>>64-n,Ym=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function P3e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function IO(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function il(t,e){return t<<32-e|t>>>e}const Tj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function O3e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Rj(t){for(let e=0;e<t.length;e++)t[e]=O3e(t[e])}function k3e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Bw(t){return typeof t=="string"&&(t=k3e(t)),A1(t),t}function D3e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];A1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let VU=class{clone(){return this._cloneInto()}};function tX(t){const e=r=>t().update(Bw(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Tb(t=32){if(Ym&&typeof Ym.getRandomValues=="function")return Ym.getRandomValues(new Uint8Array(t));if(Ym&&typeof Ym.randomBytes=="function")return Ym.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const nX=[],rX=[],sX=[],M3e=BigInt(0),yv=BigInt(1),L3e=BigInt(2),U3e=BigInt(7),$3e=BigInt(256),B3e=BigInt(113);for(let t=0,e=yv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],nX.push(2*(5*r+n)),rX.push((t+1)*(t+2)/2%64);let s=M3e;for(let i=0;i<7;i++)e=(e<<yv^(e>>U3e)*B3e)%$3e,e&L3e&&(s^=yv<<(yv<<BigInt(i))-yv);sX.push(s)}const[F3e,j3e]=x3e(sX,!0),Pj=(t,e,n)=>n>32?T3e(t,e,n):I3e(t,e,n),Oj=(t,e,n)=>n>32?R3e(t,e,n):N3e(t,e,n);function W3e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Pj(l,u,1)^n[a],h=Oj(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=rX[o],c=Pj(s,i,a),l=Oj(s,i,a),u=nX[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=F3e[r],t[1]^=j3e[r]}n.fill(0)}let z3e=class iX extends VU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,e_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=P3e(this.state)}keccak(){Tj||Rj(this.state32),W3e(this.state32,this.rounds),Tj||Rj(this.state32),this.posOut=0,this.pos=0}update(e){$w(this);const{blockLen:n,state:r}=this;e=Bw(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){$w(this,!1),A1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return e_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(eX(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new iX(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const H3e=(t,e,n)=>tX(()=>new z3e(e,t,n)),G3e=H3e(1,136,256/8),q3e="https://rpc.walletconnect.org/v1";function oX(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(G3e(n)).toString("hex")}async function V3e(t,e,n,r,s,i){switch(n.t){case"eip191":return await K3e(t,e,n.s);case"eip1271":return await Y3e(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function K3e(t,e,n){return(await QDe({hash:oX(e),signature:n})).toLowerCase()===t.toLowerCase()}async function Y3e(t,e,n,r,s,i){const o=i0(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=oX(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||q3e}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:Q3e(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Q3e(){return Date.now()+Math.floor(Math.random()*1e3)}function J3e(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return pZ.encode(i)}var Z3e=Object.defineProperty,X3e=Object.defineProperties,e5e=Object.getOwnPropertyDescriptors,kj=Object.getOwnPropertySymbols,t5e=Object.prototype.hasOwnProperty,n5e=Object.prototype.propertyIsEnumerable,Dj=(t,e,n)=>e in t?Z3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,r5e=(t,e)=>{for(var n in e||(e={}))t5e.call(e,n)&&Dj(t,n,e[n]);if(kj)for(var n of kj(e))n5e.call(e,n)&&Dj(t,n,e[n]);return t},s5e=(t,e)=>X3e(t,e5e(e));const i5e="did:pkh:",KU=t=>t==null?void 0:t.split(":"),o5e=t=>{const e=t&&KU(t);if(e)return t.includes(i5e)?e[3]:e[1]},D3=t=>{const e=t&&KU(t);if(e)return e[2]+":"+e[3]},OI=t=>{const e=t&&KU(t);if(e)return e.pop()};async function Mj(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=aX(s,s.iss),o=OI(s.iss);return await V3e(o,i,r,D3(s.iss),n)}const aX=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=OI(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${o5e(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=HS(t.resources);if(p){const g=t_(p);s=g5e(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function a5e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function c5e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Yg(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function l5e(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:u5e(e,n,r)}}}function u5e(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function cX(t){return Yg(t),`urn:recap:${a5e(t).replace(/=/g,"")}`}function t_(t){const e=c5e(t.replace("urn:recap:",""));return Yg(e),e}function d5e(t,e,n){const r=l5e(t,e,n);return cX(r)}function h5e(t){return t&&t.includes("urn:recap:")}function f5e(t,e){const n=t_(t),r=t_(e),s=p5e(n,r);return cX(s)}function p5e(t,e){Yg(t),Yg(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=s5e(r5e({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function g5e(t="",e){Yg(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function Lj(t){var e;const n=t_(t);Yg(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function Uj(t){const e=t_(t);Yg(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function HS(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return h5e(e)?e:void 0}function NO(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function lX(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Vo(t,...e){if(!lX(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function $j(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function m5e(t,e){Vo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Bj(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const lf=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),y5e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),w5e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!w5e)throw new Error("Non little-endian hardware is not supported");function b5e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function M3(t){if(typeof t=="string")t=b5e(t);else if(lX(t))t=L3(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function v5e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function E5e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const C5e=(t,e)=>{function n(r,...s){if(Vo(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Vo(l):Vo(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Vo(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Vo(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Vo(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Vo(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function Fj(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!_5e(e))throw new Error("invalid output, must be aligned");return e}function jj(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function _5e(t){return t.byteOffset%4===0}function L3(t){return Uint8Array.from(t)}function Fw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const uX=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),A5e=uX("expand 16-byte k"),S5e=uX("expand 32-byte k"),x5e=lf(A5e),I5e=lf(S5e);function pn(t,e){return t<<e|t>>>32-e}function U3(t){return t.byteOffset%4===0}const qA=64,N5e=16,dX=2**32-1,Wj=new Uint32Array;function T5e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(qA),u=lf(l),d=U3(s)&&U3(i),h=d?lf(s):Wj,f=d?lf(i):Wj;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=dX)throw new Error("arx: counter overflow");const g=Math.min(qA,c-p);if(d&&g===qA){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<N5e;y++)b=w+y,f[b]=h[b]^u[y];p+=qA;continue}for(let w=0,y;w<g;w++)y=p+w,i[y]=s[y]^l[w];p+=g}}function R5e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=v5e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return NO(s),NO(o),Bj(i),Bj(n),(a,c,l,u,d=0)=>{Vo(a),Vo(c),Vo(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Vo(u),NO(d),d<0||d>=dX)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=L3(a)),w=I5e;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=x5e,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);U3(c)||f.push(c=L3(c));const y=lf(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,lf(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const v=lf(c);return T5e(t,w,y,v,l,u,d,o),Fw(...f),u}}const Rs=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class P5e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=M3(e),Vo(e,32);const n=Rs(e,0),r=Rs(e,2),s=Rs(e,4),i=Rs(e,6),o=Rs(e,8),a=Rs(e,10),c=Rs(e,12),l=Rs(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Rs(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],y=Rs(e,n+0),b=Rs(e,n+2),v=Rs(e,n+4),A=Rs(e,n+6),_=Rs(e,n+8),I=Rs(e,n+10),x=Rs(e,n+12),N=Rs(e,n+14);let S=i[0]+(y&8191),O=i[1]+((y>>>13|b<<3)&8191),P=i[2]+((b>>>10|v<<6)&8191),F=i[3]+((v>>>7|A<<9)&8191),G=i[4]+((A>>>4|_<<12)&8191),B=i[5]+(_>>>1&8191),T=i[6]+((_>>>14|I<<2)&8191),R=i[7]+((I>>>11|x<<5)&8191),$=i[8]+((x>>>8|N<<8)&8191),k=i[9]+(N>>>5|s),M=0,W=M+S*a+O*(5*w)+P*(5*g)+F*(5*p)+G*(5*f);M=W>>>13,W&=8191,W+=B*(5*h)+T*(5*d)+R*(5*u)+$*(5*l)+k*(5*c),M+=W>>>13,W&=8191;let K=M+S*c+O*a+P*(5*w)+F*(5*g)+G*(5*p);M=K>>>13,K&=8191,K+=B*(5*f)+T*(5*h)+R*(5*d)+$*(5*u)+k*(5*l),M+=K>>>13,K&=8191;let ne=M+S*l+O*c+P*a+F*(5*w)+G*(5*g);M=ne>>>13,ne&=8191,ne+=B*(5*p)+T*(5*f)+R*(5*h)+$*(5*d)+k*(5*u),M+=ne>>>13,ne&=8191;let le=M+S*u+O*l+P*c+F*a+G*(5*w);M=le>>>13,le&=8191,le+=B*(5*g)+T*(5*p)+R*(5*f)+$*(5*h)+k*(5*d),M+=le>>>13,le&=8191;let oe=M+S*d+O*u+P*l+F*c+G*a;M=oe>>>13,oe&=8191,oe+=B*(5*w)+T*(5*g)+R*(5*p)+$*(5*f)+k*(5*h),M+=oe>>>13,oe&=8191;let ae=M+S*h+O*d+P*u+F*l+G*c;M=ae>>>13,ae&=8191,ae+=B*a+T*(5*w)+R*(5*g)+$*(5*p)+k*(5*f),M+=ae>>>13,ae&=8191;let ue=M+S*f+O*h+P*d+F*u+G*l;M=ue>>>13,ue&=8191,ue+=B*c+T*a+R*(5*w)+$*(5*g)+k*(5*p),M+=ue>>>13,ue&=8191;let et=M+S*p+O*f+P*h+F*d+G*u;M=et>>>13,et&=8191,et+=B*l+T*c+R*a+$*(5*w)+k*(5*g),M+=et>>>13,et&=8191;let Se=M+S*g+O*p+P*f+F*h+G*d;M=Se>>>13,Se&=8191,Se+=B*u+T*l+R*c+$*a+k*(5*w),M+=Se>>>13,Se&=8191;let Me=M+S*w+O*g+P*p+F*f+G*h;M=Me>>>13,Me&=8191,Me+=B*d+T*u+R*l+$*c+k*a,M+=Me>>>13,Me&=8191,M=(M<<2)+M|0,M=M+W|0,W=M&8191,M=M>>>13,K+=M,i[0]=W,i[1]=K,i[2]=ne,i[3]=le,i[4]=oe,i[5]=ae,i[6]=ue,i[7]=et,i[8]=Se,i[9]=Me}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Fw(r)}update(e){$j(this);const{buffer:n,blockLen:r}=this;e=M3(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Fw(this.h,this.r,this.buffer,this.pad)}digestInto(e){$j(this),m5e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function O5e(t){const e=(r,s)=>t(s).update(M3(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const k5e=O5e(t=>new P5e(t));function D5e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=s,v=n[0],A=n[1],_=n[2],I=o,x=a,N=c,S=l,O=u,P=d,F=h,G=f,B=p,T=g,R=w,$=y,k=b,M=v,W=A,K=_;for(let le=0;le<i;le+=2)I=I+O|0,k=pn(k^I,16),B=B+k|0,O=pn(O^B,12),I=I+O|0,k=pn(k^I,8),B=B+k|0,O=pn(O^B,7),x=x+P|0,M=pn(M^x,16),T=T+M|0,P=pn(P^T,12),x=x+P|0,M=pn(M^x,8),T=T+M|0,P=pn(P^T,7),N=N+F|0,W=pn(W^N,16),R=R+W|0,F=pn(F^R,12),N=N+F|0,W=pn(W^N,8),R=R+W|0,F=pn(F^R,7),S=S+G|0,K=pn(K^S,16),$=$+K|0,G=pn(G^$,12),S=S+G|0,K=pn(K^S,8),$=$+K|0,G=pn(G^$,7),I=I+P|0,K=pn(K^I,16),R=R+K|0,P=pn(P^R,12),I=I+P|0,K=pn(K^I,8),R=R+K|0,P=pn(P^R,7),x=x+F|0,k=pn(k^x,16),$=$+k|0,F=pn(F^$,12),x=x+F|0,k=pn(k^x,8),$=$+k|0,F=pn(F^$,7),N=N+G|0,M=pn(M^N,16),B=B+M|0,G=pn(G^B,12),N=N+G|0,M=pn(M^N,8),B=B+M|0,G=pn(G^B,7),S=S+O|0,W=pn(W^S,16),T=T+W|0,O=pn(O^T,12),S=S+O|0,W=pn(W^S,8),T=T+W|0,O=pn(O^T,7);let ne=0;r[ne++]=o+I|0,r[ne++]=a+x|0,r[ne++]=c+N|0,r[ne++]=l+S|0,r[ne++]=u+O|0,r[ne++]=d+P|0,r[ne++]=h+F|0,r[ne++]=f+G|0,r[ne++]=p+B|0,r[ne++]=g+T|0,r[ne++]=w+R|0,r[ne++]=y+$|0,r[ne++]=b+k|0,r[ne++]=v+M|0,r[ne++]=A+W|0,r[ne++]=_+K|0}const M5e=R5e(D5e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),L5e=new Uint8Array(16),zj=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(L5e.subarray(n))},U5e=new Uint8Array(32);function Hj(t,e,n,r,s){const i=t(e,n,U5e),o=k5e.create(i);s&&zj(o,s),zj(o,r);const a=new Uint8Array(16),c=y5e(a);jj(c,0,BigInt(s?s.length:0),!0),jj(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return Fw(i,a),l}const $5e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=Fj(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=Hj(t,e,n,a,r);return i.set(c,o),Fw(c),i},decrypt(s,i){i=Fj(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Hj(t,e,n,o,r);if(!E5e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Fw(c),i}}),hX=C5e({blockSize:64,nonceLength:12,tagLength:16},$5e(M5e));let fX=class extends VU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,qU(e);const r=Bw(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return $w(this),this.iHash.update(e),this}digestInto(e){$w(this),A1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const UT=(t,e,n)=>new fX(t,e).update(n).digest();UT.create=(t,e)=>new fX(t,e);function B5e(t,e,n){return qU(t),n===void 0&&(n=new Uint8Array(t.outputLen)),UT(t,Bw(n),Bw(e))}const TO=new Uint8Array([0]),Gj=new Uint8Array;function F5e(t,e,n,r=32){if(qU(t),e_(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=Gj);const i=new Uint8Array(s*t.outputLen),o=UT.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)TO[0]=l+1,a.update(l===0?Gj:c).update(n).update(TO).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),TO.fill(0),i.slice(0,r)}const j5e=(t,e,n,r,s)=>F5e(t,B5e(t,e,n),r,s);function W5e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function z5e(t,e,n){return t&e^~t&n}function H5e(t,e,n){return t&e^t&n^e&n}let G5e=class extends VU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=IO(this.buffer)}update(e){$w(this);const{view:n,buffer:r,blockLen:s}=this;e=Bw(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=IO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){$w(this),eX(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;W5e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=IO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const q5e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$d=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bd=new Uint32Array(64);class V5e extends G5e{constructor(){super(64,32,8,!1),this.A=$d[0]|0,this.B=$d[1]|0,this.C=$d[2]|0,this.D=$d[3]|0,this.E=$d[4]|0,this.F=$d[5]|0,this.G=$d[6]|0,this.H=$d[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Bd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Bd[d-15],f=Bd[d-2],p=il(h,7)^il(h,18)^h>>>3,g=il(f,17)^il(f,19)^f>>>10;Bd[d]=g+Bd[d-7]+p+Bd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=il(a,6)^il(a,11)^il(a,25),f=u+h+z5e(a,c,l)+q5e[d]+Bd[d]|0,p=(il(r,2)^il(r,13)^il(r,22))+H5e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Bd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const S1=tX(()=>new V5e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $T=BigInt(0),BT=BigInt(1),K5e=BigInt(2);function Qg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function x1(t){if(!Qg(t))throw new Error("Uint8Array expected")}function jw(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Y5e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ww(t){x1(t);let e="";for(let n=0;n<t.length;n++)e+=Y5e[t[n]];return e}function $y(t){const e=t.toString(16);return e.length&1?"0"+e:e}function YU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?$T:BigInt("0x"+t)}const yu={_0:48,_9:57,A:65,F:70,a:97,f:102};function qj(t){if(t>=yu._0&&t<=yu._9)return t-yu._0;if(t>=yu.A&&t<=yu.F)return t-(yu.A-10);if(t>=yu.a&&t<=yu.f)return t-(yu.a-10)}function zw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=qj(t.charCodeAt(i)),a=qj(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function bg(t){return YU(Ww(t))}function n_(t){return x1(t),YU(Ww(Uint8Array.from(t).reverse()))}function Hw(t,e){return zw(t.toString(16).padStart(e*2,"0"))}function FT(t,e){return Hw(t,e).reverse()}function Q5e(t){return zw($y(t))}function Go(t,e,n){let r;if(typeof e=="string")try{r=zw(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Qg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function r_(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];x1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function J5e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function Z5e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const RO=t=>typeof t=="bigint"&&$T<=t;function jT(t,e,n){return RO(t)&&RO(e)&&RO(n)&&e<=t&&t<n}function nd(t,e,n,r){if(!jT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function pX(t){let e;for(e=0;t>$T;t>>=BT,e+=1);return e}function X5e(t,e){return t>>BigInt(e)&BT}function eMe(t,e,n){return t|(n?BT:$T)<<BigInt(e)}const QU=t=>(K5e<<BigInt(t-1))-BT,PO=t=>new Uint8Array(t),Vj=t=>Uint8Array.from(t);function gX(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=PO(t),s=PO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=PO())=>{s=a(Vj([0]),u),r=a(),u.length!==0&&(s=a(Vj([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return r_(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const tMe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Qg(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Rb(t,e,n={}){const r=(s,i,o)=>{const a=tMe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const nMe=()=>{throw new Error("not implemented")};function $3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var rMe=Object.freeze({__proto__:null,isBytes:Qg,abytes:x1,abool:jw,bytesToHex:Ww,numberToHexUnpadded:$y,hexToNumber:YU,hexToBytes:zw,bytesToNumberBE:bg,bytesToNumberLE:n_,numberToBytesBE:Hw,numberToBytesLE:FT,numberToVarBytesBE:Q5e,ensureBytes:Go,concatBytes:r_,equalBytes:J5e,utf8ToBytes:Z5e,inRange:jT,aInRange:nd,bitLen:pX,bitGet:X5e,bitSet:eMe,bitMask:QU,createHmacDrbg:gX,validateObject:Rb,notImplemented:nMe,memoized:$3});const Ss=BigInt(0),Wr=BigInt(1),gp=BigInt(2),sMe=BigInt(3),B3=BigInt(4),Kj=BigInt(5),Yj=BigInt(8);function ho(t,e){const n=t%e;return n>=Ss?n:e+n}function mX(t,e,n){if(e<Ss)throw new Error("invalid exponent, negatives unsupported");if(n<=Ss)throw new Error("invalid modulus");if(n===Wr)return Ss;let r=Wr;for(;e>Ss;)e&Wr&&(r=r*t%n),t=t*t%n,e>>=Wr;return r}function hc(t,e,n){let r=t;for(;e-- >Ss;)r*=r,r%=n;return r}function F3(t,e){if(t===Ss)throw new Error("invert: expected non-zero number");if(e<=Ss)throw new Error("invert: expected positive modulus, got "+e);let n=ho(t,e),r=e,s=Ss,i=Wr;for(;n!==Ss;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Wr)throw new Error("invert: does not exist");return ho(s,e)}function iMe(t){const e=(t-Wr)/gp;let n,r,s;for(n=t-Wr,r=0;n%gp===Ss;n/=gp,r++);for(s=gp;s<t&&mX(s,e,t)!==t-Wr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Wr)/B3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Wr)/gp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Wr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function oMe(t){if(t%B3===sMe){const e=(t+Wr)/B3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%Yj===Kj){const e=(t-Kj)/Yj;return function(n,r){const s=n.mul(r,gp),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,gp),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return iMe(t)}const aMe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function cMe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=aMe.reduce((r,s)=>(r[s]="function",r),e);return Rb(t,n)}function lMe(t,e,n){if(n<Ss)throw new Error("invalid exponent, negatives unsupported");if(n===Ss)return t.ONE;if(n===Wr)return e;let r=t.ONE,s=e;for(;n>Ss;)n&Wr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Wr;return r}function uMe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function yX(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function wX(t,e,n=!1,r={}){if(t<=Ss)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=yX(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:QU(s),ZERO:Ss,ONE:Wr,create:c=>ho(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Ss<=c&&c<t},is0:c=>c===Ss,isOdd:c=>(c&Wr)===Wr,neg:c=>ho(-c,t),eql:(c,l)=>c===l,sqr:c=>ho(c*c,t),add:(c,l)=>ho(c+l,t),sub:(c,l)=>ho(c-l,t),mul:(c,l)=>ho(c*l,t),pow:(c,l)=>lMe(a,c,l),div:(c,l)=>ho(c*F3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>F3(c,t),sqrt:r.sqrt||(c=>(o||(o=oMe(t)),o(a,c))),invertBatch:c=>uMe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?FT(c,i):Hw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?n_(c):bg(c)}});return Object.freeze(a)}function bX(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function vX(t){const e=bX(t);return e+Math.ceil(e/2)}function dMe(t,e,n=!1){const r=t.length,s=bX(e),i=vX(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?n_(t):bg(t),a=ho(o,e-Wr)+Wr;return n?FT(a,s):Hw(a,s)}const Qj=BigInt(0),VA=BigInt(1);function OO(t,e){const n=e.negate();return t?n:e}function EX(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function kO(t,e){EX(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function hMe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function fMe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const DO=new WeakMap,CX=new WeakMap;function MO(t){return CX.get(t)||1}function pMe(t,e){return{constTimeNegate:OO,hasPrecomputes(n){return MO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Qj;)r&VA&&(s=s.add(i)),i=i.double(),r>>=VA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=kO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=kO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=VA);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(OO(y,r[g])):a=a.add(OO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=kO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===Qj)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=VA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=DO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&DO.set(r,s(i))),i},wNAFCached(n,r,s){const i=MO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=MO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){EX(r,e),CX.set(n,r),DO.delete(n)}}}function gMe(t,e,n,r){if(hMe(n,t),fMe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=pX(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function _X(t){return cMe(t.Fp),Rb(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...yX(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Qm=BigInt(0),LO=BigInt(1);function mMe(t){return Rb(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function yMe(t){const e=mMe(t),{P:n}=e,r=b=>ho(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>mX(b,n-BigInt(2),n));function l(b,v,A){const _=r(b*(v-A));return v=r(v-_),A=r(A+_),[v,A]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,v){nd("u",b,Qm,n),nd("scalar",v,Qm,n);const A=v,_=b;let I=LO,x=Qm,N=b,S=LO,O=Qm,P;for(let G=BigInt(s-1);G>=Qm;G--){const B=A>>G&LO;O^=B,P=l(O,I,N),I=P[0],N=P[1],P=l(O,x,S),x=P[0],S=P[1],O=B;const T=I+x,R=r(T*T),$=I-x,k=r($*$),M=R-k,W=N+S,K=N-S,ne=r(K*T),le=r(W*$),oe=ne+le,ae=ne-le;N=r(oe*oe),S=r(_*r(ae*ae)),I=r(R*k),x=r(M*(R+r(u*M)))}P=l(O,I,N),I=P[0],N=P[1],P=l(O,x,S),x=P[0],S=P[1];const F=c(x);return r(I*F)}function h(b){return FT(r(b),i)}function f(b){const v=Go("u coordinate",b,i);return o===32&&(v[31]&=127),n_(v)}function p(b){const v=Go("scalar",b),A=v.length;if(A!==i&&A!==o){let _=""+i+" or "+o;throw new Error("invalid scalar, expected "+_+" bytes, got "+A)}return n_(a(v))}function g(b,v){const A=f(v),_=p(b),I=d(A,_);if(I===Qm)throw new Error("invalid private or public key received");return h(I)}const w=h(e.Gu);function y(b){return g(b,w)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(b,v)=>g(b,v),getPublicKey:b=>y(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const j3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const wMe=BigInt(1),Jj=BigInt(2),bMe=BigInt(3),vMe=BigInt(5);BigInt(8);function EMe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=j3,o=t*t%i*t%i,a=hc(o,Jj,i)*o%i,c=hc(a,wMe,i)*t%i,l=hc(c,vMe,i)*c%i,u=hc(l,e,i)*l%i,d=hc(u,n,i)*u%i,h=hc(d,r,i)*d%i,f=hc(h,s,i)*h%i,p=hc(f,s,i)*h%i,g=hc(p,e,i)*l%i;return{pow_p_5_8:hc(g,Jj,i)*t%i,b2:o}}function CMe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const W3=yMe({P:j3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=j3,{pow_p_5_8:n,b2:r}=EMe(t);return ho(hc(n,bMe,e)*r,e)},adjustScalarBytes:CMe,randomBytes:Tb});function Zj(t){t.lowS!==void 0&&jw("lowS",t.lowS),t.prehash!==void 0&&jw("prehash",t.prehash)}function _Me(t){const e=_X(t);Rb(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:AMe,hexToBytes:SMe}=rMe;class xMe extends Error{constructor(e=""){super(e)}}const Nu={Err:xMe,_tlv:{encode:(t,e)=>{const{Err:n}=Nu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=$y(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?$y(s.length/2|128):"";return $y(t)+i+s+e},decode(t,e){const{Err:n}=Nu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Nu;if(t<Hu)throw new e("integer: negative integers are not allowed");let n=$y(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Nu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return AMe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Nu,s=typeof t=="string"?SMe(t):t;x1(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Nu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Hu=BigInt(0),ms=BigInt(1);BigInt(2);const Xj=BigInt(3);BigInt(4);function IMe(t){const e=_Me(t),{Fp:n}=e,r=wX(e.n,e.nBitLength),s=e.toBytes||((g,w,y)=>{const b=w.toAffine();return r_(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const w=g.subarray(1),y=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:y,y:b}});function o(g){const{a:w,b:y}=e,b=n.sqr(g),v=n.mul(b,g);return n.add(n.add(v,n.mul(g,w)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return jT(g,ms,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:b,n:v}=e;if(w&&typeof g!="bigint"){if(Qg(g)&&(g=Ww(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let A;try{A=typeof g=="bigint"?g:bg(Go("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return b&&(A=ho(A,v)),nd("private key",A,ms,v),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=$3((g,w)=>{const{px:y,py:b,pz:v}=g;if(n.eql(v,n.ONE))return{x:y,y:b};const A=g.is0();w==null&&(w=A?n.ONE:n.inv(v));const _=n.mul(y,w),I=n.mul(b,w),x=n.mul(v,w);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:_,y:I}}),d=$3(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=g.toAffine();if(!n.isValid(w)||!n.isValid(y))throw new Error("bad point: x or y not FE");const b=n.sqr(y),v=o(w);if(!n.eql(b,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,y,b){if(this.px=w,this.py=y,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:y,y:b}=w||{};if(!w||!n.isValid(y)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const v=A=>n.eql(A,n.ZERO);return v(y)&&v(b)?h.ZERO:new h(y,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(y[v])).map(h.fromAffine)}static fromHex(w){const y=h.fromAffine(i(Go("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,y){return gMe(h,r,w,y)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:y,py:b,pz:v}=this,{px:A,py:_,pz:I}=w,x=n.eql(n.mul(y,I),n.mul(A,v)),N=n.eql(n.mul(b,I),n.mul(_,v));return x&&N}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,b=n.mul(y,Xj),{px:v,py:A,pz:_}=this;let I=n.ZERO,x=n.ZERO,N=n.ZERO,S=n.mul(v,v),O=n.mul(A,A),P=n.mul(_,_),F=n.mul(v,A);return F=n.add(F,F),N=n.mul(v,_),N=n.add(N,N),I=n.mul(w,N),x=n.mul(b,P),x=n.add(I,x),I=n.sub(O,x),x=n.add(O,x),x=n.mul(I,x),I=n.mul(F,I),N=n.mul(b,N),P=n.mul(w,P),F=n.sub(S,P),F=n.mul(w,F),F=n.add(F,N),N=n.add(S,S),S=n.add(N,S),S=n.add(S,P),S=n.mul(S,F),x=n.add(x,S),P=n.mul(A,_),P=n.add(P,P),S=n.mul(P,F),I=n.sub(I,S),N=n.mul(P,O),N=n.add(N,N),N=n.add(N,N),new h(I,x,N)}add(w){l(w);const{px:y,py:b,pz:v}=this,{px:A,py:_,pz:I}=w;let x=n.ZERO,N=n.ZERO,S=n.ZERO;const O=e.a,P=n.mul(e.b,Xj);let F=n.mul(y,A),G=n.mul(b,_),B=n.mul(v,I),T=n.add(y,b),R=n.add(A,_);T=n.mul(T,R),R=n.add(F,G),T=n.sub(T,R),R=n.add(y,v);let $=n.add(A,I);return R=n.mul(R,$),$=n.add(F,B),R=n.sub(R,$),$=n.add(b,v),x=n.add(_,I),$=n.mul($,x),x=n.add(G,B),$=n.sub($,x),S=n.mul(O,R),x=n.mul(P,B),S=n.add(x,S),x=n.sub(G,S),S=n.add(G,S),N=n.mul(x,S),G=n.add(F,F),G=n.add(G,F),B=n.mul(O,B),R=n.mul(P,R),G=n.add(G,B),B=n.sub(F,B),B=n.mul(O,B),R=n.add(R,B),F=n.mul(G,R),N=n.add(N,F),F=n.mul($,R),x=n.mul(T,x),x=n.sub(x,F),F=n.mul(T,G),S=n.mul($,S),S=n.add(S,F),new h(x,N,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:y,n:b}=e;nd("scalar",w,Hu,b);const v=h.ZERO;if(w===Hu)return v;if(this.is0()||w===ms)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:A,k1:_,k2neg:I,k2:x}=y.splitScalar(w),N=v,S=v,O=this;for(;_>Hu||x>Hu;)_&ms&&(N=N.add(O)),x&ms&&(S=S.add(O)),O=O.double(),_>>=ms,x>>=ms;return A&&(N=N.negate()),I&&(S=S.negate()),S=new h(n.mul(S.px,y.beta),S.py,S.pz),N.add(S)}multiply(w){const{endo:y,n:b}=e;nd("scalar",w,ms,b);let v,A;if(y){const{k1neg:_,k1:I,k2neg:x,k2:N}=y.splitScalar(w);let{p:S,f:O}=this.wNAF(I),{p:P,f:F}=this.wNAF(N);S=p.constTimeNegate(_,S),P=p.constTimeNegate(x,P),P=new h(n.mul(P.px,y.beta),P.py,P.pz),v=S.add(P),A=O.add(F)}else{const{p:_,f:I}=this.wNAF(w);v=_,A=I}return h.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(w,y,b){const v=h.BASE,A=(I,x)=>x===Hu||x===ms||!I.equals(v)?I.multiplyUnsafe(x):I.multiply(x),_=A(this,y).add(A(w,b));return _.is0()?void 0:_}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===ms)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===ms?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return jw("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return jw("isCompressed",w),Ww(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=pMe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function NMe(t){const e=_X(t);return Rb(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function TMe(t){const e=NMe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(B){return ho(B,r)}function a(B){return F3(B,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=IMe({...e,toBytes(B,T,R){const $=T.toAffine(),k=n.toBytes($.x),M=r_;return jw("isCompressed",R),R?M(Uint8Array.from([T.hasEvenY()?2:3]),k):M(Uint8Array.from([4]),k,n.toBytes($.y))},fromBytes(B){const T=B.length,R=B[0],$=B.subarray(1);if(T===s&&(R===2||R===3)){const k=bg($);if(!jT(k,ms,n.ORDER))throw new Error("Point is not on curve");const M=u(k);let W;try{W=n.sqrt(M)}catch(ne){const le=ne instanceof Error?": "+ne.message:"";throw new Error("Point is not on curve"+le)}const K=(W&ms)===ms;return(R&1)===1!==K&&(W=n.neg(W)),{x:k,y:W}}else if(T===i&&R===4){const k=n.fromBytes($.subarray(0,n.BYTES)),M=n.fromBytes($.subarray(n.BYTES,2*n.BYTES));return{x:k,y:M}}else{const k=s,M=i;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+M+", got "+T)}}}),h=B=>Ww(Hw(B,e.nByteLength));function f(B){const T=r>>ms;return B>T}function p(B){return f(B)?o(-B):B}const g=(B,T,R)=>bg(B.slice(T,R));class w{constructor(T,R,$){this.r=T,this.s=R,this.recovery=$,this.assertValidity()}static fromCompact(T){const R=e.nByteLength;return T=Go("compactSignature",T,R*2),new w(g(T,0,R),g(T,R,2*R))}static fromDER(T){const{r:R,s:$}=Nu.toSig(Go("DER",T));return new w(R,$)}assertValidity(){nd("r",this.r,ms,r),nd("s",this.s,ms,r)}addRecoveryBit(T){return new w(this.r,this.s,T)}recoverPublicKey(T){const{r:R,s:$,recovery:k}=this,M=I(Go("msgHash",T));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const W=k===2||k===3?R+e.n:R;if(W>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const K=k&1?"03":"02",ne=c.fromHex(K+h(W)),le=a(W),oe=o(-M*le),ae=o($*le),ue=c.BASE.multiplyAndAddUnsafe(ne,oe,ae);if(!ue)throw new Error("point at infinify");return ue.assertValidity(),ue}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return zw(this.toDERHex())}toDERHex(){return Nu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return zw(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(B){try{return l(B),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const B=vX(e.n);return dMe(e.randomBytes(B),e.n)},precompute(B=8,T=c.BASE){return T._setWindowSize(B),T.multiply(BigInt(3)),T}};function b(B,T=!0){return c.fromPrivateKey(B).toRawBytes(T)}function v(B){const T=Qg(B),R=typeof B=="string",$=(T||R)&&B.length;return T?$===s||$===i:R?$===2*s||$===2*i:B instanceof c}function A(B,T,R=!0){if(v(B))throw new Error("first arg must be private key");if(!v(T))throw new Error("second arg must be public key");return c.fromHex(T).multiply(l(B)).toRawBytes(R)}const _=e.bits2int||function(B){if(B.length>8192)throw new Error("input is too large");const T=bg(B),R=B.length*8-e.nBitLength;return R>0?T>>BigInt(R):T},I=e.bits2int_modN||function(B){return o(_(B))},x=QU(e.nBitLength);function N(B){return nd("num < 2^"+e.nBitLength,B,Hu,x),Hw(B,e.nByteLength)}function S(B,T,R=O){if(["recovered","canonical"].some(Se=>Se in R))throw new Error("sign() legacy options not supported");const{hash:$,randomBytes:k}=e;let{lowS:M,prehash:W,extraEntropy:K}=R;M==null&&(M=!0),B=Go("msgHash",B),Zj(R),W&&(B=Go("prehashed msgHash",$(B)));const ne=I(B),le=l(T),oe=[N(le),N(ne)];if(K!=null&&K!==!1){const Se=K===!0?k(n.BYTES):K;oe.push(Go("extraEntropy",Se))}const ae=r_(...oe),ue=ne;function et(Se){const Me=_(Se);if(!d(Me))return;const rt=a(Me),Tt=c.BASE.multiply(Me).toAffine(),Jt=o(Tt.x);if(Jt===Hu)return;const X=o(rt*o(ue+Jt*le));if(X===Hu)return;let ce=(Tt.x===Jt?0:2)|Number(Tt.y&ms),Ee=X;return M&&f(X)&&(Ee=p(X),ce^=1),new w(Jt,Ee,ce)}return{seed:ae,k2sig:et}}const O={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function F(B,T,R=O){const{seed:$,k2sig:k}=S(B,T,R),M=e;return gX(M.hash.outputLen,M.nByteLength,M.hmac)($,k)}c.BASE._setWindowSize(8);function G(B,T,R,$=P){var X;const k=B;T=Go("msgHash",T),R=Go("publicKey",R);const{lowS:M,prehash:W,format:K}=$;if(Zj($),"strict"in $)throw new Error("options.strict was renamed to lowS");if(K!==void 0&&K!=="compact"&&K!=="der")throw new Error("format must be compact or der");const ne=typeof k=="string"||Qg(k),le=!ne&&!K&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!ne&&!le)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let oe,ae;try{if(le&&(oe=new w(k.r,k.s)),ne){try{K!=="compact"&&(oe=w.fromDER(k))}catch(ce){if(!(ce instanceof Nu.Err))throw ce}!oe&&K!=="der"&&(oe=w.fromCompact(k))}ae=c.fromHex(R)}catch{return!1}if(!oe||M&&oe.hasHighS())return!1;W&&(T=e.hash(T));const{r:ue,s:et}=oe,Se=I(T),Me=a(et),rt=o(Se*Me),Tt=o(ue*Me),Jt=(X=c.BASE.multiplyAndAddUnsafe(ae,rt,Tt))==null?void 0:X.toAffine();return Jt?o(Jt.x)===ue:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:A,sign:F,verify:G,ProjectivePoint:c,Signature:w,utils:y}}function RMe(t){return{hash:t,hmac:(e,...n)=>UT(t,e,D3e(...n)),randomBytes:Tb}}function PMe(t,e){const n=r=>TMe({...t,...RMe(r)});return{...n(e),create:n}}const AX=wX(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),OMe=AX.create(BigInt("-3")),kMe=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),DMe=PMe({a:OMe,b:kMe,Fp:AX,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},S1),SX="base10",Bi="base16",Lc="base64pad",oh="base64url",I1="utf8",xX=0,rd=1,N1=2,MMe=0,e9=1,NE=12,JU=32;function LMe(){const t=W3.utils.randomPrivateKey(),e=W3.getPublicKey(t);return{privateKey:Ao(t,Bi),publicKey:Ao(e,Bi)}}function z3(){const t=Tb(JU);return Ao(t,Bi)}function UMe(t,e){const n=W3.getSharedSecret(ja(t,Bi),ja(e,Bi)),r=j5e(S1,n,void 0,void 0,JU);return Ao(r,Bi)}function GS(t){const e=S1(ja(t,Bi));return Ao(e,Bi)}function Rl(t){const e=S1(ja(t,I1));return Ao(e,Bi)}function IX(t){return ja(`${t}`,SX)}function Jg(t){return Number(Ao(t,SX))}function NX(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function TX(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function $Me(t){const e=IX(typeof t.type<"u"?t.type:xX);if(Jg(e)===rd&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?ja(t.senderPublicKey,Bi):void 0,r=typeof t.iv<"u"?ja(t.iv,Bi):Tb(NE),s=ja(t.symKey,Bi),i=hX(s,r).encrypt(ja(t.message,I1)),o=RX({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===oh?NX(o):o}function BMe(t){const e=ja(t.symKey,Bi),{sealed:n,iv:r}=s_({encoded:t.encoded,encoding:t.encoding}),s=hX(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return Ao(s,I1)}function FMe(t,e){const n=IX(N1),r=Tb(NE),s=ja(t,I1),i=RX({type:n,sealed:s,iv:r});return e===oh?NX(i):i}function jMe(t,e){const{sealed:n}=s_({encoded:t,encoding:e});return Ao(n,I1)}function RX(t){if(Jg(t.type)===N1)return Ao(SE([t.type,t.sealed]),Lc);if(Jg(t.type)===rd){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Ao(SE([t.type,t.senderPublicKey,t.iv,t.sealed]),Lc)}return Ao(SE([t.type,t.iv,t.sealed]),Lc)}function s_(t){const e=(t.encoding||Lc)===oh?TX(t.encoded):t.encoded,n=ja(e,Lc),r=n.slice(MMe,e9),s=e9;if(Jg(r)===rd){const c=s+JU,l=c+NE,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Jg(r)===N1){const c=n.slice(s),l=Tb(NE);return{type:r,sealed:c,iv:l}}const i=s+NE,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function WMe(t,e){const n=s_({encoded:t,encoding:e==null?void 0:e.encoding});return PX({type:Jg(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?Ao(n.senderPublicKey,Bi):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function PX(t){const e=(t==null?void 0:t.type)||xX;if(e===rd){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function t9(t){return t.type===rd&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function n9(t){return t.type===N1}function zMe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return SE([new Uint8Array([4]),e,n])}function HMe(t,e){const[n,r,s]=t.split("."),i=Buffer.from(TX(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=S1(c),u=zMe(e);if(!DMe.verify(SE([o,a]),l,u))throw new Error("Invalid signature");return v3(t).payload}const GMe="irn";function kI(t){return(t==null?void 0:t.relay)||{protocol:GMe}}function Wv(t){const e=QRe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function qMe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function r9(t){if(!t.includes("wc:")){const l=XZ(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:VMe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:qMe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function VMe(t){return t.startsWith("//")?t.substring(2):t}function KMe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function s9(t){const e=new URLSearchParams,n=KMe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function KA(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var YMe=Object.defineProperty,QMe=Object.defineProperties,JMe=Object.getOwnPropertyDescriptors,i9=Object.getOwnPropertySymbols,ZMe=Object.prototype.hasOwnProperty,XMe=Object.prototype.propertyIsEnumerable,o9=(t,e,n)=>e in t?YMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,eLe=(t,e)=>{for(var n in e||(e={}))ZMe.call(e,n)&&o9(t,n,e[n]);if(i9)for(var n of i9(e))XMe.call(e,n)&&o9(t,n,e[n]);return t},tLe=(t,e)=>QMe(t,JMe(e));function Pb(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function nLe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Pb(n.accounts))}),e}function rLe(t,e){const n=[];return Object.values(t).forEach(r=>{Pb(r.accounts).includes(e)&&n.push(...r.methods)}),n}function sLe(t,e){const n=[];return Object.values(t).forEach(r=>{Pb(r.accounts).includes(e)&&n.push(...r.events)}),n}function WT(t){return t.includes(":")}function By(t){return WT(t)?t.split(":")[0]:t}function a9(t){var e,n,r;const s={};if(!df(t))return s;for(const[i,o]of Object.entries(t)){const a=WT(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=By(i);s[u]=tLe(eLe({},s[u]),{chains:Vl(a,(e=s[u])==null?void 0:e.chains),methods:Vl(c,(n=s[u])==null?void 0:n.methods),events:Vl(l,(r=s[u])==null?void 0:r.events)})}return s}function iLe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function c9(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=iLe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Vl(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function oLe(t,e){var n,r,s,i,o,a;const c=a9(t),l=a9(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Vl((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Vl((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Vl((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const aLe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},cLe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Te(t,e){const{message:n,code:r}=cLe[t];return{message:e?`${n} ${e}`:n,code:r}}function $n(t,e){const{message:n,code:r}=aLe[t];return{message:e?`${n} ${e}`:n,code:r}}function uf(t,e){return!!Array.isArray(t)}function df(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Bs(t){return typeof t>"u"}function Vr(t,e){return e&&Bs(t)?!0:typeof t=="string"&&!!t.trim().length}function ZU(t,e){return e&&Bs(t)?!0:typeof t=="number"&&!isNaN(t)}function lLe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Dp(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Pb(a),d=n[o];(!Dp(KZ(o,d),u)||!Dp(d.methods,c)||!Dp(d.events,l))&&(i=!1)}),i):!1}function DI(t){return Vr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function uLe(t){if(Vr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&DI(n)}}return!1}function dLe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Vr(t,!1)){if(e(t))return!0;const n=XZ(t);return e(n)}}catch{}return!1}function hLe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function fLe(t){return t==null?void 0:t.topic}function pLe(t,e){let n=null;return Vr(t==null?void 0:t.publicKey,!1)||(n=Te("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function l9(t){let e=!0;return uf(t)?t.length&&(e=t.every(n=>Vr(n,!1))):e=!1,e}function gLe(t,e,n){let r=null;return uf(e)&&e.length?e.forEach(s=>{r||DI(s)||(r=$n("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):DI(t)||(r=$n("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function mLe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=gLe(s,KZ(s,i),`${e} ${n}`);o&&(r=o)}),r}function yLe(t,e){let n=null;return uf(t)?t.forEach(r=>{n||uLe(r)||(n=$n("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=$n("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function wLe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=yLe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function bLe(t,e){let n=null;return l9(t==null?void 0:t.methods)?l9(t==null?void 0:t.events)||(n=$n("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=$n("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function OX(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=bLe(r,`${e}, namespace`);s&&(n=s)}),n}function vLe(t,e,n){let r=null;if(t&&df(t)){const s=OX(t,e);s&&(r=s);const i=mLe(t,e,n);i&&(r=i)}else r=Te("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function UO(t,e){let n=null;if(t&&df(t)){const r=OX(t,e);r&&(n=r);const s=wLe(t,e);s&&(n=s)}else n=Te("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function kX(t){return Vr(t.protocol,!0)}function ELe(t,e){let n=!1;return t?t&&uf(t)&&t.length&&t.forEach(r=>{n=kX(r)}):n=!0,n}function CLe(t){return typeof t=="number"}function ro(t){return typeof t<"u"&&typeof t!==null}function _Le(t){return!(!t||typeof t!="object"||!t.code||!ZU(t.code,!1)||!t.message||!Vr(t.message,!1))}function ALe(t){return!(Bs(t)||!Vr(t.method,!1))}function SLe(t){return!(Bs(t)||Bs(t.result)&&Bs(t.error)||!ZU(t.id,!1)||!Vr(t.jsonrpc,!1))}function xLe(t){return!(Bs(t)||!Vr(t.name,!1))}function u9(t,e){return!(!DI(e)||!nLe(t).includes(e))}function ILe(t,e,n){return Vr(n,!1)?rLe(t,e).includes(n):!1}function NLe(t,e,n){return Vr(n,!1)?sLe(t,e).includes(n):!1}function d9(t,e,n){let r=null;const s=TLe(t),i=RLe(e),o=Object.keys(s),a=Object.keys(i),c=h9(Object.keys(t)),l=h9(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Dp(o,a)||(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Pb(e[d].accounts);h.includes(d)||(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Dp(s[d].methods,i[d].methods)?Dp(s[d].events,i[d].events)||(r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Te("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function TLe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function h9(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function RLe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Pb(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function PLe(t,e){return ZU(t,!1)&&t<=e.max&&t>=e.min}function f9(){const t=_1();return new Promise(e=>{switch(t){case Jo.browser:e(OLe());break;case Jo.reactNative:e(kLe());break;case Jo.node:e(DLe());break;default:e(!0)}})}function OLe(){return Nb()&&(navigator==null?void 0:navigator.onLine)}async function kLe(){if($f()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function DLe(){return!0}function MLe(t){switch(_1()){case Jo.browser:LLe(t);break;case Jo.reactNative:ULe(t);break}}function LLe(t){!$f()&&Nb()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function ULe(t){$f()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function $Le(){var t;return Nb()&&Hg()?((t=Hg())==null?void 0:t.visibilityState)==="visible":!0}const $O={};class wv{static get(e){return $O[e]}static set(e,n){$O[e]=n}static delete(e){delete $O[e]}}var BLe={};const DX="wc",MX=2,H3="core",tu=`${DX}@2:${H3}:`,FLe={logger:"error"},jLe={database:":memory:"},WLe="crypto",p9="client_ed25519_seed",zLe=Ne.ONE_DAY,HLe="keychain",GLe="0.3",qLe="messages",VLe="0.3",g9=Ne.SIX_HOURS,KLe="publisher",LX="irn",YLe="error",UX="wss://relay.walletconnect.org",QLe="relayer",Es={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},JLe="_subscription",ya={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},ZLe=.1,G3="2.21.0",cr={link_mode:"link_mode",relay:"relay"},qS={inbound:"inbound",outbound:"outbound"},XLe="0.3",eUe="WALLETCONNECT_CLIENT_ID",m9="WALLETCONNECT_LINK_MODE_APPS",$o={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},tUe="subscription",nUe="0.3",rUe="pairing",sUe="0.3",bv={wc_pairingDelete:{req:{ttl:Ne.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ne.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ne.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ne.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ne.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ne.ONE_DAY,prompt:!1,tag:0}}},mp={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ac={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},iUe="history",oUe="0.3",aUe="expirer",_a={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},cUe="0.3",lUe="verify-api",uUe="https://verify.walletconnect.com",$X="https://verify.walletconnect.org",TE=$X,dUe=`${TE}/v3`,hUe=[uUe,$X],fUe="echo",pUe="https://echo.walletconnect.com",ul={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Cu={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},cc={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Jf={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Zf={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},vv={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},gUe=.1,mUe="event-client",yUe=86400,wUe="https://pulse.walletconnect.org/batch";function bUe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var _=p[y],I=0,x=v-1;(_!==0||I<w)&&x!==-1;x--,I++)_+=256*A[x]>>>0,A[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var _=0,I=b-1;(A!==0||_<y)&&I!==-1;I--,_++)A+=a*v[I]>>>0,v[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=_,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var vUe=bUe,EUe=vUe;const BX=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},CUe=t=>new TextEncoder().encode(t),_Ue=t=>new TextDecoder().decode(t);class AUe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class SUe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return FX(this,e)}}class xUe{constructor(e){this.decoders=e}or(e){return FX(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const FX=(t,e)=>new xUe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class IUe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new AUe(e,n,r),this.decoder=new SUe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const zT=({name:t,prefix:e,encode:n,decode:r})=>new IUe(t,e,n,r),T1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=EUe(n,e);return zT({prefix:t,name:e,encode:r,decode:i=>BX(s(i))})},NUe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},TUe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Xs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>zT({prefix:e,name:t,encode(s){return TUe(s,r,n)},decode(s){return NUe(s,r,n,t)}}),RUe=zT({prefix:"\0",name:"identity",encode:t=>_Ue(t),decode:t=>CUe(t)});var PUe=Object.freeze({__proto__:null,identity:RUe});const OUe=Xs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var kUe=Object.freeze({__proto__:null,base2:OUe});const DUe=Xs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var MUe=Object.freeze({__proto__:null,base8:DUe});const LUe=T1({prefix:"9",name:"base10",alphabet:"0123456789"});var UUe=Object.freeze({__proto__:null,base10:LUe});const $Ue=Xs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),BUe=Xs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var FUe=Object.freeze({__proto__:null,base16:$Ue,base16upper:BUe});const jUe=Xs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),WUe=Xs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zUe=Xs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),HUe=Xs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),GUe=Xs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),qUe=Xs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),VUe=Xs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),KUe=Xs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),YUe=Xs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var QUe=Object.freeze({__proto__:null,base32:jUe,base32upper:WUe,base32pad:zUe,base32padupper:HUe,base32hex:GUe,base32hexupper:qUe,base32hexpad:VUe,base32hexpadupper:KUe,base32z:YUe});const JUe=T1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ZUe=T1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var XUe=Object.freeze({__proto__:null,base36:JUe,base36upper:ZUe});const e$e=T1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),t$e=T1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var n$e=Object.freeze({__proto__:null,base58btc:e$e,base58flickr:t$e});const r$e=Xs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),s$e=Xs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),i$e=Xs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),o$e=Xs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var a$e=Object.freeze({__proto__:null,base64:r$e,base64pad:s$e,base64url:i$e,base64urlpad:o$e});const jX=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),c$e=jX.reduce((t,e,n)=>(t[n]=e,t),[]),l$e=jX.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function u$e(t){return t.reduce((e,n)=>(e+=c$e[n],e),"")}function d$e(t){const e=[];for(const n of t){const r=l$e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const h$e=zT({prefix:"🚀",name:"base256emoji",encode:u$e,decode:d$e});var f$e=Object.freeze({__proto__:null,base256emoji:h$e}),p$e=WX,y9=128,g$e=-128,m$e=Math.pow(2,31);function WX(t,e,n){e=e||[],n=n||0;for(var r=n;t>=m$e;)e[n++]=t&255|y9,t/=128;for(;t&g$e;)e[n++]=t&255|y9,t>>>=7;return e[n]=t|0,WX.bytes=n-r+1,e}var y$e=q3,w$e=128,w9=127;function q3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw q3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&w9)<<s:(o&w9)*Math.pow(2,s),s+=7}while(o>=w$e);return q3.bytes=i-r,n}var b$e=Math.pow(2,7),v$e=Math.pow(2,14),E$e=Math.pow(2,21),C$e=Math.pow(2,28),_$e=Math.pow(2,35),A$e=Math.pow(2,42),S$e=Math.pow(2,49),x$e=Math.pow(2,56),I$e=Math.pow(2,63),N$e=function(t){return t<b$e?1:t<v$e?2:t<E$e?3:t<C$e?4:t<_$e?5:t<A$e?6:t<S$e?7:t<x$e?8:t<I$e?9:10},T$e={encode:p$e,decode:y$e,encodingLength:N$e},zX=T$e;const b9=(t,e,n=0)=>(zX.encode(t,e,n),e),v9=t=>zX.encodingLength(t),V3=(t,e)=>{const n=e.byteLength,r=v9(t),s=r+v9(n),i=new Uint8Array(s+n);return b9(t,i,0),b9(n,i,r),i.set(e,s),new R$e(t,n,e,i)};class R$e{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const HX=({name:t,code:e,encode:n})=>new P$e(t,e,n);class P$e{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?V3(this.code,n):n.then(r=>V3(this.code,r))}else throw Error("Unknown type, must be binary type")}}const GX=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),O$e=HX({name:"sha2-256",code:18,encode:GX("SHA-256")}),k$e=HX({name:"sha2-512",code:19,encode:GX("SHA-512")});var D$e=Object.freeze({__proto__:null,sha256:O$e,sha512:k$e});const qX=0,M$e="identity",VX=BX,L$e=t=>V3(qX,VX(t)),U$e={code:qX,name:M$e,encode:VX,digest:L$e};var $$e=Object.freeze({__proto__:null,identity:U$e});new TextEncoder,new TextDecoder;const E9={...PUe,...kUe,...MUe,...UUe,...FUe,...QUe,...XUe,...n$e,...a$e,...f$e};({...D$e,...$$e});function B$e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function KX(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const C9=KX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),BO=KX("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=B$e(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),F$e={utf8:C9,"utf-8":C9,hex:E9.base16,latin1:BO,ascii:BO,binary:BO,...E9};function j$e(t,e="utf8"){const n=F$e[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var W$e=Object.defineProperty,z$e=(t,e,n)=>e in t?W$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ol=(t,e,n)=>z$e(t,typeof e!="symbol"?e+"":e,n);class H$e{constructor(e,n){this.core=e,this.logger=n,ol(this,"keychain",new Map),ol(this,"name",HLe),ol(this,"version",GLe),ol(this,"initialized",!1),ol(this,"storagePrefix",tu),ol(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),ol(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),ol(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),ol(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Te("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),ol(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Qs(n,this.name)}get context(){return To(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,O3(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?k3(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var G$e=Object.defineProperty,q$e=(t,e,n)=>e in t?G$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ps=(t,e,n)=>q$e(t,typeof e!="symbol"?e+"":e,n);class V$e{constructor(e,n,r){this.core=e,this.logger=n,Ps(this,"name",WLe),Ps(this,"keychain"),Ps(this,"randomSessionIdentifier",z3()),Ps(this,"initialized",!1),Ps(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Ps(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Ps(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=MF(s);return dZ(i.publicKey)}),Ps(this,"generateKeyPair",()=>{this.isInitialized();const s=LMe();return this.setPrivateKey(s.publicKey,s.privateKey)}),Ps(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=MF(i),a=this.randomSessionIdentifier;return await xTe(a,s,zLe,o)}),Ps(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=UMe(a,i);return this.setSymKey(c,o)}),Ps(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||GS(s);return await this.keychain.set(o,s),o}),Ps(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ps(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ps(this,"encode",async(s,i,o)=>{this.isInitialized();const a=PX(o),c=md(i);if(n9(a))return FMe(c,o==null?void 0:o.encoding);if(t9(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return $Me({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Ps(this,"decode",async(s,i,o)=>{this.isInitialized();const a=WMe(i,o);if(n9(a)){const c=jMe(i,o==null?void 0:o.encoding);return zg(c)}if(t9(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=BMe({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return zg(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Ps(this,"getPayloadType",(s,i=Lc)=>{const o=s_({encoded:s,encoding:i});return Jg(o.type)}),Ps(this,"getPayloadSenderPublicKey",(s,i=Lc)=>{const o=s_({encoded:s,encoding:i});return o.senderPublicKey?Ao(o.senderPublicKey,Bi):void 0}),this.core=e,this.logger=Qs(n,this.name),this.keychain=r||new H$e(this.core,this.logger)}get context(){return To(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(p9)}catch{e=z3(),await this.keychain.set(p9,e)}return j$e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var K$e=Object.defineProperty,Y$e=Object.defineProperties,Q$e=Object.getOwnPropertyDescriptors,_9=Object.getOwnPropertySymbols,J$e=Object.prototype.hasOwnProperty,Z$e=Object.prototype.propertyIsEnumerable,K3=(t,e,n)=>e in t?K$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,X$e=(t,e)=>{for(var n in e||(e={}))J$e.call(e,n)&&K3(t,n,e[n]);if(_9)for(var n of _9(e))Z$e.call(e,n)&&K3(t,n,e[n]);return t},eBe=(t,e)=>Y$e(t,Q$e(e)),Po=(t,e,n)=>K3(t,typeof e!="symbol"?e+"":e,n);class tBe extends Qke{constructor(e,n){super(e,n),this.logger=e,this.core=n,Po(this,"messages",new Map),Po(this,"messagesWithoutClientAck",new Map),Po(this,"name",qLe),Po(this,"version",VLe),Po(this,"initialized",!1),Po(this,"storagePrefix",tu),Po(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Po(this,"set",async(r,s,i)=>{this.isInitialized();const o=Rl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===qS.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,eBe(X$e({},c),{[o]:s}))}return await this.persist(),o}),Po(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Po(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Po(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Rl(s);return typeof i[o]<"u"}),Po(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Rl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Po(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Qs(e,this.name),this.core=n}get context(){return To(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,O3(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,O3(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?k3(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?k3(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var nBe=Object.defineProperty,rBe=Object.defineProperties,sBe=Object.getOwnPropertyDescriptors,A9=Object.getOwnPropertySymbols,iBe=Object.prototype.hasOwnProperty,oBe=Object.prototype.propertyIsEnumerable,Y3=(t,e,n)=>e in t?nBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,YA=(t,e)=>{for(var n in e||(e={}))iBe.call(e,n)&&Y3(t,n,e[n]);if(A9)for(var n of A9(e))oBe.call(e,n)&&Y3(t,n,e[n]);return t},FO=(t,e)=>rBe(t,sBe(e)),lc=(t,e,n)=>Y3(t,typeof e!="symbol"?e+"":e,n);class aBe extends Jke{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,lc(this,"events",new ec.EventEmitter),lc(this,"name",KLe),lc(this,"queue",new Map),lc(this,"publishTimeout",Ne.toMiliseconds(Ne.ONE_MINUTE)),lc(this,"initialPublishTimeout",Ne.toMiliseconds(Ne.ONE_SECOND*15)),lc(this,"needsTransportRestart",!1),lc(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||g9,c=kI(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||kp().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(Es.publish,w),g(h))};this.relayer.events.on(Es.publish,w);const y=Fh(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),v(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(Es.publish,w)}catch(b){this.queue.set(d,FO(YA({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Fh(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),lc(this,"on",(r,s)=>{this.events.on(r,s)}),lc(this,"once",(r,s)=>{this.events.once(r,s)}),lc(this,"off",(r,s)=>{this.events.off(r,s)}),lc(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Qs(n,this.name),this.registerEventListeners()}get context(){return To(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=g9,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Wv(kI().protocol).publish,params:YA({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Bs((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Bs((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(Es.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,FO(YA({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(FO(YA({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(vm.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Es.connection_stalled);return}this.checkQueue()}),this.relayer.on(Es.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var cBe=Object.defineProperty,lBe=(t,e,n)=>e in t?cBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jm=(t,e,n)=>lBe(t,typeof e!="symbol"?e+"":e,n);class uBe{constructor(){Jm(this,"map",new Map),Jm(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Jm(this,"get",e=>this.map.get(e)||[]),Jm(this,"exists",(e,n)=>this.get(e).includes(n)),Jm(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Jm(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var dBe=Object.defineProperty,hBe=Object.defineProperties,fBe=Object.getOwnPropertyDescriptors,S9=Object.getOwnPropertySymbols,pBe=Object.prototype.hasOwnProperty,gBe=Object.prototype.propertyIsEnumerable,Q3=(t,e,n)=>e in t?dBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ev=(t,e)=>{for(var n in e||(e={}))pBe.call(e,n)&&Q3(t,n,e[n]);if(S9)for(var n of S9(e))gBe.call(e,n)&&Q3(t,n,e[n]);return t},jO=(t,e)=>hBe(t,fBe(e)),Gn=(t,e,n)=>Q3(t,typeof e!="symbol"?e+"":e,n);class mBe extends eDe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Gn(this,"subscriptions",new Map),Gn(this,"topicMap",new uBe),Gn(this,"events",new ec.EventEmitter),Gn(this,"name",tUe),Gn(this,"version",nUe),Gn(this,"pending",new Map),Gn(this,"cached",[]),Gn(this,"initialized",!1),Gn(this,"storagePrefix",tu),Gn(this,"subscribeTimeout",Ne.toMiliseconds(Ne.ONE_MINUTE)),Gn(this,"initialSubscribeTimeout",Ne.toMiliseconds(Ne.ONE_SECOND*15)),Gn(this,"clientId"),Gn(this,"batchSubscribeTopicsLimit",500),Gn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Gn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=kI(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Gn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Gn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Gn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Gn(this,"on",(r,s)=>{this.events.on(r,s)}),Gn(this,"once",(r,s)=>{this.events.once(r,s)}),Gn(this,"off",(r,s)=>{this.events.off(r,s)}),Gn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Gn(this,"start",async()=>{await this.onConnect()}),Gn(this,"stop",async()=>{await this.onDisconnect()}),Gn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Gn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Gn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(vm.pulse,async()=>{await this.checkPending()}),this.events.on($o.created,async r=>{const s=$o.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on($o.deleted,async r=>{const s=$o.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Qs(n,this.name),this.clientId=""}get context(){return To(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=kI(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=$n("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===cr.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Wv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===cr.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},Ne.toMiliseconds(Ne.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener($o.created,d),u(h.id))};this.events.on($o.created,d);try{const h=await Fh(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener($o.created,d),u(h)}catch{}}),l=await Fh(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Es.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Wv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Fh(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Es.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Wv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Fh(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Es.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Wv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,jO(Ev({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Ev({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Ev({},n)),this.topicMap.set(n.topic,e),this.events.emit($o.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit($o.deleted,jO(Ev({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit($o.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit($o.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>jO(Ev({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await _3e(Ne.toMiliseconds(Ne.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Rl(e+await this.getClientId())}}var yBe=Object.defineProperty,x9=Object.getOwnPropertySymbols,wBe=Object.prototype.hasOwnProperty,bBe=Object.prototype.propertyIsEnumerable,J3=(t,e,n)=>e in t?yBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I9=(t,e)=>{for(var n in e||(e={}))wBe.call(e,n)&&J3(t,n,e[n]);if(x9)for(var n of x9(e))bBe.call(e,n)&&J3(t,n,e[n]);return t},gn=(t,e,n)=>J3(t,typeof e!="symbol"?e+"":e,n);class vBe extends Zke{constructor(e){super(e),gn(this,"protocol","wc"),gn(this,"version",2),gn(this,"core"),gn(this,"logger"),gn(this,"events",new ec.EventEmitter),gn(this,"provider"),gn(this,"messages"),gn(this,"subscriber"),gn(this,"publisher"),gn(this,"name",QLe),gn(this,"transportExplicitlyClosed",!1),gn(this,"initialized",!1),gn(this,"connectionAttemptInProgress",!1),gn(this,"relayUrl"),gn(this,"projectId"),gn(this,"packageName"),gn(this,"bundleId"),gn(this,"hasExperiencedNetworkDisruption",!1),gn(this,"pingTimeout"),gn(this,"heartBeatTimeout",Ne.toMiliseconds(Ne.THIRTY_SECONDS+Ne.FIVE_SECONDS)),gn(this,"reconnectTimeout"),gn(this,"connectPromise"),gn(this,"reconnectInProgress",!1),gn(this,"requestsInFlight",[]),gn(this,"connectTimeout",Ne.toMiliseconds(Ne.ONE_SECOND*15)),gn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||kp().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),gn(this,"resetPingTimeout",()=>{PI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),gn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),gn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(Es.connect)}),gn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),gn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Es.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),gn(this,"registerProviderListeners",()=>{this.provider.on(ya.payload,this.onPayloadHandler),this.provider.on(ya.connect,this.onConnectHandler),this.provider.on(ya.disconnect,this.onDisconnectHandler),this.provider.on(ya.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Qs(e.logger,this.name):w1(Cm({level:e.logger||YLe})),this.messages=new tBe(this.logger,e.core),this.subscriber=new mBe(this,this.logger),this.publisher=new aBe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||UX,this.projectId=e.projectId,a3e()?this.packageName=Sj():c3e()&&(this.bundleId=Sj()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return To(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:cr.relay},qS.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off($o.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on($o.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,I9({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Fh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await f9())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Zr(Ne.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(Es.message,e),await this.recordMessageEvent(e,qS.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ya.disconnect,i),await Fh(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ya.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ya.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(ya.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Ne.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(PI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new tc(new $Pe(f3e({sdkVersion:G3,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),HU(e)){if(!e.method.endsWith(JLe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:cr.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(I9({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else kT(e)&&this.events.emit(Es.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,qS.inbound),this.events.emit(Es.message,e))}async acknowledgePayload(e){const n=PT(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(ya.payload,this.onPayloadHandler),this.provider.off(ya.connect,this.onConnectHandler),this.provider.off(ya.disconnect,this.onDisconnectHandler),this.provider.off(ya.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await f9();MLe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(vm.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&$Le())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Es.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Ne.toMiliseconds(ZLe)))))}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function EBe(){}function N9(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function T9(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function R9(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const CBe="[object RegExp]",_Be="[object String]",ABe="[object Number]",SBe="[object Boolean]",P9="[object Arguments]",xBe="[object Symbol]",IBe="[object Date]",NBe="[object Map]",TBe="[object Set]",RBe="[object Array]",PBe="[object Function]",OBe="[object ArrayBuffer]",WO="[object Object]",kBe="[object Error]",DBe="[object DataView]",MBe="[object Uint8Array]",LBe="[object Uint8ClampedArray]",UBe="[object Uint16Array]",$Be="[object Uint32Array]",BBe="[object BigUint64Array]",FBe="[object Int8Array]",jBe="[object Int16Array]",WBe="[object Int32Array]",zBe="[object BigInt64Array]",HBe="[object Float32Array]",GBe="[object Float64Array]";function qBe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function VBe(t,e,n){return zv(t,e,void 0,void 0,void 0,void 0,n)}function zv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return RE(t,e,i,o)}return RE(t,e,i,o)}function RE(t,e,n,r){if(Object.is(t,e))return!0;let s=R9(t),i=R9(e);if(s===P9&&(s=WO),i===P9&&(i=WO),s!==i)return!1;switch(s){case _Be:return t.toString()===e.toString();case ABe:{const c=t.valueOf(),l=e.valueOf();return qBe(c,l)}case SBe:case IBe:case xBe:return Object.is(t.valueOf(),e.valueOf());case CBe:return t.source===e.source&&t.flags===e.flags;case PBe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case NBe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!zv(l,e.get(c),c,t,e,n,r))return!1;return!0}case TBe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>zv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case RBe:case MBe:case LBe:case UBe:case $Be:case BBe:case FBe:case jBe:case WBe:case zBe:case HBe:case GBe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!zv(t[c],e[c],c,t,e,n,r))return!1;return!0}case OBe:return t.byteLength!==e.byteLength?!1:RE(new Uint8Array(t),new Uint8Array(e),n,r);case DBe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:RE(new Uint8Array(t),new Uint8Array(e),n,r);case kBe:return t.name===e.name&&t.message===e.message;case WO:{if(!(RE(t.constructor,e.constructor,n,r)||N9(t)&&N9(e)))return!1;const c=[...Object.keys(t),...T9(t)],l=[...Object.keys(e),...T9(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!zv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function KBe(t,e){return VBe(t,e,EBe)}var YBe=Object.defineProperty,O9=Object.getOwnPropertySymbols,QBe=Object.prototype.hasOwnProperty,JBe=Object.prototype.propertyIsEnumerable,Z3=(t,e,n)=>e in t?YBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k9=(t,e)=>{for(var n in e||(e={}))QBe.call(e,n)&&Z3(t,n,e[n]);if(O9)for(var n of O9(e))JBe.call(e,n)&&Z3(t,n,e[n]);return t},Ji=(t,e,n)=>Z3(t,typeof e!="symbol"?e+"":e,n);class Am extends Xke{constructor(e,n,r,s=tu,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Ji(this,"map",new Map),Ji(this,"version",XLe),Ji(this,"cached",[]),Ji(this,"initialized",!1),Ji(this,"getKey"),Ji(this,"storagePrefix",tu),Ji(this,"recentlyDeleted",[]),Ji(this,"recentlyDeletedLimit",200),Ji(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Bs(o)?this.map.set(this.getKey(o),o):hLe(o)?this.map.set(o.id,o):fLe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ji(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ji(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ji(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>KBe(a[c],o[c]))):this.values)),Ji(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=k9(k9({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ji(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Qs(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return To(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Te("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ZBe=Object.defineProperty,XBe=(t,e,n)=>e in t?ZBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,en=(t,e,n)=>XBe(t,typeof e!="symbol"?e+"":e,n);class e6e{constructor(e,n){this.core=e,this.logger=n,en(this,"name",rUe),en(this,"version",sUe),en(this,"events",new OU),en(this,"pairings"),en(this,"initialized",!1),en(this,"storagePrefix",tu),en(this,"ignoredPayloadTypes",[rd]),en(this,"registeredMethods",[]),en(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),en(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),en(this,"create",async r=>{this.isInitialized();const s=z3(),i=await this.core.crypto.setSymKey(s),o=Zr(Ne.FIVE_MINUTES),a={protocol:LX},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=s9({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(mp.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),en(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[ul.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=r9(r.uri);s.props.properties.topic=i,s.addTrace(ul.pairing_uri_validation_success),s.addTrace(ul.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(ul.existing_pairing),u.active)throw s.setError(Cu.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(ul.pairing_not_expired)}const d=c||Zr(Ne.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(ul.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(mp.create,h),s.addTrace(ul.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(ul.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Cu.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Cu.subscribe_pairing_topic_failure),f}return s.addTrace(ul.subscribe_pairing_topic_success),h}),en(this,"activate",async({topic:r})=>{this.isInitialized();const s=Zr(Ne.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),en(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=cp();this.events.once(Sn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),en(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),en(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),en(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),en(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",$n("USER_DISCONNECTED")),await this.deletePairing(s))}),en(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return s9({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),en(this,"sendRequest",async(r,s,i)=>{const o=Bh(s,i),a=await this.core.crypto.encode(r,o),c=bv[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),en(this,"sendResult",async(r,s,i)=>{const o=PT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=bv[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),en(this,"sendError",async(r,s,i)=>{const o=OT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=bv[c]?bv[c].res:bv.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),en(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,$n("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),en(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>th(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),en(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),en(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),en(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(mp.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),en(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{fl(s)?this.events.emit(Sn("pairing_ping",i),{}):Oa(s)&&this.events.emit(Sn("pairing_ping",i),{error:s.error})},500)}),en(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(mp.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),en(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=$n("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),en(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error($n("WC_METHOD_UNSUPPORTED",r))}),en(this,"isValidPair",(r,s)=>{var i;if(!ro(r)){const{message:a}=Te("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Cu.malformed_pairing_uri),new Error(a)}if(!dLe(r.uri)){const{message:a}=Te("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Cu.malformed_pairing_uri),new Error(a)}const o=r9(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Te("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Cu.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Te("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Cu.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Ne.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Cu.pairing_expired);const{message:a}=Te("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),en(this,"isValidPing",async r=>{if(!ro(r)){const{message:i}=Te("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),en(this,"isValidDisconnect",async r=>{if(!ro(r)){const{message:i}=Te("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),en(this,"isValidPairingTopic",async r=>{if(!Vr(r,!1)){const{message:s}=Te("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(th(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Te("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Qs(n,this.name),this.pairings=new Am(this.core,this.logger,this.name,this.storagePrefix)}get context(){return To(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Es.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==cr.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);HU(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):kT(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(_a.expired,async e=>{const{topic:n}=ZZ(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(mp.expire,{topic:n}))})}}var t6e=Object.defineProperty,n6e=(t,e,n)=>e in t?t6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Os=(t,e,n)=>n6e(t,typeof e!="symbol"?e+"":e,n);class r6e extends Yke{constructor(e,n){super(e,n),this.core=e,this.logger=n,Os(this,"records",new Map),Os(this,"events",new ec.EventEmitter),Os(this,"name",iUe),Os(this,"version",oUe),Os(this,"cached",[]),Os(this,"initialized",!1),Os(this,"storagePrefix",tu),Os(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Os(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Zr(Ne.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(ac.created,o)}),Os(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Oa(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(ac.updated,s))}),Os(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Os(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(ac.deleted,i)}}),this.persist()}),Os(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Os(this,"on",(r,s)=>{this.events.on(r,s)}),Os(this,"once",(r,s)=>{this.events.once(r,s)}),Os(this,"off",(r,s)=>{this.events.off(r,s)}),Os(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Qs(n,this.name)}get context(){return To(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Bh(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ac.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ac.created,e=>{const n=ac.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ac.updated,e=>{const n=ac.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(ac.deleted,e=>{const n=ac.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(vm.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{Ne.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(ac.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var s6e=Object.defineProperty,i6e=(t,e,n)=>e in t?s6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oi=(t,e,n)=>i6e(t,typeof e!="symbol"?e+"":e,n);class o6e extends tDe{constructor(e,n){super(e,n),this.core=e,this.logger=n,oi(this,"expirations",new Map),oi(this,"events",new ec.EventEmitter),oi(this,"name",aUe),oi(this,"version",cUe),oi(this,"cached",[]),oi(this,"initialized",!1),oi(this,"storagePrefix",tu),oi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),oi(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),oi(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(_a.created,{target:i,expiration:o})}),oi(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),oi(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(_a.deleted,{target:s,expiration:i})}}),oi(this,"on",(r,s)=>{this.events.on(r,s)}),oi(this,"once",(r,s)=>{this.events.once(r,s)}),oi(this,"off",(r,s)=>{this.events.off(r,s)}),oi(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Qs(n,this.name)}get context(){return To(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return p3e(e);if(typeof e=="number")return g3e(e);const{message:n}=Te("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(_a.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;Ne.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(_a.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(vm.pulse,()=>this.checkExpirations()),this.events.on(_a.created,e=>{const n=_a.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(_a.expired,e=>{const n=_a.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(_a.deleted,e=>{const n=_a.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}var a6e=Object.defineProperty,c6e=(t,e,n)=>e in t?a6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qr=(t,e,n)=>c6e(t,typeof e!="symbol"?e+"":e,n);class l6e extends nDe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,qr(this,"name",lUe),qr(this,"abortController"),qr(this,"isDevEnv"),qr(this,"verifyUrlV3",dUe),qr(this,"storagePrefix",tu),qr(this,"version",MX),qr(this,"publicKey"),qr(this,"fetchPromise"),qr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Ne.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),qr(this,"register",async s=>{if(!Nb()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Hg(),u=this.startAbortTimer(Ne.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(v3(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),qr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(v3(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),qr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Ne.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),qr(this,"getVerifyUrl",s=>{let i=s||TE;return hUe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${TE}`),i=TE),i}),qr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Ne.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),qr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),qr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),qr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),qr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),qr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),qr(this,"validateAttestation",(s,i)=>{const o=HMe(s,i.publicKey),a={hasExpired:Ne.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Qs(n,this.name),this.abortController=new AbortController,this.isDevEnv=GU(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return To(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Ne.toMiliseconds(e))}}var u6e=Object.defineProperty,d6e=(t,e,n)=>e in t?u6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D9=(t,e,n)=>d6e(t,typeof e!="symbol"?e+"":e,n);class h6e extends rDe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,D9(this,"context",fUe),D9(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${pUe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Qs(n,this.context)}}var f6e=Object.defineProperty,M9=Object.getOwnPropertySymbols,p6e=Object.prototype.hasOwnProperty,g6e=Object.prototype.propertyIsEnumerable,X3=(t,e,n)=>e in t?f6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cv=(t,e)=>{for(var n in e||(e={}))p6e.call(e,n)&&X3(t,n,e[n]);if(M9)for(var n of M9(e))g6e.call(e,n)&&X3(t,n,e[n]);return t},hs=(t,e,n)=>X3(t,typeof e!="symbol"?e+"":e,n);class m6e extends sDe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,hs(this,"context",mUe),hs(this,"storagePrefix",tu),hs(this,"storageVersion",gUe),hs(this,"events",new Map),hs(this,"shouldPersist",!1),hs(this,"init",async()=>{if(!GU())try{const s={eventId:Ij(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:QZ(this.core.relayer.protocol,this.core.relayer.version,G3)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),hs(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=Ij(),u=this.core.projectId||"",d=Date.now(),h=Cv({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),hs(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Cv(Cv({},a),this.setMethods(a.eventId))}),hs(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),hs(this,"setEventListeners",()=>{this.core.heartbeat.on(vm.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Ne.fromMiliseconds(Date.now())-Ne.fromMiliseconds(s.timestamp)>yUe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),hs(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),hs(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),hs(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),hs(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),hs(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Cv(Cv({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),hs(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),hs(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${wUe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${G3}${i}`,{method:"POST",body:JSON.stringify(s)})}),hs(this,"getAppDomain",()=>YZ().url),this.logger=Qs(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var y6e=Object.defineProperty,L9=Object.getOwnPropertySymbols,w6e=Object.prototype.hasOwnProperty,b6e=Object.prototype.propertyIsEnumerable,e5=(t,e,n)=>e in t?y6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U9=(t,e)=>{for(var n in e||(e={}))w6e.call(e,n)&&e5(t,n,e[n]);if(L9)for(var n of L9(e))b6e.call(e,n)&&e5(t,n,e[n]);return t},Jn=(t,e,n)=>e5(t,typeof e!="symbol"?e+"":e,n);let v6e=class YX extends Gke{constructor(e){var n;super(e),Jn(this,"protocol",DX),Jn(this,"version",MX),Jn(this,"name",H3),Jn(this,"relayUrl"),Jn(this,"projectId"),Jn(this,"customStoragePrefix"),Jn(this,"events",new ec.EventEmitter),Jn(this,"logger"),Jn(this,"heartbeat"),Jn(this,"relayer"),Jn(this,"crypto"),Jn(this,"storage"),Jn(this,"history"),Jn(this,"expirer"),Jn(this,"pairing"),Jn(this,"verify"),Jn(this,"echoClient"),Jn(this,"linkModeSupportedApps"),Jn(this,"eventClient"),Jn(this,"initialized",!1),Jn(this,"logChunkController"),Jn(this,"on",(a,c)=>this.events.on(a,c)),Jn(this,"once",(a,c)=>this.events.once(a,c)),Jn(this,"off",(a,c)=>this.events.off(a,c)),Jn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Jn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:cr.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||UX,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Cm({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:FLe.logger,name:H3}),{logger:i,chunkLoggerController:o}=xT({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Qs(i,this.name),this.heartbeat=new JSe,this.crypto=new V$e(this,this.logger,e==null?void 0:e.keychain),this.history=new r6e(this,this.logger),this.expirer=new o6e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Wke(U9(U9({},jLe),e==null?void 0:e.storageOptions)),this.relayer=new vBe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new e6e(this,this.logger),this.verify=new l6e(this,this.logger,this.storage),this.echoClient=new h6e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new m6e(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new YX(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(eUe,r),n}get context(){return To(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(m9,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(m9)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&BLe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const E6e=v6e,QX="wc",JX=2,ZX="client",XU=`${QX}@${JX}:${ZX}:`,zO={name:ZX,logger:"error"},$9="WALLETCONNECT_DEEPLINK_CHOICE",C6e="proposal",B9="Proposal expired",_6e="session",Zm=Ne.SEVEN_DAYS,A6e="engine",fs={wc_sessionPropose:{req:{ttl:Ne.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ne.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Ne.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Ne.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Ne.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ne.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ne.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ne.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ne.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ne.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ne.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ne.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ne.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ne.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ne.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ne.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ne.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Ne.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Ne.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Ne.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Ne.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Ne.FIVE_MINUTES,prompt:!1,tag:1119}}},HO={min:Ne.FIVE_MINUTES,max:Ne.SEVEN_DAYS},al={idle:"IDLE",active:"ACTIVE"},F9={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},S6e="request",x6e=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],I6e="wc",N6e="auth",T6e="authKeys",R6e="pairingTopics",P6e="requests",HT=`${I6e}@${1.5}:${N6e}:`,VS=`${HT}:PUB_KEY`;var O6e=Object.defineProperty,k6e=Object.defineProperties,D6e=Object.getOwnPropertyDescriptors,j9=Object.getOwnPropertySymbols,M6e=Object.prototype.hasOwnProperty,L6e=Object.prototype.propertyIsEnumerable,t5=(t,e,n)=>e in t?O6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qn=(t,e)=>{for(var n in e||(e={}))M6e.call(e,n)&&t5(t,n,e[n]);if(j9)for(var n of j9(e))L6e.call(e,n)&&t5(t,n,e[n]);return t},vi=(t,e)=>k6e(t,D6e(e)),we=(t,e,n)=>t5(t,typeof e!="symbol"?e+"":e,n);class U6e extends cDe{constructor(e){super(e),we(this,"name",A6e),we(this,"events",new OU),we(this,"initialized",!1),we(this,"requestQueue",{state:al.idle,queue:[]}),we(this,"sessionRequestQueue",{state:al.idle,queue:[]}),we(this,"requestQueueDelay",Ne.ONE_SECOND),we(this,"expectedPairingMethodMap",new Map),we(this,"recentlyDeletedMap",new Map),we(this,"recentlyDeletedLimit",200),we(this,"relayMessageCache",[]),we(this,"pendingSessions",new Map),we(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(fs)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Ne.toMiliseconds(this.requestQueueDelay)))}),we(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=vi(qn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=oLe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const I=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),I}if(!u||!h){const{topic:I,uri:x}=await this.client.core.pairing.create();u=I,d=x}if(!u){const{message:I}=Te("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(I)}const f=await this.client.core.crypto.generateKeyPair(),p=fs.wc_sessionPropose.req.ttl||Ne.FIVE_MINUTES,g=Zr(p),w=vi(qn(qn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:LX}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:hl()}),y=Sn("session_connect",w.id),{reject:b,resolve:v,done:A}=cp(p,B9),_=({id:I})=>{I===w.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:B9,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(y,({error:I,session:x})=>{this.client.events.off("proposal_expire",_),I?b(I):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:A}}),we(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),we(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[cc.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(Jf.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Jf.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Jf.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:cc.session_approve_started,properties:{topic:p,trace:[cc.session_approve_started,cc.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,_=await this.client.core.crypto.generateSharedKey(v,A),I=qn(qn(qn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:Zr(Zm)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=cr.relay;b.addTrace(cc.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:x})}catch(S){throw b.setError(Jf.subscribe_session_topic_failure),S}b.addTrace(cc.subscribe_session_topic_success);const N=vi(qn({},I),{topic:_,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:I.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:cr.relay});await this.client.session.set(_,N),b.addTrace(cc.store_session);try{b.addTrace(cc.publishing_session_settle),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:I,throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Jf.session_settle_publish_failure),S}),b.addTrace(cc.session_settle_publish_success),b.addTrace(cc.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Jf.session_approve_publish_failure),S}),b.addTrace(cc.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(_,$n("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),S}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,$n("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(_,Zr(Zm)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),we(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:fs.wc_sessionPropose.reject}),await this.client.proposal.delete(r,$n("USER_DISCONNECTED")))}),we(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=cp(),c=hl(),l=kp().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Sn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),we(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=hl(),{done:i,resolve:o,reject:a}=cp();return this.events.once(Sn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Zr(Zm)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),we(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=fs.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===cr.relay&&await this.confirmOnlineStateOrThrow();const c=hl(),l=kp().toString(),{done:u,resolve:d,reject:h}=cp(o,"Request expired. Please try again.");this.events.once(Sn("session_request",c),({error:y,result:b})=>{y?h(y):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:vi(qn({},s),{expiryTimestamp:Zr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:vi(qn({},s),{expiryTimestamp:Zr(o)}),chainId:r},w=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(qn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const v=await b3e(this.client.core.storage,$9);await m3e({id:c,topic:i,wcDeepLink:v})}y()}),u()]).then(y=>y[2])}),we(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===cr.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);fl(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Oa(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),we(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=hl(),i=kp().toString(),{done:o,resolve:a,reject:c}=cp();this.events.once(Sn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),we(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=kp().toString(),a=hl();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),we(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:$n("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Te("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),we(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>lLe(r,n)))),we(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),we(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?cr.link_mode:cr.relay;o===cr.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const A=await this.client.core.crypto.generateKeyPair(),_=GS(A);if(await Promise.all([this.client.auth.authKeys.set(VS,{responseTopic:_,publicKey:A}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:b})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:M}=i0(a[0]);let W=d5e(M,"request",g);HS(y)&&(W=f5e(W,y.pop())),y.push(W)}const I=w&&w>fs.wc_sessionAuthenticate.req.ttl?w:fs.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Zr(I)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Zr(fs.wc_sessionPropose.req.ttl),id:hl()},{done:O,resolve:P,reject:F}=cp(I,"Request expired"),G=hl(),B=Sn("session_connect",S.id),T=Sn("session_request",G),R=async({error:M,session:W})=>{this.events.off(T,$),M?F(M):W&&P({session:W})},$=async M=>{var W,K,ne;if(await this.deletePendingAuthRequest(G,{message:"fulfilled",code:0}),M.error){const Me=$n("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return M.error.code===Me.code?void 0:(this.events.off(B,R),F(M.error.message))}await this.deleteProposal(S.id),this.events.off(B,R);const{cacaos:le,responder:oe}=M.result,ae=[],ue=[];for(const Me of le){await Mj({cacao:Me,projectId:this.client.core.projectId})||(this.client.logger.error(Me,"Signature verification failed"),F($n("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:rt}=Me,Tt=HS(rt.resources),Jt=[D3(rt.iss)],X=OI(rt.iss);if(Tt){const ce=Lj(Tt),Ee=Uj(Tt);ae.push(...ce),Jt.push(...Ee)}for(const ce of Jt)ue.push(`${ce}:${X}`)}const et=await this.client.core.crypto.generateSharedKey(A,oe.publicKey);let Se;ae.length>0&&(Se={topic:et,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:oe,controller:oe.publicKey,expiry:Zr(Zm),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:c9([...new Set(ae)],[...new Set(ue)]),transportType:o},await this.client.core.relayer.subscribe(et,{transportType:o}),await this.client.session.set(et,Se),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:oe.metadata}),Se=this.client.session.get(et)),(W=this.client.metadata.redirect)!=null&&W.linkMode&&(K=oe.metadata.redirect)!=null&&K.linkMode&&(ne=oe.metadata.redirect)!=null&&ne.universal&&r&&(this.client.core.addLinkModeSupportedApp(oe.metadata.redirect.universal),this.client.session.update(et,{transportType:cr.link_mode})),P({auths:le,session:Se})};this.events.once(B,R),this.events.once(T,$);let k;try{if(i){const M=Bh("wc_sessionAuthenticate",x,G);this.client.core.history.set(b,M);const W=await this.client.core.crypto.encode("",M,{type:N1,encoding:oh});k=KA(r,b,W)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:G}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:S,expiry:fs.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(M){throw this.events.off(B,R),this.events.off(T,$),M}return await this.setProposal(S.id,S),await this.setAuthRequest(G,{request:vi(qn({},x),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:k??v,response:O}}),we(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Zf.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(vv.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(vv.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||cr.relay;a===cr.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=GS(c),d={type:rd,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await Mj({cacao:w,projectId:this.client.core.projectId})){i.setError(vv.invalid_cacao);const _=$n("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(Zf.cacaos_verified);const{p:y}=w,b=HS(y.resources),v=[D3(y.iss)],A=OI(y.iss);if(b){const _=Lj(b),I=Uj(b);h.push(..._),v.push(...I)}for(const _ of v)f.push(`${_}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Zf.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Zr(Zm),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:c9([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Zf.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(vv.subscribe_authenticated_session_topic_failure),w}i.addTrace(Zf.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Zf.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Zf.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(vv.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),we(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===cr.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=GS(o),l={type:rd,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:fs.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,$n("USER_DISCONNECTED"))}),we(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return aX(r,s)}),we(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),we(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),we(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,$n("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem($9).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,$n("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=al.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),we(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Jf.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,$n("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),we(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=al.idle,this.client.events.emit("session_request_expire",{id:n}))}),we(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),we(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),we(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Zr(fs.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),we(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=cr.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),we(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Zr(fs.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),we(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Bh(s,i,c);let f;const p=!!u;try{const y=p?oh:Lc;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(x6e.includes(s)){const y=Rl(JSON.stringify(h)),b=Rl(f);g=await this.client.core.verify.register({id:b,decryptedId:y})}const w=fs[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=KA(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=fs[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=vi(qn({},d),{correlationId:h.id}),l?(y.internal=vi(qn({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),we(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=PT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?oh:Lc;u=await this.client.core.crypto.encode(s,l,vi(qn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=KA(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=fs[p].res;g.tvf=vi(qn({},f),{correlationId:r}),o?(g.internal=vi(qn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),we(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=OT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?oh:Lc;u=await this.client.core.crypto.encode(s,l,vi(qn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=KA(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||fs[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),we(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;th(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{th(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),we(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),we(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),we(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===al.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=al.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=al.idle}),we(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),we(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),we(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Te("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),we(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),we(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Cu.proposal_listener_not_found)),this.isValidConnect(qn({},s.params));const u=a.expiryTimestamp||Zr(fs.wc_sessionPropose.req.ttl),d=qn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Rl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(ul.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:fs.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),we(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(fl(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Oa(r)){await this.client.proposal.delete(i,$n("USER_DISCONNECTED"));const o=Sn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),we(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=vi(qn(qn(qn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:cr.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Sn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;fl(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Sn("session_approve",s),{})):Oa(r)&&(await this.client.session.delete(n,$n("USER_DISCONNECTED")),this.events.emit(Sn("session_approve",s),{error:r.error}))}),we(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=wv.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:$n("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(qn({topic:n},s));try{wv.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw wv.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),we(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Sn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);fl(r)?this.events.emit(Sn("session_update",s),{}):Oa(r)&&this.events.emit(Sn("session_update",s),{error:r.error})}),we(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Zr(Zm)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),we(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Sn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);fl(r)?this.events.emit(Sn("session_extend",s),{}):Oa(r)&&this.events.emit(Sn("session_extend",s),{error:r.error})}),we(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),we(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Sn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);fl(r)?this.events.emit(Sn("session_ping",s),{}):Oa(r)&&this.events.emit(Sn("session_ping",s),{error:r.error})},500)}),we(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(Es.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:$n("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),we(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(qn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Rl(JSON.stringify(Bh("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===cr.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),we(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Sn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);fl(r)?this.events.emit(Sn("session_request",s),{result:r.result}):Oa(r)&&this.events.emit(Sn("session_request",s),{error:r.error})}),we(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=wv.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(qn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),wv.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),we(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),fl(r)?this.events.emit(Sn("session_request",s),{result:r.result}):Oa(r)&&this.events.emit(Sn("session_request",s),{error:r.error})}),we(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Rl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===cr.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:rd,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:fs.wc_sessionAuthenticate.autoReject,appLink:h})}}),we(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),we(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=al.idle,this.processSessionRequestQueue()},Ne.toMiliseconds(this.requestQueueDelay))}),we(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Sn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Sn("session_request",i.request.id),{error:r})})}),we(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===al.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=al.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),we(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),we(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Bh("wc_sessionPropose",vi(qn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),we(this,"isValidConnect",async n=>{if(!ro(n)){const{message:l}=Te("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Bs(r)||await this.isValidPairingTopic(r),!ELe(c)){const{message:l}=Te("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Bs(s)&&df(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Bs(i)&&df(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Bs(o)||this.validateSessionProps(o,"sessionProperties"),!Bs(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),we(this,"validateNamespaces",(n,r)=>{const s=vLe(n,"connect()",r);if(s)throw new Error(s.message)}),we(this,"isValidApprove",async n=>{if(!ro(n))throw new Error(Te("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=UO(s,"approve()");if(l)throw new Error(l.message);const u=d9(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Vr(i,!0)){const{message:d}=Te("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Bs(o)||this.validateSessionProps(o,"sessionProperties"),!Bs(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),we(this,"isValidReject",async n=>{if(!ro(n)){const{message:i}=Te("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!_Le(s)){const{message:i}=Te("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),we(this,"isValidSessionSettleRequest",n=>{if(!ro(n)){const{message:l}=Te("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!kX(r)){const{message:l}=Te("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=pLe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=UO(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(th(o)){const{message:l}=Te("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),we(this,"isValidUpdate",async n=>{if(!ro(n)){const{message:c}=Te("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=UO(s,"update()");if(o)throw new Error(o.message);const a=d9(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),we(this,"isValidExtend",async n=>{if(!ro(n)){const{message:s}=Te("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),we(this,"isValidRequest",async n=>{if(!ro(n)){const{message:c}=Te("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!u9(a,i)){const{message:c}=Te("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!ALe(s)){const{message:c}=Te("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!ILe(a,i,s.method)){const{message:c}=Te("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!PLe(o,HO)){const{message:c}=Te("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${HO.min} and ${HO.max}`);throw new Error(c)}}),we(this,"isValidRespond",async n=>{var r;if(!ro(n)){const{message:o}=Te("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!SLe(i)){const{message:o}=Te("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),we(this,"isValidPing",async n=>{if(!ro(n)){const{message:s}=Te("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),we(this,"isValidEmit",async n=>{if(!ro(n)){const{message:a}=Te("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!u9(o,i)){const{message:a}=Te("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!xLe(s)){const{message:a}=Te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!NLe(o,i,s.name)){const{message:a}=Te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),we(this,"isValidDisconnect",async n=>{if(!ro(n)){const{message:s}=Te("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),we(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Vr(s,!1))throw new Error("uri is required parameter");if(!Vr(i,!1))throw new Error("domain is required parameter");if(!Vr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>i0(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=i0(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),we(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||TE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===cr.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),we(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Te("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),we(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),we(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),we(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Te("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),we(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==cr.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),we(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),we(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=xj(n,"topic")||"",s=decodeURIComponent(xj(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:cr.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),we(this,"registerLinkModeListeners",async()=>{var n;if(GU()||$f()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),we(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(F9).includes(s.method)}),we(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return vi(qn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),we(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),we(this,"extractTxHashesFromResult",(n,r)=>{try{const s=F9[n];if(typeof r=="string")return[r];const i=r[s.key];if(uf(i))return n==="solana_signAllTransactions"?i.map(o=>J3e(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Es.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(VS)?this.client.auth.authKeys.get(VS):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===cr.link_mode?oh:Lc});HU(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Rl(r)})):kT(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(_a.expired,async e=>{const{topic:n,id:r}=ZZ(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Te("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Te("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(mp.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(mp.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Vr(e,!1)){const{message:n}=Te("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(th(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Te("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Vr(e,!1)){const{message:n}=Te("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Te("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(th(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Te("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Te("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Vr(e,!1)){const{message:n}=Te("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Te("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!CLe(e)){const{message:n}=Te("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Te("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(th(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Te("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class $6e extends Am{constructor(e,n){super(e,n,C6e,XU),this.core=e,this.logger=n}}let B6e=class extends Am{constructor(e,n){super(e,n,_6e,XU),this.core=e,this.logger=n}};class F6e extends Am{constructor(e,n){super(e,n,S6e,XU,r=>r.id),this.core=e,this.logger=n}}class j6e extends Am{constructor(e,n){super(e,n,T6e,HT,()=>VS),this.core=e,this.logger=n}}class W6e extends Am{constructor(e,n){super(e,n,R6e,HT),this.core=e,this.logger=n}}class z6e extends Am{constructor(e,n){super(e,n,P6e,HT,r=>r.id),this.core=e,this.logger=n}}var H6e=Object.defineProperty,G6e=(t,e,n)=>e in t?H6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,GO=(t,e,n)=>G6e(t,typeof e!="symbol"?e+"":e,n);class q6e{constructor(e,n){this.core=e,this.logger=n,GO(this,"authKeys"),GO(this,"pairingTopics"),GO(this,"requests"),this.authKeys=new j6e(this.core,this.logger),this.pairingTopics=new W6e(this.core,this.logger),this.requests=new z6e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var V6e=Object.defineProperty,K6e=(t,e,n)=>e in t?V6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tn=(t,e,n)=>K6e(t,typeof e!="symbol"?e+"":e,n);let Y6e=class XX extends aDe{constructor(e){super(e),tn(this,"protocol",QX),tn(this,"version",JX),tn(this,"name",zO.name),tn(this,"metadata"),tn(this,"core"),tn(this,"logger"),tn(this,"events",new ec.EventEmitter),tn(this,"engine"),tn(this,"session"),tn(this,"proposal"),tn(this,"pendingRequest"),tn(this,"auth"),tn(this,"signConfig"),tn(this,"on",(r,s)=>this.events.on(r,s)),tn(this,"once",(r,s)=>this.events.once(r,s)),tn(this,"off",(r,s)=>this.events.off(r,s)),tn(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),tn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),tn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),tn(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),tn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||zO.name,this.metadata=u3e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:w1(Cm({level:(e==null?void 0:e.logger)||zO.logger}));this.core=(e==null?void 0:e.core)||new E6e(e),this.logger=Qs(n,this.name),this.session=new B6e(this.core,this.logger),this.proposal=new $6e(this.core,this.logger),this.pendingRequest=new F6e(this.core,this.logger),this.engine=new U6e(this),this.auth=new q6e(this.core,this.logger)}static async init(e){const n=new XX(e);return await n.initialize(),n}get context(){return To(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},Ne.toMiliseconds(Ne.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const W9="error",Q6e="wss://relay.walletconnect.org",J6e="wc",Z6e="universal_provider",QA=`${J6e}@2:${Z6e}:`,eee="https://rpc.walletconnect.org/v1/",wy="generic",X6e=`${eee}bundler`,nc={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function e8e(){}function e$(t){return t==null||typeof t!="object"&&typeof t!="function"}function t$(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function t8e(t){if(e$(t))return t;if(Array.isArray(t)||t$(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function z9(t){return typeof t=="object"&&t!==null}function tee(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function nee(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const n8e="[object RegExp]",ree="[object String]",see="[object Number]",iee="[object Boolean]",oee="[object Arguments]",r8e="[object Symbol]",s8e="[object Date]",i8e="[object Map]",o8e="[object Set]",a8e="[object Array]",c8e="[object ArrayBuffer]",l8e="[object Object]",u8e="[object DataView]",d8e="[object Uint8Array]",h8e="[object Uint8ClampedArray]",f8e="[object Uint16Array]",p8e="[object Uint32Array]",g8e="[object Int8Array]",m8e="[object Int16Array]",y8e="[object Int32Array]",w8e="[object Float32Array]",b8e="[object Float64Array]";function v8e(t,e){return Fy(t,void 0,t,new Map,e)}function Fy(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(e$(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Fy(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Fy(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Fy(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(t$(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Fy(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),yp(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),yp(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),yp(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,yp(o,t,n,r,s),o}if(typeof t=="object"&&E8e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),yp(o,t,n,r,s),o}return t}function yp(t,e,n=t,r,s){const i=[...Object.keys(e),...tee(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Fy(e[a],a,n,r,s))}}function E8e(t){switch(nee(t)){case oee:case a8e:case c8e:case u8e:case iee:case s8e:case w8e:case b8e:case g8e:case m8e:case y8e:case i8e:case see:case l8e:case n8e:case o8e:case ree:case r8e:case d8e:case h8e:case f8e:case p8e:return!0;default:return!1}}function C8e(t,e){return v8e(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case see:case ree:case iee:{const o=new t.constructor(t==null?void 0:t.valueOf());return yp(o,t),o}case oee:{const o={};return yp(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function H9(t){return C8e(t)}function G9(t){return t!==null&&typeof t=="object"&&nee(t)==="[object Arguments]"}function _8e(t){return t$(t)}function A8e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function S8e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=n5(s,o,r,new Map)}return s}function n5(t,e,n,r){if(e$(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return t8e(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...tee(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(G9(a)&&(a={...a}),G9(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=H9(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||z9(c)&&z9(a)?t[o]=n5(c,a,n,r):c==null&&A8e(a)?t[o]=n5({},a,n,r):c==null&&_8e(a)?t[o]=H9(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function x8e(t,...e){return S8e(t,...e,e8e)}var I8e=Object.defineProperty,N8e=Object.defineProperties,T8e=Object.getOwnPropertyDescriptors,q9=Object.getOwnPropertySymbols,R8e=Object.prototype.hasOwnProperty,P8e=Object.prototype.propertyIsEnumerable,V9=(t,e,n)=>e in t?I8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,JA=(t,e)=>{for(var n in e||(e={}))R8e.call(e,n)&&V9(t,n,e[n]);if(q9)for(var n of q9(e))P8e.call(e,n)&&V9(t,n,e[n]);return t},O8e=(t,e)=>N8e(t,T8e(e));function sa(t,e,n){var r;const s=i0(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${eee}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Sm(t){return t.includes(":")?t.split(":")[1]:t}function aee(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function k8e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function ZA(t={},e={}){const n=K9(t),r=K9(e);return x8e(n,r)}function K9(t){var e,n,r,s,i;const o={};if(!df(t))return o;for(const[a,c]of Object.entries(t)){const l=WT(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=By(a);o[f]=O8e(JA(JA({},o[f]),c),{chains:Vl(l,(e=o[f])==null?void 0:e.chains),methods:Vl(u,(n=o[f])==null?void 0:n.methods),events:Vl(d,(r=o[f])==null?void 0:r.events)}),(df(h)||df(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=JA(JA({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function Y9(t){return t.includes(":")?t.split(":")[2]:t}function Q9(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=WT(n)?[n]:r.chains?r.chains:aee(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function qO(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const cee={},vn=t=>cee[t],VO=(t,e)=>{cee[t]=e};var D8e=Object.defineProperty,M8e=(t,e,n)=>e in t?D8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xm=(t,e,n)=>M8e(t,typeof e!="symbol"?e+"":e,n);class L8e{constructor(e){Xm(this,"name","polkadot"),Xm(this,"client"),Xm(this,"httpProviders"),Xm(this,"events"),Xm(this,"namespace"),Xm(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(nc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Sm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new tc(new Yc(r,vn("disableProviderPing")))}}var U8e=Object.defineProperty,$8e=Object.defineProperties,B8e=Object.getOwnPropertyDescriptors,J9=Object.getOwnPropertySymbols,F8e=Object.prototype.hasOwnProperty,j8e=Object.prototype.propertyIsEnumerable,r5=(t,e,n)=>e in t?U8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z9=(t,e)=>{for(var n in e||(e={}))F8e.call(e,n)&&r5(t,n,e[n]);if(J9)for(var n of J9(e))j8e.call(e,n)&&r5(t,n,e[n]);return t},X9=(t,e)=>$8e(t,B8e(e)),ey=(t,e,n)=>r5(t,typeof e!="symbol"?e+"":e,n);class W8e{constructor(e){ey(this,"name","eip155"),ey(this,"client"),ey(this,"chainId"),ey(this,"namespace"),ey(this,"httpProviders"),ey(this,"events"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(nc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||sa(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new tc(new Yc(r,vn("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Sm(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:X9(Z9({},u.sessionProperties||{}),{capabilities:X9(Z9({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Bh("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${X6e}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var z8e=Object.defineProperty,H8e=(t,e,n)=>e in t?z8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ty=(t,e,n)=>H8e(t,typeof e!="symbol"?e+"":e,n);class G8e{constructor(e){ty(this,"name","solana"),ty(this,"client"),ty(this,"httpProviders"),ty(this,"events"),ty(this,"namespace"),ty(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(nc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Sm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new tc(new Yc(r,vn("disableProviderPing")))}}var q8e=Object.defineProperty,V8e=(t,e,n)=>e in t?q8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ny=(t,e,n)=>V8e(t,typeof e!="symbol"?e+"":e,n);class K8e{constructor(e){ny(this,"name","cosmos"),ny(this,"client"),ny(this,"httpProviders"),ny(this,"events"),ny(this,"namespace"),ny(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(nc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Sm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new tc(new Yc(r,vn("disableProviderPing")))}}var Y8e=Object.defineProperty,Q8e=(t,e,n)=>e in t?Y8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ry=(t,e,n)=>Q8e(t,typeof e!="symbol"?e+"":e,n);class J8e{constructor(e){ry(this,"name","algorand"),ry(this,"client"),ry(this,"httpProviders"),ry(this,"events"),ry(this,"namespace"),ry(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||sa(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(nc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new tc(new Yc(r,vn("disableProviderPing")))}}var Z8e=Object.defineProperty,X8e=(t,e,n)=>e in t?Z8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sy=(t,e,n)=>X8e(t,typeof e!="symbol"?e+"":e,n);class e4e{constructor(e){sy(this,"name","cip34"),sy(this,"client"),sy(this,"httpProviders"),sy(this,"events"),sy(this,"namespace"),sy(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(nc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Sm(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new tc(new Yc(r,vn("disableProviderPing")))}}var t4e=Object.defineProperty,n4e=(t,e,n)=>e in t?t4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iy=(t,e,n)=>n4e(t,typeof e!="symbol"?e+"":e,n);class r4e{constructor(e){iy(this,"name","elrond"),iy(this,"client"),iy(this,"httpProviders"),iy(this,"events"),iy(this,"namespace"),iy(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(nc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Sm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new tc(new Yc(r,vn("disableProviderPing")))}}var s4e=Object.defineProperty,i4e=(t,e,n)=>e in t?s4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oy=(t,e,n)=>i4e(t,typeof e!="symbol"?e+"":e,n);class o4e{constructor(e){oy(this,"name","multiversx"),oy(this,"client"),oy(this,"httpProviders"),oy(this,"events"),oy(this,"namespace"),oy(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(nc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Sm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new tc(new Yc(r,vn("disableProviderPing")))}}var a4e=Object.defineProperty,c4e=(t,e,n)=>e in t?a4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ay=(t,e,n)=>c4e(t,typeof e!="symbol"?e+"":e,n);class l4e{constructor(e){ay(this,"name","near"),ay(this,"client"),ay(this,"httpProviders"),ay(this,"events"),ay(this,"namespace"),ay(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||sa(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(nc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace);return typeof r>"u"?void 0:new tc(new Yc(r,vn("disableProviderPing")))}}var u4e=Object.defineProperty,d4e=(t,e,n)=>e in t?u4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cy=(t,e,n)=>d4e(t,typeof e!="symbol"?e+"":e,n);class h4e{constructor(e){cy(this,"name","tezos"),cy(this,"client"),cy(this,"httpProviders"),cy(this,"events"),cy(this,"namespace"),cy(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||sa(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(nc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace);return typeof r>"u"?void 0:new tc(new Yc(r))}}var f4e=Object.defineProperty,p4e=(t,e,n)=>e in t?f4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ly=(t,e,n)=>p4e(t,typeof e!="symbol"?e+"":e,n);class g4e{constructor(e){ly(this,"name",wy),ly(this,"client"),ly(this,"httpProviders"),ly(this,"events"),ly(this,"namespace"),ly(this,"chainId"),this.namespace=e.namespace,this.events=vn("events"),this.client=vn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(nc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=i0(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new tc(new Yc(r,vn("disableProviderPing")))}}var m4e=Object.defineProperty,y4e=Object.defineProperties,w4e=Object.getOwnPropertyDescriptors,e7=Object.getOwnPropertySymbols,b4e=Object.prototype.hasOwnProperty,v4e=Object.prototype.propertyIsEnumerable,s5=(t,e,n)=>e in t?m4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,XA=(t,e)=>{for(var n in e||(e={}))b4e.call(e,n)&&s5(t,n,e[n]);if(e7)for(var n of e7(e))v4e.call(e,n)&&s5(t,n,e[n]);return t},KO=(t,e)=>y4e(t,w4e(e)),wa=(t,e,n)=>s5(t,typeof e!="symbol"?e+"":e,n);let E4e=class lee{constructor(e){wa(this,"client"),wa(this,"namespaces"),wa(this,"optionalNamespaces"),wa(this,"sessionProperties"),wa(this,"scopedProperties"),wa(this,"events",new OU),wa(this,"rpcProviders",{}),wa(this,"session"),wa(this,"providerOpts"),wa(this,"logger"),wa(this,"uri"),wa(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:w1(Cm({level:(e==null?void 0:e.logger)||W9})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new lee(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:XA({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,PT(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:$n("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=Q9(this.session.namespaces);this.namespaces=ZA(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=Q9(s.namespaces);return this.namespaces=ZA(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===wy?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(uf(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await Y6e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||W9,relayUrl:this.providerOpts.relayUrl||Q6e,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>By(n)))];VO("client",this.client),VO("events",this.events),VO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=k8e(n,this.session),s=aee(r),i=ZA(this.namespaces,this.optionalNamespaces),o=KO(XA({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new W8e({namespace:o});break;case"algorand":this.rpcProviders[n]=new J8e({namespace:o});break;case"solana":this.rpcProviders[n]=new G8e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new K8e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new L8e({namespace:o});break;case"cip34":this.rpcProviders[n]=new e4e({namespace:o});break;case"elrond":this.rpcProviders[n]=new r4e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new o4e({namespace:o});break;case"near":this.rpcProviders[n]=new l4e({namespace:o});break;case"tezos":this.rpcProviders[n]=new h4e({namespace:o});break;default:this.rpcProviders[wy]?this.rpcProviders[wy].updateNamespace(o):this.rpcProviders[wy]=new g4e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&uf(o)&&this.events.emit("accountsChanged",o.map(Y9))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=By(o),l=qO(o)!==qO(a)?`${c}:${qO(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=KO(XA({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",KO(XA({},$n("USER_DISCONNECTED")),{data:e.topic})))}),this.on(nc.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[wy]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=ZA(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>By(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=By(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(Y9);if(!uf(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${QA}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${QA}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${QA}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(QA)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var t7={};const C4e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof t7<"u"?t7.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},i5={filterOutDuplicatesByRDNS(t){const e=be.state.enableEIP6963?je.state.connectors:[],n=Qe.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&at.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=je.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Qe.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=je.state,{featuredWalletIds:n}=be.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=be.state.features)==null?void 0:c.connectMethodsOrder),r=e||je.state.connectors;if(n)return n;const{injected:s,announced:i}=KS.getConnectorsByType(r,ct.state.recommended,ct.state.featured),o=s.filter(KS.showConnector),a=i.filter(KS.showConnector);return o.length||a.length?["wallet","email","social"]:C4e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ct.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&ct.state.excludedWallets.some(r=>DT.isLowerCaseMatch(r.name,t.name));return e||n}},KS={getConnectorsByType(t,e,n){const{customWallets:r}=be.state,s=Qe.getRecentWallets(),i=i5.filterOutDuplicateWallets(e),o=i5.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&ct.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&ct.state.excludedWallets.some(i=>DT.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!at.isMobile()||at.isMobile()&&!e&&!gt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(H.state.chains.values()).some(n=>je.getConnectorId(n.namespace)===We.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=be.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=KS.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:be.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!g.some(({type:v})=>v===y));return Array.from(new Set([...g,...w].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const YS=globalThis,n$=YS.ShadowRoot&&(YS.ShadyCSS===void 0||YS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,r$=Symbol(),n7=new WeakMap;let uee=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==r$)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(n$&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=n7.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&n7.set(n,e))}return e}toString(){return this.cssText}};const Ea=t=>new uee(typeof t=="string"?t:t+"",void 0,r$),sd=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new uee(n,t,r$)},_4e=(t,e)=>{if(n$)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=YS.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},r7=n$?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Ea(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:A4e,defineProperty:S4e,getOwnPropertyDescriptor:x4e,getOwnPropertyNames:I4e,getOwnPropertySymbols:N4e,getPrototypeOf:T4e}=Object,hf=globalThis,s7=hf.trustedTypes,R4e=s7?s7.emptyScript:"",YO=hf.reactiveElementPolyfillSupport,PE=(t,e)=>t,o5={toAttribute(t,e){switch(e){case Boolean:t=t?R4e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},dee=(t,e)=>!A4e(t,e),i7={attribute:!0,type:String,converter:o5,reflect:!1,useDefault:!1,hasChanged:dee};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),hf.litPropertyMetadata??(hf.litPropertyMetadata=new WeakMap);let by=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=i7){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&S4e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=x4e(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??i7}static _$Ei(){if(this.hasOwnProperty(PE("elementProperties")))return;const e=T4e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(PE("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(PE("properties"))){const n=this.properties,r=[...I4e(n),...N4e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(r7(s))}else e!==void 0&&n.push(r7(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return _4e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:o5).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:o5;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??dee)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};by.elementStyles=[],by.shadowRootOptions={mode:"open"},by[PE("elementProperties")]=new Map,by[PE("finalized")]=new Map,YO==null||YO({ReactiveElement:by}),(hf.reactiveElementVersions??(hf.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const OE=globalThis,MI=OE.trustedTypes,o7=MI?MI.createPolicy("lit-html",{createHTML:t=>t}):void 0,hee="$lit$",ah=`lit$${Math.random().toFixed(9).slice(2)}$`,fee="?"+ah,P4e=`<${fee}>`,Zg=document,i_=()=>Zg.createComment(""),o_=t=>t===null||typeof t!="object"&&typeof t!="function",s$=Array.isArray,O4e=t=>s$(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",QO=`[ 	
\f\r]`,_v=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,a7=/-->/g,c7=/>/g,Xf=RegExp(`>|${QO}(?:([^\\s"'>=/]+)(${QO}*=${QO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),l7=/'/g,u7=/"/g,pee=/^(?:script|style|textarea|title)$/i,gee=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),SKe=gee(1),xKe=gee(2),Gw=Symbol.for("lit-noChange"),Cs=Symbol.for("lit-nothing"),d7=new WeakMap,Mp=Zg.createTreeWalker(Zg,129);function mee(t,e){if(!s$(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return o7!==void 0?o7.createHTML(e):e}const k4e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=_v;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===_v?u[1]==="!--"?o=a7:u[1]!==void 0?o=c7:u[2]!==void 0?(pee.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Xf):u[3]!==void 0&&(o=Xf):o===Xf?u[0]===">"?(o=s??_v,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Xf:u[3]==='"'?u7:l7):o===u7||o===l7?o=Xf:o===a7||o===c7?o=_v:(o=Xf,s=void 0);const f=o===Xf&&t[a+1].startsWith("/>")?" ":"";i+=o===_v?c+P4e:d>=0?(r.push(l),c.slice(0,d)+hee+c.slice(d)+ah+f):c+ah+(d===-2?a:f)}return[mee(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class a_{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=k4e(e,n);if(this.el=a_.createElement(l,r),Mp.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Mp.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(hee)){const h=u[o++],f=s.getAttribute(d).split(ah),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?M4e:p[1]==="?"?L4e:p[1]==="@"?U4e:GT}),s.removeAttribute(d)}else d.startsWith(ah)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(pee.test(s.tagName)){const d=s.textContent.split(ah),h=d.length-1;if(h>0){s.textContent=MI?MI.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],i_()),Mp.nextNode(),c.push({type:2,index:++i});s.append(d[h],i_())}}}else if(s.nodeType===8)if(s.data===fee)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(ah,d+1))!==-1;)c.push({type:7,index:i}),d+=ah.length-1}i++}}static createElement(e,n){const r=Zg.createElement("template");return r.innerHTML=e,r}}function qw(t,e,n=t,r){var o,a;if(e===Gw)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=o_(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=qw(t,s._$AS(t,e.values),s,r)),e}class D4e{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Zg).importNode(n,!0);Mp.currentNode=s;let i=Mp.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new R1(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new $4e(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Mp.nextNode(),o++)}return Mp.currentNode=Zg,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class R1{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Cs,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=qw(this,e,n),o_(e)?e===Cs||e==null||e===""?(this._$AH!==Cs&&this._$AR(),this._$AH=Cs):e!==this._$AH&&e!==Gw&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):O4e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Cs&&o_(this._$AH)?this._$AA.nextSibling.data=e:this.T(Zg.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=a_.createElement(mee(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new D4e(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=d7.get(e.strings);return n===void 0&&d7.set(e.strings,n=new a_(e)),n}k(e){s$(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new R1(this.O(i_()),this.O(i_()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class GT{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Cs,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Cs}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=qw(this,e,n,0),o=!o_(e)||e!==this._$AH&&e!==Gw,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=qw(this,a[r+c],n,c),l===Gw&&(l=this._$AH[c]),o||(o=!o_(l)||l!==this._$AH[c]),l===Cs?e=Cs:e!==Cs&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Cs?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class M4e extends GT{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Cs?void 0:e}}class L4e extends GT{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Cs)}}class U4e extends GT{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=qw(this,e,n,0)??Cs)===Gw)return;const r=this._$AH,s=e===Cs&&r!==Cs||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Cs&&(r===Cs||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class $4e{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){qw(this,e)}}const JO=OE.litHtmlPolyfillSupport;JO==null||JO(a_,R1),(OE.litHtmlVersions??(OE.litHtmlVersions=[])).push("3.3.1");const B4e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new R1(e.insertBefore(i_(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vg=globalThis;let QS=class extends by{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=B4e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Gw}};var dz;QS._$litElement$=!0,QS.finalized=!0,(dz=vg.litElementHydrateSupport)==null||dz.call(vg,{LitElement:QS});const ZO=vg.litElementPolyfillSupport;ZO==null||ZO({LitElement:QS});(vg.litElementVersions??(vg.litElementVersions=[])).push("4.2.1");let kE,ff,pf;function NKe(t,e){kE=document.createElement("style"),ff=document.createElement("style"),pf=document.createElement("style"),kE.textContent=o0(t).core.cssText,ff.textContent=o0(t).dark.cssText,pf.textContent=o0(t).light.cssText,document.head.appendChild(kE),document.head.appendChild(ff),document.head.appendChild(pf),yee(e)}function yee(t){ff&&pf&&(t==="light"?(ff.removeAttribute("media"),pf.media="enabled"):(pf.removeAttribute("media"),ff.media="enabled"))}function F4e(t){kE&&ff&&pf&&(kE.textContent=o0(t).core.cssText,ff.textContent=o0(t).dark.cssText,pf.textContent=o0(t).light.cssText)}function o0(t){return{core:sd`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${Ea(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${Ea((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${Ea((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${Ea((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${Ea((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:sd`
      :root {
        --w3m-color-mix: ${Ea((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${Ea(Qu(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${Ea(Qu(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:sd`
      :root {
        --w3m-color-mix: ${Ea((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${Ea(Qu(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${Ea(Qu(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const TKe=sd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,RKe=sd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,PKe=sd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Hv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};function P1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const LI=P1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),UI=P1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),wee=P1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});P1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});P1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const j4e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},JS={getMethodsByChainNamespace(t){return j4e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case LI.caipNetworkId:u.chains.push(LI.deprecatedCaipNetworkId);break;case UI.caipNetworkId:u.chains.push(UI.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await AE.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let bee=class{constructor({provider:e,namespace:n}){this.id=We.CONNECTOR_ID.WALLET_CONNECT,this.name=bI.ConnectorNamesMap[We.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=bI.ConnectorImageIds[We.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=H.getCaipNetworks.bind(H),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=be.state.universalProviderConfigOverride,s=JS.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return IE.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:W4e})}};const W4e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let z4e=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>H.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:We.CONNECTOR_ID.AUTH,type:"AUTH",name:We.CONNECTOR_NAMES.AUTH,provider:e,imageId:bI.ConnectorImageIds[We.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ye.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ye.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof bee);if(!e)throw new Error("WalletConnectConnector not found");return e}};class H4e extends z4e{setUniversalProvider(e){this.addConnector(new bee({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>at.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Bn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ye.state.balanceLoading&&e.chainId===((c=H.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ye.state.balance||"0.00",symbol:Ye.state.balanceSymbol||""};const s=(await Ye.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===We.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:pZ.encode(new TextEncoder().encode(r)),pubkey:s}},(a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=H.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===We.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Va(n.id)}]}))}catch(u){if(u.code===Hv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Hv.ERROR_INVALID_CHAIN_ID||u.code===Hv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Hv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Va(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const G4e=["email","socials","swaps","onramp","activity","reownBranding"],eS={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Bn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Bn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Bn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},q4e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=eS[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=eS[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return eS[t].processApi(e)},processFallbackFeature(t,e){return eS[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await ct.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Bn.DEFAULT_REMOTE_FEATURES:Bn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of G4e){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Bn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Ll.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class V4e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=H.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=H.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=H.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return H.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>H.getCaipNetworks(n),this.getActiveChainNamespace=()=>H.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{H.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>H.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>H.state.activeChain===n||!n?H.state.activeCaipAddress:H.getAccountProp("caipAddress",n),this.setClientId=n=>{pt.setClientId(n)},this.getProvider=n=>Un.getProvider(n),this.getProviderType=n=>Un.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ye.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ye.setCaipAddress(n,r),n&&be.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ye.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ye.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ye.setProfileImage(n,r)},this.setUser=(n,r)=>{Ye.setUser(n,r)},this.resetAccount=n=>{Ye.resetAccount(n)},this.setCaipNetwork=n=>{H.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{H.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ye.setAllAccounts(n,r),be.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ye.setStatus(n,r),je.isConnected()?Qe.setConnectionStatus("connected"):Qe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>H.getAccountProp("address",n),this.setConnectors=n=>{const r=[...je.state.allConnectors,...n];je.setConnectors(r)},this.setConnections=(n,r)=>{gt.setConnections(n,r)},this.fetchIdentity=n=>pt.fetchIdentity(n),this.getReownName=n=>AE.getNamesForAddress(n),this.getConnectors=()=>je.getConnectors(),this.getConnectorImage=n=>bJ.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Un.getProviderId(r),i=n?{...n,type:s}:void 0;Ye.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!H.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ye.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ye.removeAddressLabel(n,r)},this.getAddress=n=>H.state.activeChain===n||!n?Ye.state.address:H.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>H.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{H.resetNetwork(n)},this.addConnector=n=>{je.addConnector(n)},this.resetWcConnection=()=>{gt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ye.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ye.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{H.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ye.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{be.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await q4e.fetchRemoteFeatures(e),be.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&u3.setOnrampProviders(this.remoteFeatures.onramp),((n=be.state.remoteFeatures)!=null&&n.email||Array.isArray((r=be.state.remoteFeatures)==null?void 0:r.socials)&&((s=be.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await ct.fetchAllowedOrigins();if(e&&at.isClient()){const n=window.location.origin;JS.isOriginAllowed(n,e,Hv.DEFAULT_ALLOWED_ANCESTORS)||Ll.open(Tl.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Ll.open(Tl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,yr.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&lo.setThemeMode(e.themeMode),e.themeVariables&&lo.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");H.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&H.setActiveCaipNetwork(n)}initializeConnectionController(e){gt.setWcBasic(e.basic??!1)}initializeConnectorController(){je.initialize(this.chainNamespaces)}initializeProjectSettings(e){be.setProjectId(e.projectId),be.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;be.setDebug(e.debug!==!1),be.setEnableWalletConnect(e.enableWalletConnect!==!1),be.setEnableWalletGuide(e.enableWalletGuide!==!1),be.setEnableWallets(e.enableWallets!==!1),be.setEIP6963Enabled(e.enableEIP6963!==!1),be.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),be.setEnableAuthLogger(e.enableAuthLogger!==!1),be.setCustomRpcUrls(e.customRpcUrls),be.setEnableEmbedded(e.enableEmbedded),be.setAllWallets(e.allWallets),be.setIncludeWalletIds(e.includeWalletIds),be.setExcludeWalletIds(e.excludeWalletIds),be.setFeaturedWalletIds(e.featuredWalletIds),be.setTokens(e.tokens),be.setTermsConditionsUrl(e.termsConditionsUrl),be.setPrivacyPolicyUrl(e.privacyPolicyUrl),be.setCustomWallets(e.customWallets),be.setFeatures(e.features),be.setAllowUnsupportedChain(e.allowUnsupportedChain),be.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),be.setPreferUniversalLinks(e.experimental_preferUniversalLinks),be.setDefaultAccountTypes(e.defaultAccountTypes);const n=Qe.getPreferredAccountTypes()||{},r={...be.state.defaultAccountTypes,...n};Ye.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),be.setMetadata(e.metadata),be.setDisableAppend(e.disableAppend),be.setEnableEmbedded(e.enableEmbedded),be.setSIWX(e.siwx),!e.projectId){Ll.open(Tl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===We.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");be.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return at.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=my.getUnsupportedNetwork(`${n}:${e}`);H.setActiveCaipNetwork(r)}}getDefaultNetwork(){return my.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return my.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return my.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?my.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Un.getProvider(e),s=Un.getProviderId(e),{caipAddress:i}=H.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Qe.removeConnectedNamespace(e),Un.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),je.removeConnectorId(e),H.resetAccount(e),H.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=H.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Qe.setConnectedNamespaces([...H.state.chains.keys()]),this.chainNamespaces.forEach(o=>{je.setConnectorId(uo.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,y,b,v,A;const c=H.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const _=this.getCaipNetworks().find(I=>I.chainNamespace===i);_&&this.setCaipNetwork(_)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:y[0])||((A=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:A[0])});if(!h)return;Qe.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ye.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=H.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Qe.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=VPe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));En.resetSend(),gt.resetWcConnection(),await IE.clearSessions(),je.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Qe.deleteConnectedSocialProvider(),yr.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(H.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ye.state.address,provider:Un.getProvider(H.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Bn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(H.state.activeChain),s=Un.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===We.CHAIN.EVM){const n=this.getAdapter(H.state.activeChain),r=Un.getProvider(H.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ye.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:H.state.activeChain}),Ye.state.profileImage||!1},getEnsAddress:async e=>await JS.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(H.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Un.getProvider(H.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(H.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(H.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(H.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ye.state.address||this.updateNativeBalance(Ye.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},gt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Un.getProviderId(H.state.activeChain)===uo.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Un.getProvider(n),i=Un.getProviderId(n);if(e.chainNamespace===H.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===uo.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=kd.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new H4e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Qe.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Qe.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=H.state.activeChain===e,c=H.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ye.state.address,i=H.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=H.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=H.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=H.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===We.CHAIN.EVM&&at.isSafeApp()&&je.setConnectorId(We.CONNECTOR_ID.SAFE,e);const n=je.getConnectorId(e);switch(this.setStatus("connecting",e),n){case We.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case We.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=je.getConnectorId(e),s=this.getCaipNetwork(e),o=je.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([at.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=H.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=kd.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=kd.validateCaipAddress(o),{chainId:f,address:p}=kd.parseCaipAddress(h);if(Un.setProviderId(n,uo.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&H.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==We.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:H.state.activeCaipNetwork});Un.setProvider(n,g)}else Un.setProvider(n,this.universalProvider);je.setConnectorId(We.CONNECTOR_ID.WALLET_CONNECT,n),Qe.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await H.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=kd.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>at.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Un.setProviderId(s,e),Un.setProvider(s,n),je.setConnectorId(r,s)}async syncAllAccounts(e){const n=je.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===H.state.activeChain,r=H.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Qe.getActiveNetworkProps(),c=i||a,l=((d=H.state.activeCaipNetwork)==null?void 0:d.name)===We.UNSUPPORTED_NETWORK_NAME,u=H.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(v=>{var A;return((A=kd.parseCaipNetworkId(v))==null?void 0:A.chainId)===c.toString()}),b=w.find(v=>{var A;return((A=kd.parseCaipNetworkId(v))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===y),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===H.state.activeChain?be.state.enableNetworkSwitch&&!be.state.allowUnsupportedChain&&((h=H.state.activeCaipNetwork)==null?void 0:h.name)===We.UNSUPPORTED_NETWORK_NAME?H.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),DT.isLowerCaseMatch(s,Ye.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=je.getConnectorId(e),r=Un.getProviderId(e);if(r===uo.CONNECTOR_TYPE_ANNOUNCED||r===uo.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===uo.CONNECTOR_TYPE_WALLET_CONNECT){const i=Un.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===We.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===We.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!gJ.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=H.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=QPe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};be.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await E4e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{gt.setUri(e)}),this.universalProvider.on("connect",gt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),gt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(JS.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&at.isCaipAddress(r[0])&&this.syncAccount(kd.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&at.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){yr.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Tl.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Tl.ALERT_ERRORS[o];a&&(Ll.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&gt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return _s.open({...e,data:{swap:e.arguments}})}return _s.open(e)}async close(){await this.injectModalUi(),_s.close()}setLoading(e,n){_s.setLoading(e,n)}async disconnect(e){await gt.disconnect(e)}getSIWX(){return be.state.siwx}getError(){return""}getChainId(){var e;return(e=H.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Ll.open(Tl.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await H.switchActiveNetwork(n)}getWalletProvider(){return H.state.activeChain?Un.state.providers[H.state.activeChain]:null}getWalletProviderType(){return Un.getProviderId(H.state.activeChain)}subscribeProviders(e){return Un.subscribeProviders(e)}getThemeMode(){return lo.state.themeMode}getThemeVariables(){return lo.state.themeVariables}setThemeMode(e){lo.setThemeMode(e),yee(lo.state.themeMode)}setTermsConditionsUrl(e){be.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){be.setPrivacyPolicyUrl(e)}setThemeVariables(e){lo.setThemeVariables(e),F4e(lo.state.themeVariables)}subscribeTheme(e){return lo.subscribe(e)}getWalletInfo(){return Ye.state.connectedWalletInfo}getAccount(e){var o;const n=je.getAuthConnector(e),r=H.getAccountData(e),s=H.state.activeChain,i=Qe.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:at.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===We.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Qe.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?H.subscribeChainProp("accountState",r,n):H.subscribe(r),je.subscribe(r)}subscribeNetwork(e){return H.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Ye.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ye.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){H.subscribeKey("activeCaipNetwork",e)}getState(){return Gl.state}subscribeState(e){return Gl.subscribe(e)}showErrorMessage(e){Oc.showError(e)}showSuccessMessage(e){Oc.showSuccess(e)}getEvent(){return{...yr.state}}subscribeEvents(e){return yr.subscribe(e)}replace(e){Wt.replace(e)}redirect(e){Wt.push(e)}popTransactionStack(e){Wt.popTransactionStack(e)}isOpen(){return _s.state.open}isTransactionStackEmpty(){return Wt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){be.setFeatures(e)}updateRemoteFeatures(e){be.setRemoteFeatures(e)}updateOptions(e){const r={...be.state||{},...e};be.setOptions(r)}setConnectMethodsOrder(e){be.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){be.setWalletFeaturesOrder(e)}setCollapseWallets(e){be.setCollapseWallets(e)}setSocialsOrder(e){be.setSocialsOrder(e)}getConnectMethodsOrder(){return i5.getConnectOrderMethod(be.state.features,je.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||H.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&H.removeNetwork(e,n)}}let h7=!1;class K4e extends V4e{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Ko.checkIfRequestExists(n)?Ko.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Gs.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Gs.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Ko.checkIfRequestIsSafe(r),i=Ye.state.address,o=H.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=H.state.activeChain;je.getConnectorId(n)===We.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=H.state.activeChain,s=r===We.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=be.state.defaultAccountTypes[r],o=(l=Ye.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;DT.isLowerCaseMatch(n.address,Ye.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ye.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>at.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[at.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ye.state.user||{},username:n},H.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,H.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,H.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=We.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Ye.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=lo.getSnapshot(),l=be.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Qu(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:We.CONNECTOR_ID.AUTH,info:{name:We.CONNECTOR_ID.AUTH},type:uo.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=H.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):je.getConnectorId(n)===We.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Qe.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!at.isTelegram())return;const r=Qe.getTelegramSocialProvider();if(!r||!at.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ye.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=je.getAuthConnector();r&&o&&(this.setLoading(!0,e),await gt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Qe.setConnectedSocialProvider(r),Qe.removeTelegramSocialProvider(),yr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!We.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=wke.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:Tl.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Ll.open(Tl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Ll.open(Tl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Ll.open(Tl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Gl.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&ct.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=H.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Un.getProvider(r),u=Un.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Un.getProviderId(n)===uo.CONNECTOR_TYPE_AUTH,u=Un.getProviderId(r),d=u===uo.CONNECTOR_TYPE_AUTH,h=We.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(H.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:We.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:uo.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===uo.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Gl.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==We.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Un.getProviderId(e);if(n===uo.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Qe.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(at.isClient()&&!h7)try{const e={...Bn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),at.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!be.state.disableAppend&&!be.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}h7=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!at.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(hi(()=>import("./embedded-wallet-ChPJ8VxQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(hi(()=>import("./email-DRzGxNKH.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(hi(()=>import("./socials-DiHqeHgA.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(hi(()=>import("./swaps-B07cUlLA.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(hi(()=>import("./send-BBO5Ae80.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(hi(()=>import("./receive-CJyZUYgV.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(hi(()=>import("./onramp-B_DfNwPr.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(hi(()=>import("./transactions-1D3-embY.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(hi(()=>import("./index-CK2kkLG5.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,hi(()=>import("./index-DzZyclOG.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),hi(()=>import("./w3m-modal-CfCTB779.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Yd;function vee(t){t&&(Yd=t)}function O1(){if(!Yd)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Yd==null?void 0:Yd.open(n))}async function e(){await(Yd==null?void 0:Yd.close())}return{open:t,close:e}}const Y4e="1.7.8";let tS;function Q4e(t){return tS||(tS=new K4e({...t,sdkVersion:at.generateSdkVersion(t.adapters??[],"react",Y4e)}),vee(tS)),tS}const J4e=Kc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),f7=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Z4e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=J4e({isOpen:t}),{open:i}=O1(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,w]=D.useState(1),[y,b]=D.useState(1),[v,A]=D.useState(0),[_,I]=D.useState(null),[x,N]=D.useState(f7[0]),[S,O]=D.useState(!1),[P,F]=D.useState(null),G=D.useCallback(async()=>{var M,W;try{if((M=window.solana)!=null&&M.isPhantom){const K=await window.solana.connect();F(K.publicKey.toString());return}if((W=window.solflare)!=null&&W.isSolflare){const K=await window.solflare.connect();F(K.publicKey.toString());return}i()}catch(K){console.error("Failed to connect Solana wallet:",K),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}O(!1)},[i]);D.useEffect(()=>{var M,W;(M=window.solana)!=null&&M.publicKey?F(window.solana.publicKey.toString()):(W=window.solflare)!=null&&W.publicKey&&F(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var W;u(!0),h(null);try{let K,ne=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!P){O(!0),u(!1);return}ne=P||void 0,K=await aK(x.slug,50),console.log("Fetched Solana NFTs from collection:",K.data.length),f==="owned"&&P&&(console.log("Filtering for owner:",P),console.log("Sample NFT owner data:",(W=K.data[0])==null?void 0:W.owners),console.log("All NFTs owner data:",K.data.map(oe=>({name:oe.name,owners:oe.owners,owner_of:oe.owner_of}))),K.data.some(oe=>oe.owners&&oe.owners.length>0)?(K.data=K.data.filter(oe=>{const ae=oe.owners.some(ue=>ue.owner_of&&ue.owner_of.toLowerCase()===P.toLowerCase());return ae&&console.log("Found owned NFT:",oe.name),ae}),console.log("NFTs after filtering:",K.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?K=await BL(x.slug,50,ne):K=await $L(x.slug,g,50,ne);c(K.data),b(K.totalPages),A(K.totalCount)}catch(K){K instanceof Error?h(K.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,P]),D.useEffect(()=>{S&&G()},[S,G]);const B=M=>new Date(M).toLocaleDateString(),T=M=>x.api==="opensea-solana"?M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"Owner data unavailable":M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"N/A",R=()=>{n&&n()},$=async M=>{if(x.api==="opensea"&&x.chain)try{const W=await oK(x.chain,M.address,M.token_id.toString()),K={...M,attributes:JSON.stringify(W.traits||[])};I(K)}catch(W){console.error("Failed to fetch full NFT details",W),I(M)}else I(M)},k=M=>{N(M),w(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(X_,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:R,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:s.collectionSelector,children:f7.map(M=>m.jsx("button",{className:`${s.collectionButton} ${x.slug===M.slug?"active":""}`,onClick:()=>k(M),children:M.name},M.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!P,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||P?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||P?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{G()},style:{background:P?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:P?"white":"black",marginLeft:"auto"},children:P?`Solana: ${P.slice(0,4)}...${P.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!P&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(M=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{$(M)},children:[m.jsx(pJ,{src:fJ(M),alt:`NFT #${M.token_id}`,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",border:"1px solid #ccc",backgroundColor:"#f0f0f0"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",M.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",T(M)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",B(M.created_at)]})]},M.id))}),f!=="recent"&&y>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),m.jsx("button",{onClick:()=>w(M=>Math.min(y,M+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),_&&m.jsx(pAe,{nft:_,onClose:()=>I(null)})]}):null};var nS,X4e=new Uint8Array(16);function eFe(){if(!nS&&(nS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!nS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nS(X4e)}const tFe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function nFe(t){return typeof t=="string"&&tFe.test(t)}var ks=[];for(var XO=0;XO<256;++XO)ks.push((XO+256).toString(16).substr(1));function rFe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ks[t[e+0]]+ks[t[e+1]]+ks[t[e+2]]+ks[t[e+3]]+"-"+ks[t[e+4]]+ks[t[e+5]]+"-"+ks[t[e+6]]+ks[t[e+7]]+"-"+ks[t[e+8]]+ks[t[e+9]]+"-"+ks[t[e+10]]+ks[t[e+11]]+ks[t[e+12]]+ks[t[e+13]]+ks[t[e+14]]+ks[t[e+15]]).toLowerCase();if(!nFe(n))throw TypeError("Stringified UUID is invalid");return n}function sFe(t,e,n){t=t||{};var r=t.random||(t.rng||eFe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,rFe(r)}const iFe=Kc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),oFe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],aFe=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],Oo=500;function Eee(){const t=iFe(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(50),[u,d]=D.useState(50),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[w,y]=D.useState(!1),[b,v]=D.useState(!1),[A,_]=D.useState(!1),[I,x]=D.useState([]),[N,S]=D.useState(null),O=D.useRef(null),[P,F]=D.useState(null),G=async X=>{const ce=X.getContext("2d");if(!ce)return;ce.clearRect(0,0,X.width,X.height),n?await new Promise(ge=>{const ve=new window.Image;ve.crossOrigin="anonymous",ve.onload=()=>{const Xe=Math.min(X.width/ve.width,X.height/ve.height),st=(X.width-ve.width*Xe)/2,At=(X.height-ve.height*Xe)/2;ce.drawImage(ve,st,At,ve.width*Xe,ve.height*Xe),ge()},ve.onerror=()=>ge(),ve.src=n}):(ce.fillStyle="#333",ce.fillRect(0,0,X.width,X.height)),(ge=>{ge.textAlign="center",ge.strokeStyle="black",ge.lineWidth=3,ge.fillStyle="white";const ve=(Xe,st)=>{const At=Xe.toUpperCase().split(" "),Ct=[];let Vn=At[0];for(let Rt=1;Rt<At.length;Rt++){const Gr=At[Rt];ge.measureText(Vn+" "+Gr).width<st?Vn+=" "+Gr:(Ct.push(Vn),Vn=Gr)}return Ct.push(Vn),Ct};if(s&&(ge.font=`${c}px Impact`,ve(s,Oo-20).forEach((st,At)=>{const Ct=c+At*c*1.2;ge.strokeText(st,Oo/2,Ct),ge.fillText(st,Oo/2,Ct)})),o){ge.font=`${u}px Impact`;const Xe=ve(o,Oo-20);Xe.forEach((st,At)=>{const Ct=Oo-(Xe.length-At)*u*1.2+u;ge.strokeText(st,Oo/2,Ct),ge.fillText(st,Oo/2,Ct)})}})(ce),await Promise.all(I.map(ge=>new Promise(ve=>{const Xe=new window.Image;Xe.src=ge.src,Xe.onload=()=>{ce.save(),ce.translate(ge.x,ge.y),ce.rotate(ge.rotation*Math.PI/180),ce.scale(ge.scale,ge.scale),ce.drawImage(Xe,-40,-40,80,80),ce.restore(),ve()},Xe.onerror=()=>ve()})));try{h&&B(X),p&&T(X),w&&R(X)}catch(ge){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",ge),f(!1),g(!1),y(!1)}},B=X=>{const ce=X.getContext("2d");if(!ce)return;const Ee=ce.getImageData(0,0,X.width,X.height),ge=Ee.data;for(let ve=0;ve<ge.length;ve+=4){const Xe=ge[ve],st=ge[ve+1],At=ge[ve+2],Ct=(Xe+st+At)/3,Vn=1.8;ge[ve]=Math.min(255,Ct+(Xe-Ct)*Vn),ge[ve+1]=Math.min(255,Ct+(st-Ct)*Vn*.7),ge[ve+2]=Math.min(255,Ct+(At-Ct)*Vn*.4);const Rt=1.3;ge[ve]=Math.min(255,Math.max(0,ge[ve]*Rt)),ge[ve+1]=Math.min(255,Math.max(0,ge[ve+1]*Rt)),ge[ve+2]=Math.min(255,Math.max(0,ge[ve+2]*Rt))}ce.putImageData(Ee,0,0)},T=X=>{const ce=X.getContext("2d");if(!ce)return;const Ee=4,ve=ce.getImageData(0,0,X.width,X.height).data,Xe=new Uint8ClampedArray(ve);for(let st=0;st<X.height;st+=Ee)for(let At=0;At<X.width;At+=Ee){const Ct=(st*X.width+At)*4,Vn=ve[Ct],Rt=ve[Ct+1],Gr=ve[Ct+2],Bt=ve[Ct+3];for(let zn=0;zn<Ee&&st+zn<X.height;zn++)for(let Sr=0;Sr<Ee&&At+Sr<X.width;Sr++){const Gi=((st+zn)*X.width+(At+Sr))*4;Xe[Gi]=Vn,Xe[Gi+1]=Rt,Xe[Gi+2]=Gr,Xe[Gi+3]=Bt}}ce.putImageData(new ImageData(Xe,X.width,X.height),0,0)},R=X=>{const ce=X.getContext("2d");if(!ce)return;const Ee=ce.getImageData(0,0,X.width,X.height),ge=Ee.data;for(let ve=0;ve<ge.length;ve+=4){const Xe=(Math.random()-.5)*50;ge[ve]=Math.max(0,Math.min(255,ge[ve]+Xe)),ge[ve+1]=Math.max(0,Math.min(255,ge[ve+1]+Xe)),ge[ve+2]=Math.max(0,Math.min(255,ge[ve+2]+Xe))}ce.putImageData(Ee,0,0)};D.useEffect(()=>{e.current&&G(e.current)},[G]);const $=D.useRef(null),k=500,M=X=>{X.preventDefault(),$.current=setTimeout(()=>{const ce=e.current;ce&&(navigator.share?ce.toBlob(Ee=>{if(Ee){const ge=new File([Ee],"meme.png",{type:"image/png"});navigator.share({title:"Lawb Meme",text:"Check out this meme I made!",files:[ge]}).catch(()=>{ae()})}}):ae())},k)},W=()=>{$.current&&(clearTimeout($.current),$.current=null)},K=()=>{$.current&&(clearTimeout($.current),$.current=null)},ne=X=>{X.preventDefault()},le=X=>{var Ee;const ce=(Ee=X.target.files)==null?void 0:Ee[0];ce&&r(URL.createObjectURL(ce))},oe=()=>{r(null),i(""),a(""),l(50),d(50),f(!1),g(!1),y(!1)},ae=async()=>{const X=e.current;if(!X)return;await G(X);const ce=document.createElement("a");ce.download="meme.png",ce.href=X.toDataURL("image/png"),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},ue=async X=>{_(!0),v(!1);try{console.log("Fetching NFTs for collection:",X);let ce;if(X.api==="opensea"){console.log("Using OpenSea API for:",X.slug);const Ee=await BL(X.slug,50);ce=Ee.data,console.log("OpenSea response:",Ee)}else if(X.api==="opensea-solana"){console.log("Using Helius API for Solana collection:",X.slug);const Ee=await aK(X.slug,50);if(ce=Ee.data,console.log("Helius Solana response:",Ee),!ce||ce.length===0){alert("No NFTs found in this Solana collection. Try uploading your own image or use other collections.");return}}else{console.log("Using Scatter API for:",X.slug);const Ee=await $L(X.slug,1,50);ce=Ee.data,console.log("Scatter response:",Ee)}if(ce&&ce.length>0){const Ee=ce[Math.floor(Math.random()*ce.length)],ge=Ee.image||Ee.image_url||Ee.image_url_shrunk;console.log("Selected NFT:",Ee),console.log("Image URL:",ge),r(ge)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ce){console.error("Error fetching NFTs:",ce),alert("Failed to fetch NFT images. Check console for details.")}finally{_(!1)}},et=X=>{const ce={id:sFe(),src:X,x:80,y:80,scale:1,rotation:0};x(Ee=>Ee.length>=2||Ee.some(ge=>ge.src===X&&!ge.id.startsWith("upload-"))?Ee:[...Ee,ce]),F(ce.id)},Se=X=>{var Ee;const ce=(Ee=X.target.files)==null?void 0:Ee[0];if(ce){const ge=URL.createObjectURL(ce);et(ge)}},Me=(X,ce,Ee)=>{x(ge=>ge.map(ve=>{if(ve.id!==X)return ve;let Xe=ve.x+ce/1.2,st=ve.y+Ee/1.2;const At=40*ve.scale,Ct=40*ve.scale;return Xe=Math.max(At,Math.min(Oo-At,Xe)),st=Math.max(Ct,Math.min(Oo-Ct,st)),{...ve,x:Xe,y:st}}))},rt=(X,ce,Ee,ge,ve)=>{x(Xe=>Xe.map(st=>{if(st.id!==X)return st;const At=st.x,Ct=st.y,Vn=Math.atan2(ve-Ct,ge-At)*180/Math.PI;return{...st,rotation:Ee+(Vn-ce)*.5}}))},Tt=X=>{x(ce=>ce.filter(Ee=>Ee.id!==X))},Jt=(X,ce)=>{x(Ee=>Ee.map(ge=>ge.id===X?{...ge,scale:Math.max(.2,ge.scale*(1+(ce-1)*.2))}:ge))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>v(X=>!X),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:oFe.map(X=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{ue(X)},children:X.name},X.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:le})]}),A&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:X=>i(X.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:X=>l(Number(X.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:X=>a(X.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:X=>d(Number(X.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(X=>!X),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(X=>!X),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(X=>!X),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[aFe.map((X,ce)=>m.jsx("img",{src:X,alt:`sticker${ce+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>et(X)},X)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:O,onChange:Se})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:ae,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:oe,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:Oo,height:Oo,className:t.canvas,onTouchStart:M,onTouchEnd:W,onTouchMove:K,onContextMenu:ne,style:{touchAction:"none"}})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:Oo,height:Oo,pointerEvents:"none"},children:I.map(X=>P===X.id?m.jsxs("div",{style:{position:"absolute",left:X.x,top:X.y,width:80*X.scale,height:80*X.scale,transform:`rotate(${X.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ce=>{S(X.id),ce.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:ce=>{N===X.id&&ce.buttons===1&&Me(X.id,ce.movementX,ce.movementY)},children:[m.jsx("img",{src:X.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ce=>{var Vn;ce.stopPropagation();const Ee=(Vn=ce.currentTarget.parentElement)==null?void 0:Vn.getBoundingClientRect(),ge=Ee?Ee.left+Ee.width/2:0,ve=Ee?Ee.top+Ee.height/2:0,Xe=Math.atan2(ce.clientY-ve,ce.clientX-ge)*180/Math.PI,st=X.rotation,At=Rt=>{rt(X.id,Xe,st,Rt.clientX,Rt.clientY)},Ct=()=>{window.removeEventListener("mousemove",At),window.removeEventListener("mouseup",Ct)};window.addEventListener("mousemove",At),window.addEventListener("mouseup",Ct)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ce=>{ce.stopPropagation();const Ee=ce.clientX,ge=Xe=>{const st=(Xe.clientX-Ee)/80;Jt(X.id,1+st)},ve=()=>{window.removeEventListener("mousemove",ge),window.removeEventListener("mouseup",ve)};window.addEventListener("mousemove",ge),window.addEventListener("mouseup",ve)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>Tt(X.id),children:"×"}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>F(null),children:"Place"})]},X.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c_(){return c_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c_.apply(this,arguments)}var jh;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(jh||(jh={}));const p7="popstate";function cFe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return a5("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:_ee(s)}return uFe(e,n,null,t)}function cs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cee(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function lFe(){return Math.random().toString(36).substr(2,8)}function g7(t,e){return{usr:t.state,key:t.key,idx:e}}function a5(t,e,n,r){return n===void 0&&(n=null),c_({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ob(e):e,{state:n,key:e&&e.key||r||lFe()})}function _ee(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ob(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function uFe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=jh.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(c_({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=jh.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function h(w,y){a=jh.Push;let b=a5(g.location,w,y);l=u()+1;let v=g7(b,l),A=g.createHref(b);try{o.pushState(v,"",A)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,y){a=jh.Replace;let b=a5(g.location,w,y);l=u();let v=g7(b,l),A=g.createHref(b);o.replaceState(v,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:_ee(w);return b=b.replace(/ $/,"%20"),cs(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(p7,d),c=w,()=>{s.removeEventListener(p7,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var m7;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(m7||(m7={}));function dFe(t,e,n){return n===void 0&&(n="/"),hFe(t,e,n)}function hFe(t,e,n,r){let s=typeof e=="string"?Ob(e):e,i=xee(s.pathname||"/",n);if(i==null)return null;let o=Aee(t);fFe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=SFe(i);a=CFe(o[c],l)}return a}function Aee(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(cs(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Eg([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(cs(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Aee(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:vFe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of See(i.path))s(i,o,c)}),e}function See(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=See(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function fFe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:EFe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const pFe=/^:[\w-]+$/,gFe=3,mFe=2,yFe=1,wFe=10,bFe=-2,y7=t=>t==="*";function vFe(t,e){let n=t.split("/"),r=n.length;return n.some(y7)&&(r+=bFe),e&&(r+=mFe),n.filter(s=>!y7(s)).reduce((s,i)=>s+(pFe.test(i)?gFe:i===""?yFe:wFe),r)}function EFe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function CFe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=_Fe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Eg([i,d.pathname]),pathnameBase:PFe(Eg([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Eg([i,d.pathnameBase]))}return o}function _Fe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=AFe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function AFe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Cee(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function SFe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cee(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xee(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function xFe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ob(t):t;return{pathname:n?n.startsWith("/")?n:IFe(n,e):e,search:OFe(r),hash:kFe(s)}}function IFe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function e2(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NFe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function TFe(t,e){let n=NFe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function RFe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ob(t):(s=c_({},t),cs(!s.pathname||!s.pathname.includes("?"),e2("?","pathname","search",s)),cs(!s.pathname||!s.pathname.includes("#"),e2("#","pathname","hash",s)),cs(!s.search||!s.search.includes("#"),e2("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=xFe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Eg=t=>t.join("/").replace(/\/\/+/g,"/"),PFe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),OFe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kFe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function DFe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Iee=["post","put","patch","delete"];new Set(Iee);const MFe=["get",...Iee];new Set(MFe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function l_(){return l_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l_.apply(this,arguments)}const i$=D.createContext(null),LFe=D.createContext(null),qT=D.createContext(null),VT=D.createContext(null),kb=D.createContext({outlet:null,matches:[],isDataRoute:!1}),Nee=D.createContext(null);function KT(){return D.useContext(VT)!=null}function Tee(){return KT()||cs(!1),D.useContext(VT).location}function Ree(t){D.useContext(qT).static||D.useLayoutEffect(t)}function UFe(){let{isDataRoute:t}=D.useContext(kb);return t?QFe():$Fe()}function $Fe(){KT()||cs(!1);let t=D.useContext(i$),{basename:e,future:n,navigator:r}=D.useContext(qT),{matches:s}=D.useContext(kb),{pathname:i}=Tee(),o=JSON.stringify(TFe(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return Ree(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=RFe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Eg([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function BFe(t,e){return FFe(t,e)}function FFe(t,e,n,r){KT()||cs(!1);let{navigator:s}=D.useContext(qT),{matches:i}=D.useContext(kb),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=Tee(),u;if(e){var d;let w=typeof e=="string"?Ob(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||cs(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=dFe(t,{pathname:f}),g=GFe(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Eg([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Eg([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?D.createElement(VT.Provider,{value:{location:l_({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:jh.Pop}},g):g}function jFe(){let t=YFe(),e=DFe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const WFe=D.createElement(jFe,null);class zFe extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(kb.Provider,{value:this.props.routeContext},D.createElement(Nee.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HFe(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(i$);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(kb.Provider,{value:e},r)}function GFe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||cs(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||WFe,c&&(l<0&&h===0?(JFe("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=w:d.route.Component?v=D.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,D.createElement(HFe,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(zFe,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var Pee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Pee||{}),Oee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Oee||{});function qFe(t){let e=D.useContext(i$);return e||cs(!1),e}function VFe(t){let e=D.useContext(LFe);return e||cs(!1),e}function KFe(t){let e=D.useContext(kb);return e||cs(!1),e}function kee(t){let e=KFe(),n=e.matches[e.matches.length-1];return n.route.id||cs(!1),n.route.id}function YFe(){var t;let e=D.useContext(Nee),n=VFe(),r=kee();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function QFe(){let{router:t}=qFe(Pee.UseNavigateStable),e=kee(Oee.UseNavigateStable),n=D.useRef(!1);return Ree(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,l_({fromRouteId:e},i)))},[t,e])}const w7={};function JFe(t,e,n){w7[t]||(w7[t]=!0)}function ZFe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ZS(t){cs(!1)}function XFe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=jh.Pop,navigator:i,static:o=!1,future:a}=t;KT()&&cs(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:l_({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Ob(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let w=xee(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(qT.Provider,{value:l},D.createElement(VT.Provider,{children:n,value:g}))}function eje(t){let{children:e,location:n}=t;return BFe(c5(e),n)}new Promise(()=>{});function c5(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,c5(r.props.children,i));return}r.type!==ZS&&cs(!1),!r.props.index||!r.props.children||cs(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=c5(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const tje="6";try{window.__reactRouterVersion=tje}catch{}const nje="startTransition",b7=Sre[nje];function rje(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=cFe({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&b7?b7(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>ZFe(r),[r]),D.createElement(XFe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var v7;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(v7||(v7={}));var E7;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(E7||(E7={}));const sje=Kc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function ije(){const t=sje(),{open:e}=O1(),{address:n,isConnected:r}=Cb(),s=Xa(),[i,o]=D.useState("pixelawbs-popup"),[a,c]=D.useState(new Set),[l,u]=D.useState(!1),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,w]=D.useState(!1),y=UFe();D.useEffect(()=>{if(g){const B=setTimeout(()=>{console.log("[CHESS] Loading timeout reached, navigating directly"),w(!1),y("/chess")},5e3);return()=>clearTimeout(B)}},[g,y]);const b=D.useRef(null);D.useEffect(()=>{if(i==="halloween-popup"&&b.current){const B=b.current.querySelector("script[data-tiktok-embed]");B&&B.remove();const T=document.createElement("script");T.src="https://www.tiktok.com/embed.js",T.async=!0,T.setAttribute("data-tiktok-embed","true"),b.current.appendChild(T)}},[i]);const v=(B,T,R)=>{if(B==="url"&&R)window.open(R,"_blank");else if(B==="popup"&&T)o(T),c($=>{const k=new Set($);return k.delete(T),k}),document.body.offsetWidth;else if(B==="wallet")r?console.log("Wallet disconnect requested"):e();else if(B==="mint"){if(!n){alert("Please connect your wallet first!");return}if(s!==Qo.id){alert("Please switch to Ethereum mainnet to mint Pixelawbs. Current network: "+s);return}u(!0)}else B==="nft-gallery"?h(!0):B==="meme-generator"?p(!0):B==="chess"&&(console.log("[CHESS] Chess icon clicked, isConnected:",r),w(!0))},A=()=>o(null),_=B=>{c(T=>new Set(T).add(B)),o(null)},I=B=>{B==="mint-popup"?u(!0):B==="nft-gallery-popup"?h(!0):B==="meme-generator-popup"?p(!0):o(B),c(T=>{const R=new Set(T);return R.delete(B),R})},x=()=>u(!1),N=()=>h(!1),S=()=>p(!1),O=()=>{u(!1),c(B=>new Set(B).add("mint-popup"))},P=()=>{h(!1),c(B=>new Set(B).add("nft-gallery-popup"))},F=()=>{p(!1),c(B=>new Set(B).add("meme-generator-popup"))},G=m.jsxs("div",{onClick:()=>{r?console.log("Wallet disconnect requested"):e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),r?`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[g&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("video",{src:"/images/loadingchess.mp4",style:{width:120,height:120,marginBottom:32},autoPlay:!0,muted:!0,onEnded:()=>{w(!1),y("/chess")},onError:()=>{console.log("[CHESS] Video failed to load, navigating directly"),w(!1),y("/chess")}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(aye,{onIconClick:v}),m.jsx(lye,{minimizedWindows:Array.from(a),onRestoreWindow:I,walletButton:G,connectionStatus:{connected:r,address:n,ens:void 0}}),m.jsxs(Ca,{id:"chat-popup",isOpen:i==="chat-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Ca,{id:"purity-popup",isOpen:i==="purity-popup",onClose:A,onMinimize:_,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Ca,{id:"lawbstarz-popup",isOpen:i==="lawbstarz-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Ca,{id:"lawbstation-popup",isOpen:i==="lawbstation-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Ca,{id:"nexus-popup",isOpen:i==="nexus-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(Ca,{id:"lawbsters-popup",isOpen:i==="lawbsters-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(Rfe,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(Ca,{id:"pixelawbs-popup",isOpen:i==="pixelawbs-popup",onClose:A,onMinimize:_,children:(()=>{const B=T=>{T.preventDefault(),o(null),u(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:B,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(Ca,{id:"halloween-popup",isOpen:i==="halloween-popup",onClose:A,onMinimize:_,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:b,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),m.jsxs(Ca,{id:"lawb-popup",isOpen:i==="lawb-popup",onClose:A,onMinimize:_,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(dAe,{isOpen:l,onClose:x,onMinimize:O,walletAddress:n||""}),m.jsx(Z4e,{isOpen:d,onClose:N,onMinimize:P,walletAddress:n}),m.jsx(Ca,{id:"meme-generator-popup",isOpen:f,onClose:S,onMinimize:F,children:m.jsx(Eee,{})})]})}const oje=Kc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),C7=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],aje=({onBack:t,walletAddress:e})=>{const n=oje(),{open:r}=O1(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(C7[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[w,y]=D.useState("all"),[b,v]=D.useState(null),A=D.useCallback(async()=>{var N,S;try{if((N=window.solana)!=null&&N.isPhantom){const O=await window.solana.connect();g(O.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const O=await window.solflare.connect();g(O.publicKey.toString());return}r()}catch(O){console.error("Failed to connect Solana wallet:",O),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var N,S;(N=window.solana)!=null&&N.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let S,O=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}O=p,S=await uye(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await BL(u.slug,100,O):S=await $L(u.slug,1,100,O);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some(F=>F.owners&&F.owners.length>0)?S.data=S.data.filter(F=>F.owners.some(B=>B.owner_of&&B.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),D.useEffect(()=>{h&&A()},[h,A]);const _=async N=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await oK(u.chain,N.address,N.token_id.toString()),O={...N,attributes:JSON.stringify(S.traits||[])};l(O)}catch(S){console.error("Failed to fetch full NFT details",S),l(N)}else l(N);a(!1)},I=()=>{if(!c)return null;let N=[];try{N=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:N.map((S,O)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},O))})]})},x=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:C7.map(N=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===N.slug?"active":""}`,onClick:()=>d(N),children:N.name},N.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{A()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(N=>{let S=N.image||N.image_url||N.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void _(N),children:[m.jsx("img",{src:S,alt:N.name,onError:O=>{O.currentTarget.src!==N.image_url&&N.image_url?O.currentTarget.src=N.image_url:O.currentTarget.src!==N.image_url_shrunk&&N.image_url_shrunk?O.currentTarget.src=N.image_url_shrunk:O.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:N.name})]},N.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?I():x()})]})},cje=Kc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),fc=({isOpen:t,onClose:e,title:n,children:r})=>{const s=cje();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),m.jsx("div",{className:s.content,children:r})]})}):null},lje=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=lAe(),p=Xa(),{switchChain:g}=RU();D.useEffect(()=>{t&&n&&w()},[t,n]);const w=async()=>{if(o(!0),h(null),p!==Qo.id){h(`Please switch to Ethereum mainnet to mint Pixelawbs. Current network: ${p}`),o(!1);return}try{const I=await sK(n);s(I);const x={};I.forEach(N=>{x[N.id]=0}),u(x)}catch(I){h(I.message)}finally{o(!1)}},y=(I,x)=>{u(N=>({...N,[I]:Math.max(0,x)}))},b=async()=>{const I=Object.entries(l).filter(([,x])=>x>0).map(([x,N])=>({id:x,quantity:N}));if(I.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}if(p!==Qo.id){h("Please switch to Ethereum mainnet to mint Pixelawbs");return}c(!0),h(null);try{const x=await iK(n,I);if(x.success&&x.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const N=await f.sendTransaction({to:x.mintTransaction.to,value:BigInt(x.mintTransaction.value),data:x.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${N}`),e()}catch(N){h("Transaction failed: "+N.message)}}else throw new Error(x.message||"Could not retrieve minting transaction.")}catch(x){h("Minting failed: "+x.message)}finally{c(!1)}},v=(I,x)=>`${parseFloat(I)} ${x}`,A={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},_={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(fc,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsxs("div",{style:_,children:[d,p!==Qo.id&&m.jsx("div",{style:{marginTop:"10px"},children:m.jsx("button",{onClick:()=>g({chainId:Qo.id}),style:{backgroundColor:"#008000",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Switch to Ethereum"})})]}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(I=>m.jsxs("div",{style:A,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:I.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",v(I.token_price,I.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",I.wallet_limit===4294967295?"Unlimited":I.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:I.wallet_limit===4294967295?void 0:I.wallet_limit,value:l[I.id]||"",onChange:x=>y(I.id,parseInt(x.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},I.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:b,disabled:a,children:a?"Minting...":"Mint"})]})]})},uje=Kc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),dje=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],hje=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],fje=()=>{const t=uje(),{open:e}=O1(),{address:n,isConnected:r}=Cb(),{isPending:s}=sAe(),{disconnect:i}=oAe(),{data:o}=aAe({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),[v,A]=D.useState(!1),[_,I]=D.useState(!1),[x,N]=D.useState(!1),[S,O]=D.useState(!1),[P,F]=D.useState(!1),[G,B]=D.useState(!1),[T,R]=D.useState(!1),[$,k]=D.useState(!1),[M,W]=D.useState(!1),K=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>A(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>I(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],ne=ae=>{ae.disabled||ae.action()};if(D.useEffect(()=>{const ae=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ae)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(aje,{onBack:()=>c("main"),walletAddress:n||void 0});function le({open:ae,onClose:ue,title:et,nfts:Se}){const Me=rt=>{switch(rt){case"lawbsters":N(!0);break;case"lawbstarz":O(!0);break;case"pixelawbs":F(!0);break;case"halloween":B(!0);break;case"lawbstation":R(!0);break;case"nexus":k(!0);break}};return m.jsx(fc,{isOpen:ae,onClose:ue,title:et,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:Se.map(rt=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>Me(rt.id),children:[m.jsx("img",{src:rt.image,alt:rt.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:rt.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:rt.description})]},rt.id))})})}function oe({open:ae,onClose:ue}){return ae?m.jsxs(fc,{isOpen:ae,onClose:ue,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:K.map(ae=>m.jsxs("div",{className:t.icon,onClick:()=>ne(ae),children:[m.jsx("img",{src:ae.icon,alt:ae.label}),m.jsx("span",{children:ae.label})]},ae.label))}),l&&m.jsxs(fc,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:ae=>ae.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),W(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(lje,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),m.jsx(le,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:dje}),m.jsx(le,{open:v,onClose:()=>A(!1),title:"SOL NFTS FOLDER",nfts:hje}),m.jsx(oe,{open:_,onClose:()=>I(!1)}),m.jsxs(fc,{isOpen:x,onClose:()=>N(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(fc,{isOpen:S,onClose:()=>O(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(fc,{isOpen:P,onClose:()=>F(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{F(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(fc,{isOpen:G,onClose:()=>B(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(fc,{isOpen:T,onClose:()=>R(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(fc,{isOpen:$,onClose:()=>k(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(fc,{isOpen:M,onClose:()=>W(!1),title:"Meme Generator",children:m.jsx(Eee,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function pje(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const $I={id:1992,name:"Sanko Testnet",network:"sanko-testnet",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://testnet.sankoscan.io"}}},BI={id:1996,name:"Sanko",network:"sanko",nativeCurrency:{decimals:18,name:"DMT",symbol:"DMT"},rpcUrls:{default:{http:["https://mainnet.sanko.xyz"]},public:{http:["https://mainnet.sanko.xyz"]}},blockExplorers:{default:{name:"SankoScan",url:"https://explorer.sanko.xyz"}}},gje=QQ({chains:[Qo,fI,$I,BI],transports:{[Qo.id]:Fa(),[fI.id]:Fa(),[$I.id]:Fa("https://sanko-arb-sepolia.rpc.caldera.xyz/http"),[BI.id]:Fa("https://mainnet.sanko.xyz")}}),o$=()=>{if(!Nx)throw new Error("[FIREBASE] Database not initialized");return Nx},Xg=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,FI=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=o$(),s=no(r,`leaderboard/${t}`),i=await hp(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await oE(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Xg(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},mje=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):e==="0x0000000000000000000000000000000000000000"||n==="0x0000000000000000000000000000000000000000"?(console.warn("[LEADERBOARD] Skipping leaderboard update - one or both players have zero addresses:",{bluePlayer:e,redPlayer:n}),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Xg(e),redPlayer:Xg(n)}),await FI(e,t==="blue"?"win":t==="red"?"loss":"draw"),await FI(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},Dee=async(t=20)=>{try{const e=o$(),n=no(e,"leaderboard"),r=await hp(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Mee=async()=>{try{const t=o$(),e=no(t,"leaderboard/0x0000000000000000000000000000000000000000");return await XH(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},uc=()=>{if(!Nx)throw new Error("[FIREBASE] Database not initialized");return Nx},ai={async getGame(t){try{const e=uc(),n=no(e,`chess_games/${t}`),r=await hp(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=uc(),r=no(n,`chess_games/${t}`);await mce(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=uc(),r=no(n,`chess_games/${t}`);return GB(r,i=>{if(i.exists()){const o=i.val();e(o)}})}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=uc(),r=no(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await oE(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await hp(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async createGameFromTransaction(t,e,n,r){try{const s=uc(),i=no(s,`chess_games/${t}`);let o="DMT";n==="0x754cDAd6f5821077d6915004Be2cE05f93d176f8"?o="DMT":n==="0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"?o="LAWB":n==="0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D"?o="GOLD":n==="0xeA240b96A9621e67159c59941B9d588eb290ef09"&&(o="MOSS");const a={invite_code:t,game_title:`Chess Game ${t.slice(-6)}`,bet_amount:r,bet_token:o,blue_player:e,red_player:"0x0000000000000000000000000000000000000000",game_state:"waiting",board:{positions:{"0,0":"R","0,1":"N","0,2":"B","0,3":"Q","0,4":"K","0,5":"B","0,6":"N","0,7":"R","1,0":"P","1,1":"P","1,2":"P","1,3":"P","1,4":"P","1,5":"P","1,6":"P","1,7":"P","6,0":"p","6,1":"p","6,2":"p","6,3":"p","6,4":"p","6,5":"p","6,6":"p","6,7":"p","7,0":"r","7,1":"n","7,2":"b","7,3":"q","7,4":"k","7,5":"b","7,6":"n","7,7":"r"},rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56",is_public:!0,created_at:new Date().toISOString()};return await oE(i,a),console.log("[FIREBASE] Game created from transaction:",t,"with token:",o),a}catch(s){throw console.error("[FIREBASE] Error creating game from transaction:",s),s}},async getActiveGames(){try{const t=uc(),e=no(t,"chess_games"),n=await hp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=uc(),e=no(t,"chess_games"),n=await hp(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r),console.log("[FIREBASE] Number of total games:",Object.keys(r||{}).length),r&&Object.keys(r).forEach(i=>{const o=r[i];console.log("[FIREBASE] Game details:",{inviteCode:o.invite_code,gameState:o.game_state,isPublic:o.is_public,redPlayer:o.red_player,bluePlayer:o.blue_player,createdAt:o.created_at})});const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting"||i.game_state==="active",a=i.is_public!==!1,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000",l=i.game_state==="waiting"||i.game_state==="active"||i.game_state===void 0;return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,originalIsPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,isPublic:a,noRedPlayer:c,hasValidState:l,passes:l&&a&&c}),l&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=uc(),n=no(e,`chess_games/${t}`);await XH(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=uc(),n=no(e,`leaderboard/${t.username}`);await oE(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=uc(),e=no(t,"leaderboard"),n=await hp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=uc(),n=no(e,"leaderboard");return GB(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},yje="6.15.0";function wje(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function xi(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function mt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&wje(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function jy(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>jy(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return jy(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${jy(r,e)}: ${jy(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Ws(t,e){return t&&t.code===e}function a$(t){return Ws(t,"CALL_EXCEPTION")}function pr(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${jy(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+jy(a))}}i.push(`code=${e}`),i.push(`version=${yje}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return mt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&mt(s,{shortMessage:r}),s}function ye(t,e,n,r){if(!t)throw pr(e,n,r)}function Z(t,e,n,r){ye(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Lee(t,e,n){n==null&&(n=""),n&&(n=": "+n),ye(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),ye(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function YT(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),ye(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Uee(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}Z(!1,"invalid BytesLike value",e||"value",t)}function Vt(t,e){return Uee(t,e,!1)}function Ri(t,e){return Uee(t,e,!0)}function ir(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function c$(t){return ir(t,!0)||t instanceof Uint8Array}const _7="0123456789abcdef";function De(t){const e=Vt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=_7[(s&240)>>4]+_7[s&15]}return n}function Lr(t){return"0x"+t.map(e=>De(e).substring(2)).join("")}function a0(t){return ir(t,!0)?(t.length-2)/2:Vt(t).length}function Pr(t,e,n){const r=Vt(t);return n!=null&&n>r.length&&ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),De(r.slice(e??0,n??r.length))}function $ee(t,e,n){const r=Vt(t);ye(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),De(s)}function wd(t,e){return $ee(t,e,!0)}function bje(t,e){return $ee(t,e,!1)}const QT=BigInt(0),kc=BigInt(1),Wy=9007199254740991;function vje(t,e){const n=JT(t,"value"),r=BigInt(Kt(e,"width"));if(ye(n>>r===QT,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-kc){const s=(kc<<r)-kc;return-((~n&s)+kc)}return n}function Bee(t,e){let n=Ze(t,"value");const r=BigInt(Kt(e,"width")),s=kc<<r-kc;if(n<QT){n=-n,ye(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(kc<<r)-kc;return(~n&i)+kc}else ye(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Gv(t,e){const n=JT(t,"value"),r=BigInt(Kt(e,"bits"));return n&(kc<<r)-kc}function Ze(t,e){switch(typeof t){case"bigint":return t;case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-Wy&&t<=Wy,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Z(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Z(!1,"invalid BigNumberish value",e||"value",t)}function JT(t,e){const n=Ze(t,e);return ye(n>=QT,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const A7="0123456789abcdef";function l$(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=A7[n>>4],e+=A7[n&15];return BigInt(e)}return Ze(t)}function Kt(t,e){switch(typeof t){case"bigint":return Z(t>=-Wy&&t<=Wy,"overflow",e||"value",t),Number(t);case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-Wy&&t<=Wy,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Kt(BigInt(t),e)}catch(n){Z(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Z(!1,"invalid numeric value",e||"value",t)}function Eje(t){return Kt(l$(t))}function Nf(t,e){let r=JT(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Kt(e,"width");for(ye(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function os(t){const e=JT(t,"value");if(e===QT)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function Nc(t){let e=De(c$(t)?t:os(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const S7="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const x7=BigInt(58);function Cje(t){const e=Vt(t);let n=l$(e),r="";for(;n;)r=S7[Number(n%x7)]+r,n/=x7;for(let s=0;s<e.length&&!e[s];s++)r=S7[0]+r;return r}function _je(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Vt(e)}function Aje(t){const e=Vt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var S0;class Fee{constructor(e,n,r){te(this,"filter");te(this,"emitter");Q(this,S0);L(this,S0,n),mt(this,{emitter:e,filter:r})}async removeListener(){C(this,S0)!=null&&await this.emitter.off(this.filter,C(this,S0))}}S0=new WeakMap;function Sje(t,e,n,r,s){Z(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function jee(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function xje(t,e,n,r,s){return t==="OVERLONG"?(Z(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),jee(t,e,n))}const Ije=Object.freeze({error:Sje,ignore:jee,replace:xje});function Nje(t,e){e==null&&(e=Ije.error);const n=Vt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function id(t,e){Z(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);Z(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function Tje(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function jI(t,e){return Tje(Nje(t,e))}function Wee(t){async function e(n,r){ye(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();ye(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ye(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=pr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=pr("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const Rje=12,Pje=250;let I7=Wee();const Oje=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),kje=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let t2=!1;async function zee(t,e){try{const n=t.match(Oje);if(!n)throw new Error("invalid data");return new gf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?_je(n[3]):Mje(n[3]))}catch{return new gf(599,"BAD REQUEST (invalid data: URI)",{},null,new Tf(t))}}function Hee(t){async function e(n,r){try{const s=n.match(kje);if(!s)throw new Error("invalid link");return new Tf(`${t}${s[2]}`)}catch{return new gf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Tf(n))}}return e}const rS={data:zee,ipfs:Hee("https://gateway.ipfs.io/ipfs/")},Gee=new WeakMap;var Kp,wh;class Dje{constructor(e){Q(this,Kp);Q(this,wh);L(this,Kp,[]),L(this,wh,!1),Gee.set(e,()=>{if(!C(this,wh)){L(this,wh,!0);for(const n of C(this,Kp))setTimeout(()=>{n()},0);L(this,Kp,[])}})}addListener(e){ye(!C(this,wh),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),C(this,Kp).push(e)}get cancelled(){return C(this,wh)}checkSignal(){ye(!this.cancelled,"cancelled","CANCELLED",{})}}Kp=new WeakMap,wh=new WeakMap;function sS(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var x0,I0,vc,Ou,N0,T0,gs,Fo,ku,Yp,Qp,Jp,wl,Ec,bh,Zp,qv;const nN=class nN{constructor(e){Q(this,Zp);Q(this,x0);Q(this,I0);Q(this,vc);Q(this,Ou);Q(this,N0);Q(this,T0);Q(this,gs);Q(this,Fo);Q(this,ku);Q(this,Yp);Q(this,Qp);Q(this,Jp);Q(this,wl);Q(this,Ec);Q(this,bh);L(this,T0,String(e)),L(this,x0,!1),L(this,I0,!0),L(this,vc,{}),L(this,Ou,""),L(this,N0,3e5),L(this,Ec,{slotInterval:Pje,maxAttempts:Rje}),L(this,bh,null)}get url(){return C(this,T0)}set url(e){L(this,T0,String(e))}get body(){return C(this,gs)==null?null:new Uint8Array(C(this,gs))}set body(e){if(e==null)L(this,gs,void 0),L(this,Fo,void 0);else if(typeof e=="string")L(this,gs,id(e)),L(this,Fo,"text/plain");else if(e instanceof Uint8Array)L(this,gs,e),L(this,Fo,"application/octet-stream");else if(typeof e=="object")L(this,gs,id(JSON.stringify(e))),L(this,Fo,"application/json");else throw new Error("invalid body")}hasBody(){return C(this,gs)!=null}get method(){return C(this,Ou)?C(this,Ou):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),L(this,Ou,String(e).toUpperCase())}get headers(){const e=Object.assign({},C(this,vc));return C(this,ku)&&(e.authorization=`Basic ${Aje(id(C(this,ku)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&C(this,Fo)&&(e["content-type"]=C(this,Fo)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){C(this,vc)[String(e).toLowerCase()]=String(n)}clearHeaders(){L(this,vc,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return C(this,ku)||null}setCredentials(e,n){Z(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),L(this,ku,`${e}:${n}`)}get allowGzip(){return C(this,I0)}set allowGzip(e){L(this,I0,!!e)}get allowInsecureAuthentication(){return!!C(this,x0)}set allowInsecureAuthentication(e){L(this,x0,!!e)}get timeout(){return C(this,N0)}set timeout(e){Z(e>=0,"timeout must be non-zero","timeout",e),L(this,N0,e)}get preflightFunc(){return C(this,Yp)||null}set preflightFunc(e){L(this,Yp,e)}get processFunc(){return C(this,Qp)||null}set processFunc(e){L(this,Qp,e)}get retryFunc(){return C(this,Jp)||null}set retryFunc(e){L(this,Jp,e)}get getUrlFunc(){return C(this,bh)||I7}set getUrlFunc(e){L(this,bh,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${C(this,gs)?De(C(this,gs)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(C(this,Ec).slotInterval=e.slotInterval),e.maxAttempts!=null&&(C(this,Ec).maxAttempts=e.maxAttempts)}send(){return ye(C(this,wl)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),L(this,wl,new Dje(this)),he(this,Zp,qv).call(this,0,N7()+this.timeout,0,this,new gf(0,"",{},null,this))}cancel(){ye(C(this,wl)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Gee.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();ye(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new nN(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,L(s,vc,Object.assign({},C(this,vc))),C(this,gs)&&L(s,gs,new Uint8Array(C(this,gs))),L(s,Fo,C(this,Fo)),s}clone(){const e=new nN(this.url);return L(e,Ou,C(this,Ou)),C(this,gs)&&L(e,gs,C(this,gs)),L(e,Fo,C(this,Fo)),L(e,vc,Object.assign({},C(this,vc))),L(e,ku,C(this,ku)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),L(e,Yp,C(this,Yp)),L(e,Qp,C(this,Qp)),L(e,Jp,C(this,Jp)),L(e,Ec,Object.assign({},C(this,Ec))),L(e,bh,C(this,bh)),e}static lockConfig(){t2=!0}static getGateway(e){return rS[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(t2)throw new Error("gateways locked");rS[e]=n}static registerGetUrl(e){if(t2)throw new Error("gateways locked");I7=e}static createGetUrlFunc(e){return Wee(e)}static createDataGateway(){return zee}static createIpfsGatewayFunc(e){return Hee(e)}};x0=new WeakMap,I0=new WeakMap,vc=new WeakMap,Ou=new WeakMap,N0=new WeakMap,T0=new WeakMap,gs=new WeakMap,Fo=new WeakMap,ku=new WeakMap,Yp=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,wl=new WeakMap,Ec=new WeakMap,bh=new WeakMap,Zp=new WeakSet,qv=async function(e,n,r,s,i){var u,d,h;if(e>=C(this,Ec).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ye(N7()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await Lje(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in rS){const f=await rS[a](o.url,sS(C(s,wl)));if(f instanceof gf){let p=f;if(this.processFunc){sS(C(s,wl));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,sS(C(s,wl)));let l=new gf(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return he(u=o.redirect(f),Zp,qv).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=C(this,Ec).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),he(d=o.clone(),Zp,qv).call(d,e+1,n,p,s,l)}if(this.processFunc){sS(C(s,wl));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=C(this,Ec).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),he(h=o.clone(),Zp,qv).call(h,e+1,n,p,s,l)}}return l};let Tf=nN;var I_,N_,T_,jo,R0,Xp;const P$=class P${constructor(e,n,r,s,i){Q(this,I_);Q(this,N_);Q(this,T_);Q(this,jo);Q(this,R0);Q(this,Xp);L(this,I_,e),L(this,N_,n),L(this,T_,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),L(this,jo,s==null?null:new Uint8Array(s)),L(this,R0,i||null),L(this,Xp,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${C(this,jo)?De(C(this,jo)):"null"}>`}get statusCode(){return C(this,I_)}get statusMessage(){return C(this,N_)}get headers(){return Object.assign({},C(this,T_))}get body(){return C(this,jo)==null?null:new Uint8Array(C(this,jo))}get bodyText(){try{return C(this,jo)==null?"":jI(C(this,jo))}catch{ye(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ye(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new P$(599,r,this.headers,this.body,C(this,R0)||void 0);return L(s,Xp,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:Z(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw mt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return C(this,jo)!=null}get request(){return C(this,R0)}ok(){return C(this,Xp).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=C(this,Xp);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{C(this,jo)&&(s=jI(C(this,jo)))}catch{}ye(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};I_=new WeakMap,N_=new WeakMap,T_=new WeakMap,jo=new WeakMap,R0=new WeakMap,Xp=new WeakMap;let gf=P$;function N7(){return new Date().getTime()}function Mje(t){return id(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function Lje(t){return new Promise(e=>setTimeout(e,t))}function Uje(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function T7(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function R7(t,e,n,r){const s=[];for(;n<e+1+r;){const i=qee(t,n);s.push(i.result),n+=i.consumed,ye(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function qee(t,e){ye(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{ye(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=T7(t,e+1,r);return n(e+1+r+s),R7(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),R7(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=T7(t,e+1,r);n(e+1+r+s);const i=De(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=De(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:Uje(t[e])}}function k1(t){const e=Vt(t,"data"),n=qee(e,0);return Z(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function P7(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Vee(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(Vee(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=P7(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Vt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=P7(e.length);return n.unshift(183+n.length),n.concat(e)}const O7="0123456789abcdef";function Rf(t){let e="0x";for(const n of Vee(t))e+=O7[n>>4],e+=O7[n&15];return e}const Oi=32,l5=new Uint8Array(Oi),$je=["then"],iS={},Kee=new WeakMap;function wp(t){return Kee.get(t)}function k7(t,e){Kee.set(t,e)}function Av(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function u5(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof Vw?u5(wp(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof Vw&&(o=u5(wp(o),o,n)),r[s]=o),r},{})}var P0;const zy=class zy extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==iS&&(s=n,i=[],o=!1);super(s.length);Q(this,P0);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(k7(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),L(this,P0,[]),C(this,P0)==null&&C(this,P0),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Kt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&Av(`index ${f}`,p),p}if($je.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return k7(c,wp(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&Av(`index ${i}`,s),n&&s instanceof zy&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=wp(this);return r.reduce((s,i,o)=>(ye(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),u5(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=wp(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new zy(iS,i,o)}filter(n,r){const s=wp(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&Av(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new zy(iS,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&Av(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=wp(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&Av(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new zy(iS,n,r)}};P0=new WeakMap;let Vw=zy;function D7(t){let e=os(t);return ye(e.length<=Oi,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Oi,offset:e.length}),e.length!==Oi&&(e=Ri(Lr([l5.slice(e.length%Oi),e]))),e}class Ad{constructor(e,n,r,s){te(this,"name");te(this,"type");te(this,"localName");te(this,"dynamic");mt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){Z(!1,e,this.localName,n)}}var Du,eg,O0,XS;class d5{constructor(){Q(this,O0);Q(this,Du);Q(this,eg);L(this,Du,[]),L(this,eg,0)}get data(){return Lr(C(this,Du))}get length(){return C(this,eg)}appendWriter(e){return he(this,O0,XS).call(this,Ri(e.data))}writeBytes(e){let n=Ri(e);const r=n.length%Oi;return r&&(n=Ri(Lr([n,l5.slice(r)]))),he(this,O0,XS).call(this,n)}writeValue(e){return he(this,O0,XS).call(this,D7(e))}writeUpdatableValue(){const e=C(this,Du).length;return C(this,Du).push(l5),L(this,eg,C(this,eg)+Oi),n=>{C(this,Du)[e]=D7(n)}}}Du=new WeakMap,eg=new WeakMap,O0=new WeakSet,XS=function(e){return C(this,Du).push(e),L(this,eg,C(this,eg)+e.length),e.length};var oo,Wo,tg,ng,vh,sm,f5,Yee;const O$=class O${constructor(e,n,r){Q(this,sm);te(this,"allowLoose");Q(this,oo);Q(this,Wo);Q(this,tg);Q(this,ng);Q(this,vh);mt(this,{allowLoose:!!n}),L(this,oo,Ri(e)),L(this,tg,0),L(this,ng,null),L(this,vh,r??1024),L(this,Wo,0)}get data(){return De(C(this,oo))}get dataLength(){return C(this,oo).length}get consumed(){return C(this,Wo)}get bytes(){return new Uint8Array(C(this,oo))}subReader(e){const n=new O$(C(this,oo).slice(C(this,Wo)+e),this.allowLoose,C(this,vh));return L(n,ng,this),n}readBytes(e,n){let r=he(this,sm,Yee).call(this,0,e,!!n);return he(this,sm,f5).call(this,e),L(this,Wo,C(this,Wo)+r.length),r.slice(0,e)}readValue(){return l$(this.readBytes(Oi))}readIndex(){return Eje(this.readBytes(Oi))}};oo=new WeakMap,Wo=new WeakMap,tg=new WeakMap,ng=new WeakMap,vh=new WeakMap,sm=new WeakSet,f5=function(e){var n;if(C(this,ng))return he(n=C(this,ng),sm,f5).call(n,e);L(this,tg,C(this,tg)+e),ye(C(this,vh)<1||C(this,tg)<=C(this,vh)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${C(this,vh)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Ri(C(this,oo)),offset:C(this,Wo),length:e,info:{bytesRead:C(this,tg),dataLength:this.dataLength}})},Yee=function(e,n,r){let s=Math.ceil(n/Oi)*Oi;return C(this,Wo)+s>C(this,oo).length&&(this.allowLoose&&r&&C(this,Wo)+n<=C(this,oo).length?s=n:ye(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Ri(C(this,oo)),length:C(this,oo).length,offset:C(this,Wo)+s})),C(this,oo).slice(C(this,Wo),C(this,Wo)+s)};let h5=O$;function WI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function u$(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Bje(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");WI(t.outputLen),WI(t.blockLen)}function Kw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Qee(t,e){u$(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const n2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Jee=t=>t instanceof Uint8Array,Fje=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),r2=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),cl=(t,e)=>t<<32-e|t>>>e,jje=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!jje)throw new Error("Non little-endian hardware is not supported");function Wje(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function ZT(t){if(typeof t=="string"&&(t=Wje(t)),!Jee(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function zje(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!Jee(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class d${clone(){return this._cloneInto()}}function h$(t){const e=r=>t().update(ZT(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Hje(t=32){if(n2&&typeof n2.getRandomValues=="function")return n2.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Zee extends d${constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Bje(e);const r=ZT(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Kw(this),this.iHash.update(e),this}digestInto(e){Kw(this),u$(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Xee=(t,e,n)=>new Zee(t,e).update(n).digest();Xee.create=(t,e)=>new Zee(t,e);function Gje(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class ete extends d${constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=r2(this.buffer)}update(e){Kw(this);const{view:n,buffer:r,blockLen:s}=this;e=ZT(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=r2(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Kw(this),Qee(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Gje(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=r2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const qje=(t,e,n)=>t&e^~t&n,Vje=(t,e,n)=>t&e^t&n^e&n,Kje=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),jd=new Uint32Array(64);class Yje extends ete{constructor(){super(64,32,8,!1),this.A=Fd[0]|0,this.B=Fd[1]|0,this.C=Fd[2]|0,this.D=Fd[3]|0,this.E=Fd[4]|0,this.F=Fd[5]|0,this.G=Fd[6]|0,this.H=Fd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)jd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=jd[d-15],f=jd[d-2],p=cl(h,7)^cl(h,18)^h>>>3,g=cl(f,17)^cl(f,19)^f>>>10;jd[d]=g+jd[d-7]+p+jd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=cl(a,6)^cl(a,11)^cl(a,25),f=u+h+qje(a,c,l)+Kje[d]+jd[d]|0,g=(cl(r,2)^cl(r,13)^cl(r,22))+Vje(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){jd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const tte=h$(()=>new Yje),oS=BigInt(2**32-1),p5=BigInt(32);function nte(t,e=!1){return e?{h:Number(t&oS),l:Number(t>>p5&oS)}:{h:Number(t>>p5&oS)|0,l:Number(t&oS)|0}}function rte(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=nte(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Qje=(t,e)=>BigInt(t>>>0)<<p5|BigInt(e>>>0),Jje=(t,e,n)=>t>>>n,Zje=(t,e,n)=>t<<32-n|e>>>n,Xje=(t,e,n)=>t>>>n|e<<32-n,e9e=(t,e,n)=>t<<32-n|e>>>n,t9e=(t,e,n)=>t<<64-n|e>>>n-32,n9e=(t,e,n)=>t>>>n-32|e<<64-n,r9e=(t,e)=>e,s9e=(t,e)=>t,ste=(t,e,n)=>t<<n|e>>>32-n,ite=(t,e,n)=>e<<n|t>>>32-n,ote=(t,e,n)=>e<<n-32|t>>>64-n,ate=(t,e,n)=>t<<n-32|e>>>64-n;function i9e(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const o9e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),a9e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,c9e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),l9e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,u9e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),d9e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,jt={fromBig:nte,split:rte,toBig:Qje,shrSH:Jje,shrSL:Zje,rotrSH:Xje,rotrSL:e9e,rotrBH:t9e,rotrBL:n9e,rotr32H:r9e,rotr32L:s9e,rotlSH:ste,rotlSL:ite,rotlBH:ote,rotlBL:ate,add:i9e,add3L:o9e,add3H:a9e,add4L:c9e,add4H:l9e,add5H:d9e,add5L:u9e},[h9e,f9e]=jt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Wd=new Uint32Array(80),zd=new Uint32Array(80);class p9e extends ete{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Wd[v]=e.getUint32(n),zd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Wd[v-15]|0,_=zd[v-15]|0,I=jt.rotrSH(A,_,1)^jt.rotrSH(A,_,8)^jt.shrSH(A,_,7),x=jt.rotrSL(A,_,1)^jt.rotrSL(A,_,8)^jt.shrSL(A,_,7),N=Wd[v-2]|0,S=zd[v-2]|0,O=jt.rotrSH(N,S,19)^jt.rotrBH(N,S,61)^jt.shrSH(N,S,6),P=jt.rotrSL(N,S,19)^jt.rotrBL(N,S,61)^jt.shrSL(N,S,6),F=jt.add4L(x,P,zd[v-7],zd[v-16]),G=jt.add4H(F,I,O,Wd[v-7],Wd[v-16]);Wd[v]=G|0,zd[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const A=jt.rotrSH(d,h,14)^jt.rotrSH(d,h,18)^jt.rotrBH(d,h,41),_=jt.rotrSL(d,h,14)^jt.rotrSL(d,h,18)^jt.rotrBL(d,h,41),I=d&f^~d&g,x=h&p^~h&w,N=jt.add5L(b,_,x,f9e[v],zd[v]),S=jt.add5H(N,y,A,I,h9e[v],Wd[v]),O=N|0,P=jt.rotrSH(r,s,28)^jt.rotrBH(r,s,34)^jt.rotrBH(r,s,39),F=jt.rotrSL(r,s,28)^jt.rotrBL(r,s,34)^jt.rotrBL(r,s,39),G=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=jt.add(l|0,u|0,S|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=jt.add3L(O,F,B);r=jt.add3H(T,S,P,G),s=T|0}({h:r,l:s}=jt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=jt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=jt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=jt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=jt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=jt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=jt.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=jt.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){Wd.fill(0),zd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const g9e=h$(()=>new p9e);function m9e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const M7=m9e();M7.crypto||M7.msCrypto;function y9e(t){switch(t){case"sha256":return tte.create();case"sha512":return g9e.create()}Z(!1,"invalid hashing algorithm name","algorithm",t)}const[cte,lte,ute]=[[],[],[]],w9e=BigInt(0),Sv=BigInt(1),b9e=BigInt(2),v9e=BigInt(7),E9e=BigInt(256),C9e=BigInt(113);for(let t=0,e=Sv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],cte.push(2*(5*r+n)),lte.push((t+1)*(t+2)/2%64);let s=w9e;for(let i=0;i<7;i++)e=(e<<Sv^(e>>v9e)*C9e)%E9e,e&b9e&&(s^=Sv<<(Sv<<BigInt(i))-Sv);ute.push(s)}const[_9e,A9e]=rte(ute,!0),L7=(t,e,n)=>n>32?ote(t,e,n):ste(t,e,n),U7=(t,e,n)=>n>32?ate(t,e,n):ite(t,e,n);function S9e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=L7(l,u,1)^n[a],h=U7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=lte[o],c=L7(s,i,a),l=U7(s,i,a),u=cte[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=_9e[r],t[1]^=A9e[r]}n.fill(0)}class f$ extends d${constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,WI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Fje(this.state)}keccak(){S9e(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Kw(this);const{blockLen:n,state:r}=this;e=ZT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Kw(this,!1),u$(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return WI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Qee(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new f$(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const x9e=(t,e,n)=>h$(()=>new f$(e,t,n)),I9e=x9e(1,136,256/8);let dte=!1;const hte=function(t){return I9e(t)};let fte=hte;function Yr(t){const e=Vt(t,"data");return De(fte(e))}Yr._=hte;Yr.lock=function(){dte=!0};Yr.register=function(t){if(dte)throw new TypeError("keccak256 is locked");fte=t};Object.freeze(Yr);const pte=function(t){return y9e("sha256").update(t).digest()};let gte=pte,mte=!1;function Db(t){const e=Vt(t,"data");return De(gte(e))}Db._=pte;Db.lock=function(){mte=!0};Db.register=function(t){if(mte)throw new Error("sha256 is locked");gte=t};Object.freeze(Db);Object.freeze(Db);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yte=BigInt(0),XT=BigInt(1),N9e=BigInt(2),eR=t=>t instanceof Uint8Array,T9e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Yw(t){if(!eR(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=T9e[t[n]];return e}function wte(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function p$(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Qw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Cg(t){return p$(Yw(t))}function g$(t){if(!eR(t))throw new Error("Uint8Array expected");return p$(Yw(Uint8Array.from(t).reverse()))}function Jw(t,e){return Qw(t.toString(16).padStart(e*2,"0"))}function m$(t,e){return Jw(t,e).reverse()}function R9e(t){return Qw(wte(t))}function yc(t,e,n){let r;if(typeof e=="string")try{r=Qw(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(eR(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function u_(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!eR(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function P9e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function O9e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function k9e(t){let e;for(e=0;t>yte;t>>=XT,e+=1);return e}function D9e(t,e){return t>>BigInt(e)&XT}const M9e=(t,e,n)=>t|(n?XT:yte)<<BigInt(e),y$=t=>(N9e<<BigInt(t-1))-XT,s2=t=>new Uint8Array(t),$7=t=>Uint8Array.from(t);function bte(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=s2(t),s=s2(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=s2())=>{s=a($7([0]),d),r=a(),d.length!==0&&(s=a($7([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return u_(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const L9e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function D1(t,e,n={}){const r=(s,i,o)=>{const a=L9e[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const U9e=Object.freeze(Object.defineProperty({__proto__:null,bitGet:D9e,bitLen:k9e,bitMask:y$,bitSet:M9e,bytesToHex:Yw,bytesToNumberBE:Cg,bytesToNumberLE:g$,concatBytes:u_,createHmacDrbg:bte,ensureBytes:yc,equalBytes:P9e,hexToBytes:Qw,hexToNumber:p$,numberToBytesBE:Jw,numberToBytesLE:m$,numberToHexUnpadded:wte,numberToVarBytesBE:R9e,utf8ToBytes:O9e,validateObject:D1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xs=BigInt(0),zr=BigInt(1),bp=BigInt(2),$9e=BigInt(3),g5=BigInt(4),B7=BigInt(5),F7=BigInt(8);BigInt(9);BigInt(16);function fo(t,e){const n=t%e;return n>=xs?n:e+n}function B9e(t,e,n){if(n<=xs||e<xs)throw new Error("Expected power/modulo > 0");if(n===zr)return xs;let r=zr;for(;e>xs;)e&zr&&(r=r*t%n),t=t*t%n,e>>=zr;return r}function ba(t,e,n){let r=t;for(;e-- >xs;)r*=r,r%=n;return r}function m5(t,e){if(t===xs||e<=xs)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=fo(t,e),r=e,s=xs,i=zr;for(;n!==xs;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==zr)throw new Error("invert: does not exist");return fo(s,e)}function F9e(t){const e=(t-zr)/bp;let n,r,s;for(n=t-zr,r=0;n%bp===xs;n/=bp,r++);for(s=bp;s<t&&B9e(s,e,t)!==t-zr;s++);if(r===1){const o=(t+zr)/g5;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+zr)/bp;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,zr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function j9e(t){if(t%g5===$9e){const e=(t+zr)/g5;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%F7===B7){const e=(t-B7)/F7;return function(r,s){const i=r.mul(s,bp),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,bp),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return F9e(t)}const W9e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function z9e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=W9e.reduce((r,s)=>(r[s]="function",r),e);return D1(t,n)}function H9e(t,e,n){if(n<xs)throw new Error("Expected power > 0");if(n===xs)return t.ONE;if(n===zr)return e;let r=t.ONE,s=e;for(;n>xs;)n&zr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=zr;return r}function G9e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function vte(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function q9e(t,e,n=!1,r={}){if(t<=xs)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=vte(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=j9e(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:y$(s),ZERO:xs,ONE:zr,create:c=>fo(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return xs<=c&&c<t},is0:c=>c===xs,isOdd:c=>(c&zr)===zr,neg:c=>fo(-c,t),eql:(c,l)=>c===l,sqr:c=>fo(c*c,t),add:(c,l)=>fo(c+l,t),sub:(c,l)=>fo(c-l,t),mul:(c,l)=>fo(c*l,t),pow:(c,l)=>H9e(a,c,l),div:(c,l)=>fo(c*m5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>m5(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>G9e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?m$(c,i):Jw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?g$(c):Cg(c)}});return Object.freeze(a)}function Ete(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Cte(t){const e=Ete(t);return e+Math.ceil(e/2)}function V9e(t,e,n=!1){const r=t.length,s=Ete(e),i=Cte(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?Cg(t):g$(t),a=fo(o,e-zr)+zr;return n?m$(a,s):Jw(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const K9e=BigInt(0),i2=BigInt(1);function Y9e(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>K9e;)i&i2&&(o=o.add(a)),a=a.double(),i>>=i2;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let w=Number(o&d);o>>=f,w>c&&(w-=h,o+=i2);const y=g,b=g+Math.abs(w)-1,v=p%2!==0,A=w<0;w===0?u=u.add(n(v,i[y])):l=l.add(n(A,i[b]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function _te(t){return z9e(t.Fp),D1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...vte(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Q9e(t){const e=_te(t);D1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:J9e,hexToBytes:Z9e}=U9e,Lp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Lp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:J9e(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Lp,n=typeof t=="string"?Z9e(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Lp._parseInt(n.subarray(2)),{d:o,l:a}=Lp._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Gu=BigInt(0),ka=BigInt(1);BigInt(2);const j7=BigInt(3);BigInt(4);function X9e(t){const e=Q9e(t),{Fp:n}=e,r=e.toBytes||((p,g,w)=>{const y=g.toAffine();return u_(Uint8Array.from([4]),n.toBytes(y.x),n.toBytes(y.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),w=n.fromBytes(g.subarray(0,n.BYTES)),y=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:w,y}});function i(p){const{a:g,b:w}=e,y=n.sqr(p),b=n.mul(y,p);return n.add(n.add(b,n.mul(p,g)),w)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Gu<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:w,wrapPrivateKey:y,n:b}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=Yw(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(w*2,"0")}let v;try{v=typeof p=="bigint"?p:Cg(yc("private key",p,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof p}`)}return y&&(v=fo(v,b)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,w,y){if(this.px=g,this.py=w,this.pz=y,g==null||!n.isValid(g))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(y==null||!n.isValid(y))throw new Error("z required")}static fromAffine(g){const{x:w,y}=g||{};if(!g||!n.isValid(w)||!n.isValid(y))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(w)&&b(y)?d.ZERO:new d(w,y,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const w=n.invertBatch(g.map(y=>y.pz));return g.map((y,b)=>y.toAffine(w[b])).map(d.fromAffine)}static fromHex(g){const w=d.fromAffine(s(yc("pointHex",g)));return w.assertValidity(),w}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:w}=this.toAffine();if(!n.isValid(g)||!n.isValid(w))throw new Error("bad point: x or y not FE");const y=n.sqr(w),b=i(g);if(!n.eql(y,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:w,py:y,pz:b}=this,{px:v,py:A,pz:_}=g,I=n.eql(n.mul(w,_),n.mul(v,b)),x=n.eql(n.mul(y,_),n.mul(A,b));return I&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:w}=e,y=n.mul(w,j7),{px:b,py:v,pz:A}=this;let _=n.ZERO,I=n.ZERO,x=n.ZERO,N=n.mul(b,b),S=n.mul(v,v),O=n.mul(A,A),P=n.mul(b,v);return P=n.add(P,P),x=n.mul(b,A),x=n.add(x,x),_=n.mul(g,x),I=n.mul(y,O),I=n.add(_,I),_=n.sub(S,I),I=n.add(S,I),I=n.mul(_,I),_=n.mul(P,_),x=n.mul(y,x),O=n.mul(g,O),P=n.sub(N,O),P=n.mul(g,P),P=n.add(P,x),x=n.add(N,N),N=n.add(x,N),N=n.add(N,O),N=n.mul(N,P),I=n.add(I,N),O=n.mul(v,A),O=n.add(O,O),N=n.mul(O,P),_=n.sub(_,N),x=n.mul(O,S),x=n.add(x,x),x=n.add(x,x),new d(_,I,x)}add(g){u(g);const{px:w,py:y,pz:b}=this,{px:v,py:A,pz:_}=g;let I=n.ZERO,x=n.ZERO,N=n.ZERO;const S=e.a,O=n.mul(e.b,j7);let P=n.mul(w,v),F=n.mul(y,A),G=n.mul(b,_),B=n.add(w,y),T=n.add(v,A);B=n.mul(B,T),T=n.add(P,F),B=n.sub(B,T),T=n.add(w,b);let R=n.add(v,_);return T=n.mul(T,R),R=n.add(P,G),T=n.sub(T,R),R=n.add(y,b),I=n.add(A,_),R=n.mul(R,I),I=n.add(F,G),R=n.sub(R,I),N=n.mul(S,T),I=n.mul(O,G),N=n.add(I,N),I=n.sub(F,N),N=n.add(F,N),x=n.mul(I,N),F=n.add(P,P),F=n.add(F,P),G=n.mul(S,G),T=n.mul(O,T),F=n.add(F,G),G=n.sub(P,G),G=n.mul(S,G),T=n.add(T,G),P=n.mul(F,T),x=n.add(x,P),P=n.mul(R,T),I=n.mul(B,I),I=n.sub(I,P),P=n.mul(B,F),N=n.mul(R,N),N=n.add(N,P),new d(I,x,N)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,w=>{const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(y[v])).map(d.fromAffine)})}multiplyUnsafe(g){const w=d.ZERO;if(g===Gu)return w;if(a(g),g===ka)return this;const{endo:y}=e;if(!y)return f.unsafeLadder(this,g);let{k1neg:b,k1:v,k2neg:A,k2:_}=y.splitScalar(g),I=w,x=w,N=this;for(;v>Gu||_>Gu;)v&ka&&(I=I.add(N)),_&ka&&(x=x.add(N)),N=N.double(),v>>=ka,_>>=ka;return b&&(I=I.negate()),A&&(x=x.negate()),x=new d(n.mul(x.px,y.beta),x.py,x.pz),I.add(x)}multiply(g){a(g);let w=g,y,b;const{endo:v}=e;if(v){const{k1neg:A,k1:_,k2neg:I,k2:x}=v.splitScalar(w);let{p:N,f:S}=this.wNAF(_),{p:O,f:P}=this.wNAF(x);N=f.constTimeNegate(A,N),O=f.constTimeNegate(I,O),O=new d(n.mul(O.px,v.beta),O.py,O.pz),y=N.add(O),b=S.add(P)}else{const{p:A,f:_}=this.wNAF(w);y=A,b=_}return d.normalizeZ([y,b])[0]}multiplyAndAddUnsafe(g,w,y){const b=d.BASE,v=(_,I)=>I===Gu||I===ka||!_.equals(b)?_.multiplyUnsafe(I):_.multiply(I),A=v(this,w).add(v(g,y));return A.is0()?void 0:A}toAffine(g){const{px:w,py:y,pz:b}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(b));const A=n.mul(w,g),_=n.mul(y,g),I=n.mul(b,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:A,y:_}}isTorsionFree(){const{h:g,isTorsionFree:w}=e;if(g===ka)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:w}=e;return g===ka?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return Yw(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=Y9e(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function e7e(t){const e=_te(t);return D1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function t7e(t){const e=e7e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(T){return Gu<T&&T<n.ORDER}function a(T){return fo(T,r)}function c(T){return m5(T,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=X9e({...e,toBytes(T,R,$){const k=R.toAffine(),M=n.toBytes(k.x),W=u_;return $?W(Uint8Array.from([R.hasEvenY()?2:3]),M):W(Uint8Array.from([4]),M,n.toBytes(k.y))},fromBytes(T){const R=T.length,$=T[0],k=T.subarray(1);if(R===s&&($===2||$===3)){const M=Cg(k);if(!o(M))throw new Error("Point is not on curve");const W=d(M);let K=n.sqrt(W);const ne=(K&ka)===ka;return($&1)===1!==ne&&(K=n.neg(K)),{x:M,y:K}}else if(R===i&&$===4){const M=n.fromBytes(k.subarray(0,n.BYTES)),W=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:M,y:W}}else throw new Error(`Point of length ${R} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=T=>Yw(Jw(T,e.nByteLength));function p(T){const R=r>>ka;return T>R}function g(T){return p(T)?a(-T):T}const w=(T,R,$)=>Cg(T.slice(R,$));class y{constructor(R,$,k){this.r=R,this.s=$,this.recovery=k,this.assertValidity()}static fromCompact(R){const $=e.nByteLength;return R=yc("compactSignature",R,$*2),new y(w(R,0,$),w(R,$,2*$))}static fromDER(R){const{r:$,s:k}=Lp.toSig(yc("DER",R));return new y($,k)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(R){return new y(this.r,this.s,R)}recoverPublicKey(R){const{r:$,s:k,recovery:M}=this,W=x(yc("msgHash",R));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const K=M===2||M===3?$+e.n:$;if(K>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ne=M&1?"03":"02",le=l.fromHex(ne+f(K)),oe=c(K),ae=a(-W*oe),ue=a(k*oe),et=l.BASE.multiplyAndAddUnsafe(le,ae,ue);if(!et)throw new Error("point at infinify");return et.assertValidity(),et}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Qw(this.toDERHex())}toDERHex(){return Lp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Qw(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const b={isValidPrivateKey(T){try{return u(T),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const T=Cte(e.n);return V9e(e.randomBytes(T),e.n)},precompute(T=8,R=l.BASE){return R._setWindowSize(T),R.multiply(BigInt(3)),R}};function v(T,R=!0){return l.fromPrivateKey(T).toRawBytes(R)}function A(T){const R=T instanceof Uint8Array,$=typeof T=="string",k=(R||$)&&T.length;return R?k===s||k===i:$?k===2*s||k===2*i:T instanceof l}function _(T,R,$=!0){if(A(T))throw new Error("first arg must be private key");if(!A(R))throw new Error("second arg must be public key");return l.fromHex(R).multiply(u(T)).toRawBytes($)}const I=e.bits2int||function(T){const R=Cg(T),$=T.length*8-e.nBitLength;return $>0?R>>BigInt($):R},x=e.bits2int_modN||function(T){return a(I(T))},N=y$(e.nBitLength);function S(T){if(typeof T!="bigint")throw new Error("bigint expected");if(!(Gu<=T&&T<N))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Jw(T,e.nByteLength)}function O(T,R,$=P){if(["recovered","canonical"].some(Me=>Me in $))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:M}=e;let{lowS:W,prehash:K,extraEntropy:ne}=$;W==null&&(W=!0),T=yc("msgHash",T),K&&(T=yc("prehashed msgHash",k(T)));const le=x(T),oe=u(R),ae=[S(oe),S(le)];if(ne!=null){const Me=ne===!0?M(n.BYTES):ne;ae.push(yc("extraEntropy",Me))}const ue=u_(...ae),et=le;function Se(Me){const rt=I(Me);if(!h(rt))return;const Tt=c(rt),Jt=l.BASE.multiply(rt).toAffine(),X=a(Jt.x);if(X===Gu)return;const ce=a(Tt*a(et+X*oe));if(ce===Gu)return;let Ee=(Jt.x===X?0:2)|Number(Jt.y&ka),ge=ce;return W&&p(ce)&&(ge=g(ce),Ee^=1),new y(X,ge,Ee)}return{seed:ue,k2sig:Se}}const P={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function G(T,R,$=P){const{seed:k,k2sig:M}=O(T,R,$),W=e;return bte(W.hash.outputLen,W.nByteLength,W.hmac)(k,M)}l.BASE._setWindowSize(8);function B(T,R,$,k=F){var Jt;const M=T;if(R=yc("msgHash",R),$=yc("publicKey",$),"strict"in k)throw new Error("options.strict was renamed to lowS");const{lowS:W,prehash:K}=k;let ne,le;try{if(typeof M=="string"||M instanceof Uint8Array)try{ne=y.fromDER(M)}catch(X){if(!(X instanceof Lp.Err))throw X;ne=y.fromCompact(M)}else if(typeof M=="object"&&typeof M.r=="bigint"&&typeof M.s=="bigint"){const{r:X,s:ce}=M;ne=new y(X,ce)}else throw new Error("PARSE");le=l.fromHex($)}catch(X){if(X.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(W&&ne.hasHighS())return!1;K&&(R=e.hash(R));const{r:oe,s:ae}=ne,ue=x(R),et=c(ae),Se=a(ue*et),Me=a(oe*et),rt=(Jt=l.BASE.multiplyAndAddUnsafe(le,Se,Me))==null?void 0:Jt.toAffine();return rt?a(rt.x)===oe:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:_,sign:G,verify:B,ProjectivePoint:l,Signature:y,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function n7e(t){return{hash:t,hmac:(e,...n)=>Xee(t,e,zje(...n)),randomBytes:Hje}}function r7e(t,e){const n=r=>t7e({...t,...n7e(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ate=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),W7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),s7e=BigInt(1),y5=BigInt(2),z7=(t,e)=>(t+e/y5)/e;function i7e(t){const e=Ate,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ba(u,n,e)*u%e,h=ba(d,n,e)*u%e,f=ba(h,y5,e)*l%e,p=ba(f,s,e)*f%e,g=ba(p,i,e)*p%e,w=ba(g,a,e)*g%e,y=ba(w,c,e)*w%e,b=ba(y,a,e)*g%e,v=ba(b,n,e)*u%e,A=ba(v,o,e)*p%e,_=ba(A,r,e)*l%e,I=ba(_,y5,e);if(!w5.eql(w5.sqr(I),t))throw new Error("Cannot find square root");return I}const w5=q9e(Ate,void 0,void 0,{sqrt:i7e}),Qd=r7e({a:BigInt(0),b:BigInt(7),Fp:w5,n:W7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=W7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-s7e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=z7(i*t,e),c=z7(-r*t,e);let l=fo(t-a*n-c*s,e),u=fo(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},tte);BigInt(0);Qd.ProjectivePoint;const d_="0x0000000000000000000000000000000000000000",H7="0x0000000000000000000000000000000000000000000000000000000000000000",G7=BigInt(0),q7=BigInt(1),V7=BigInt(2),K7=BigInt(27),Y7=BigInt(28),aS=BigInt(35),uy={};function Q7(t){return wd(os(t),32)}var k0,bl,D0,rg;const pc=class pc{constructor(e,n,r,s){Q(this,k0);Q(this,bl);Q(this,D0);Q(this,rg);YT(e,uy,"Signature"),L(this,k0,n),L(this,bl,r),L(this,D0,s),L(this,rg,null)}get r(){return C(this,k0)}set r(e){Z(a0(e)===32,"invalid r","value",e),L(this,k0,De(e))}get s(){return Z(parseInt(C(this,bl).substring(0,3))<8,"non-canonical s; use ._s","s",C(this,bl)),C(this,bl)}set s(e){Z(a0(e)===32,"invalid s","value",e),L(this,bl,De(e))}get _s(){return C(this,bl)}isValid(){return parseInt(C(this,bl).substring(0,3))<8}get v(){return C(this,D0)}set v(e){const n=Kt(e,"value");Z(n===27||n===28,"invalid v","v",e),L(this,D0,n)}get networkV(){return C(this,rg)}get legacyChainId(){const e=this.networkV;return e==null?null:pc.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Vt(this.s);return this.yParity&&(e[0]|=128),De(e)}get compactSerialized(){return Lr([this.r,this.yParityAndS])}get serialized(){return Lr([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new pc(uy,this.r,this._s,this.v);return this.networkV&&L(e,rg,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Ze(e,"v");return n==K7||n==Y7?G7:(Z(n>=aS,"invalid EIP-155 v","v",e),(n-aS)/V7)}static getChainIdV(e,n){return Ze(e)*V7+BigInt(35+n-27)}static getNormalizedV(e){const n=Ze(e);return n===G7||n===K7?27:n===q7||n===Y7?28:(Z(n>=aS,"invalid v","v",e),n&q7?27:28)}static from(e){function n(l,u){Z(l,u,"signature",e)}if(e==null)return new pc(uy,H7,H7,27);if(typeof e=="string"){const l=Vt(e,"signature");if(l.length===64){const u=De(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new pc(uy,u,De(d),h)}if(l.length===65){const u=De(l.slice(0,32)),d=De(l.slice(32,64)),h=pc.getNormalizedV(l[64]);return new pc(uy,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof pc)return e.clone();const r=e.r;n(r!=null,"missing r");const s=Q7(r),i=function(l,u){if(l!=null)return Q7(l);if(u!=null){n(ir(u,32),"invalid yParityAndS");const d=Vt(u);return d[0]&=127,De(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Ze(l);return{networkV:h>=aS?h:void 0,v:pc.getNormalizedV(h)}}if(u!=null)return n(ir(u,32),"invalid yParityAndS"),{v:Vt(u)[0]&128?28:27};if(d!=null){switch(Kt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new pc(uy,s,i,a);return o&&L(c,rg,o),n(e.yParity==null||Kt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};k0=new WeakMap,bl=new WeakMap,D0=new WeakMap,rg=new WeakMap;let So=pc;var Mu;const vp=class vp{constructor(e){Q(this,Mu);Z(a0(e)===32,"invalid private key","privateKey","[REDACTED]"),L(this,Mu,De(e))}get privateKey(){return C(this,Mu)}get publicKey(){return vp.computePublicKey(C(this,Mu))}get compressedPublicKey(){return vp.computePublicKey(C(this,Mu),!0)}sign(e){Z(a0(e)===32,"invalid digest length","digest",e);const n=Qd.sign(Ri(e),Ri(C(this,Mu)),{lowS:!0});return So.from({r:Nf(n.r,32),s:Nf(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=vp.computePublicKey(e);return De(Qd.getSharedSecret(Ri(C(this,Mu)),Vt(n),!1))}static computePublicKey(e,n){let r=Vt(e,"key");if(r.length===32){const i=Qd.getPublicKey(r,!!n);return De(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Qd.ProjectivePoint.fromHex(r);return De(s.toRawBytes(n))}static recoverPublicKey(e,n){Z(a0(e)===32,"invalid digest length","digest",e);const r=So.from(n);let s=Qd.Signature.fromCompact(Ri(Lr([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(Ri(e));return Z(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=Qd.ProjectivePoint.fromHex(vp.computePublicKey(e).substring(2)),i=Qd.ProjectivePoint.fromHex(vp.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Mu=new WeakMap;let h_=vp;const o7e=BigInt(0),a7e=BigInt(36);function J7(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Vt(Yr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const w$={};for(let t=0;t<10;t++)w$[String(t)]=String(t);for(let t=0;t<26;t++)w$[String.fromCharCode(65+t)]=String(10+t);const Z7=15;function c7e(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>w$[r]).join("");for(;e.length>=Z7;){let r=e.substring(0,Z7);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const l7e=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function u7e(t){t=t.toLowerCase();let e=o7e;for(let n=0;n<t.length;n++)e=e*a7e+l7e[t[n]];return e}function xn(t){if(Z(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=J7(t);return Z(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Z(t.substring(2,4)===c7e(t),"bad icap checksum","address",t);let e=u7e(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return J7("0x"+e)}Z(!1,"invalid address","address",t)}function d7e(t){const e=xn(t.from);let r=Ze(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,xn(Pr(Yr(Rf([e,r])),12))}function Ste(t){return t&&typeof t.getAddress=="function"}async function o2(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(ye(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Z(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),xn(n)}function ki(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?xn(t):(ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),o2(t,e.resolveName(t)));if(Ste(t))return o2(t,t.getAddress());if(t&&typeof t.then=="function")return o2(t,t);Z(!1,"unsupported addressable value","target",t)}const Au={};function qe(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new pi(Au,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function mn(t,e){return new pi(Au,`bytes${e||""}`,t,{size:e})}const X7=Symbol.for("_ethers_typed");var sg;const Su=class Su{constructor(e,n,r,s){te(this,"type");te(this,"value");Q(this,sg);te(this,"_typedSymbol");s==null&&(s=null),YT(Au,e,"Typed"),mt(this,{_typedSymbol:X7,type:n,value:r}),L(this,sg,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return C(this,sg)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return C(this,sg)===!0?-1:C(this,sg)===!1?this.value.length:null}static from(e,n){return new Su(Au,e,n)}static uint8(e){return qe(e,8)}static uint16(e){return qe(e,16)}static uint24(e){return qe(e,24)}static uint32(e){return qe(e,32)}static uint40(e){return qe(e,40)}static uint48(e){return qe(e,48)}static uint56(e){return qe(e,56)}static uint64(e){return qe(e,64)}static uint72(e){return qe(e,72)}static uint80(e){return qe(e,80)}static uint88(e){return qe(e,88)}static uint96(e){return qe(e,96)}static uint104(e){return qe(e,104)}static uint112(e){return qe(e,112)}static uint120(e){return qe(e,120)}static uint128(e){return qe(e,128)}static uint136(e){return qe(e,136)}static uint144(e){return qe(e,144)}static uint152(e){return qe(e,152)}static uint160(e){return qe(e,160)}static uint168(e){return qe(e,168)}static uint176(e){return qe(e,176)}static uint184(e){return qe(e,184)}static uint192(e){return qe(e,192)}static uint200(e){return qe(e,200)}static uint208(e){return qe(e,208)}static uint216(e){return qe(e,216)}static uint224(e){return qe(e,224)}static uint232(e){return qe(e,232)}static uint240(e){return qe(e,240)}static uint248(e){return qe(e,248)}static uint256(e){return qe(e,256)}static uint(e){return qe(e,256)}static int8(e){return qe(e,-8)}static int16(e){return qe(e,-16)}static int24(e){return qe(e,-24)}static int32(e){return qe(e,-32)}static int40(e){return qe(e,-40)}static int48(e){return qe(e,-48)}static int56(e){return qe(e,-56)}static int64(e){return qe(e,-64)}static int72(e){return qe(e,-72)}static int80(e){return qe(e,-80)}static int88(e){return qe(e,-88)}static int96(e){return qe(e,-96)}static int104(e){return qe(e,-104)}static int112(e){return qe(e,-112)}static int120(e){return qe(e,-120)}static int128(e){return qe(e,-128)}static int136(e){return qe(e,-136)}static int144(e){return qe(e,-144)}static int152(e){return qe(e,-152)}static int160(e){return qe(e,-160)}static int168(e){return qe(e,-168)}static int176(e){return qe(e,-176)}static int184(e){return qe(e,-184)}static int192(e){return qe(e,-192)}static int200(e){return qe(e,-200)}static int208(e){return qe(e,-208)}static int216(e){return qe(e,-216)}static int224(e){return qe(e,-224)}static int232(e){return qe(e,-232)}static int240(e){return qe(e,-240)}static int248(e){return qe(e,-248)}static int256(e){return qe(e,-256)}static int(e){return qe(e,-256)}static bytes1(e){return mn(e,1)}static bytes2(e){return mn(e,2)}static bytes3(e){return mn(e,3)}static bytes4(e){return mn(e,4)}static bytes5(e){return mn(e,5)}static bytes6(e){return mn(e,6)}static bytes7(e){return mn(e,7)}static bytes8(e){return mn(e,8)}static bytes9(e){return mn(e,9)}static bytes10(e){return mn(e,10)}static bytes11(e){return mn(e,11)}static bytes12(e){return mn(e,12)}static bytes13(e){return mn(e,13)}static bytes14(e){return mn(e,14)}static bytes15(e){return mn(e,15)}static bytes16(e){return mn(e,16)}static bytes17(e){return mn(e,17)}static bytes18(e){return mn(e,18)}static bytes19(e){return mn(e,19)}static bytes20(e){return mn(e,20)}static bytes21(e){return mn(e,21)}static bytes22(e){return mn(e,22)}static bytes23(e){return mn(e,23)}static bytes24(e){return mn(e,24)}static bytes25(e){return mn(e,25)}static bytes26(e){return mn(e,26)}static bytes27(e){return mn(e,27)}static bytes28(e){return mn(e,28)}static bytes29(e){return mn(e,29)}static bytes30(e){return mn(e,30)}static bytes31(e){return mn(e,31)}static bytes32(e){return mn(e,32)}static address(e){return new Su(Au,"address",e)}static bool(e){return new Su(Au,"bool",!!e)}static bytes(e){return new Su(Au,"bytes",e)}static string(e){return new Su(Au,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Su(Au,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===X7}static dereference(e,n){if(Su.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};sg=new WeakMap;let pi=Su;class h7e extends Ad{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=pi.dereference(n,"string");try{r=xn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return xn(Nf(e.readValue(),20))}}class f7e extends Ad{constructor(n){super(n.name,n.type,"_",n.dynamic);te(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function xte(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return ye(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),ye(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else Z(!1,"invalid tuple value","tuple",n);Z(e.length===r.length,"types/value length mismatch","tuple",n);let s=new d5,i=new d5,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Ite(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(Ws(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Ws(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),Vw.fromItems(n,r)}class p7e extends Ad{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);te(this,"coder");te(this,"length");mt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=pi.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),Lee(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return xte(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),ye(r*Oi<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Oi,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new f7e(this.coder));return Ite(n,s)}}class g7e extends Ad{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=pi.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Nte extends Ad{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=Ri(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class m7e extends Nte{constructor(e){super("bytes",e)}decode(e){return De(super.decode(e))}}class y7e extends Ad{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);te(this,"size");mt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=Ri(pi.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return De(n.readBytes(this.size))}}const w7e=new Uint8Array([]);class b7e extends Ad{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(w7e)}decode(e){return e.readBytes(0),null}}const v7e=BigInt(0),E7e=BigInt(1),C7e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class _7e extends Ad{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);te(this,"size");te(this,"signed");mt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Ze(pi.dereference(r,this.type)),i=Gv(C7e,Oi*8);if(this.signed){let o=Gv(i,this.size*8-1);(s>o||s<-(o+E7e))&&this._throwError("value out-of-bounds",r),s=Bee(s,8*Oi)}else(s<v7e||s>Gv(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=Gv(n.readValue(),this.size*8);return this.signed&&(r=vje(r,this.size*8)),r}}class A7e extends Nte{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,id(pi.dereference(n,"string")))}decode(e){return jI(super.decode(e))}}class cS extends Ad{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);te(this,"coders");mt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=pi.dereference(r,"tuple");return xte(n,this.coders,s)}decode(n){return Ite(n,this.coders)}}function a2(t,e){return{address:xn(t),storageKeys:e.map((n,r)=>(Z(ir(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function xm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(Z(n.length===2,"invalid slot set",`value[${r}]`,n),a2(n[0],n[1])):(Z(n!=null&&typeof n=="object","invalid address-slot set","value",t),a2(n.address,n.storageKeys)));Z(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return a2(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function Tte(t){return{address:xn(t.address),nonce:Ze(t.nonce!=null?t.nonce:0),chainId:Ze(t.chainId!=null?t.chainId:0),signature:So.from(t.signature)}}function S7e(t){let e;return typeof t=="string"?e=h_.computePublicKey(t,!1):e=t.publicKey,xn(Yr("0x"+e.substring(4)).substring(26))}function x7e(t,e){return S7e(h_.recoverPublicKey(t,e))}const vs=BigInt(0),I7e=BigInt(2),N7e=BigInt(27),T7e=BigInt(28),R7e=BigInt(35),P7e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),c2=4096*32;function O7e(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Vt(t.blobToKzgCommitment(De(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Vt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Vt(t.blobToKZGCommitment(De(r)));Z(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Vt(t.computeBlobProof(De(r),De(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Vt(t.computeBlobKZGProof(De(r),De(s)));Z(!1,"unsupported KZG library","kzg",t)}}}function eW(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Db(e).substring(4),"0x"+n}function Mb(t){return t==="0x"?null:xn(t)}function tR(t,e){try{return xm(t)}catch(n){Z(!1,n.message,e,t)}}function k7e(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Mb(s[1]),nonce:Fn(s[2],"nonce"),chainId:Fn(s[0],"chainId"),signature:So.from({yParity:Im(s[3],"yParity"),r:wd(s[4],32),s:wd(s[5],32)})})}return n}catch(n){Z(!1,n.message,e,t)}}function Im(t,e){return t==="0x"?0:Kt(t,e)}function Fn(t,e){if(t==="0x")return vs;const n=Ze(t,e);return Z(n<=P7e,"value exceeds uint size",e,n),n}function sn(t,e){const n=Ze(t,"value"),r=os(n);return Z(r.length<=32,"value too large",`tx.${e}`,n),r}function nR(t){return xm(t).map(e=>[e.address,e.storageKeys])}function D7e(t){return t.map(e=>[sn(e.chainId,"chainId"),e.address,sn(e.nonce,"nonce"),sn(e.signature.yParity,"yParity"),os(e.signature.r),os(e.signature.s)])}function M7e(t,e){Z(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Z(ir(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function L7e(t){const e=k1(t);Z(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Im(e[0],"nonce"),gasPrice:Fn(e[1],"gasPrice"),gasLimit:Fn(e[2],"gasLimit"),to:Mb(e[3]),value:Fn(e[4],"value"),data:De(e[5]),chainId:vs};if(e.length===6)return n;const r=Fn(e[6],"v"),s=Fn(e[7],"r"),i=Fn(e[8],"s");if(s===vs&&i===vs)n.chainId=r;else{let o=(r-R7e)/I7e;o<vs&&(o=vs),n.chainId=o,Z(o!==vs||r===N7e||r===T7e,"non-canonical legacy v","v",e[6]),n.signature=So.from({r:wd(e[7],32),s:wd(e[8],32),v:r})}return n}function U7e(t,e){const n=[sn(t.nonce,"nonce"),sn(t.gasPrice||0,"gasPrice"),sn(t.gasLimit,"gasLimit"),t.to||"0x",sn(t.value,"value"),t.data];let r=vs;if(t.chainId!=vs)r=Ze(t.chainId,"tx.chainId"),Z(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==vs&&(n.push(os(r)),n.push("0x"),n.push("0x")),Rf(n);let s=BigInt(27+e.yParity);return r!==vs?s=So.getChainIdV(r,e.v):BigInt(e.v)!==s&&Z(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(os(s)),n.push(os(e.r)),n.push(os(e.s)),Rf(n)}function rR(t,e){let n;try{if(n=Im(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Z(!1,"invalid yParity","yParity",e[0])}const r=wd(e[1],32),s=wd(e[2],32),i=So.from({r,s,yParity:n});t.signature=i}function $7e(t){const e=k1(Vt(t).slice(1));Z(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",De(t));const n={type:2,chainId:Fn(e[0],"chainId"),nonce:Im(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:Mb(e[5]),value:Fn(e[6],"value"),data:De(e[7]),accessList:tR(e[8],"accessList")};return e.length===9||rR(n,e.slice(9)),n}function B7e(t,e){const n=[sn(t.chainId,"chainId"),sn(t.nonce,"nonce"),sn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sn(t.maxFeePerGas||0,"maxFeePerGas"),sn(t.gasLimit,"gasLimit"),t.to||"0x",sn(t.value,"value"),t.data,nR(t.accessList||[])];return e&&(n.push(sn(e.yParity,"yParity")),n.push(os(e.r)),n.push(os(e.s))),Lr(["0x02",Rf(n)])}function F7e(t){const e=k1(Vt(t).slice(1));Z(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",De(t));const n={type:1,chainId:Fn(e[0],"chainId"),nonce:Im(e[1],"nonce"),gasPrice:Fn(e[2],"gasPrice"),gasLimit:Fn(e[3],"gasLimit"),to:Mb(e[4]),value:Fn(e[5],"value"),data:De(e[6]),accessList:tR(e[7],"accessList")};return e.length===8||rR(n,e.slice(8)),n}function j7e(t,e){const n=[sn(t.chainId,"chainId"),sn(t.nonce,"nonce"),sn(t.gasPrice||0,"gasPrice"),sn(t.gasLimit,"gasLimit"),t.to||"0x",sn(t.value,"value"),t.data,nR(t.accessList||[])];return e&&(n.push(sn(e.yParity,"recoveryParam")),n.push(os(e.r)),n.push(os(e.s))),Lr(["0x01",Rf(n)])}function W7e(t){let e=k1(Vt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];Z(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Z(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Z(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),Z(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Z(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}Z(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",De(t));const s={type:3,chainId:Fn(e[0],"chainId"),nonce:Im(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:Mb(e[5]),value:Fn(e[6],"value"),data:De(e[7]),accessList:tR(e[8],"accessList"),maxFeePerBlobGas:Fn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Z(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),Z(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)Z(ir(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||rR(s,e.slice(11)),s}function z7e(t,e,n){const r=[sn(t.chainId,"chainId"),sn(t.nonce,"nonce"),sn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sn(t.maxFeePerGas||0,"maxFeePerGas"),sn(t.gasLimit,"gasLimit"),t.to||d_,sn(t.value,"value"),t.data,nR(t.accessList||[]),sn(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),M7e(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(sn(e.yParity,"yParity")),r.push(os(e.r)),r.push(os(e.s)),n)?Lr(["0x03",Rf([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Lr(["0x03",Rf(r)])}function H7e(t){const e=k1(Vt(t).slice(1));Z(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",De(t));const n={type:4,chainId:Fn(e[0],"chainId"),nonce:Im(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:Mb(e[5]),value:Fn(e[6],"value"),data:De(e[7]),accessList:tR(e[8],"accessList"),authorizationList:k7e(e[9],"authorizationList")};return e.length===10||rR(n,e.slice(10)),n}function G7e(t,e){const n=[sn(t.chainId,"chainId"),sn(t.nonce,"nonce"),sn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sn(t.maxFeePerGas||0,"maxFeePerGas"),sn(t.gasLimit,"gasLimit"),t.to||"0x",sn(t.value,"value"),t.data,nR(t.accessList||[]),D7e(t.authorizationList||[])];return e&&(n.push(sn(e.yParity,"yParity")),n.push(os(e.r)),n.push(os(e.s))),Lr(["0x04",Rf(n)])}var Cc,M0,L0,U0,$0,B0,F0,j0,W0,z0,H0,G0,ig,Eh,vl,Ch,q0,V0,ex;const pl=class pl{constructor(){Q(this,V0);Q(this,Cc);Q(this,M0);Q(this,L0);Q(this,U0);Q(this,$0);Q(this,B0);Q(this,F0);Q(this,j0);Q(this,W0);Q(this,z0);Q(this,H0);Q(this,G0);Q(this,ig);Q(this,Eh);Q(this,vl);Q(this,Ch);Q(this,q0);L(this,Cc,null),L(this,M0,null),L(this,U0,0),L(this,$0,vs),L(this,B0,null),L(this,F0,null),L(this,j0,null),L(this,L0,"0x"),L(this,W0,vs),L(this,z0,vs),L(this,H0,null),L(this,G0,null),L(this,ig,null),L(this,Eh,null),L(this,vl,null),L(this,Ch,null),L(this,q0,null)}get type(){return C(this,Cc)}set type(e){switch(e){case null:L(this,Cc,null);break;case 0:case"legacy":L(this,Cc,0);break;case 1:case"berlin":case"eip-2930":L(this,Cc,1);break;case 2:case"london":case"eip-1559":L(this,Cc,2);break;case 3:case"cancun":case"eip-4844":L(this,Cc,3);break;case 4:case"pectra":case"eip-7702":L(this,Cc,4);break;default:Z(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=C(this,M0);return e==null&&this.type===3?d_:e}set to(e){L(this,M0,e==null?null:xn(e))}get nonce(){return C(this,U0)}set nonce(e){L(this,U0,Kt(e,"value"))}get gasLimit(){return C(this,$0)}set gasLimit(e){L(this,$0,Ze(e))}get gasPrice(){const e=C(this,B0);return e==null&&(this.type===0||this.type===1)?vs:e}set gasPrice(e){L(this,B0,e==null?null:Ze(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=C(this,F0);return e??(this.type===2||this.type===3?vs:null)}set maxPriorityFeePerGas(e){L(this,F0,e==null?null:Ze(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=C(this,j0);return e??(this.type===2||this.type===3?vs:null)}set maxFeePerGas(e){L(this,j0,e==null?null:Ze(e,"maxFeePerGas"))}get data(){return C(this,L0)}set data(e){L(this,L0,De(e))}get value(){return C(this,W0)}set value(e){L(this,W0,Ze(e,"value"))}get chainId(){return C(this,z0)}set chainId(e){L(this,z0,Ze(e))}get signature(){return C(this,H0)||null}set signature(e){L(this,H0,e==null?null:So.from(e))}get accessList(){const e=C(this,G0)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){L(this,G0,e==null?null:xm(e))}get authorizationList(){const e=C(this,q0)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){L(this,q0,e==null?null:e.map(n=>Tte(n)))}get maxFeePerBlobGas(){const e=C(this,ig);return e==null&&this.type===3?vs:e}set maxFeePerBlobGas(e){L(this,ig,e==null?null:Ze(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=C(this,Eh);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Z(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Z(ir(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}L(this,Eh,e)}get blobs(){return C(this,Ch)==null?null:C(this,Ch).map(e=>Object.assign({},e))}set blobs(e){if(e==null){L(this,Ch,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(c$(i)){ye(C(this,vl),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Vt(i);if(Z(o.length<=c2,"blob is too large",`blobs[${s}]`,i),o.length!==c2){const l=new Uint8Array(c2);l.set(o),o=l}const a=C(this,vl).blobToKzgCommitment(o),c=De(C(this,vl).computeBlobKzgProof(o,a));n.push({data:De(o),commitment:De(a),proof:c}),r.push(eW(1,a))}else{const o=De(i.commitment);n.push({data:De(i.data),commitment:o,proof:De(i.proof)}),r.push(eW(1,o))}}L(this,Ch,n),L(this,Eh,r)}get kzg(){return C(this,vl)}set kzg(e){e==null?L(this,vl,null):L(this,vl,O7e(e))}get hash(){return this.signature==null?null:Yr(he(this,V0,ex).call(this,!0,!1))}get unsignedHash(){return Yr(this.unsignedSerialized)}get from(){return this.signature==null?null:x7e(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:h_.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return he(this,V0,ex).call(this,!0,!0)}get unsignedSerialized(){return he(this,V0,ex).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=C(this,ig)!=null||C(this,Eh);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ye(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ye(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return pl.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new pl;if(typeof e=="string"){const r=Vt(e);if(r[0]>=127)return pl.from(L7e(r));switch(r[0]){case 1:return pl.from(F7e(r));case 2:return pl.from($7e(r));case 3:return pl.from(W7e(r));case 4:return pl.from(H7e(r))}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new pl;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=So.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Z(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Z(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};Cc=new WeakMap,M0=new WeakMap,L0=new WeakMap,U0=new WeakMap,$0=new WeakMap,B0=new WeakMap,F0=new WeakMap,j0=new WeakMap,W0=new WeakMap,z0=new WeakMap,H0=new WeakMap,G0=new WeakMap,ig=new WeakMap,Eh=new WeakMap,vl=new WeakMap,Ch=new WeakMap,q0=new WeakMap,V0=new WeakSet,ex=function(e,n){ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return U7e(this,r);case 1:return j7e(this,r);case 2:return B7e(this,r);case 3:return z7e(this,r,n?this.blobs:null);case 4:return G7e(this,r)}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let zI=pl;function em(t){return Yr(id(t))}var q7e="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const tW=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),nW=4;function V7e(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let _=1;_<r;_++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let w=0;for(let _=0;_<d;_++)w=w<<1|u();let y=[],b=0,v=h;for(;;){let _=Math.floor(((w-b+1)*s-1)/v),I=0,x=r;for(;x-I>1;){let O=I+x>>>1;_<i[O]?x=O:I=O}if(I==0)break;y.push(I);let N=b+Math.floor(v*i[I]/s),S=b+Math.floor(v*i[I+1]/s)-1;for(;!((N^S)&f);)w=w<<1&g|u(),N=N<<1&g,S=S<<1&g|1;for(;N&~S&p;)w=w&f|w<<1&g>>>1|u(),N=N<<1^f,S=(S^f)<<1|f|1;b=N,v=1+S-N}let A=r-4;return y.map(_=>{switch(_-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return _-1}})}function K7e(t){let e=0;return()=>t[e++]}function Rte(t){return K7e(V7e(Y7e(t)))}function Y7e(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function Q7e(t){return t&1?~t>>1:t>>1}function J7e(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=Q7e(e());return n}function f_(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Pte(t){return p_(()=>{let e=f_(t);if(e.length)return e})}function Ote(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(Z7e(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(X7e(n,t))}return e.flat()}function p_(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function kte(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)J7e(t,n).forEach((i,o)=>r[o].push(i));return r}function Z7e(t,e){let n=1+e(),r=e(),s=p_(e);return kte(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function X7e(t,e){let n=1+e();return kte(n,1+t,e).map(s=>[s[0],s.slice(1)])}function eWe(t){let e=[],n=f_(t);return s(r([]),[]),e;function r(i){let o=t(),a=p_(()=>{let c=f_(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function tWe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Dte(t){return`{${tWe(t)}}`}function nWe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function Zw(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function rWe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var sWe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const g_=44032,HI=4352,GI=4449,qI=4519,Mte=19,Lte=21,Xw=28,VI=Lte*Xw,iWe=Mte*VI,oWe=g_+iWe,aWe=HI+Mte,cWe=GI+Lte,lWe=qI+Xw;function Vv(t){return t>>24&255}function Ute(t){return t&16777215}let b5,rW,v5,tx;function uWe(){let t=Rte(sWe);b5=new Map(Pte(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),rW=new Set(f_(t)),v5=new Map,tx=new Map;for(let[e,n]of Ote(t)){if(!rW.has(e)&&n.length==2){let[r,s]=n,i=tx.get(r);i||(i=new Map,tx.set(r,i)),i.set(s,e)}v5.set(e,n.reverse())}}function $te(t){return t>=g_&&t<oWe}function dWe(t,e){if(t>=HI&&t<aWe&&e>=GI&&e<cWe)return g_+(t-HI)*VI+(e-GI)*Xw;if($te(t)&&e>qI&&e<lWe&&(t-g_)%Xw==0)return t+(e-qI);{let n=tx.get(t);return n&&(n=n.get(e),n)?n:-1}}function Bte(t){b5||uWe();let e=[],n=[],r=!1;function s(i){let o=b5.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if($te(i)){let o=i-g_,a=o/VI|0,c=o%VI/Xw|0,l=o%Xw;s(HI+a),s(GI+c),l>0&&s(qI+l)}else{let o=v5.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=Vv(e[0]);for(let o=1;o<e.length;o++){let a=Vv(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=Vv(e[--c]),i<=a))break}i=Vv(e[o])}}return e}function hWe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=Vv(i),a=Ute(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=dWe(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function Fte(t){return Bte(t).map(Ute)}function fWe(t){return hWe(Bte(t))}const sW=45,jte=".",Wte=65039,zte=1,KI=t=>Array.from(t);function m_(t,e){return t.P.has(e)||t.Q.has(e)}class pWe extends Array{get is_emoji(){return!0}}let E5,Hte,Up,C5,Gte,c0,l2,vy,lp,iW,_5;function b$(){if(E5)return;let t=Rte(q7e);const e=()=>f_(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));E5=new Map(Ote(t)),Hte=n(),Up=e(),C5=new Set(e().map(u=>Up[u])),Up=new Set(Up),Gte=n(),n();let s=Pte(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};c0=p_(u=>{let d=p_(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=Zw(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),l2=n(),vy=new Map;let a=e().concat(KI(l2)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),l2.has(u)||vy.set(u,f)});for(let{V:u,M:d}of new Set(vy.values())){let h=[];for(let p of u){let g=c0.filter(y=>m_(y,p)),w=h.find(({G:y})=>g.some(b=>y.has(b)));w||(w={G:new Set,V:[]},h.push(w)),w.V.push(p),r(w.G,g)}let f=h.flatMap(p=>KI(p.G));for(let{G:p,V:g}of h){let w=new Set(f.filter(y=>!p.has(y)));for(let y of g)d.set(y,w)}}lp=new Set;let c=new Set;const l=u=>lp.has(u)?c.add(u):lp.add(u);for(let u of c0){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of lp)!vy.has(u)&&!c.has(u)&&vy.set(u,zte);r(lp,Fte(lp)),iW=eWe(t).map(u=>pWe.from(u)).sort(rWe),_5=new Map;for(let u of iW){let d=[_5];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===Wte?d.push(...f):d=f}for(let h of d)h.V=u}}function v$(t){return(qte(t)?"":`${E$(sR([t]))} `)+Dte(t)}function E$(t){return`"${t}"‎`}function gWe(t){if(t.length>=4&&t[2]==sW&&t[3]==sW)throw new Error(`invalid label extension: "${Zw(t.slice(0,4))}"`)}function mWe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function yWe(t){let e=t[0],n=tW.get(e);if(n)throw DE(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=tW.get(e);if(o){if(s==i)throw DE(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw DE(`trailing ${n}`)}function sR(t,e=1/0,n=Dte){let r=[];wWe(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];qte(a)&&(r.push(Zw(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(Zw(t.slice(s,i))),r.join("")}function wWe(t){return b$(),Up.has(t)}function qte(t){return b$(),Gte.has(t)}function bWe(t){return _We(vWe(t,fWe,xWe))}function vWe(t,e,n){if(!t)return[];b$();let r=0;return t.split(jte).map(s=>{let i=nWe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=SWe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(mWe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))gWe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Up.has(u[0]))throw DE("leading combining mark");for(let g=1;g<c;g++){let w=a[g];if(!w.is_emoji&&Up.has(w[0]))throw DE(`emoji + combining mark: "${Zw(a[g-1])} + ${sR([w[0]])}"`)}yWe(u);let f=KI(new Set(h)),[p]=CWe(f);AWe(p,h),EWe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function EWe(t,e){let n,r=[];for(let s of e){let i=vy.get(s);if(i===zte)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):KI(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>m_(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function CWe(t){let e=c0;for(let n of t){let r=e.filter(s=>m_(s,n));if(!r.length)throw c0.some(s=>m_(s,n))?Kte(e[0],n):Vte(n);if(e=r,r.length==1)break}return e}function _We(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${E$(sR(e,63))}: ${s}`)}return Zw(r)}).join(jte)}function Vte(t){return new Error(`disallowed character: ${v$(t)}`)}function Kte(t,e){let n=v$(e),r=c0.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function DE(t){return new Error(`illegal placement: ${t}`)}function AWe(t,e){for(let n of e)if(!m_(t,n))throw Kte(t,n);if(t.M){let n=Fte(e);for(let r=1,s=n.length;r<s;r++)if(C5.has(n[r])){let i=r+1;for(let o;i<s&&C5.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${v$(o)}`);if(i-r>nW)throw new Error(`excessive non-spacing marks: ${E$(sR(n.slice(r-1,i)))} (${i-r}/${nW})`);r=i}}}function SWe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=IWe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(lp.has(o))s.push(o);else{let a=E5.get(o);if(a)s.push(...a);else if(!Hte.has(o))throw Vte(o)}}}return s.length&&r.push(e(s)),r}function xWe(t){return t.filter(e=>e!=Wte)}function IWe(t,e){let n=_5,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const Yte=new Uint8Array(32);Yte.fill(0);function oW(t){return Z(t.length!==0,"invalid ENS name; empty component","comp",t),t}function Qte(t){const e=id(NWe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(oW(e.slice(r,s))),r=s+1);return Z(r<e.length,"invalid ENS name; empty component","name",t),n.push(oW(e.slice(r))),n}function NWe(t){try{if(t.length===0)throw new Error("empty label");return bWe(t)}catch(e){Z(!1,`invalid ENS name (${e.message})`,"name",t)}}function A5(t){Z(typeof t=="string","invalid ENS name; not a string","name",t),Z(t.length,"invalid ENS name (empty label)","name",t);let e=Yte;const n=Qte(t);for(;n.length;)e=Yr(Lr([e,Yr(n.pop())]));return De(e)}function TWe(t,e){const n=e;return Z(n<=255,"DNS encoded label cannot exceed 255","length",n),De(Lr(Qte(t).map(r=>{Z(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const Jte=new Uint8Array(32);Jte.fill(0);const RWe=BigInt(-1),Zte=BigInt(0),Xte=BigInt(1),PWe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function OWe(t){const e=Vt(t),n=e.length%32;return n?Lr([e,Jte.slice(n)]):De(e)}const kWe=Nf(Xte,32),DWe=Nf(Zte,32),aW={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},u2=["name","version","chainId","verifyingContract","salt"];function cW(t){return function(e){return Z(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const MWe={name:cW("name"),version:cW("version"),chainId:function(t){const e=Ze(t,"domain.chainId");return Z(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Nc(e)},verifyingContract:function(t){try{return xn(t).toLowerCase()}catch{}Z(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Vt(t,"domain.salt");return Z(e.length===32,'invalid domain value "salt"',"domain.salt",t),De(e)}};function d2(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);Z(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=Gv(PWe,n?r-1:r),i=n?(s+Xte)*RWe:Zte;return function(o){const a=Ze(o,"value");return Z(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),Nf(n?Bee(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Z(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Vt(r);return Z(s.length===n,`invalid length for ${t}`,"value",r),OWe(r)}}}switch(t){case"address":return function(e){return wd(xn(e),32)};case"bool":return function(e){return e?kWe:DWe};case"bytes":return function(e){return Yr(e)};case"string":return function(e){return em(e)}}return null}function lW(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function lS(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var R_,Lu,K0,rN,ene;const Aa=class Aa{constructor(e){Q(this,rN);te(this,"primaryType");Q(this,R_);Q(this,Lu);Q(this,K0);L(this,Lu,new Map),L(this,K0,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=lS(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),L(this,R_,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){Z(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=lS(u.type).base;Z(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!d2(d)&&(Z(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);Z(o.length!==0,"missing primary type","types",e),Z(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),mt(this,{primaryType:o[0]});function a(c,l){Z(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),C(this,Lu).set(c,lW(c,i[c])+u.map(d=>lW(d,i[d])).join(""))}}get types(){return JSON.parse(C(this,R_))}getEncoder(e){let n=C(this,K0).get(e);return n||(n=he(this,rN,ene).call(this,e),C(this,K0).set(e,n)),n}encodeType(e){const n=C(this,Lu).get(e);return Z(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return Yr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(d2(e))return r(e,n);const s=lS(e).array;if(s)return Z(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});Z(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Aa(e)}static getPrimaryType(e){return Aa.from(e).primaryType}static hashStruct(e,n,r){return Aa.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=aW[r];Z(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>u2.indexOf(r.name)-u2.indexOf(s.name)),Aa.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Lr(["0x1901",Aa.hashDomain(e),Aa.from(n).hash(r)])}static hash(e,n,r){return Yr(Aa.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!ir(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Aa.from(n);o.visit(r,(a,c)=>(a==="address"&&!ir(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){Aa.hashDomain(e);const s={},i=[];u2.forEach(c=>{const l=e[c];l!=null&&(s[c]=MWe[c](l),i.push({name:c,type:aW[c]}))});const o=Aa.from(n);n=o.types;const a=Object.assign({},n);return Z(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return De(Vt(l));if(c.match(/^u?int/))return Ze(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return Z(typeof l=="string","invalid string","value",l),l}Z(!1,"unsupported type","type",c)})}}};R_=new WeakMap,Lu=new WeakMap,K0=new WeakMap,rN=new WeakSet,ene=function(e){{const s=d2(e);if(s)return s}const n=lS(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{Z(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return C(this,Lu).has(s)&&(a=a.map(Yr)),Yr(Lr(a))}}const r=this.types[e];if(r){const s=em(C(this,Lu).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return C(this,Lu).has(c)?Yr(l):l});return o.unshift(s),Lr(o)}}Z(!1,`unknown type: ${e}`,"type",e)};let YI=Aa;function Di(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const LWe="external public payable override",UWe=Di(LWe.split(" ")),tne="constant external internal payable private public pure view override",$We=Di(tne.split(" ")),nne="constructor error event fallback function receive struct",rne=Di(nne.split(" ")),sne="calldata memory storage payable indexed",BWe=Di(sne.split(" ")),FWe="tuple returns",jWe=[nne,sne,FWe,tne].join(" "),WWe=Di(jWe.split(" ")),zWe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},HWe=new RegExp("^(\\s*)"),GWe=new RegExp("^([0-9]+)"),qWe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),ine=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),one=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Us,_c,P_,S5;const sN=class sN{constructor(e){Q(this,P_);Q(this,Us);Q(this,_c);L(this,Us,0),L(this,_c,e.slice())}get offset(){return C(this,Us)}get length(){return C(this,_c).length-C(this,Us)}clone(){return new sN(C(this,_c))}reset(){L(this,Us,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=he(this,P_,S5).call(this,C(this,Us)+1,e.match+1);return L(this,Us,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;C(this,Us)<e.match-1;){const r=this.peek().linkNext;n.push(he(this,P_,S5).call(this,C(this,Us)+1,r)),L(this,Us,r)}return L(this,Us,e.match+1),n}peek(){if(C(this,Us)>=C(this,_c).length)throw new Error("out-of-bounds");return C(this,_c)[C(this,Us)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return xd(this,Us)._++,e}toString(){const e=[];for(let n=C(this,Us);n<C(this,_c).length;n++){const r=C(this,_c)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Us=new WeakMap,_c=new WeakMap,P_=new WeakSet,S5=function(e=0,n=0){return new sN(C(this,_c).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Vc=sN;function Bf(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(HWe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=zWe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Kt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(qWe),a){if(c.text=a[1],i+=c.text.length,WWe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(one)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(GWe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Vc(e.map(o=>Object.freeze(o)))}function uW(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function iR(t,e){if(e.peekKeyword(rne)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function bd(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function ane(t){let e=bd(t,$We);return uW(e,Di("constant payable nonpayable".split(" "))),uW(e,Di("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function od(t,e){return t.popParams().map(n=>qs.from(n,e))}function cne(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ze(t.pop().text);throw new Error("invalid gas")}return null}function tm(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const VWe=new RegExp(/^(.*)\[([0-9]*)\]$/);function dW(t){const e=t.match(one);if(Z(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);Z(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);Z(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const vr={},xo=Symbol.for("_ethers_internal"),hW="_ParamTypeInternal",fW="_ErrorInternal",pW="_EventInternal",gW="_ConstructorInternal",mW="_FallbackInternal",yW="_FunctionInternal",wW="_StructInternal";var Y0,nx;const Sa=class Sa{constructor(e,n,r,s,i,o,a,c){Q(this,Y0);te(this,"name");te(this,"type");te(this,"baseType");te(this,"indexed");te(this,"components");te(this,"arrayLength");te(this,"arrayChildren");if(YT(e,vr,"ParamType"),Object.defineProperty(this,xo,{value:hW}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");mt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return he(this,Y0,nx).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(Sa.isParamType(e))return e;if(typeof e=="string")try{return Sa.from(Bf(e),n)}catch{Z(!1,"invalid param type","obj",e)}else if(e instanceof Vc){let a="",c="",l=null;bd(e,Di(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>Sa.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=dW(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new Sa(vr,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(bd(e,BWe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Sa(vr,p,a,c,h,l,d,u)}const r=e.name;Z(!r||typeof r=="string"&&r.match(ine),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Z(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(VWe);if(o){const a=parseInt(o[2]||"-1"),c=Sa.from({type:o[1],components:e.components});return new Sa(vr,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>Sa.from(l)):null;return new Sa(vr,r||"",i,"tuple",s,a,null,null)}return i=dW(e.type),new Sa(vr,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[xo]===hW}};Y0=new WeakSet,nx=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;he(u=o,Y0,nx).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;he(u=o[l],Y0,nx).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let qs=Sa;class nm{constructor(e,n,r){te(this,"type");te(this,"inputs");YT(e,vr,"Fragment"),r=Object.freeze(r.slice()),mt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{nm.from(JSON.parse(e))}catch{}return nm.from(Bf(e))}if(e instanceof Vc)switch(e.peekKeyword(rne)){case"constructor":return Ju.from(e);case"error":return go.from(e);case"event":return Ul.from(e);case"fallback":case"receive":return Tu.from(e);case"function":return $l.from(e);case"struct":return _g.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Ju.from(e);case"error":return go.from(e);case"event":return Ul.from(e);case"fallback":case"receive":return Tu.from(e);case"function":return $l.from(e);case"struct":return _g.from(e)}ye(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Z(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Ju.isFragment(e)}static isError(e){return go.isFragment(e)}static isEvent(e){return Ul.isFragment(e)}static isFunction(e){return $l.isFragment(e)}static isStruct(e){return _g.isFragment(e)}}class oR extends nm{constructor(n,r,s,i){super(n,r,i);te(this,"name");Z(typeof s=="string"&&s.match(ine),"invalid identifier","name",s),i=Object.freeze(i.slice()),mt(this,{name:s})}}function y_(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class go extends oR{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,xo,{value:fW})}get selector(){return em(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+y_(e,this.inputs)),n.join(" ")}static from(e){if(go.isFragment(e))return e;if(typeof e=="string")return go.from(Bf(e));if(e instanceof Vc){const n=iR("error",e),r=od(e);return tm(e),new go(vr,n,r)}return new go(vr,e.name,e.inputs?e.inputs.map(qs.from):[])}static isFragment(e){return e&&e[xo]===fW}}class Ul extends oR{constructor(n,r,s,i){super(n,"event",r,s);te(this,"anonymous");Object.defineProperty(this,xo,{value:pW}),mt(this,{anonymous:i})}get topicHash(){return em(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+y_(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>qs.from(i)),new Ul(vr,n,r,!1).topicHash}static from(n){if(Ul.isFragment(n))return n;if(typeof n=="string")try{return Ul.from(Bf(n))}catch{Z(!1,"invalid event fragment","obj",n)}else if(n instanceof Vc){const r=iR("event",n),s=od(n,!0),i=!!bd(n,Di(["anonymous"])).has("anonymous");return tm(n),new Ul(vr,r,s,i)}return new Ul(vr,n.name,n.inputs?n.inputs.map(r=>qs.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[xo]===pW}}class Ju extends nm{constructor(n,r,s,i,o){super(n,r,s);te(this,"payable");te(this,"gas");Object.defineProperty(this,xo,{value:gW}),mt(this,{payable:i,gas:o})}format(n){if(ye(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${y_(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Ju.isFragment(n))return n;if(typeof n=="string")try{return Ju.from(Bf(n))}catch{Z(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Vc){bd(n,Di(["constructor"]));const r=od(n),s=!!bd(n,UWe).has("payable"),i=cne(n);return tm(n),new Ju(vr,"constructor",r,s,i)}return new Ju(vr,"constructor",n.inputs?n.inputs.map(qs.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[xo]===gW}}class Tu extends nm{constructor(n,r,s){super(n,"fallback",r);te(this,"payable");Object.defineProperty(this,xo,{value:mW}),mt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Tu.isFragment(n))return n;if(typeof n=="string")try{return Tu.from(Bf(n))}catch{Z(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Vc){const r=n.toString(),s=n.peekKeyword(Di(["fallback","receive"]));if(Z(s,"type must be fallback or receive","obj",r),n.popKeyword(Di(["fallback","receive"]))==="receive"){const c=od(n);return Z(c.length===0,"receive cannot have arguments","obj.inputs",c),bd(n,Di(["payable"])),tm(n),new Tu(vr,[],!0)}let o=od(n);o.length?Z(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[qs.from("bytes")];const a=ane(n);if(Z(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),bd(n,Di(["returns"])).has("returns")){const c=od(n);Z(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return tm(n),new Tu(vr,o,a==="payable")}if(n.type==="receive")return new Tu(vr,[],!0);if(n.type==="fallback"){const r=[qs.from("bytes")],s=n.stateMutability==="payable";return new Tu(vr,r,s)}Z(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[xo]===mW}}class $l extends oR{constructor(n,r,s,i,o,a){super(n,"function",r,i);te(this,"constant");te(this,"outputs");te(this,"stateMutability");te(this,"payable");te(this,"gas");Object.defineProperty(this,xo,{value:yW}),o=Object.freeze(o.slice()),mt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return em(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+y_(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(y_(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>qs.from(i)),new $l(vr,n,"view",r,[],null).selector}static from(n){if($l.isFragment(n))return n;if(typeof n=="string")try{return $l.from(Bf(n))}catch{Z(!1,"invalid function fragment","obj",n)}else if(n instanceof Vc){const s=iR("function",n),i=od(n),o=ane(n);let a=[];bd(n,Di(["returns"])).has("returns")&&(a=od(n));const c=cne(n);return tm(n),new $l(vr,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new $l(vr,n.name,r,n.inputs?n.inputs.map(qs.from):[],n.outputs?n.outputs.map(qs.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[xo]===yW}}class _g extends oR{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,xo,{value:wW})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return _g.from(Bf(e))}catch{Z(!1,"invalid struct fragment","obj",e)}else if(e instanceof Vc){const n=iR("struct",e),r=od(e);return tm(e),new _g(vr,n,r)}return new _g(vr,e.name,e.inputs?e.inputs.map(qs.from):[])}static isFragment(e){return e&&e[xo]===wW}}const Qc=new Map;Qc.set(0,"GENERIC_PANIC");Qc.set(1,"ASSERT_FALSE");Qc.set(17,"OVERFLOW");Qc.set(18,"DIVIDE_BY_ZERO");Qc.set(33,"ENUM_RANGE_ERROR");Qc.set(34,"BAD_STORAGE_DATA");Qc.set(49,"STACK_UNDERFLOW");Qc.set(50,"ARRAY_RANGE_ERROR");Qc.set(65,"OUT_OF_MEMORY");Qc.set(81,"UNINITIALIZED_FUNCTION_CALL");const KWe=new RegExp(/^bytes([0-9]*)$/),YWe=new RegExp(/^(u?int)([0-9]*)$/);let h2=null,bW=1024;function QWe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Vt(n);if(n=De(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(De(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(De(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Qc.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?xn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=xn(e.from)),pr(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var _h,Ey;const iN=class iN{constructor(){Q(this,_h)}getDefaultValue(e){const n=e.map(s=>he(this,_h,Ey).call(this,qs.from(s)));return new cS(n,"_").defaultValue()}encode(e,n){Lee(n.length,e.length,"types/values length mismatch");const r=e.map(o=>he(this,_h,Ey).call(this,qs.from(o))),s=new cS(r,"_"),i=new d5;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>he(this,_h,Ey).call(this,qs.from(o)));return new cS(s,"_").decode(new h5(n,r,bW))}static _setDefaultMaxInflation(e){Z(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),bW=e}static defaultAbiCoder(){return h2==null&&(h2=new iN),h2}static getBuiltinCallException(e,n,r){return QWe(e,n,r,iN.defaultAbiCoder())}};_h=new WeakSet,Ey=function(e){if(e.isArray())return new p7e(he(this,_h,Ey).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new cS(e.components.map(r=>he(this,_h,Ey).call(this,r)),e.name);switch(e.baseType){case"address":return new h7e(e.name);case"bool":return new g7e(e.name);case"string":return new A7e(e.name);case"bytes":return new m7e(e.name);case"":return new b7e(e.name)}let n=e.type.match(YWe);if(n){let r=parseInt(n[2]||"256");return Z(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new _7e(r/8,n[1]==="int",e.name)}if(n=e.type.match(KWe),n){let r=parseInt(n[1]);return Z(r!==0&&r<=32,"invalid bytes length","param",e),new y7e(r,e.name)}Z(!1,"invalid type","type",e.type)};let w_=iN;class JWe{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"signature");te(this,"topic");te(this,"args");const s=e.name,i=e.format();mt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class ZWe{constructor(e,n,r,s){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");te(this,"value");const i=e.name,o=e.format();mt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class XWe{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");const s=e.name,i=e.format();mt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class vW{constructor(e){te(this,"hash");te(this,"_isIndexed");mt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const EW={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},CW={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&EW[t.toString()]&&(e=EW[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var El,Cl,_l,li,Kl,rx,sx;const Ep=class Ep{constructor(e){Q(this,Kl);te(this,"fragments");te(this,"deploy");te(this,"fallback");te(this,"receive");Q(this,El);Q(this,Cl);Q(this,_l);Q(this,li);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,L(this,_l,new Map),L(this,El,new Map),L(this,Cl,new Map);const r=[];for(const o of n)try{r.push(nm.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}mt(this,{fragments:Object.freeze(r)});let s=null,i=!1;L(this,li,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}mt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Z(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=C(this,_l);break;case"event":c=C(this,Cl);break;case"error":c=C(this,El);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||mt(this,{deploy:Ju.from("constructor()")}),mt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return w_.defaultAbiCoder()}getFunctionName(e){const n=he(this,Kl,rx).call(this,e,null,!1);return Z(n,"no matching function","key",e),n.name}hasFunction(e){return!!he(this,Kl,rx).call(this,e,null,!1)}getFunction(e,n){return he(this,Kl,rx).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(C(this,_l).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,_l).get(s),r)}}getEventName(e){const n=he(this,Kl,sx).call(this,e,null,!1);return Z(n,"no matching event","key",e),n.name}hasEvent(e){return!!he(this,Kl,sx).call(this,e,null,!1)}getEvent(e,n){return he(this,Kl,sx).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(C(this,Cl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,Cl).get(s),r)}}getError(e,n){if(ir(e)){const s=e.toLowerCase();if(CW[s])return go.from(CW[s].signature);for(const i of C(this,El).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of C(this,El))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?go.from("error Error(string)"):e==="Panic"?go.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Z(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=go.from(e).format(),e==="Error(string)")return go.from("error Error(string)");if(e==="Panic(uint256)")return go.from("error Panic(uint256)");const r=C(this,El).get(e);return r||null}forEachError(e){const n=Array.from(C(this,El).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,El).get(s),r)}}_decodeParams(e,n){return C(this,li).decode(e,n)}_encodeParams(e,n){return C(this,li).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Z(r,"unknown error","fragment",e),e=r}return Z(Pr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,Pr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Z(r,"unknown error","fragment",e),e=r}return Lr([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Z(Pr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,Pr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Lr([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);Z(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=Ri(n);if(s.length%32===0)try{return C(this,li).decode(e.outputs,s)}catch{r="could not decode result data"}ye(!1,r,"BAD_DATA",{value:De(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Vt(e,"data"),s=w_.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=De(r.slice(0,4)),c=this.getError(a);if(c)try{const l=C(this,li).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return De(C(this,li).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);Z(i,"unknown event","eventFragment",e),e=i}ye(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?em(o):i.type==="bytes"?Yr(De(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Nf(o):i.type.match(/^bytes/)?o=bje(o,32):i.type==="address"&&C(this,li).encode(["address"],[o]),wd(De(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){Z(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Z(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);Z(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Z(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(em(c));else if(o.type==="bytes")r.push(Yr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(C(this,li).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:C(this,li).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);Z(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;Z(ir(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(qs.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?C(this,li).decode(s,Lr(r)):null,c=C(this,li).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new vW(null);else if(o[p])g=new vW(a[h++]);else try{g=a[h++]}catch(w){g=w}else try{g=c[d++]}catch(w){g=w}l.push(g),u.push(f.name||null)}),Vw.fromItems(l,u)}parseTransaction(e){const n=Vt(e.data,"tx.data"),r=Ze(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(De(n.slice(0,4)));if(!s)return null;const i=C(this,li).decode(s.inputs,n.slice(4));return new ZWe(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new JWe(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=De(e),r=this.getError(Pr(n,0,4));if(!r)return null;const s=C(this,li).decode(r.inputs,Pr(n,4));return new XWe(r,r.selector,s)}static from(e){return e instanceof Ep?e:typeof e=="string"?new Ep(JSON.parse(e)):typeof e.formatJson=="function"?new Ep(e.formatJson()):typeof e.format=="function"?new Ep(e.format("json")):new Ep(e)}};El=new WeakMap,Cl=new WeakMap,_l=new WeakMap,li=new WeakMap,Kl=new WeakSet,rx=function(e,n,r){if(ir(e)){const i=e.toLowerCase();for(const o of C(this,_l).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of C(this,_l))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;pi.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(pi.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Z(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=C(this,_l).get($l.from(e).format());return s||null},sx=function(e,n,r){if(ir(e)){const i=e.toLowerCase();for(const o of C(this,Cl).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of C(this,Cl))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(pi.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Z(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=C(this,Cl).get(Ul.from(e).format());return s||null};let x5=Ep;const lne=BigInt(0);function l0(t){return t??null}function Br(t){return t==null?null:t.toString()}class _W{constructor(e,n,r){te(this,"gasPrice");te(this,"maxFeePerGas");te(this,"maxPriorityFeePerGas");mt(this,{gasPrice:l0(e),maxFeePerGas:l0(n),maxPriorityFeePerGas:l0(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Br(e),maxFeePerGas:Br(n),maxPriorityFeePerGas:Br(r)}}}function QI(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=De(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Ze(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Kt(t[s],`request.${s}`));return t.accessList&&(e.accessList=xm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>c$(s)?De(s):Object.assign({},s))),e}var Uu;class eze{constructor(e,n){te(this,"provider");te(this,"number");te(this,"hash");te(this,"timestamp");te(this,"parentHash");te(this,"parentBeaconBlockRoot");te(this,"nonce");te(this,"difficulty");te(this,"gasLimit");te(this,"gasUsed");te(this,"stateRoot");te(this,"receiptsRoot");te(this,"blobGasUsed");te(this,"excessBlobGas");te(this,"miner");te(this,"prevRandao");te(this,"extraData");te(this,"baseFeePerGas");Q(this,Uu);L(this,Uu,e.transactions.map(r=>typeof r!="string"?new b_(r,n):r)),mt(this,{provider:n,hash:l0(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:l0(e.prevRandao),extraData:e.extraData,baseFeePerGas:l0(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return C(this,Uu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=C(this,Uu).slice();return e.length===0?[]:(ye(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:w}=this;return{_type:"Block",baseFeePerGas:Br(e),difficulty:Br(n),extraData:r,gasLimit:Br(s),gasUsed:Br(i),blobGasUsed:Br(this.blobGasUsed),excessBlobGas:Br(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:w}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return C(this,Uu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=C(this,Uu)[e];else{const r=e.toLowerCase();for(const s of C(this,Uu))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;Z(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return tze(this)}}Uu=new WeakMap;class M1{constructor(e,n){te(this,"provider");te(this,"transactionHash");te(this,"blockHash");te(this,"blockNumber");te(this,"removed");te(this,"address");te(this,"data");te(this,"topics");te(this,"index");te(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());mt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ye(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return nze(this)}}var O_;class une{constructor(e,n){te(this,"provider");te(this,"to");te(this,"from");te(this,"contractAddress");te(this,"hash");te(this,"index");te(this,"blockHash");te(this,"blockNumber");te(this,"logsBloom");te(this,"gasUsed");te(this,"blobGasUsed");te(this,"cumulativeGasUsed");te(this,"gasPrice");te(this,"blobGasPrice");te(this,"type");te(this,"status");te(this,"root");Q(this,O_);L(this,O_,Object.freeze(e.logs.map(s=>new M1(s,n))));let r=lne;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),mt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return C(this,O_)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Br(this.cumulativeGasUsed),from:n,gasPrice:Br(this.gasPrice),blobGasUsed:Br(this.blobGasUsed),blobGasPrice:Br(this.blobGasPrice),gasUsed:Br(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return hne(this)}reorderedEvent(e){return ye(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),dne(this,e)}}O_=new WeakMap;var Ah;const k$=class k${constructor(e,n){te(this,"provider");te(this,"blockNumber");te(this,"blockHash");te(this,"index");te(this,"hash");te(this,"type");te(this,"to");te(this,"from");te(this,"nonce");te(this,"gasLimit");te(this,"gasPrice");te(this,"maxPriorityFeePerGas");te(this,"maxFeePerGas");te(this,"maxFeePerBlobGas");te(this,"data");te(this,"value");te(this,"chainId");te(this,"signature");te(this,"accessList");te(this,"blobVersionedHashes");te(this,"authorizationList");Q(this,Ah);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,L(this,Ah,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Br(this.chainId),data:l,from:a,gasLimit:Br(this.gasLimit),gasPrice:Br(this.gasPrice),hash:s,maxFeePerGas:Br(this.maxFeePerGas),maxPriorityFeePerGas:Br(this.maxPriorityFeePerGas),maxFeePerBlobGas:Br(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Br(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await xi({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=C(this,Ah),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await xi({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<C(this,Ah)&&(o=C(this,Ah)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const w of g)if(w===this.hash)return;for(let w=0;w<g.length;w++){const y=await g.getTransaction(w);if(y.from===this.from&&y.nonce===this.nonce){if(a)return null;const b=await this.provider.getTransactionReceipt(y.hash);if(b==null||h-b.blockNumber+1<r)return;let v="replaced";y.data===this.data&&y.to===this.to&&y.value===this.value?v="repriced":y.data==="0x"&&y.from===y.to&&y.value===lne&&(v="cancelled"),ye(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:y.replaceableTransaction(i),hash:y.hash,receipt:b})}}o++}},l=h=>{if(h==null||h.status!==0)return h;ye(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(y=>y())};if(p.push(()=>{a=!0}),s>0){const y=setTimeout(()=>{g(),f(pr("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(y)})}const w=async y=>{if(await y.confirmations()>=r){g();try{h(l(y))}catch(b){f(b)}}};if(p.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),i>=0){const y=async()=>{try{await c()}catch(b){if(Ws(b,"TRANSACTION_REPLACED")){g(),f(b);return}}a||this.provider.once("block",y)};p.push(()=>{this.provider.off("block",y)}),this.provider.once("block",y)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),hne(this)}reorderedEvent(e){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ye(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),dne(this,e)}replaceableTransaction(e){Z(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new k$(this,this.provider);return L(n,Ah,e),n}};Ah=new WeakMap;let b_=k$;function tze(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function dne(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function hne(t){return{orphan:"drop-transaction",tx:t}}function nze(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class C$ extends M1{constructor(n,r,s){super(n,n.provider);te(this,"interface");te(this,"fragment");te(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);mt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class fne extends M1{constructor(n,r){super(n,n.provider);te(this,"error");mt(this,{error:r})}}var Q0;class rze extends une{constructor(n,r,s){super(s,r);Q(this,Q0);L(this,Q0,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?C(this,Q0).getEvent(n.topics[0]):null;if(r)try{return new C$(n,C(this,Q0),r)}catch(s){return new fne(n,s)}return n})}}Q0=new WeakMap;var k_;class _$ extends b_{constructor(n,r,s){super(s,r);Q(this,k_);L(this,k_,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new rze(C(this,k_),this.provider,s)}}k_=new WeakMap;class pne extends Fee{constructor(n,r,s,i){super(n,r,s);te(this,"log");mt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class sze extends pne{constructor(e,n,r,s,i){super(e,n,r,new C$(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);mt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const AW=BigInt(0);function gne(t){return t&&typeof t.call=="function"}function mne(t){return t&&typeof t.estimateGas=="function"}function aR(t){return t&&typeof t.resolveName=="function"}function yne(t){return t&&typeof t.sendTransaction=="function"}function wne(t){if(t!=null){if(aR(t))return t;if(t.provider)return t.provider}}var D_;class ize{constructor(e,n,r){Q(this,D_);te(this,"fragment");if(mt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=rm(e.runner,"resolveName"),i=aR(s)?s:null;L(this,D_,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>ki(h,i))):ki(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return C(this,D_)}}D_=new WeakMap;function rm(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function $p(t){return t==null?null:t.provider||null}async function bne(t,e){const n=pi.dereference(t,"overrides");Z(typeof n=="object","invalid overrides parameter","overrides",t);const r=QI(n);return Z(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Z(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function oze(t,e,n){const r=rm(t,"resolveName"),s=aR(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=pi.dereference(c,a),a==="address"?ki(c,s):c))))}function aze(t){const e=async function(o){const a=await bne(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await ki(a.from,wne(t.runner)));const c=t.interface,l=Ze(a.value||AW,"overrides.value")===AW,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&Z(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Z(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return Z(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),Z(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=rm(t.runner,"call");ye(gne(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw a$(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;ye(yne(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=$p(t.runner);return new _$(t.interface,l,c)},s=async function(o){const a=rm(t.runner,"estimateGas");return ye(mne(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return mt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function cze(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return ye(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await bne(l.pop()),d.from&&(d.from=await ki(d.from,wne(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await oze(t.runner,u.inputs,l);return Object.assign({},d,await xi({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;ye(yne(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=$p(t.runner);return new _$(t.interface,h,d)},o=async function(...l){const u=rm(t.runner,"estimateGas");return ye(mne(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=rm(t.runner,"call");ye(gne(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw a$(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return mt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return ye(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function lze(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return ye(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new ize(t,n(...s),s)};return mt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return ye(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const JI=Symbol.for("_ethersInternal_contract"),vne=new WeakMap;function uze(t,e){vne.set(t[JI],e)}function Bo(t){return vne.get(t[JI])}function dze(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function A$(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(ir(o,32))return o;const a=t.interface.getEvent(o);return Z(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?ir(e,32)?n=[e]:(r=t.interface.getEvent(e),Z(r,"unknown fragment","event",e),n=[r.topicHash]):dze(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):Z(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function Kv(t,e){const{subs:n}=Bo(t);return n.get((await A$(t,e)).tag)||null}async function SW(t,e,n){const r=$p(t.runner);ye(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await A$(t,n),{addr:a,subs:c}=Bo(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=w=>{let y=s;if(y==null)try{y=t.interface.getEvent(w.topics[0])}catch{}if(y){const b=y,v=s?t.interface.decodeEventLog(s,w.data,w.topics):[];N5(t,n,v,A=>new sze(t,A,n,b,w))}else N5(t,n,[],b=>new pne(t,b,n,w))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let w=f;f=[],await Promise.all(w),r.off(d,h)}},c.set(i,l)}return l}let I5=Promise.resolve();async function hze(t,e,n,r){await I5;const s=await Kv(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Bo(t).subs.delete(s.tag)),i>0}async function N5(t,e,n,r){try{await I5}catch{}const s=hze(t,e,n,r);return I5=s,await s}const uS=["then"];var hz;hz=JI;const ME=class ME{constructor(e,n,r,s){te(this,"target");te(this,"interface");te(this,"runner");te(this,"filters");te(this,hz);te(this,"fallback");Z(typeof e=="string"||Ste(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=x5.from(n);mt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,JI,{value:{}});let o,a=null,c=null;if(s){const d=$p(r);c=new _$(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(ir(e))a=e,o=Promise.resolve(e);else{const d=rm(r,"resolveName");if(!aR(d))throw pr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw pr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Bo(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Bo(this).addr=d,d});uze(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||uS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!Ws(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>uS.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return mt(this,{filters:u}),mt(this,{fallback:i.receive||i.fallback?aze(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||uS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!Ws(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||uS.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new ME(this.target,this.interface,e)}attach(e){return new ME(e,this.interface,this.runner)}async getAddress(){return await Bo(this).addrPromise}async getDeployedCode(){const e=$p(this.runner);ye(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=$p(this.runner);return ye(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Bo(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),cze(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),lze(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Bo(this),o=s||await i,{fragment:a,topics:c}=await A$(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=$p(this.runner);return ye(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new C$(d,this.interface,h)}catch(f){return new fne(d,f)}return new M1(d,u)})}async on(e,n){const r=await SW(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await SW(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await N5(this,e,n,null)}async listenerCount(e){if(e){const s=await Kv(this,e);return s?s.listeners.length:0}const{subs:n}=Bo(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await Kv(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Bo(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await Kv(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Bo(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Kv(this,e);if(!n)return this;n.stop(),Bo(this).subs.delete(n.tag)}else{const{subs:n}=Bo(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends ME{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let T5=ME;function fze(){return T5}class u0 extends fze(){}function f2(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Z(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class pze{constructor(e){te(this,"name");mt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const Ene=new RegExp("^(ipfs)://(.*)$","i"),xW=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Ene,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Sh,og,xh,Cy,oN,Cne;const Hy=class Hy{constructor(e,n,r){Q(this,xh);te(this,"provider");te(this,"address");te(this,"name");Q(this,Sh);Q(this,og);mt(this,{provider:e,address:n,name:r}),L(this,Sh,null),L(this,og,new u0(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return C(this,Sh)==null&&L(this,Sh,(async()=>{try{return await C(this,og).supportsInterface("0x9061b923")}catch(e){if(Ws(e,"CALL_EXCEPTION"))return!1;throw L(this,Sh,null),e}})()),await C(this,Sh)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await he(this,xh,Cy).call(this,"addr(bytes32)");return i==null||i===d_?null:i}catch(i){if(Ws(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await he(this,xh,Cy).call(this,"addr(bytes32,uint)",[i]);if(ir(o,20))return xn(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof pze&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await he(this,xh,Cy).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;ye(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await he(this,xh,Cy).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await he(this,xh,Cy).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${Cje("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;ye(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<xW.length;r++){const s=n.match(xW[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=f2(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new u0(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",Nf(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=f2(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new Tf(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const y=f.body;return y&&e.push({type:"!metadata",value:De(y)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(Ene)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=f2(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return ye(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await he(s=Hy,oN,Cne).call(s,e,r);if(i!=null){const o=new Hy(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Sh=new WeakMap,og=new WeakMap,xh=new WeakSet,Cy=async function(e,n){n=(n||[]).slice();const r=C(this,og).interface;n.unshift(A5(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),ye(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[TWe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await C(this,og)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Ws(i,"CALL_EXCEPTION"))throw i}return null},oN=new WeakSet,Cne=async function(e,n){const r=await Hy.getEnsAddress(e);try{const i=await new u0(r,["function resolver(bytes32) view returns (address)"],e).resolver(A5(n),{enableCcipRead:!0});return i===d_?null:i}catch(s){throw s}return null},Q(Hy,oN);let ZI=Hy;const IW=BigInt(0);function rn(t,e){return function(n){return n==null?e:t(n)}}function v_(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function L1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ye(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function gze(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}Z(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function eb(t){return Z(ir(t,!0),"invalid data","value",t),t}function js(t){return Z(ir(t,32),"invalid hash","value",t),t}const mze=L1({address:xn,blockHash:js,blockNumber:Kt,data:eb,index:Kt,removed:rn(gze,!1),topics:v_(js),transactionHash:js,transactionIndex:Kt},{index:["logIndex"]});function yze(t){return mze(t)}const wze=L1({hash:rn(js),parentHash:js,parentBeaconBlockRoot:rn(js,null),number:Kt,timestamp:Kt,nonce:rn(eb),difficulty:Ze,gasLimit:Ze,gasUsed:Ze,stateRoot:rn(js,null),receiptsRoot:rn(js,null),blobGasUsed:rn(Ze,null),excessBlobGas:rn(Ze,null),miner:rn(xn),prevRandao:rn(js,null),extraData:eb,baseFeePerGas:rn(Ze)},{prevRandao:["mixHash"]});function bze(t){const e=wze(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:_ne(n)),e}const vze=L1({transactionIndex:Kt,blockNumber:Kt,transactionHash:js,address:xn,topics:v_(js),data:eb,index:Kt,blockHash:js},{index:["logIndex"]});function Eze(t){return vze(t)}const Cze=L1({to:rn(xn,null),from:rn(xn,null),contractAddress:rn(xn,null),index:Kt,root:rn(De),gasUsed:Ze,blobGasUsed:rn(Ze,null),logsBloom:rn(eb),blockHash:js,hash:js,logs:v_(Eze),blockNumber:Kt,cumulativeGasUsed:Ze,effectiveGasPrice:rn(Ze),blobGasPrice:rn(Ze,null),status:rn(Kt),type:rn(Kt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function _ze(t){return Cze(t)}function _ne(t){t.to&&Ze(t.to)===IW&&(t.to="0x0000000000000000000000000000000000000000");const e=L1({hash:js,index:rn(Kt,void 0),type:n=>n==="0x"||n==null?0:Kt(n),accessList:rn(xm,null),blobVersionedHashes:rn(v_(js,!0),null),authorizationList:rn(v_(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:xn(n.address),chainId:Ze(n.chainId),nonce:Ze(n.nonce),signature:So.from(r)}},!1),null),blockHash:rn(js,null),blockNumber:rn(Kt,null),transactionIndex:rn(Kt,null),from:xn,gasPrice:rn(Ze),maxPriorityFeePerGas:rn(Ze),maxFeePerGas:rn(Ze),maxFeePerBlobGas:rn(Ze,null),gasLimit:Ze,to:rn(xn,null),value:Ze,nonce:Kt,data:eb,creates:rn(xn,null),chainId:rn(Ze,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=d7e(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=So.from(t.signature):e.signature=So.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Ze(e.blockHash)===IW&&(e.blockHash=null),e}const Aze="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class U1{constructor(e){te(this,"name");mt(this,{name:e})}clone(){return new U1(this.name)}}class cR extends U1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);te(this,"effectiveBlock");te(this,"txBase");te(this,"txCreate");te(this,"txDataZero");te(this,"txDataNonzero");te(this,"txAccessListStorageKey");te(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),Z(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),mt(this,s)}clone(){return new cR(this.effectiveBlock,this)}}class lR extends U1{constructor(n,r){super("org.ethers.plugins.network.Ens");te(this,"address");te(this,"targetNetwork");mt(this,{address:n||Aze,targetNetwork:r??1})}clone(){return new lR(this.address,this.targetNetwork)}}var M_,L_;class Sze extends U1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Q(this,M_);Q(this,L_);L(this,M_,n),L(this,L_,r)}get url(){return C(this,M_)}get processFunc(){return C(this,L_)}clone(){return this}}M_=new WeakMap,L_=new WeakMap;const p2=new Map;var J0,Z0,Ih;const Gy=class Gy{constructor(e,n){Q(this,J0);Q(this,Z0);Q(this,Ih);L(this,J0,e),L(this,Z0,Ze(n)),L(this,Ih,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return C(this,J0)}set name(e){L(this,J0,e)}get chainId(){return C(this,Z0)}set chainId(e){L(this,Z0,Ze(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ze(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ze(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ze(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(C(this,Ih).values())}attachPlugin(e){if(C(this,Ih).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return C(this,Ih).set(e.name,e.clone()),this}getPlugin(e){return C(this,Ih).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Gy(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new cR;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=xm(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(xze(),e==null)return Gy.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=p2.get(e);if(n)return n();if(typeof e=="bigint")return new Gy("unknown",e);Z(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Z(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Gy(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new lR(e.ensAddress,e.ensNetwork)),n}Z(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=p2.get(e);r&&Z(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),p2.set(e,n)}};J0=new WeakMap,Z0=new WeakMap,Ih=new WeakMap;let Fl=Gy;function NW(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function TW(t){return new Sze(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:NW(a.maxFee,9),maxPriorityFeePerGas:NW(a.maxPriorityFee,9)}}catch(i){ye(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let RW=!1;function xze(){if(RW)return;RW=!0;function t(e,n,r){const s=function(){const i=new Fl(e,n);return r.ensNetwork!=null&&i.attachPlugin(new lR(null,r.ensNetwork)),i.attachPlugin(new cR),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Fl.register(e,s),Fl.register(n,s),r.altNames&&r.altNames.forEach(i=>{Fl.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[TW("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[TW("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function R5(t){return JSON.parse(JSON.stringify(t))}var $u,Na,Nh,Al,X0,ix;class Ize{constructor(e){Q(this,X0);Q(this,$u);Q(this,Na);Q(this,Nh);Q(this,Al);L(this,$u,e),L(this,Na,null),L(this,Nh,4e3),L(this,Al,-2)}get pollingInterval(){return C(this,Nh)}set pollingInterval(e){L(this,Nh,e)}start(){C(this,Na)||(L(this,Na,C(this,$u)._setTimeout(he(this,X0,ix).bind(this),C(this,Nh))),he(this,X0,ix).call(this))}stop(){C(this,Na)&&(C(this,$u)._clearTimeout(C(this,Na)),L(this,Na,null))}pause(e){this.stop(),e&&L(this,Al,-2)}resume(){this.start()}}$u=new WeakMap,Na=new WeakMap,Nh=new WeakMap,Al=new WeakMap,X0=new WeakSet,ix=async function(){try{const e=await C(this,$u).getBlockNumber();if(C(this,Al)===-2){L(this,Al,e);return}if(e!==C(this,Al)){for(let n=C(this,Al)+1;n<=e;n++){if(C(this,Na)==null)return;await C(this,$u).emit("block",n)}L(this,Al,e)}}catch{}C(this,Na)!=null&&L(this,Na,C(this,$u)._setTimeout(he(this,X0,ix).bind(this),C(this,Nh)))};var ag,cg,Th;class S${constructor(e){Q(this,ag);Q(this,cg);Q(this,Th);L(this,ag,e),L(this,Th,!1),L(this,cg,n=>{this._poll(n,C(this,ag))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){C(this,Th)||(L(this,Th,!0),C(this,cg).call(this,-2),C(this,ag).on("block",C(this,cg)))}stop(){C(this,Th)&&(L(this,Th,!1),C(this,ag).off("block",C(this,cg)))}pause(e){this.stop()}resume(){this.start()}}ag=new WeakMap,cg=new WeakMap,Th=new WeakMap;var ew,Bu;class Nze extends S${constructor(n,r){super(n);Q(this,ew);Q(this,Bu);L(this,ew,r),L(this,Bu,-2)}pause(n){n&&L(this,Bu,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(C(this,ew));s!=null&&(C(this,Bu)===-2?L(this,Bu,s.number):s.number>C(this,Bu)&&(r.emit(C(this,ew),s.number),L(this,Bu,s.number)))}}ew=new WeakMap,Bu=new WeakMap;var aN;class Tze extends S${constructor(n,r){super(n);Q(this,aN);L(this,aN,R5(r))}async _poll(n,r){throw new Error("@TODO")}}aN=new WeakMap;var tw;class Rze extends S${constructor(n,r){super(n);Q(this,tw);L(this,tw,r)}async _poll(n,r){const s=await r.getTransactionReceipt(C(this,tw));s&&r.emit(C(this,tw),s)}}tw=new WeakMap;var Fu,nw,rw,Rh,Ta,cN,Ane;class x${constructor(e,n){Q(this,cN);Q(this,Fu);Q(this,nw);Q(this,rw);Q(this,Rh);Q(this,Ta);L(this,Fu,e),L(this,nw,R5(n)),L(this,rw,he(this,cN,Ane).bind(this)),L(this,Rh,!1),L(this,Ta,-2)}start(){C(this,Rh)||(L(this,Rh,!0),C(this,Ta)===-2&&C(this,Fu).getBlockNumber().then(e=>{L(this,Ta,e)}),C(this,Fu).on("block",C(this,rw)))}stop(){C(this,Rh)&&(L(this,Rh,!1),C(this,Fu).off("block",C(this,rw)))}pause(e){this.stop(),e&&L(this,Ta,-2)}resume(){this.start()}}Fu=new WeakMap,nw=new WeakMap,rw=new WeakMap,Rh=new WeakMap,Ta=new WeakMap,cN=new WeakSet,Ane=async function(e){if(C(this,Ta)===-2)return;const n=R5(C(this,nw));n.fromBlock=C(this,Ta)+1,n.toBlock=e;const r=await C(this,Fu).getLogs(n);if(r.length===0){C(this,Ta)<e-60&&L(this,Ta,e-60);return}for(const s of r)C(this,Fu).emit(C(this,nw),s),L(this,Ta,s.blockNumber)};const Pze=BigInt(2),Oze=10;function dS(t){return t&&typeof t.then=="function"}function ox(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class Sne{constructor(e){te(this,"name");mt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function kze(t){return JSON.parse(JSON.stringify(t))}function P5(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function g2(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(ir(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:ox("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:ox("orphan",n),filter:kze(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?P5(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{ir(a)?s.push(a):i.push((async()=>{s.push(await ki(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=P5(s.map(a=>a.toLowerCase()))}return{filter:r,tag:ox("event",r),type:"event"}}Z(!1,"unknown ProviderEvent","event",t)}function m2(){return new Date().getTime()}const Dze={cacheTimeout:250,pollingInterval:4e3};var ui,Ph,di,sw,zo,lg,Oh,ju,U_,Ra,iw,ow,Ht,Lo,O5,k5,Yv,D5,Qv,ax;class Mze{constructor(e,n){Q(this,Ht);Q(this,ui);Q(this,Ph);Q(this,di);Q(this,sw);Q(this,zo);Q(this,lg);Q(this,Oh);Q(this,ju);Q(this,U_);Q(this,Ra);Q(this,iw);Q(this,ow);if(L(this,ow,Object.assign({},Dze,n||{})),e==="any")L(this,lg,!0),L(this,zo,null);else if(e){const r=Fl.from(e);L(this,lg,!1),L(this,zo,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else L(this,lg,!1),L(this,zo,null);L(this,ju,-1),L(this,Oh,new Map),L(this,ui,new Map),L(this,Ph,new Map),L(this,di,null),L(this,sw,!1),L(this,U_,1),L(this,Ra,new Map),L(this,iw,!1)}get pollingInterval(){return C(this,ow).pollingInterval}get provider(){return this}get plugins(){return Array.from(C(this,Ph).values())}attachPlugin(e){if(C(this,Ph).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return C(this,Ph).set(e.name,e.connect(this)),this}getPlugin(e){return C(this,Ph).get(e)||null}get disableCcipRead(){return C(this,iw)}set disableCcipRead(e){L(this,iw,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Tf(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}ye(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}ye(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new eze(bze(e),this)}_wrapLog(e,n){return new M1(yze(e),this)}_wrapTransactionReceipt(e,n){return new une(_ze(e),this)}_wrapTransactionResponse(e,n){return new b_(_ne(e),this)}_detectNetwork(){ye(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ye(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Kt(await he(this,Ht,Lo).call(this,{method:"getBlockNumber"}),"%response");return C(this,ju)>=0&&L(this,ju,e),e}_getAddress(e){return ki(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(ir(e))return ir(e,32)?e:Nc(e);if(typeof e=="bigint"&&(e=Kt(e,"blockTag")),typeof e=="number")return e>=0?Nc(e):C(this,ju)>=0?Nc(C(this,ju)+e):this.getBlockNumber().then(n=>Nc(n+e));Z(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?P5(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=QI(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=ki(n[s],this);dS(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);dS(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(C(this,zo)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw C(this,zo)===s&&L(this,zo,null),i}})();return L(this,zo,s),(await s).clone()}const e=C(this,zo),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(C(this,lg)?(this.emit("network",r,n),C(this,zo)===e&&L(this,zo,Promise.resolve(r))):ye(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await xi({_block:he(this,Ht,D5).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await he(this,Ht,Lo).call(this,{method:"getGasPrice"});return Ze(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await he(this,Ht,Lo).call(this,{method:"getPriorityFee"});return Ze(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*Pze+c),new _W(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Tf(r.url),i=await r.processFunc(n,this,s);return new _W(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return dS(n)&&(n=await n),Ze(await he(this,Ht,Lo).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await xi({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await he(this,Ht,k5).call(this,he(this,Ht,O5).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Ze(await he(this,Ht,Yv).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Kt(await he(this,Ht,Yv).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return De(await he(this,Ht,Yv).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Ze(n,"position");return De(await he(this,Ht,Yv).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await xi({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=zI.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await xi({network:this.getNetwork(),params:he(this,Ht,D5).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await xi({network:this.getNetwork(),params:he(this,Ht,Lo).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await xi({network:this.getNetwork(),params:he(this,Ht,Lo).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await he(this,Ht,Lo).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await xi({network:this.getNetwork(),result:he(this,Ht,Lo).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:De(n)}async getLogs(e){let n=this._getFilter(e);dS(n)&&(n=await n);const{network:r,params:s}=await xi({network:this.getNetwork(),params:he(this,Ht,Lo).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){ye(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await ZI.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=xn(e);const n=A5(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await ZI.getEnsAddress(this),i=await new u0(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===d_)return null;const a=await new u0(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Ws(r,"BAD_DATA")&&r.value==="0x"||Ws(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(pr("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){ye(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=C(this,Ra).get(e);n&&(n.timer&&clearTimeout(n.timer),C(this,Ra).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=xd(this,U_)._++,s=()=>{C(this,Ra).delete(r),e()};if(this.paused)C(this,Ra).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);C(this,Ra).set(r,{timer:i,func:s,time:m2()})}return r}_forEachSubscriber(e){for(const n of C(this,ui).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Sne(e.type);case"block":{const n=new Ize(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new Nze(this,e.type);case"event":return new x$(this,e.filter);case"transaction":return new Rze(this,e.hash);case"orphan":return new Tze(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of C(this,ui).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),C(this,di)!=null&&n.pause(C(this,di));break}}async on(e,n){const r=await he(this,Ht,ax).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,C(this,di)!=null&&r.subscriber.pause(C(this,di))),this}async once(e,n){const r=await he(this,Ht,ax).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,C(this,di)!=null&&r.subscriber.pause(C(this,di))),this}async emit(e,...n){const r=await he(this,Ht,Qv).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new Fee(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),C(this,ui).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await he(this,Ht,Qv).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of C(this,ui).values())n+=r.length;return n}async listeners(e){if(e){const r=await he(this,Ht,Qv).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of C(this,ui).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await he(this,Ht,Qv).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),C(this,ui).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await he(this,Ht,ax).call(this,e);r&&s.stop(),C(this,ui).delete(n)}else for(const[n,{started:r,subscriber:s}]of C(this,ui))r&&s.stop(),C(this,ui).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return C(this,sw)}destroy(){this.removeAllListeners();for(const e of C(this,Ra).keys())this._clearTimeout(e);L(this,sw,!0)}get paused(){return C(this,di)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(L(this,ju,-1),C(this,di)!=null){if(C(this,di)==!!e)return;ye(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),L(this,di,!!e);for(const n of C(this,Ra).values())n.timer&&clearTimeout(n.timer),n.time=m2()-n.time}resume(){if(C(this,di)!=null){this._forEachSubscriber(e=>e.resume()),L(this,di,null);for(const e of C(this,Ra).values()){let n=e.time;n<0&&(n=0),e.time=m2(),setTimeout(e.func,n)}}}}ui=new WeakMap,Ph=new WeakMap,di=new WeakMap,sw=new WeakMap,zo=new WeakMap,lg=new WeakMap,Oh=new WeakMap,ju=new WeakMap,U_=new WeakMap,Ra=new WeakMap,iw=new WeakMap,ow=new WeakMap,Ht=new WeakSet,Lo=async function(e){const n=C(this,ow).cacheTimeout;if(n<0)return await this._perform(e);const r=ox(e.method,e);let s=C(this,Oh).get(r);return s||(s=this._perform(e),C(this,Oh).set(r,s),setTimeout(()=>{C(this,Oh).get(r)===s&&C(this,Oh).delete(r)},n)),await s},O5=async function(e,n,r){ye(r<Oze,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=QI(e);try{return De(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&a$(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&Pr(i.data,0,4)==="0x556f1830"){const o=i.data,a=await ki(s.to,this);let c;try{c=Fze(Pr(i.data,4))}catch(d){ye(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}ye(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);ye(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Lr([c.selector,Bze([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await he(this,Ht,O5).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},k5=async function(e){const{value:n}=await xi({network:this.getNetwork(),value:e});return n},Yv=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await he(this,Ht,k5).call(this,he(this,Ht,Lo).call(this,Object.assign(e,{address:s,blockTag:i})))},D5=async function(e,n){if(ir(e,32))return await he(this,Ht,Lo).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await he(this,Ht,Lo).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Qv=async function(e,n){let r=await g2(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await g2({orphan:"drop-log",log:n[0]},this)),C(this,ui).get(r.tag)||null},ax=async function(e){const n=await g2(e,this),r=n.tag;let s=C(this,ui).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},C(this,ui).set(r,s)),s};function Lze(t,e){try{const n=M5(t,e);if(n)return jI(n)}catch{}return null}function M5(t,e){if(t==="0x")return null;try{const n=Kt(Pr(t,e,e+32)),r=Kt(Pr(t,n,n+32));return Pr(t,n+32,n+32+r)}catch{}return null}function PW(t){const e=os(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function Uze(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const $ze=new Uint8Array([]);function Bze(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push($ze),n+=32;for(let r=0;r<t.length;r++){const s=Vt(t[r]);e[r]=PW(n),e.push(PW(s.length)),e.push(Uze(s)),n+=32+Math.ceil(s.length/32)*32}return Lr(e)}const OW="0x0000000000000000000000000000000000000000000000000000000000000000";function Fze(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ye(a0(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Pr(t,0,32);ye(Pr(n,0,12)===Pr(OW,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Pr(n,12);try{const r=[],s=Kt(Pr(t,32,64)),i=Kt(Pr(t,s,s+32)),o=Pr(t,s+32);for(let a=0;a<i;a++){const c=Lze(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{ye(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=M5(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{ye(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ye(Pr(t,100,128)===Pr(OW,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Pr(t,96,100);try{const r=M5(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{ye(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function ep(t,e){if(t.provider)return t.provider;ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function kW(t,e){let n=QI(e);if(n.to!=null&&(n.to=ki(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),ki(r,t)]).then(([s,i])=>(Z(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await xi(n)}class jze{constructor(e){te(this,"provider");mt(this,{provider:e||null})}async getNonce(e){return ep(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await kW(this,e)}async populateTransaction(e){const n=ep(this,"populateTransaction"),r=await kW(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Ze(r.chainId);Z(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Z(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Z(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();ye(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ye(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await xi(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await ep(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return ep(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return ep(this,"call").call(await this.populateCall(e))}async resolveName(e){return await ep(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=ep(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=zI.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){ye(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function Wze(t){return JSON.parse(JSON.stringify(t))}var Ai,Sl,ug,kh,dg,aw,Of,L5,U5;class xne{constructor(e){Q(this,Of);Q(this,Ai);Q(this,Sl);Q(this,ug);Q(this,kh);Q(this,dg);Q(this,aw);L(this,Ai,e),L(this,Sl,null),L(this,ug,he(this,Of,L5).bind(this)),L(this,kh,!1),L(this,dg,null),L(this,aw,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){C(this,kh)||(L(this,kh,!0),he(this,Of,L5).call(this,-2))}stop(){C(this,kh)&&(L(this,kh,!1),L(this,aw,!0),he(this,Of,U5).call(this),C(this,Ai).off("block",C(this,ug)))}pause(e){e&&he(this,Of,U5).call(this),C(this,Ai).off("block",C(this,ug))}resume(){this.start()}}Ai=new WeakMap,Sl=new WeakMap,ug=new WeakMap,kh=new WeakMap,dg=new WeakMap,aw=new WeakMap,Of=new WeakSet,L5=async function(e){try{C(this,Sl)==null&&L(this,Sl,this._subscribe(C(this,Ai)));let n=null;try{n=await C(this,Sl)}catch(i){if(!Ws(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){L(this,Sl,null),C(this,Ai)._recoverSubscriber(this,this._recover(C(this,Ai)));return}const r=await C(this,Ai).getNetwork();if(C(this,dg)||L(this,dg,r),C(this,dg).chainId!==r.chainId)throw new Error("chaid changed");if(C(this,aw))return;const s=await C(this,Ai).send("eth_getFilterChanges",[n]);await this._emitResults(C(this,Ai),s)}catch(n){console.log("@TODO",n)}C(this,Ai).once("block",C(this,ug))},U5=function(){const e=C(this,Sl);e&&(L(this,Sl,null),e.then(n=>{C(this,Ai).destroyed||C(this,Ai).send("eth_uninstallFilter",[n])}))};var hg;class zze extends xne{constructor(n,r){super(n);Q(this,hg);L(this,hg,Wze(r))}_recover(n){return new x$(n,C(this,hg))}async _subscribe(n){return await n.send("eth_newFilter",[C(this,hg)])}async _emitResults(n,r){for(const s of r)n.emit(C(this,hg),n._wrapLog(s,n._network))}}hg=new WeakMap;class Hze extends xne{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const Gze="bigint,boolean,function,number,string,symbol".split(/,/g);function cx(t){if(t==null||Gze.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(cx);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function qze(t){return new Promise(e=>{setTimeout(e,t)})}function dy(t){return t&&t.toLowerCase()}function DW(t){return t&&typeof t.pollingInterval=="number"}const Ine={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class y2 extends jze{constructor(n,r){super(n);te(this,"address");r=xn(r),mt(this,{address:r})}connect(n){ye(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=cx(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await ki(o,this.provider);Z(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await ki(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(Ws(u,"CANCELLED")||Ws(u,"BAD_DATA")||Ws(u,"NETWORK_ERROR")||Ws(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(Ws(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",pr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=cx(n);if(r.from){const i=await ki(r.from,this.provider);Z(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?id(n):n;return await this.provider.send("personal_sign",[De(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=cx(s),o=await YI.resolveNames(n,r,i,async a=>{const c=await ki(a);return Z(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(YI.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?id(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),De(r)])}}var fg,cw,Wu,xl,Ac,Pa,ao,$_,$5;class Vze extends Mze{constructor(n,r){super(n,r);Q(this,$_);Q(this,fg);Q(this,cw);Q(this,Wu);Q(this,xl);Q(this,Ac);Q(this,Pa);Q(this,ao);L(this,cw,1),L(this,fg,Object.assign({},Ine,r||{})),L(this,Wu,[]),L(this,xl,null),L(this,Pa,null),L(this,ao,null);{let i=null;const o=new Promise(a=>{i=a});L(this,Ac,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Z(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&L(this,Pa,Fl.from(n))):s&&(Z(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),L(this,Pa,s))}_getOption(n){return C(this,fg)[n]}get _network(){return ye(C(this,Pa),"network is not available yet","NETWORK_ERROR"),C(this,Pa)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Ze(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(C(this,Pa))return C(this,Pa)}else return n;return C(this,ao)?await C(this,ao):this.ready?(L(this,ao,(async()=>{try{const r=Fl.from(Ze(await this.send("eth_chainId",[])));return L(this,ao,null),r}catch(r){throw L(this,ao,null),r}})()),await C(this,ao)):(L(this,ao,(async()=>{const r={id:xd(this,cw)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],L(this,ao,null)}catch(i){throw L(this,ao,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Fl.from(Ze(s.result));throw this.getRpcError(r,s)})()),await C(this,ao))}_start(){C(this,Ac)==null||C(this,Ac).resolve==null||(C(this,Ac).resolve(),L(this,Ac,null),(async()=>{for(;C(this,Pa)==null&&!this.destroyed;)try{L(this,Pa,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",pr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await qze(1e3)}he(this,$_,$5).call(this)})())}async _waitUntilReady(){if(C(this,Ac)!=null)return await C(this,Ac).promise}_getSubscriber(n){return n.type==="pending"?new Hze(this):n.type==="event"?this._getOption("polling")?new x$(this,n.filter):new zze(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new Sne("orphan"):super._getSubscriber(n)}get ready(){return C(this,Ac)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=Nc(Ze(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=De(n[s]))}),n.accessList&&(r.accessList=xm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=Tte(s);return{address:i.address,nonce:Nc(i.nonce),chainId:Nc(i.chainId),yParity:Nc(i.signature.yParity),r:Nc(i.signature.r),s:Nc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[dy(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[dy(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[dy(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[dy(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(dy):n.filter.address=dy(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return pr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return pr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=B5(i),l=w_.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(Yze(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return pr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return pr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return pr("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return pr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return pr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?pr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):pr("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(pr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=xd(this,cw)._++,i=new Promise((o,a)=>{C(this,Wu).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return he(this,$_,$5).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new y2(this,i[n])}const{accounts:s}=await xi({network:this.getNetwork(),accounts:r});n=xn(n);for(const i of s)if(xn(i)===n)return new y2(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new y2(this,r))}destroy(){C(this,xl)&&(clearTimeout(C(this,xl)),L(this,xl,null));for(const{payload:n,reject:r}of C(this,Wu))r(pr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));L(this,Wu,[]),super.destroy()}}fg=new WeakMap,cw=new WeakMap,Wu=new WeakMap,xl=new WeakMap,Ac=new WeakMap,Pa=new WeakMap,ao=new WeakMap,$_=new WeakSet,$5=function(){if(C(this,xl))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");L(this,xl,setTimeout(()=>{L(this,xl,null);const r=C(this,Wu);for(L(this,Wu,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==C(this,fg).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>C(this,fg).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(pr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=pr("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Dh;class Kze extends Vze{constructor(n,r){super(n,r);Q(this,Dh);let s=this._getOption("pollingInterval");s==null&&(s=Ine.pollingInterval),L(this,Dh,s)}_getSubscriber(n){const r=super._getSubscriber(n);return DW(r)&&(r.pollingInterval=C(this,Dh)),r}get pollingInterval(){return C(this,Dh)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");L(this,Dh,n),this._forEachSubscriber(r=>{DW(r)&&(r.pollingInterval=C(this,Dh))})}}Dh=new WeakMap;function B5(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&ir(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=B5(t[e]);if(n)return n}return null}if(typeof t=="string")try{return B5(JSON.parse(t))}catch{}return null}function F5(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)F5(t[n],e);if(typeof t=="string")try{return F5(JSON.parse(t),e)}catch{}}}function Yze(t){const e=[];return F5(t,e),e}var lw,uw;const Cp=class Cp extends Kze{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Z(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);Q(this,lw);Q(this,uw);L(this,uw,null),s&&s.providerInfo&&L(this,uw,s.providerInfo),L(this,lw,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return C(this,uw)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){Z(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await C(this,lw).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await C(this,lw).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new Cp(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new Cp(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof Cp)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new Cp(p,void 0,{providerInfo:g}))}else a(pr("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new Cp(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};lw=new WeakMap,uw=new WeakMap;let j5=Cp;const gr={NATIVE_DMT:{symbol:"DMT",name:"Native DMT",address:"0x0000000000000000000000000000000000000000",decimals:18,logo:"/images/dmt-logo.png",isNative:!0,color:"#FF6B35"},DMT:{symbol:"DMT",name:"DMT Token",address:"0x754cDAd6f5821077d6915004Be2cE05f93d176f8",decimals:18,logo:"/images/dmt-logo.png",isNative:!1,color:"#FF6B35"},GOLD:{symbol:"GOLD",name:"GOLD",address:"0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D",decimals:18,logo:"/images/gold-logo.png",isNative:!1,color:"#FFD700"},LAWB:{symbol:"LAWB",name:"LAWB",address:"0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F",decimals:6,logo:"/images/lawb-logo.png",isNative:!1,color:"#8B4513"},MOSS:{symbol:"MOSS",name:"MOSS",address:"0xeA240b96A9621e67159c59941B9d588eb290ef09",decimals:18,logo:"/images/moss-logo.png",isNative:!1,color:"#00FF00"}},MW={testnet:{chess:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"},mainnet:{chess:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"}},Wh={testnet:{chainId:1992},mainnet:{chainId:1996}},I$=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],Ds=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"minWager",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxWager",type:"uint256"}],name:"TokenLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"DMT_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"GOLD_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LAWB_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MOSS_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"wagerToken",type:"address"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"createGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"},{internalType:"address",name:"wagerToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_house",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"supportedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMaxWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMinWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minWager",type:"uint256"},{internalType:"uint256",name:"maxWager",type:"uint256"}],name:"updateTokenLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawTokens",outputs:[],stateMutability:"nonpayable",type:"function"}];function Nne(t,e){return gr[t].address}function Tne(t,e){const n=Xa(),r=gr[t],s=r.isNative||!1,i=n===Wh.mainnet.chainId,o=n===Wh.testnet.chainId;(t==="DMT"||t==="NATIVE_DMT")&&console.log(`[CHAIN DEBUG] useTokenBalance for ${t}:`,{chainId:n,expectedMainnet:Wh.mainnet.chainId,expectedTestnet:Wh.testnet.chainId,isOnSankoMainnet:i,isOnSankoTestnet:o,address:!!e,isNative:s});const a=!!e&&i,{data:c,isLoading:l,error:u}=tAe({address:e,query:{enabled:a&&s}}),{data:d,isLoading:h,error:f}=CE({address:r.address,abi:I$,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:a&&!s}}),p=s?c==null?void 0:c.value:d,g=s?l:h,w=s?u:f;return console.log(`[TOKEN BALANCE QUERY] ${t}:`,{queryEnabled:a,address:!!e,isOnSankoMainnet:i,isNative:s,contractCall:a?s?"native balance":`balanceOf(${e})`:"DISABLED"}),console.log(`[TOKEN BALANCE] ${t}:`,{tokenAddress:r.address,userAddress:e,chainId:n,isOnSankoMainnet:i,isOnSankoTestnet:o,isNative:s,balance:p==null?void 0:p.toString(),balanceFormatted:p?Number(p)/Math.pow(10,r.decimals):0,isLoading:g,error:w==null?void 0:w.message,errorDetails:w,queryEnabled:!!e&&i}),{balance:p?Number(p)/Math.pow(10,r.decimals):0,balanceWei:p||BigInt(0),isLoading:g,error:w,isOnSankoMainnet:i,isOnSankoTestnet:o}}function Qze(t,e,n){const r=Xa(),s=Nne(t),i=r===Wh.mainnet.chainId,o=r===Wh.testnet.chainId,{data:a,isLoading:c,error:l}=CE({address:s,abi:I$,functionName:"allowance",args:n&&e?[n,e]:void 0,query:{enabled:!!n&&!!e&&i}});return{allowance:a||BigInt(0),allowanceFormatted:a?Number(a)/Math.pow(10,gr[t].decimals):0,isLoading:c,error:l,isOnSankoMainnet:i,isOnSankoTestnet:o}}function Jze(){const{writeContract:t,data:e,isPending:n,error:r}=$v(),{isLoading:s}=Uv({hash:e});return Xa(),{approve:(o,a,c)=>{const l=Nne(o);t({address:l,abi:I$,functionName:"approve",args:[a,c]})},isPending:n||s,error:r,hash:e}}const Zze=({selectedToken:t,onTokenSelect:e,wagerAmount:n,onWagerChange:r,disabled:s=!1})=>{const{address:i}=Cb(),{balance:o,isOnSankoMainnet:a,isOnSankoTestnet:c}=Tne(t,i),[l,u]=D.useState(!1),d=f=>{e(f),u(!1)},h=f=>{const p=gr[f];return p.isNative?`${p.symbol} (Native)`:p.symbol};return m.jsxs("div",{style:{marginBottom:"10px"},children:[m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[m.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Token:"}),m.jsxs("div",{style:{position:"relative"},children:[m.jsxs("button",{type:"button",onClick:()=>u(!l),disabled:s,style:{padding:"5px 10px",border:"2px outset #fff",background:"#c0c0c0",cursor:s?"not-allowed":"pointer",minWidth:"120px",textAlign:"left"},children:[h(t),m.jsx("span",{style:{float:"right"},children:"▼"})]}),l&&!s&&m.jsx("div",{style:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",zIndex:10,minWidth:"120px"},children:Object.entries(gr).map(([f,p])=>m.jsx("div",{onClick:()=>d(f),style:{padding:"5px 10px",cursor:"pointer",borderBottom:"1px solid #eee",fontSize:"12px"},onMouseEnter:g=>g.currentTarget.style.background="#f0f0f0",onMouseLeave:g=>g.currentTarget.style.background="#fff",children:h(f)},f))})]})]}),m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[m.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Amount:"}),m.jsx("input",{type:"number",value:n,onChange:f=>r(Number(f.target.value)),disabled:s,min:"0.1",max:"1000",step:"0.1",style:{padding:"5px",border:"2px inset #fff",background:"#fff",width:"100px"}}),m.jsxs("span",{style:{color:"#666",fontSize:"12px"},children:["Balance: ",a?`${o.toFixed(2)} ${gr[t].symbol}`:"Connect to Sanko Mainnet",gr[t].isNative&&m.jsx("span",{style:{color:"#FF6B35",fontWeight:"bold"},children:" (Native)"})]})]}),c&&m.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:"⚠️ Switch to Sanko Mainnet - tokens are not available on testnet"}),!a&&!c&&m.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:"⚠️ Switch to Sanko Mainnet to see token balances"}),n>o&&a&&m.jsxs("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:["Insufficient balance. You have ",o.toFixed(2)," ",gr[t].symbol,gr[t].isNative&&m.jsx("span",{children:" (Native)"})]}),o===0&&a&&m.jsxs("div",{style:{color:"#ffa500",fontSize:"12px",marginTop:"5px"},children:["💡 You have 0 ",gr[t].symbol,gr[t].isNative&&m.jsx("span",{children:" (Native)"}),". Get tokens from ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ffa500"},children:"Sanko Bridge"})]})]})},Xze=t=>t===Wh.testnet.chainId?MW.testnet.chess:MW.mainnet.chess,un={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},w2={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},wu=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],eHe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function tHe(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function LW(t,e){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const n=new j5(window.ethereum);return await new u0(e,Ds,n).playerToGame(t)}catch(n){return console.error("Error fetching invite code from contract:",n),null}}const Rne=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{var Y$,Q$;const{address:r,isConnected:s,chainId:i}=Cb(),o=Xze(i||Wh.mainnet.chainId),[a,c]=D.useState(""),[l,u]=D.useState(""),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),{writeContract:v,isPending:A,data:_}=$v(),{writeContract:I,isPending:x,data:N,error:S}=$v(),{writeContract:O,isPending:P,data:F}=$v(),{writeContract:G,isPending:B,data:T}=$v(),{approve:R,isPending:$,error:k,hash:M}=Jze(),W=cAe(),{isLoading:K}=Uv({hash:_}),{isLoading:ne,data:le}=Uv({hash:N}),{isLoading:oe}=Uv({hash:F}),{isLoading:ae}=Uv({hash:T});D.useEffect(()=>{T&&!ae&&(console.log("[REFUND] Transaction completed successfully"),yt("Game refunded successfully! Your wager has been returned."),(async()=>{try{let j=Se;if(!j&&r)try{const z=await LW(r,o);z&&z!=="0x000000000000"&&(j=z)}catch(z){console.error("[REFUND] Error getting invite code from contract:",z)}j?(console.log("[REFUND] Updating Firebase for cancelled game:",j),await ai.updateGame(j,{game_state:"cancelled",red_player:"0x0000000000000000000000000000000000000000"}),console.log("[REFUND] Firebase updated successfully")):console.warn("[REFUND] Could not determine invite code for Firebase update")}catch(j){console.error("[REFUND] Error updating Firebase after refund:",j)}Nn(un.LOBBY),Me(""),or(null),Xe(0,"refund completed"),ds(null),km()})())},[T,ae]);const{data:ue}=CE({address:o,abi:Ds,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:et}=CE({address:o,abi:Ds,functionName:"games",args:ue?[ue]:void 0,query:{enabled:!!ue&&ue!=="0x000000000000"}}),[Se,Me]=D.useState(""),[rt,Tt]=D.useState(!1),{data:Jt,error:X,isLoading:ce}=CE({address:o,abi:Ds,functionName:"games",args:Se?[Se]:void 0,query:{enabled:!!Se&&Se!=="0x000000000000"&&rt}});D.useEffect(()=>{console.log("[LOBBY_CONTRACT] lobbyGameContractData changed:",Jt),console.log("[LOBBY_CONTRACT] lobbyGameContractError:",X),console.log("[LOBBY_CONTRACT] lobbyGameContractLoading:",ce),console.log("[LOBBY_CONTRACT] isJoiningFromLobby:",rt),console.log("[LOBBY_CONTRACT] inviteCode:",Se),console.log("[LOBBY_CONTRACT] Contract read enabled:",!!Se&&Se!=="0x000000000000"&&rt)},[Jt,X,ce,rt,Se]);const Ee=()=>(console.log("[HELPER] getCurrentContractGameData called"),console.log("[HELPER] isJoiningFromLobby:",rt),console.log("[HELPER] lobbyGameContractData:",Jt),console.log("[HELPER] contractGameData:",et),rt&&Jt?(console.log("[HELPER] Returning lobbyGameContractData"),Jt):(console.log("[HELPER] Returning contractGameData"),et)),ge=(U,j)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${U}" from ${j}`),Se&&!U&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${Se}" to "${U}" from ${j}`),Me(U)},ve=(U,j="NATIVE_DMT")=>{var V;const z=((V=gr[j])==null?void 0:V.decimals)||18;return parseFloat(U.toString())/Math.pow(10,z)},Xe=(U,j)=>{console.log(`[WAGER_DEBUG] Setting wager to ${U} TDMT from ${j}`),Nm!==U&&console.log(`[WAGER_DEBUG] Wager changed from ${Nm} to ${U} TDMT`),z1(U)},[st,At]=D.useState("moves"),Ct=async()=>{if(!Se||!r){alert("No game to refund or wallet not connected");return}try{console.log("[REFUND] Attempting to refund game:",Se);const U=await ai.getGame(Se);if(!U||U.blue_player!==r){alert("Only the game creator can refund the game");return}if(U.red_player&&U.red_player!=="0x0000000000000000000000000000000000000000"){alert("Cannot refund game after opponent has joined");return}await G({address:o,abi:Ds,functionName:"cancelGame",args:[Se]}),console.log("[REFUND] Cancel game transaction submitted")}catch(U){console.error("[REFUND] Error refunding game:",U),alert("Failed to refund game. Please try again.")}},Vn=async()=>{if(!r||!Zt){console.error("[CLAIM] Missing required data for claiming winnings");return}let U=Se;if(!U&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const j=await LW(r,o);j&&j!=="0x000000000000"&&(U=j,console.log("[CLAIM] Retrieved invite code from contract:",U))}catch(j){console.error("[CLAIM] Error getting invite code from contract:",j)}}if(!U){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{w(!0),console.log("[CLAIM] Claiming winnings for game:",U,"Player:",Zt,"Address:",r);const j=await ai.getGame(U);if(!j){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",j);let z=null;j.winner&&(j.blue_player||j.red_player)&&(z=j.winner==="blue"?j.blue_player:j.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:j.winner,winnerAddress:z}));const V=Ee();if(!z&&V)if(j.winner&&(j.winner==="blue"||j.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let me,_e,St,Le,kt,on;if(Array.isArray(V))[me,_e,St,Le,kt,on]=V;else{console.error("[CLAIM] Unexpected contract data format:",V),alert("Failed to verify winner. Please try again.");return}z=j.winner==="blue"?me:_e,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:j.winner,winnerAddress:z,player1:me,player2:_e})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",V);let me,_e,St,Le,kt,on;if(Array.isArray(V))[me,_e,St,Le,kt,on]=V;else{console.error("[CLAIM] Unexpected contract data format:",V),alert("Failed to verify winner. Please try again.");return}const fr=String(Le);if(fr.startsWith("0x"))z=fr;else if(fr==="blue"||fr==="red")z=fr==="blue"?me:_e;else if(fr==="1"||fr==="2")z=fr==="1"?me:_e;else{console.error("[CLAIM] Unknown winner format:",Le,"as string:",fr),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:Le,winnerAddress:z,player1:me,player2:_e,winnerType:typeof Le,winnerValue:Le,address:r,addressType:typeof r})}if(!z){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:z,address:r,playerColor:Zt,winnerAddressType:typeof z,addressType:typeof r,addressesMatch:z===r,winnerAddressLength:z==null?void 0:z.length,addressLength:r==null?void 0:r.length}),z!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:z,address:r,playerColor:Zt}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM] ✅ Winner verification passed! Proceeding with contract call...");let re=U;if(!re&&V){console.log("[CLAIM] Using invite code from contract data as fallback");let me,_e,St,Le,kt,on;if(Array.isArray(V))[me,_e,St,Le,kt,on]=V,re=kt;else{console.error("[CLAIM] Unexpected contract data format for invite code:",V),alert("Failed to get invite code. Please try again.");return}}if(!re||typeof re!="string"){console.error("[CLAIM] Invalid invite code format:",re),alert("Invalid invite code format.");return}let xe=re;if(re.startsWith("0x")||(xe="0x"+re),xe.length!==14){console.error("[CLAIM] Invalid invite code length for contract claim:",xe,"length:",xe.length),alert("Invalid invite code length for contract claim.");return}console.log("[CLAIM] Formatted invite code:",xe),console.log("[CLAIM] Original invite code:",re),console.log("[CLAIM] Winner address:",z),console.log("[CLAIM] Calling contract with:",{inviteCode:re,winner:z,functionName:"endGame",inviteCodeSource:j.invite_code?"Firebase":"Contract",inviteCodeLength:re.length,inviteCodeValid:re.startsWith("0x")&&re.length===14,winnerAddressValid:z.startsWith("0x")&&z.length===42}),console.log("[CLAIM] About to call writeEndGame with:",{address:o,functionName:"endGame",args:[xe,z],abiLength:Ds.length,chainId:i,isConnected:s});try{O({address:o,abi:Ds,functionName:"endGame",args:[xe,z]}),console.log("[CLAIM] Contract call initiated successfully"),P?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:P,endGameHash:F})}catch(me){console.error("[CLAIM] Error calling writeEndGame:",me),alert("Failed to initiate contract call. Please try again.");return}}catch(j){console.error("[CLAIM] Error claiming winnings:",j),alert("Failed to claim winnings. Please try again.")}finally{w(!1)}},[Rt,Gr]=D.useState(wu),[Bt,zn]=D.useState("blue"),[Sr,Gi]=D.useState(null),[Jc,Ff]=D.useState([]),[Lb,D$]=D.useState([]),[j1,yt]=D.useState("Waiting for opponent..."),[us,Nn]=D.useState(un.LOBBY),[Kn,Ub]=D.useState(!1),[Zt,or]=D.useState(null),[W1,ds]=D.useState(null),[Nm,z1]=D.useState(0),[$b,H1]=D.useState([]),[G1,da]=D.useState(!1),[jf,xr]=D.useState(!1),[ei,Zc]=D.useState(null),[Yn,ha]=D.useState(null),[fa,Tm]=D.useState(!1),[dR,Rm]=D.useState(""),[Xc,hR]=D.useState(0),[Ir,fR]=D.useState("NATIVE_DMT");D.useEffect(()=>{console.log("[JOIN_TRANSACTION] joinGameHash changed:",N),console.log("[JOIN_TRANSACTION] isJoiningGameContract:",x),console.log("[JOIN_TRANSACTION] joinGameError:",S),console.log("[JOIN_TRANSACTION] Full join transaction state:",{joinGameHash:N,isJoiningGameContract:x,joinGameError:S,pendingJoinGameData:Yn})},[N,x,S,Yn]),D.useEffect(()=>{!$&&fa&&Se&&rt&&!N&&!x&&(console.log("[AUTO_JOIN] Token approval completed, attempting to auto-join"),console.log("[AUTO_JOIN] isApproving:",$),console.log("[AUTO_JOIN] waitingForApproval:",fa),console.log("[AUTO_JOIN] inviteCode:",Se),console.log("[AUTO_JOIN] isJoiningFromLobby:",rt),console.log("[AUTO_JOIN] joinGameHash:",N),console.log("[AUTO_JOIN] isJoiningGameContract:",x),Tm(!1),console.log("[AUTO_JOIN] Calling joinGame automatically"),j$(Se))},[$,fa,Se,rt,N,x]),Tne(Ir,r);const q1=BigInt(Math.floor(Xc*Math.pow(10,gr[Ir].decimals))),{allowance:V1}=Qze(Ir,r,o),[M$]=D.useState(!0),[el,K1]=D.useState(null),[L$,pR]=D.useState(0),[Y1,Q1]=D.useState(Date.now()),sc=36e5,[gR,U$]=D.useState(!1),[Pm,mR]=D.useState(null),[Bb,Om]=D.useState(!1),[Wf,Fb]=D.useState(null),[yR,ou]=D.useState(!1),[ti,ni]=D.useState(!1),[Sd,jb]=D.useState("moves"),[q,Y]=D.useState(!0),[se,ie]=D.useState(null),ee=async()=>{if(!Se||!Zt)return;console.log("[TIMEOUT] Handling timeout for game:",Se);const U=Bt==="blue"?"red":"blue",j=Ee(),z=U==="blue"?j==null?void 0:j[0]:j==null?void 0:j[1];z&&(console.log("[TIMEOUT] Ending game with winner:",z),O({address:o,abi:Ds,functionName:"endGame",args:[Se,z]}),yt(`Game ended due to timeout. ${U==="red"?"Red":"Blue"} wins!`),Nn(un.FINISHED))},Re=D.useCallback(()=>{el&&clearTimeout(el);const U=setTimeout(()=>{console.log("[TIMEOUT] 60-minute timeout reached, ending game"),ee()},sc);K1(U),Q1(Date.now())},[ee]),Pe=D.useCallback(()=>{el&&(clearTimeout(el),K1(null))},[]),[Ue,cn]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[_n,hr]=D.useState([]),[Xt,Wb]=D.useState(null),zf=D.useRef(null),Hf=D.useRef(null),$$=D.useRef(r);D.useEffect(()=>{$$.current=r},[r]),D.useEffect(()=>{N&&!ne&&Yn&&(console.log("[CONTRACT] Join transaction confirmed:",N),r===Yn.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),or("red"),ds(Yn.gameData.blue_player)),ai.updateGame(Yn.inviteCode,{...Yn.gameData,red_player:Yn.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),Nn(un.ACTIVE),ni(!0),yt("Game started!"),Me(Yn.inviteCode),Gf(Yn.inviteCode),console.log("[CONTRACT] Clearing pending join data"),ha(null),Tt(!1)}).catch(U=>{console.error("Error updating game in database:",U),yt("Joined game on contract but failed to update database"),ha(null)}))},[N,ne,Yn,r]),D.useEffect(()=>{F&&!oe&&(console.log("[CLAIM] End game transaction confirmed:",F),yt("Winnings claimed successfully! Transaction hash: "+F.slice(0,10)+"..."),w(!1))},[F,oe]),D.useEffect(()=>{P===!1&&g&&!F&&(console.log("[CLAIM] End game transaction rejected or failed"),yt("Claim transaction was rejected. Please try again."),w(!1))},[P,g,F]),D.useEffect(()=>{if(_&&!K){console.log("[CONTRACT] Create game transaction confirmed:",_);let U=ei;if(!U&&W){console.log("[CREATE DEBUG] No pendingGameData, attempting to reconstruct game data");const j=(ei==null?void 0:ei.invite_code)||_;console.log("[CREATE DEBUG] Using invite code for contract read:",j),W.readContract({address:o,abi:Ds,functionName:"games",args:[j]}).then(z=>{var V;if(z&&Array.isArray(z)&&z[0]!=="0x0000000000000000000000000000000000000000"){const re={invite_code:j,game_title:`Chess Game ${j.slice(-6)}`,bet_amount:((V=z[2])==null?void 0:V.toString())||"0",bet_token:z[1]||"",blue_player:z[0]||"",red_player:"0x0000000000000000000000000000000000000000",game_state:"waiting",board:{positions:zb(wu),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE DEBUG] Reconstructed game data:",re),ai.createGame(re).then(()=>{console.log("[FIREBASE] Game created successfully with reconstructed data"),Me(re.invite_code),or("blue"),Xe(Xc,"create game success"),Nn(un.WAITING),yt("Waiting for opponent to join..."),Gf(re.invite_code),setTimeout(()=>{km()},1e3),Zc(null),da(!1),xr(!1)}).catch(xe=>{console.error("[FIREBASE] Error creating game with reconstructed data:",xe),yt("Transaction confirmed but failed to create game in database"),Zc(null),da(!1),xr(!1)})}}).catch(z=>{console.error("[CREATE DEBUG] Error reconstructing game data:",z),yt("Transaction confirmed but game data not available"),Zc(null),da(!1),xr(!1)});return}U?ai.createGame(U).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),Me(U.invite_code),or("blue"),Xe(Xc,"create game success"),Nn(un.WAITING),yt("Waiting for opponent to join..."),Gf(U.invite_code),setTimeout(()=>{km()},1e3),Zc(null),da(!1),xr(!1)}).catch(j=>{console.error("[FIREBASE] Error creating game after transaction:",j),yt("Transaction confirmed but failed to create game in database"),Zc(null),da(!1),xr(!1)}):(console.log("[CREATE DEBUG] No game data available for Firebase creation"),yt("Transaction confirmed but game data not available"),Zc(null),da(!1),xr(!1))}},[_,K,ei,Xc]),D.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",ei)},[ei]),D.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",Yn),Yn){const U=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),ha(null)},3e4);return()=>clearTimeout(U)}},[Yn]),D.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",A),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",ei),console.log("[CREATE REJECTION DEBUG] - createGameHash:",_),console.log("[CREATE REJECTION DEBUG] - condition:",A===!1&&ei&&!_),A===!1&&ei&&!_&&(console.log("[CONTRACT] Create game transaction rejected or failed"),yt("Transaction was rejected. Please try again."),Zc(null),da(!1),xr(!1))},[A,ei,_]),D.useEffect(()=>{x===!1&&Yn&&!N&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",x),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",Yn),console.log("[CONTRACT] Rejection details - joinGameHash:",N),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",ue),yt("Transaction was rejected. Please try again."),ge("","join transaction rejection"),or(null),Xe(0,"join transaction rejection"),ds(null),Nn(un.LOBBY),yt(""),ha(null),Tt(!1))},[x,Yn,N,r,ue]),D.useEffect(()=>{if(r&&ue!==void 0&&!y){const U=Ee();(ue!=="0x000000000000"&&U||ue==="0x000000000000")&&$ne()}},[r,ue,et,Jt,y]),D.useEffect(()=>{b(!1)},[r]),D.useEffect(()=>{us===un.ACTIVE&&Zt?(console.log("[TIMEOUT] Starting timeout timer for active game"),Re()):Pe()},[us,Zt]),D.useEffect(()=>{us===un.ACTIVE&&Lb.length>0&&(console.log("[TIMEOUT] Move made, resetting timeout timer"),Re())},[Lb,us]),D.useEffect(()=>{if(us===un.ACTIVE&&el){const U=setInterval(()=>{const j=Date.now()-Y1,z=Math.max(0,sc-j);pR(Math.ceil(z/1e3))},1e3);return()=>clearInterval(U)}},[us,el,Y1]),D.useEffect(()=>()=>{jne(),Pe(),zf.current&&zf.current(),Hf.current&&clearTimeout(Hf.current)},[]);const $ne=async()=>{if(r)try{console.log("[GAME_STATE] Checking for active games for player:",r);const U=Ee();if(ue&&ue!=="0x000000000000"&&!U){console.log("[GAME_STATE] Waiting for contract data...");return}if(ue&&ue!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",ue),U)){let V,re,xe,me,_e,St;if(Array.isArray(U))[V,re,xe,me,_e,St]=U;else{console.error("[GAME_STATE] Unexpected contract data format:",U);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:V,player2:re,isActive:xe,winner:me,inviteCode:_e,wagerAmount:St}),!_e){console.error("[GAME_STATE] Invalid invite code:",_e);return}const Le=V===r?"blue":"red",kt=V===r?re:V;console.log("[GAME_STATE] Player is",Le,"opponent is",kt);const on=await ai.getGame(_e);if(on){if(console.log("[GAME_STATE] Found game in Firebase:",on),Me(_e),or(Le),Xe(ve(on.bet_amount,on.bet_token||"DMT"),"checkPlayerGameState Firebase"),ds(kt),on.game_state==="waiting")Nn(un.WAITING),yt("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(on.game_state==="active"||on.game_state==="test_update"){if(Nn(un.ACTIVE),ni(!0),yt("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",on.game_state,")"),on.board){const fr=on.board;Gr(Dm(fr)),zn(on.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",on.game_state,"- treating as active"),Nn(un.ACTIVE),ni(!0),yt("Game in progress"),on.board){const fr=on.board;Gr(Dm(fr)),zn(on.current_player||"blue")}Gf(_e),b(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",us),console.log("[GAME_STATE] Game state from Firebase:",on.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase - waiting for transaction confirmation"),console.log("[GAME_STATE] This prevents ghost games from failed transactions");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const z=(await ai.getActiveGames()).filter(V=>V.chain==="sanko"&&(V.blue_player===r||V.red_player===r)&&["waiting","active"].includes(V.game_state));if(z&&z.length>0){const V=z[0];if(console.log("[GAME_STATE] Found active game in Firebase:",V),Me(V.invite_code),or(V.blue_player===r?"blue":"red"),Xe(ve(V.bet_amount,V.bet_token||"DMT"),"checkPlayerGameState fallback"),ds(V.blue_player===r?V.red_player:V.blue_player),V.game_state==="waiting")Nn(un.WAITING),yt("Waiting for opponent to join...");else if(V.game_state==="active"||V.game_state==="test_update"){if(Nn(un.ACTIVE),ni(!0),yt("Game in progress"),V.board){const re=V.board;Gr(Dm(re)),zn(V.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",V.game_state,"- treating as active"),Nn(un.ACTIVE),yt("Game in progress"),V.board){const re=V.board;Gr(Dm(re)),zn(V.current_player||"blue")}Gf(V.invite_code),b(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),Nn(un.LOBBY),da(!1),b(!0)}catch(U){console.error("[GAME_STATE] Error in checkPlayerGameState:",U)}},J1=async()=>{try{await Mee();const U=await Dee(20);hr(U)}catch(U){console.error("Error loading leaderboard:",U)}},B$=async U=>{if(console.log("[SCORE] updateScore called with:",U,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Xg(r)),await FI(r,U)?console.log("[SCORE] Successfully updated score for:",Xg(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(j){console.error("[SCORE] Error updating score:",j)}},F$=async(U,j,z)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:U,bluePlayer:j,redPlayer:z}),!j||!z){console.error("[SCORE] Missing player addresses from contract");return}await mje(U,j,z)?(console.log("[SCORE] Successfully updated both players scores"),await J1()):console.error("[SCORE] Failed to update both players scores")}catch(V){console.error("[SCORE] Error updating both players scores:",V)}},km=async()=>{try{console.log("[LOBBY] Loading open games...");const U=await ai.getOpenGames();console.log("[LOBBY] Loaded open games:",U),console.log("[LOBBY] Number of open games:",U.length),H1(U)}catch(U){console.error("[LOBBY] Error loading open games:",U)}},Bne=async()=>{if(!r)return!1;try{return gr[Ir].isNative?(console.log("[APPROVAL] Native token detected, skipping approval"),!0):V1<q1?(console.log("[APPROVAL] Token approval needed, calling approveToken"),new Promise(j=>{let z=0;const V=60,re=()=>{if(z++,k){console.error("[APPROVAL] User denied approval or error occurred:",k),yt("Token approval was cancelled. Please try again."),j(!1);return}if(M&&!$){console.log("[APPROVAL] Token approval successful, proceeding with game creation"),j(!0);return}if(z>=V){console.error("[APPROVAL] Timeout waiting for approval result"),yt("Approval timeout. Please try again."),j(!1);return}setTimeout(re,500)};R(Ir,o,q1),re()})):(console.log("[APPROVAL] Token already approved, proceeding with game creation"),!0)}catch(U){return console.error("[APPROVAL] Error checking approval:",U),yt("Failed to check token approval. Please try again."),!1}},Fne=async()=>{if(!(!r||Xc<=0)){xr(!0);try{if(!await Bne()){xr(!1);return}const j=tHe(),z=gr[Ir].address,V=BigInt(Math.floor(Xc*Math.pow(10,gr[Ir].decimals)));if(W)try{const _e=await W.readContract({address:o,abi:Ds,functionName:"tokenMinWager",args:[z]}),St=await W.readContract({address:o,abi:Ds,functionName:"tokenMaxWager",args:[z]});if(console.log("[VALIDATION] Contract limits for",Ir,":",{minWager:_e.toString(),maxWager:St.toString(),userWager:V.toString()}),V<_e){const Le=Number(_e)/Math.pow(10,gr[Ir].decimals);yt(`Wager too low. Minimum for ${Ir}: ${Le}`),xr(!1);return}if(V>St){const Le=Number(St)/Math.pow(10,gr[Ir].decimals);yt(`Wager too high. Maximum for ${Ir}: ${Le}`),xr(!1);return}console.log("[VALIDATION] Wager amount is within contract limits")}catch(_e){console.warn("[VALIDATION] Could not validate wager limits, proceeding anyway:",_e)}const re={invite_code:j,game_title:`Chess Game ${j.slice(-6)}`,bet_amount:V.toString(),bet_token:Ir,blue_player:r,game_state:"waiting",board:{positions:zb(wu),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",re),console.log("[CREATE] Calling contract with args:",[j,z,V]);let xe=300000n;try{if(W){const _e=await W.estimateContractGas({address:o,abi:Ds,functionName:"createGame",args:[j,z,V],account:r});xe=_e,console.log("[CREATE] Estimated gas:",_e.toString())}}catch(_e){console.warn("[CREATE] Gas estimation failed, using default:",_e)}let me;gr[Ir].isNative?(console.log("[CREATE] Native DMT transaction - adding value:",V.toString()),me=v({address:o,abi:Ds,functionName:"createGame",args:[j,z,V],gas:xe,value:V})):me=v({address:o,abi:Ds,functionName:"createGame",args:[j,z,V],gas:xe}),console.log("[CREATE] Contract call initiated, result:",me),console.log("[CREATE] createGameHash after writeCreateGame:",_),console.log("[CREATE] Pending game data being set:",re),Zc(re),yt("Creating game... Please confirm transaction in your wallet.")}catch(U){console.error("[CREATE] Error creating game:",U),yt("Failed to create game. Please try again.")}finally{xr(!1)}}},j$=async U=>{var j;if(r)try{const z=await ai.getGame(U);if(!z||z.game_state!=="waiting"){yt("Game not found or already full");return}const V=ve(z.bet_amount,z.bet_token||"NATIVE_DMT");if(Me(U),Tt(!0),or("red"),Xe(V,"joinGame"),ds(z.blue_player),r===z.blue_player){console.error("[JOIN] Player cannot join their own game"),yt("You cannot join your own game");return}if(ue&&ue!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",ue),yt("You already have an active game");return}const re=(j=gr[z.bet_token])==null?void 0:j.address;if(re&&re!=="0x0000000000000000000000000000000000000000"&&W)try{const _e=await W.readContract({address:re,abi:[{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],type:"function"}],functionName:"allowance",args:[r,o]}),St=BigInt(z.bet_amount);if(_e<St){yt(`Approving ${z.bet_token} spending...`),Tm(!0);try{R(z.bet_token,o,St);return}catch(Le){console.error("[JOIN] Error approving token:",Le),yt(`Failed to approve ${z.bet_token}. Please try again.`),Tm(!1);return}}}catch(me){console.error("[JOIN] Error checking token allowance:",me)}yt("Joining game... Please confirm transaction in your wallet.");let xe=200000n;try{if(W){const me=await W.estimateContractGas({address:o,abi:Ds,functionName:"joinGame",args:[U],account:r});xe=me,console.log("[JOIN] Estimated gas:",me.toString())}}catch(me){console.warn("[JOIN] Gas estimation failed, using default:",me)}try{const me=gr[z.bet_token];if(me==null?void 0:me.isNative){console.log("[JOIN] Native DMT game - adding value:",z.bet_amount);const St=I({address:o,abi:Ds,functionName:"joinGame",args:[U],gas:xe,value:BigInt(z.bet_amount)})}else{const St=I({address:o,abi:Ds,functionName:"joinGame",args:[U],gas:xe})}ha({inviteCode:U,gameData:z,address:r})}catch(me){console.error("[JOIN] Error calling writeJoinGame:",me),yt("Failed to send transaction. Please try again.")}}catch(z){console.error("[JOIN] Error joining game:",z),yt("Failed to join game. Please try again."),ge("","join game error"),or(null),Xe(0,"join game error"),ds(null)}},[Qqe,Jqe]=D.useState(null),[Zqe,Xqe]=D.useState(""),[eVe,tVe]=D.useState(!0),jne=()=>{console.log("[FIREBASE] No fallback to stop")},Gf=U=>{zf.current&&zf.current();const j=ai.subscribeToGame(U,z=>{const V=$$.current;if(!z)return;if(Yn&&V===Yn.address)z.game_state==="active"&&ha(null),z.blue_player&&z.red_player&&z.red_player!=="0x0000000000000000000000000000000000000000"&&ds(z.blue_player===V?z.red_player:z.blue_player);else if(V&&z.blue_player&&z.red_player&&z.red_player!=="0x0000000000000000000000000000000000000000"){const me=V.toLowerCase()===z.blue_player.toLowerCase(),_e=V.toLowerCase()===z.red_player.toLowerCase();me&&Zt!=="blue"?(or("blue"),ds(z.red_player)):_e&&Zt!=="red"?(or("red"),ds(z.blue_player)):!me&&!_e&&Zt!==null&&(or(null),ds(null))}else{if(!(Zt&&(Zt==="blue"||Zt==="red"))){if(V){const me=Ee();if(me&&Array.isArray(me)){const[_e,St]=me;if(_e&&St){const Le=_e.toLowerCase()===V.toLowerCase()?"blue":"red",kt=_e.toLowerCase()===V.toLowerCase()?St:_e;or(Le),ds(kt)}}}}z.blue_player&&z.red_player&&z.red_player!=="0x0000000000000000000000000000000000000000"&&ds(z.blue_player===V?z.red_player:z.blue_player)}if(z.board&&!Kn){const me=Dm(z.board);Gr(me)}else z.board&&Kn&&console.log("[FIREBASE] Skipping board update due to local move in progress");z.current_player&&zn(z.current_player),z.game_state==="active"?(Nn(un.ACTIVE),ni(!0),yt("Game in progress")):z.game_state==="finished"?(Nn(un.FINISHED),yt("Game finished")):z.game_state==="waiting"&&(Nn(un.WAITING),yt("Waiting for opponent to join..."));let re=0;const xe=z.bet_token||"NATIVE_DMT";if(z.bet_amount&&!isNaN(parseFloat(z.bet_amount)))re=ve(z.bet_amount,xe);else{const me=Ee();me&&Array.isArray(me)&&me[5]&&(re=ve(me[5].toString(),xe))}Xe(re,"Firebase subscription")});return zf.current=j,j};D.useEffect(()=>{if(Se){const U=Gf(Se);return()=>{U&&typeof U=="function"&&U()}}},[Se]),D.useEffect(()=>{const U=Ee();if(U&&!Zt&&r){console.log("[FALLBACK] Setting playerColor from contract data");let j,z,V,re,xe,me;if(Array.isArray(U))[j,z,V,re,xe,me]=U;else{console.error("[FALLBACK] Unexpected contract data format:",U);return}const _e=j===r?"blue":"red",St=j===r?z:j;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",j),console.log("[FALLBACK] - player2 (red):",z),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",_e),console.log("[FALLBACK] - opponent:",St),console.log("[FALLBACK] - inviteCode from contract:",xe),or(_e),ds(St),!Se&&xe&&(console.log("[FALLBACK] Setting missing inviteCode:",xe),Me(xe)),Se&&(console.log("[AUTO-FIX] Checking Firebase data for inviteCode:",Se),ai.getGame(Se).then(Le=>{console.log("[AUTO-FIX] Current Firebase data:",Le),console.log("[AUTO-FIX] Contract data:",U);const kt=!Le||!Le.blue_player||Le.red_player==="0x0000000000000000000000000000000000000000"||Le.game_state!=="active";if(console.log("[AUTO-FIX] Needs update:",kt),kt&&U&&Array.isArray(U)){console.log("[AUTO-FIX] Updating Firebase with correct data...");const[on,fr]=U;console.log("[AUTO-FIX] Updating Firebase with player1 (blue):",on),console.log("[AUTO-FIX] Updating Firebase with player2 (red):",fr),ai.updateGame(Se,{blue_player:on,red_player:fr,game_state:"active",current_player:"blue"}).then(()=>{console.log("[AUTO-FIX] Firebase updated with correct player data")}).catch(vR=>{console.error("[AUTO-FIX] Error updating Firebase:",vR)})}Le&&Le.game_state==="active"&&Yn&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),ha(null))}).catch(Le=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",Le)}))}},[et,Jt,Zt,r,Se]),D.useEffect(()=>{if(le&&Yn){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",le.transactionHash),console.log("[RECEIPT] Pending data:",Yn);const{inviteCode:U,gameData:j,address:z}=Yn;ai.updateGame(U,{red_player:z,blue_player:j.blue_player,bet_amount:j.bet_amount,game_state:"active",last_move:null,board:{positions:zb(wu),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),yt("Game started! You are the red player."),Nn(un.ACTIVE),ni(!0),ha(null)}).catch(V=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",V),yt("Game joined but failed to update game state. Please refresh.")})}},[le,Yn]),D.useEffect(()=>{S&&(console.error("[ERROR] Join transaction failed:",S),yt(`Failed to join game: ${S.message||"Transaction rejected"}`),ge("","join game error effect"),or(null),Xe(0,"join game error effect"),ds(null),ha(null))},[S]);const zb=U=>{const j={};return U.forEach((z,V)=>{z.forEach((re,xe)=>{j[`${V}_${xe}`]=re})}),j},Dm=U=>{if(!U||!U.positions)return console.warn("[BOARD] No board data available, using initial board"),wu;if(console.log("[BOARD] Attempting to reconstruct board from:",U),console.log("[BOARD] Positions type:",typeof U.positions),console.log("[BOARD] Positions is array:",Array.isArray(U.positions)),console.log("[BOARD] Positions value:",U.positions),typeof U.positions=="object"&&!Array.isArray(U.positions)){const j=U.positions,z=U.rows||8,V=U.cols||8,re=Array(z).fill(null).map(()=>Array(V).fill(null));for(let xe=0;xe<z;xe++)for(let me=0;me<V;me++){const _e=`${xe}_${me}`;re[xe][me]=j[_e]||null}return console.log("[BOARD] Reconstructed from flat structure:",re),re}return Array.isArray(U.positions)?(console.log("[BOARD] Found array structure, length:",U.positions.length),U.positions.length===8?U.positions.every((z,V)=>{const re=Array.isArray(z)&&z.length===8;return re||console.warn(`[BOARD] Row ${V} is invalid:`,z,"Type:",typeof z,"Length:",z==null?void 0:z.length),re})?(console.log("[BOARD] Using legacy array structure"),U.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),wu):(console.warn("[BOARD] Array has wrong length:",U.positions.length,"expected 8"),wu)):(console.warn("[BOARD] Unknown board structure, using initial board:",U),wu)},Z1=U=>U?`${U.slice(0,6)}...${U.slice(-4)}`:"Unknown",Tn=U=>U&&U===U.toUpperCase()?"red":"blue",W$=(U,j)=>U>=0&&U<8&&j>=0&&j<8,z$=(U,j)=>`${"abcdefgh"[j]}${"87654321"[U]}`,Wne=(U,j,z,V)=>{const re=z$(U.row,U.col),xe=z$(j.row,j.col);return`${re}-${xe}`},Hb=(U,j)=>{const z=j==="red"?"K":"k";let V=-1,re=-1;for(let me=0;me<8;me++){for(let _e=0;_e<8;_e++)if(U[me][_e]===z){V=me,re=_e;break}if(V!==-1)break}return V===-1?!1:zne(V,re,j==="red"?"blue":"red",U)},zne=(U,j,z,V)=>{if(!V||!Array.isArray(V)||V.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",V),!1;for(let re=0;re<8;re++){if(!V[re]||!Array.isArray(V[re])||V[re].length!==8)return console.warn("[SAFETY] Invalid board row structure:",V[re]),!1;for(let xe=0;xe<8;xe++){const me=V[re][xe];if(me&&Tn(me)===z&&Mm(me,re,xe,U,j,!1,z,V,!0))return!0}}return!1},Hne=(U,j,z,V,re,xe=Rt)=>{const me=xe[U][j];if(!me)return!1;const _e=xe.map(St=>[...St]);return _e[z][V]=me,_e[U][j]=null,Hb(_e,re)},Gne=(U,j,z,V,re,xe)=>{const me=U==="blue"?-1:1,_e=U==="blue"?6:1;if(!W$(V,re)||U==="blue"&&V>=j||U==="red"&&V<=j)return!1;if(z===re&&V===j+me)return xe[V][re]===null;if(z===re&&j===_e&&V===j+2*me)return xe[j+me][z]===null&&xe[V][re]===null;if(Math.abs(z-re)===1&&V===j+me){const St=xe[V][re];if(St!==null&&Tn(St)!==U)return!0;if(St===null&&Ue.lastPawnDoubleMove){const{row:Le,col:kt}=Ue.lastPawnDoubleMove;if(Le===j&&kt===re){const on=xe[j][re];if(on&&on.toLowerCase()==="p"&&Tn(on)!==U)return!0}}}return!1},H$=(U,j,z,V,re)=>U===z||j===V,qne=(U,j,z,V)=>{const re=Math.abs(U-z),xe=Math.abs(j-V);return re===2&&xe===1||re===1&&xe===2},G$=(U,j,z,V,re)=>Math.abs(U-z)===Math.abs(j-V),Vne=(U,j,z,V,re)=>H$(U,j,z,V)||G$(U,j,z,V),Kne=(U,j,z,V,re)=>{const xe=Math.abs(j-V),me=Math.abs(z-re);if(xe<=1&&me<=1)return!0;if(xe===0&&me===2){if(U==="blue"&&!Ue.blueKingMoved){if(re===6&&!Ue.blueRooksMove.right||re===2&&!Ue.blueRooksMove.left)return!0}else if(U==="red"&&!Ue.redKingMoved&&(re===6&&!Ue.redRooksMove.right||re===2&&!Ue.redRooksMove.left))return!0}return!1},wR=(U,j,z,V,re)=>{const xe=U===z?0:(z-U)/Math.abs(z-U),me=j===V?0:(V-j)/Math.abs(V-j);let _e=U+xe,St=j+me;for(;_e!==z||St!==V;){if(re[_e][St]!==null)return!1;_e+=xe,St+=me}return!0},Mm=(U,j,z,V,re,xe=!0,me=Tn(U),_e=Rt,St=!1)=>{if(!U||!W$(V,re))return!1;const Le=_e[V][re];if(Le&&Tn(Le)===me)return!1;let kt=!1;switch(U.toUpperCase()){case"P":kt=Gne(me,j,z,V,re,_e);break;case"R":kt=H$(j,z,V,re)&&wR(j,z,V,re,_e);break;case"N":kt=qne(j,z,V,re);break;case"B":kt=G$(j,z,V,re)&&wR(j,z,V,re,_e);break;case"Q":kt=Vne(j,z,V,re)&&wR(j,z,V,re,_e);break;case"K":kt=Kne(me,j,z,V,re);break}return!(!kt||xe&&Hne(j,z,V,re,me,_e))},bR=(U,j=Rt,z=Bt)=>{const V=[],re=j[U.row][U.col];if(!re||Tn(re)!==z)return V;const xe=re.toLowerCase();if(xe==="p"){const me=z==="blue"?-1:1,_e=z==="blue"?6:1,St=U.row+me;if(St>=0&&St<8&&Mm(re,U.row,U.col,St,U.col,!0,z,j,!0)&&V.push({row:St,col:U.col}),U.row===_e){const Le=U.row+2*me;Le>=0&&Le<8&&Mm(re,U.row,U.col,Le,U.col,!0,z,j,!0)&&V.push({row:Le,col:U.col})}for(const Le of[-1,1]){const kt=U.col+Le,on=U.row+me;kt>=0&&kt<8&&on>=0&&on<8&&Mm(re,U.row,U.col,on,kt,!0,z,j,!0)&&V.push({row:on,col:kt})}}else if(xe==="n"){const me=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[_e,St]of me){const Le=U.row+_e,kt=U.col+St;Le>=0&&Le<8&&kt>=0&&kt<8&&Mm(re,U.row,U.col,Le,kt,!0,z,j,!0)&&V.push({row:Le,col:kt})}}else for(let me=0;me<8;me++)for(let _e=0;_e<8;_e++)Mm(re,U.row,U.col,me,_e,!0,z,j,!0)&&V.push({row:me,col:_e});return V},Yne=(U,j=Rt)=>{if(!Hb(j,U))return!1;for(let z=0;z<8;z++)for(let V=0;V<8;V++){const re=j[z][V];if(re&&Tn(re)===U&&bR({row:z,col:V},j,U).length>0)return!1}return!0},Qne=(U,j=Rt)=>{if(Hb(j,U))return!1;for(let z=0;z<8;z++)for(let V=0;V<8;V++){const re=j[z][V];if(re&&Tn(re)===U&&bR({row:z,col:V},j,U).length>0)return!1}return!0},q$=(U,j)=>{if(console.log("[CLICK] Square clicked:",{row:U,col:j}),console.log("[CLICK] Game mode:",us,"Player color:",Zt),console.log("[CLICK] Current player:",Bt,"Player color:",Zt),us!==un.ACTIVE||!Zt){console.log("[CLICK] Game not active or no player color");return}const z=Rt[U][j],V=z?Tn(z):null;if(console.log("[CLICK] Piece at square:",z,"Piece color:",V),Bt!==Zt){console.log("[CLICK] Not player's turn. Current:",Bt,"Player:",Zt);return}if(z&&V===Zt){Gi({row:U,col:j});const re=bR({row:U,col:j});Ff(re);return}if(Sr&&Jc.some(re=>re.row===U&&re.col===j)){Jne(Sr,{row:U,col:j}),Gi(null),Ff([]);return}Gi(null),Ff([])},Jne=async(U,j)=>{if(!Zt||Bt!==Zt)return;const z=Rt[U.row][U.col];if(z){if(console.log("[PAWN_PROMOTION_CHECK]",{piece:z,pieceLower:z.toLowerCase(),isPawn:z.toLowerCase()==="p",pieceColor:Tn(z),toRow:j.row,bluePromotion:Tn(z)==="blue"&&j.row===0,redPromotion:Tn(z)==="red"&&j.row===7,shouldPromote:z.toLowerCase()==="p"&&(Tn(z)==="blue"&&j.row===0||Tn(z)==="red"&&j.row===7)}),z.toLowerCase()==="p"&&(Tn(z)==="blue"&&j.row===0||Tn(z)==="red"&&j.row===7)){console.log("[PAWN_PROMOTION] Triggering promotion dialog"),Fb({from:U,to:j}),Om(!0);return}await V$(U,j)}},V$=async(U,j,z="q")=>{if(!Zt||Bt!==Zt)return;const V=Rt[U.row][U.col];if(!V)return;const re=Rt[j.row][j.col],xe=re!==null;if(console.log("[MOVE] Executing move:",{from:{row:U.row,col:U.col,piece:V},to:{row:j.row,col:j.col,capturedPiece:re},player:Bt,isCapture:xe,moveType:V.toUpperCase()==="K"?"king":V.toUpperCase()==="R"?"rook":"other"}),qf(xe?"capture":"move"),xe){ie({row:j.row,col:j.col,show:!0}),setTimeout(()=>{K$(U,j,z),ie(null)},500);return}K$(U,j,z)},K$=async(U,j,z="q")=>{if(!Zt||Bt!==Zt)return;const V=Rt[U.row][U.col];if(!V)return;Ub(!0),console.log("[MOVE_ANIMATION] Starting move execution:",{from:{row:U.row,col:U.col,piece:V},to:{row:j.row,col:j.col,capturedPiece:Rt[j.row][j.col]},currentBoard:Rt.map(Le=>[...Le])});const re=Rt.map(Le=>[...Le]);console.log("[MOVE_ANIMATION] Before special moves handling"),Xne(re,U,j,V,z),console.log("[MOVE_ANIMATION] After special moves handling"),re[j.row][j.col]===null?re[j.row][j.col]=V:V.toLowerCase()==="p"&&(Tn(V)==="blue"&&j.row===0||Tn(V)==="red"&&j.row===7)?console.log("[MOVE_ANIMATION] Promotion already handled by special moves"):(console.log("[MOVE_ANIMATION] Capturing piece, replacing captured piece with attacking piece"),re[j.row][j.col]=V),re[U.row][U.col]=null,console.log("[MOVE_ANIMATION] Move completed:",{from:{row:U.row,col:U.col},to:{row:j.row,col:j.col},piece:V,finalBoardState:re.map(Le=>[...Le])}),ere(U,j,V);const xe=Wne(U,j);D$(Le=>{const kt=[...Le,xe];return console.log("[MOVE HISTORY UPDATED]",kt),kt});const me=Bt==="blue"?"red":"blue";Hb(re,me)&&qf("check");let _e="active",St=null;if(Yne(me,re)){_e="finished",St=Bt,yt(`${Bt==="red"?"Red":"Blue"} wins by checkmate!`),qf(Bt===Zt?"victory":"loser"),Zne();const Le=Ee();Le&&Le.length>=2?await F$(Bt,Le[0],Le[1]):(await B$(Bt===Zt?"win":"loss"),await J1()),St===Zt&&setTimeout(()=>{Vn()},2e3)}else if(Qne(me,re)){const Le=Bt;_e="finished",yt(`${Le==="red"?"Red":"Blue"} wins by stalemate!`),qf(Le===Zt?"victory":"loser");const kt=Ee();kt&&kt.length>=2?await F$(Le,kt[0],kt[1]):(await B$(Le===Zt?"win":"loss"),await J1()),Le===Zt&&setTimeout(()=>{Vn()},2e3)}try{if(!Se){console.error("[BUG] inviteCode is missing when trying to update game!"),yt("Game code missing. Please reload or rejoin the game.");return}const Le=zb(re);await ai.updateGame(Se,{board:{positions:Le,rows:8,cols:8},current_player:me,game_state:_e,winner:St,last_move:{from:U,to:j}})}catch(Le){console.error("[DATABASE] Error updating game:",Le)}Gr(re),zn(me),Wb({from:U,to:j}),Om(!1),Fb(null),setTimeout(()=>{Ub(!1)},1e3)},Zne=()=>{ou(!0);for(let U=0;U<50;U++)setTimeout(()=>{const j=document.createElement("div");j.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(j),setTimeout(()=>j.remove(),300)},U*100);Hf.current&&clearTimeout(Hf.current),Hf.current=setTimeout(()=>{ou(!1)},5e3)},Xne=(U,j,z,V,re="q")=>{if(console.log("[SPECIAL_MOVES] Checking for special moves:",{piece:V,from:j,to:z,isKing:V.toLowerCase()==="k",colDifference:Math.abs(j.col-z.col)}),console.log("[SPECIAL_MOVES_PROMOTION_CHECK]",{piece:V,isPawn:V.toLowerCase()==="p",pieceColor:Tn(V),toRow:z.row,promotionPiece:re,shouldPromote:V.toLowerCase()==="p"&&(Tn(V)==="blue"&&z.row===0||Tn(V)==="red"&&z.row===7)}),V.toLowerCase()==="p"&&(Tn(V)==="blue"&&z.row===0||Tn(V)==="red"&&z.row===7)){const xe=Tn(V)==="blue"?re.toLowerCase():re.toUpperCase();console.log("[SPECIAL_MOVES_PROMOTION] Promoting pawn to:",xe),U[z.row][z.col]=xe}if(V.toLowerCase()==="k"&&Math.abs(j.col-z.col)===2){if(console.log("[SPECIAL_MOVES] Castling detected!",{fromCol:j.col,toCol:z.col,castlingType:z.col===6?"kingside":"queenside"}),z.col===6)console.log("[SPECIAL_MOVES] Executing kingside castling"),U[j.row][7]=null,U[j.row][5]=Tn(V)==="blue"?"r":"R";else if(z.col===2){console.log("[SPECIAL_MOVES] Executing queenside castling");const xe=U[j.row][3];U[j.row][0]=null,U[j.row][3]=Tn(V)==="blue"?"r":"R",xe&&xe.toLowerCase()==="q"&&(U[j.row][4]=xe)}}else console.log("[SPECIAL_MOVES] No castling detected");V.toLowerCase()==="p"&&Math.abs(j.col-z.col)===1&&U[z.row][z.col]===null&&Ue.lastPawnDoubleMove&&Ue.lastPawnDoubleMove.row===j.row&&Ue.lastPawnDoubleMove.col===z.col&&(U[j.row][z.col]=null)},ere=(U,j,z)=>{const V={...Ue};z.toLowerCase()==="k"?Tn(z)==="blue"?V.blueKingMoved=!0:V.redKingMoved=!0:z.toLowerCase()==="r"&&(Tn(z)==="blue"?(U.col===0&&(V.blueRooksMove.left=!0),U.col===7&&(V.blueRooksMove.right=!0)):(U.col===0&&(V.redRooksMove.left=!0),U.col===7&&(V.redRooksMove.right=!0))),z.toLowerCase()==="p"&&Math.abs(U.row-j.row)===2?V.lastPawnDoubleMove={row:j.row,col:j.col}:V.lastPawnDoubleMove=null,cn(V)},qf=U=>{if(!q)return;let j="";switch(U){case"move":j="/images/move.mp3";break;case"capture":j="/images/capture.mp3";break;case"check":j="/images/play.mp3";break;case"checkmate":j="/images/victory.mp3";break;case"victory":j="/images/victory.mp3";break;case"loser":j="/images/loser.mp3";break;case"upgrade":j="/images/upgrade.mp3";break;default:j="/images/move.mp3"}try{const z=new Audio(j);z.volume=.3,z.play().catch(V=>console.warn("Audio play failed:",V))}catch(z){console.warn("Sound play failed:",z)}},tre=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(U){console.error("Error checking stuck games:",U)}},nre=(U,j,z)=>{z.preventDefault(),q$(U,j)},rre=U=>{U.preventDefault()},sre=(U,j)=>{if(!Rt||!Array.isArray(Rt)||Rt.length!==8||!Rt[U]||!Array.isArray(Rt[U])||Rt[U].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:U,col:j,board:Rt}),m.jsx("div",{className:"square error",children:m.jsx("div",{className:"error-indicator",children:"!"})},`${U}-${j}`);const z=Rt[U][j],V=(Sr==null?void 0:Sr.row)===U&&(Sr==null?void 0:Sr.col)===j,re=Jc.some(_e=>_e.row===U&&_e.col===j),xe=Xt&&(Xt.from.row===U&&Xt.from.col===j||Xt.to.row===U&&Xt.to.col===j),me=z&&z.toUpperCase()==="K"&&Hb(Rt,Tn(z));return m.jsxs("div",{className:`square ${V?"selected":""} ${re?"legal-move":""} ${xe?"last-move":""} ${me?"square-in-check":""}`,onClick:()=>q$(U,j),onTouchStart:_e=>nre(U,j,_e),onTouchMove:rre,children:[z&&m.jsx("div",{className:"piece",style:{backgroundImage:w2[z]?`url(${w2[z]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),re&&m.jsx("div",{className:"legal-move-indicator"})]},`${U}-${j}`)},ire=()=>{if(!Bb||!Wf)return null;const U=Bt==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:U.map(j=>m.jsx("div",{className:"promotion-piece",onClick:()=>{V$(Wf.from,Wf.to,j),Om(!1),Fb(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:m.jsx("img",{src:w2[j],alt:j,style:{width:"40px",height:"40px"}})},j))})]})})},ore=()=>m.jsxs("div",{className:"piece-gallery",children:[m.jsx("h3",{children:"Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:eHe.map(U=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>{mR(Pm===U.key?null:U.key)},children:[m.jsx("img",{src:U.img,alt:U.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:U.name}),Pm===U.key&&m.jsx("div",{className:"piece-gallery-desc",children:U.desc})]},U.key))})]});return D.useEffect(()=>{J1(),km(),tre();const U=setInterval(km,3e4);return()=>{clearInterval(U),zf.current&&zf.current(),Hf.current&&clearTimeout(Hf.current)}},[]),m.jsxs("div",{className:`chess-game${ti?" game-active":""}`,children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[(us===un.ACTIVE||us===un.FINISHED)&&ti&&m.jsxs("div",{className:"left-sidebar",children:[Sd==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:_n.slice(0,8).map((U,j)=>m.jsxs("tr",{children:[m.jsx("td",{children:j+1}),m.jsx("td",{children:Z1(U.username)}),m.jsx("td",{children:U.points})]},U.username))})]})})]}),Sd==="moves"&&m.jsxs("div",{className:"move-history-compact",children:[m.jsx("div",{className:"move-history-title",children:"Moves"}),m.jsx("ul",{className:"move-history-list-compact",children:Lb.slice().reverse().map((U,j)=>m.jsx("li",{children:U},Lb.length-1-j))})]}),Sd==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:ore()})]}),m.jsxs("div",{className:"center-area",children:[us===un.LOBBY&&m.jsxs("div",{className:"chess-multiplayer-lobby",children:[m.jsx("h2",{children:"PvP Chess Lawby"}),s?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"status-bar",children:["Connected: ",Z1(r)]}),m.jsxs("div",{className:"lobby-content",children:[m.jsxs("div",{className:"open-games",children:[m.jsxs("h3",{children:["Open Games (",$b.length,")"]}),m.jsxs("div",{className:"games-list",children:[$b.map(U=>(console.log("[RENDER LOBBY] Rendering game:",U),m.jsxs("div",{className:"game-item",children:[m.jsxs("div",{className:"game-info",children:[m.jsx("div",{className:"game-id",children:U.game_title||"Untitled Game"}),m.jsxs("div",{className:"wager",children:["Wager: ",(parseFloat(U.bet_amount)/Math.pow(10,gr[U.bet_token||"DMT"].decimals)).toFixed(2)," ",U.bet_token||"DMT"]}),m.jsxs("div",{className:"title",children:["Created by: ",Z1(U.blue_player)]})]}),m.jsx("button",{className:"join-btn",onClick:()=>j$(U.invite_code),children:"Join Game"})]},U.invite_code))),$b.length===0&&m.jsx("div",{className:"no-games",children:"No open games available"})]})]}),m.jsxs("div",{className:"actions",children:[m.jsx("button",{className:"create-btn",onClick:()=>da(!0),disabled:G1||jf,children:"Create New Game"}),m.jsx("button",{onClick:km,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"8px 16px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🔄 Refresh Lobby"}),m.jsx("button",{onClick:()=>window.location.href="/chess",style:{marginTop:"10px",background:"rgba(255, 193, 7, 0.1)",border:"2px solid #ffc107",color:"#ffc107",padding:"12px 24px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🏠 Back to Chess Home"})]}),G1&&m.jsxs("div",{className:"create-form",children:[m.jsx("h3",{children:"Create New Game"}),m.jsx(Zze,{selectedToken:Ir,onTokenSelect:fR,wagerAmount:Xc,onWagerChange:hR,disabled:jf}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"create-confirm-btn",onClick:Fne,disabled:Xc<=0||jf,children:jf?"Creating...":"Create Game"}),m.jsx("button",{className:"cancel-btn",onClick:()=>{da(!1),xr(!1)},children:"Cancel"})]})]})]})]}):m.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),us===un.WAITING&&m.jsxs("div",{className:"chess-multiplayer-waiting",children:[m.jsx("h2",{children:"Waiting for Opponent"}),m.jsxs("div",{className:"game-code",children:["Invite Code: ",m.jsx("strong",{children:Se})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("p",{children:["Wager: ",Nm.toFixed(((Y$=gr[Ir])==null?void 0:Y$.decimals)||8)," ",Ir]}),m.jsx("p",{children:"Share this invite code with your opponent"})]}),m.jsxs("div",{className:"waiting-actions",children:[m.jsx("button",{onClick:Ct,disabled:B||ae,className:"refund-game-btn",children:B||ae?"⏳ Refunding...":"💰 Refund Game"}),m.jsx("p",{className:"refund-note",children:"You can refund your wager anytime before an opponent joins"})]})]}),(us===un.ACTIVE||us===un.FINISHED)&&ti&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"game-info-compact",children:[m.jsxs("span",{className:Bt==="blue"?"current-blue":"current-red",children:[Bt==="blue"?"Blue":"Red"," to move"]}),m.jsxs("span",{className:"wager-display",children:["Wager: ",Nm.toFixed(((Q$=gr[Ir])==null?void 0:Q$.decimals)||8)," ",Ir]}),W1&&m.jsxs("span",{className:"opponent-info",children:["vs ",Z1(W1)]})]}),m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",children:[Array.from({length:8},(U,j)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(z,V)=>sre(j,V))},j)),se&&se.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${se.row*12.5}%`,left:`${se.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls-compact",children:[m.jsxs("div",{className:"sidebar-toggle-group",children:[m.jsx("button",{className:Sd==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>jb("moves"),children:"Moves"}),m.jsx("button",{className:Sd==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>jb("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:Sd==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>jb("gallery"),children:"Gallery"})]}),m.jsx("button",{onClick:()=>{Nn(un.LOBBY),ni(!1)},children:"New Game"}),m.jsx("button",{onClick:()=>{Nn(un.LOBBY),ni(!1)},children:"Menu"})]})]})]})]})]}),ire(),yR&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:()=>Nn(un.LOBBY),children:"Back to Lobby"}),m.jsx("button",{onClick:()=>window.location.reload(),children:"New Game"})]})]})]})},hS={AI:"ai"},nHe=1996,fS={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},UW=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],rHe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],sHe=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},iHe=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},oHe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=Cb(),i=Xa();RU();const{open:o}=O1(),[a,c]=D.useState(hS.AI),[l,u]=D.useState(()=>JSON.parse(JSON.stringify(UW))),[d,h]=D.useState("blue"),[f,p]=D.useState(null),[g,w]=D.useState("active"),[y,b]=D.useState("hard"),[v,A]=D.useState("Connect wallet to play"),[_,I]=D.useState([]),[x,N]=D.useState([]),[S,O]=D.useState([]),[P,F]=D.useState(null),[G,B]=D.useState(!1),[T,R]=D.useState(!1),[$,k]=D.useState(null),[M,W]=D.useState(null),[K]=D.useState(""),[ne]=D.useState(.1),[le,oe]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ae=D.useRef(null),ue=D.useRef(!1),et=D.useRef(l),Se=D.useRef(null),Me=D.useRef(null),rt=D.useRef(!1),Tt=D.useRef(!1),[Jt,X]=D.useState(!1),[ce,Ee]=D.useState(!1),[ge,ve]=D.useState(!1),{stockfishReady:Xe}=sHe(),{getOpeningData:st}=iHe(),[At,Ct]=D.useState("loading"),[Vn,Rt]=D.useState(!1),[Gr,Bt]=D.useState([]),[zn,Sr]=D.useState(!1),[Gi,Jc]=D.useState(()=>{const q=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],Y=Math.floor(Math.random()*q.length),se=q[Y];return console.log("[DEBUG] Initial random chessboard selected:",se,"(index:",Y,")"),se}),[Ff,Lb]=D.useState(!0),[D$,j1]=D.useState(!1);D.useEffect(()=>{!s||!r?(A("Connect wallet to play"),B(!1),X(!1),o()):i!==nHe?(A("Switch to Sanko Mainnet to play"),B(!1),X(!1),o()):A("Select game mode")},[s,r,i,o]);const yt=()=>{const q=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],Y=Math.floor(Math.random()*q.length),se=q[Y];return console.log("[DEBUG] Random chessboard selected:",se,"(index:",Y,")"),se};D.useEffect(()=>{if(Xe)Ct("ready");else{const q=window.setTimeout(()=>{Xe||(Ct("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(q)}},[Xe]),D.useEffect(()=>{et.current=l},[l]),D.useEffect(()=>(!ae.current&&typeof Worker<"u"&&(ae.current=new Worker("/aiWorker.js"),ae.current.onmessage=q=>{console.log("[DEBUG] AI worker response received:",q.data);const{move:Y,nodes:se}=q.data;Y&&ue.current&&g==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",Y),console.log("[DEBUG] AI searched",se,"nodes"),ue.current=!1,Me.current&&(window.clearTimeout(Me.current),Me.current=null),Se.current&&Se.current(Y.from,Y.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},ae.current.onerror=q=>{console.error("[DEBUG] AI worker error:",q),A("AI worker error - using fallback mode"),ue.current=!1}),()=>{ae.current&&(ae.current.terminate(),ae.current=null),Me.current&&(window.clearTimeout(Me.current),Me.current=null)}),[]),D.useEffect(()=>{us()},[]);const us=async()=>{try{await Mee();const q=await Dee(20);N(q),console.log("Leaderboard data loaded:",q)}catch(q){A("Failed to load leaderboard"),console.error("Leaderboard error:",q)}},Nn=async q=>{if(console.log("[DEBUG] updateScore called with:",q),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Xg(r)),await FI(r,q)?(console.log("[DEBUG] Successfully updated score for:",Xg(r)),await us()):console.error("[DEBUG] Failed to update score")}catch(Y){console.error("[DEBUG] Error in updateScore:",Y)}},Kn=q=>q&&q===q.toUpperCase()?"red":"blue",Ub=(q,Y)=>q>=0&&q<8&&Y>=0&&Y<8,Zt=(q,Y)=>`${String.fromCharCode(97+Y)}${8-q}`,or=(q,Y)=>{const se=Y==="blue"?"k":"K";let ie=null;for(let Pe=0;Pe<8;Pe++){for(let Ue=0;Ue<8;Ue++)if(q[Pe][Ue]===se){ie={row:Pe,col:Ue};break}if(ie)break}if(!ie)return console.log(`King not found for ${Y}`),!1;const ee=Y==="blue"?"red":"blue",Re=W1(ie.row,ie.col,ee,q);return console.log(`${Y} king at ${ie.row},${ie.col} under attack: ${Re}`),Re},W1=(q,Y,se,ie)=>{for(let ee=0;ee<8;ee++)for(let Re=0;Re<8;Re++){const Pe=ie[ee][Re];if(Pe&&Kn(Pe)===se&&xr(Pe,ee,Re,q,Y,!1,se,ie,!0))return!0}return!1},ds=(q,Y,se,ie,ee,Re=l)=>{const Pe=Re.map(cn=>[...cn]),Ue=Pe[q][Y];return Pe[se][ie]=Ue,Pe[q][Y]=null,or(Pe,ee)},Nm=(q,Y,se,ie,ee,Re)=>{const Pe=q==="blue"?-1:1,Ue=q==="blue"?6:1;if(!Ub(ie,ee)||q==="blue"&&ie>=Y||q==="red"&&ie<=Y)return!1;const cn=Math.abs(ie-Y),_n=Math.abs(ee-se);if((cn===1&&_n===0||cn===2&&_n===0&&Y===Ue||cn===1&&_n===1)&&cn<=2&&_n<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:q,from:`${Y},${se}`,to:`${ie},${ee}`}),se===ee&&ie===Y+Pe)return Re[ie][ee]===null;if(se===ee&&Y===Ue&&ie===Y+2*Pe)return Re[Y+Pe][se]===null&&Re[ie][ee]===null;if(Math.abs(se-ee)===1&&ie===Y+Pe){const Xt=Re[ie][ee];return Xt!==null&&Kn(Xt)!==q}if(Math.abs(se-ee)===1&&ie===Y+Pe){const Xt=Re[Y][ee];if(Xt&&Kn(Xt)!==q&&Xt.toLowerCase()==="p"&&le.lastPawnDoubleMove&&le.lastPawnDoubleMove.row===Y&&le.lastPawnDoubleMove.col===ee)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},z1=(q,Y,se,ie,ee)=>q!==se&&Y!==ie?!1:jf(q,Y,se,ie,ee),$b=(q,Y,se,ie)=>{const ee=Math.abs(q-se),Re=Math.abs(Y-ie);return ee===2&&Re===1||ee===1&&Re===2},H1=(q,Y,se,ie,ee)=>Math.abs(q-se)!==Math.abs(Y-ie)?!1:jf(q,Y,se,ie,ee),G1=(q,Y,se,ie,ee)=>z1(q,Y,se,ie,ee)||H1(q,Y,se,ie,ee),da=(q,Y,se,ie,ee)=>{const Re=Math.abs(Y-ie),Pe=Math.abs(se-ee);if(Re<=1&&Pe<=1)return!0;if(Re===0&&Pe===2){if(q==="blue"&&!le.blueKingMoved){if(ee===6&&!le.blueRooksMove.right||ee===2&&!le.blueRooksMove.left)return!0}else if(q==="red"&&!le.redKingMoved&&(ee===6&&!le.redRooksMove.right||ee===2&&!le.redRooksMove.left))return!0}return!1},jf=(q,Y,se,ie,ee)=>{const Re=q===se?0:(se-q)/Math.abs(se-q),Pe=Y===ie?0:(ie-Y)/Math.abs(ie-Y);let Ue=q+Re,cn=Y+Pe;for(;Ue!==se||cn!==ie;){if(ee[Ue][cn]!==null)return!1;Ue+=Re,cn+=Pe}return!0},xr=(q,Y,se,ie,ee,Re=!0,Pe=Kn(q),Ue=l,cn=!1)=>{if(!Ub(ie,ee))return cn||console.log("[ILLEGAL MOVE] Out of board:",{piece:q,startRow:Y,startCol:se,endRow:ie,endCol:ee}),!1;const _n=Ue[ie][ee];if(_n&&Kn(_n)===Pe)return cn||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:q,startRow:Y,startCol:se,endRow:ie,endCol:ee}),!1;const hr=q.toLowerCase();let Xt=!1;switch(hr){case"p":Xt=Nm(Pe,Y,se,ie,ee,Ue);break;case"r":Xt=z1(Y,se,ie,ee,Ue);break;case"n":Xt=$b(Y,se,ie,ee);break;case"b":Xt=H1(Y,se,ie,ee,Ue);break;case"q":Xt=G1(Y,se,ie,ee,Ue);break;case"k":Xt=da(Pe,Y,se,ie,ee);break}return Xt?Xt&&Re&&ds(Y,se,ie,ee,Pe,Ue)?(cn||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:q,startRow:Y,startCol:se,endRow:ie,endCol:ee}),!1):Xt:(cn||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:q,startRow:Y,startCol:se,endRow:ie,endCol:ee,playerColor:Pe,pieceType:hr,targetPiece:Ue[ie][ee],targetPieceColor:Ue[ie][ee]?Kn(Ue[ie][ee]):null}),!1)},ei=(q,Y=l,se=d)=>{const ie=[],ee=Y[q.row][q.col];if(!ee||Kn(ee)!==se)return ie;const Re=ee.toLowerCase();if(Re==="p"){const Pe=se==="blue"?-1:1,Ue=se==="blue"?6:1,cn=q.row+Pe;if(cn>=0&&cn<8&&xr(ee,q.row,q.col,cn,q.col,!0,se,Y,!0)&&ie.push({row:cn,col:q.col}),q.row===Ue){const _n=q.row+2*Pe;_n>=0&&_n<8&&xr(ee,q.row,q.col,_n,q.col,!0,se,Y,!0)&&ie.push({row:_n,col:q.col})}for(const _n of[-1,1]){const hr=q.col+_n,Xt=q.row+Pe;hr>=0&&hr<8&&Xt>=0&&Xt<8&&xr(ee,q.row,q.col,Xt,hr,!0,se,Y,!0)&&ie.push({row:Xt,col:hr})}}else if(Re==="n"){const Pe=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Ue,cn]of Pe){const _n=q.row+Ue,hr=q.col+cn;_n>=0&&_n<8&&hr>=0&&hr<8&&xr(ee,q.row,q.col,_n,hr,!0,se,Y,!0)&&ie.push({row:_n,col:hr})}}else for(let Pe=0;Pe<8;Pe++)for(let Ue=0;Ue<8;Ue++)xr(ee,q.row,q.col,Pe,Ue,!0,se,Y,!0)&&ie.push({row:Pe,col:Ue});return ie},Zc=(q,Y=l)=>{if(!or(Y,q))return!1;for(let se=0;se<8;se++)for(let ie=0;ie<8;ie++){const ee=Y[se][ie];if(ee&&Kn(ee)===q&&ei({row:se,col:ie},Y,q).length>0)return!1}return!0},Yn=(q,Y=l)=>{if(or(Y,q))return!1;for(let se=0;se<8;se++)for(let ie=0;ie<8;ie++){const ee=Y[se][ie];if(ee&&Kn(ee)===q&&ei({row:se,col:ie},Y,q).length>0)return!1}return!0},ha=(q,Y)=>{if(g!=="active"||ue.current)return;const se=l[q][Y],ie=se?Kn(se):null;if(f&&S.some(ee=>ee.row===q&&ee.col===Y)){fa(f,{row:q,col:Y});return}if(se&&ie===d){const ee=ei({row:q,col:Y});p({row:q,col:Y}),O(ee);return}p(null),O([])},fa=(q,Y,se=!1)=>{const ie=l[q.row][q.col];if(console.log("[MOVE ATTEMPT]",{from:q,to:Y,piece:ie,isAIMove:se,board:JSON.parse(JSON.stringify(l)),moveHistory:_}),!!ie){if(ie.toLowerCase()==="p"&&(Kn(ie)==="blue"&&Y.row===0||Kn(ie)==="red"&&Y.row===7)){k({from:q,to:Y}),R(!0);return}Q1(q,Y,"q",se)}};Se.current=fa;const Tm=D.useCallback((q,Y,se=!1)=>{Sr(!0);const ie=l.map(Pe=>[...Pe]),ee=ie[q.row][q.col];if(!ee)return;ie[Y.row][Y.col]=ee,ie[q.row][q.col]=null,L$(ie,q,Y,ee);const Re=pR(q,Y);if(I(Pe=>{const Ue=[...Pe,Re];return console.log("[MOVE HISTORY UPDATED]",Ue),Ue}),F({from:q,to:Y}),p(null),O([]),_.length<10&&!se){const Pe=$W(ie,d==="blue"?"red":"blue");st(Pe).then(Ue=>{Ue&&Ue.moves&&Ue.moves.length>0&&(Bt(Ue.moves.slice(0,3)),Rt(!0),setTimeout(()=>Rt(!1),5e3))})}Y1(q,Y,ee),h(Pe=>{const Ue=Pe==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",Ue),dR(ie,Ue),Ue}),dR(ie,d==="blue"?"red":"blue"),u(ie),ue.current=!1,rt.current=!1,Tt.current=!1,Sr(!1)},[l,d,_,st]);D.useEffect(()=>{if(!ue.current&&a==="ai"&&d==="red"&&!rt.current&&!zn)if(ue.current=!0,y==="easy")setTimeout(()=>{const q=Rm(l);q?fa(q.from,q.to,!0):ue.current=!1},600);else{A("AI is calculating...");const q=$W(l,d);if(Tt.current)return;Tt.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:q,difficulty:y,movetime:3e3})}).then(se=>{if(se.ok)return se.json();throw new Error("API call failed")}).then(se=>{console.log("[DEBUG] Stockfish API response:",se);const ie=se.bestmove||se.move;if(ie&&ie!=="(none)"&&ie.length===4){const ee=ie.charCodeAt(0)-97,Re=parseInt(ie[1]),Pe=ie.charCodeAt(2)-97,Ue=parseInt(ie[3]),cn=8-Re,_n=8-Ue;if(console.log("[DEBUG] Parsed move:",{fromCol:ee,fromRowStockfish:Re,toCol:Pe,toRowStockfish:Ue,fromRow:cn,toRow:_n}),ee>=0&&ee<8&&cn>=0&&cn<8&&Pe>=0&&Pe<8&&_n>=0&&_n<8){const hr={from:{row:cn,col:ee},to:{row:_n,col:Pe}},Xt=l[cn][ee];if(console.log("[DEBUG] Move validation:",{piece:Xt,moveObj:hr,isValid:Xt&&Kn(Xt)==="red"&&xr(Xt,cn,ee,_n,Pe,!0,"red",l)}),Xt&&Kn(Xt)==="red"&&xr(Xt,cn,ee,_n,Pe,!0,"red",l))console.log("[DEBUG] Executing Stockfish move:",hr),fa(hr.from,hr.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const Wb=Rm(l);Wb&&fa(Wb.from,Wb.to,!0),ue.current=!1,Tt.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const hr=Rm(l);hr&&fa(hr.from,hr.to,!0),ue.current=!1,Tt.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const ee=Rm(l);ee&&fa(ee.from,ee.to,!0),ue.current=!1,Tt.current=!1}}).catch(se=>{console.error("[DEBUG] Stockfish API error:",se),A("AI error. Falling back to random moves.");const ie=Rm(l);ie&&fa(ie.from,ie.to,!0),ue.current=!1,Tt.current=!1})}},[d,a,y,l,le,Xe]);const dR=(q,Y)=>{console.log("Checking game end for player:",Y);const se=q.some(ee=>ee.some(Re=>Re==="k")),ie=q.some(ee=>ee.some(Re=>Re==="K"));if(!se)return console.log("[GAME END] KING CAPTURED - Red wins!"),w("checkmate"),A("King captured! Red wins!"),Nn("loss"),ve(!0),setTimeout(()=>ve(!1),3e3),"checkmate";if(!ie)return console.log("[GAME END] KING CAPTURED - Blue wins!"),w("checkmate"),A("King captured! You win!"),Nn("win"),ve(!0),setTimeout(()=>ve(!1),3e3),"checkmate";if(console.log("Is king in check:",or(q,Y)),Zc(Y,q)){console.log("[GAME END] CHECKMATE",{winner:Y==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(q)),moveHistory:_}),w("checkmate");const ee=Y==="blue"?"red":"blue";return ee==="blue"?(A("Checkmate! You win!"),sc("victory"),Pm(!0),j1(!0),gR(),Nn("win"),ve(!0),setTimeout(()=>ve(!1),3e3)):(A(`Checkmate! ${ee==="red"?"AI":"Opponent"} wins!`),sc("loser"),Bb(!0),Nn("loss"),ve(!0),setTimeout(()=>ve(!1),3e3)),"checkmate"}if(Yn(Y,q)){console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(q)),moveHistory:_}),w("stalemate");const ee=Y==="blue"?"red":"blue";return ee==="blue"?(A("Stalemate! You win!"),sc("victory"),Pm(!0),j1(!0),gR(),Nn("win"),ve(!0),setTimeout(()=>ve(!1),3e3)):(A(`Stalemate! ${ee==="red"?"AI":"Opponent"} wins!`),sc("loser"),Bb(!0),Nn("loss"),ve(!0),setTimeout(()=>ve(!1),3e3)),"stalemate"}return or(q,Y)?(console.log("CHECK detected!"),sc("check"),A(`${Y==="blue"?"Blue":"Red"} is in check!`)):A("Your turn"),null},Rm=q=>{const Y=[];for(let ee=0;ee<8;ee++)for(let Re=0;Re<8;Re++){const Pe=q[ee][Re];Pe&&Kn(Pe)==="red"&&Y.push({row:ee,col:Re})}for(let ee=Y.length-1;ee>0;ee--){const Re=Math.floor(Math.random()*(ee+1));[Y[ee],Y[Re]]=[Y[Re],Y[ee]]}const se=[],ie=[];for(const ee of Y){const Re=ei(ee,q,"red");for(const Pe of Re){const Ue=q[Pe.row][Pe.col];if(Ue&&Kn(Ue)==="blue"){const _n={p:100,n:320,b:330,r:500,q:900,k:2e4}[Ue.toLowerCase()]||0;se.push({from:ee,to:Pe,value:_n})}else ie.push({from:ee,to:Pe})}}if(se.length>0&&Math.random()<.3){se.sort((ee,Re)=>ee.value-Re.value);for(const ee of se){const Re=q.map(Ue=>[...Ue]),Pe=Re[ee.from.row][ee.from.col];if(Re[ee.to.row][ee.to.col]=Pe,Re[ee.from.row][ee.from.col]=null,!or(Re,"red"))return{from:ee.from,to:ee.to}}}for(const ee of ie){const Re=q.map(Ue=>[...Ue]),Pe=Re[ee.from.row][ee.from.col];if(Re[ee.to.row][ee.to.col]=Pe,Re[ee.from.row][ee.from.col]=null,!or(Re,"red"))return ee}se.sort((ee,Re)=>ee.value-Re.value);for(const ee of se){const Re=q.map(Ue=>[...Ue]),Pe=Re[ee.from.row][ee.from.col];if(Re[ee.to.row][ee.to.col]=Pe,Re[ee.from.row][ee.from.col]=null,!or(Re,"red"))return{from:ee.from,to:ee.to}}return null},Xc=()=>{u(JSON.parse(JSON.stringify(UW))),h("blue"),p(null),w("active"),I([]),O([]),F(null),B(!1),A("Select game mode"),oe({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ue.current&&(ue.current=!1)},hR=()=>{if(yR(),console.log("[DEBUG] startGame called, difficulty:",y,"gameMode:",a),a==="online"){B(!1),X(!1);return}B(!0),X(!1),A("Game started! Your turn");const q=yt();Jc(q),console.log("[DEBUG] Game started with chessboard:",q)},Ir=q=>`${q.slice(0,6)}...${q.slice(-4)}`,fR=(q,Y)=>{const se=l[q][Y],ie=(f==null?void 0:f.row)===q&&(f==null?void 0:f.col)===Y,ee=S.some(Pe=>Pe.row===q&&Pe.col===Y),Re=P&&(P.from.row===q&&P.from.col===Y||P.to.row===q&&P.to.col===Y);return m.jsxs("div",{className:`square ${ie?"selected":""} ${ee?"legal-move":""} ${Re?"last-move":""}`,onClick:()=>ha(q,Y),onTouchStart:Pe=>Sd(q,Y,Pe),onTouchMove:jb,children:[se&&m.jsx("div",{className:"piece",style:{backgroundImage:fS[se]?`url(${fS[se]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ee&&m.jsx("div",{className:"legal-move-indicator"})]},`${q}-${Y}`)},q1=()=>{if(!T||!$)return null;const q=d==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:q.map(Y=>m.jsx("div",{className:"promotion-piece",onClick:()=>{Q1($.from,$.to,Y),R(!1),k(null)},style:{backgroundImage:fS[Y]?`url(${fS[Y]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},Y))})]})})},[V1,M$]=D.useState(null),el=(q=!1,Y="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${q?" piece-gallery-sm":""}`,children:[m.jsx("h3",{style:{color:"#32CD32"},children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:rHe.map(se=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>{M$(V1===se.key?null:se.key)},children:[m.jsx("img",{src:se.img,alt:se.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:se.name}),V1===se.key&&m.jsx("div",{className:"piece-gallery-desc",children:se.desc})]},se.key))}),m.jsx("div",{className:"piece-gallery-tip",children:Y})]}),K1=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"transparent",borderRadius:0,padding:"32px 24px",boxShadow:"none",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#00ff00",marginBottom:16,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Select Difficulty"}),m.jsx("p",{style:{fontSize:"1.1rem",color:"#00ff00",marginBottom:24,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Compete against the computer to climb the leaderboard."}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${y==="easy"?" selected":""}`,style:{background:y==="easy"?"#00ff00":"transparent",color:y==="easy"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="easy"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${y==="hard"?" selected":""}`,style:{background:y==="hard"?"#00ff00":"transparent",color:y==="hard"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="hard"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{hR()},style:{background:"transparent",color:"#00ff00",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:0,boxShadow:"0 0 6px #00ff00, 0 0 2px #00ff00",border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),L$=(q,Y,se,ie)=>{if(ie.toLowerCase()==="p"&&(Kn(ie)==="blue"&&se.row===0||Kn(ie)==="red"&&se.row===7)){const ee=Kn(ie)==="blue"?"q":"Q";q[se.row][se.col]=ee}if(ie.toLowerCase()==="k"&&Math.abs(Y.col-se.col)===2){if(se.col===6)q[Y.row][7]=null,q[Y.row][5]=Kn(ie)==="blue"?"r":"R";else if(se.col===2){const ee=q[Y.row][3];q[Y.row][0]=null,q[Y.row][3]=Kn(ie)==="blue"?"r":"R",ee&&ee.toLowerCase()==="q"&&(q[Y.row][4]=ee)}}},pR=(q,Y,se,ie)=>{const ee=Zt(q.row,q.col),Re=Zt(Y.row,Y.col);return`${ee}-${Re}`},Y1=(q,Y,se)=>{const ie={...le};se.toLowerCase()==="k"?Kn(se)==="blue"?ie.blueKingMoved=!0:ie.redKingMoved=!0:se.toLowerCase()==="r"&&(Kn(se)==="blue"?(q.col===0&&(ie.blueRooksMove.left=!0),q.col===7&&(ie.blueRooksMove.right=!0)):(q.col===0&&(ie.redRooksMove.left=!0),q.col===7&&(ie.redRooksMove.right=!0))),se.toLowerCase()==="p"&&Math.abs(q.row-Y.row)===2?ie.lastPawnDoubleMove={row:Y.row,col:Y.col}:ie.lastPawnDoubleMove=null,oe(ie)},Q1=(q,Y,se="q",ie=!1)=>{l[q.row][q.col];const Re=l[Y.row][Y.col]!==null;if(sc(Re?"capture":"move"),Re){W({row:Y.row,col:Y.col,show:!0}),setTimeout(()=>{Tm(q,Y,ie),W(null)},500);return}Tm(q,Y,ie)},sc=q=>{if(!Ff)return;let Y="";switch(q){case"move":Y="/images/move.mp3";break;case"capture":Y="/images/capture.mp3";break;case"check":Y="/images/play.mp3";break;case"checkmate":Y="/images/victory.mp3";break;case"victory":Y="/images/victory.mp3";break;case"loser":Y="/images/loser.mp3";break;case"upgrade":Y="/images/upgrade.mp3";break;default:Y="/images/move.mp3"}new Audio(Y).play().catch(()=>{})},gR=()=>{sc("victory");for(let q=0;q<50;q++)setTimeout(()=>{const Y=document.createElement("div");Y.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(Y),setTimeout(()=>Y.remove(),3e3)},q*100);for(let q=0;q<15;q++)setTimeout(()=>{const Y=document.createElement("div"),se=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],ie=se[Math.floor(Math.random()*se.length)];Y.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${ie};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(Y),setTimeout(()=>Y.remove(),6e3)},q*200);setTimeout(()=>j1(!1),5e3)},[U$,Pm]=D.useState(!1),[mR,Bb]=D.useState(!1),Om=()=>{Pm(!1),Bb(!1)},Wf=()=>{Om(),Xc()},Fb=()=>{Om(),B(!1)},yR=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},ou=a==="online",[ti,ni]=D.useState("leaderboard"),Sd=(q,Y,se)=>{se.preventDefault(),ha(q,Y)},jb=q=>{q.preventDefault()};return ou?m.jsx(Rne,{onClose:t,onMinimize:e,fullscreen:n}):!G&&!Jt?m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[ti==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,8).map((q,Y)=>{if(typeof q=="object"&&q!==null&&"username"in q&&"wins"in q&&"losses"in q&&"draws"in q&&"points"in q){const se=q;return m.jsxs("tr",{children:[m.jsx("td",{children:Y+1}),m.jsx("td",{children:Ir(se.username)}),m.jsx("td",{children:se.points})]},se.username)}return null})})]})})]}),ti==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:el(!0,"Click pieces to learn more")})]}),m.jsx("div",{className:"center-area",children:m.jsxs("div",{className:"game-mode-panel-streamlined",children:[m.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:m.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"mode-selection-compact",children:[m.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),m.jsx("button",{className:`mode-btn-compact ${ou?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===hS.AI&&m.jsx("button",{className:"start-btn-compact",onClick:()=>X(!0),children:"Start Game"}),ou&&m.jsxs("div",{className:"pvp-info",children:[m.jsx("p",{children:"Challenge other players with tDMT wagers"}),m.jsx("p",{children:"Create or join games instantly"})]}),m.jsxs("div",{className:"help-section-compact",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"help-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),m.jsx("p",{children:m.jsx("strong",{children:"Piece Movements:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Special Rules:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Game Modes:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Multiplayer:"})," wage DMT and challenge other players on Sanko mainnet. Winner takes the pot minus 5% house fee."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Multiplayer Flow:"})}),m.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsx("li",{children:"Connect your wallet to Sanko mainnet"}),m.jsx("li",{children:"Create a game and set your wager amount in DMT"}),m.jsx("li",{children:"Share your invite code with an opponent"}),m.jsx("li",{children:"Opponent joins and matches your wager"}),m.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),m.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Lawb Chess Mainnet Contract:"})," ",m.jsx("a",{href:"https://explorer.sanko.xyz/address/0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"})]}),m.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Network Name:"})," Sanko Mainnet"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"RPC URL:"})," https://mainnet.sanko.xyz"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Chain ID:"})," 1996"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Currency Symbol:"})," DMT"]})]})]})]}),m.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:m.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[m.jsx("button",{className:ti==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ni("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:ti==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ni("gallery"),children:"Gallery"})]})]})})]})]}):m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${G?" game-active":""}`,children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[ti==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,8).map((q,Y)=>{if(typeof q=="object"&&q!==null&&"username"in q&&"wins"in q&&"losses"in q&&"draws"in q&&"points"in q){const se=q;return m.jsxs("tr",{children:[m.jsx("td",{children:Y+1}),m.jsx("td",{children:Ir(se.username)}),m.jsx("td",{children:se.points})]},se.username)}return null})})]})})]}),ti==="moves"&&G&&m.jsxs("div",{className:"move-history-compact",children:[m.jsx("div",{className:"move-history-title",children:"Moves"}),m.jsx("ul",{className:"move-history-list-compact",children:_.slice().reverse().map((q,Y)=>m.jsx("li",{children:q},_.length-1-Y))})]}),ti==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:el(!0,"Click pieces to learn more")})]}),m.jsxs("div",{className:"center-area",children:[G&&m.jsxs("div",{className:"game-info-compact",children:[m.jsxs("span",{className:d==="blue"?"current-blue":"current-red",children:[d==="blue"?"Blue":"Red"," to move"]}),a===hS.AI&&m.jsxs("span",{className:"mode-play",children:[y==="easy"?"Easy":"Hard"," AI"]}),ou&&m.jsxs("span",{className:"wager-display",children:["Wager: ",ne," tDMT"]})]}),G?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${Gi})`},children:[Array.from({length:8},(q,Y)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(se,ie)=>fR(Y,ie))},Y)),M&&M.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${M.row*12.5}%`,left:`${M.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls-compact",children:[m.jsxs("div",{className:"sidebar-toggle-group",children:[m.jsx("button",{className:ti==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ni("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:ti==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ni("moves"),children:"Moves"}),m.jsx("button",{className:ti==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ni("gallery"),children:"Gallery"})]}),m.jsx("button",{onClick:Wf,children:"New Game"}),m.jsx("button",{onClick:Fb,children:"Menu"})]})]}):Jt?K1():m.jsxs("div",{className:"game-mode-panel-streamlined",children:[m.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:m.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"mode-selection-compact",children:[m.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),m.jsx("button",{className:`mode-btn-compact ${ou?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===hS.AI&&m.jsx("button",{className:"start-btn-compact",onClick:()=>X(!0),children:"Start Game"}),ou&&m.jsxs("div",{className:"pvp-info",children:[m.jsx("p",{children:"Challenge other players with tDMT wagers"}),m.jsx("p",{children:"Create or join games instantly"})]}),m.jsxs("div",{className:"help-section-compact",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"help-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),m.jsx("p",{children:m.jsx("strong",{children:"Piece Movements:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Special Rules:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Game Modes:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Multiplayer:"})," wage DMT and challenge other players on Sanko mainnet. Winner takes the pot minus 5% house fee."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Multiplayer Flow:"})}),m.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsx("li",{children:"Connect your wallet to Sanko mainnet"}),m.jsx("li",{children:"Create a game and set your wager amount in DMT"}),m.jsx("li",{children:"Share your invite code with an opponent"}),m.jsx("li",{children:"Opponent joins and matches your wager"}),m.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),m.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Lawb Chess Mainnet Contract:"})," ",m.jsx("a",{href:"https://explorer.sanko.xyz/address/0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"})]}),m.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Network Name:"})," Sanko Mainnet"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"RPC URL:"})," https://mainnet.sanko.xyz"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Chain ID:"})," 1996"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Currency Symbol:"})," DMT"]})]})]})]}),m.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:m.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[m.jsx("button",{className:ti==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ni("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:ti==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>ni("gallery"),children:"Gallery"})]})]})]})]}),ce&&el(!0),T&&q1(),ge&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),U$&&m.jsxs("div",{className:"victory-overlay",children:[m.jsx("div",{className:"balloons-container"}),m.jsx("div",{className:"victory-modal",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),m.jsx("div",{children:"Victory!"}),m.jsx("button",{onClick:Wf,children:"New Game"})]})})]}),mR&&m.jsxs("div",{className:"defeat-overlay",children:[m.jsx("div",{className:"blood-overlay"}),m.jsx("div",{className:"victory-modal",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),m.jsx("div",{children:"Defeat!"}),m.jsx("button",{onClick:Wf,children:"Try Again"})]})})]})]})};function $W(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const BW=()=>{const[t,e]=D.useState("singleplayer"),n=()=>{window.location.href="/"};return m.jsx("div",{className:"chess-page",children:m.jsx("div",{className:"chess-content",children:t==="singleplayer"?m.jsx(oHe,{onClose:n}):m.jsx(Rne,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},aHe=Symbol(),FW=Object.getPrototypeOf,W5=new WeakMap,cHe=t=>t&&(W5.has(t)?W5.get(t):FW(t)===Object.prototype||FW(t)===Array.prototype),lHe=t=>cHe(t)&&t[aHe]||null,jW=(t,e=!0)=>{W5.set(t,e)},XI={},N$=t=>typeof t=="object"&&t!==null,uHe=t=>N$(t)&&!$1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),Pne=(t,e)=>{const n=z5.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return jW(r,!0),z5.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if($1.has(i))jW(i,!1);else if(Pf.has(i)){const[c,l]=Pf.get(i);a.value=Pne(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},dHe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(WW(l,o)||E_.has(o)&&WW(l,E_.get(o))))return!0;n(i),N$(o)&&(o=lHe(o)||o);const u=!Pf.has(o)&&fHe(o)?dr(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Pf=new WeakMap,$1=new WeakSet,z5=new WeakMap,Jv=[1,1],E_=new WeakMap;let WW=Object.is,hHe=(t,e)=>new Proxy(t,e),fHe=uHe,pHe=Pne,gHe=dHe;function dr(t={}){if(!N$(t))throw new Error("object required");const e=E_.get(t);if(e)return e;let n=Jv[0];const r=new Set,s=(w,y=++Jv[0])=>{n!==y&&(n=y,r.forEach(b=>b(w,y)))};let i=Jv[1];const o=(w=++Jv[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([y])=>{const b=y[1](w);b>n&&(n=b)})),n),a=w=>(y,b)=>{const v=[...y];v[1]=[w,...v[1]],s(v,b)},c=new Map,l=(w,y)=>{const b=!$1.has(y)&&Pf.get(y);if(b){if((XI?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const v=b[2](a(w));c.set(w,[b,v])}else c.set(w,[b])}},u=w=>{var y;const b=c.get(w);b&&(c.delete(w),(y=b[1])==null||y.call(b))},d=w=>(r.add(w),r.size===1&&c.forEach(([b,v],A)=>{if((XI?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const _=b[2](a(A));c.set(A,[b,_])}),()=>{r.delete(w),r.size===0&&c.forEach(([b,v],A)=>{v&&(v(),c.set(A,[b]))})});let h=!0;const f=gHe(()=>h,l,u,s),p=hHe(t,f);E_.set(t,p);const g=[t,o,d];return Pf.set(p,g),Reflect.ownKeys(t).forEach(w=>{const y=Object.getOwnPropertyDescriptor(t,w);"value"in y&&y.writable&&(p[w]=t[w])}),h=!1,p}function Io(t,e,n){const r=Pf.get(t);(XI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function C_(t){const e=Pf.get(t);(XI?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return pHe(n,r())}function tb(t){return $1.add(t),t}function mHe(){return{proxyStateMap:Pf,refSet:$1,snapCache:z5,versionHolder:Jv,proxyCache:E_}}function Hi(t,e,n,r){let s=t[e];return Io(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:yHe,snapCache:wHe}=mHe(),pS=t=>yHe.has(t);function bHe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=wHe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return pS(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!pS(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!pS(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!pS(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=dr(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var zW={};const fe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof zW<"u"?zW.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},eN={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=fe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},vHe={bigNumber(t){return t?new Ml(t):new Ml(0)},multiply(t,e){if(t===void 0||e===void 0)return new Ml(0);const n=new Ml(t),r=new Ml(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},EHe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],CHe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],_He=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],AHe={getERC20Abi:t=>fe.USDT_CONTRACT_ADDRESSES.includes(t)?_He:EHe,getSwapAbi:()=>CHe},zh={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},xt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function b2(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const wt={setItem(t,e){Zv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Zv())return localStorage.getItem(t)||void 0},removeItem(t){Zv()&&localStorage.removeItem(t)},clear(){Zv()&&localStorage.clear()}};function Zv(){return typeof window<"u"&&typeof localStorage<"u"}function tN(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const Mi={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[fe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},tt={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=tt.getActiveNamespace(),e=tt.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{wt.setItem(xt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=wt.getItem(xt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{wt.removeItem(xt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{wt.setItem(xt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{wt.setItem(xt.ACTIVE_CAIP_NETWORK_ID,t),tt.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return wt.getItem(xt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{wt.removeItem(xt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=b2(t);wt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=tt.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),wt.setItem(xt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=wt.getItem(xt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=b2(t);wt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return wt.getItem(xt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=b2(t);return wt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{wt.setItem(xt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return wt.getItem(xt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{wt.removeItem(xt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return wt.getItem(xt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=wt.getItem(xt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{wt.setItem(xt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return wt.getItem(xt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=wt.getItem(xt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));wt.setItem(xt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=tt.getConnectedNamespaces();e.includes(t)||(e.push(t),tt.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=tt.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),tt.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return wt.getItem(xt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{wt.setItem(xt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{wt.removeItem(xt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=wt.getItem(xt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=tt.getBalanceCache();wt.setItem(xt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=tt.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;tt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=tt.getBalanceCache();e[t.caipAddress]=t,wt.setItem(xt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=wt.getItem(xt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=tt.getBalanceCache();wt.setItem(xt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=tt.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),tt.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=tt.getNativeBalanceCache();e[t.caipAddress]=t,wt.setItem(xt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=wt.getItem(xt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=tt.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;tt.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=tt.getEnsCache();e[t.address]=t,wt.setItem(xt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=tt.getEnsCache();wt.setItem(xt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=wt.getItem(xt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=tt.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;tt.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=tt.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},wt.setItem(xt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=tt.getIdentityCache();wt.setItem(xt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{wt.removeItem(xt.PORTFOLIO_CACHE),wt.removeItem(xt.NATIVE_BALANCE_CACHE),wt.removeItem(xt.ENS_CACHE),wt.removeItem(xt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{wt.setItem(xt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=wt.getItem(xt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=tt.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===fe.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};wt.setItem(xt.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=wt.getItem(xt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=tt.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),wt.setItem(xt.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=wt.getItem(xt.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=tt.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),wt.setItem(xt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=tt.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),wt.setItem(xt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(tt.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},dt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return dt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Mi.TEN_SEC_MS:!0},isAllowedRetry(t,e=Mi.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(dt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Mi.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(dt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!dt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?tt.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,dt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return fe.W3M_API_URL},getBlockchainApiUrl(){return fe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return fe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Mi.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in fe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function xv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class B1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await xv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await xv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await xv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await xv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await xv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const SHe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Mi.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(dt.isTelegram()){if(dt.isIos())return t.filter(e=>e!=="google");if(dt.isMac())return t.filter(e=>e!=="x");if(dt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ft=dr({features:Mi.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Mi.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Pt={state:ft,subscribeKey(t,e){return Hi(ft,t,e)},setOptions(t){Object.assign(ft,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...ft.remoteFeatures,...t};ft.remoteFeatures=e,(n=ft.remoteFeatures)!=null&&n.socials&&(ft.remoteFeatures.socials=SHe.filterSocialsByPlatform(ft.remoteFeatures.socials))},setFeatures(t){if(!t)return;ft.features||(ft.features=Mi.DEFAULT_FEATURES);const e={...ft.features,...t};ft.features=e},setProjectId(t){ft.projectId=t},setCustomRpcUrls(t){ft.customRpcUrls=t},setAllWallets(t){ft.allWallets=t},setIncludeWalletIds(t){ft.includeWalletIds=t},setExcludeWalletIds(t){ft.excludeWalletIds=t},setFeaturedWalletIds(t){ft.featuredWalletIds=t},setTokens(t){ft.tokens=t},setTermsConditionsUrl(t){ft.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ft.privacyPolicyUrl=t},setCustomWallets(t){ft.customWallets=t},setIsSiweEnabled(t){ft.isSiweEnabled=t},setIsUniversalProvider(t){ft.isUniversalProvider=t},setSdkVersion(t){ft.sdkVersion=t},setMetadata(t){ft.metadata=t},setDisableAppend(t){ft.disableAppend=t},setEIP6963Enabled(t){ft.enableEIP6963=t},setDebug(t){ft.debug=t},setEnableWalletConnect(t){ft.enableWalletConnect=t},setEnableWalletGuide(t){ft.enableWalletGuide=t},setEnableAuthLogger(t){ft.enableAuthLogger=t},setEnableWallets(t){ft.enableWallets=t},setPreferUniversalLinks(t){ft.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(Mi.SIWX_DEFAULTS))t[e]??(t[e]=n);ft.siwx=t},setConnectMethodsOrder(t){ft.features={...ft.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ft.features={...ft.features,walletFeaturesOrder:t}},setSocialsOrder(t){ft.remoteFeatures={...ft.remoteFeatures,socials:t}},setCollapseWallets(t){ft.features={...ft.features,collapseWallets:t}},setEnableEmbedded(t){ft.enableEmbedded=t},setAllowUnsupportedChain(t){ft.allowUnsupportedChain=t},setManualWCControl(t){ft.manualWCControl=t},setEnableNetworkSwitch(t){ft.enableNetworkSwitch=t},setEnableReconnect(t){ft.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ft.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ft.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ft.universalProviderConfigOverride},getSnapshot(){return C_(ft)}},xHe=Object.freeze({enabled:!0,events:[]}),IHe=new B1({baseUrl:dt.getAnalyticsUrl(),clientId:null}),NHe=5,THe=60*1e3,Hd=dr({...xHe}),RHe={state:Hd,subscribeKey(t,e){return Hi(Hd,t,e)},async sendError(t,e){if(!Hd.enabled)return;const n=Date.now();if(Hd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<THe}).length>=NHe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Hd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=Pt.state;await IHe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:dt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Hd.enabled=!0},disable(){Hd.enabled=!1},clearEvents(){Hd.events=[]}};class nb extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,nb.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,nb):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function HW(t,e){const n=t instanceof nb?t:new nb(t instanceof Error?t.message:String(t),e,t);throw RHe.sendError(n,n.category),n}function rc(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return HW(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return HW(a,e)}},n[r]=i}else n[r]=s}),n}var rb={};const PHe="https://secure.walletconnect.org/sdk",OHe=(typeof process<"u"&&typeof rb<"u"?rb.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||PHe,kHe=(typeof process<"u"&&typeof rb<"u"?rb.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",DHe=(typeof process<"u"&&typeof rb<"u"?rb.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Je={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Vs={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Pl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},MHe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Pl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Pl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Pl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Pl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===fe.CHAIN.SOLANA&&t===Pl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Pl.COINBASE.url}/dapp?cb_url=${r}`)}},ko=dr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),LHe={state:ko,subscribeNetworkImages(t){return Io(ko.networkImages,()=>t(ko.networkImages))},subscribeKey(t,e){return Hi(ko,t,e)},subscribe(t){return Io(ko,()=>t(ko))},setWalletImage(t,e){ko.walletImages[t]=e},setNetworkImage(t,e){ko.networkImages[t]=e},setChainImage(t,e){ko.chainImages[t]=e},setConnectorImage(t,e){ko.connectorImages={...ko.connectorImages,[t]:e}},setTokenImage(t,e){ko.tokenImages[t]=e},setCurrencyImage(t,e){ko.currencyImages[t]=e}},Tc=rc(LHe),UHe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},v2=dr({networkImagePromises:{}}),$He={async fetchWalletImage(t){if(t)return await bt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(v2.networkImagePromises[t]||(v2.networkImagePromises[t]=bt._fetchNetworkImage(t)),await v2.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Tc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Tc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Tc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Tc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Tc.state.connectorImages[t.imageId]},getChainImage(t){return Tc.state.networkImages[UHe[t]]}},Gd=dr({message:"",variant:"info",open:!1}),BHe={state:Gd,subscribeKey(t,e){return Hi(Gd,t,e)},open(t,e){const{debug:n}=Pt.state,{shortMessage:r,longMessage:s}=t;n&&(Gd.message=r,Gd.variant=e,Gd.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Gd.open=!1,Gd.message="",Gd.variant="info"}},up=rc(BHe),FHe=dt.getAnalyticsUrl(),jHe=new B1({baseUrl:FHe,clientId:null}),WHe=["MODAL_CREATED"],bu=dr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Er={state:bu,subscribe(t){return Io(bu,()=>t(bu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Pt.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Cn.state.address;if(WHe.includes(t.data.event)||typeof window>"u")return;await jHe.post({path:"/e",params:Er.getSdkProperties(),body:{eventId:dt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),bu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===fe.HTTP_STATUS_CODES.FORBIDDEN&&!bu.reportedErrors.FORBIDDEN&&(up.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Zv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),bu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;bu.timestamp=Date.now(),bu.data=t,(e=Pt.state.features)!=null&&e.analytics&&Er._sendAnalyticsEvent(bu)}},zHe=dt.getApiUrl(),Zi=new B1({baseUrl:zHe,clientId:null}),HHe=40,GW=4,GHe=20,Lt=dr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),bt={state:Lt,subscribeKey(t,e){return Hi(Lt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Pt.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Pt.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Zi.baseUrl}/getWalletImage/${t}`,n=await Zi.getBlob({path:e,params:bt._getSdkProperties()});Tc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Zi.baseUrl}/public/getAssetImage/${t}`,n=await Zi.getBlob({path:e,params:bt._getSdkProperties()});Tc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Zi.baseUrl}/public/getAssetImage/${t}`,n=await Zi.getBlob({path:e,params:bt._getSdkProperties()});Tc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Zi.baseUrl}/public/getCurrencyImage/${t}`,n=await Zi.getBlob({path:e,params:bt._getSdkProperties()});Tc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Zi.baseUrl}/public/getTokenImage/${t}`,n=await Zi.getBlob({path:e,params:bt._getSdkProperties()});Tc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return dt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Pl.COINBASE.id?!0:J.state.activeChain==="solana"&&(n.id===Pl.SOLFLARE.id||n.id===Pl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Zi.get({path:"/appkit/v1/config",params:bt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Zi.get({path:"/projects/v1/origins",params:bt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===fe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=fe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=J.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!$He.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>bt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=ot.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>bt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>bt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>bt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];bt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Pl).map(o=>o.id));const r=await Zi.get({path:"/getWallets",params:{...bt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:bt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Pt.state;if(t!=null&&t.length){const e={...bt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??GW,include:t},{data:n}=await bt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>bt._fetchWalletImage(i))),Lt.featured=r,Lt.allFeatured=r}},async fetchRecommendedWallets(){try{Lt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=Pt.state,r=[...e??[],...n??[]].filter(Boolean),s=J.getRequestedCaipNetworkIds().join(","),i={page:1,entries:GW,include:t,exclude:r,chains:s},{data:o,count:a}=await bt.fetchWallets(i),c=tt.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>bt._fetchWalletImage(d))),Lt.recommended=o,Lt.allRecommended=o,Lt.count=a??0}catch{}finally{Lt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=Pt.state,s=J.getRequestedCaipNetworkIds().join(","),i=[...Lt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:HHe,include:e,exclude:i,chains:s},{data:a,count:c}=await bt.fetchWallets(o),l=a.slice(0,GHe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>bt._fetchWalletImage(u))),Lt.wallets=dt.uniqueBy([...Lt.wallets,...bt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Lt.count=c>Lt.count?c:Lt.count,Lt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await bt.fetchWallets(e);n&&n.forEach(r=>{Lt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=Pt.state,s=J.getRequestedCaipNetworkIds().join(",");Lt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await bt.fetchWallets(i);Er.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>bt._fetchWalletImage(c)),dt.wait(300)]),Lt.search=bt._filterOutExtensions(o)},initPromise(t,e){const n=Lt.promises[t];return n||(Lt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&bt.initPromise("connectorImages",bt.fetchConnectorImages),e&&bt.initPromise("featuredWallets",bt.fetchFeaturedWallets),n&&bt.initPromise("recommendedWallets",bt.fetchRecommendedWallets),r&&bt.initPromise("networkImages",bt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=Pt.state.features)!=null&&t.analytics&&bt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Zi.get({path:"/getAnalyticsConfig",params:bt._getSdkProperties()});Pt.setFeatures({analytics:t})}catch{Pt.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Lt.featured=Lt.allFeatured,Lt.recommended=Lt.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");Lt.featured=Lt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.recommended=Lt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.filteredWallets=Lt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Lt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Lt.featured=Lt.allFeatured,Lt.recommended=Lt.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");Lt.featured=Lt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.recommended=Lt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.filteredWallets=Lt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Ln=dr({view:"Connect",history:["Connect"],transactionStack:[]}),qHe={state:Ln,subscribeKey(t,e){return Hi(Ln,t,e)},pushTransactionStack(t){Ln.transactionStack.push(t)},popTransactionStack(t){const e=Ln.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Nt.goBack();break;case"cancel":s==null||s(),Nt.goBack();break}},push(t,e){t!==Ln.view&&(Ln.view=t,Ln.history.push(t),Ln.data=e)},reset(t,e){Ln.view=t,Ln.history=[t],Ln.data=e},replace(t,e){Ln.history.at(-1)===t||(Ln.view=t,Ln.history[Ln.history.length-1]=t,Ln.data=e)},goBack(){var r;const t=J.state.activeCaipAddress,e=Nt.state.view==="ConnectingFarcaster",n=!t&&e;if(Ln.history.length>1){Ln.history.pop();const[s]=Ln.history.slice(-1);s&&(t&&s==="Connect"?Ln.view="Account":Ln.view=s)}else nr.close();(r=Ln.data)!=null&&r.wallet&&(Ln.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Cn.setFarcasterUrl(void 0,J.state.activeChain);const a=ot.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=C_(Pt.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Ln.history.length>1){Ln.history=Ln.history.slice(0,t+1);const[e]=Ln.history.slice(-1);e&&(Ln.view=e)}},goBackOrCloseModal(){Nt.state.history.length>1?Nt.goBack():nr.close()}},Nt=rc(qHe),vu=dr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),H5={state:vu,subscribe(t){return Io(vu,()=>t(vu))},setThemeMode(t){vu.themeMode=t;try{const e=ot.getAuthConnector();if(e){const n=H5.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:tN(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){vu.themeVariables={...vu.themeVariables,...t};try{const e=ot.getAuthConnector();if(e){const n=H5.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:tN(vu.themeVariables,vu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return C_(vu)}},gS=rc(H5),One={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},yn=dr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...One},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),VHe={state:yn,subscribe(t){return Io(yn,()=>{t(yn)})},subscribeKey(t,e){return Hi(yn,t,e)},initialize(t){t.forEach(e=>{const n=tt.getConnectedConnectorId(e);n&&ot.setConnectorId(n,e)})},setActiveConnector(t){t&&(yn.activeConnector=tb(t))},setConnectors(t){t.filter(s=>!yn.allConnectors.some(i=>i.id===s.id&&ot.getConnectorName(i.name)===ot.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&yn.allConnectors.push(tb(s))});const n=ot.getEnabledNamespaces(),r=ot.getEnabledConnectors(n);yn.connectors=ot.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(yn.filterByNamespaceMap).forEach(e=>{yn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{yn.filterByNamespaceMap[e]=!0}),ot.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){yn.filterByNamespaceMap[t]=e,ot.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=ot.getEnabledNamespaces(),e=ot.getEnabledConnectors(t),n=ot.areAllNamespacesEnabled();yn.connectors=ot.mergeMultiChainConnectors(e),n?bt.clearFilterByNamespaces():bt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(yn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return yn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(yn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=ot.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===fe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=ot.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===fe.CONNECTOR_ID.AUTH){const s=t,i=C_(Pt.state),o=gS.getSnapshot().themeMode,a=gS.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:tN(a,o)}),ot.setConnectors([t])}else ot.setConnectors([t])},getAuthConnector(t){var r;const e=t||J.state.activeChain,n=yn.connectors.find(s=>s.id===fe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return yn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return yn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return yn.allConnectors.filter(r=>r.chain===J.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=C_(Pt.state),r=gS.getSnapshot().themeMode,s=gS.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:tN(s,r)})},getConnectorsByNamespace(t){const e=yn.allConnectors.filter(n=>n.chain===t);return ot.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&nu(t)===Vs.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=ot.getConnector(t.id,t.rdns);MHe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,J.state.activeChain),e?Nt.push("ConnectingExternal",{connector:e}):Nt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?ot.getConnectorsByNamespace(t):ot.mergeMultiChainConnectors(yn.allConnectors)},setFilterByNamespace(t){yn.filterByNamespace=t,yn.connectors=ot.getConnectors(t),bt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(yn.activeConnectorIds={...yn.activeConnectorIds,[e]:t},tt.setConnectedConnectorId(e,t))},removeConnectorId(t){yn.activeConnectorIds={...yn.activeConnectorIds,[t]:void 0},tt.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return yn.activeConnectorIds[t]},isConnected(t){return t?!!yn.activeConnectorIds[t]:Object.values(yn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){yn.activeConnectorIds={...One}}},ot=rc(VHe),KHe=1e3,Iv={checkNamespaceConnectorId(t,e){return ot.getConnectorId(t)===e},isSocialProvider(t){return Mi.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&ot.setActiveConnector(e),s==null||s(dt.isMobile()&&t),r){const l=nr.subscribeKey("open",u=>{u||(Nt.state.view!==r&&Nt.replace(r),l(),a(new Error("Modal closed")))})}const c=J.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&nr.close(),c(),o(zh.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=J.subscribeKey("activeCaipAddress",s=>{s&&(nr.close(),r(),e(zh.parseCaipAddress(s)))});it.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=Cn.state.socialWindow,i=Cn.state.socialProvider,o=!1,a=null;const c=J.subscribeKey("activeCaipAddress",l=>{l&&(e&&nr.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===fe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=ot.getAuthConnector();if(g&&!o){s&&(s.close(),Cn.setSocialWindow(void 0,J.state.activeChain),s=Cn.state.socialWindow),o=!0;const w=f.data.resultUri;i&&Er.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=J.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:w,chainId:y==null?void 0:y.caipNetworkId}),i){tt.setConnectedSocialProvider(i),await it.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const b=J.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(zh.parseCaipAddress(b)),Er.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&Er.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&Er.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(Cn.setSocialProvider(t,J.state.activeChain),i=Cn.state.socialProvider,Er.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=nr.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=ot.getAuthConnector();if(p&&!Cn.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();Cn.setFarcasterUrl(g,J.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=ot.getAuthConnector();a=dt.returnOpenHref(`${fe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){Cn.setSocialWindow(a,J.state.activeChain),s=Cn.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=nr.subscribeKey("open",c=>{c||(Nt.state.view!==e&&Nt.replace(e),a(),i(new Error("Modal closed")))})}const o=J.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&nr.close(),o(),s(zh.parseCaipAddress(a)))})})},async updateEmail(){const t=tt.getConnectedConnectorId(J.state.activeChain),e=ot.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==fe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Nt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(nr.close(),clearInterval(i),o(),r({email:a}))},KHe),o=nr.subscribeKey("open",a=>{a||(Nt.state.view!=="Connect"&&Nt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&nu(t)===Vs.ACCOUNT_TYPES.EOA}};function kne(){var r,s;const t=((r=J.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=J.state.activeCaipNetwork)==null?void 0:s.id)||1,n=Mi.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function nu(t){var n;return(n=J.getAccountData(t))==null?void 0:n.preferredAccountType}const Dne={getConnectionStatus(t,e){const n=ot.state.activeConnectorIds[e],r=it.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=Pt.state.remoteFeatures)!=null&&a.multiWallet),n=ot.state.activeConnectorIds[t],r=it.getConnections(t),i=(it.state.recentConnections.get(t)??[]).filter(c=>ot.getConnectorById(c.connectorId)),o=Dne.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},dp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Jr=dr({...dp}),YHe={state:Jr,subscribeKey(t,e){return Hi(Jr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=dt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Jr.message=dp.message,Jr.variant=dp.variant,Jr.svg=dp.svg,Jr.open=dp.open,Jr.autoClose=dp.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=dp.autoClose}){Jr.open?(Jr.open=!1,setTimeout(()=>{Jr.message=t,Jr.variant=n,Jr.svg=e,Jr.open=!0,Jr.autoClose=r},150)):(Jr.message=t,Jr.variant=n,Jr.svg=e,Jr.open=!0,Jr.autoClose=r)}},Hh=YHe,Zn=dr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),QHe={state:Zn,subscribe(t){return Io(Zn,()=>t(Zn))},setLastNetworkInView(t){Zn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Zn.loading=!0;try{const r=await _t.fetchTransactions({account:t,cursor:Zn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=Xv.filterSpamTransactions(r.data),i=Xv.filterByConnectedChain(s),o=[...Zn.transactions,...i];Zn.loading=!1,e==="coinbase"?Zn.coinbaseTransactions=Xv.groupTransactionsByYearAndMonth(Zn.coinbaseTransactions,r.data):(Zn.transactions=o,Zn.transactionsByYear=Xv.groupTransactionsByYearAndMonth(Zn.transactionsByYear,i)),Zn.empty=o.length===0,Zn.next=r.next?r.next:void 0}catch{const s=J.state.activeChain;Er.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Pt.state.projectId,cursor:Zn.next,isSmartAccount:nu(s)===Vs.ACCOUNT_TYPES.SMART_ACCOUNT}}),Hh.showError("Failed to fetch transactions"),Zn.loading=!1,Zn.empty=!0,Zn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Zn.next=void 0},resetTransactions(){Zn.transactions=[],Zn.transactionsByYear={},Zn.lastNetworkInView=void 0,Zn.loading=!1,Zn.empty=!1,Zn.next=void 0}},Xv=rc(QHe,"API_ERROR"),an=dr({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let tp;const JHe={state:an,subscribe(t){return Io(an,()=>t(an))},subscribeKey(t,e){return Hi(an,t,e)},_getClient(){return an._client},setClient(t){an._client=tb(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);it.syncStorageConnections(e)},syncStorageConnections(t){const e=tt.getConnections(),n=t??Array.from(J.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(an.recentConnections);i.set(r,s),an.recentConnections=i}},getConnections(t){return t?an.connections.get(t)??[]:[]},hasAnyConnection(t){const e=it.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(dt.isTelegram()||dt.isSafari()&&dt.isIos()){if(tp){await tp,tp=void 0;return}if(!dt.isPairingExpired(an==null?void 0:an.wcPairingExpiry)){const s=an.wcUri;an.wcUri=s;return}tp=(e=(t=it._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),it.state.status="connecting",await tp,tp=void 0,an.wcPairingExpiry=void 0,it.state.status="connected"}else await((r=(n=it._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=it._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&J.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=it._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||J.state.activeChain;e&&ot.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;nr.setLoading(!0,J.state.activeChain);const n=ot.getAuthConnector();n&&(Cn.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),tt.setPreferredAccountTypes(Object.entries(J.state.chains).reduce((s,[i,o])=>{const a=i,c=nu(a);return c!==void 0&&(s[a]=c),s},{})),await it.reconnectExternal(n),nr.setLoading(!1,J.state.activeChain),Er.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=it._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=it._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=it._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=it._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=it._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=it._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=it._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=it._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=it._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=it._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=it._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=it._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){an.wcUri=void 0,an.wcPairingExpiry=void 0,an.wcLinking=void 0,an.recentWallet=void 0,an.status="disconnected",Xv.resetTransactions(),tt.deleteWalletConnectDeepLink()},resetUri(){an.wcUri=void 0,an.wcPairingExpiry=void 0,tp=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=it.state;t&&tt.setWalletConnectDeepLink(t),e&&tt.setAppKitRecent(e),Er.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Nt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){an.wcBasic=t},setUri(t){an.wcUri=t,an.wcPairingExpiry=dt.getPairingExpiry()},setWcLinking(t){an.wcLinking=t},setWcError(t){an.wcError=t,an.buffering=!1},setRecentWallet(t){an.recentWallet=t},setBuffering(t){an.buffering=t},setStatus(t){an.status=t},setIsSwitchingConnection(t){an.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=it._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new nb("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(an.connections);n.set(e,t),an.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=Cn.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&Iv.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await it.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=ot.getConnectorById(t.connectorId),s=t.connectorId===fe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await it.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await it.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=ot.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===fe.CONNECTOR_ID.AUTH,a=t.connectorId===fe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Iv.isSocialProvider(i)){const{address:d}=await Iv.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){nr.open({view:"ConnectingFarcaster"})},onConnect(){Nt.replace("ProfileWallets")}});c=d}else{const{address:d}=await Iv.connectEmail({closeModalOnConnect:r,onOpen(){nr.open({view:"EmailLogin"})},onConnect(){Nt.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Iv.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){nr.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Nt.replace("ProfileWallets")}});c=d}else{const d=await it.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await it.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=Cn.getCaipAddress(n);if(o){const{address:c}=zh.parseCaipAddress(o);i=c}const a=Dne.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await it.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await it.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},it=rc(JHe),hy=dr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),d0={state:hy,subscribe(t){return Io(hy,()=>t(hy))},subscribeOpen(t){return Hi(hy,"open",t)},set(t){Object.assign(hy,{...hy,...t})}},ZHe={async getTokenList(){var r;const t=J.state.activeCaipNetwork,e=await _t.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=J.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(it==null?void 0:it.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await _t.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await _t.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=it.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await T$.getMyTokensWithBalance(t);return Cn.setTokenBalance(e,J.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:kne(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Pn=dr({tokenBalances:[],loading:!1}),XHe={state:Pn,subscribe(t){return Io(Pn,()=>t(Pn))},subscribeKey(t,e){return Hi(Pn,t,e)},setToken(t){t&&(Pn.token=tb(t))},setTokenAmount(t){Pn.sendTokenAmount=t},setReceiverAddress(t){Pn.receiverAddress=t},setReceiverProfileImageUrl(t){Pn.receiverProfileImageUrl=t},setReceiverProfileName(t){Pn.receiverProfileName=t},setNetworkBalanceInUsd(t){Pn.networkBalanceInUSD=t},setLoading(t){Pn.loading=t},async sendToken(){var t;try{switch(An.setLoading(!0),(t=J.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await An.sendEvmToken();return;case"solana":await An.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{An.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=J.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=nu(t);if(!An.state.sendTokenAmount||!An.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!An.state.token)throw new Error("A token is required");(n=An.state.token)!=null&&n.address?(Er.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Vs.ACCOUNT_TYPES.SMART_ACCOUNT,token:An.state.token.address,amount:An.state.sendTokenAmount,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await An.sendERC20Token({receiverAddress:An.state.receiverAddress,tokenAddress:An.state.token.address,sendTokenAmount:An.state.sendTokenAmount,decimals:An.state.token.quantity.decimals})):(Er.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Vs.ACCOUNT_TYPES.SMART_ACCOUNT,token:An.state.token.symbol||"",amount:An.state.sendTokenAmount,network:((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await An.sendNativeToken({receiverAddress:An.state.receiverAddress,sendTokenAmount:An.state.sendTokenAmount,decimals:An.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Pn.loading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?dt.getPlainAddress(r):void 0;if(Pn.lastRetry&&!dt.isAllowedRetry(Pn.lastRetry,30*Mi.ONE_SEC_MS))return Pn.loading=!1,[];try{if(s&&e&&n){const a=await T$.getMyTokensWithBalance();return Pn.tokenBalances=a,Pn.lastRetry=void 0,a}}catch(a){Pn.lastRetry=Date.now(),t==null||t(a),Hh.showError("Token Balance Unavailable")}finally{Pn.loading=!1}return[]},fetchNetworkBalance(){if(Pn.tokenBalances.length===0)return;const t=ZHe.mapBalancesToSwapTokens(Pn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===kne());e&&(Pn.networkBalanceInUSD=e?vHe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;Nt.pushTransactionStack({});const e=t.receiverAddress,n=Cn.state.address,r=it.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await it.sendTransaction({chainNamespace:fe.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),Er.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:nu("eip155")===Vs.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=An.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=it._getClient())==null||a.updateBalance("eip155"),An.resetSend()},async sendERC20Token(t){Nt.pushTransactionStack({onSuccess(){Nt.replace("Account")}});const e=it.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Cn.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=dt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await it.writeContract({fromAddress:Cn.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:AHe.getERC20Abi(n),chainNamespace:fe.CHAIN.EVM}),An.resetSend()}},async sendSolanaToken(){var t;if(!An.state.sendTokenAmount||!An.state.receiverAddress)throw new Error("An amount and receiver address are required");Nt.pushTransactionStack({onSuccess(){Nt.replace("Account")}}),await it.sendTransaction({chainNamespace:"solana",to:An.state.receiverAddress,value:An.state.sendTokenAmount}),(t=it._getClient())==null||t.updateBalance("solana"),An.resetSend()},resetSend(){Pn.token=void 0,Pn.sendTokenAmount=void 0,Pn.receiverAddress=void 0,Pn.receiverProfileImageUrl=void 0,Pn.receiverProfileName=void 0,Pn.loading=!1,Pn.tokenBalances=[]}},An=rc(XHe),E2={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},mS={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Oe=dr({chains:bHe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),eGe={state:Oe,subscribe(t){return Io(Oe,()=>{t(Oe)})},subscribeKey(t,e){return Hi(Oe,t,e)},subscribeChainProp(t,e,n){let r;return Io(Oe.chains,()=>{var i;const s=n||Oe.activeChain;if(s){const o=(i=Oe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=tt.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=Pt.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Oe.noAdapters=!0),Oe.noAdapters||(Oe.activeChain=a==null?void 0:a.namespace,Oe.activeCaipNetwork=i,J.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Oe.activeChain&&d0.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=tt.getPreferredAccountTypes()||{},f={...Pt.state.defaultAccountTypes,...h};J.state.chains.set(u,{namespace:u,networkState:dr({...mS,caipNetwork:d==null?void 0:d[0]}),accountState:dr({...E2,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),J.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Oe.activeChain===t){const r=Array.from(Oe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&J.setActiveCaipNetwork(s)}}Oe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Oe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...mS,caipNetwork:r[0]},accountState:E2,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),J.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Oe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Oe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),J.setRequestedCaipNetworks(r,t.chainNamespace),ot.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Oe.chains.get(t);if(n){const o=((r=Oe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&J.setActiveCaipNetwork(n.caipNetworks[0]),Oe.chains.set(t,{...n,caipNetworks:a}),J.setRequestedCaipNetworks(a||[],t),a.length===0&&ot.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Oe.chains.get(t);n&&(n.networkState={...n.networkState||mS,...e},Oe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Oe.chains.get(t);if(r){const s={...r.accountState||E2,...e};Oe.chains.set(t,{...r,accountState:s}),(Oe.chains.size===1||Oe.activeChain===t)&&(e.caipAddress&&(Oe.activeCaipAddress=e.caipAddress),Cn.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Oe.chains.get(t);if(n){const r={...n.networkState||mS,...e};Oe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){J.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Oe.activeChain=t;const e=t?Oe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Oe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Oe.activeCaipNetwork=n,J.setChainNetworkData(t,{caipNetwork:n}),tt.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),d0.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Oe.activeChain!==t.chainNamespace&&J.setIsSwitchingNamespace(!0);const e=Oe.chains.get(t.chainNamespace);Oe.activeChain=t.chainNamespace,Oe.activeCaipNetwork=t,J.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Oe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Oe.activeCaipAddress=void 0,J.setAccountProp("caipAddress",Oe.activeCaipAddress,t.chainNamespace),e&&Cn.replaceState(e.accountState),An.resetSend(),d0.set({activeChain:Oe.activeChain,selectedNetworkId:(i=Oe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),tt.setActiveCaipNetworkId(t.caipNetworkId),!J.checkIfSupportedNetwork(t.chainNamespace)&&Pt.state.enableNetworkSwitch&&!Pt.state.allowUnsupportedChain&&!it.state.wcBasic&&J.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Oe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==J.state.activeChain,n=(s=J.getNetworkData(t))==null?void 0:s.caipNetwork,r=J.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await J.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=J.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=J.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Oe.activeCaipNetwork)==null?void 0:a.id)})),s=J.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&nr.close()}catch{Nt.goBack()}Er.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Oe.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Oe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Oe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Oe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Oe.activeChain;if(e&&(n=e),!n)return;const r=(s=Oe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Oe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Oe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return dt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Oe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=J.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){J.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=J.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));ot.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Oe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=J.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Oe.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Oe.activeCaipNetwork},getActiveCaipAddress(){return Oe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Oe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=J.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());J.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Oe.activeCaipNetwork,r=J.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Oe.activeChain)return!0;const e=J.getRequestedCaipNetworks(Oe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){J.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=eN.caipNetworkIdToNumber((r=Oe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Oe.activeChain;if(!e||!t)return!1;const n=J.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){nr.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Oe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Mi.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){J.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=J.getAccountProp("preferredAccountType",e);Oe.activeCaipAddress=void 0,J.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),ot.removeConnectorId(e)},setIsSwitchingNamespace(t){Oe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Oe.chains.forEach(s=>{fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Oe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=J.state.chains.get(t))==null?void 0:e.accountState:Cn.state},getNetworkData(t){var n;const e=t||Oe.activeChain;if(e)return(n=J.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=J.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=ot.state.filterByNamespace;return(t?[Oe.chains.get(t)]:Array.from(Oe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?J.getRequestedCaipNetworks(t):J.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Oe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Oe.lastConnectedSIWECaipNetwork}},J=rc(eGe),tGe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},Mne=dt.getBlockchainApiUrl(),Xi=dr({clientId:null,api:new B1({baseUrl:Mne,clientId:null}),supportedChains:{http:[],ws:[]}}),_t={state:Xi,async get(t){const{st:e,sv:n}=_t.getSdkProperties(),r=Pt.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Xi.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Pt.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Xi.supportedChains.http.length||await _t.getSupportedNetworks()}catch{return!1}return Xi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await _t.get({path:"v1/supported-chains"});return Xi.supportedChains=t,t}catch{return Xi.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await _t.isNetworkSupported(e))return{avatar:"",name:""};const r=tt.getIdentityFromCacheForAddress(t);if(r)return r;const s=await _t.get({path:`/v1/identity/${t}`,params:{sender:J.state.activeCaipAddress?dt.getPlainAddress(J.state.activeCaipAddress):void 0}});return tt.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await _t.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?_t.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await _t.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?_t.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await _t.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await _t.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Xi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Pt.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await _t.isNetworkSupported((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?_t.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=_t.getSdkProperties();if(!await _t.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return _t.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await _t.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Xi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Mi.CONVERT_SLIPPAGE_TOLERANCE},projectId:Pt.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=_t.getSdkProperties();if(!await _t.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return _t.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=_t.getSdkProperties();if(!await _t.isNetworkSupported((l=J.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Hh.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=tt.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await _t.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return tt.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await _t.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await _t.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:`/v1/profile/reverse/${t}`,params:{sender:Cn.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await _t.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await _t.isNetworkSupported((i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Xi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await _t.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Xi.api.post({path:"/v1/generators/onrampurl",params:{projectId:Pt.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await _t.isNetworkSupported((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await _t.get({path:"/v1/onramp/options"})}catch{return tGe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await _t.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Xi.api.post({path:"/v1/onramp/quote",params:{projectId:Pt.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await _t.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?_t.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await _t.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Xi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Pt.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Xi.clientId=t,Xi.api=new B1({baseUrl:Mne,clientId:t})}},C2={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return hm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},T$={async getMyTokensWithBalance(t){const e=Cn.state.address,n=J.state.activeCaipNetwork,r=ot.getConnectorId("eip155")===fe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=tt.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===fe.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await _t.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=C2.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await it.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await it.walletGetAssets({account:t,chainFilter:[s]});if(!C2.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>C2.createBalance(l,e.caipNetworkId));return tt.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},ll=dr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),nGe={state:ll,replaceState(t){t&&Object.assign(ll,tb(t))},subscribe(t){return J.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return J.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){J.setAccountProp("status",t,e)},getCaipAddress(t){return J.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?dt.getPlainAddress(t):void 0;e===J.state.activeChain&&(J.state.activeCaipAddress=t),J.setAccountProp("caipAddress",t,e),J.setAccountProp("address",n,e)},setBalance(t,e,n){J.setAccountProp("balance",t,n),J.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){J.setAccountProp("profileName",t,e)},setProfileImage(t,e){J.setAccountProp("profileImage",t,e)},setUser(t,e){J.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){J.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){J.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){J.setAccountProp("currentTab",t,J.state.activeChain)},setTokenBalance(t,e){t&&J.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){J.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=J.getAccountProp("addressLabels",n)||new Map;r.set(t,e),J.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=J.getAccountProp("addressLabels",e)||new Map;n.delete(t),J.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){J.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){J.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&J.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){J.setAccountProp("socialWindow",t?tb(t):void 0,e)},setFarcasterUrl(t,e){J.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;ll.balanceLoading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?dt.getPlainAddress(r):void 0;if(ll.lastRetry&&!dt.isAllowedRetry(ll.lastRetry,30*Mi.ONE_SEC_MS))return ll.balanceLoading=!1,[];try{if(s&&e&&n){const a=await T$.getMyTokensWithBalance();return Cn.setTokenBalance(a,n),ll.lastRetry=void 0,ll.balanceLoading=!1,a}}catch(a){ll.lastRetry=Date.now(),t==null||t(a),Hh.showError("Token Balance Unavailable")}finally{ll.balanceLoading=!1}return[]},resetAccount(t){J.resetAccount(t)}},Cn=rc(nGe),rGe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=J.state.activeCaipNetwork,r=Nt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Cn.getCaipAddress(J.state.activeChain),o=t.chainNamespace!==J.state.activeChain,a=Cn.getCaipAddress(t.chainNamespace),l=ot.getConnectorId(J.state.activeChain)===fe.CONNECTOR_ID.AUTH,u=fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Nt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Nt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Nt.push("SwitchNetwork",{...r,network:t})}},eo=dr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),sGe={state:eo,subscribe(t){return Io(eo,()=>t(eo))},subscribeKey(t,e){return Hi(eo,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=J.state.activeChain,r=e&&e!==n,s=(i=J.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(it.state.wcBasic?bt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await bt.prefetch(),ot.setFilterByNamespace(t==null?void 0:t.namespace),nr.setLoading(!0,e),e&&r){const a=((o=J.getNetworkData(e))==null?void 0:o.caipNetwork)||J.getRequestedCaipNetworks(e)[0];a&&rGe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=J.state.noAdapters;Pt.state.manualWCControl||a&&!s?dt.isMobile()?Nt.reset("AllWallets"):Nt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Nt.reset(t.view,t.data):s?Nt.reset("Account"):Nt.reset("Connect")}eo.open=!0,d0.set({open:!0}),Er.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=Pt.state.enableEmbedded,e=!!J.state.activeCaipAddress;eo.open&&Er.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),eo.open=!1,Nt.reset("Connect"),nr.clearLoading(),t?e?Nt.replace("Account"):Nt.push("Connect"):d0.set({open:!1}),it.resetUri()},setLoading(t,e){e&&eo.loadingNamespaceMap.set(e,t),eo.loading=t,d0.set({loading:t})},clearLoading(){eo.loadingNamespaceMap.clear(),eo.loading=!1},shake(){eo.shake||(eo.shake=!0,setTimeout(()=>{eo.shake=!1},500))}},nr=rc(sGe),qW=2147483648,iGe={convertEVMChainIdToCoinType(t){if(t>=qW)throw new Error("Invalid chainId");return(qW|t)>>>0}},va=dr({suggestions:[],loading:!1}),oGe={state:va,subscribe(t){return Io(va,()=>t(va))},subscribeKey(t,e){return Hi(va,t,e)},async resolveName(t){var e,n;try{return await _t.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await _t.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{va.loading=!0,va.suggestions=[];const e=await _t.getEnsNameSuggestions(t);return va.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],va.suggestions}catch(e){const n=lx.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{va.loading=!1}},async getNamesForAddress(t){try{if(!J.state.activeCaipNetwork)return[];const n=tt.getEnsFromCacheForAddress(t);if(n)return n;const r=await _t.reverseLookupEnsName({address:t});return tt.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=lx.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=J.state.activeCaipNetwork,n=Cn.state.address,r=ot.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");va.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Nt.pushTransactionStack({onCancel(){Nt.replace("RegisterAccountName")}});const i=await it.signMessage(s);va.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=iGe.convertEVMChainIdToCoinType(Number(o));await _t.registerEnsName({coinType:a,address:n,signature:i,message:s}),Cn.setProfileName(t,e.chainNamespace),Nt.replace("RegisterAccountNameSuccess")}catch(s){const i=lx.parseEnsApiError(s,`Error registering name ${t}`);throw Nt.replace("RegisterAccountName"),new Error(i)}finally{va.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},lx=rc(oGe);let np=null;const nh={getSIWX(){return Pt.state.siwx},async initializeIfEnabled(){var i;const t=Pt.state.siwx,e=J.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(J.checkIfSupportedNetwork(n))try{if(np&&await np,(await t.getSessions(`${n}:${r}`,s)).length)return;await nr.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Er.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=it._getClient())==null?void 0:i.disconnect().catch(console.error)),Nt.reset("Connect"),Hh.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Pt.state.siwx,e=dt.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork(),r=it._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();ot.getConnectorId(n.chainNamespace)===fe.CONNECTOR_ID.AUTH&&Nt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),J.setLastConnectedSIWECaipNetwork(n),nr.close(),Er.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!nr.state.open||Nt.state.view==="ApproveTransaction")&&await nr.open({view:"SIWXSignMessage"}),Hh.showError("Error signing message"),Er.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=J.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,dt.getPlainAddress(J.getActiveCaipAddress())||""));s&&s.length>0?await J.switchActiveNetwork(r):await it.disconnect()}else await it.disconnect()}else nr.close();nr.close(),Er.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=J.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,dt.getPlainAddress(J.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=Pt.state.siwx,e=dt.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Nt.state.view==="ApproveTransaction",r=Nt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=nh.getSIWX();if(!i||!s.includes(fe.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=J.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await nh.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(np)return np;const r=nh.getSIWX();return r?(np=r.addSession({data:t,message:e,signature:n}).finally(()=>{np=null}),np):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=nh.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Hh.showLoading("Authenticating...",{autoClose:!1}),Cn.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),Er.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:nh.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),Er.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:nh.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Hh.hide()}}return!0},getSIWXEventProperties(){var e;const t=J.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:nu(t)===Vs.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Uo={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:fe.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},qo={ConnectorExplorerIds:{[fe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[fe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[fe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[fe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[fe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Uo.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Uo.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Uo.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Uo.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Uo.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Uo.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Uo.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Uo.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Uo.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Uo.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Uo.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[fe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[fe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[fe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[fe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[fe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[fe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[fe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[fe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[fe.CONNECTOR_ID.COINBASE]:"Coinbase",[fe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[fe.CONNECTOR_ID.LEDGER]:"Ledger",[fe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[fe.CONNECTOR_ID.INJECTED]:"INJECTED",[fe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[fe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[fe.CONNECTOR_ID.AUTH]:"AUTH",[Uo.CONNECTOR_TYPE_AUTH]:"AUTH"}},mo={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Uo.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=J.state.activeChain;return fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>ot.getConnectorId(e)===fe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},aGe=new AbortController,qd={EmbeddedWalletAbortController:aGe,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},cGe="rpc.walletconnect.org";function VW(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const _2=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],eE={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===cGe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:fe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${fe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return _2.includes(e)?VW(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:qo.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>eE.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Fa(a.url,a.config))}),_2.includes(t.caipNetworkId)&&r.push(Fa(VW(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Fa(a))}),uI(r)},extendWagmiTransports(t,e,n){if(_2.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return uI([n,Fa(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:fe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=tt.getActiveCaipNetworkId(),n=J.getAllRequestedCaipNetworks(),r=Array.from(((c=J.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},KW={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ls={set(t,e){Ol.isClient&&localStorage.setItem(`${Je.STORAGE_KEY}${t}`,e)},get(t){return Ol.isClient?localStorage.getItem(`${Je.STORAGE_KEY}${t}`):null},delete(t,e){Ol.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Je.STORAGE_KEY}${t}`))}},yS=30*1e3,Ol={checkIfAllowedToTriggerEmail(){const t=Ls.get(Je.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<yS){const n=Math.ceil((yS-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ls.get(Je.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<yS)return Math.ceil((yS-e)/1e3)}return 0},checkIfRequestExists(t){return Vs.NOT_SAFE_RPC_METHODS.includes(t.method)||Vs.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(KW.transactionHash))||(t==null?void 0:t.match(KW.signedMessage)))?Je.RPC_RESPONSE_TYPE_TX:Je.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Vs.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Tr=E.object({message:E.string()});function Be(t){return E.literal(Je[t])}const uR=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const lGe=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),uGe=E.object({email:E.string().email()}),dGe=E.object({otp:E.string()}),hGe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(uR),rpcUrl:E.optional(E.string())}),fGe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(uR),rpcUrl:E.optional(E.string())}),pGe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),gGe=E.object({email:E.string().email()}),mGe=E.object({otp:E.string()}),yGe=E.object({otp:E.string()}),wGe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),bGe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),vGe=E.object({type:E.string()}),EGe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),CGe=E.object({url:E.string()}),_Ge=E.object({userName:E.string()}),AGe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Vs.ACCOUNT_TYPES.EOA,Vs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(uR)}),SGe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),xGe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Vs.ACCOUNT_TYPES.EOA,Vs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(uR)}),IGe=E.object({uri:E.string()}),NGe=E.object({isConnected:E.boolean()}),TGe=E.object({chainId:E.string().or(E.number())}),RGe=E.object({chainId:E.string().or(E.number())}),PGe=E.object({newEmail:E.string().email()}),OGe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const kGe=E.object({version:E.string().optional()}),DGe=E.object({type:E.string(),address:E.string()}),MGe=E.any(),LGe=E.object({method:E.literal("eth_accounts")}),UGe=E.object({method:E.literal("eth_blockNumber")}),$Ge=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),BGe=E.object({method:E.literal("eth_chainId")}),FGe=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),jGe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),WGe=E.object({method:E.literal("eth_gasPrice")}),zGe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),HGe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),GGe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),qGe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),VGe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),KGe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),YGe=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),QGe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),JGe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),ZGe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),XGe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),eqe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),tqe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),nqe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),rqe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),sqe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),iqe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),oqe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),aqe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),cqe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),lqe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),uqe=E.object({method:E.literal("eth_newBlockFilter")}),dqe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),hqe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),fqe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),pqe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),gqe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),YW=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),mqe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),yqe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),wqe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),bqe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),vqe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),Eqe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),Cqe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),_qe=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),Aqe=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),Sqe=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),xqe=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),Iqe=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),QW=E.object({token:E.string()}),Fe=E.object({id:E.string().optional()}),Nv={appEvent:Fe.extend({type:Be("APP_SWITCH_NETWORK"),payload:lGe}).or(Fe.extend({type:Be("APP_CONNECT_EMAIL"),payload:uGe})).or(Fe.extend({type:Be("APP_CONNECT_DEVICE")})).or(Fe.extend({type:Be("APP_CONNECT_OTP"),payload:dGe})).or(Fe.extend({type:Be("APP_CONNECT_SOCIAL"),payload:hGe})).or(Fe.extend({type:Be("APP_GET_FARCASTER_URI")})).or(Fe.extend({type:Be("APP_CONNECT_FARCASTER")})).or(Fe.extend({type:Be("APP_GET_USER"),payload:E.optional(fGe)})).or(Fe.extend({type:Be("APP_GET_SOCIAL_REDIRECT_URI"),payload:pGe})).or(Fe.extend({type:Be("APP_SIGN_OUT")})).or(Fe.extend({type:Be("APP_IS_CONNECTED"),payload:E.optional(QW)})).or(Fe.extend({type:Be("APP_GET_CHAIN_ID")})).or(Fe.extend({type:Be("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Fe.extend({type:Be("APP_INIT_SMART_ACCOUNT")})).or(Fe.extend({type:Be("APP_SET_PREFERRED_ACCOUNT"),payload:vGe})).or(Fe.extend({type:Be("APP_RPC_REQUEST"),payload:YW.or(Iqe).or(LGe).or(UGe).or($Ge).or(BGe).or(FGe).or(jGe).or(WGe).or(zGe).or(HGe).or(GGe).or(qGe).or(VGe).or(KGe).or(YGe).or(QGe).or(JGe).or(ZGe).or(XGe).or(eqe).or(tqe).or(nqe).or(rqe).or(sqe).or(iqe).or(oqe).or(aqe).or(cqe).or(lqe).or(uqe).or(dqe).or(hqe).or(fqe).or(pqe).or(gqe).or(YW).or(mqe).or(yqe).or(wqe).or(bqe).or(vqe).or(Eqe).or(_qe).or(Cqe).or(Aqe).or(Sqe).or(xqe).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL"),payload:gGe})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:mGe})).or(Fe.extend({type:Be("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:yGe})).or(Fe.extend({type:Be("APP_SYNC_THEME"),payload:wGe})).or(Fe.extend({type:Be("APP_SYNC_DAPP_DATA"),payload:bGe})).or(Fe.extend({type:Be("APP_RELOAD")})).or(Fe.extend({type:Be("APP_RPC_ABORT")})),frameEvent:Fe.extend({type:Be("FRAME_SWITCH_NETWORK_ERROR"),payload:Tr}).or(Fe.extend({type:Be("FRAME_SWITCH_NETWORK_SUCCESS"),payload:RGe})).or(Fe.extend({type:Be("FRAME_CONNECT_EMAIL_SUCCESS"),payload:EGe})).or(Fe.extend({type:Be("FRAME_CONNECT_EMAIL_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:CGe})).or(Fe.extend({type:Be("FRAME_GET_FARCASTER_URI_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:_Ge})).or(Fe.extend({type:Be("FRAME_CONNECT_FARCASTER_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_CONNECT_OTP_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_CONNECT_OTP_SUCCESS")})).or(Fe.extend({type:Be("FRAME_CONNECT_DEVICE_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Fe.extend({type:Be("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:AGe})).or(Fe.extend({type:Be("FRAME_CONNECT_SOCIAL_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_GET_USER_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_GET_USER_SUCCESS"),payload:xGe})).or(Fe.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:IGe})).or(Fe.extend({type:Be("FRAME_SIGN_OUT_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_SIGN_OUT_SUCCESS")})).or(Fe.extend({type:Be("FRAME_IS_CONNECTED_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_IS_CONNECTED_SUCCESS"),payload:NGe})).or(Fe.extend({type:Be("FRAME_GET_CHAIN_ID_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_GET_CHAIN_ID_SUCCESS"),payload:TGe})).or(Fe.extend({type:Be("FRAME_RPC_REQUEST_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_RPC_REQUEST_SUCCESS"),payload:MGe})).or(Fe.extend({type:Be("FRAME_SESSION_UPDATE"),payload:QW})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SUCCESS"),payload:SGe})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:PGe})).or(Fe.extend({type:Be("FRAME_SYNC_THEME_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_SYNC_THEME_SUCCESS")})).or(Fe.extend({type:Be("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Fe.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:OGe})).or(Fe.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:DGe})).or(Fe.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_READY"),payload:kGe})).or(Fe.extend({type:Be("FRAME_RELOAD_ERROR"),payload:Tr})).or(Fe.extend({type:Be("FRAME_RELOAD_SUCCESS")}))};function A2(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function Nqe({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=fe.BLOCKCHAIN_API_RPC_URL}){const i=new URL(OHe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class Tqe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=fe.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!A2(Je.FRAME_EVENT_KEY,u))return;const d=Nv.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}Ol.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{Ol.isClient&&window.addEventListener("message",({data:a})=>{if(!A2(Je.FRAME_EVENT_KEY,a))return;const c=Nv.frameEvent.parse(a);o(c)})},onAppEvent:o=>{Ol.isClient&&window.addEventListener("message",({data:a})=>{if(!A2(Je.APP_EVENT_KEY,a))return;const c=Nv.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(Ol.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");Nv.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Ol.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Nv.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Ol.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=Nqe({projectId:e,chainId:r,version:DHe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class Rqe{constructor(e){var i;const n=Cm({level:kHe}),{logger:r,chunkLoggerController:s}=xT({opts:n});this.logger=Qs(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Pqe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Rqe(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new Tqe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ls.get(Je.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ls.get(Je.EMAIL)}getUsername(){return Ls.get(Je.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Je.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Ol.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Je.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Je.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Je.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Je.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Je.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Je.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Je.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Je.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Je.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Je.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Je.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Je.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Je.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Je.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Je.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Je.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Je.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Je.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Je.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Je.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Vs.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Je.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Je.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Je.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Vs.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Vs.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Je.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Je.APP_SYNC_DAPP_DATA,Je.APP_SYNC_THEME,Je.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Je.APP_CONNECT_EMAIL,Je.APP_CONNECT_DEVICE,Je.APP_CONNECT_OTP,Je.APP_CONNECT_SOCIAL,Je.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,A;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ls.set(Je.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ls.set(Je.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ls.set(Je.EMAIL,e),Ls.set(Je.EMAIL_LOGIN_USED_KEY,"true"),Ls.delete(Je.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ls.delete(Je.EMAIL_LOGIN_USED_KEY),Ls.delete(Je.EMAIL),Ls.delete(Je.LAST_USED_CHAIN_KEY),Ls.delete(Je.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ls.set(Je.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ls.get(Je.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ls.set(Je.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=zh.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class h0{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return h0.instance||(h0.instance=new Pqe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),h0.instance}}const Oqe={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},JW={filterOutDuplicatesByRDNS(t){const e=Pt.state.enableEIP6963?ot.state.connectors:[],n=tt.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&dt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=ot.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=tt.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=ot.state,{featuredWalletIds:n}=Pt.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=Pt.state.features)==null?void 0:c.connectMethodsOrder),r=e||ot.state.connectors;if(n)return n;const{injected:s,announced:i}=ux.getConnectorsByType(r,bt.state.recommended,bt.state.featured),o=s.filter(ux.showConnector),a=i.filter(ux.showConnector);return o.length||a.length?["wallet","email","social"]:Oqe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&bt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&bt.state.excludedWallets.some(r=>mo.isLowerCaseMatch(r.name,t.name));return e||n}},ux={getConnectorsByType(t,e,n){const{customWallets:r}=Pt.state,s=tt.getRecentWallets(),i=JW.filterOutDuplicateWallets(e),o=JW.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&bt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&bt.state.excludedWallets.some(i=>mo.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!dt.isMobile()||dt.isMobile()&&!e&&!it.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(J.state.chains.values()).some(n=>ot.getConnectorId(n.namespace)===fe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=Pt.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:Pt.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),g=h.filter(({type:w})=>!p.some(({type:b})=>b===w));return Array.from(new Set([...p,...g].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!dt.isMobile())return{accounts:[],chainId:void 0};if(t.id===fe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};sd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;sd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;sd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const dx={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([dx.getAddresses(t),dx.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:dx.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[qo.NetworkImageIds[e.id]]}]})}},fy={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function F1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const ZW=F1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),XW=F1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});F1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});F1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});F1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const kqe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Ag={getMethodsByChainNamespace(t){return kqe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case ZW.caipNetworkId:u.chains.push(ZW.deprecatedCaipNetworkId);break;case XW.caipNetworkId:u.chains.push(XW.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await lx.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Ag.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Ag.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>dt.isCaipAddress(d)).map(d=>zh.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>zh.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class Dqe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case fe.CHAIN.EVM:await this.syncEVMConnections(e);break;case fe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case fe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const c=Ag.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await ux.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==fe.CONNECTOR_ID.AUTH&&a.id!==fe.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const c=Ag.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,w,y;if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const b=Ag.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>dt.createAccount(fe.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:fe.CHAIN.BITCOIN,publicKey:((h=u[fy.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[fy.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[fy.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:fe.CHAIN.BITCOIN,publicKey:((g=u[fy.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((w=u[fy.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((y=u[fy.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>mo.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>mo.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>mo.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>mo.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>mo.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class Lne{constructor({provider:e,namespace:n}){this.id=fe.CONNECTOR_ID.WALLET_CONNECT,this.name=qo.ConnectorNamesMap[fe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=qo.ConnectorImageIds[fe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=J.getCaipNetworks.bind(J),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=Pt.state.universalProviderConfigOverride,s=Ag.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return nh.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Mqe})}}const Mqe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],Lqe=[fe.CONNECTOR_ID.AUTH,fe.CONNECTOR_ID.WALLET_CONNECT];class Uqe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>J.getCaipNetworks(n),this.getConnectorId=n=>ot.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new Dqe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:fe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:fe.CONNECTOR_ID.AUTH,type:"AUTH",name:fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:qo.ConnectorImageIds[fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!mo.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){Cn.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=nu(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Lne);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=dt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=dt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=dt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&mo.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=dt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),mo.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?dx.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),mo.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(Lqe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function $qe(t){let e=[],n,r;function s(a){return eN.parseEvmChainId(a)||1}function i(){var a;return n||(n=h0.getInstance({projectId:t.options.projectId,chainId:(a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?up.open(qd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?up.open(qd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&up.open(qd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:qd.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>J.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const w=eN.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=w||y,!l)throw new Error("ChainId not found in provider")}const u=nu("eip155"),{address:d,chainId:h,accounts:f}=await nh.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:fe.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:fe.CONNECTOR_ID.AUTH,name:fe.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:fe.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=h0.getInstance({projectId:t.options.projectId,chainId:(c=J.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:qd.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?up.open(qd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?up.open(qd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&up.open(qd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>J.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=J.state.activeChain===fe.CHAIN.EVM;if(fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>ot.getConnectorId(h)===fe.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Ql(new Error("chain not found on connector."));const d=await this.getProvider(),h=nu("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Ql(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Yu)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}R$.type="walletConnect";function R$(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:R$.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=J.getCaipNetworks(),w=await this.getProvider();if(!w)throw new Xd;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=Pt.state.universalProviderConfigOverride;if(!w.session||y){const S=Ag.createNamespaces(g,b);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(O=>Number(O.id)))}const v=await this.getAccounts(),A=await this.getChainId(),_=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,I=_==null?void 0:_.some(S=>Number(S.split(":")[1])===A);let x=1;I?x=A:_!=null&&_[0]&&(x=Number(_[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const N=b==null?void 0:b.defaultChain;return w.setDefaultChain(N??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Xr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,y,b;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(b=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[fe.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const A=v==null?void 0:v.toLowerCase();return p.has(A)?!1:(p.add(A),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=tt.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=tt.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],b=y==null?void 0:y.find(v=>v.id===w);b&&b.chainNamespace===fe.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,y,b;const d=(g=e.getCaipNetwork(fe.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[fe.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=J.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,y,b;const f=await this.getProvider();if(!f)throw new Xd;const p=J.getCaipNetworks().find(v=>v.id===h);if(!p)throw new Ql(new DC);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const A=v;if(/(?:user rejected)/iu.test(A.message))throw new Xr(A);try{let _;d!=null&&d.blockExplorerUrls?_=d.blockExplorerUrls:_=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const I=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],x={blockExplorerUrls:_,chainId:nt(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:I};await f.request({method:"wallet_addEthereumChain",params:[x]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,h]),{...p,id:p.id}}catch(_){throw new Xr(_)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Yu(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(J.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[fe.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Tv=dr({pendingTransactions:0}),ez={state:Tv,subscribeKey(t,e){return Hi(Tv,t,e)},increase(t){Tv[t]+=1},decrease(t){Tv[t]-=1},reset(t){Tv[t]=0}};function Bqe(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function Fqe(t){if(dt.isSafeApp()){const{safe:e}=await hi(async()=>{const{safe:n}=await import("./index-YyWfSBqT.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function jqe(t){try{const{coinbaseWallet:e}=await hi(async()=>{const{coinbaseWallet:n}=await import("./index-YyWfSBqT.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const Wqe={enable:!1,pollingInterval:3e4};class zqe extends Uqe{constructor(e){const n=eE.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=fe.CHAIN.EVM,this.adapterType=fe.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Wqe,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===fe.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>dt.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=n0(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>dt.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=n0(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===fe.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=eE.getCaipNetworkId(s);i?n[s.id]=eE.extendWagmiTransports(s,e.projectId,i):n[s.id]=eE.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=QQ({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=C_e(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),ez.increase("pendingTransactions")}});const e=ez.subscribeKey("pendingTransactions",n=>{var r;n>=fe.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){zQ(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),HQ(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===fe.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:tt.getConnectedSocialProvider(),username:tt.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await jqe(this.wagmiConfig.connectors);s&&n.push(s)}const r=await Fqe(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(R$(e,n)),e.enableEIP6963!==!1&&r.push(bT({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push($qe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:qo.ConnectorNamesMap[r.id]??r.name,imageId:qo.ConnectorImageIds[r.id],type:qo.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===fe.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await b_e(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=n0(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await y_e(this.wagmiConfig,s);const i=await w_e(this.wagmiConfig,s);return await qQ(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(eN.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await VQ(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await d_e(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return HEe(e.value,e.decimals)}formatUnits(e){return hm(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===fe.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===fe.CONNECTOR_ID.AUTH||e.id===fe.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:qo.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:qo.ConnectorNamesMap[e.id]??e.name,imageId:qo.ConnectorImageIds[e.id],type:qo.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===fe.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){GQ(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=mc(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(dt.isSafeApp()&&n===fe.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await MS(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await MS(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await zD(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===fe.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((b,v)=>mo.isLowerCaseMatch(b,r)?-1:mo.isLowerCaseMatch(v,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await MS(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await WD(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=tt.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await WQ(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});tt.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=mc(this.wagmiConfig).find(i=>mo.isLowerCaseMatch(i.connector.id,e.id));return await FD(this.wagmiConfig,{connector:n}),Pt.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=mc(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await FD(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await zD(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=mc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=Bqe(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=mc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=mc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=mc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:fe.CONNECTOR_ID.AUTH,type:"AUTH",name:fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:qo.ConnectorImageIds[fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=mc(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(J.state.activeChain==="eip155")return;WD(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new Lne({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const Une="7c65f27254d6ddd24cf7eedf2685c4fb",Hqe={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},Gqe=new zqe({projectId:Une,networks:[Qo,fI,LI,wee,UI,$I,BI],pendingTransactionsFilter:{enable:!0,pollingInterval:1e3}}),qqe=Q4e({projectId:Une,metadata:Hqe,adapters:[Gqe],networks:[Qo,fI,LI,wee,UI,$I,BI],features:{analytics:!0}});vee(qqe);const Vqe=new v1e,Kqe=typeof window<"u"&&window.location.hostname.startsWith("chess."),Yqe=()=>pje("(max-width: 768px)")?m.jsx(fje,{}):m.jsx(ije,{});q2.createRoot(document.getElementById("root")).render(m.jsx(Zo.StrictMode,{children:m.jsx(H_e,{config:gje,children:m.jsx(W1e,{client:Vqe,children:m.jsx(rje,{children:m.jsx(eje,{children:Kqe?m.jsx(ZS,{path:"/*",element:m.jsx(BW,{})}):m.jsxs(m.Fragment,{children:[m.jsx(ZS,{path:"/",element:m.jsx(Yqe,{})}),m.jsx(ZS,{path:"/chess",element:m.jsx(BW,{})})]})})})})})}));export{NKe as $,Ye as A,pt as B,je as C,ct as D,AE as E,u3 as F,jv as G,Ic as H,kAe as I,Un as J,PKe as K,i5 as L,_s as M,TAe as N,be as O,kd as P,KS as Q,Wt as R,Oc as S,lo as T,uSe as U,IE as V,Gs as W,xKe as X,Cs as Y,im as Z,Il as _,QS as a,dee as a0,o5 as a1,Gw as a2,hi as a3,_Ve as a4,Yu as a5,Ql as a6,DC as a7,nt as a8,Xr as a9,fz as aA,pVe as aB,yC as aC,dwe as aD,k_e as aE,ec as aF,Za as aG,dQ as aH,kEe as aI,Xd as aa,sQ as ab,bT as ac,pe as ad,QL as ae,as as af,Abe as ag,fT as ah,aU as ai,Tbe as aj,l1 as ak,Ka as al,Uf as am,wE as an,Yl as ao,kDe as ap,pKe as aq,gj as ar,WZ as as,_De as at,DDe as au,gKe as av,fKe as aw,LT as ax,wKe as ay,mKe as az,Bn as b,We as c,at as d,H as e,yr as f,Qu as g,RKe as h,sd as i,Ko as j,gt as k,uo as l,yke as m,Ll as n,C4e as o,Qe as p,Tl as q,TKe as r,En as s,bJ as t,ur as u,Z4 as v,ua as w,SKe as x,wi as y,mi as z};
